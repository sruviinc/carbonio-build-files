{"version":3,"file":"662.31178f5a.chunk.js","mappings":"+nGAWA,MAOA,EAP4BA,EAAGC,eAC9B,MAAMC,GAAUC,EAAAA,EAAAA,cAAaC,IAC5BC,QAAQD,MAAMA,EAAM,GAElB,IACH,OAAOE,IAAAA,cAACC,EAAAA,QAAO,CAACL,QAASA,GAAUD,EAAmB,ECL1CO,EAAyB,CACrC,CAAEC,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,SACrC,CAAEF,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,QACrC,CAAEF,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,QACrC,CAAEF,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,SACrC,CAAEF,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,UACrC,CAAEF,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,OACrC,CAAEF,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,UACrC,CAAEF,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,QACrC,CAAEF,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,QACrC,CAAEF,OAAQ,EAAGC,IAAK,UAAWC,OAAQ,WAMzBC,EAAU,CACtBC,UAAW,IACXC,MAAO,IACPC,MAAO,IACPC,KAAM,IACNC,KAAM,IACNC,OAAQ,IACRC,SAAU,IACVC,KAAM,IACNC,cAAe,IACfC,SAAU,KACVC,KAAM,KACNC,SAAU,KACVC,cAAe,KACfC,QAAS,KACTC,MAAO,KACPC,UAAW,KACXC,4BAA6B,QAGjBC,EAAe,oBACfC,EAAkB,WAIlBC,EAAkB,WAClBC,EAAgB,SAEhBC,EAAe,CAE3BC,aAAc,eAEdC,kBAAmB,oBAEnBC,QAAS,UAETC,aAAc,eAEdC,QAAS,UAETC,aAAc,eAEdC,OAAQ,SAERC,YAAa,cAEbC,YAAa,cAEbC,iBAAkB,mBAElBC,OAAQ,SAERC,YAAa,cAEbxB,SAAU,WAEVyB,cAAe,gBACfC,IAAK,OAGOC,EAA+C,CAC3DC,oBAAqB,CAAC,mBACtBC,OAAQ,GACRC,IAAK,0KAMLC,kBAAmB,CAAC,eACpBC,yBAAyB,GAGpBC,EAAO,aAEPC,EAAgB,GAAGD,cAEZE,EAAgBC,OAAOC,SAASC,SAASC,WAAWL,GACpDM,EAAWL,EAAgBD,EAAgBD,EAC3CQ,EAEZ,6aAGYC,EAAY,YAEZC,EAAqB,CAAC,OAAQ,UAAW,YAGzCC,EAAc,CAC1BC,cAAe,gBACfC,IAAK,MACLC,aAAc,eACdC,QAAS,UACTC,QAAS,UACTC,SAAU,WACVC,YAAa,cACbC,qBAAsB,uBACtBC,cAAe,gBACfC,KAAM,OACNC,KAAM,OACNC,KAAM,QAEMC,EAA6B,WAC7BC,EAAiC,SACjCC,EAA2B,qBAC3BC,EAA2B,aAC3BC,EAAkB,CAC9B,CAAEC,MAAO,GAAIC,MAAO,MACpB,CAAED,MAAO,KAAMC,MAAO,KACtB,CAAED,MAAO,IAAKC,MAAO,KACrB,CAAED,MAAO,MAAOC,MAAO,KACvB,CAAED,MAAO,IAAKC,MAAO,OAETC,EAAiB,IACjBC,EAAgB,CAC5BC,MAAO,KACPC,OAAQ,IACRC,IAAK,GAGOC,EAAuB,sBACvBC,EAAuB,qBACvBC,EAAmB,oEAEnBC,EAAoB,CAChCC,OAAQ,SACRC,QAAS,UACT5F,MAAO,SAGK6F,EAAoB,UACpBC,EAAoB,YACpBC,EAAsB,OACtBC,EAAkB,oBAClBC,EAAyB,GACzBC,EAAuB,CACnCC,IAAK,GACLC,KAAM,IAGMC,EAA6B,CAAC,QAAS,SAAU,OAAQ,QACzDC,EAAgB,CAAEC,WAAY,cAE9BC,EAAO,CACnBC,QAAS,oBACTC,MAAO,kBACPC,KAAM,iBACNC,IAAK,aACLC,KAAM,kB,mDCrKA,MAAMC,IAAkBC,EAAAA,EAAAA,KAAAA,EAAuB,KAAM,CAC3DC,eAAe,EACfP,aAASQ,EACTC,QAAS,GACTC,SAAU,CACTC,MAAO,CAAC,EACRC,MAAO,CAAC,EACRC,MAAO,IAERC,UAAW,EACXC,qBAAsBC,KAAKC,UCFfC,GAAmBA,IAAeb,IAAiBc,GAAMA,EAAEZ,gBAE3Da,GAAiBA,IAAef,IAAiBc,GAAMA,EAAEnB,UACzDqB,GAAkBA,KAC9B,MAAMC,EAAOjB,IAAiBc,GAAMA,EAAEnB,UACtC,OAAOuB,EAAAA,EAAAA,UAAQ,IAAOD,EAAO,CAACA,GAAmB,IAAK,CAACA,GAAM,EAGjDE,GAAgBA,IAC5BnB,IAAiBc,GAAMA,EAAEnB,SAASyB,QAAU,CAAEC,QAAS,MAE3CC,GAAgBC,IAC5B,MAAM,QAAEF,GAAYF,KACpB,OAAOD,EAAAA,EAAAA,UACN,KAAMM,EAAAA,EAAAA,MAAKH,EAAS,CAAC,QAASE,KAASE,QAAW,IAClD,CAACF,EAAOF,GACR,EAEWK,GAAkBA,IAAuB1B,IAAiBc,GAAMA,EAAET,WAClEsB,GAAiBA,IAAcC,IAC3C5B,IAAiBc,IAAMe,EAAAA,EAAAA,KAAIf,EAAET,UAAUyB,EAAAA,EAAAA,MAAKF,EAAM,QAEtCG,GAAiBA,IAA2B/B,GAAgBgC,WAAWrC,QACvEsC,GAAkBA,KAC9B,MAAM,QAAEtC,GAAYK,GAAgBgC,WAC9BE,EAAsB,GAI5B,OAHIvC,GACHuC,EAASC,KAAKxC,GAERuC,CAAQ,EAEHE,GAAkBA,IAAuBpC,GAAgBgC,WAAW3B,SACpEgC,GAAiBA,IAAcT,KAC3CC,EAAAA,EAAAA,KAAI7B,GAAgBgC,WAAW3B,UAAUyB,EAAAA,EAAAA,MAAKF,EAAM,MAExCU,GAAgBA,IAC5BtC,GAAgBgC,WAAWrC,SAASyB,QAAU,CAAEC,QAAS,IAE7CkB,GAAgBhB,IAC5BC,EAAAA,EAAAA,MAAKc,KAAgBjB,QAAS,CAAC,QAASE,KAASE,QAAW,ICbvD,SAAEpB,IAAaL,GAAgBgC,WAE/BQ,GACJnC,IAAUC,OAAOmC,kBACjBpC,IAAUE,OAAOmC,cAClB,KAEKC,GAAcC,EAAAA,GAAAA,eAAuB,CAAEC,IAAKL,KAE5CM,GAAsC,CAC3CC,mBAAmB,EACnBC,YAAY,EACZC,kBAAmB,KACnBJ,IAAKL,GACLU,YAAa,KACbC,OAAO,EACPC,cAAe,CACdC,aAAa,GAEdC,kBAAmBA,CAACC,EAAGC,EAAIC,KAE1BtK,QAAQuK,KAAK,iCAAiCD,KAAO,EAEtDE,QAAS,CACRC,SAAU,+FAICC,IAAe5D,EAAAA,EAAAA,KAAAA,EAAmC6D,IAAG,CACjEC,UAAW,CAAC,EACZpB,eACAqB,OAAQ,KACRC,UAAYD,IACXF,GACCI,EAAAA,EAAAA,KAASC,IACRA,EAAMH,OAASA,GACfI,EAAAA,EAAAA,SAAQD,EAAMJ,WAAYM,GAAaA,EAASC,eAAeN,IAAQ,IAExE,EAEFO,QAASA,CAACC,EAA6BR,KACtC,MAAMS,EAzDUD,IAAuD,IACrEA,EACH,CACCE,OAAQ,GACRC,YAAa,GACbC,cAAe,GACfC,KAAMjK,EACNkK,UAAW,EACX1E,QAAS,GACT2E,KAAM,QACNC,QAAS,GACTC,KAAM,GACNC,QAAS,UA6CaC,CAASX,GAC/BV,GACCI,EAAAA,EAAAA,KAASC,IACRA,EAAMJ,WAAYqB,EAAAA,EAAAA,QACjBX,GACA,CAACY,EAAKC,KACL,MAAMC,EAAU3C,EAAAA,GAAAA,iBAmBhB,OAlBA2C,EAGEC,IAAIC,EAAAA,GAGJC,KAAK,IACF5C,GACHD,IAAKmB,EACLL,QAAS,CACRC,SACC0B,EAAIT,OAASjK,EACV,6FACA,IAAG+K,EAAAA,EAAAA,WAAUL,EAAIV,cAAcgB,MAAM,MAAM9D,KAAK,4BAIvDuD,EAAIC,EAAIT,MAAQU,EACTF,CAAG,GAEX,CAAC,GAEFlB,EAAMxB,YAAYkD,EAAI1B,EAAMJ,UAAUnJ,GAAciL,EACpD1B,EAAMH,OAASA,CAAM,IAEtB,MAIHrB,GACE6C,IAAIC,EAAAA,GAEJD,IAAIM,EAAAA,kBAGJJ,KAAK5C,IC/GA,MAAMiD,GAAwBA,EACpCC,MACAjN,eAEA,MAAM,UAAEgL,EAAS,YAAEpB,GAAgBkB,GAAa7B,WAC1CiE,EAAOlC,EAAUiC,IAAQjC,EAAUnJ,IAAiB+H,EAE1D,OAAOvJ,IAAAA,cAAC8M,EAAAA,gBAAe,CAACD,KAAMA,GAAOlN,EAA2B,ECFjE,GAN2BoN,EAAGH,MAAKjN,cAClCK,IAAAA,cAAC2M,GAAqB,CAACC,IAAKA,GAC3B5M,IAAAA,cAACN,EAAe,KAAEC,ICoBdqN,GAAmBA,IAAMhN,IAAAA,cAAA,SAAG,qBAErBiN,GAAsBC,IAAyB,CAC3DC,KAAMD,EAAMC,OAAQ,EACpBC,MAAOF,EAAME,OAAS,EACtBC,UAAWH,EAAMG,YAAa,EAC9BC,MAAOJ,EAAMI,OAAS,YChCVC,IAAiB1G,EAAAA,EAAAA,KAAAA,EAAsB,CAAC6D,EAAKjC,KAAQ,CACjE+E,MAAO,GACPC,gBAAgB,EAChBC,aAAS3G,EACT4G,kBAAmBA,CAACF,EAAyBC,IAC5ChD,EAAI,CAAE+C,iBAAgBC,YACvBE,YAAcJ,GACb9C,EAAI,CAAE8C,OAAOK,EAAAA,EAAAA,YAAWL,GAASA,EAAM/E,IAAM+E,OAASA,IACvDM,aAAeC,GAAyBrD,EAAI,CAAEqD,eCZlCC,GAAoB,gBAEpBC,GAAmBC,IAC/BC,eAAeC,QAAQJ,GAAmBE,GAC1CX,GAAe3E,WAAWkF,aAAaI,EAAU,EAErCG,GAAkBA,KAI9B,MAAM,OAAEN,GAAWR,KAEnB,MAAO,CAACQ,GAAUI,eAAeG,QAAQN,UAAsBjH,EAAWkH,GAAgB,ECuDrFM,GAAsB,aAE5B,SAASC,GACRC,EACAC,EACAC,IAEKC,EAAAA,EAAAA,MAAKH,GAAQI,GAASA,EAAKC,KAAOJ,EAAUI,OAChDL,EAAM1F,KAAK2F,GACXC,IAAQF,EAAOC,GAEjB,CAEA,SAASK,GAA+CN,GACvDA,EAAMO,MAAK,CAACC,EAAGC,IAAMD,EAAEE,SAAWD,EAAEC,UACrC,CAEA,SAASC,GAAwDX,EAAYC,GAC5EF,GAAgBC,EAAOC,EAAWK,GACnC,CAEA,SAASM,GAAsCZ,EAAYK,GAC1D,MAAMQ,GAAQC,EAAAA,EAAAA,WAAUd,GAAQI,GAASA,EAAKC,KAAOA,KACtC,IAAXQ,GACHb,EAAMe,OAAOF,EAAO,EAEtB,CAEA,MAAMG,GAAyB,CAC9BC,WAAW,EACXtE,KAAM,CAAC,EACPuE,YAAa,CAAC,EACdC,MAAO,CACNtE,OAAQ,GACRC,YAAa,GACbC,cAAe,GACfC,KAAMjK,EACNkK,UAAW,EACX1E,QAAS,GACT2E,KAAM,QACNC,QAAS,GACTC,KAAM,GACNC,QAAS,SAEV+D,YAAa,CAAC,EACdC,OAAQ,CAAC,EACTC,MAAO,CACNC,WAAY,GACZC,aAAc,GACdC,QAAS,GACTC,MAAO,GACPC,WAAY,GACZnJ,SAAU,GACVoJ,OAAQ,GACRC,sBAAuB,GACvBC,wBAAyB,KAKdC,IAAc3J,EAAAA,EAAAA,KAAAA,EAAgC,CAAC6D,EAAKjC,KAAQ,IACrEgH,GACHgB,QAAUrF,IACTV,GAAI,KACH,MAAM,WAAEgG,EAAU,SAAEC,EAAQ,YAAEhB,IAAgB3D,EAAAA,EAAAA,QAQ7CZ,GACA,CAACwF,EAAa1E,KACb,GAAIA,EAAIT,KAAM,CACb,MAAMoF,EH/HiB3E,KAA4B,CACxDZ,OAAQY,EAAIZ,QAAU,GACtBC,YAAaW,EAAIX,aAAe,oBAEhCC,cAAeU,EAAIV,eAAiB,GACpCC,KAAMS,EAAIT,MAAQ,SAClBC,SAAUQ,EAAIR,UAAY,GAC1B1E,QAASkF,EAAIlF,SAAW,GACxB2E,KAAMO,EAAIP,MAAQ,WAClBC,QAASM,EAAIN,QACbC,KAAMK,EAAIL,MAAQ,OAClBC,QAASI,EAAIJ,SAAW,SACxBgF,UAAW5E,EAAI4E,YGmHYC,CAAa7E,GAC/BA,EAAIT,OAASjK,EAChBoP,EAAYF,WAAWxE,EAAIT,MAAQoF,EAEnCD,EAAYD,SAAWE,EAExBD,EAAYjB,YAAYzD,EAAIT,MAAQ,CAAC,CACtC,CACA,OAAOmF,CAAW,GAEnB,CAAEF,WAAY,CAAC,EAAGC,SAAU,CAAC,EAAqBhB,YAAa,CAAC,IAEjE,MAAO,CACNvE,KAAMsF,EACNd,MAAOe,EACPhB,cACA,GACA,EAEHqB,UAAY9E,IACXxB,GACCI,EAAAA,EAAAA,KAAmBC,IAClBA,EAAMK,KAAKc,EAAIT,MAAQ,IAAKV,EAAMK,KAAKc,EAAIT,SAAUS,EAAK,IAE3D,EAEF+E,cACE/E,GACAgF,IACAxG,GACCI,EAAAA,EAAAA,KAAmBC,IAClBA,EAAM4E,YAAYzD,IAAOiF,EAAAA,EAAAA,OAAMpG,EAAM4E,YAAYzD,GAAMgF,EAAQ,IAEhE,EAEHE,SAAWC,IACV,MAAM,UAAE3B,GAAcjH,IACtB,OAAIiH,GAAc2B,EAAUC,QAAU5B,GAAc2B,EAAU3B,WAG9DhF,GACCI,EAAAA,EAAAA,KAAmBC,IAClBA,EAAM+E,OAAOuB,EAAUvC,IAAMuC,EACzBA,EAAUrB,aAAeqB,EAAU3B,WACtCN,GAAWrE,EAAMgF,MAAMC,WAAY,CAClC9D,IAAKmF,EAAUnF,IACf4C,GAAIuC,EAAUvC,GACdwC,MAAOD,EAAUC,MACjBC,UAAWF,EAAUrB,WACrB9C,MAAOmE,EAAUnE,MACjBiC,SAAUkC,EAAUlC,SACpBqC,QAASH,EAAUG,QACnBzM,MAAOsM,EAAUtM,QAGfsM,EAAUpB,cACbzB,GAAgBzD,EAAMgF,MAAME,aAAc,CACzC/D,IAAKmF,EAAUnF,IACf4C,GAAIuC,EAAUvC,GACdwC,MAAOD,EAAUC,MACjBC,UAAWF,EAAUpB,eAGnBoB,EAAUnB,SACb1B,GAAgBzD,EAAMgF,MAAMG,QAAS,CACpChE,IAAKmF,EAAUnF,IACf4C,GAAIuC,EAAUvC,GACdwC,MAAOD,EAAUC,MACjBC,UAAWF,EAAUnB,UAInBmB,EAAUnF,KAAOnB,EAAMK,KAAKiG,EAAUnF,OAAgC,IAAxBmF,EAAU3B,YAC3D3E,EAAMK,KAAKiG,EAAUnF,KAAKJ,QAAUuF,EAAUtM,MAC/C,KAGKsM,EAAUvC,IAvCTP,EAuCW,EAEpBkD,mBAAoBA,CAAC3C,EAAI0C,KACxB9G,GACCI,EAAAA,EAAAA,KAAmBC,IAClB,MAAM2G,GAAMnC,EAAAA,EAAAA,WAAUxE,EAAMgF,MAAMC,YAAa2B,GAASA,EAAK7C,KAAOA,IAChE4C,GAAO,IACV3G,EAAMgF,MAAMC,WAAW0B,GAAKF,QAAUA,EACvC,IAED,EAEFI,YAAc9C,IACbpE,GACCI,EAAAA,EAAAA,KAAmBC,WACXA,EAAM+E,OAAOhB,GACpBO,GAAWtE,EAAMgF,MAAMC,WAAYlB,GACnCO,GAAWtE,EAAMgF,MAAME,aAAcnB,GACrCO,GAAWtE,EAAMgF,MAAMG,QAASpB,EAAG,IAEpC,EAEF+C,aAAeC,IACdpH,GACCI,EAAAA,EAAAA,KAAmBC,IAClByD,GAAgBzD,EAAMgF,MAAMI,MAAO2B,EAAK,KAGnCA,EAAKhD,IAEbiD,gBAAkBjD,IACjBpE,GACCI,EAAAA,EAAAA,KAAmBC,IAClBsE,GAAWtE,EAAMgF,MAAMI,MAAOrB,EAAG,IAElC,EAEFkD,gBAAkBF,IACjB,MAAM,UAAEpC,GAAcjH,IACtB,OAAIiH,GAAaoC,EAAKR,QAAU5B,EACxBnB,IAER7D,GACCI,EAAAA,EAAAA,KAAmBC,IAClBqE,GAAWrE,EAAMgF,MAAM9I,SAAU6K,EAAK,KAGjCA,EAAKhD,GAAE,EAEfmD,mBAAqBnD,IACpBpE,GACCI,EAAAA,EAAAA,KAAmBC,IAClBsE,GAAWtE,EAAMgF,MAAM9I,SAAU6H,EAAG,IAErC,EAEFoD,cAAgBJ,IACf,MAAM,UACLpC,EACAK,OAAO,OAAEM,IACN5H,IAEE0J,EAAmBhE,eAAeG,QAAQN,UAAsBjH,EAChEqL,EAAsB7E,GAAe3E,WAAWmF,OAEtD,GAAIqE,IAAwBD,QAA4CpL,IAAxBqL,EAAmC,CAClF,MAAMC,EAA0BhC,EAAOjI,MACrCkK,GAAeA,EAAWhB,QAAUc,MAGpCC,GACDP,EAAK3C,SAAWkD,GAAyBlD,UACzC2C,EAAKR,QAAUa,IAEf5E,GAAe3E,WAAWkF,aAAagE,EAAKR,MAE9C,CAEA,OAAI5B,GAAaoC,EAAKR,QAAU5B,EACxBnB,IAER7D,GACCI,EAAAA,EAAAA,KAAmBC,IAClBqE,GAAWrE,EAAMgF,MAAMM,OAAQyB,EAAK,KAG/BA,EAAKhD,GAAE,EAEfyD,iBAAmBzD,IAClBpE,GACCI,EAAAA,EAAAA,KAAmBC,IAClBsE,GAAWtE,EAAMgF,MAAMM,OAAQvB,EAAG,IAEnC,EAEF0D,eAAiBV,IAChBpH,GACCI,EAAAA,EAAAA,KAAmBC,IAClBqE,GAAWrE,EAAMgF,MAAMK,WAAY0B,EAAK,KAGnCA,EAAKhD,IAEb2D,kBAAoB3D,IACnBpE,GACCI,EAAAA,EAAAA,KAAmBC,IAClBsE,GAAWtE,EAAMgF,MAAMK,WAAYtB,EAAG,IAEvC,EAEF4D,wBAA0BZ,IACzBpH,GACCI,EAAAA,EAAAA,KAAmBC,IAClBqE,GAAWrE,EAAMgF,MAAMO,sBAAuBwB,EAAK,KAG9CA,EAAKhD,IAEb6D,2BAA6B7D,IAC5BpE,GACCI,EAAAA,EAAAA,KAAmBC,IAClBsE,GAAWtE,EAAMgF,MAAMO,sBAAuBxB,EAAG,IAElD,EAEF8D,0BAA4Bd,IAC3BpH,GACCI,EAAAA,EAAAA,KAAmBC,IAClBqE,GAAWrE,EAAMgF,MAAMQ,wBAAyBuB,EAAK,KAGhDA,EAAKhD,IAEb+D,6BAA+B/D,IAC9BpE,GACCI,EAAAA,EAAAA,KAAmBC,IAClBsE,GAAWtE,EAAMgF,MAAMQ,wBAAyBzB,EAAG,IAEpD,EAEFgE,mBAAoBA,CAAC5F,EAAO4B,KAC3BpE,GACCI,EAAAA,EAAAA,KAAmBC,IAClB,MAAM2G,GAAMnC,EAAAA,EAAAA,WAAUxE,EAAMgF,MAAMC,YAAa+C,GAAQA,EAAIjE,KAAOA,IAC9D4C,GAAO,IACV3G,EAAMgF,MAAMC,WAAW0B,GAAKxE,MAAQ,IAChCnC,EAAMgF,MAAMC,WAAW0B,GAAKxE,SAC5BA,GAEL,IAED,EAEF8F,mBAAoBA,CAAC9F,EAAO4B,KAC3BpE,GACCI,EAAAA,EAAAA,KAAmBC,IAClB,MAAM2G,GAAMnC,EAAAA,EAAAA,WAAUxE,EAAMgF,MAAMK,YAAa2C,GAAQA,EAAIjE,KAAOA,IAC9D4C,GAAO,IACV3G,EAAMgF,MAAMK,WAAWsB,GAAKxE,MAAQ,IAChCnC,EAAMgF,MAAMK,WAAWsB,GAAKxE,SAC5BA,GAEL,IAED,MC1XU+F,GAAcC,GAAkB,IAC5C1C,IAAa9I,GAAMA,EAAE0D,KAAK8H,KAEdC,GAAaA,KACzB,MAAM/H,EAFsDoF,IAAa9I,GAAMA,EAAE0D,OAGjF,OAAOtD,EAAAA,EAAAA,UAAQ,KAAMsL,EAAAA,EAAAA,QAAOhI,GAAO6D,GAAMA,EAAEvD,YAAW,CAACN,GAAM,EAKjDiI,GAAUH,GAAkB,IACxC1C,GAAY5H,WAAWwC,KAAK8H,GAOhBI,GAAiBJ,GAAkB,IAC/C1C,GAAY5H,WAAW+G,YAAYuD,GAEvBK,GAAYA,IAAgC/C,GAAY5H,WAAWkH,OACnE0D,GAAYA,IAAgChD,IAAa9I,GAAMA,EAAEoI,SCrBxE2D,GAAiCA,EAAG9T,WAAUuT,WACnDlT,IAAAA,cAAA,OAAKqK,IAAK6I,EAAOpE,GAAIoE,GACpBlT,IAAAA,cAAC+M,GAAkB,CAAC1C,IAAK6I,EAAOtG,IAAKsG,GACnCvT,IA6BJ,GAxB6B+T,KAC5B,MAAM7D,EAAcW,IAAa9I,GAAMA,EAAEmI,cACnC8D,GAAU7L,EAAAA,EAAAA,UACf,KACC8L,EAAAA,EAAAA,KAAI/D,GAAa,CAACgE,EAAMX,IACvBlT,IAAAA,cAACyT,GAAO,CAACpJ,IAAK6I,EAAOA,MAAOA,GAC3BlT,IAAAA,cAAC6T,EAAI,UAGR,CAAChE,IAGF,OACC7P,IAAAA,cAAA,OACC,cAAY,cACZqK,IAAI,cACJyJ,QAAM,EACNC,MAAO,CAAE5O,OAAQ,EAAG6O,SAAU,WAE7BL,EACI,EC3BKM,GAAgB/H,IAC5B,MAAM,UAAEvB,EAAS,YAAEpB,GAAgBkB,GAAa7B,WAChD,OAAO+B,EAAUuB,IAAMO,GAAKlD,EAAYkD,CAAC,EAG7ByH,GAAOA,KACnB,MAAM,UAAEvJ,EAAS,YAAEpB,GAAgBkB,GAAa7B,WAChD,OAAO+B,EAAUnJ,IAAeiL,GAAKlD,EAAYkD,CAAC,E,qRCKnD,MAAM0H,GAAWA,IAChB5G,IAAgB7F,GAAM,CAACA,EAAE8F,MAAO9F,EAAEkG,eAE7BwG,GAAmBA,IAGpB7G,IAAgB7F,GAAM,CAACA,EAAE+F,eAAgB/F,EAAEiG,qBAmB1C0G,GAAgBA,EACrBtP,QACAuP,YAAY9O,EAAkBC,WAE9B,MAAMgH,EAAIyH,MACH1G,EAAOI,GAAeuG,MACtB,CAAEI,GAAeH,KAElBI,GAAa3U,EAAAA,EAAAA,cAAY,KAC9B+N,EAAY,IACZ2G,GAAY,EAAM,GAChB,CAAC3G,EAAa2G,IAEXE,GAAgB3M,EAAAA,EAAAA,UAA2B,KAChD,GAAIwM,IAAc9O,EAAkBC,OACnC,OAAOzF,IAAAA,cAAAA,IAAAA,SAAA,MAGR,MAAO6L,EAAMyB,GAlCdgH,IAEIA,IAAc9O,EAAkBE,QAC5B,CAAC,gBAAiB,WAEtB4O,IAAc9O,EAAkB1F,MAC5B,CAAC,cAAe,SAEjB,CAAC,GAAI,IA0BW4U,CAAgBJ,GACtC,OACCtU,IAAAA,cAAC2U,EAAAA,QAAO,CAACxM,MAAM,SACdnI,IAAAA,cAAC4U,EAAAA,KAAI,CAAC/I,KAAMA,EAAMgJ,KAAK,QAAQvH,MAAOA,IAC7B,GAET,CAACgH,IAEEQ,GAAYhN,EAAAA,EAAAA,UACjB,KACC8L,EAAAA,EAAAA,KAAIpG,GAAO,CAACuH,EAAWzF,IACtBtP,IAAAA,cAAC2U,EAAAA,QAAO,CAACtK,IAAK,GAAGiF,IAAQyF,EAAUhQ,QAAS2B,IAAI,cAC/C1G,IAAAA,cAACgV,EAAAA,KAAIC,GAAA,GAAKF,EAAS,CAAEG,WAAY,eAGpC,CAAC1H,IAGF,OACCxN,IAAAA,cAAA,OAAK+T,MAAO,CAAEjI,QAAS,OAAQ5G,MAAO,OAAQiQ,UAAW,WACxDnV,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACC,GAAI,CAAEpQ,MAAO,OAAQC,OAAQ,SAC7CnF,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,EAAGS,GAAI,CAAEC,QAAS,SAC9BvV,IAAAA,cAAA,OAAK+T,MAAO,CAAEjI,QAAS,OAAQ0J,cAAe,QAC5Cf,EACDzU,IAAAA,cAACyV,GAAAA,EAAU,CAACC,QAAQ,QAAQ3B,MAAO,CAAE4B,WAAY,QAC/C5Q,GAED+P,IAGH9U,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,EAAGS,GAAI,CAAEC,QAAS,SAC9BvV,IAAAA,cAAA,OAAK+T,MAAO,CAAEjI,QAAS,OAAQ0J,cAAe,MAAOI,eAAgB,aACnEpI,GAAOqI,OAAS,GAChB7V,IAAAA,cAAC8V,GAAAA,EAAM,CACNC,QAASvB,EACTkB,QAAQ,YACRM,UAAWhW,IAAAA,cAACiW,GAAAA,EAAS,CAAClC,MAAO,CAAEzG,MAAO4I,GAAAA,MACtCZ,GAAI,CACHa,gBAAiBC,GAAAA,GACjB9I,MAAO+I,GAAAA,KAGP5J,EAAE,2BAA4B,mBAKnCzM,IAAAA,cAACoV,GAAAA,EAAK,KACLpV,IAAAA,cAACsW,EAAAA,QAAO,CAAChJ,MAAM,YAoClB,EAIWiJ,GAAgBA,KAC5B,MAAMC,EAAchG,IAAa9I,GAAMA,EAAEqI,MAAMM,UACxCtC,GAAUM,KAEXiE,GAAaxK,EAAAA,EAAAA,UAClB,IAAM0O,EAAYpO,MAAMqO,GAAMA,EAAEnF,QAAUvD,KAC1C,CAACA,EAAQyI,IAGV,OACCxW,IAAAA,cAAAA,IAAAA,SAAA,KACEsS,GACAtS,IAAAA,cAAC+M,GAAkB,CAACH,IAAK0F,EAAWpG,KACnClM,IAAAA,cAACsS,EAAWf,UAAS,CACpB4C,SAAUA,GACVE,cAAeA,GACfD,iBAAkBA,MAInB,E,yBC1JE,SAASsC,GAAcC,GAC7B,MAAO,GACNA,EAAKC,kBACJD,EAAKE,cAAgB,GAAGC,WAAWC,SAAS,EAAG,KAChDJ,EAAKK,aAAaF,WAAWC,SAAS,EAAG,KACzCJ,EAAKM,cAAcH,WAAWC,SAAS,EAAG,KAC1CJ,EAAKO,gBAAgBJ,WAAWC,SAAS,EAAG,KAC5CJ,EAAKQ,gBAAgBL,WAAWC,SAAS,EAAG,OAE9C,CAcO,MAAMK,GAAcT,IAC1B,MAAMU,EAAU,IAAI9P,KAAKoP,GAEzB,OADAU,EAAQC,SAAS,EAAG,EAAG,EAAG,GACnBD,CAAO,EAGFE,GAAYZ,IACxB,MAAMU,EAAU,IAAI9P,KAAKoP,GAEzB,OADAU,EAAQC,SAAS,GAAI,GAAI,GAAI,GACtBD,CAAO,EASFG,GAAc/K,GAAoD,CAC9E,CACCqC,GAAI,WACD2I,GAAAA,EAAkBC,MACrBC,UAAWlL,EAAE,uBAAwB,mBACrC1H,MAAO0H,EAAE,uBAAwB,CAChC3H,MAAO2S,GAAAA,EAAkBC,MAAMjM,KAC/BmM,aAAc,iCAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBI,GACrBF,UAAWlL,EAAE,eAAgB,SAC7B1H,MAAO0H,EAAE,qBAAsB,CAC9B3H,MAAO2S,GAAAA,EAAkBI,GAAGpM,KAC5BmM,aAAc,uBAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBK,GACrBH,UAAWlL,EAAE,iBAAkB,WAC/B1H,MAAO0H,EAAE,uBAAwB,CAChC3H,MAAO2S,GAAAA,EAAkBK,GAAGrM,KAC5BmM,aAAc,yBAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBM,GACrBJ,UAAWlL,EAAE,gBAAiB,UAC9B1H,MAAO0H,EAAE,sBAAuB,CAC/B3H,MAAO2S,GAAAA,EAAkBM,GAAGtM,KAC5BmM,aAAc,wBAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBO,GACrBL,UAAWlL,EAAE,eAAgB,SAC7B1H,MAAO0H,EAAE,qBAAsB,CAC9B3H,MAAO2S,GAAAA,EAAkBO,GAAGvM,KAC5BmM,aAAc,uBAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBQ,GACrBN,UAAWlL,EAAE,iBAAkB,WAC/B1H,MAAO0H,EAAE,uBAAwB,CAChC3H,MAAO2S,GAAAA,EAAkBQ,GAAGxM,KAC5BmM,aAAc,yBAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBS,GACrBP,UAAWlL,EAAE,kBAAmB,YAChC1H,MAAO0H,EAAE,wBAAyB,CACjC3H,MAAO2S,GAAAA,EAAkBS,GAAGzM,KAC5BmM,aAAc,0BAIhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBU,GACrBR,UAAWlL,EAAE,oBAAqB,cAClC1H,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO2S,GAAAA,EAAkBU,GAAG1M,KAC5BmM,aAAc,4BAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBW,GACrBT,UAAWlL,EAAE,gBAAiB,UAC9B1H,MAAO0H,EAAE,sBAAuB,CAC/B3H,MAAO2S,GAAAA,EAAkBW,GAAG3M,KAC5BmM,aAAc,wBAGhB,CACC9I,GAAI,WACD2I,GAAAA,EAAkBY,MACrBV,UAAWlL,EAAE,2BAA4B,uBACzC1H,MAAO0H,EAAE,iCAAkC,CAC1C3H,MAAO2S,GAAAA,EAAkBY,MAAM5M,KAC/BmM,aAAc,4BAIhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBa,GACrBX,UAAWlL,EAAE,kBAAmB,YAChC1H,MAAO0H,EAAE,wBAAyB,CACjC3H,MAAO2S,GAAAA,EAAkBa,GAAG7M,KAC5BmM,aAAc,0BAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBc,GACrBZ,UAAWlL,EAAE,iBAAkB,WAC/B1H,MAAO0H,EAAE,uBAAwB,CAChC3H,MAAO2S,GAAAA,EAAkBc,GAAG9M,KAC5BmM,aAAc,yBAIhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBe,GACrBb,UAAWlL,EAAE,iBAAkB,WAC/B1H,MAAO0H,EAAE,uBAAwB,CAChC3H,MAAO2S,GAAAA,EAAkBe,GAAG/M,KAC5BmM,aAAc,yBAIhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBgB,GACrBd,UAAWlL,EAAE,cAAe,QAC5B1H,MAAO0H,EAAE,oBAAqB,CAC7B3H,MAAO2S,GAAAA,EAAkBgB,GAAGhN,KAC5BmM,aAAc,sBAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBiB,GACrBf,UAAWlL,EAAE,iBAAkB,WAC/B1H,MAAO0H,EAAE,uBAAwB,CAChC3H,MAAO2S,GAAAA,EAAkBiB,GAAGjN,KAC5BmM,aAAc,yBAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBkB,GACrBhB,UAAWlL,EAAE,gBAAiB,UAC9B1H,MAAO0H,EAAE,sBAAuB,CAC/B3H,MAAO2S,GAAAA,EAAkBkB,GAAGlN,KAC5BmM,aAAc,wBAGhB,CACC9I,GAAI,QACD2I,GAAAA,EAAkBmB,GACrBjB,UAAWlL,EAAE,oBAAqB,cAClC1H,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO2S,GAAAA,EAAkBmB,GAAGnN,KAC5BmM,aAAc,6BA8hCV,SAASiB,GACfC,GAEA,MAAO,CAACC,EAASC,UACEjS,IAAdiS,EACHF,EAAyB,QAASC,EAAS,KACjCE,EAAAA,EAAAA,WAAUD,GACpBF,EAAyB,QAASC,EAAUC,EAAa,OAAW,SAEpEF,EAAyB,QAASC,EAASC,EAC5C,CAEF,CAMO,SAASE,GAAUC,GACzB,MAAyB,YAAlBA,EAAS1N,IACjB,C,0BCruCA,MAAM2N,IAAOC,EAAAA,GAAAA,SAAOC,EAAAA,QAAOC,WAAA,CAAAC,YAAA,sBAAAC,YAAA,eAAdJ,CAAc,oBAI3B,SAASK,GACRC,EACAC,EACAnN,GAEA,MAAMoN,EAA6BpN,EAAE,gCAAiC,CACrEmL,aAAc,yBACdkC,OAAQH,IAET,OAAIC,EAAyBG,SAASF,GAC9BH,GAA8BC,EAAgB,EAAGC,EAA0BnN,GAE5EoN,CACR,CAYA,MAiLA,GAjLqBG,EACpBC,cACAC,qBACAC,aACAC,oBACAC,wBACAC,iBACAC,kBAEA,MAAO9N,IAAK+N,EAAAA,EAAAA,kBAENC,GAAcC,EAAAA,EAAAA,YAEdC,GAAyBC,EAAAA,EAAAA,QAAO,GAChCC,GAAgBhb,EAAAA,EAAAA,cAAY,KACjC,MAIMib,EAAiBpB,GAA8B,GAJpB9F,EAAAA,EAAAA,KAChC,IAAIwG,KAAsBD,IACzBtL,GAASA,EAAKkM,QAAQC,wBAA0B,KAEgCvO,GAElF8N,EAAY,GAAGI,EAAuBM,UAAW,CAChDD,uBAAwBF,EACxBI,sBAAuBf,EAAW,GAAGY,QAAQG,sBAC7CC,sBAAuBhB,EAAW,GAAGY,QAAQI,sBAC7CC,0BAA2B,SAC3BC,yBAA0B,UAE3BV,EAAuBM,SAAW,EAClCZ,EAAsBF,EAAWtE,OAAO,GACtC,CAACuE,EAAmBD,EAAYI,EAAaF,EAAuB5N,IAEjE6O,GAAkBzb,EAAAA,EAAAA,cAAY,KACnCya,EAAeH,EAAWD,GAAoBpL,IAC9CuL,EAAsBH,EAAqB,EAAE,GAC3C,CAACC,EAAYG,EAAgBJ,EAAoBG,IAE9CkB,GAAW1b,EAAAA,EAAAA,cAAY,KAC5B,MAAM2b,EAAaf,EAAY,CAC9BgB,MAAOhP,EAAE,+BAAgC,oDACzCiP,UAAWA,KACVJ,IACAE,GAAY,EAEbG,aAAclP,EAAE,2BAA4B,sBAC5CmP,aAAc,QACdC,eAAe,EACfC,QAASA,IAAMN,IACf7b,SACCK,IAAAA,cAAC2U,EAAAA,QAAO,CAACjO,IAAI,SACZ1G,IAAAA,cAAC+b,EAAAA,KAAI,CAAC/H,SAAS,cACbvH,EACA,iCACA,2FAKH,GACA,CAACgO,EAAahO,EAAG6O,IAEd7M,GAAQ3G,EAAAA,EAAAA,UACb,KACC8L,EAAAA,EAAAA,KAAIuG,GAAY,CAACtL,EAAMS,IACtBtP,IAAAA,cAACgc,EAAAA,SAAQ,CAAC3R,IAAKwE,EAAKC,GAAImN,OAAQ/B,IAAuB5K,IACrD,IACAtP,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAACkc,EAAAA,UAAS,CACTC,KAAM,WACN,cAAa,qBAAqBtN,EAAKkM,QAAQqB,uBAC/CrG,QAASA,KACRsE,EAAsB/K,EAAM,EAE7B+M,YAAY,aACZC,cAAc,aACd/G,QAAS,CAAE7O,IAAK,UAEhB1G,IAAAA,cAACuc,EAAAA,IAAG,CAACrX,MAAM,OAAOoX,cAAc,iBAC/Btc,IAAAA,cAACkc,EAAAA,UAAS,CAACG,YAAY,aAAaC,cAAc,aAAapX,MAAM,OACpElF,IAAAA,cAAC2U,EAAAA,QAAO,CAACxM,MAAM,SACdnI,IAAAA,cAAC4U,EAAAA,KAAI,CAAC/I,KAAK,0BAA0BgJ,KAAK,QAAQvH,MAAM,aAEzDtN,IAAAA,cAAC2U,EAAAA,QAAO,CAACxM,MAAM,SACdnI,IAAAA,cAAC+b,EAAAA,KAAI,CAACS,OAAO,UAAU3H,KAAK,SAC1BhG,EAAKkM,QAAQC,yBAGhBhb,IAAAA,cAAC2U,EAAAA,QAAO,CAACxM,MAAM,SACdnI,IAAAA,cAAC+b,EAAAA,KAAI,CAACS,OAAO,UAAU3H,KAAK,QAAQvH,MAAM,aAAY,IACnD4L,GAAUrK,GAAQoL,EAAcpL,EAAKkM,QAAQI,sBAAsB,OAIxEnb,IAAAA,cAACkc,EAAAA,UAAS,CAAChX,MAAM,MAAMoX,cAAc,YACpCtc,IAAAA,cAAC+b,EAAAA,KAAI,CAACS,OAAO,UAAU3H,KAAK,SAC1BqE,GAAUrK,GACRpC,EAAE,gBAAiB,WACnBA,EAAE,gBAAiB,eAK1BzM,IAAAA,cAACsW,EAAAA,QAAO,YAKb,CAAC2D,EAAaE,EAAYD,EAAoBG,EAAuB5N,IAGtE,OACCzM,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAACkc,EAAAA,UAAS,CACTO,SAAS,yBACTvX,MAAM,OACNqQ,QAAS,CAAE7O,IAAK,SAChBvB,OAAO,MACP+P,WAAYwH,GAAAA,GACZJ,cAAc,cAEdtc,IAAAA,cAAC2U,EAAAA,QAAO,CAACgI,WAAW,SAASC,OAAO,QAAQ1X,MAAM,QACjDlF,IAAAA,cAAC+b,EAAAA,KAAI,CAACS,OAAO,QAAQ/P,EAAE,sBAAuB,mBAE/CzM,IAAAA,cAACoZ,GAAI,KAAE3K,IAERzO,IAAAA,cAACuc,EAAAA,IAAG,CACHhH,QAAS,CAAEoH,WAAY,QAASC,OAAQ,SACxC1X,MAAM,OACNoX,cAAc,aACdpH,WAAYwH,GAAAA,IAEZ1c,IAAAA,cAAC8V,GAAAA,EAAM,CACNJ,QAAQ,YACRb,KAAK,SACLkB,QAAS8E,EACT9G,MAAO,CACNoC,gBAAiBC,GAAAA,GAEjB9I,MAAO+I,GAAAA,IAERL,UAAWhW,IAAAA,cAAC6c,GAAAA,EAAiB,CAAC9I,MAAO,CAAEzG,MAAO4I,GAAAA,OAE7CzJ,EAAE,oBAAqB,gBAWzBzM,IAAAA,cAAC8V,GAAAA,EAAM,CACNgH,SAAU5D,GAAUiB,EAAWD,IAC/BxE,QAAQ,YACRb,KAAK,SACLkB,QAASwF,EACTxH,MAAO,CACNoC,gBAAiB+C,GAAUiB,EAAWD,IACnC6C,GAAAA,GACAC,GAAAA,GACH1P,MAAO2P,GAAAA,GACPtH,WAAY,QAEbK,UACChW,IAAAA,cAACkd,GAAAA,EAAwB,CAACnJ,MAAO,CAAEzG,MAAO6P,GAAAA,OAG1C1Q,EAAE,eAAgB,YAGrBzM,IAAAA,cAAC2U,EAAAA,QAAO,CAACiI,OAAO,UACd,E,eC1NL,MA0FA,GA1FwBQ,EACvBC,gBACAC,uBAEA,MAAO7Q,IAAK+N,EAAAA,EAAAA,mBACL+C,EAAcC,IAAmBC,EAAAA,EAAAA,UAASJ,EAAcrC,wBACzD0C,GAAe5V,EAAAA,EAAAA,UAAQ,IAAM2E,EAAE,qBAAsB,iBAAiB,CAACA,KAC7EkR,EAAAA,EAAAA,YAAU,KACTH,EAAgBH,EAAcrC,uBAAuB,GACnD,CAACqC,EAAcrC,yBAElB,MAAM4C,GAAW/d,EAAAA,EAAAA,cACfge,IACAL,EAAgBK,EAAGxV,OAAOvD,OACtBuY,EAAcjB,sBACjBkB,EACCD,EAAcjB,qBACd,yBACAyB,EAAGxV,OAAOvD,MAEZ,GAED,CAACuY,EAAcjB,qBAAsBkB,IAGtC,OACCtd,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAACkc,EAAAA,UAAS,CACTO,SAAS,yBACTvX,MAAM,OACNqQ,QAAS,CAAE7O,IAAK,SAChBvB,OAAO,MACP+P,WAAY,QACZoH,cAAc,cAEdtc,IAAAA,cAAC2U,EAAAA,QAAO,CAACgI,WAAW,SAASzX,MAAM,QAClClF,IAAAA,cAAC+b,EAAAA,KAAI,CAACS,OAAO,QAAQ/P,EAAE,yBAA0B,uBAGnDzM,IAAAA,cAACuc,EAAAA,IAAG,CACHrX,MAAM,OACNqQ,QAAS,CAAEoH,WAAY,QAASC,OAAQ,SACxCzX,OAAO,MACP+P,WAAY,QACZoH,cAAc,cAEdtc,IAAAA,cAACuc,EAAAA,IAAG,CAACF,YAAY,WAAWC,cAAc,aAAapX,MAAM,QAC5DlF,IAAAA,cAACuc,EAAAA,IAAG,CAACF,YAAY,aAAanX,MAAM,OAAOoX,cAAc,cACxDtc,IAAAA,cAAC+b,EAAAA,KAAI,CAACzO,MAAM,aACVb,EACA,2BACA,gFAIHzM,IAAAA,cAACuc,EAAAA,IAAG,CAACF,YAAY,aAAanX,MAAM,OAAOoX,cAAc,cACxDtc,IAAAA,cAAC+b,EAAAA,KAAI,CAACzO,MAAM,aACVb,EACA,2BACA,2GAMLzM,IAAAA,cAACuc,EAAAA,IAAG,CACHrX,MAAM,OACNqQ,QAAS,CAAEoH,WAAY,QAASC,OAAQ,SACxCzX,OAAO,MACP+P,WAAY,QACZoH,cAAc,cAEdtc,IAAAA,cAACuc,EAAAA,IAAG,CAACuB,oBAAkB,GAGtB9d,IAAAA,cAAC+d,GAAAA,EAAS,CACTC,WAAS,EACTtI,QAAQ,WACR5Q,MAAOyY,EACPxY,MAAO2Y,EACPE,SAAUA,MAKb5d,IAAAA,cAAC2U,EAAAA,QAAO,CAACiI,OAAO,UACd,ECVL,GA3E+BqB,EAC9B1X,UACA4S,WACAmE,uBAEA,MAAO7Q,IAAK+N,EAAAA,EAAAA,kBACN0D,GAAapW,EAAAA,EAAAA,UAAQ,IAAM2E,EAAE,sBAAuB,mBAAmB,CAACA,KACvE0R,EAAkBC,IAAuBX,EAAAA,EAAAA,UAC/CtE,GAAU4B,QAAQC,yBAGnB2C,EAAAA,EAAAA,YACC,IAAMS,EAAoBjF,EAAS4B,QAAQC,yBAC3C,CAAC7B,EAAS4B,QAAQC,yBAEnB,MAAMqD,GAAevW,EAAAA,EAAAA,UAAQ,IAAM2E,EAAE,qBAAsB,iBAAiB,CAACA,IAEvE6R,GAAmBze,EAAAA,EAAAA,cAAY,IAAM,MAAM,IAC3C+d,GAAW/d,EAAAA,EAAAA,cACfge,IACAO,EAAoBP,EAAGxV,OAAOvD,OAC9BwY,EAAiBnE,EAASrK,GAAI,yBAA0B+O,EAAGxV,OAAOvD,MAAM,GAEzE,CAACqU,EAASrK,GAAIwO,IAGf,OACCtd,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAACkc,EAAAA,UAAS,CACTO,SAAS,yBACTvX,MAAM,OACNqQ,QAAS,CAAE7O,IAAK,SAChBvB,OAAO,MACP+P,WAAW,QACXoH,cAAc,cAEdtc,IAAAA,cAAC2U,EAAAA,QAAO,CAACgI,WAAW,SAASzX,MAAM,QAClClF,IAAAA,cAAC+b,EAAAA,KAAI,CAACS,OAAO,QAAQ/P,EAAE,wBAAyB,+BAGlDzM,IAAAA,cAACuc,EAAAA,IAAG,CACHrX,MAAM,OACNqQ,QAAS,CAAEoH,WAAY,QAASC,OAAQ,SACxCzX,OAAO,MACP+P,WAAW,QACXoH,cAAc,cAEdtc,IAAAA,cAACuc,EAAAA,IAAG,CAACrX,MAAM,MAAMqQ,QAAS,CAAEpN,MAAO,UAClCnI,IAAAA,cAAC+d,GAAAA,EAAS,CACTC,WAAS,EACTtI,QAAQ,WACRb,KAAK,SACL9P,MAAOmZ,EACPpZ,MAAOyB,EAAQkF,MAAQ,IACvBmS,SAAUU,KAIZte,IAAAA,cAACuc,EAAAA,IAAG,CAACrX,MAAM,OACVlF,IAAAA,cAAC+d,GAAAA,EAAS,CACTC,WAAS,EACTtI,QAAQ,WACRb,KAAK,SACL9P,MAAOsZ,EACPvZ,MAAOqZ,EACPP,SAAUA,MAKb5d,IAAAA,cAAC2U,EAAAA,QAAO,CAACiI,OAAO,UACd,EClDC2B,GAAwB,CAAExZ,MAAO,GAAID,MAAO,IAuQlD,GArQ6B0Z,EAC5BnB,gBACAC,mBACAmB,8BAEA,MAAOhS,IAAK+N,EAAAA,EAAAA,kBACNiB,GAAQ3T,EAAAA,EAAAA,UAAQ,IAAM2E,EAAE,+BAAgC,+BAA+B,CAACA,KACvFiS,EAAqBC,IAA0BlB,EAAAA,EAAAA,UACV,SAA3CJ,EAAchC,2BAERuD,EAAgBC,IAAqBpB,EAAAA,EAAAA,UAC3CJ,EAAcyB,0BAA4B,KAEpCC,EAAcC,IAAmBvB,EAAAA,EAAAA,WAAS,IAC1CwB,EAAkBC,IAAuBzB,EAAAA,EAAAA,UAC/CJ,EAAcnC,uBAAyB,KAEjCiE,EAAgBC,IAAqB3B,EAAAA,EAAAA,UAC3CJ,EAAcgC,0BAA4B,IAErCC,GAAmBxX,EAAAA,EAAAA,UACxB,IACC2W,EACGA,EAAwB7K,KAAK2L,IAAO,CAAoBza,MAAOya,EAASxa,MAAOwa,MAC/E,CAAChB,KACL,CAACE,KAEKe,EAAaC,IAAkBhC,EAAAA,EAAAA,WACrC,KACCrV,EAAAA,EAAAA,MAAKkX,GAAmBzQ,GAASA,EAAK/J,QAAUuY,EAAclC,yBAC9DoD,MAGFZ,EAAAA,EAAAA,YAAU,KACTgB,EAAkE,SAA3CtB,EAAchC,yBAAoC,GACvE,CAACgC,EAAchC,4BAClBsC,EAAAA,EAAAA,YAAU,KACTuB,EAAoB7B,EAAcnC,uBAAyB,GAAG,GAC5D,CAACmC,EAAcnC,yBAClByC,EAAAA,EAAAA,YAAU,KACT8B,GACCrX,EAAAA,EAAAA,MAAKkX,GAAmBzQ,GAASA,EAAK/J,QAAUuY,EAAclC,yBAC7DoD,GACD,GACC,CAACe,EAAkBjC,EAAclC,yBACpCwC,EAAAA,EAAAA,YAAU,KACTyB,EAAkB/B,EAAcgC,0BAA4B,GAAG,GAC7D,CAAChC,EAAcgC,4BAClB1B,EAAAA,EAAAA,YAAU,KACTkB,EAAkBxB,EAAcyB,0BAA4B,GAAG,GAC7D,CAACzB,EAAcyB,2BAElB,MAAMY,GAAwB7f,EAAAA,EAAAA,cAAY,KACzC8e,GAAwBgB,IACvB,MAAMC,GAAYD,EAQlB,OAPItC,EAAcjB,sBACjBkB,EACCD,EAAcjB,qBACd,2BACAuD,EAAY,QAAU,QAGjBC,CAAQ,GACd,GACA,CAACvC,EAAcjB,qBAAsBkB,IAElCuC,GAAmB/X,EAAAA,EAAAA,UAAQ,IAAM2E,EAAE,kBAAmB,iBAAiB,CAACA,IAQxEqT,GAAmBhY,EAAAA,EAAAA,UAAQ,IAAM2E,EAAE,gBAAiB,YAAY,CAACA,IAEjEsT,GAAsBlgB,EAAAA,EAAAA,cAC1BmgB,IACKA,GAIDR,GAAa1a,QAAUkb,IAG3BP,GAAeQ,EAAAA,EAAAA,QAAOX,GAAmBzQ,GAASA,EAAK/J,QAAUkb,IAAY,IACzE3C,EAAcjB,sBACjBkB,EAAiBD,EAAcjB,qBAAsB,wBAAyB4D,GAC/E,GAED,CAACR,GAAa1a,MAAOwa,EAAkBjC,EAAcjB,qBAAsBkB,IAGtE4C,EAAsBzT,EAC3B,2BACA,kDAGK0T,GAAsBrY,EAAAA,EAAAA,UAC3B,IAAM2E,EAAE,+BAAgC,mBACxC,CAACA,IAEI2T,GAA6BvgB,EAAAA,EAAAA,cACjCwgB,IACAjB,EAAkBiB,EAAEhY,OAAOvD,OACvBuY,EAAcjB,sBACjBkB,EACCD,EAAcjB,qBACd,2BACAiE,EAAEhY,OAAOvD,MAEX,GAED,CAACuY,EAAcjB,qBAAsBkB,IAGhCgD,GAAsBxY,EAAAA,EAAAA,UAAQ,IAAM2E,EAAE,uBAAwB,sBAAsB,CAACA,IAErF8T,GAAyB1gB,EAAAA,EAAAA,cAC7BiF,IACA+Z,EAAkB/Z,GACduY,EAAcjB,sBACjBkB,EAAiBD,EAAcjB,qBAAsB,2BAA4BtX,EAClF,GAED,CAACwY,EAAkBD,EAAcjB,uBAG5BoE,GAAsB1Y,EAAAA,EAAAA,UAC3B,IAAsB,CACrB,CACCgH,GAAI,IACJ/J,MAAOsY,EAAclC,uBAAyB,GAC9CpF,QAASA,IAAMwK,EAAuBlD,EAAclC,uBAAyB,OAG/E,CAACkC,EAAclC,sBAAuBoF,IAGjCE,GAAe3Y,EAAAA,EAAAA,UACpB,IAAM4W,IAAwBjb,EAAuBid,KAAK9B,GAAkB,KAC5E,CAACF,EAAqBE,IAGvB,OACC5e,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAACkc,EAAAA,UAAS,CACTO,SAAS,yBACTvX,MAAM,OACNqQ,QAAS,CAAE7O,IAAK,SAChBvB,OAAO,MACP+P,WAAYwH,GAAAA,GACZJ,cAAc,cAEdtc,IAAAA,cAAC2U,EAAAA,QAAO,CAACgI,WAAW,SAASzX,MAAM,QAClClF,IAAAA,cAAC+b,EAAAA,KAAI,CAACS,OAAO,QAAQf,KAGvBzb,IAAAA,cAACuc,EAAAA,IAAG,CACHrX,MAAM,OACNqQ,QAAS,CAAEoH,WAAY,QAASC,OAAQ,SACxCzX,OAAO,MACP+P,WAAYwH,GAAAA,GACZJ,cAAc,cAEdtc,IAAAA,cAACuc,EAAAA,IAAG,CAACrX,MAAO,MAAOqQ,QAAS,CAAEpN,MAAO,UAGpCnI,IAAAA,cAAC+d,GAAAA,EAAS,CACTC,WAAS,EACTjZ,MAAO8a,EACP/a,MAAOma,EACPrB,SAzGqDyC,IACzDnB,EAAoBmB,EAAEhY,OAAOvD,OACzBuY,EAAcjB,sBACjBkB,EAAiBD,EAAcjB,qBAAsB,wBAAyBiE,EAAEhY,OAAOvD,MACxF,KA6GE9E,IAAAA,cAACuc,EAAAA,IAAG,CAACrX,MAAM,OAEVlF,IAAAA,cAAC2gB,EAAAA,OAAM,CACN5b,MAAO+a,EACPc,UAAWpB,EACX/Q,MAAO6Q,EACPuB,cAAc,EACd3L,WAAY4L,GAAAA,GACZlD,SAAUmC,EACVhM,MAAO,CACN7O,MAAO,OACP6b,OAAQ,2BAKZ/gB,IAAAA,cAACuc,EAAAA,IAAG,CACHrX,MAAM,OACNgQ,WAAY,QACZoH,cAAc,aACd/G,QAAS,CAAEoH,WAAY,QAASC,OAAQ,UAGxC5c,IAAAA,cAACghB,EAAAA,SAAQ,CACRjc,MAAOmb,EACPpb,MAAO4Z,EACP3I,QAAS2J,KAGX1f,IAAAA,cAACuc,EAAAA,IAAG,CACHrX,MAAM,OACNqQ,QAAS,CAAEoH,WAAY,QAASC,OAAQ,SACxCzX,OAAO,MACP+P,WAAYwH,GAAAA,GACZJ,cAAc,cAEdtc,IAAAA,cAACuc,EAAAA,IAAG,CAACrX,MAAM,MAAMqQ,QAAS,CAAEpN,MAAO,UAGlCnI,IAAAA,cAAC+d,GAAAA,EAAS,CACTC,WAAS,EACTjZ,MAAOob,EACPrb,MAAOqa,EACPvB,SAAUwC,KAUZpgB,IAAAA,cAACuc,EAAAA,IAAG,CAACrX,MAAM,OAEVlF,IAAAA,cAACihB,EAAAA,SAAQ,CACRxS,MAAO+R,EACPU,UAAU,eACVnN,MAAO,CAAEoN,SAAU,KACnBrF,QAASA,IAAYkD,GAAgB,GACrCoC,OAAQA,IAAYpC,GAAgB,GACpClC,UAAW4B,GAEX1e,IAAAA,cAACqhB,EAAAA,MAAK,CACLtc,MAAOub,EACPxb,MAAO8Z,EACPhB,SAAWC,GAAa0C,EAAuB1C,EAAGxV,OAAOvD,OACzDwc,SAAUb,EACVc,WAAYA,IACXvhB,IAAAA,cAAC4U,EAAAA,KAAI,CAAC/I,KAAMkT,EAAe,UAAY,cAExCjC,UAAW4B,OAKf1e,IAAAA,cAAC2U,EAAAA,QAAO,CAACiI,OAAO,UACd,EC3RQ4E,GAAoBA,EAChC7hB,WACA8hB,OACAC,SACAC,gBAAe,MAEf,MAAMC,GAAUC,EAAAA,EAAAA,MACVC,GAAsBha,EAAAA,EAAAA,UAAQ,IAAM8Z,EAAQve,UAAU,CAACue,KACtDG,EAAcC,IAAmBvE,EAAAA,EAAAA,WAAS,GAC3CwE,GAAkBrH,EAAAA,EAAAA,QAAOkH,GACzBI,GAAyBtH,EAAAA,EAAAA,SAAO,GAChCnO,EAAIyH,KACJiO,GAAStiB,EAAAA,EAAAA,cAAY,KAC1BmiB,GAAgB,GAChBE,EAAuBjH,SAAU,CAAK,GACpC,IAEGmH,GAAoBviB,EAAAA,EAAAA,cAAY,KACrCqiB,EAAuBjH,SAAU,EAC7BgH,EAAgBhH,SAEnB2G,EAAQ7Y,KAAKkZ,EAAgBhH,QAC9B,GACE,CAAC2G,IAEES,GAA0BxiB,EAAAA,EAAAA,cAC9ByiB,MAEEJ,EAAuBjH,SACxB,GAAGqH,EAAahf,WAAWgf,EAAajS,QAAU,MACjD,GAAGuR,EAAQve,SAASC,WAAWse,EAAQve,SAASgN,WAEjD2R,GAAgB,GAChBC,EAAgBhH,QAAUqH,EACnB,KAIT,CAACV,EAAQve,SAASC,SAAUse,EAAQve,SAASgN,SAGxCqL,GAAY7b,EAAAA,EAAAA,cAAY,KAC7B6hB,IACEa,MAAMC,IACN,MAAMC,GAAWxC,EAAAA,EAAAA,QAChBuC,GACCE,GAA8D,aAAlBA,EAAOC,SAEjDF,EAAS5M,OAAS,GACrB9V,QAAQD,MAAM2iB,GACdN,MAEAH,GAAgB,GAChBI,IACD,IAEAQ,OAAOC,IACP9iB,QAAQD,MAAM+iB,GACdV,GAAQ,GACP,GACD,CAACA,EAAQC,EAAmBV,IAEzBoB,GAAoBjjB,EAAAA,EAAAA,cAAY,KACrCmiB,GAAgB,GAChBI,GAAmB,GACjB,CAACA,IAEJ,OACCpiB,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAAC+iB,EAAAA,GAAM,CAACtB,KAAMA,EAAMzd,QAASqe,IAE7BriB,IAAAA,cAACgjB,EAAAA,MAAK,CACLnH,eAAa,EACboH,iBAAkBxW,EAAE,cAAe,SACnCyW,KAAMnB,EACNtG,MACCkG,EACGlV,EAAE,4BAA6B,gCAC/BA,EAAE,wBAAyB,4BAE/BqP,QAASqG,EACTzG,UAAWiG,EAAemB,EAAoBpH,EAC9CC,aACCgG,EACGlV,EAAE,qBAAsB,gBACxBA,EAAE,uBAAwB,kBAE9BqW,kBAAmBnB,EAAeQ,EAASW,EAC3CK,qBACCxB,EAAelV,EAAE,eAAgB,UAAYA,EAAE,qBAAsB,gBAEtE2W,eACEzB,OAOG5a,EANH/G,IAAAA,cAAC8V,EAAAA,OAAM,CACNxI,MAAM,YACN3B,KAAK,WACL5G,MAAO0H,EAAE,eAAgB,UACzBsJ,QAASoM,KAKXxiB,GAEA,E,0BCzFL,MAAM0jB,IAAoBhK,EAAAA,GAAAA,SAAOiK,EAAAA,aAAY/J,WAAA,CAAAC,YAAA,qCAAAC,YAAA,gBAAnBJ,CAAmB,uCAahCkK,GAAiBA,EAC7B7B,SACA8B,WACAC,UACAhI,YAEA,MAAMhP,EAAIyH,KACJ0N,GAAUC,EAAAA,EAAAA,MACV6B,GAASC,EAAAA,EAAAA,KACTC,GAAS9b,EAAAA,EAAAA,UACd,IAAe,CACd,CACCgH,GAAI,WACJ/J,MAAO0H,EAAE,eAAgB,YACzBoX,UAAW,mBAEZ,CACC/U,GAAI,UACJ/J,MAAO0W,EACPoI,UAAW,qBAGb,CAACpX,EAAGgP,IAGCpL,EAA6BuR,EAAQve,UAAUgN,OAcrD,OAZAsN,EAAAA,EAAAA,YAAU,KACLtN,GAEHyT,YACC,IACC5f,SACE6f,cAAc,IAAInC,EAAQve,SAASgN,SAAS2T,QAAQ,YAAa,MAChEC,kBACJ,EAEF,GACE,CAACrC,EAASA,EAAQve,SAAUue,EAAQve,SAASgN,OAAQA,EAAQqT,IAE/D1jB,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAACwhB,GAAiB,CAACC,KAAMgC,EAAS/B,OAAQA,GACzC1hB,IAAAA,cAAC+b,EAAAA,KAAI,KACHtP,EACA,8BACA,6DAGFzM,IAAAA,cAAC+b,EAAAA,KAAI,KAAEtP,EAAE,8BAA+B,2CAGzCzM,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACT8J,eAAgB,gBAChB1Q,MAAO,OACPgf,WAAY,SAEZ1O,cAAe,MACfW,gBAAiBuG,GAAAA,KAGlB1c,IAAAA,cAAA,OACC+T,MAAO,CACN7O,MAAO,OACP4G,QAAS,OACToY,WAAY,SACZtO,eAAgB,gBAChBL,QAAS,SAGVvV,IAAAA,cAAA,OAAK+T,MAAO,CAAE4B,WAAY,QACzB3V,IAAAA,cAACqjB,GAAiB,CAACO,OAAQA,KAG5B5jB,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACf2O,YAAa,QAGdnkB,IAAAA,cAAC8V,GAAAA,EAAM,CACNJ,QAAQ,YACRb,KAAK,SACLkB,QAASyN,EACT1G,UAAW2G,EACX1P,MAAO,CACNoC,gBAAiBsN,EACd1G,GAAAA,GACAC,GAAAA,GACH1P,MAAO2P,GAAAA,GACPkH,YAAa,OAEdnO,UACChW,IAAAA,cAACokB,GAAAA,EAAa,CAACrQ,MAAO,CAAEzG,MAAO6P,GAAAA,OAG/B1Q,EAAE,wBAAyB,YAE7BzM,IAAAA,cAAC8V,GAAAA,EAAM,CACNJ,QAAQ,YACRb,KAAK,SACLkB,QAAS2L,EACT5E,UAAW2G,EACX1P,MAAO,CACNoC,gBAAiBsN,EACdrN,GAAAA,GACAiO,GAAAA,GACH/W,MAAO+I,GAAAA,IAERL,UAAWhW,IAAAA,cAACskB,GAAAA,EAAa,CAACvQ,MAAO,CAAEzG,MAAO4I,GAAAA,OAEzCzJ,EAAE,aAAc,YA4CrBzM,IAAAA,cAACsW,EAAAA,QAAO,MACN,E,0BC1ML,MAAM,GAAEiO,GAAE,QAAEC,IAAYC,OACXC,GAAY,uBAAuBF,GAAQ/Y,QAAQ+Y,GAAQxd,YAAYud,GAAG9Y,QCHhF,SAASkZ,KACfvhB,OAAOC,SAASuhB,OAAO,GAAGxhB,OAAOC,SAASwhB,sBAC3C,C,2DCgBO,MAAMC,IAAcje,EAAAA,EAAAA,KAAAA,EAAyB6D,IAAG,CACtDqa,QAAS,CACR,CAACvjB,GAAe,IAAIwjB,GAAAA,GACnB,IAAIC,GAAAA,EAAc,CACjBC,UAAWC,GAAAA,EACXC,YAAaC,GAAAA,GACbC,aAAcC,GAAAA,GACdC,IAAKjgB,EACLkgB,QAAS,IACTC,eAAgB,QAInBC,WAAava,IACZV,GAAKhD,IAAC,CACLqd,SAAS/Y,EAAAA,EAAAA,QACRZ,GACA,CAACa,EAAKC,KACDA,EAAI4E,YAEPpJ,EAAEqd,QAAQ7Y,EAAIT,MAAQ,IAAIuZ,GAAAA,GACzB,IAAIC,GAAAA,EAAc,CACjBC,UAAWC,GAAAA,EACXC,YAAaC,GAAAA,GACbC,aAAcC,GAAAA,GACdC,IAAKtZ,EAAI4E,UACT2U,QAASvZ,EAAIlF,QACb0e,eAAgB,QAIZzZ,IAERvE,EAAEqd,YAED,MClDQa,GACX1S,GACD,CAACpT,EAAc+lB,KACd,MAAMC,EAAWhB,GAAYlc,WACvBmd,EAAUD,EAASf,QAAQ7R,IAAQ8S,iBAAiBlmB,EAAO,IAAK+lB,IAItE,OAHIE,GACHhmB,QAAQkmB,KAAK,kBAAmBF,GAE1BA,CAAO,ECNHG,IAAkBrf,EAAAA,EAAAA,KAAAA,EAAuB,KAAM,CAC3Dsf,gBAAiB,IACjBC,IAAK,MCLOC,GAAYA,IAAoBH,IAAiBxe,GAAMA,EAAE4e,QAAU,KACnEC,GAAaA,IAAmBL,IAAiBxe,GAAMA,EAAE8e,SAAW,CAAC,I,wBCD3E,MAAMC,GAAY,IAAIC,OAAO,IAAIC,IAAI,kBAG/BC,GAAe,IAAIF,OAAO,IAAIC,IAAI,kBCClCE,IAAiBhgB,EAAAA,EAAAA,KAAAA,EAAsB,KAAM,CACzDigB,QAAS,CAAC,EACVC,MAAO,CAAC,EACRC,SAAU,CAAC,MAGZJ,GAAaK,UAAY,EAAGnV,WAC3B+U,GAAeK,SAASpV,EAAK,ECR9B,MAKaqV,GAAeC,IAC3B,MAAMtY,EALgBsY,KACtB,MAAMC,EAAQD,EAAEtY,GAAGtC,MAAM,KACzB,OAAO6a,EAAM,IAAMA,EAAM,EAAE,EAGhBC,CAAcF,GACzB,OAAItY,IAAOxO,EAAQG,MACXH,EAAQiB,4BAETgmB,SAASzY,EAAI,IAAM,GAAK,MAAMA,IAAOsY,EAAE3b,KAAK+b,aAAa,EAKpDC,GAAUL,GACtBA,EAAEtY,KAAOxO,EAAQC,WAAc6mB,EAAiBM,QAAUhkB,EAE9CikB,GACXC,GACAC,GACAT,GACAA,EAAEzV,OAASiW,IAAMC,QAA2B,IAAXT,EAAEzV,OAAyB8V,GAAOL,GAExDU,GAAcA,CAC1BnoB,EACAynB,EACAW,EACAF,KAEuBE,GAAe3U,EAAAA,EAAAA,QAAOzT,EAAUooB,GAAgBpoB,GAErEsgB,OAAOmH,EAAES,IACTjU,KAAKoU,IAAC,IAAWA,EAAGroB,SAAUmoB,GAAyBE,EAAEroB,SAAUynB,EAAGW,GAAc,OAU1EE,GAAWA,CACvBtoB,GACEuoB,cAAaC,iBAAgBC,eAAcL,eAAcF,WAE3DzU,EAAAA,EAAAA,QAAOzT,EAAUooB,GAAc/b,QAAO,CAACC,EAAKoc,KACvCF,EAAeN,EAAfM,CAAqBE,IACxBpc,EAAIlD,KAAK,IACLmf,EAAYG,GACf,CAACD,GAAeH,GAAyBI,EAAO1oB,SAAU,CACzDuoB,cACAC,iBACAC,eACAL,eACAF,MAAM,MAIF5b,IACL,ICzDSqc,GAAaxZ,GAAmC+X,IAAgBnf,GAAMA,EAAEof,UAAUhY,KAClFyZ,GAAazZ,GACzB+X,GAAeje,YAAYke,UAAUhY,GACzB0Z,GAAaA,IAAe3B,IAAgBnf,GAAMA,EAAEof,UACpD2B,GAAaA,IAAe5B,GAAeje,WAAWke,QAGtD4B,GAAW5Z,GAAmC+X,IAAgBnf,GAAMA,EAAEqf,QAAQjY,KAC9E6Z,GAAW7Z,GAAmC+X,GAAeje,WAAWme,QAAQjY,GAChF8Z,GAAWA,IAAe/B,IAAgBnf,GAAMA,EAAEqf,QAClD8B,GAAWA,IAAehC,GAAeje,WAAWme,MAGpD+B,GAAiBC,GAC7BlC,IAAgBnf,GAAOA,EAAEqf,MAAQrf,EAAEqf,MAAMgC,GAAU,CAAC,IACxCC,GAAiBD,IAC7B,MAAMjC,EAAUD,GAAeje,WAC/B,OAAOke,EAAQC,MAAQD,EAAQC,MAAMgC,GAAU,CAAC,CAAC,EAKrCE,GAAmBna,GAC/B+X,IAAgBnf,GAAMA,EAAEsf,WAAWlY,KACvBoa,GAAmBpa,GAC/B+X,GAAeje,WAAWoe,SAASlY,GACvBqa,GAAmBA,IAAgBtC,IAAgBnf,GAAMA,EAAEsf,WAC3DoC,GAAmBA,IAAgBvC,GAAeje,WAAWoe,SAI7DqC,GAAoB1X,IAChC,MAAMoV,EAAQ6B,KACd,OAAO9gB,EAAAA,EAAAA,UACN,IACCif,EAAQe,GAAoBwB,OAAOC,OAAOxC,GAAQY,GAAiBhW,GAAOwV,IAAe,IAC1F,CAACJ,EAAOpV,GACR,EAGW6X,GAA4BA,CACxC7X,EACA8X,EACAC,KAEA,MAAM3C,EAAQ6B,KACd,OAAO9gB,EAAAA,EAAAA,UACN,IACCif,EACGkB,GAAkCqB,OAAOC,OAAOxC,GAAQ,CACxDmB,YAAcd,IACb,MAAMvY,EAAO,CACZC,GAAIsY,EAAEtY,GACN/J,MAAOqiB,EAAE3b,KACTge,kBACAhb,MAAO,GACP4Z,OAAQjB,EACRuC,aAAclC,GAAOL,IAEhBhgB,EAAQsiB,IAAY7a,IAAS,CAAC,EACpC,MAAO,IAAKA,KAASzH,EAAO,EAE7B+gB,eAAgBR,GAAiBhW,GACjCyW,aAAc,QACdL,aAAcZ,GACdU,MAAM,IAEN,IACJ,CAAC4B,EAAiBC,EAAW3C,EAAOpV,GACpC,ECxEWiY,IAAc/iB,EAAAA,EAAAA,KAAAA,EAAmB,KAAM,CACnDgjB,KAAM,CAAC,MAGRpD,GAAUQ,UAAY,EAAGnV,WACxB8X,GAAY1C,SAASpV,EAAK,ECNpB,MAAMgY,GAAWC,GACvBH,IAAaliB,GAAOqiB,GAAMC,EAAAA,EAAAA,MAAKtiB,EAAEmiB,KAAME,GAAOriB,EAAEmiB,OACpCI,GAAWF,GACvBA,GAAMC,EAAAA,EAAAA,MAAKJ,GAAYhhB,WAAWihB,KAAME,GAAOH,GAAYhhB,WAAWihB,KCc1DK,GAAwBjjB,IACpC,MAAMkjB,EAAcljB,EAASC,OAAOkjB,+BAAiC,GACrE,GAAoB,QAAhBD,EACH,OAAO,IAER,MAAME,EAAe9C,SAAS4C,EAAa,IAC3C,OAAIG,OAAOC,MAAMF,GACT,IAEJF,EAAYpQ,SAAS,KACF,GAAfsQ,EAAoB,IAEN,IAAfA,CAAmB,ECddG,GAAYA,KAExBC,GAAajpB,EAAbipB,CACC,OAC+C,MAA/CvE,GAAgBtd,WAAWud,gBACxB,CAAEuE,MAAOpkB,EAAKG,KAAMkkB,kBAAmB,EAAGC,KAAM,GAChD,CAAEF,MAAOpkB,EAAKG,MACjB,EAGIokB,GAAaA,CAClB5e,EACA6e,KAEA,GAAIA,EACH,MAAO,CACNC,GAAI,OACJC,SAAUF,GAGZ,GAAI7e,EAAK,CACR,GAAIA,EAAIR,KACP,MAAO,CACNsf,GAAI,OACJC,SAAU/e,EAAIR,MAGhB,GAAIQ,EAAI6C,GACP,MAAO,CACNic,GAAI,KACJC,SAAU/e,EAAI6C,GAGjB,CACgB,EAGXmc,GAAgBA,CAAChf,EAAe6e,KACrC,GAAIA,EACH,MAAO,sBAAsBA,cAE9B,GAAI7e,EAAK,CACR,GAAIA,EAAIR,KACP,MAAO,sBAAsBQ,EAAIR,iBAElC,GAAIQ,EAAI6C,GACP,MAAO,oBAAoB7C,EAAI6C,cAEjC,CACA,MAAO,EAAE,EAGJoc,GAAgBA,KACrB,MAAMC,EAAYjF,GAAgBtd,WAAWwiB,SAAStc,GACtD,OAAIqc,EACI,gBAAgBA,OAEjB,EAAE,EAcJE,GAAiBA,CACtBC,EACAC,KAEA,MAAM,YAAEC,GAAgBtF,GAAgBtd,YAClC,UAAEvB,GAAcT,GAAgBgC,WAuBtC,GAtBA6iB,aAAaD,GACTD,EAAIG,KAAKC,SAEXvjB,EAAAA,EAAAA,MACC,CAAC,wBAAyB,yBACzBwjB,GAASA,IAA6BL,EAAKG,KAAKC,MAAME,QAAQC,OAAOC,SAGnE5oB,EACHyD,GAAgBsgB,SAAS,CAAEpgB,eAAe,IAE1C6d,MAGF5kB,QAAQD,MACP,IAAIgsB,MACH,GAAuBP,EAAKG,KAAKC,MAAME,QAAQC,OAAOD,WACjCN,EAAKG,KAAKC,MAAMK,QAAQjQ,UAK5CwP,EAAIU,QAAQ/a,QAAS,CACxB,MAAMgb,EACLX,EAAIU,OAAO/a,SAASsV,SAAS2F,MAAM,IAAIzkB,GACvC6jB,EAAIU,OAAO/a,SAASoV,SAAS,IAAI8F,UAAUD,MAAM,IAAIzkB,EAChD2kB,EA3CiBC,GAAGhG,OAAQiG,KAAcrb,MACjD,MAAMsb,EAAiC,IAAKtb,EAASoV,OAAQ,IAO7D,OANIiG,IACHC,EAAkBlG,QAAS1S,EAAAA,EAAAA,KAA+B2Y,GAAYjG,IAAM,IACxEA,EACHmG,QAASnG,EAAOmG,SAAS3d,IAAItC,MAAM,MAAQ,QAGtCggB,CAAiB,EAmCNF,CAAiBf,EAAIU,OAAO/a,SACvCkV,GAAMsG,EAAAA,EAAAA,OAAML,EAAS/F,OAAQ,QAAQF,KAAO,EDhE1BuG,GAAGnG,UAASF,aACrC,IAAIsG,SAASC,IACZ,MAAM,IAAEzG,GAAQF,GAAgBtd,WAC5B4d,IACHC,GAAUqG,YAAY,CACrBC,GAAI,UACJlD,KAAMrD,EAAQqD,OAEfjD,GAAakG,YAAY,CACxBC,GAAI,UACJ1E,OAAQ7B,EAAQ6B,QAAU,MAGxB/B,GAAQzQ,SACX7K,EAAAA,EAAAA,SAAQsb,GAASzX,IACZA,EAAKuX,IAAMA,IACdK,GAAUqG,YAAY,CACrBC,GAAI,SACJzG,OAAQzX,EACR9D,MAAO6e,GAAYhhB,WAAWihB,OAE/BjD,GAAakG,YAAY,CACxBC,GAAI,SACJzG,OAAQzX,EACR9D,MAAO8b,GAAeje,WAAWke,UAEnC,IAGF+F,GAAG,GACF,ECmCDF,CAAWN,GACXzlB,GAAgBsgB,SAAS,CACxB7f,UAAW6kB,GAAqB7kB,IAGjC,MAAM2lB,EDvF2BzB,KAClC,MAAM,gBAAEpF,GAAoBD,GAAgBtd,YACtC,SAAE3B,GAAaL,GAAgBgC,WAC/BqkB,EAAiB1B,EAAIG,QAAU,UAAWH,EAAIG,OAASH,EAAIG,KAAKuB,eAChEC,EAAQ3B,EAAIG,MAAQ,UAAWH,EAAIG,MAAQH,EAAIG,KAAKC,MAC1D,OAAIuB,EA5B0B,IA+B1BD,EArC2B,IAwC1BC,EAGE/G,EAFC+D,GAAqBjjB,EAEP,ECyEOkmB,CAAmB5B,GAC/CrF,GAAgBgB,SAAS,CACxBsE,YAAa1H,YAAW,IAAM0G,MAAawC,GAC3C7G,gBAAiB6G,EACjB5G,SACGiG,GAEL,CAIA,OAAOd,GAAKG,MAAMC,MAASJ,EAAIG,KAAkCH,EAAIG,KAAK,GAAGJ,YAAoB,EAErFb,GACXve,GACD,CACCof,EACA8B,EACAtC,EACAuC,KAEA,MAAM,cAAEC,EAAa,QAAE/mB,GAAYK,GAAgBgC,YAC7C,OAAE0d,EAAM,QAAE8E,GAAYlF,GAAgBtd,WAC5C,OAAO2kB,MAAM,iBAAiBjC,WAAc,CAC3C+B,SACAG,OAAQ,OACRC,QAAS,CACR,eAAgB,oBAEjBL,KAAMM,KAAKC,UAAU,CACpBjC,KAAM,CACL,CAAC,GAAGJ,YAAe8B,GAEpBnB,OAAQ,CACP/a,QAAS,CACRwZ,MAAOpkB,EAAKI,IACZ4f,OAAQA,IAAS,IAAIF,IAClB,CACAA,IAAKE,IAAS,IAAIF,UAElBrf,EACHqkB,QAASA,GAAW,CAAC,EACrB7kB,QAASskB,GAAWtkB,EAASukB,GAC7BpG,UAAW,CACVjZ,KAAMiZ,GACN1d,QAASsmB,SAMZ/K,MAAMgJ,GAAQA,GAAKqC,SACnBrL,MAAMgJ,GAAmCF,GAAeC,EAAKC,KAC7D3I,OAAOvC,IAEP,MADAuF,GAAO1Z,EAAP0Z,CAAYvF,GACNA,CAAC,GACN,EAGQwN,GACX3hB,GACD,CACCof,EACA8B,EACAtC,KAEA,MAAM,cAAEwC,EAAa,QAAE/mB,GAAYK,GAAgBgC,WACnD,OAAO2kB,MAAM,iBAAiBjC,WAAc,CAC3CkC,OAAQ,OACRC,QAAS,CACR,eAAgB,wBAEjBL,KAAM,qLAEsD1I,gBAAuB4I,OAAmBpC,OAAkBD,GACvH1kB,EACAukB,mEAEYsC,wCAGZ7K,MAAMgJ,GAAQA,GAAKqC,SACnBrL,MAAMgJ,GAAmCF,GAAeC,EAAKC,KAC7D3I,OAAOvC,IAEP,MADAuF,GAAO1Z,EAAP0Z,CAAYvF,GACNA,CAAC,GACN,EAGoBoK,GAAajpB,GChI/B,MAAMssB,GAAmBA,KAC/B,MAAOrhB,IAAK+N,EAAAA,EAAAA,kBACNuT,GAAiBC,EAAAA,EAAAA,eAEjBznB,EAAUoB,KACVV,EAAWqB,KAEX2lB,GAAkBrT,EAAAA,EAAAA,QAAsC,CAAC,GACzDsT,GAAiBtT,EAAAA,EAAAA,QAAsB,IACvCuT,GAAkBvT,EAAAA,EAAAA,QAA+C,CAAC,IAEjE6I,EAAS2K,IAAc3Q,EAAAA,EAAAA,WAAS,GACjC4Q,GAAmBxuB,EAAAA,EAAAA,cAAY,KACpCuuB,IACEE,EAAAA,EAAAA,SAAQL,EAAgBhT,YACvBqT,EAAAA,EAAAA,SAAQJ,EAAejT,YACvBqT,EAAAA,EAAAA,SAAQH,EAAgBlT,SAC1B,GACC,IAEGsT,GAAa1uB,EAAAA,EAAAA,cAAY,KAC9BouB,EAAgBhT,QAAU,CAAC,EAC3BiT,EAAejT,QAAU,GACzBkT,EAAgBlT,QAAU,CAAC,EAC3BoT,GAAkB,GAChB,CAACA,KAEGnU,EAAoBG,IAAyBoD,EAAAA,EAAAA,UAAS,GAEvDrD,GAAoBtS,EAAAA,EAAAA,UACzB,IrBipCK,SAAuCqS,GAC7C,MAAMqU,EAAarU,EAAW5K,UAAU2J,IAClCwJ,GAAS+L,EAAAA,EAAAA,WAAUtU,GACnBuU,EAAkBhM,EAAOlT,OAAOgf,EAAY,GAElD,OADA9L,EAAOiM,QAAQD,EAAgB,IACxBhM,CACR,CqBvpCQkM,CAA8BroB,EAAQ4T,WAAWhB,WACvD,CAAC5S,EAAQ4T,WAAWhB,YAGdgB,EAAY0U,IAAiBpR,EAAAA,EAAAA,UAAmCrD,GACjE0U,EAAgB7nB,EAASE,MAAM4nB,6BAA+B,EAE9DxU,GAAc1a,EAAAA,EAAAA,cACnB,CAACiP,EAAIuO,KACJ4Q,EAAgBhT,QAAQnM,GAAMuO,EAC9BgR,IACAQ,GAAelP,GAAc,IACzBA,EACH,CACC7Q,KACArD,KAAM4R,EAAcrC,uBACpBD,OAAQ,IAAKsC,EAAejB,qBAAsBtN,MAElD,GAEH,CAACuf,IAGI/Q,GAAmBzd,EAAAA,EAAAA,cAGxB,CAACiP,EAAIzE,EAAKvF,KACT,GAAImpB,EAAgBhT,QAAQnM,GAC3Bmf,EAAgBhT,QAAQnM,GAAIzE,GAAOvF,OAC7B,GAAIqpB,EAAgBlT,QAAQnM,GAAK,CACvC,MAAMkgB,GAAiB5mB,EAAAA,EAAAA,MAAKgS,GAAoBvL,GAASA,EAAKC,KAAOA,IACrEqf,EAAgBlT,QAAQnM,GAAIzE,GAAOvF,EAC/BkqB,GAAkBA,EAAejU,OAAO1Q,KAASvF,UAC7CqpB,EAAgBlT,QAAQnM,GAAIzE,GAEM,KAAtCwK,EAAAA,EAAAA,MAAKsZ,EAAgBlT,QAAQnM,YACzBqf,EAAgBlT,QAAQnM,EAEjC,MACCqf,EAAgBlT,QAAQnM,GAAM,CAC7B,CAACzE,GAAMvF,GAGTupB,IACAQ,GAAelP,IACd/L,EAAAA,EAAAA,KAAI+L,GAAY9Q,GACfA,EAAKC,KAAOA,EACT,IACGD,EACHkM,OAAQ,IACJlM,EAAKkM,OACR,CAAC1Q,GAAMvF,IAGR+J,KAEJ,GAEF,CAACwf,EAAkBjU,IAGdE,GAAiBza,EAAAA,EAAAA,cACrBovB,IACIhB,EAAgBhT,QAAQgU,UACpBhB,EAAgBhT,QAAQgU,IAE/Bf,EAAejT,QAAU,IAAIiT,EAAejT,QAASgU,UAC9Cd,EAAgBlT,QAAQgU,IAEhCZ,IACAQ,GAAelP,IAAcM,EAAAA,EAAAA,QAAON,GAAYxG,GAAaA,EAASrK,KAAOmgB,KAAY,GAE1F,CAACZ,KAGF1Q,EAAAA,EAAAA,YAAU,KACTkR,EAAczU,GACdmU,GAAY,GACV,CAACnU,EAAmBmU,IAEvB,MAAM7M,GAAS7hB,EAAAA,EAAAA,cAA2C,KACzD,GACCua,EAAkBvE,QAAShB,EAAAA,EAAAA,MAAKoZ,EAAgBhT,SAAWiT,EAAejT,QAAQpF,OAClFiZ,EAaA,OAXAf,EAAe,CACd1jB,IAAK,MACL2Z,SAAS,EACTrY,KAAM,QACN5G,MAAO0H,EACN,6CACA,mFAEDyiB,gBAAiB,IACjBC,YAAY,IAENvC,QAAQwC,WAAW,CACzBxC,QAAQyC,OACP,IAAIvD,MACH,sFAMJ,MAAMwD,GAlLPC,EAmLEtB,EAAgBhT,SAjLXrH,EAAAA,EAAAA,KACN2b,GACC1gB,IAAI,CACJ6b,MAAOpkB,EAAKC,QACZ4S,SAAU,CACT1N,KAAMoD,EAAKmM,uBACXD,OAAQ,IACJlM,EACHuM,0BAA2BvM,EAAKuM,2BAA6B,gBAXlE,IACCmU,EAqLC,MAAMC,GApK6BC,EAqKlCvB,EAAejT,SApKVrH,EAAAA,EAAAA,KACN6b,GACA,CAACR,EAAY3f,KAAK,CACjBob,MAAOpkB,EAAKC,QACZ4S,SAAU,CAAErK,GAAImgB,GAChBS,UAAWpgB,EAAMwH,gBANpB,IAAqC2Y,EAwKnC,MAAME,GA5JPC,EA6JEzB,EAAgBlT,SA3JXrH,EAAAA,EAAAA,KACNgc,GACA,CAAC/gB,EAAMS,KAAK,CACXob,MAAOpkB,EAAKC,QACZ4S,SAAU,CACTrK,GAAIQ,EACJyL,OAAQlM,QATZ,IACC+gB,EAgKC,MAAMC,EAAUpF,GAAajpB,EAAbipB,CAGd,QAAS,CACVC,MAAOpkB,EAAKI,IACZopB,sBAAuBN,EAAe3Z,OAAS,EAAI2Z,OAAiBzoB,EACpEgpB,sBAAuBT,EAAuBzZ,OAAS,EAAIyZ,OAAyBvoB,EACpFipB,sBAAuBL,EAAuB9Z,OAAS,EAAI8Z,OAAyB5oB,IAEnFwb,MAAMgJ,IACNwC,EAAe,CACd1jB,IAAK,MACL2Z,SAAS,EACTrY,KAAM,OACN5G,MAAO0H,EAAE,kCAAmC,yBAC5CyiB,gBAAiB,IACjBC,YAAY,IAEbvoB,GAAgBsgB,UACfpc,EAAAA,EAAAA,KAAS6U,IACJA,EAAUpZ,UACboZ,EAAUpZ,QAAQ4T,WAAWhB,SrBikC7B,SACN8W,EACAC,EACAC,EACAC,GAEA,MAAMC,GAAqBpQ,EAAAA,EAAAA,QAC1BgQ,GACCphB,IAAUqhB,EAAkBnW,SAASlL,EAAKC,MAGtCwhB,GAAsBtkB,EAAAA,EAAAA,QAC3BokB,GACA,CAACxf,EAAazJ,EAAO2H,KACpB,MAAMyhB,GAAYhhB,EAAAA,EAAAA,WAAUqB,GAAcuI,GAAaA,EAASrK,KAAOA,IAUvE,OATIyhB,GAAa,IAChB3f,EAAY2f,GAAWxV,OAAS,IAC5BnK,EAAY2f,GAAWxV,UACvB5T,GAEAA,EAAM6T,yBAA2B9B,GAAUtI,EAAY2f,MAC1D3f,EAAY2f,GAAW9kB,KAAOtE,EAAM6T,yBAG/BpK,CAAW,GAEnByf,GAID,OADAC,EAAoB9gB,QAAQ,EAAG,KAAM2gB,GAC9BG,CACR,CqBhmC+CE,CACvC7Q,EAAUpZ,QAAQ4T,WAAWhB,SAC7B+U,EAAejT,SACfrH,EAAAA,EAAAA,KAAI2X,EAAIkF,wBAAyB5hB,GAASA,EAAKsK,SAAS,KACxDgV,EAAgBlT,SAEjB0E,EAAUpZ,QAAQiT,aACjBpR,EAAAA,EAAAA,MACC+lB,EAAgBlT,SACfpM,GAASA,EAAKuN,uBAAyBuD,GAAWpZ,SAASuI,MAC1DkM,wBAA0B2E,EAAUpZ,SAASiT,YAClD,KAGF+U,GAAY,IAEZ3L,OAAO9iB,IASP,GARAiuB,EAAe,CACd1jB,IAAK,MACL2Z,SAAS,EACTrY,KAAM,QACN5G,MAAO0H,EAAE,iBAAkB,0CAC3ByiB,gBAAiB,IACjBC,YAAY,IAETrvB,aAAiBgsB,MACpB,MAAMhsB,EAEP,MAAM,IAAIgsB,MAAuB,iBAAVhsB,EAAqBA,EAAQ,qBAAqB,IAE3E,OAAO8sB,QAAQwC,WAAW,CAACS,GAAS,GAClC,CAACf,EAAe1U,EAAkBvE,OAAQkY,EAAgBthB,EAAG8hB,IAE1D9P,GAA0B3W,EAAAA,EAAAA,UAC/B,IrB2/BwC4oB,EACzCnqB,EACAU,KAEA,MAAMyb,EAAmB,GA6BzB,OA1BAA,EAAO3Z,KAAKxC,EAAQkF,MAGhBlF,EAAQyB,QAAQC,SACnB1B,EAAQyB,QAAQC,QAAQ+C,SAAS3C,KAC5BA,EAAOA,QAA4B,WAAjBA,EAAOF,OAAuC,mBAAjBE,EAAOF,OACzDE,EAAOA,OAAO2C,SAAS2lB,IACJ,YAAdA,EAAKhlB,MAAsBglB,EAAKC,OACnCD,EAAKC,MAAM5lB,SAAS4lB,IACnBlO,EAAO3Z,KAAK6nB,EAAMC,KAAK,GAEzB,GAEF,IAKE5pB,EAASE,MAAM2pB,mBACdC,EAAAA,EAAAA,SAAQ9pB,EAASE,MAAM2pB,iBAC1BpO,EAAO3Z,QAAS9B,EAASE,MAAM2pB,iBAE/BpO,EAAO3Z,KAAKioB,OAAO/pB,EAASE,MAAM2pB,oBAI7BG,EAAAA,EAAAA,MAAKvO,EAAO,EqB5hCZgO,CAA2BnqB,EAASU,IAC1C,CAACV,EAASU,IAGLuc,GAAW3jB,EAAAA,EAAAA,cAAY,KAC5B0uB,IACAM,EAAczU,GACdC,GAAsBxF,EAAAA,EAAAA,MAAKuF,GAAqB,EAAE,GAChD,CAACA,EAAmBmU,IAEjB2C,GAAkBppB,EAAAA,EAAAA,UAAkC,KACzD,MAAMqR,EAAWgB,EAAWD,GAC5B,OAAIf,EAEFnZ,IAAAA,cAACod,GAAe,CAACC,cAAelE,EAAS4B,OAAQuC,iBAAkBA,IAG9D,IAAI,GACT,CAACnD,EAAYD,EAAoBoD,IAE9B6T,GAAuBrpB,EAAAA,EAAAA,UAAkC,KAC9D,MAAMqR,EAAWgB,EAAWD,GAC5B,OAAIf,EAEFnZ,IAAAA,cAACwe,GAAoB,CACpBnB,cAAelE,EAAS4B,OACxBuC,iBAAkBA,EAClBmB,wBAAyBA,IAIrB,IAAI,GACT,CAACA,EAAyBtE,EAAYD,EAAoBoD,IAE7D,OACCtd,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAACujB,GAAc,CACd7B,OAAQA,EACR8B,SAAUA,EACVC,QAASA,EACThI,MAAOhP,EAAE,iBAAkB,cAE5BzM,IAAAA,cAACkc,EAAAA,UAAS,CACThH,WAAYwH,GAAAA,GACZnH,QAAS,CAAEtP,IAAK,SAChBd,OAAO,QAERnF,IAAAA,cAACkc,EAAAA,UAAS,CACThH,WAAYwH,GAAAA,GACZJ,cAAc,aACd/G,QAAS,CAAE7O,IAAK,SAChBqN,MAAO,CAAEC,SAAU,SAEnBhU,IAAAA,cAACga,GAAY,CACZC,YAAa1T,EAAQkF,KACrB0O,WAAYA,EACZD,mBAAoBA,EACpBG,sBAAuBA,EACvBC,eAAgBA,EAChBC,YAAaA,EACbH,kBAAmBA,IAEnBlB,GAAUiB,EAAWD,IACrBla,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAACie,GAAsB,CACtB1X,QAASA,EACT4S,SAAUgB,EAAW,GACrBmD,iBAAkBA,IAElB6T,GAGFnxB,IAAAA,cAAAA,IAAAA,SAAA,KACEkxB,EACAC,IAIF,EAIQC,GAA0BA,IACtCpxB,IAAAA,cAACqxB,EAAAA,aAAY,KACZrxB,IAAAA,cAAC8tB,GAAgB,OCzWNwD,IAAsBzqB,EAAAA,EAAAA,KAAAA,EAA2B,KAAM,CACnE0qB,QAAQ,EAERC,mBAAoB,kBAEpBC,qBAAsB,0FCfhB,SAASC,KACf,OAAOjH,GAAajpB,EAAbipB,CAA2B,aAAc,CAC/CC,MAAOpkB,EAAKC,QACZorB,QAAQ,IAEPpP,MAAK,IAAMgL,MAAM,UAAW,CAAEqE,SAAU,aACxCrP,MAAK,KACL,MAAMsP,EAAkBP,GAAoB1oB,WAAWkpB,uBfRnD,IAAczuB,EeSlBwuB,GfTkBxuB,EeSKwuB,EfRzBzuB,OAAOC,SAASuhB,OAAOvhB,IeQqBshB,IAAW,IAErD/B,OAAO9iB,IACPC,QAAQD,MAAMA,EAAM,GAEvB,CCfO,MAIMiyB,GAAiCtlB,IAAY,CACzD1H,MAAO0H,EAAE,iCAAkC,aAC3CqC,GAAI,0BAEQkjB,GAAyBvlB,IAAY,CACjD1H,MAAO0H,EAAE,iDAAkD,0BAC3DqC,GAAI,kBAEQmjB,GAAyBxlB,IAAY,CACjD1H,MAAO0H,EAAE,aAAc,UACvBqC,GAAI,iBAMQojB,GAAmBzlB,IAAY,CAC3C1H,MAAO0H,EAAE,mBAAoB,gBAC7BqC,GAAI,eAOQqjB,GAAuB1lB,GAA4C,CAE/EslB,GAA8BtlB,GAC9BulB,GAAsBvlB,GACtBwlB,GAAsBxlB,GAEtBylB,GAAgBzlB,I,eCtBV,MAAM2lB,GAASA,KACrB,MAAO3lB,IAAK+N,EAAAA,EAAAA,kBAEN6X,GAAevqB,EAAAA,EAAAA,UAAQ,IDQI2E,KAAY,CAC7C1H,MAAO0H,EAAE,2BAA4B,WACrCqC,GAAI,YCV+BwjB,CAAkB7lB,IAAI,CAACA,IAE1D,OACCzM,IAAAA,cAACuyB,EAAAA,eAAc,CACdxtB,MAAOstB,EAAattB,MACpB0X,SAAS,yBACTvX,MAAM,OACN4J,GAAIujB,EAAavjB,IAEjB9O,IAAAA,cAAC8V,GAAAA,EAAM,CACNJ,QAAQ,YACRb,KAAK,SACLkB,QAAS2b,GACT3d,MAAO,CACNoC,gBAAiB4G,GAAAA,GACjBzP,MAAO2P,GAAAA,IAERjH,UAAWhW,IAAAA,cAACwyB,GAAAA,EAAU,CAACze,MAAO,CAAEzG,MAAO6P,GAAAA,OAEtC1Q,EAAE,kCAAmC,WAEvB,ECrCZ,SAASgmB,GAASC,EAAuCC,IAC/DC,EAAAA,EAAAA,qBACCF,GACA,KAAM,CACLG,MAAOF,KAER,CAACA,GAEH,CCmBA,SAASG,GAAcC,GACtB,OAAOA,E3BFD,SAAuBA,GAC7B,MAAMpc,EAAO,IAAIpP,KAQjB,OAPAoP,EAAKqc,eAAe1I,OAAOyI,EAAQE,UAAU,EAAG,KAChDtc,EAAKuc,YAAY5I,OAAOyI,EAAQE,UAAU,EAAG,IAAM,GACnDtc,EAAKwc,WAAW7I,OAAOyI,EAAQE,UAAU,EAAG,KAC5Ctc,EAAKyc,YAAY9I,OAAOyI,EAAQE,UAAU,EAAG,MAC7Ctc,EAAK0c,cAAc/I,OAAOyI,EAAQE,UAAU,GAAI,MAChDtc,EAAK2c,cAAchJ,OAAOyI,EAAQE,UAAU,GAAI,MAChDtc,EAAK4c,mBAAmB,GACjB5c,CACR,C2BRkB6c,CAAcT,GAAW,IAAIxrB,IAC/C,CAEO,MAAMksB,GAA+BA,EAC3CC,SACA5W,WACA6W,0BACAC,2BACAC,eAEA,MAAMpnB,EAAIyH,MACH4f,EAAUC,IAAetW,EAAAA,EAAAA,UAAeqV,GAAca,KACtDK,EAAWC,IAAgBxW,EAAAA,EAAAA,UAAeqV,GAAcc,KACxDM,EAAeC,IAAoB1W,EAAAA,EAAAA,WAAkB,GACtD2W,GAAqBtsB,EAAAA,EAAAA,UAAQ,IAAMgV,GAAYoX,GAAe,CAACpX,EAAUoX,IAEzEG,GAAavsB,EAAAA,EAAAA,UAAQ,IAAM+Q,GAA2B6a,IAAS,CAACA,IAEhEY,GAAYz0B,EAAAA,EAAAA,cAAY,KAC7B,MAAM00B,EAAezB,GAAca,GAC7Ba,EAAgB1B,GAAcc,GACpCG,EAAYQ,GACZN,EAAaO,GAGb,MAAMC,EAAiBrd,GAAWmd,GAC5BG,EAAkBnd,GAASid,GACjCL,EACCI,EAAaI,YAAcF,EAAeE,WACzCH,EAAcG,YAAcD,EAAgBC,UAC7C,GACC,CAAChB,EAAyBC,KAE7BjW,EAAAA,EAAAA,YAAU,KACT2W,GAAW,GACT,CAACA,IAEJ7B,GAASoB,EAAUS,GAEnB,MAAMM,GAA8B/0B,EAAAA,EAAAA,cAClCg1B,IACA,GAAIA,GAOH,GANAd,GAAapU,IACRkV,EAAYF,YAAchV,EAAUgV,WACvCN,EAAW,gCAAiC3d,GAAcme,IAEpDA,KAEJA,EAAYF,UAAYX,EAAUW,UAAW,CAChD,MAAMG,EAAe,IAAIvtB,KAAKstB,GAC9BZ,EAAaa,GACbT,EAAW,iCAAkC3d,GAAcoe,GAC5D,OAGAf,GAAapU,GAAc,IAAIpY,KAAKoY,IACrC,GAED,CAACqU,EAAWK,IAGPU,GAA+Bl1B,EAAAA,EAAAA,cACnCi1B,IACA,GAAIA,GAOH,GANAb,GAActU,IACTmV,EAAaH,YAAchV,EAAUgV,WACxCN,EAAW,iCAAkC3d,GAAcoe,IAErDA,KAEJA,EAAaH,UAAYb,EAASa,UAAW,CAChD,MAAME,EAAc,IAAIttB,KAAKutB,GAC7Bf,EAAYc,GACZR,EAAW,gCAAiC3d,GAAcme,GAC3D,OAGAZ,GAActU,GAAc,IAAIpY,KAAKoY,IACtC,GAED,CAACmU,EAAUO,IAGNW,GAAen1B,EAAAA,EAAAA,cAAY,KAChCs0B,GAAkBc,IACjB,MAAMC,GAAgBD,EAiBtB,OAhBIC,IACHnB,GAAapU,IACZ,MAAMwV,EAAkB/d,GAAWuI,GAInC,OAHIwV,EAAgBR,YAAchV,EAAUgV,WAC3CN,EAAW,gCAAiC3d,GAAcye,IAEpDA,CAAe,IAEvBlB,GAActU,IACb,MAAMyV,EAAiB7d,GAASoI,GAIhC,OAHIyV,EAAeT,YAAchV,EAAUgV,WAC1CN,EAAW,iCAAkC3d,GAAc0e,IAErDA,CAAc,KAGhBF,CAAY,GAClB,GACA,CAACb,IAEJ,OACCr0B,IAAAA,cAACkc,EAAAA,UAAS,CAAC3G,QAAS,CAAE8f,SAAU,SAAWC,IAAK,SAAUC,eAAgB,cACzEv1B,IAAAA,cAACkc,EAAAA,UAAS,CAACG,YAAa,aAAciZ,IAAK,UAC1Ct1B,IAAAA,cAACw1B,EAAAA,eAAc,CACdzwB,MAAO0H,EAAE,2CAA4C,cACrDgpB,WAAY,IACZ3Y,SAAUA,EACVlF,aAAckc,EACdlW,SAAUgX,EACVc,aAAa,EACbxwB,MAAO,OACPiR,gBAAiB2G,EAAW,cAAgB,UAE7C9c,IAAAA,cAACw1B,EAAAA,eAAc,CACdzwB,MAAO0H,EAAE,yCAA0C,YACnDgpB,WAAY,IACZ3Y,SAAUA,EACV6Y,UAAW,GACX/d,aAAcoc,EACdpW,SAAUmX,EACVW,aAAa,EACbxwB,MAAO,OACPiR,gBAAiB2G,EAAW,cAAgB,WAG9C9c,IAAAA,cAACghB,EAAAA,SAAQ,CACRlE,SAAUA,EACV/X,MAAO0H,EAAE,wCAAyC,YAClD3H,MAAOovB,EACPne,QAASif,IAEVh1B,IAAAA,cAACkc,EAAAA,UAAS,CAACG,YAAa,aAAciZ,IAAK,UAC1Ct1B,IAAAA,cAACw1B,EAAAA,eAAc,CACdzwB,MAAO0H,EAAE,2CAA4C,cACrDmpB,gBAAc,EACdC,oBAAkB,EAClBF,UAAU,GACVF,WAAW,IACX7d,aAAckc,EACdlW,SAAUgX,EACV9X,SAAUsX,EACVlvB,MAAO,OACPiR,gBAAiB2G,EAAW,cAAgB,UAE7C9c,IAAAA,cAACw1B,EAAAA,eAAc,CACdzwB,MAAO0H,EAAE,yCAA0C,YACnDmpB,gBAAc,EACdC,oBAAkB,EAClBF,UAAU,GACVF,WAAW,IACX7d,aAAcoc,EACdpW,SAAUmX,EACVjY,SAAUsX,EACVlvB,MAAO,OACPiR,gBAAiB2G,EAAW,cAAgB,WAGnC,ECvIDgZ,GACZrpB,IAAY,CAEZspB,gBAAiB,CAChBhxB,MAAO0H,EACN,mEACA,oCAED3H,MAAO,mBAERkxB,oBAAqB,CACpBjxB,MAAO0H,EACN,sEACA,+DAED3H,MAAO,uBAERmxB,gBAAiB,CAChBlxB,MAAO0H,EACN,0EACA,+EAED3H,MAAO,mBAERoxB,kBAAmB,CAClBnxB,MAAO0H,EACN,kEACA,uDAED3H,MAAO,uBAIIqxB,GAA8BA,CAC1ClvB,EACAwF,KAEA,MAAM2pB,EAAuBN,GAA0BrpB,GACvD,MAC+D,UAA9DxF,EAASC,MAAMmvB,4CAC8C,UAA7DpvB,EAASC,MAAMovB,0CAERF,EAAqBL,gBAGqB,QAAjD9uB,EAASC,MAAMqvB,+BAC8C,SAA7DtvB,EAASC,MAAMovB,0CAERF,EAAqBJ,oBAGqB,eAAjD/uB,EAASC,MAAMqvB,+BAC8C,SAA7DtvB,EAASC,MAAMovB,0CAERF,EAAqBH,gBAEtBG,EAAqBF,iBAAiB,EAQjCM,GAAsBA,EAClCvvB,WACAysB,SACAG,eAEA,MAAMpnB,EAAIyH,KACJuiB,GAA0B3uB,EAAAA,EAAAA,UAAQ,IAAMkqB,GAAsBvlB,IAAI,CAACA,KAClEiqB,EAA6BC,IAAkClZ,EAAAA,EAAAA,UAChB,SAArDxW,EAASC,MAAM0vB,oCAETC,EAAsBC,IAA2BrZ,EAAAA,EAAAA,UACvDxW,EAASC,MAAM6vB,4BAA8B,KAEvCC,EAAqCC,IAC3CxZ,EAAAA,EAAAA,UAA+E,SAA7DxW,EAASC,MAAMovB,4CAC3BY,EAA8BC,IAAmC1Z,EAAAA,EAAAA,UACvExW,EAASC,MAAMkwB,oCAAsC,KAE/CC,EAA6BC,IAAkC7Z,EAAAA,EAAAA,UAEpE0Y,GAA4BlvB,EAAUwF,KACjC8qB,EAAgCC,IAAqC/Z,EAAAA,EAAAA,YACzExW,EAASC,MAAMuwB,iCACdxwB,EAASC,MAAMwwB,gCAGbC,GAAgC/c,EAAAA,EAAAA,QAAwC,MAExE0Z,GAAYz0B,EAAAA,EAAAA,cAAY,KAC7B82B,EAAoF,SAArD1vB,EAASC,MAAM0vB,mCAC9CE,EAAwB7vB,EAASC,MAAM6vB,4BAA8B,IACrEE,EAC8D,SAA7DhwB,EAASC,MAAMovB,2CAEhBa,EAAgClwB,EAASC,MAAMkwB,oCAAsC,IACrFE,EAA+BnB,GAA4BlvB,EAAUwF,IACrE+qB,IACGvwB,EAASC,MAAMuwB,iCACdxwB,EAASC,MAAMwwB,gCAEnBC,EAA8B1c,SAAS4X,OAAO,GAC5C,CAAC5rB,EAAUwF,KAEdkR,EAAAA,EAAAA,YAAU,KACT2W,GAAW,GACT,CAACA,IAEJ7B,GAASoB,EAAUS,GAEnB,MAAMD,GAAavsB,EAAAA,EAAAA,UAAQ,IAAM+Q,GAA2B6a,IAAS,CAACA,IAEhEkE,GAAyC9vB,EAAAA,EAAAA,UAC9C,IA1ID2E,IAKI,CACJ,CACC1H,MAAO0H,EAAE,2CAA4C,qBACrD3H,OAAO,GAER,CACCC,MAAO0H,EAAE,kDAAmD,4BAC5D3H,OAAO,IA8HD+yB,CAAsCprB,IAC5C,CAACA,IAGIqrB,GAA2ChwB,EAAAA,EAAAA,UAChD,KACCM,EAAAA,EAAAA,MACCwvB,GACC/oB,GAASA,EAAK/J,QAAU4xB,KAE3B,CAACA,EAA6BkB,IAGzBG,GAAsCl4B,EAAAA,EAAAA,cAK1CiF,IACc,OAAVA,IACHuvB,EAAW,oCAAqCvvB,GAChD6xB,EAA+B7xB,GAChC,GAED,CAACuvB,IAGI2D,GAA6BlwB,EAAAA,EAAAA,UAClC,IAAMwhB,OAAOC,OAAOuM,GAA0BrpB,KAC9C,CAACA,IAGIwrB,GAAyBp4B,EAAAA,EAAAA,cAC7BiF,IACc,oBAAVA,GACHuvB,EAAW,gCAAiC,QAC5CA,EAAW,6CAA6C,GACxDA,EAAW,8CAA8C,GACzD4C,GAAuC,IACnB,wBAAVnyB,GACVuvB,EAAW,gCAAiC,OAC5CA,EAAW,6CAA6C,GACxDA,EAAW,8CAA8C,GACzD4C,GAAuC,IACnB,oBAAVnyB,GACVuvB,EAAW,gCAAiC,cAC5CA,EAAW,6CAA6C,GACxDA,EAAW,8CAA8C,GACzD4C,GAAuC,IACnB,sBAAVnyB,IACVuvB,EAAW,gCAAiC,QAC5CA,EAAW,6CAA6C,GACxDA,EAAW,8CAA8C,GACzD4C,GAAuC,GACxC,GAED,CAAC5C,IAGI6D,GAA0Br4B,EAAAA,EAAAA,cAC9BiF,IACA,GAAc,OAAVA,EAAgB,CACnBmzB,EAAuBnzB,GACvB,MAAMqzB,GAAgB/vB,EAAAA,EAAAA,MAAK4vB,GAA6BnpB,GAASA,EAAK/J,QAAUA,IAChFqzB,GAAiBb,EAA+Ba,EACjD,IAED,CAACF,EAAwBD,IAGpBI,GAA+Bv4B,EAAAA,EAAAA,cACnCge,IACAiZ,EAAwBjZ,EAAGxV,OAAOvD,OAClCuvB,EAAW,6BAA8BxW,EAAGxV,OAAOvD,MAAM,GAE1D,CAACuvB,IAGIgE,GAAuCx4B,EAAAA,EAAAA,cAC3Cge,IACAsZ,EAAgCtZ,EAAGxV,OAAOvD,OAC1CuvB,EAAW,qCAAsCxW,EAAGxV,OAAOvD,MAAM,GAElE,CAACuvB,IAGIiE,GAAgCz4B,EAAAA,EAAAA,cAAY,KACjD23B,GAAmC7X,IAClC,MAAM4Y,GAAa5Y,EAYnB,OAXK4Y,GAICtxB,EAASC,MAAMuwB,+BACnBpD,EAAW,gCAAiC3d,GAAc,IAAInP,OAE1DN,EAASC,MAAMwwB,gCACnBrD,EAAW,iCAAkC3d,GAAc,IAAInP,SAPhE8sB,EAAW,qCAAiCttB,GAC5CstB,EAAW,sCAAkCttB,IASvCwxB,CAAS,GACf,GACA,CACFtxB,EAASC,MAAMuwB,8BACfxwB,EAASC,MAAMwwB,+BACfrD,IAGD,OACCr0B,IAAAA,cAACuyB,EAAAA,eAAc,CACdxtB,MAAO0xB,EAAwB1xB,MAC/B0X,SAAS,yBACTvX,MAAM,OACN4J,GAAI2nB,EAAwB3nB,IAE5B9O,IAAAA,cAACkc,EAAAA,UAAS,CAACqZ,eAAe,WAAWhgB,QAAS,CAAE7O,IAAK,SAAW4uB,IAAK,UACpEt1B,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACmjB,QAAS,EAAGljB,GAAI,CAAEpQ,MAAO,SACzClF,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAAA,OAAK+T,MAAO,CAAE7O,MAAO,SACpBlF,IAAAA,cAAC2gB,EAAAA,OAAM,CACNlS,MAAOmpB,EACP7yB,MAAO0H,EAAE,sBAAuB,iBAChCmR,SAAUma,EACVnX,UAAWkX,EACX/jB,MAAO,CAAE7O,MAAO,OAAQ6b,OAAQ,uBAChC7L,WAAY4L,GAAAA,GACZ2X,cAAc,WAIjBz4B,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAAA,OAAK+T,MAAO,CAAE7O,MAAO,SACpBlF,IAAAA,cAAC2gB,EAAAA,OAAM,CACN7D,UAAW4Z,EACXjoB,MAAOupB,EACPjzB,MAAO0H,EAAE,iDAAkD,oBAC3DmR,SAAUsa,EACVtX,UAAWyW,EACXoB,cAAe,OACfC,iBAAkB,QAClBxX,UAAW,eACXhM,WACCwhB,EACG5V,GAAAA,GACA6X,GAAAA,GAEJ5kB,MAAO,CAAE7O,MAAO,OAAQ6b,OAAQ,2BAInC/gB,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,IACZ7U,IAAAA,cAAC+d,GAAAA,EAAS,CACThZ,MAAO0H,EAAE,mDAAoD,uBAC7DmsB,WAAS,EACTC,KAAM,EACNvjB,GAAI,CACHwjB,YAAa,YACb3iB,gBAAiBugB,EACd5V,GAAAA,GACA6X,GAAAA,IAEJ3a,WAAS,EACTlZ,MAAO+xB,EACP/Z,UAAW4Z,EACX9Y,SAAUwa,KAGZp4B,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,IACXmiB,GACAh3B,IAAAA,cAAC+d,GAAAA,EAAS,CACTC,WAAS,EACT4a,WAAS,EACTC,KAAM,EACN/zB,MAAOoyB,EACPpa,UAAW4Z,EACX3xB,MAAO0H,EACN,4DACA,4CAEDmR,SAAUya,EACV/iB,GAAI,CACHwjB,YAAa,YACb3iB,gBAAiBugB,EACd5V,GAAAA,GACA6X,GAAAA,SAwBT34B,IAAAA,cAACkc,EAAAA,UAAS,CAACqZ,eAAe,WAAWhgB,QAAS,CAAE7O,IAAK,UACpD1G,IAAAA,cAACuc,EAAAA,IAAG,CACHhH,QAAS,CAAE7O,IAAK,SAChB4V,cAAc,WACdiZ,eAAe,WACfrwB,MAAM,QAENlF,IAAAA,cAAC+b,EAAAA,KAAI,CAAClH,KAAK,QAAQ2H,OAAO,QACxB/P,EAAE,8CAA+C,iBAGpDzM,IAAAA,cAAC2U,EAAAA,QAAO,CAAC0gB,SAAS,UAClBr1B,IAAAA,cAACghB,EAAAA,SAAQ,CACRjc,MAAO0H,EACN,uDACA,kDAED3H,MAAOyyB,EACPxhB,QAASuiB,EACTxb,UAAW4Z,IAEZ12B,IAAAA,cAACyzB,GAA4B,CAC5BC,OAAQA,EACR5W,UAAW4Z,IAAgCa,EAC3C5D,wBAAyB1sB,EAASC,MAAMuwB,8BACxC7D,yBAA0B3sB,EAASC,MAAMwwB,+BACzC7D,SAAU8D,KAGI,EC3YNoB,GAAiBA,EAC7B9xB,WACAysB,SACAG,eAEA,MAAMpnB,EAAIyH,MACH8kB,EAAoBC,IAAyBxb,EAAAA,EAAAA,UACF,SAAjDxW,EAASC,MAAMgyB,gCAETC,EAAqBC,IAA0B3b,EAAAA,EAAAA,UACH,SAAlDxW,EAASC,MAAMmyB,iCAETC,EAAsBC,IAA2B9b,EAAAA,EAAAA,UACC,SAAxDxW,EAASC,MAAMsyB,sCAEVC,GAAU3xB,EAAAA,EAAAA,UAAQ,IAAM+Q,GAA2B6a,IAAS,CAACA,IAE7DpnB,GAAOzM,EAAAA,EAAAA,cAAY,KACxBo5B,EAAuE,SAAjDhyB,EAASC,MAAMgyB,+BACrCE,EAAyE,SAAlDnyB,EAASC,MAAMmyB,gCACtCE,EAAgF,SAAxDtyB,EAASC,MAAMsyB,qCAAgD,GACrF,CACFvyB,EAASC,MAAMsyB,qCACfvyB,EAASC,MAAMgyB,8BACfjyB,EAASC,MAAMmyB,iCAGhB5G,GAASoB,EAAUvnB,IAEnBqR,EAAAA,EAAAA,YAAU,KACTrR,GAAM,GACJ,CAACA,IAEJ,MAAMotB,GAAc75B,EAAAA,EAAAA,cAAY,KAC/Bo5B,GAAuBtZ,IACtB,MAAMga,GAAYha,EAElB,OADA8Z,EAAQ,gCAAiCE,GAClCA,CAAQ,GACd,GACA,CAACF,IAEEG,GAAe/5B,EAAAA,EAAAA,cAAY,KAChCu5B,GAAwBzZ,IACvB,MAAMga,GAAYha,EAElB,OADA8Z,EAAQ,iCAAkCE,GACnCA,CAAQ,GACd,GACA,CAACF,IAEEI,GAAgBh6B,EAAAA,EAAAA,cAAY,KACjC05B,GAAyB5Z,IACxB,MAAMga,GAAYha,EAElB,OADA8Z,EAAQ,uCAAwCE,GACzCA,CAAQ,GACd,GACA,CAACF,IAEEpH,GAAevqB,EAAAA,EAAAA,UAAQ,IAAMmqB,GAAsBxlB,IAAI,CAACA,IAE9D,OACCzM,IAAAA,cAACuyB,EAAAA,eAAc,CACdxtB,MAAOstB,EAAattB,MACpB0X,SAAS,yBACTvX,MAAM,OACN4J,GAAIujB,EAAavjB,IAEjB9O,IAAAA,cAACkc,EAAAA,UAAS,CAACqZ,eAAe,WAAWhgB,QAAS,CAAE7O,IAAK,UACpD1G,IAAAA,cAACghB,EAAAA,SAAQ,CACRjc,MAAO0H,EACN,gEACA,mCAED3H,MAAOk0B,EACPjjB,QAAS2jB,IAEV15B,IAAAA,cAACghB,EAAAA,SAAQ,CACRjc,MAAO0H,EACN,iEACA,oCAED3H,MAAOq0B,EACPpjB,QAAS6jB,IAEV55B,IAAAA,cAACghB,EAAAA,SAAQ,CACRjc,MAAO0H,EACN,kEACA,qCAED3H,MAAOw0B,EACPvjB,QAAS8jB,KAGK,ECrBnB,GA1EsCC,EAAGC,iBACxC,MAAMttB,EAAIyH,KAEJjN,EAAWqB,KACX0xB,EAAOpzB,IAAiBc,GAAMA,EAAEL,YAChC4yB,GAAQnyB,EAAAA,EAAAA,UAAQ,KACrB,MAAMoyB,EAAY5P,OAAOrjB,GAAUE,OAAOgzB,iBAC1C,OAAID,EAAY,EACRE,KAAKC,MAAOL,EAAOE,EAAa,MAEhC,CAAC,GACP,CAACjzB,GAAUE,OAAOgzB,gBAAiBH,IAEhCM,GAAcxyB,EAAAA,EAAAA,UAAQ,KACZ,IAAXmyB,GAAgBA,GAAS,IACrB,IAEDA,GACL,CAACA,IAEE1uB,GAAczD,EAAAA,EAAAA,UAAQ,KAC3B,QAAQ,GACP,KAAKmyB,EAAQ,EACZ,OAAOxtB,EAAE,uBAAwB,sCAClC,KAAe,MAAVwtB,EACJ,OAAOxtB,EAAE,wBAAyB,6CACnC,QACC,OAAOA,EAAE,qBAAsB,CAC9BmL,aAAc,oDACdqiB,UAEH,GACE,CAACA,EAAOxtB,IAEL8tB,GAAiBzyB,EAAAA,EAAAA,UAAQ,KAC9B,QAAQ,GACP,KAAKmyB,GAAS,GACb,MAAO,QACR,KAAKA,GAAS,GACb,MAAO,UACR,KAAgB,IAAXA,EACJ,MAAO,QACR,QACC,MAAO,UACT,GACE,CAACA,IACE5H,GAAevqB,EAAAA,EAAAA,UAAQ,IAAMoqB,GAAgBzlB,IAAI,CAACA,IACxD,OAAOstB,EACN/5B,IAAAA,cAACkc,EAAAA,UAAS,CAAChX,MAAM,MAAMqQ,QAAS,CAAEpN,MAAO,WACxCnI,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAOwG,EAAa2V,UAAU,UACtClhB,IAAAA,cAACy6B,EAAAA,MAAK,CAACC,KAAMJ,EAAaC,eAAgBA,MAI5Cv6B,IAAAA,cAACuyB,EAAAA,eAAc,CACdxtB,MAAOstB,EAAattB,MACpB0X,SAAS,yBACTvX,MAAM,OACN4J,GAAIujB,EAAavjB,IAEjB9O,IAAAA,cAACkc,EAAAA,UAAS,CAAChX,MAAM,OAAOqQ,QAAS,CAAE8f,SAAU,WAC5Cr1B,IAAAA,cAACkc,EAAAA,UAAS,CACTG,YAAY,aACZC,cAAc,aACd/G,QAAS,CAAEqH,OAAQ,WAEnB5c,IAAAA,cAAC+b,EAAAA,KAAI,KAAExQ,IAERvL,IAAAA,cAACy6B,EAAAA,MAAK,CAACC,KAAMJ,EAAaC,eAAgBA,KAG5C,EC/DWI,GAA8BA,EAC1C1zB,WACAysB,SACAxQ,OACA0X,UACA/G,eAEA,MAAMpnB,EAAIyH,KACJ2mB,GAAU/yB,EAAAA,EAAAA,UAAQ,IAAM0P,GAAW/K,IAAI,CAACA,IACxCquB,GAAYhzB,EAAAA,EAAAA,UAAQ,I/BuZE2E,IAA4C,CACxE,CACC3H,MAAO,aACPC,MAAO0H,EAAE,sBAAuB,CAAE3H,MAAO,aAAc8S,aAAc,wBAEtE,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CAAE3H,MAAO,aAAc8S,aAAc,qBAE1E,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,oBAExE,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CAAE3H,MAAO,aAAc8S,aAAc,sBAE5E,CACC9S,MAAO,oBACPC,MAAO0H,EAAE,6BAA8B,CACtC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,oBACPC,MAAO0H,EAAE,6BAA8B,CACtC3H,MAAO,aACP8S,aAAc,sBAGhB,CACC9S,MAAO,sBACPC,MAAO0H,EAAE,+BAAgC,CACxC3H,MAAO,aACP8S,aAAc,iCAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,+BAGhB,CACC9S,MAAO,oBACPC,MAAO0H,EAAE,6BAA8B,CACtC3H,MAAO,aACP8S,aAAc,2CAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,kCAGhB,CACC9S,MAAO,sBACPC,MAAO0H,EAAE,+BAAgC,CACxC3H,MAAO,aACP8S,aAAc,2BAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CAAE3H,MAAO,aAAc8S,aAAc,uBAE3E,CACC9S,MAAO,qBACPC,MAAO0H,EAAE,8BAA+B,CACvC3H,MAAO,aACP8S,aAAc,qBAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,iCAGhB,CACC9S,MAAO,oBACPC,MAAO0H,EAAE,6BAA8B,CACtC3H,MAAO,aACP8S,aAAc,+BAGhB,CACC9S,MAAO,sBACPC,MAAO0H,EAAE,+BAAgC,CACxC3H,MAAO,aACP8S,aAAc,mDAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,4BAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CAAE3H,MAAO,aAAc8S,aAAc,sBAE1E,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CAAE3H,MAAO,aAAc8S,aAAc,wBAE1E,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,gCAGhB,CACC9S,MAAO,qBACPC,MAAO0H,EAAE,8BAA+B,CACvC3H,MAAO,aACP8S,aAAc,wCAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CAAE3H,MAAO,aAAc8S,aAAc,sBAE1E,CACC9S,MAAO,+BACPC,MAAO0H,EAAE,wCAAyC,CACjD3H,MAAO,aACP8S,aAAc,8BAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,iCAGhB,CACC9S,MAAO,yBACPC,MAAO0H,EAAE,kCAAmC,CAC3C3H,MAAO,aACP8S,aAAc,8BAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CAAE3H,MAAO,aAAc8S,aAAc,uBAE3E,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CAAE3H,MAAO,aAAc8S,aAAc,sBAE1E,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,oDAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,sCAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,qCAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,4BAGhB,CACC9S,MAAO,oBACPC,MAAO0H,EAAE,6BAA8B,CACtC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,iCACPC,MAAO0H,EAAE,0CAA2C,CACnD3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAAE3H,MAAO,aAAc8S,aAAc,wBAEzE,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,kCAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,qBACPC,MAAO0H,EAAE,8BAA+B,CACvC3H,MAAO,aACP8S,aAAc,0BAGhB,CACC9S,MAAO,uBACPC,MAAO0H,EAAE,gCAAiC,CACzC3H,MAAO,aACP8S,aAAc,4BAGhB,CACC9S,MAAO,oBACPC,MAAO0H,EAAE,6BAA8B,CACtC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,yBACPC,MAAO0H,EAAE,kCAAmC,CAC3C3H,MAAO,aACP8S,aAAc,4BAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CAAE3H,MAAO,aAAc8S,aAAc,sBAE3E,CACC9S,MAAO,sBACPC,MAAO0H,EAAE,+BAAgC,CACxC3H,MAAO,aACP8S,aAAc,8BAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAClC3H,MAAO,aACP8S,aAAc,0CAGhB,CACC9S,MAAO,MACPC,MAAO0H,EAAE,eAAgB,CACxB3H,MAAO,UACP8S,aAAc,0CAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,mCAGhB,CACC9S,MAAO,oBACPC,MAAO0H,EAAE,6BAA8B,CACtC3H,MAAO,aACP8S,aAAc,0BAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,iEAGhB,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAClC3H,MAAO,aACP8S,aAAc,gEAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,mDAGhB,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAClC3H,MAAO,aACP8S,aAAc,gDAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,qBAExE,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAClC3H,MAAO,aACP8S,aAAc,gCAGhB,CACC9S,MAAO,cACPC,MAAO0H,EAAE,uBAAwB,CAAE3H,MAAO,aAAc8S,aAAc,oBAEvE,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CAAE3H,MAAO,aAAc8S,aAAc,uBAE1E,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CAAE3H,MAAO,aAAc8S,aAAc,uBAE3E,CACC9S,MAAO,aACPC,MAAO0H,EAAE,sBAAuB,CAAE3H,MAAO,aAAc8S,aAAc,sBAEtE,CACC9S,MAAO,cACPC,MAAO0H,EAAE,uBAAwB,CAAE3H,MAAO,aAAc8S,aAAc,sBAEvE,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAAE3H,MAAO,aAAc8S,aAAc,wBAEzE,CACC9S,MAAO,YACPC,MAAO0H,EAAE,qBAAsB,CAAE3H,MAAO,aAAc8S,aAAc,oBAErE,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAClC3H,MAAO,aACP8S,aAAc,mDAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,6DAGhB,CACC9S,MAAO,qBACPC,MAAO0H,EAAE,8BAA+B,CACvC3H,MAAO,aACP8S,aAAc,mCAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CAAE3H,MAAO,aAAc8S,aAAc,uBAE1E,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,oBAExE,CACC9S,MAAO,cACPC,MAAO0H,EAAE,uBAAwB,CAChC3H,MAAO,aACP8S,aAAc,8BAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CACpC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,qBAExE,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAClC3H,MAAO,aACP8S,aAAc,yDAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,cACPC,MAAO0H,EAAE,uBAAwB,CAAE3H,MAAO,aAAc8S,aAAc,sBAEvE,CACC9S,MAAO,YACPC,MAAO0H,EAAE,qBAAsB,CAAE3H,MAAO,aAAc8S,aAAc,oBAErE,CACC9S,MAAO,cACPC,MAAO0H,EAAE,uBAAwB,CAChC3H,MAAO,aACP8S,aAAc,iCAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,uBAExE,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,uBAExE,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAClC3H,MAAO,aACP8S,aAAc,uCAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CAAE3H,MAAO,aAAc8S,aAAc,uBAE1E,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,0BAGhB,CACC9S,MAAO,aACPC,MAAO0H,EAAE,sBAAuB,CAAE3H,MAAO,aAAc8S,aAAc,qBAEtE,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CACjC3H,MAAO,aACP8S,aAAc,kCAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAAE3H,MAAO,aAAc8S,aAAc,wBAEzE,CACC9S,MAAO,qBACPC,MAAO0H,EAAE,8BAA+B,CACvC3H,MAAO,aACP8S,aAAc,oCAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CACjC3H,MAAO,aACP8S,aAAc,yCAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CACjC3H,MAAO,aACP8S,aAAc,mDAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,cACPC,MAAO0H,EAAE,uBAAwB,CAAE3H,MAAO,aAAc8S,aAAc,sBAEvE,CACC9S,MAAO,aACPC,MAAO0H,EAAE,sBAAuB,CAAE3H,MAAO,aAAc8S,aAAc,qBAEtE,CACC9S,MAAO,YACPC,MAAO0H,EAAE,qBAAsB,CAAE3H,MAAO,aAAc8S,aAAc,oBAErE,CACC9S,MAAO,cACPC,MAAO0H,EAAE,uBAAwB,CAAE3H,MAAO,aAAc8S,aAAc,sBAEvE,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CACjC3H,MAAO,aACP8S,aAAc,uCAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,uBAExE,CACC9S,MAAO,YACPC,MAAO0H,EAAE,qBAAsB,CAAE3H,MAAO,aAAc8S,aAAc,oBAErE,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,mCAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,mCAGhB,CACC9S,MAAO,aACPC,MAAO0H,EAAE,sBAAuB,CAAE3H,MAAO,aAAc8S,aAAc,qBAEtE,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,qDAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CACjC3H,MAAO,aACP8S,aAAc,+BAGhB,CACC9S,MAAO,oBACPC,MAAO0H,EAAE,6BAA8B,CACtC3H,MAAO,aACP8S,aAAc,4BAGhB,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,cACPC,MAAO0H,EAAE,uBAAwB,CAAE3H,MAAO,aAAc8S,aAAc,sBAEvE,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,2BAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CAAE3H,MAAO,aAAc8S,aAAc,qBAE3E,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CAAE3H,MAAO,aAAc8S,aAAc,qBAE3E,CACC9S,MAAO,aACPC,MAAO0H,EAAE,sBAAuB,CAAE3H,MAAO,aAAc8S,aAAc,qBAEtE,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,aACPC,MAAO0H,EAAE,sBAAuB,CAAE3H,MAAO,aAAc8S,aAAc,qBAEtE,CACC9S,MAAO,aACPC,MAAO0H,EAAE,sBAAuB,CAAE3H,MAAO,aAAc8S,aAAc,qBAEtE,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CACjC3H,MAAO,aACP8S,aAAc,+BAGhB,CACC9S,MAAO,qBACPC,MAAO0H,EAAE,8BAA+B,CACvC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CAAE3H,MAAO,aAAc8S,aAAc,sBAE5E,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,4CAGhB,CACC9S,MAAO,qBACPC,MAAO0H,EAAE,8BAA+B,CACvC3H,MAAO,aACP8S,aAAc,wBAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CAAE3H,MAAO,aAAc8S,aAAc,sBAE5E,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,2CAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CACjC3H,MAAO,aACP8S,aAAc,kCAGhB,CACC9S,MAAO,sBACPC,MAAO0H,EAAE,+BAAgC,CACxC3H,MAAO,aACP8S,aAAc,yBAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,uBAExE,CACC9S,MAAO,gBACPC,MAAO0H,EAAE,yBAA0B,CAAE3H,MAAO,aAAc8S,aAAc,wBAEzE,CACC9S,MAAO,qBACPC,MAAO0H,EAAE,8BAA+B,CACvC3H,MAAO,aACP8S,aAAc,mCAGhB,CACC9S,MAAO,uBACPC,MAAO0H,EAAE,gCAAiC,CACzC3H,MAAO,aACP8S,aAAc,0CAGhB,CACC9S,MAAO,sBACPC,MAAO0H,EAAE,+BAAgC,CACxC3H,MAAO,aACP8S,aAAc,2CAGhB,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CAAE3H,MAAO,aAAc8S,aAAc,uBAE3E,CACC9S,MAAO,iBACPC,MAAO0H,EAAE,0BAA2B,CACnC3H,MAAO,aACP8S,aAAc,yDAGhB,CACC9S,MAAO,mBACPC,MAAO0H,EAAE,4BAA6B,CACrC3H,MAAO,aACP8S,aAAc,2BAGhB,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,oBAExE,CACC9S,MAAO,kBACPC,MAAO0H,EAAE,2BAA4B,CAAE3H,MAAO,aAAc8S,aAAc,uBAE3E,CACC9S,MAAO,eACPC,MAAO0H,EAAE,wBAAyB,CAAE3H,MAAO,aAAc8S,aAAc,qBAExE,CACC9S,MAAO,oBACPC,MAAO0H,EAAE,6BAA8B,CACtC3H,MAAO,aACP8S,aAAc,0BAGhB,CACC9S,MAAO,qBACPC,MAAO0H,EAAE,8BAA+B,CACvC3H,MAAO,aACP8S,aAAc,kC+B3rCgBmjB,CAAatuB,IAAI,CAACA,IAC5C4lB,GAAevqB,EAAAA,EAAAA,UAAQ,IAAMiqB,GAA8BtlB,IAAI,CAACA,IAEhE4nB,GAAavsB,EAAAA,EAAAA,UAAQ,IAAM+Q,GAA2B6a,IAAS,CAACA,KAE/DsH,EAAYC,IAAiBxd,EAAAA,EAAAA,UAAiBxW,EAASC,MAAMmC,kBAAoB,KAkBjF6xB,EAAgBC,KAfSrzB,EAAAA,EAAAA,UAC/B,KAAMM,EAAAA,EAAAA,MAAKyyB,GAAUhsB,GAASA,EAAK/J,QAAUk2B,KAC7C,CAACH,EAASG,KAGYn7B,EAAAA,EAAAA,cACrBiF,IACIA,IACHuvB,EAAW,mBAAoBvvB,GAC/Bm2B,EAAcn2B,GACf,GAED,CAACuvB,KAG0C5W,EAAAA,EAAAA,UAC3CxW,EAASC,MAAMk0B,sBAAwB,KAIlCC,GAA8BvzB,EAAAA,EAAAA,UACnC,KAAMM,EAAAA,EAAAA,MAAK0yB,GAAYjsB,GAASA,EAAK/J,QAAUo2B,KAC/C,CAACJ,EAAWI,IAGPI,GAAmBz7B,EAAAA,EAAAA,cACvBiF,IACIA,IACHuvB,EAAW,uBAAwBvvB,GACnCq2B,EAAkBr2B,GACnB,GAED,CAACuvB,IAUF,OAFA5B,GAASoB,GALIh0B,EAAAA,EAAAA,cAAY,KACxBo7B,EAAch0B,EAASC,MAAMmC,kBAAoB,IACjD8xB,EAAkBl0B,EAASC,MAAMk0B,sBAAwB,GAAG,GAC1D,CAACn0B,EAASC,MAAMmC,iBAAkBpC,EAASC,MAAMk0B,wBAKnDp7B,IAAAA,cAACuyB,EAAAA,eAAc,CACdxtB,MAAOstB,EAAattB,MACpB0X,SAAS,yBACTvX,MAAM,OACN4J,GAAIujB,EAAavjB,IAEjB9O,IAAAA,cAACkc,EAAAA,UAAS,CAACqZ,eAAe,WAAWhgB,QAAS,CAAE7O,IAAK,SAAW4uB,IAAK,UAiBpEt1B,IAAAA,cAAC2gB,EAAAA,OAAM,CACNlS,MAAOqsB,EACP5lB,WAAY4L,GAAAA,GACZ/b,MAAO0H,EAAE,kBAAmB,aAC5BmR,SAAU0d,EACV1a,UAAWya,EACXxa,cAAc,EACd0a,kBAAkB,UAClBC,wBAAwB,YACxBznB,MAAO,CACN7O,MAAO,OACP6b,OAAQ,yBAGV/gB,IAAAA,cAACgjB,EAAAA,MAAK,CACLvH,MAAOhP,EAAE,eAAgB,UACzByW,KAAMA,EACNuY,aAAchvB,EAAE,WAAY,MAC5BiP,UAAWA,IAAYtY,OAAOC,SAASq4B,SACvC/f,aAAclP,EAAE,eAAgB,UAChCqP,QAASA,IAAY8e,GAAQ,IAE7B56B,IAAAA,cAAC+b,EAAAA,KAAI,CAAC/H,SAAS,cACbvH,EACA,iBACA,mKAMY,ECrHZ,SAASkvB,GAAgBC,GAE/B,MAAMC,EAAoB,GAC1B33B,SAASkpB,KAAK0O,UAAU9wB,SAAS6D,IAC5BA,EAAKtL,WAAW,mBACnBs4B,EAAQ9yB,KAAK8F,EACd,IAED3K,SAASkpB,KAAK0O,UAAUC,UAAUF,GAC9BD,GACH13B,SAASkpB,KAAK0O,UAAUE,IAAI,iBAAiBJ,IAE/C,CAEO,SAASK,GACfC,EACA7xB,EACAvF,GAGAo3B,EAAQnoB,MAAM1J,QAAiBtD,IAAVjC,EAAsB,GAAGA,MAAY,EAC3D,CAMO,SAASq3B,GACfC,GAEA,OAEGpwB,EAAAA,EAAAA,QACAowB,GACA,CAACxrB,EAAa9L,EAAOuF,KACpBuG,EAAYvG,QAAqBtD,EAC1B6J,IAER,CAAC,EAEL,CCzCA,MAAMyrB,IAAuBx1B,EAAAA,EAAAA,KAAAA,EAA6BqgB,IAAQ,CACjEoV,QAAS,CAAC,EACVC,SAAAA,CAAalyB,EAAamyB,GACzB,MAAMC,EAAmBr5B,OAAOs5B,aAAapuB,QAAQjE,GACrD,IAAIwE,EACJ,IACCA,EAA4B,OAArB4tB,EAA4B/O,KAAKiP,MAAMF,GAAoBD,CACnE,CAAE,MAAO18B,GACRC,QAAQD,MAAM,6BAA6BuK,iBAAmBoyB,MAAsB38B,GACpF+O,EAAO2tB,CACR,CACAtV,GAAUnc,QACkBhE,IAAvBgE,EAAMuxB,QAAQjyB,GACV,CAAEiyB,QAAS,IAAKvxB,EAAMuxB,QAAS,CAACjyB,GAAMwE,IAEvC9D,GAET,EACA6xB,QAAAA,CAAYvyB,EAAavF,GACxBoiB,GAAUnc,IACT,MAAM8xB,EAAe/3B,aAAiBg4B,SAAWh4B,EAAMiG,EAAMuxB,QAAQjyB,IAAavF,EAClF,OAjC8Bi4B,EAiCDF,EAjCkBG,EAiCJjyB,EAAMuxB,QAAQjyB,GAhCpDqjB,KAAKC,UAAUoP,KAAYrP,KAAKC,UAAUqP,IAiC9C55B,OAAOs5B,aAAatuB,QAAQ/D,EAAKqjB,KAAKC,UAAUkP,IACzC,CAAEP,QAAS,IAAKvxB,EAAMuxB,QAAS,CAACjyB,GAAMwyB,KAEvC9xB,EArCV,IAAiCgyB,EAAiBC,CAqCnC,GAEd,MAGKC,GAAuC,CAC5CC,uBAAuB,GAGjB,SAASC,GACf9yB,EACA+yB,EACAC,EAAUJ,IAEV,MAAMK,EAAcjB,IAAsBtxB,GAAWA,EAAMuxB,QAAQjyB,IAAc+yB,IAC3EG,GAAgC3iB,EAAAA,EAAAA,SAAO,GACvC4iB,GAAsB11B,EAAAA,EAAAA,UAAQ,KAAM,IAAMm1B,MAAoBI,KAAY,CAACA,IAE3EI,GAAkB59B,EAAAA,EAAAA,cAAY,KACnCw8B,GAAqBzzB,WAAW2zB,UAAUlyB,EAAK+yB,EAAa,GAC1D,CAAC/yB,EAAK+yB,KAETzf,EAAAA,EAAAA,YAAU,KACT8f,GAAiB,GACf,CAACA,IAEJ,MAAMC,GAAiB79B,EAAAA,EAAAA,cACrBiF,IACAu3B,GAAqBzzB,WAAWg0B,SAASvyB,EAAKvF,GAC9Cy4B,EAA8BtiB,SAAU,CAAI,GAE7C,CAAC5Q,IAsBF,OAnBAsT,EAAAA,EAAAA,YAAU,KACL6f,GAAqBN,uBACxB95B,OAAOu6B,iBAAiB,UAAWF,GAG7B,KACNr6B,OAAOw6B,oBAAoB,UAAWH,EAAgB,IAErD,CAACD,GAAqBN,sBAAuBO,KAEhD9f,EAAAA,EAAAA,YAAU,KACL4f,EAA8BtiB,UAGjC7X,OAAOy6B,cAAc,IAAIC,MAAM,YAC/BP,EAA8BtiB,SAAU,EACzC,GACE,CAACqiB,IAEG,CAACA,EAAaI,EACtB,CAE6BvB,GAAwB,CAAEE,0BAAhD,MC4LP,GA1PwB0B,KACvB,MAAOC,EAAMC,IAAWxgB,EAAAA,EAAAA,UAAe,CAAC,GAClChR,EAAIyH,KACJgqB,EAAe51B,MACd61B,EAA8BC,IAAmC3gB,EAAAA,EAAAA,UACvE,CAAC,IAEK4gB,EAAsBC,GAA2BnB,GACvD14B,EACA,CAAC,IAEKye,EAAM0X,IAAWnd,EAAAA,EAAAA,WAAS,GAiB3BiW,IAfsB7zB,EAAAA,EAAAA,cAAY,CAACwK,EAAKvF,KAC7Cs5B,GAAiCze,IAAS,IACtCA,EACH,CAACtV,GAAMvF,KACL,GACD,KAE2BjF,EAAAA,EAAAA,cAAmDwK,IAChF+zB,GAAiCze,IAChC,MAAM4Y,EAAY,IAAK5Y,GAEvB,cADO4Y,EAAUluB,GACVkuB,CAAS,GACf,GACA,KAEY14B,EAAAA,EAAAA,cAAoB,CAAC8L,EAAMtB,EAAKvF,KAC9Cm5B,GAASte,IAAS,IACdA,EACH,CAAChU,GAAO,IACJgU,IAAYhU,GACf,CAACtB,GAAMvF,MAEN,GACD,KAmBGipB,IAjBYluB,EAAAA,EAAAA,cAAuB,CAAC8L,EAAMtB,KAC/C4zB,GAASte,IACR,MAAM4e,EAAW5e,EAAUhU,GAC3B,GAAI4yB,QAA8Bx3B,IAAlBw3B,EAASl0B,GAAoB,CAC5C,MAAMkuB,EAAY,IAAK5Y,EAAW,CAAChU,GAAO,IAAKgU,EAAUhU,KACnD6yB,EAAWjG,EAAU5sB,GAO3B,OANI6yB,QAA8Bz3B,IAAlBy3B,EAASn0B,WACjBm0B,EAASn0B,GAEa,KAA1BwK,EAAAA,EAAAA,MAAK0jB,EAAU5sB,YACX4sB,EAAU5sB,GAEX4sB,CACR,CACA,OAAO5Y,CAAS,GACf,GACA,KACoBqO,EAAAA,EAAAA,gBAEjBtM,GAAS7hB,EAAAA,EAAAA,cAA2C,KAWzD,GAVAu+B,GAAiCK,IAC5B5pB,EAAAA,EAAAA,MAAK4pB,GAAsB,GAC9BH,GAAyBI,IAA6B,IAClDA,KACAD,MAEG,CAAC,GAEFA,KAEJ5pB,EAAAA,EAAAA,MAAKmpB,GAAQ,EAAG,CACnB,IAAIW,EAaAC,EAZJ,GAAIZ,EAAK52B,MAAO,CACf,MAAMy3B,GAAmBjrB,EAAAA,EAAAA,KACxBoqB,EAAK52B,OACL,CAAC03B,EAAMz0B,KAAG,CACToB,KAAMpB,EACN00B,OAAQD,EAAK5yB,IACb8e,SAAU8T,EAAKh6B,UAGjB65B,EAA0B,CAAEjU,MAAOpkB,EAAKC,QAASu4B,KAAMD,EACxD,CAIA,GAAIb,EAAK92B,MAAO,CACf,MAAMC,EAAQ62B,EAAK92B,MACf,oCAAqCC,IACxCA,EAAM63B,gCACL73B,EAAM63B,2CAA2CC,OACA,IAAjD93B,EAAM63B,gCAAgCnpB,OACnC,GACA1O,EAAM63B,iCAEXJ,EAAqB,CAAElU,MAAOpkB,EAAKC,QAASwU,OAAQ5T,EACrD,CAEA,MAAM0oB,EAAUpF,GAAajpB,EAAbipB,CAMd,QAAS,CACVC,MAAOpkB,EAAKI,IACZw4B,wBAAyBP,EACzBQ,mBAAoBP,IAEnBrc,MAAK,KACL3b,GAAgBsgB,UAAUxf,IAAe,CACxCT,SAAU,IACNS,EAAET,SACLC,OAAO8E,EAAAA,EAAAA,QACNgyB,EAAK92B,OACL,CAAC+E,EAAKmzB,EAAM/0B,KAAQ,IAChB4B,EACH,CAAC5B,GAAM+0B,KAER13B,EAAET,SAASC,OAEZE,OAAO4E,EAAAA,EAAAA,QACNgyB,EAAK52B,OACL,CAAC6E,GAAOC,MAAKpH,SAASuF,KACrB,MAAMkmB,GAAYhhB,EAAAA,EAAAA,WAAUtD,GAAMozB,GAAMA,EAAE5zB,OAASpB,GAAOg1B,EAAEN,SAAW7yB,IAevE,OAdIqkB,GAAa,EAEhBtkB,EAAIskB,GAAa,CAChB9kB,KAAMpB,EACN00B,OAAQ7yB,EACR8e,SAAUlmB,GAGXmH,EAAIlD,KAAK,CACR0C,KAAMpB,EACN00B,OAAQ7yB,EACR8e,SAAUlmB,IAGLmH,CAAG,GAEXvE,EAAET,SAASG,YAKV42B,EAAK92B,QAAS6S,EAAAA,EAAAA,UAASuP,OAAOgW,KAAKtB,EAAK92B,OAAQ,qBACnD0zB,GAAQ,GAET7M,EAAe,CACd1jB,IAAK,MACL2Z,SAAS,EACTrY,KAAM,OACN5G,MAAO0H,EAAE,kCAAmC,yBAC5CyiB,gBAAiB,IACjBC,YAAY,IAEb8O,EAAQ,CAAC,EAAE,IAEXrb,OAAO9iB,IASP,GARAiuB,EAAe,CACd1jB,IAAK,MACL2Z,SAAS,EACTrY,KAAM,QACN5G,MAAO0H,EAAE,iBAAkB,0CAC3ByiB,gBAAiB,IACjBC,YAAY,IAETrvB,aAAiBgsB,MACpB,MAAMhsB,EAEP,MAAM,IAAIgsB,MAAuB,iBAAVhsB,EAAqBA,EAAQ,qBAAqB,IAE3E,OAAO8sB,QAAQwC,WAAW,CAACS,GAC5B,CACA,OAAOjD,QAAQwC,WAAW,CAACxC,QAAQ2S,WAAW,GAC5C,CAACvB,EAAMM,EAAyBvQ,EAAgBthB,IAE7C+yB,GAA2B5kB,EAAAA,EAAAA,QAAwC,MACnE6kB,GAA6B7kB,EAAAA,EAAAA,QAAwC,MACrE8kB,GAAwC9kB,EAAAA,EAAAA,QAAwC,MAChF+kB,GAAgC/kB,EAAAA,EAAAA,QAAwC,MACxEglB,GAA2BhlB,EAAAA,EAAAA,QAAwC,MAEnE4I,GAAW3jB,EAAAA,EAAAA,cAAY,KAC5Bo+B,EAAQ,CAAC,IACLppB,EAAAA,EAAAA,MAAKspB,GAAgC,GACxCqB,EAAyBvkB,SAAS4X,QAEnC4M,EAA2BxkB,SAAS4X,QACpC6M,EAAsCzkB,SAAS4X,QAC/C8M,EAA8B1kB,SAAS4X,QACvC+M,GAA0B3kB,SAAS4X,OAAO,GACxC,CAACsL,IAEE1a,GAAU3b,EAAAA,EAAAA,UACf,MAAOwmB,EAAAA,EAAAA,SAAQ0P,MAAU1P,EAAAA,EAAAA,SAAQ6P,IACjC,CAACH,EAAMG,IAGF1iB,GAAQ3T,EAAAA,EAAAA,UAAQ,IAAM2E,EAAE,2BAA4B,qBAAqB,CAACA,IAEhF,OACCzM,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAACujB,GAAc,CAAC9H,MAAOA,EAAO+H,SAAUA,EAAU9B,OAAQA,EAAQ+B,QAASA,IAC3EzjB,IAAAA,cAACkc,EAAAA,UAAS,CACThH,WAAYwH,GAAAA,GACZJ,cAAc,aACdiZ,eAAgB,aAChBhgB,QAAS,CAAE7O,IAAK,UAChBqN,MAAO,CAAEC,SAAU,SAenBhU,IAAAA,cAAC26B,GAA2B,CAC3B1zB,SAAUi3B,EACVxK,OAAQA,EACRxQ,KAAMA,EACN0X,QAASA,EACT/G,SAAU6L,IAGX1/B,IAAAA,cAACw2B,GAAmB,CACnBvvB,SAAUi3B,EACVxK,OAAQA,EACRG,SAAU8L,IAEX3/B,IAAAA,cAAC+4B,GAAc,CACd9xB,SAAUi3B,EACVxK,OAAQA,EACRG,SAAU+L,IAGX5/B,IAAAA,cAAC85B,GAAS,CAACC,YAAY,IAEvB/5B,IAAAA,cAACoyB,GAAM,OAEN,ECjRQyN,GAAsBA,KAClC,MAAMC,EAAgBtvB,IAAa9I,GAAMA,EAAEqI,MAAM9I,WAC3C6I,GAAShI,EAAAA,EAAAA,UACd,KACC8L,EAAAA,EAAAA,KAAIksB,GAAgBnuB,GACnB3R,IAAAA,cAAC+/B,EAAAA,GAAK,CAAC11B,IAAKsH,EAAKL,MAAO0uB,OAAK,EAACx3B,KAAM,IAAI/G,KAAmBkQ,EAAKL,SAC/DtR,IAAAA,cAAC+M,GAAkB,CAACH,IAAK+E,EAAKzF,KAC7BlM,IAAAA,cAAC2R,EAAKJ,UAAS,WAInB,CAACuuB,IAEF,OACC9/B,IAAAA,cAACigC,EAAAA,GAAM,KACLnwB,EACD9P,IAAAA,cAACkgC,EAAAA,GAAQ,CAACC,KAAM,IAAI1+B,IAAmBu+B,OAAK,EAACI,QAAM,EAACC,GAAI,IAAI5+B,cACpD,ECjBE6+B,GAA6CA,EAAGC,eAC5D,MAAMT,EAAgBtvB,IAAa9I,GAAMA,EAAEqI,MAAM9I,WAC3C2a,GAAUC,EAAAA,EAAAA,MACVxe,GAAWm9B,EAAAA,EAAAA,MACX/xB,GAAQ3G,EAAAA,EAAAA,UACb,IACCg4B,EAAclsB,KAAKjC,IAAI,CACtB7C,GAAI6C,EAAKL,MACTvM,MAAO4M,EAAK5M,MACZ8G,KAAM8F,EAAK9F,KACXoQ,OAAQ5Y,EAASC,WAAa,IAAI7B,KAAmBkQ,EAAKL,SAA+B,KAApBjO,EAASgN,OAC9EsZ,aACCtmB,EAASC,WAAa,IAAI7B,KAAmBkQ,EAAKL,SAA+B,KAApBjO,EAASgN,OACvE0F,QAAUsK,IACTA,EAAEogB,kBACF7e,EAAQ7Y,KAAK,IAAItH,KAAmBkQ,EAAKL,QAAQ,EAElD7C,OAAOmF,EAAAA,EAAAA,KAAIjC,EAAK+uB,aAAc7xB,IAAI,IAC9BA,EACHoN,OAAQ5Y,EAASgN,SAAW,YAAYxB,EAAKC,KAC7C6a,aAActmB,EAASgN,SAAW,YAAYxB,EAAKC,KACnDiH,QAAUsK,IACTA,EAAEogB,kBACF7e,EAAQoC,QAAQ,IAAIviB,KAAmBkQ,EAAKL,iBAAiBzC,EAAKC,KAAK,WAI3E,CAAC8S,EAASve,EAASC,SAAUD,EAASgN,OAAQyvB,IAEzCa,GAAiB74B,EAAAA,EAAAA,UACtB,IACCg4B,EAAclsB,KAAKgU,GAClB5nB,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAO6iB,EAAE7iB,MAAOmc,UAAU,QAAQ7W,IAAKud,EAAE9Y,IACjD9O,IAAAA,cAAA,WACCA,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM+b,EAAE/b,KACRkK,QAASA,IAAY6L,EAAQ7Y,KAAK,IAAItH,KAAmBmmB,EAAEtW,SAC3DuD,KAAK,eAKV,CAAC+M,EAASke,IAEX,OAAOS,EAAWvgC,IAAAA,cAAC6gC,EAAAA,UAAS,CAAC3rB,WAAW,cAAczG,MAAOA,IAAYzO,IAAAA,cAAAA,IAAAA,SAAA,KAAG2gC,EAAkB,ECtCzFlxB,GAAmC,CACxCqxB,0BAA2B,CAAC,EAC5BC,UAAW,CAAC,GAIAC,IAAmBn6B,EAAAA,EAAAA,KAAAA,EAAqD6D,IAAG,IACpF+E,GACHusB,IAAKA,EAAG8E,4BAA2BC,gBAClCr2B,GAAKhD,IAAC,CACLo5B,2BAA2B90B,EAAAA,EAAAA,QAC1B80B,GAA6B,CAAC,GAC9B,CAAC70B,EAAKmb,EAAG/c,KAER4B,EAAI5B,GAAO+c,EACJnb,IAERvE,EAAEo5B,2BAEHC,WAAW/0B,EAAAA,EAAAA,QACV+0B,GAAa,CAAC,GACd,CAAC90B,EAAKmb,EAAG/c,KAER4B,EAAI5B,GAAO+c,EACJnb,IAERvE,EAAEq5B,cAED,MAIQE,GAAYD,GAAiBp4B,WAAWozB,IC7CxCkF,GAAgBA,KAC5B,MAAMtf,GAAUC,EAAAA,EAAAA,MAMhB,OALAof,GAAU,CACTF,UAAW,CACVI,WAAYA,IAAMvf,KAGb,IAAI,ECMCwf,IAAgBv6B,EAAAA,EAAAA,KAAAA,EAAqB,KAAM,CACvDw6B,cAAe,GACfC,OAAQ,CAAC,EACTf,UAAU,EACVgB,WAAW,MAGCC,GACXt1B,GACD,CACCiE,EACAowB,KAEA,MAAMzxB,EAAKqB,EAAMrB,KAAM2yB,EAAAA,EAAAA,UAAS,UAgBhC,OAfAL,GAAcla,UACbpc,EAAAA,EAAAA,KAASC,IACRA,EAAMu2B,OAAOxyB,GAAM,IACfqB,EACHjE,MACA4C,KACAjD,KAAMsE,EAAMtE,MAAQwH,GAAOnH,EAAPmH,IAAexH,MAAQ,cAC3C61B,KAAKC,EAAAA,EAAAA,WAAUxxB,EAAMuxB,IAAK,MAE3B32B,EAAMkQ,QAAUnM,EAChB/D,EAAMw2B,WAAY,EAClBx2B,EAAMw1B,SAAWA,GAAYx1B,EAAMw1B,SACnCx1B,EAAMs2B,cAAc1S,QAAQ7f,EAAG,KAG1BsyB,GAAcx4B,WAAW04B,OAAOxyB,EAAG,EAE/B8yB,GAAc9yB,IAC1BsyB,GAAcla,UACbpc,EAAAA,EAAAA,KAASC,IACRA,EAAMu2B,OAAOxyB,IAAKgN,UAAU/Q,EAAMu2B,OAAOxyB,WAClC/D,EAAMu2B,OAAOxyB,GACpB,MAAMQ,EAAQvE,EAAMs2B,cAAc9xB,WAAWsyB,GAAYA,IAAY/yB,IACjE/D,EAAMkQ,UAAYnM,IACrB/D,EAAMkQ,QAAUlQ,EAAMs2B,cAAc/xB,EAAQ,IAAMvE,EAAMs2B,cAAc/xB,EAAQ,KAEhE,IAAXA,GACHvE,EAAMs2B,cAAc7xB,OAAOF,EAAO,EACnC,IAED,EAEWwyB,GAAiBA,KAC7BV,GAAcla,UACbpc,EAAAA,EAAAA,KAASC,KACRC,EAAAA,EAAAA,SAAQD,EAAMu2B,QAASpyB,IACtBA,GAAG4M,UAAU5M,UACNnE,EAAMu2B,OAAOpyB,EAAEJ,GAAG,IAE1B/D,EAAMs2B,cAAgB,EAAE,IAEzB,EAEWU,GAAcA,KAC1BX,GAAcla,UACbpc,EAAAA,EAAAA,KAASC,IACR,MAAM+D,EAAK/D,EAAMkQ,QACjB,GAAInM,EAAI,CACP/D,EAAMu2B,OAAOxyB,IAAKizB,cAAch3B,EAAMu2B,OAAOxyB,WACtC/D,EAAMu2B,OAAOxyB,GACpB,MAAMQ,EAAQvE,EAAMs2B,cAAc9xB,WAAWsyB,GAAYA,IAAY/yB,KACtD,IAAXQ,GACHvE,EAAMs2B,cAAc7xB,OAAOF,EAAO,EAEpC,KAED,EAEW0yB,GAAiBA,KAC7BZ,GAAcla,SAAS,CACtBqa,WAAW,GACV,EAEUU,GAAeA,KAC3Bb,GAAcla,SAAS,CACtBqa,WAAW,GACV,EAEUW,GAAeA,KAC3Bd,GAAcla,SAAS,CACtBqZ,UAAU,GACT,EAEU4B,GAAeA,KAC3Bf,GAAcla,SAAS,CACtBqZ,UAAU,GACT,EAEU6B,GAAmBtzB,IAC/BsyB,GAAcla,SAAS,CACtBjM,QAASnM,GACR,EAEUuzB,GAAcA,CAAcvzB,EAAYqB,KACpDixB,GAAcla,UACbpc,EAAAA,EAAAA,KAASC,IACJA,EAAMu2B,OAAOxyB,KAChB/D,EAAMu2B,OAAOxyB,GAAM,IACf/D,EAAMu2B,OAAOxyB,MACbqB,GACM,IAEZ,EAEWmyB,GAAqBA,CAAcxzB,EAAYoC,KAC3DkwB,GAAcla,UACbpc,EAAAA,EAAAA,KAASC,IACJA,EAAMu2B,OAAOxyB,KAChB/D,EAAMu2B,OAAOxyB,GAAIoC,QAAUA,EAC5B,IAED,EC9HWqxB,GAAoBzzB,GAChCsyB,IAAe15B,GAAMA,EAAE45B,OAAOxyB,KAClB0zB,GAAoB1zB,GAChCsyB,GAAcx4B,WAAW04B,OAAOxyB,GACpB2zB,GAA2B3zB,GACvCsyB,IAAe15B,GAAMA,EAAE45B,OAAOxyB,IAAKoC,UACvBwxB,GAA2B5zB,GACvCsyB,GAAcx4B,WAAW04B,OAAOxyB,IAAKoC,QAGzByxB,IAAeC,EAAAA,EAAAA,oBAAiC77B,GAUhD87B,IAAoBD,EAAAA,EAAAA,oBAA6C77B,GAEjE+7B,GAAoCA,EAAGnjC,WAAUmP,SAC7D,MAAMqB,EAAQoyB,GAAazzB,GACrBi0B,GAAYj7B,EAAAA,EAAAA,UACjB,KAAM,CAGLk7B,gBAAiBA,IAAUN,GAAoB5zB,GAC/Cm0B,SAAUA,IAAUT,GAAa1zB,GACjC8yB,WAAYA,IAAMA,GAAW9yB,GAC7BuzB,YAAcnzB,GAAMmzB,GAAYvzB,EAAII,GACpCkzB,gBAAiBA,IAAMA,GAAgBtzB,MAExC,CAACA,IAEF,OACC9O,IAAAA,cAAC6iC,GAAkBK,SAAQ,CAACp+B,MAAOi+B,GAClC/iC,IAAAA,cAAC2iC,GAAaO,SAAQ,CAACp+B,MAAOqL,GAAQxQ,GACV,EASlBwjC,GAAgBA,KAC5B,MAAMC,GAAQC,EAAAA,EAAAA,YAAWR,IACzB,QAAc97B,IAAVq8B,EACH,MAAM,IAAItX,MACT,gIAGF,OAAOsX,CAAK,EAQAE,GAAWA,KACvB,MAAMnzB,GAAQkzB,EAAAA,EAAAA,YAAWV,IACzB,QAAc57B,IAAVoJ,EACH,MAAM,IAAI2b,MACT,0HAGF,OAAO3b,CAAK,E,kbCfN,MAAMozB,GAAYlqB,GAAAA,QAAOmqB,MAAKjqB,WAAA,CAAAC,YAAA,sBAAAC,YAAA,eAAZJ,CAAY,mBC1B/B5J,GAAkC,CACvCg0B,QAAS,CAAC,EACVC,WAAY,CACXC,SAAU,CACTC,KD0BiCC,EACnCC,iBACAC,eACAC,UAAS,EACTl/B,QACAs4B,eACA6G,uBACGC,MAEH,MAAMC,GAAkBtkC,EAAAA,EAAAA,cACvB,CAACukC,EAAYC,KACZP,IAAiB,CAChBO,EAAOC,WAAW,CAAEC,OAAQ,SAC5BF,EAAOC,WAAW,CAAEC,OAAQ,UAC3B,GAEH,CAACT,KAEI,MAAE58B,GAAUoB,KACZk8B,GAAe18B,EAAAA,EAAAA,UACpB,KAAM,CACL28B,KAAMv9B,GAAOw9B,sCACbC,SAAUz9B,GAAO09B,oCACjBt3B,MAAOpG,GAAO29B,wCAEf,CAAC39B,IAEI49B,GAAWlqB,EAAAA,EAAAA,QAAyB,MACpCmqB,GAAcllC,EAAAA,EAAAA,cAAY,KAC3BilC,EAAS7pB,UACZ6pB,EAAS7pB,QAAQnW,MAAQ,GACzBggC,EAAS7pB,QAAQ+pB,QAClB,GACE,IACGv4B,EAAIyH,MACJ,OAAEtJ,GAAWH,GAAa7B,WAC1Bq8B,GAAWn9B,EAAAA,EAAAA,UAAQ,KACxB,MAAMo9B,EACLt6B,KAAU6M,GAAAA,GAAqBA,GAAAA,EAAkB7M,GAClD,OACEs6B,IACE,kBAAmBA,GAAaA,GAAWC,eAAkBD,GAAWpgC,QAC3E8F,CAAM,GAEL,CAACA,IACEw6B,GAAct9B,EAAAA,EAAAA,UAAQ,IAAM2E,EAAE,yBAA0B,qBAAqB,CAACA,IAE9E44B,GAAgBxlC,EAAAA,EAAAA,cACpBwkC,IACIN,GACHM,EAAOiB,GAAGC,SAASC,cAAc,gBAAiB,CACjD35B,KAAM,UACN6B,QAASjB,EAAE,qBAAsB,gBACjC8gB,MAAQkY,IAUPA,EATsC,CACrC,CACC95B,KAAM,WACN+5B,KAAMN,EACNO,SAAUA,KACTZ,GAAa,IAID,GAEf,GAEJ,CAACK,EAAaL,EAAahB,EAAct3B,IAGpCm5B,GAAmB99B,EAAAA,EAAAA,UACxB,KAAM,CACL+9B,YAAa,qHACbC,aAAc,yFAA6Bb,OAC3CA,WACAc,MAAOV,EACPW,WAAY,IACZC,YAAY,EACZC,SAAS,EACTC,WAAW,EACXC,UAAU,EACVC,QAAQ,EACRrC,SACAsC,kBACC,gFACDC,gBAAiB,MACjBC,cAAe,CACd,CACC/qB,MAAO,UACPhN,MAAO,CACN,CAAEgN,MAAO,KAAMgrB,MAAO,MACtB,CAAEhrB,MAAO,KAAMgrB,MAAO,MACtB,CAAEhrB,MAAO,KAAMgrB,MAAO,MACtB,CAAEhrB,MAAO,KAAMgrB,MAAO,MACtB,CAAEhrB,MAAO,KAAMgrB,MAAO,MACtB,CAAEhrB,MAAO,KAAMgrB,MAAO,QAGxB,CACChrB,MAAO,SACPhN,MAAO,CACN,CAAEgN,MAAO,IAAKgrB,MAAO,KACrB,CAAEhrB,MAAO,MAAOgrB,MAAO,OACvB,CAAEhrB,MAAO,MAAOgrB,MAAO,SAGzB,CACChrB,MAAO,aACPhN,MAAO,CACN,CAAEgN,MAAO,UAAWgrB,MAAO,UAAWC,SAAS,EAAMC,gBAAgB,GACrE,CAAElrB,MAAO,UAAWgrB,MAAO,UAAWC,SAAS,EAAMC,gBAAgB,GACrE,CAAElrB,MAAO,aAAcgrB,MAAO,aAAcC,SAAS,GACrD,CAAEjrB,MAAO,SAAUgrB,MAAO,SAAUC,SAAS,GAC7C,CAAEjrB,MAAO,QAASgrB,MAAO,QAASC,SAAS,GAC3C,CAAEjrB,MAAO,SAAUgrB,MAAO,SAAUC,SAAS,MAIhDE,QAAS,CACR,UACA,WACA,QACA,OACA,QACA,UACA,UACA,SACA,gBACA,OACA,aACA,iBACA,QACA,QACA,OACA,OACA,YACA,iBACA,aACA,gBAEDC,SAAS7C,GAEN,CACA,0CACA,sCACA,oBACA,gDACA,sBACA,iCACA,UACA,OACA,mBACA,iBACCt7B,KAAK,OACTo+B,yBAA0B9C,EAAS,kBAAoB,GACvD+C,4BAA6B/C,EAC1B,oEACA,OACHgD,YAAa,GACbC,aAAc,OACdC,cAAe,mBAAmB1C,GAAcl3B,qBAAqBk3B,GAAcG,0BAA0BH,GAAcC,UAC3H0C,4BAA4B,EAC5BC,8BAA8B,EAC9BC,eAAe,EACfC,oBAAoB,EACpBC,iBAAkB,UAClBC,oBAAoB,EACpBC,uBAAuB,KACpBxD,KAEJ,CACCgB,EACAI,EACArB,EACAQ,GAAcl3B,MACdk3B,GAAcG,SACdH,GAAcC,KACdR,IAIIyD,GAAoB7nC,EAAAA,EAAAA,cAAY,KACrCkkC,IAAe,CAAEM,OAAQsD,KAASC,MAAO9C,GAAU7pB,SAAS2sB,OAAQ,GAClE,CAAC7D,IAEJ,OACC/jC,IAAAA,cAACkc,EAAAA,UAAS,CACT/W,OAAO,OACPowB,eAAe,WACfjZ,cAAc,aACdvI,MAAO,CAAE8zB,UAAW,WAEpB7nC,IAAAA,cAACujC,GAAS,CACT53B,KAAK,OACL+mB,IAAKoS,EACLgD,OAAO,UACPlqB,SAAU8pB,EACVK,UAAQ,IAGT/nC,IAAAA,cAACgoC,GAAAA,EAAM/yB,GAAA,CACNmoB,aAAcA,EACdt4B,MAAOA,EACPwH,KAAMs5B,EACN9B,eAAgBK,GACZD,IAEM,ECxOXh4B,IAAK1K,IAGPu/B,UAAW,CAAC,GAGAkH,IAAuBphC,EAAAA,EAAAA,KAAAA,EAAkD6D,IAAG,IACrF+E,GACHy4B,gBAAiBA,IAAIz5B,IACpB/D,GACCI,EAAAA,EAAAA,KAA4BC,KAC3BC,EAAAA,EAAAA,SAAQyD,GAAO,EAAGK,KAAIq5B,SAAQx8B,WACxBZ,EAAM04B,QAAQ93B,KAAOZ,EAAM04B,QAAQ93B,GAAQ,CAAC,GACjDZ,EAAM04B,QAAQ93B,GAAMmD,GAAMq5B,CAAM,GAC/B,KAGLC,mBACEl8B,GACD,IAAIuC,IACH/D,GACCI,EAAAA,EAAAA,KAA4BC,KAC3BC,EAAAA,EAAAA,SAAQyD,GAAO,EAAGK,KAAIyC,gBACrBxG,EAAM24B,WAAW50B,GAAM,CAAE5C,MAAK03B,KAAMryB,EAAwB,GAC3D,KAGN82B,kBAAmBA,IAAI55B,IACtB/D,GACCI,EAAAA,EAAAA,KAA4BC,KAC3BC,EAAAA,EAAAA,SAAQyD,GAAO,EAAGK,KAAIw5B,SACrBv9B,EAAMg2B,UAAUjyB,GAAMw5B,CAAE,GACvB,KAGLC,cAAeA,IAAIxe,IAClBrf,GACCI,EAAAA,EAAAA,KAA4BC,KAC3BC,EAAAA,EAAAA,SAAQD,EAAM04B,SAAS,CAAC+E,EAAe78B,MACtCX,EAAAA,EAAAA,SAAQw9B,GAAe,CAACC,EAAeC,MAClC3uB,EAAAA,EAAAA,UAASgQ,EAAK2e,WACV39B,EAAM04B,QAAQ93B,GAAM+8B,EAC5B,GACC,GACD,KAGLC,iBAAkBA,IAAI5e,IACrBrf,GAAKhD,IAAC,IACFA,EACHg8B,YAAYkF,EAAAA,EAAAA,MAAKlhC,EAAEg8B,WAAY3Z,OAEjC8e,gBAAiBA,IAAI9e,IACpBrf,GAAKhD,IAAC,IACFA,EACHq5B,WAAW6H,EAAAA,EAAAA,MAAKlhC,EAAEq5B,UAAWhX,WCtFzB,SAAS+e,GACfC,GAEA,OAAIA,EAMI,CALuB3hC,GAC7BpH,IAAAA,cAAC+M,GAAkB,CAACH,IAAKm8B,EAAY78B,KACpClM,IAAAA,cAAC+oC,EAAYnF,KAASx8B,KAGM,GAExB,CAAC,IAAY,MAAM,EAC3B,CAQO,SAAS4hC,GACfD,EACA1gC,GAEA,OAAO4gC,EAAAA,EAAAA,UACNr1B,EAAAA,EAAAA,KAAIm1B,GAAc3hB,IACjB,IACC,OAAOA,EAAE/e,EACV,CAAE,MAAOgY,GAGR,YADAtgB,QAAQD,MAAMugB,EAEf,KAGH,CAEO,SAAS6oB,GACfH,EACA1gC,GAEA,IACC,MAAO,CAAC0gC,IAAc1gC,IAAS,EAChC,CAAE,MAAOgY,GACR,MAAO,MAACtZ,GAAW,EACpB,CACD,CCzCO,MAAMoiC,GAAyBr6B,IAErC,ODQAi6B,ECToBd,IAAsBvgC,GAAMA,EAAEq5B,YAAYjyB,MDWzC,CAACi6B,GAAa,GAAQ,CAAC,KAAqB,GAAE,GAH7D,IACNA,CCR4C,EAGhCK,GACZt6B,IAEA,MAAMi6B,EAAcd,IAAsBvgC,GAAMA,EAAEg8B,aAAa50B,KAC/D,OAAOhH,EAAAA,EAAAA,UAAQ,IAAMghC,GAA0BC,IAAc,CAACA,GAAa,EAG/DM,GAAaA,CAAKhhC,EAAWsD,KACzC,MAAM29B,EAAYrB,IAAsBvgC,GAAMA,EAAE+7B,QAAQ93B,KACxD,OAAO7D,EAAAA,EAAAA,UAAQ,IAAMkhC,GAAwBM,EAAWjhC,IAAS,CAACihC,EAAWjhC,GAAQ,EAGzEkhC,GAAqB59B,IACjC,MAAM29B,EAAYrB,IAAsBvgC,GAAMA,EAAE+7B,QAAQ93B,KACxD,OAAO9L,EAAAA,EAAAA,cAAawI,GAAW2gC,GAAwBM,EAAWjhC,IAAS,CAACihC,GAAW,EAG3EE,GAAYA,CACxB79B,EACAmD,EACAzG,KAEA,MAAMohC,EAAUxB,IAAsBvgC,GAAMA,EAAE+7B,QAAQ93B,GAAMmD,KAC5D,OAAOhH,EAAAA,EAAAA,UAAQ,IAAMohC,GAAuBO,EAASphC,IAAS,CAACohC,EAASphC,GAAQ,EAGpEqhC,GAAmBA,CAC/B/9B,EACAmD,KAEA,MAAM26B,EAAUxB,IAAsBvgC,GAAMA,EAAE+7B,QAAQ93B,GAAMmD,KAC5D,MAAO,CAAC26B,IAAWA,EAAQ,ECtCfE,GAAyB76B,IACrC,MAAMi6B,EAAcd,GAAqBr/B,WAAWm4B,YAAYjyB,GAChE,OAAOi6B,EAAc,CAACA,GAAa,GAAQ,CAAC,KAAqB,GAAE,EAAM,EAG7Da,GACZ96B,IAEA,MAAMi6B,EAAcd,GAAqBr/B,WAAW86B,aAAa50B,GACjE,OAAOg6B,GAA0BC,EAAY,EAGjCc,GAAaA,CAAKxhC,EAAWsD,IAElCq9B,GADWf,GAAqBr/B,WAAW66B,QAAQ93B,GAChBtD,GAG9ByhC,GAAqBn+B,IACjC,MAAM29B,EAAYrB,GAAqBr/B,WAAW66B,QAAQ93B,GAC1D,OAAYtD,GAA6B2gC,GAAwBM,EAAWjhC,EAAO,EAGvE0hC,GAAYA,CACxBp+B,EACAmD,EACAzG,KAEA,MAAMohC,EAAUxB,GAAqBr/B,WAAW66B,QAAQ93B,KAAQmD,GAChE,OAAOo6B,GAAuBO,EAASphC,EAAO,EAGlC2hC,GAAmBA,CAC/Br+B,EACAmD,KAEA,MAAM26B,EAAUxB,GAAqBr/B,WAAW66B,QAAQ93B,KAAQmD,GAChE,MAAO,CAAC26B,IAAWA,EAAQ,ECvBfQ,GAAanmC,GACzB2mB,GAAajpB,EAAbipB,CAAgE,YAAa,CAC5EC,MAAOpkB,EAAKG,KACZ3C,QAEWomC,GAAap7B,GACzB2b,GAAajpB,EAAbipB,CAAgE,YAAa,CAC5EC,MAAOpkB,EAAKG,KACZ0hC,OAAQ,CAAEpb,GAAI,SAAUje,QAGbq7B,GAAYA,CAACr7B,EAAYrD,IACrCgf,GAAajpB,EAAbipB,CAAgE,YAAa,CAC5EC,MAAOpkB,EAAKG,KACZ0hC,OAAQ,CAAEpb,GAAI,SAAUje,KAAIrD,UAGjB2+B,GAAiBA,CAACt7B,EAAYxB,IAC1Cmd,GAAajpB,EAAbipB,CAAgE,YAAa,CAC5EC,MAAOpkB,EAAKG,KACZ0hC,OAAyB,iBAAV76B,EAAqB,CAAEyf,GAAI,QAASzf,QAAOwB,MAAO,CAAEie,GAAI,QAASsd,IAAK/8B,EAAOwB,QCjCjFw7B,GAAkBA,KAC9B,MAAMjnC,GAAWm9B,EAAAA,EAAAA,MACX1wB,EAAS0D,KACf,OAAO1L,EAAAA,EAAAA,UACN,KAAMM,EAAAA,EAAAA,MAAK0H,GAAQ,EAAGwB,YAAY/N,EAAAA,EAAAA,aAAWgnC,EAAAA,EAAAA,MAAKlnC,EAASC,SAAU,KAAMgO,MAC3E,CAACjO,EAASC,SAAUwM,GACpB,EAEW06B,GAAkBA,KAC9B,MAAM5oB,EAAUof,GAAiBp4B,WAAWm4B,UAAUI,eAChDrxB,EAASyD,KACf,OAAOnL,EAAAA,EAAAA,MAAK0H,GAAS+c,IAAMtpB,EAAAA,EAAAA,aAAWgnC,EAAAA,EAAAA,MAAK3oB,EAAQve,SAASC,SAAU,KAAMupB,EAAEvb,QAAO,EAGzEm5B,GAAe/mB,IAC3B,GAAsB,iBAAXA,EACV,OAAOM,EAAAA,EAAAA,SAAQ,IAAIwmB,MAAmBl5B,SAASoS,IAAU,KAAM,KAEhE,MAAMgnB,EAAehnB,EAAOpS,OACzBlJ,EAAAA,EAAAA,MAAKmL,MAAcsZ,GAAMA,EAAE/d,KAAO4U,EAAOpS,OAASub,EAAEvb,QAAUoS,EAAOpS,QACrEk5B,KACH,MAA8B,iBAAhB9mB,EAAOlb,MAClBwb,EAAAA,EAAAA,SAAQ,IAAI0mB,GAAcp5B,SAASoS,EAAOlb,OAAQ,KAAM,KACxD,CACA6H,OAAQqT,EAAOlb,KAAK6H,OACpBs6B,KAAMjnB,EAAOlb,KAAKmiC,KAClBrnC,UAAU0gB,EAAAA,EAAAA,SAAQ,IAAI0mB,GAAcp5B,SAASoS,EAAOlb,KAAKlF,WAAY,KAAM,KAC3E,EAGSsnC,GAAyBA,KACrC,MAAMhpB,GAAUC,EAAAA,EAAAA,MAChB,OAAOhiB,EAAAA,EAAAA,cAAa6jB,GAAgC9B,EAAQ7Y,KAAK0hC,GAAY/mB,KAAU,CAAC9B,GAAS,EAGrFipB,GAA4BA,KACxC,MAAMjpB,GAAUC,EAAAA,EAAAA,MAChB,OAAOhiB,EAAAA,EAAAA,cACL6jB,GAAgC9B,EAAQoC,QAAQymB,GAAY/mB,KAC7D,CAAC9B,GACD,EAGK,SAASkpB,KAEf,OADgBjpB,EAAAA,EAAAA,MACDkpB,MAChB,CAEO,MAAMC,GAAetnB,IAC3B,MAAM9B,EAAUof,GAAiBp4B,WAAWm4B,UAAUI,eACtDvf,EAAQ7Y,KAAK0hC,GAAY/mB,GAAQ,EAGrBunB,GAAkBvnB,IAC9B,MAAM9B,EAAUof,GAAiBp4B,WAAWm4B,UAAUI,eACtDvf,EAAQoC,QAAQymB,GAAY/mB,GAAQ,EAGxBwnB,GAAgBA,IAC5BlK,GAAiBp4B,WAAWm4B,UAAUI,eAAe4J,S,kCCrE/C,SAASI,KACf,OAAO7Z,GAAoB1oB,WAAW6oB,oBACvC,CC0CA,MAAM2Z,GAOL,qBAA+B,IAMvBC,+BAAiC,CACxC5vB,MAAO,GACP6vB,QAAS,CAAC,IAAK,IAAK,KACpBz/B,KAAMs/B,MAOCI,+BAA0D,CACjEC,MAAOC,IAOAC,0BAAgD,IACpDC,KAAKN,kCACLM,KAAKJ,+BACRK,WAAW,EACXC,WAAW,GAOJ9K,UAAY,IAAI+K,IAMhBC,qBAAwBP,IAC1BG,KAAK5K,UAAUiL,IAAIR,IACvBG,KAAK5K,UAAUr2B,IACd8gC,GACAS,EAAAA,EAAAA,WAAS,KACR,IAAIC,MAAMV,GAAOW,OAAO5pB,OACxBopB,KAAK5K,UAAUqL,OAAOZ,EAAM,GAC1BJ,GAAoBiB,gBAGVV,KAAK5K,UAAUt4B,IAAI+iC,IACjBc,EAAAA,MAQXT,UAAaU,IACnB,MAAMC,EAAY,IACdb,KAAKJ,kCACLgB,GAECC,EAAUhB,OAIfG,KAAKI,qBAAqBS,EAAUhB,MAApCG,EAA4C,EAQtCC,UAAaW,IACnB,MAAMC,EAAY,IACdb,KAAKN,kCACLkB,GAGEE,EAAI,IAAIC,aAAaF,EAAU/wB,MAAO,CAC3C2R,KAAMof,EAAUxoC,QAChBsnC,QAASkB,EAAUlB,QACnBz/B,KAAM2gC,EAAU3gC,KAChB/H,IAAK0oC,GAAW1oC,MAGb0oC,EAAUz2B,SACb02B,EAAE9O,iBAAiB,QAAS6O,EAAUz2B,QACvC,EAQMuQ,OAAUimB,IAChB,MAAMC,EAAY,IACdb,KAAKD,6BACLa,GAGAC,GAAWZ,WACdD,KAAKC,UAAUY,GAGZA,GAAWX,WACdF,KAAKE,UAAUW,EAChB,EAQMG,eAAkBJ,IACxBA,EAAOvhC,SAAS4hC,GAASjB,KAAKrlB,OAAOsmB,IAAM,EAM5C,kBAAcC,GAKb,OAJKzB,GAAoB0B,WACxB1B,GAAoB0B,SAAW,IAAI1B,IAG7BA,GAAoB0B,QAC5B,EAGM,MAAMC,GAAyBA,IAA4B3B,GAAoByB,cCxLzEG,GAAYA,CAACx/B,EAAyBO,KAClDR,GAAe2Z,SAAS,CAAE1Z,QAAOO,SAAQN,gBAAgB,IACzDu9B,GAAY,CAAE15B,MAAO3P,EAAe6G,KAAM,IAAK,ECFhD,IAFqBo6B,EAAAA,EAAAA,eAAc,CAAEqK,UAAU,ICIxC,SAASC,KACf,MAAM,SAAED,IAAa5J,EAAAA,EAAAA,YAAW8J,IAChC,OAAOF,CACR,CCsBO,MAAMG,GAA4BxgC,IAAmB,OAC3DygC,SvD5BuBnhC,EuD4BNU,EAAInB,KvD5BkB,KACvC,MAAM,UAAEd,EAAS,YAAEpB,GAAgBkB,GAAa7B,WAChD,OAAO+B,EAAUuB,IAAQvB,EAAUnJ,IAAiB+H,CAAW,GuD2B/DkD,EAAGwH,GAAarH,EAAInB,MACpB6hC,UAAW7iB,GAAa7d,EAAInB,MAC5B8hC,aAAc1f,GAAgBjhB,EAAInB,MAClC+hC,ezDdCt6B,EyDcgCtG,EAAInB,KzDbrC,IACC+E,IAAa9I,GAAMA,EAAEiI,YAAYuD,MyDalCI,cAAeA,GAAc1G,EAAInB,MACjCgiC,OAAQx6B,GAAWrG,EAAInB,MACvB4H,OAAQA,GAAOzG,EAAInB,MACnB+1B,SAAUA,GAAS50B,EAAInB,MACvBiiC,oBAAqBA,KACpB,MAAM,0BAAE5M,EAAyB,UAAEC,GAAcC,GAAiBp4B,WAClE,MAAO,IACHm4B,MACA/0B,EAAAA,EAAAA,QAAO80B,GAA2B,CAAC70B,EAAKmb,EAAG3b,KAAS,IAAMQ,EAAK,CAACR,GAAO2b,EAAExa,EAAInB,SAAU,CAAC,GAC3F,GzDxBDyH,MElBsBhH,CuD4CtB,ECNWyhC,GAA0B/gC,IACtC,MAAMghC,EAAWp9B,GAAY5H,WACvB0c,EAAe2iB,GAAqBr/B,WAC1C,MAAO,CACNqI,cAAe28B,EAAS38B,cAAcrE,EAAInB,MAC1C2F,SAAWE,GAAuCs8B,EAASx8B,S9DN/By8B,EAC7B/7B,EACA5F,KAEA,MAAMoF,GAAQi5B,EAAAA,EAAAA,MAAKz4B,EAAKR,OAASpF,EAAIT,KAAM,KAC3C,MAAO,CACNS,IAAKA,EAAIT,KACT6F,QACAxC,GAAIgD,EAAKhD,IAAMwC,EACfpE,MAAOD,GAAmB6E,GAAM5E,OAAS,CAAC,GAC1CiC,SAAU2C,GAAM3C,UAAYjD,EAAIR,SAChC8F,QAASM,GAAMN,UAAW,EAC1BzM,MAAO+M,GAAM/M,OAAS,GACtBiL,WAAY8B,EAAK9B,YAAc9D,EAAIL,MAAQ,cAC3CoE,aAAc6B,EAAK7B,aACnBC,QAAS4B,EAAK5B,SAAWlD,GACzB0C,UAAWoC,EAAKpC,UAChB,E8DXoEm+B,CAAev8B,EAAO1E,IAC1FiF,aAAeC,GACd87B,EAAS/7B,a9D+EsBi8B,EAACh8B,EAA0B5F,KAC5D,MAAMoF,GAAQi5B,EAAAA,EAAAA,MAAKz4B,EAAKR,OAASpF,EAAIT,KAAM,KAC3C,MAAO,CACNS,IAAKA,EAAIT,KACT6F,QACAxC,GAAIgD,GAAMhD,IAAMwC,EAChBC,UAAWO,GAAMP,WAAavE,GAC9B,E8DtFuB8gC,CAAmBh8B,EAAMlF,IAChDoF,gBAAkBF,GACjB87B,EAAS57B,gB9DUyB+7B,EACpCj8B,EACA5F,KAEA,MAAMoF,GAAQi5B,EAAAA,EAAAA,MAAKz4B,EAAKR,OAASpF,EAAIT,KAAM,KAC3C,MAAO,CACNS,IAAKA,EAAIT,KACT6F,QACAxC,GAAIgD,GAAMhD,IAAMwC,EAChBC,UAAWO,GAAMP,WAAavE,GAC9BjI,MAAO+M,EAAK/M,OAASmH,EAAIJ,QACzBD,KAAMiG,EAAKjG,MAAQK,EAAIL,KACvBsD,SAAU2C,EAAK3C,UAAYjD,EAAIR,UAAY,GAC3Cg1B,YAAa5uB,EAAK4uB,aAAe,GACjC,E8DxB0BqN,CAAsBj8B,EAAMlF,IACtDsF,cAAgBJ,GACf87B,EAAS17B,c9DwBuB87B,EAACl8B,EAA2B5F,KAC9D,MAAMoF,GAAQi5B,EAAAA,EAAAA,MAAKz4B,EAAKR,OAASpF,EAAIT,KAAM,KAC3C,MAAO,CACNS,IAAKA,EAAIT,KACT6F,QACAxC,GAAIgD,GAAMhD,IAAMwC,EAChBC,UAAWO,GAAMP,WAAavE,GAC9BjI,MAAO+M,EAAK/M,OAASmH,EAAIJ,QACzBD,KAAMiG,EAAKjG,MAAQK,EAAIL,KACvBsD,SAAU2C,EAAK3C,UAAYjD,EAAIR,UAAY,GAC3C,E8DlCwBsiC,CAAoBl8B,EAAMlF,IAClD4F,eAAiBV,GAChB87B,EAASp7B,e9DkCwBy7B,EACnCn8B,EACA5F,KAAmB,CAEnBA,IAAKA,EAAIT,KACTqD,GAAIgD,GAAMhD,IAAM5C,EAAIT,KACpByiC,gBAAiBp8B,GAAMo8B,gBACvBC,gBAAiBr8B,GAAMq8B,gBACvB58B,UAAWO,GAAMP,WAAavE,GAC9BohC,OAAQt8B,GAAMs8B,QAAU,OACxBlhC,MAAOD,GAAmB6E,GAAM5E,OAAS,CAAC,GAC1CiC,SAAU2C,GAAM3C,UAAYjD,EAAIR,SAChC3G,MAAO+M,GAAM/M,OAASmH,EAAIJ,U8D9CAmiC,CAAqBn8B,EAAMlF,IACpD8F,wBAA0BZ,GACzB87B,EAASl7B,wB9D8CiC27B,EAC5Cv8B,EACA5F,KAAmB,CAEnBA,IAAKA,EAAIT,KACTsK,QAASjE,GAAMiE,QACfhR,MAAO+M,GAAM/M,OAASmH,EAAIJ,QAC1BqD,SAAU2C,GAAM3C,UAAYjD,EAAIR,SAChCwiC,gBAAiBp8B,GAAMo8B,gBACvBC,gBAAiBr8B,GAAMq8B,gBACvBr/B,GAAIgD,GAAMhD,IAAM5C,EAAIT,KACpB8F,UAAWO,GAAMP,WAAavE,K8DzDKqhC,CAA8Bv8B,EAAMlF,IACtEgG,0BAA4Bd,GAC3B87B,EAASh7B,0B9DyDmC07B,EAC9Cx8B,EACA5F,KAAmB,CAEnBA,IAAKA,EAAIT,KACT0D,SAAU2C,GAAM3C,UAAYjD,EAAIR,SAChCwiC,gBAAiBp8B,GAAMo8B,gBACvBC,gBAAiBr8B,GAAMq8B,gBACvBr/B,GAAIgD,GAAMhD,IAAM5C,EAAIT,KACpB8F,UAAWO,GAAMP,WAAavE,K8DlEOshC,CAAgCx8B,EAAMlF,IAC1Ew7B,mBAAoB9iB,EAAa8iB,mBAAmBx7B,EAAInB,MAExD8iC,cC4KAriC,ED5KoCU,EAAInB,KC6KxCuyB,GAhN0BuQ,EAC3BvQ,EACA9qB,EAAgB1R,IAEhBqsB,GAAgBrsB,EAAhBqsB,CACC,QACA,mDACCmQ,EAAK52B,MACF,uDAAsDwM,EAAAA,EAAAA,KACtDoqB,EAAK52B,OACL,CAAC03B,EAAMz0B,IAAQ,eAAeA,cAAgBy0B,EAAK5yB,KAAOgH,MAAU4rB,EAAKh6B,6CAEzE,KAEHk5B,EAAK92B,MACF,kDAAiD0M,EAAAA,EAAAA,KAAIoqB,EAAK92B,OAAO,CAACk4B,EAAM/0B,KACxE0mB,EAAAA,EAAAA,SAAQqO,IACLxrB,EAAAA,EAAAA,KAAIwrB,GAAOC,GAAM,eAAeh1B,MAAQg1B,aAAY32B,KAAK,IACzD,eAAe2B,MAAQ+0B,aACzB12B,KAAK,2BACN,KAEHs1B,EAAK7kB,UAAUq1B,YACZ56B,EAAAA,EAAAA,KACAoqB,EAAK7kB,SAASq1B,YACb3/B,GACA,gFACCA,EAAKC,QACD8E,EAAAA,EAAAA,KAAI/E,EAAK3H,OAAO,CAACpC,EAAOuF,IAAQ,YAAYA,MAAQvF,UAAa4D,KACrE,2CAEDA,KAAK,IACN,KAEHs1B,EAAK7kB,UAAUs1B,YACZ76B,EAAAA,EAAAA,KACAoqB,EAAK7kB,SAASs1B,YACb5/B,GACA,gFAAgFA,iCAChFnG,KAAK,IACN,KAEHs1B,EAAK7kB,UAAUu1B,YACZ96B,EAAAA,EAAAA,KACAoqB,EAAK7kB,SAASu1B,YACd,CAAC7/B,EAAMS,IACN,+DAA+DA,sBAA0BT,EAAK3H,MAAM8T,4DAA4DnM,EAAK3H,MAAM8T,6DAA6DnM,EAAK3H,MAAMgU,4DAA4DrM,EAAK3H,MAAMiU,6GAA6GtM,EAAK3H,MAAMmU,kEAAkExM,EAAK3H,MAAMmY,kEAAkExQ,EAAK3H,MAAM4X,sEAAsEjQ,EAAK3H,MAAMynC,+EAA+E9/B,EAAK3H,MAAM0nC,8EAA8E//B,EAAK3H,MAAM2nC,2EAA2EhgC,EAAK3H,MAAM4nC,0EACt6BpmC,KAAK,IACN,KAEHs1B,EAAK+Q,YACF,gEACA/Q,EAAK+Q,YAAYC,UACdp7B,EAAAA,EAAAA,KAAIoqB,EAAK+Q,YAAYC,SAAS/zB,SAAU9S,GACvB,QAAbA,EAAM8mC,GACF,iCAAiC9mC,EAAM8mC,YAAY9mC,EAAM+mC,yBAChD,QAAb/mC,EAAM8mC,IAAgB9mC,EAAMgnC,KACxB,iCAAiChnC,EAAM8mC,YAAY9mC,EAAM+mC,kBAChD,QAAb/mC,EAAM8mC,GACF,iCAAiC9mC,EAAM8mC,YAAY9mC,EAAM+mC,WAAW/mC,EAAMinC,OAC3E,iCAAiCjnC,EAAM8mC,YAAY9mC,EAAM+mC,YAC9DxmC,KAAK,IACP,KAEHs1B,EAAK+Q,YAAYM,aACdz7B,EAAAA,EAAAA,KAAIoqB,EAAK+Q,YAAYM,YAAYp0B,SAAU9S,GAC1B,QAAbA,EAAM8mC,IAAgB9mC,EAAMgnC,KACxB,2BAA2BhnC,EAAM8mC,YAAY9mC,EAAM+mC,kBAC1C,QAAb/mC,EAAM8mC,GACF,2BAA2B9mC,EAAM8mC,YAAY9mC,EAAM+mC,WAAW/mC,EAAMinC,OACrE,2BAA2BjnC,EAAM8mC,YAAY9mC,EAAM+mC,YACxDxmC,KAAK,IACP,uFAEHs1B,EAAK+Q,YAAYC,SACd,GACyC,QAArChR,EAAK+Q,YAAYC,SAASM,IAAIL,GAC1B,iCAAiCjR,EAAK+Q,YAAYC,SAASM,IAAIL,wBAGjC,QAArCjR,EAAK+Q,YAAYC,SAASM,IAAIL,IAC9BjR,EAAK+Q,YAAYC,SAASM,IAAIH,KAEvB,iCAAiCnR,EAAK+Q,YAAYC,SAASM,IAAIL,iBAE9B,QAArCjR,EAAK+Q,YAAYC,SAASM,IAAIL,IAC1Br7B,EAAAA,EAAAA,KACNoqB,EAAK+Q,YAAYC,SAASM,IAAIF,GAC7BG,GAIA,iCAAiCvR,EAAK+Q,aAAaC,SAASM,IAAIL,UAAUM,EAAE3e,aAC5EloB,KAAK,IAED,iCAAiCs1B,EAAK+Q,YAAYC,SAASM,IAAIL,WAEtE,KAEHjR,EAAK+Q,YAAYM,YACd,GAEyC,QAAxCrR,EAAK+Q,YAAYM,YAAYC,IAAIL,IACjCjR,EAAK+Q,YAAYM,YAAYC,IAAIH,KAE1B,2BAA2BnR,EAAK+Q,YAAYM,YAAYC,IAAIL,iBAExB,QAAxCjR,EAAK+Q,YAAYM,YAAYC,IAAIL,IAC7Br7B,EAAAA,EAAAA,KACNoqB,EAAK+Q,YAAYM,YAAYC,IAAIF,GAChCG,GAIA,2BAA2BvR,EAAK+Q,aAAaM,YAAYC,IAAIL,UAAUM,EAAE3e,aACzEloB,KAAK,IAED,2BAA2Bs1B,EAAK+Q,aAAaM,YAAYC,IAAIL,WAEpE,8BAGH,qBAEH1sB,MAAMsK,IACPjmB,GAAgBsgB,UAAUxf,IAAe,CACxCT,SAAU,IACNS,EAAET,SACLC,OAAO8E,EAAAA,EAAAA,QACNgyB,EAAK92B,OACL,CAAC+E,EAAKmzB,EAAM/0B,KAAQ,IAChB4B,EACH,CAAC5B,GAAM+0B,KAER13B,EAAET,SAASC,OAEZE,OAAO4E,EAAAA,EAAAA,QACNgyB,EAAK52B,OACL,CAAC6E,GAAOC,MAAKpH,SAASuF,KACrB,MAAMkmB,GAAYhhB,EAAAA,EAAAA,WAAUtD,GAAMozB,GAAMA,EAAE5zB,OAASpB,GAAOg1B,EAAEN,SAAW7yB,IAevE,OAdIqkB,GAAa,EAEhBtkB,EAAIskB,GAAa,CAChB9kB,KAAMpB,EACN00B,OAAQ7yB,EACR8e,SAAUlmB,GAGXmH,EAAIlD,KAAK,CACR0C,KAAMpB,EACN00B,OAAQ7yB,EACR8e,SAAUlmB,IAGLmH,CAAG,GAEXvE,EAAET,SAASG,QAGbb,QAAS,IACLmB,EAAEnB,QACLiT,aACCpR,EAAAA,EAAAA,MAAK41B,GAAM7kB,UAAUq1B,YAAa3/B,GAASA,EAAKC,KAAOpH,GAAGnB,SAASuI,MAAK5H,MACtE8T,wBAA0BtT,EAAEnB,SAASiT,YACxCW,WAAY,CACXhB,cACsB,IAAdzR,EAAEnB,SACNyF,EAAAA,EAAAA,QACAgyB,GAAM7kB,UAAUq1B,YAChB,CAACviC,GAAO6C,KAAI5H,YACX,MAAMqpB,GAAYhhB,EAAAA,EAAAA,WACjBtD,GACA,CAACujC,EAAUC,IAAiBxjC,EAAIwjC,GAAc3gC,KAAOA,IAatD,OAXIyhB,GAAa,IAEhBtkB,EAAIskB,GAAWxV,OAAS,IACpB9O,EAAIskB,GAAWxV,UACf7T,GAEAA,EAAM8T,wBAAkD,YAAxB/O,EAAIskB,GAAW9kB,OAElDQ,EAAIskB,GAAW9kB,KAAOvE,EAAM8T,yBAGvB/O,CAAG,GAEX,KACIgU,EAAAA,EAAAA,QACFvY,EAAEnB,QAAQ4T,WAAWhB,UACpBtK,IAAUmvB,GAAM7kB,UAAUs1B,YAAY10B,SAASlL,EAAKC,MACpDmR,QAAQ+H,GAAiB,YAAXA,EAAEvc,WACfmI,EAAAA,EAAAA,KAAIiZ,GAAG4D,wBAAyB5hB,GAASA,EAAKsK,SAAS,SACvD8G,EAAAA,EAAAA,QACFvY,EAAEnB,QAAQ4T,WAAWhB,UACpBtK,IAAUmvB,GAAM7kB,UAAUs1B,YAAY10B,SAASlL,EAAKC,MACpDmR,QAAQ+H,GAAiB,YAAXA,EAAEvc,cAGnB1E,QAIA8lB,KAMP0hB,CAAavQ,EAAM9xB,GAAKqW,MAAMsK,IAAC,IAC3BA,EACHlhB,KAAM,kBAJPO,KD3KA,GAGW,mBACZ4G,GAAkB,mBAClBE,GAAkB,mBAClBvB,GAAkB,YAClBG,GAAW,gBACXG,GAAe,mBACfE,GAAkB,iBAClBM,GAAgB,kBAChBE,GAAiB,2BACjBE,GAA0B,6BAC1BE,GAA4B,UAY5B7B,IACGR,GAAY5H,YAEH,kBACZy/B,GAAiB,gBACjBQ,GAAe,gBACfX,GAAe,cACfK,GAAa,iBACbI,IACGV,GAAqBr/B,W,2NEtFlB,MAAM8mC,GAA4BA,EAAGrP,KAAI/uB,WAAU4yB,MACzD,MAAMyL,GAAM7nC,EAAAA,EAAAA,UAAQ,IAAM2iC,GAAY,CAAEjiC,KAAM63B,EAAI/uB,WAAU,CAACA,EAAO+uB,IACpE,OAAOrgC,IAAAA,cAAC4vC,EAAAA,KAAM36B,GAAA,CAAClB,MAAO,CAAE87B,eAAgB,QAAUxP,GAAIsP,GAASzL,GAAQ,ECR3D4L,GAAUA,IACtB9vC,IAAAA,cAACkc,EAAAA,UAAS,CAAChX,MAAM,OAAOC,OAAO,OAAOmX,cAAc,SAASiZ,eAAe,UAE3Ev1B,IAAAA,cAAC8V,EAAAA,OAAM,CAACnK,KAAK,QAAQ5G,MAAM,SAASuI,MAAM,UAAUyiC,SAAO,EAACh6B,QAASu2B,EAAAA,QCkBhE,SAAS0D,GAAiBtO,EAAauO,GAC7C,OAAOC,OAAOC,WAAW,GAAGzO,cAAiBuO,EAC9C,CC1BO,MAAMG,GACZ,WAA8B,mCAI9B,kBAA2B,EAI3BC,WAAAA,CAAYJ,GACXtE,KAAKsE,OAASA,EACVG,GAAQE,UACX3E,KAAK4E,cAAgBP,GAAiBI,GAAQzpB,IAAKspB,GAEnDtE,KAAK4E,cAAgB,IAEvB,CAEA,oBAAcC,CAAcF,GACvBA,GDXC,SAAoB5O,GAC1B,MAAM+O,EAAiB,gBAEvB,GAAIvsC,SAASwsC,eAAeD,GAC3B,OAGD,MAAME,EAAezsC,SAAS0sC,cAAc,UACtCC,EAAgB3sC,SAAS4sC,qBAAqB,UAAU,GAC9DH,EAAahlC,KAAO,kBACpBglC,EAAaI,OAAQ,EACrBJ,EAAaK,IAAM,GAAGtP,aACtBiP,EAAa7hC,GAAK2hC,EAClBI,EAAcI,YAAYC,aAAaP,EAAcE,EACtD,CCFGM,CAAWf,GAAQzpB,KAEpBypB,GAAQE,UAAYA,CACrB,CAEOc,aAAAA,CAAcC,GACpB,MAAMC,EAAU3F,KAAK4F,2BACrBD,GAASE,aAAapuC,OAAOC,SAASouC,MACtCH,GAASF,cAAcC,EACxB,CAEOK,UAAAA,CAAWC,EAAkBxJ,EAAgB18B,EAAe3G,GAClE,MAAMwsC,EAAU3F,KAAK4F,2BACrBD,GAASE,aAAapuC,OAAOC,SAASouC,MACtCH,GAASI,WAAWC,EAAUxJ,EAAQ18B,EAAM3G,EAC7C,CAEQysC,wBAAAA,GACP,IAAKnB,GAAQE,UACZ,OAAO,KAER,GAA2B,OAAvB3E,KAAK4E,cACR,IACC5E,KAAK4E,cAAgBP,GAAiBI,GAAQzpB,IAAKglB,KAAKsE,OACzD,CAAE,MAAO5vB,GAERtgB,QAAQuK,KAAK,kCAAmC+V,EACjD,CAED,OAAOsrB,KAAK4E,aACb,ECnCM,MAAMqB,GAAqD,CAAC,EACnE,IAAIC,GAAY,EAEhB,MAAQlE,uBAAsB,MAAKmE,IAAiBC,GAC5C3E,yBAAwB,MAAK4E,IAAmBC,E,0DCPjD,SAASC,GACfC,GAEA,MAAuC,aAAhCA,EAAqBxvB,MAC7B,CAUO,MAAMyvB,GAAqBA,EACjClvB,OACAmvB,mBAEA,MAAO5lC,IAAK+N,EAAAA,EAAAA,kBACNkB,GAAY7b,EAAAA,EAAAA,cAAY,IAAMuD,OAAOC,SAASq4B,UAAU,IAC9D,OACC17B,IAAAA,cAACgjB,EAAAA,MAAK,CACLE,KAAMA,EACNrH,eAAe,EACfiH,kBAAmB6B,GACnBlJ,MAAOhP,EAAE,gCAAiC,2BAC1CkP,aAAclP,EAAE,6CAA8C,WAC9D0W,qBAAsB1W,EAAE,+CAAgD,cACxEiP,UAAWA,EACXI,QAASu2B,GAETryC,IAAAA,cAAC2U,EAAAA,QAAO,CAACjO,IAAI,SACZ1G,IAAAA,cAAC+b,EAAAA,KAAI,CAAC/H,SAAS,cACbvH,EACA,+BACA,gIAII,EAIG6lC,GAASA,KACrB,MAAOpvB,EAAM0X,IAAWnd,EAAAA,EAAAA,WAAS,GAC3B40B,GAAexyC,EAAAA,EAAAA,cAAY,IAAM+6B,GAAQ,IAAQ,IA+BvD,OA7BAjd,EAAAA,EAAAA,YAAU,KACTiP,QAAQwC,WAAW,CCxDpB7B,MAAMloB,GACJkd,MAAMgwB,GAAaA,EAAS3kB,SAC5BrL,MAAMzQ,IACNwf,GAAoBpK,SAASpV,EAAK,IAElC0gC,SAAQ,KACRlhB,GAAoBpK,SAAS,CAAEqK,QAAQ,IACvC,MAAMkhB,EAAUvuC,SAASwsC,eAAe,WACpC+B,GAAWA,aAAmBC,kBACjCD,EAAQhB,KAAOtG,MAEhBjnC,SAASuX,MdXJ6V,GAAoB1oB,WAAW4oB,kBcWH,ICXnCjE,MAAM,gCACJhL,MAAMgwB,IACN,GAAIA,EAASI,GACZ,OAAOJ,EAAS3kB,OAEjB,MAAM9B,MAAMymB,EAASK,WAAW,IAEhCrwB,MAAK,EAAGmhB,iBACRlzB,GACE5H,WACA6H,SAAQwP,EAAAA,EAAAA,QAAOyjB,GAAY,EAAG/3B,UAAoB,UAATA,GAA6B,aAATA,IAAqB,ICPtF8e,GAAajpB,EAAbipB,CAA0E,UAAW,CACpFC,MAAOpkB,EAAKC,QACZyB,OAAQ,6EACNua,MAAMgJ,IACR,GAAIA,EAAK,CACR,MAAM,QAAEhlB,EAAO,SAAEU,EAAQ,QAAED,GCHE6rC,GAC/B/jC,KACArD,OACAtE,QACAD,QACAiT,aACA24B,aACA1rC,QACAJ,UACAgB,aAMA,MAAMf,EAtBNA,KAA4D,CAE5DE,MAAOF,EAASE,MAAM4T,OACtB7T,MAAOD,EAASC,MAAM6T,OACtB3T,MAAOH,EAASG,MAAM03B,MAAQ,KAkBbiU,CAAkB,CAAE5rC,QAAOD,QAAOE,UACnD,MAAO,CACNb,QAAS,CACRuI,KACArD,OACA+N,YAAarS,EAAM4T,OAAOvB,YAC1BW,aACA24B,aACA9qC,UAEDf,WACAD,UACA,EDxBwC6rC,CAAiBtnB,GACxDrF,GAAgBgB,SAAS,CACxBf,gBAAiB+D,GAAqBjjB,KAEvCL,GAAgBsgB,SAAS,CACxBpgB,eAAe,EACfP,UACAU,WACAqmB,cAAetmB,GAEjB,OHsCgEub,MAC9DywB,IACA,MAAO,CAAEC,EAAmCC,GAC3CF,EAEKG,GAAwB/qC,EAAAA,EAAAA,MAC7B,CAAC6qC,EAAmCC,GACpChB,IAEGiB,IACyC,iBAAjCA,EAAsBtwB,OAChC9iB,QAAQD,MAAMqzC,EAAsBtwB,QAC1B,YAAaswB,EAAsBtwB,QAC7C9iB,QAAQD,MAAMqzC,EAAsBtwB,OAAO7e,SAEvCb,GACJy3B,GAAQ,IAvD0B,cA0DPqY,EA1DJtwB,QKPtB,SACNvX,GCHKhI,OAAOgwC,4BACXhwC,OAAOgwC,0BAA4B,CAClCC,MAAOrzC,IACP,YAAaszC,GACb,gBAAiBC,EACjB,cAAeC,GACfC,OAAQC,EACR,mBAAoBC,EACpB,oBAAqBC,GACrB,mBAAoBC,GACpB,6BAA8B,CAAC,EAC/B,kCAAmCC,EACnC,+BAAgCC,GAChCC,WAAYC,IAEb7wC,OAAO8wC,oBAAsB,CAAC,GDT/B,MAAMC,GAAal0B,EAAAA,EAAAA,QAAO7U,GAAOc,GAC5BA,EAAIT,OAASjK,KACR0K,EAAIN,SAAoD,UAAzC3C,GAAe,QAASiD,EAAIN,YAGrD7L,QAAQq0C,IACP,iBACA,yHAED,MAAM,SAAEntC,GAAaL,GAAgBgC,WAC/BgC,EACJ3D,GAAUC,OAAOmC,kBACjBpC,GAAUE,OAAOmC,cAClB,KACDmB,GAAa7B,WAAWuC,QAAQgpC,EAAYvpC,GAC5C,MAAMs6B,EACLt6B,KAAU6M,GAAAA,GAAqBA,GAAAA,EAAkB7M,GAClD,GAAIs6B,EAAW,CACd,MAAMmP,EACJ,kBAAmBnP,GAAaA,EAAUoP,eAAkBpP,EAAUpgC,MA1BhD8F,IACzB,QAAO,KAAmBA,cA0BzB2pC,CAAiBF,GAAkB9xB,MAAMiyB,KACxCC,EAAAA,EAAAA,gBAAeJ,EAAkBG,IACjCE,EAAAA,EAAAA,kBAAiBL,EAAiB,GAEpC,CACAvvB,GAAYlc,WAAW+c,WAAWwuB,GAC3BvnB,QAAQwC,YAAWxb,EAAAA,EAAAA,KAAIugC,GAAajoC,IAAQyoC,ONvB5BC,EMuBoC1oC,ENtBpD,IAAI0gB,SAAQ,CAAC2S,EAASlQ,KAC5B,IACKjsB,OAAOgwC,4BAA4B,gCACtChwC,OAAOgwC,0BAA0B,8BAA8BwB,EAAOnpC,MAAQ,CAC7Ema,OAAQA,GAAOgvB,EAAOnpC,MACtBikC,QAAO,GACPI,QAAO,GACPvsB,eAAc,MACXoqB,GAAuBiH,MACvB9C,MACA1E,GAAyBwH,MACzB5C,MACA6C,EACHzE,QAAOA,KAIThtC,OAAO8wC,oBAAoBU,EAAOnpC,MAASqpC,IAC1CtkC,GAAY0W,UAAUnc,IAAK,CAC1B8E,YAAa,IACT9E,EAAM8E,YACT,CAAC+kC,EAAOnpC,OAAOspC,EAAAA,EAAAA,MAAKD,QAItB/0C,QAAQkmB,KACP,aAAa2uB,EAAOnpC,OACpB,yHAED8zB,EAAQqV,EAAO,EAGhB,MAAMI,EAAS9wC,SAAS0sC,cAAc,UACtCoE,EAAOC,aAAa,OAAQ,mBAC5BD,EAAOC,aAAa,gBAAiBL,EAAOnpC,MAC5CupC,EAAOC,aAAa,mBAAoBL,EAAO5tC,SAC/CguC,EAAOC,aAAa,cAAe,QACnCD,EAAOC,aAAa,MAAO,GAAGL,EAAOppC,iBACrCtH,SAASkpB,KAAK8nB,YAAYF,GAC1BnD,IAAa,EACbD,GAAS,GAAGgD,EAAOnpC,eAAeomC,MAAemD,CAClD,CAAE,MAAOG,GACRp1C,QAAQD,MAAMq1C,GACd9lB,EAAO8lB,EACR,KA7CK,IAAiBP,CMuBwC,IAChE,CLmCKQ,CAAS9rB,OAAOC,OAAO/Y,GAAY5H,WAAWwC,MAC/C,IAGK,KDbD,IAAIwhB,SAAS2S,KACnB8V,EAAAA,EAAAA,QAAOzD,IAAWoD,IACbA,EAAO/D,YACV+D,EAAO/D,WAAWqE,YAAYN,EAC/B,IAEDzV,GAAS,GCQO,IAEd,IACIv/B,IAAAA,cAACoyC,GAAkB,CAAClvB,KAAMA,EAAMmvB,aAAcA,GAAgB,EO9EtE,GAJiCkD,EAAG51C,eACnC,MAAMkN,EAAOpC,IAAc/C,GAAMA,EAAEiD,UAAUnJ,KAC7C,OAAOxB,IAAAA,cAAC8M,EAAAA,gBAAe,CAACD,KAAMA,GAAOlN,EAA2B,ECR1D,MAAM61C,GAAiCA,IAC7CpyC,OAAOqyC,WAAW,gCCENC,GAAcA,KAI1B,MAAMC,ECuBA,WACN,MAAM1uC,EAAWqB,MACX,sBAAEstC,GAA0BtkB,KAE5BukB,GAAkB/tC,EAAAA,EAAAA,UACvB,KAAM+M,EAAAA,EAAAA,MAAK5N,EAASC,OAAS,IAAK2N,EAAAA,EAAAA,MAAK5N,EAASE,OAAS,IAAK0N,EAAAA,EAAAA,MAAK5N,EAASG,OAAS,GACrF,CAACH,IAGF,OAAOa,EAAAA,EAAAA,UAAQ,KACd,GAAI+tC,EAAiB,CACpB,MAAMnzB,GAASta,EAAAA,EAAAA,MACdnB,EAASG,OACRtC,IAAiDgxC,OA5BrDhX,EA4BoFh6B,GA1BxE2G,OAASnG,GAAwBw5B,EAAKC,SAAWv9B,EAHvD,IACNs9B,CA6BE,KAAG9T,SAEH,OAAOtI,GAAWkzB,GAAyB,WAAc,UAC1D,CACgB,GACd,CAACC,EAAiB5uC,EAAU2uC,GAChC,CD3C+BG,IAEvBC,EAAiBC,IAAsBx4B,EAAAA,EAAAA,WAAkB,GAqBhE,OAnBAE,EAAAA,EAAAA,YAAU,KACLg4B,GACHM,EAC4B,SAA1BN,GAAoCH,KAAiCU,SAC3C,YAA1BP,EAEH,GACE,CAACA,KAEJh4B,EAAAA,EAAAA,YAAU,KACT,MAAMw4B,EAAeC,IACpBH,EAAmBG,EAAMF,QAAQ,EAGlC,OADAV,KAAiC7X,iBAAiB,SAAUwY,GACrD,KACNX,KAAiC5X,oBAAoB,SAAUuY,EAAY,CAC3E,GACC,IAEI,CAAEH,kBAAiBK,iBAAkBV,EAAuB,GEJpEW,EAAAA,GAAAA,gBAAelzC,OAAOmqB,OAOf,MAAMgpB,IAAwB3T,EAAAA,EAAAA,eAA8B,CAClE4T,aAAcA,KACb,MAAM1qB,MAAM,kBAAkB,EAE/B2qB,mBAAoBA,KACnB,MAAM3qB,MAAM,kBAAkB,IAQ1B4qB,GACLA,CAACC,EAA2B,CAAC,IAC5BC,IAAmB,IAChBA,KACAD,EACHE,QAAS,IACLD,EAAMC,WACNF,EAAYE,QACfC,OAAQ,CACPC,QAAS,UACTC,MAAO,UACP/6B,OAAQ,UACRg7B,MAAO,UACPn6B,SAAU,WAEXo6B,OAAQ,CACPH,QAAS,UACTC,MAAO,UACP/6B,OAAQ,UACRg7B,MAAO,UACPn6B,SAAU,cAKRq6B,GAAiCP,IAAK,IACxCA,EACHQ,MAAO,IACHR,EAAMQ,MACTC,OAAQT,EAAMQ,MAAME,iBACpBC,OAAQX,EAAMQ,MAAMI,mBAIhBC,GAA0Cb,IAAK,IACjDA,EACHc,cAAe,IACVd,EAAMc,eAAiB,GAC3B,YACA,YACA,cACA,cACA,UAQIC,IAAcC,EAAAA,GAAAA,mBAAiB,qFAEpB,EAAGC,kBAA2B,GAAGA,OAE9C,EAAGjB,YACLhjC,EAAAA,EAAAA,KACCgjC,EAAMc,eACL9b,IAAW94B,EAAAA,GAAAA,KAAG,iDACG84B,EACNA,OAYFkc,GAAgBA,EAAGn4C,eAC/B,MAAO0+B,GAAwBlB,GAAiC14B,EAA4B,CAAC,IAEtFszC,EAAYC,IAAiBv6B,EAAAA,EAAAA,UACnC,CAAC,GAGIw6B,ECtHA,WACN,MAAOC,EAAyBC,GAA8Bhb,GAE5Dz4B,OAAgCqC,IAC5B,0BAAEqxC,EAAyB,8BAAEC,EAA6B,OAAE9mB,GACjED,MACK,gBAAE0kB,EAAe,iBAAEK,GAAqBX,KAExCuC,GAAenwC,EAAAA,EAAAA,UAAQ,SAENf,IAArBsvC,IACC+B,GAA6BC,GAE1BrC,EACIqC,GAAiCD,EAElCA,GAA6BC,EAEjCH,IAA2BrjC,EAAAA,EAAAA,MAAKqjC,GAA2B,IAAM3mB,EAElEykB,IAAoBkC,EAAwBI,MAAQJ,EAAwBK,QAC7EL,EAAwBK,OACxBL,EAAwBI,UAJ1B,GAQE,CACFD,EACAD,EACApC,EACAK,EACA9kB,EACA2mB,IAYD,OATAv6B,EAAAA,EAAAA,YAAU,UACgB5W,IAArBsvC,GACH8B,GAA4Bx4B,IAAS,IACjCA,EACH,CAACq2B,EAAkB,OAAS,SAAUiC,KAExC,GACE,CAACjC,EAAiBK,EAAkB4B,EAAcE,IAE9CF,CACR,CDyEsBO,IAErBC,EAAAA,EAAAA,kBAAgB,KACf,MAAMC,EAAuDT,EAC1D,CAAEU,SAASC,EAAAA,EAAAA,kBAAiB,CAAE7B,QAASkB,KACvC,CAAC,EACJD,GAAea,IAAS,IACpBA,EACHhC,QAASH,GAAiB,CACzBG,QAAS6B,IAEVtB,MAAOD,GACPO,cAAeD,MACb,GACD,CAACQ,IAEJ,MAAOa,EAAiBrC,IAAsBh5B,EAAAA,EAAAA,UAA+B,aAE7EE,EAAAA,EAAAA,YAAU,KACT,OAAQm7B,GACP,IAAK,YACJC,EAAAA,GAAAA,OAAK,IACLC,EAAAA,GAAAA,WACA,MACD,IAAK,WACJD,EAAAA,GAAAA,OAAK,IACLE,EAAAA,GAAAA,QAAO,CAAC,EAAGt2C,GACX,MAED,SACCo2C,EAAAA,GAAAA,MAAK,CAAC,EAAGp2C,GAEX,GACE,CAACm2C,IAEJ,MAAMI,GAAuBr5C,EAAAA,EAAAA,cAC3B+2C,IACA5qC,EAAAA,EAAAA,QACC+rC,GACA,CAACoB,EAAkBC,IACdA,EACIA,EAAiBD,GAElBA,GAERvC,IAEF,CAACmB,IAGIvB,GAAe32C,EAAAA,EAAAA,cAA4C,CAACw5C,EAAcvqC,KAC/EkpC,GAAesB,IAAG,IAAWA,EAAK,CAACxqC,GAAKuqC,KAAgB,GACtD,IAEGxB,GAAe/vC,EAAAA,EAAAA,UAA2C,KAC/D,MAAMyxC,EAA2Blb,EAAqB,uCACtD,YAAiCt3B,IAA7BwyC,EACIA,ExEwiC4BC,MACrC,GACCp2C,OAAOq2C,OAAOv0C,OAASD,EAAcC,OACrC9B,OAAOq2C,OAAOt0C,QAAUF,EAAcE,QACtC/B,OAAOs2C,kBAAoBz0C,EAAcG,IACxC,CACD,MAAMu0C,EAAgB90C,EAAgB0K,WAAWqqC,GAAWA,EAAO90C,QAAUE,IAC7E,GAAI20C,EAAgB,EACnB,OAAO90C,EAAgB80C,EAAgB,GAAG70C,KAE5C,CACA,OAAOE,CAAc,EwEjjCbw0C,EAAwB,GAC7B,CAACnb,IAEEwb,GAA6B/xC,EAAAA,EAAAA,UAClC,KAAM,CAAG0uC,eAAcC,wBACvB,CAACD,IAGF,OACCx2C,IAAAA,cAAC85C,EAAAA,cAAe,CAACjB,UAAWK,GAC3Bl5C,IAAAA,cAACu2C,GAAsBrT,SAAQ,CAACp+B,MAAO+0C,GACtC75C,IAAAA,cAAC23C,GAAW,CAACE,aAAcA,IAC1Bl4C,GAEe,EErMPo6C,GAAoCA,MAChDp8B,EAAAA,EAAAA,YAAU,KACH,iBAAkBva,OAIvBspC,aAAasN,oBAFbj6C,QAAQuK,KAAK,sDAGd,GACE,IAEItK,IAAAA,cAAAA,IAAAA,SAAA,OCAFi6C,IAAyB5gC,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,6CAAAC,YAAA,gBAAjBJ,CAAiB,iFAIjClW,EAAgB,QAAU,yBAInC+2C,GAAuBA,KAC5B,MAAM9uC,EAAO+H,KACPrD,EAAS0D,KACTnQ,GAAWm9B,EAAAA,EAAAA,MACX2Z,GAAYryC,EAAAA,EAAAA,UACjB,KAAMM,EAAAA,EAAAA,MAAK0H,GAAS+c,GAAMzhB,EAAK,IAAIK,OAASohB,EAAE3gB,OAAMoF,OACpD,CAAClG,EAAM0E,IAER,OAAOqqC,GAAoC,MAAvB92C,GAAUC,SAC7BtD,IAAAA,cAACkgC,EAAAA,GAAQ,CAACF,OAAK,EAACI,QAAM,EAACD,KAAK,IAAIE,GAAI,IAAI8Z,MACrC,IAAI,EA4BT,GAzB6BC,KAC5B,MAAMC,EAAW7pC,IAAa9I,GAAMA,EAAEqI,MAAMG,UACtCJ,GAAShI,EAAAA,EAAAA,UACd,IAAM,KACF8L,EAAAA,EAAAA,KAAIymC,GAAW1oC,GACjB3R,IAAAA,cAAC+/B,EAAAA,GAAK,CAAC11B,IAAKsH,EAAK7C,GAAItG,KAAM,IAAImJ,EAAKL,SACnCtR,IAAAA,cAAC+M,GAAkB,CAAC1C,IAAKsH,EAAKzF,IAAKU,IAAK+E,EAAKzF,KAC5ClM,IAAAA,cAAC2R,EAAKJ,UAAS,YAKnB,CAAC8oC,IAGF,OACCr6C,IAAAA,cAACi6C,GAAsB,KACtBj6C,IAAAA,cAACkc,EAAAA,UAAS,CAACI,cAAc,cACxBtc,IAAAA,cAACigC,EAAAA,GAAM,KAAEnwB,GACT9P,IAAAA,cAACk6C,GAAgB,OAEM,E,eCzC3B,MAAMI,GAAiBjhC,GAAAA,QAAOkhC,IAAGhhC,WAAA,CAAAC,YAAA,wBAAAC,YAAA,eAAVJ,CAAU,4NACpBjS,GAAmBA,EAAM+F,KAAO,QAAU,SAajC,EAAGypC,WAAoBA,EAAMC,QAAQ2D,MAAMzD,UAKpD0D,GAAWA,EAAGtqC,YAC1B,MAAM8K,EAAUmmB,IAAe15B,GAAMA,EAAEuT,UAEjC2G,GAAU9Z,EAAAA,EAAAA,UAAQ,KAAM4yC,EAAAA,GAAAA,IAAoB,CAAEC,eAAgB,CAACxqC,EAAMuxB,QAAS,IAC9EkZ,EAAapqC,IAAa9I,GAAMA,EAAEqI,MAAMI,QACxC0qC,GAAgBh5B,EAAAA,EAAAA,MAChBvQ,GAAQxJ,EAAAA,EAAAA,UAAQ,KACrB,MAAM6J,GAAOvJ,EAAAA,EAAAA,MAAKwyC,GAAahzB,GAAMA,EAAE9Y,KAAOqB,EAAMuxB,MAAOn+B,EAAAA,EAAAA,YAAW4M,EAAMuxB,IAAK9Z,EAAEtW,SACnF,OAAIK,EAEF3R,IAAAA,cAAC+/B,EAAAA,GAAK,CAAC11B,IAAKsH,EAAK7C,GAAItG,KAAMmJ,EAAKL,OAC/BtR,IAAAA,cAAC+M,GAAkB,CAAC1C,IAAKsH,EAAK7C,GAAIlC,IAAK+E,EAAKzF,KAC3ClM,IAAAA,cAAC8iC,GAAa,CAACh0B,GAAIqB,EAAMrB,IACxB9O,IAAAA,cAAC2R,EAAKJ,UAAS,CAACspC,cAAeA,OAK7B,IAAI,GACT,CAAC1qC,EAAMrB,GAAIqB,EAAMuxB,IAAKkZ,EAAYC,IAmBrC,OAlBAl9B,EAAAA,EAAAA,YAAU,KACT,MAAMm9B,EAAWl5B,EAAQm5B,QAAO,EAAG13C,eAC9B,GAAGA,EAASC,WAAWD,EAASgN,SAAShN,EAASsnC,SAAWx6B,EAAMuxB,KACtEW,GAAYlyB,EAAMrB,GAAI,CAAE4yB,IAAK,GAAGr+B,EAASC,WAAWD,EAASgN,SAAShN,EAASsnC,QAChF,IAED,MAAO,KACNmQ,GAAU,CACV,GACC,CAAC3qC,EAAMuxB,IAAKvxB,EAAMrB,GAAI8S,KAEzBjE,EAAAA,EAAAA,YAAU,KACT,MAAMq9B,EAAIp5B,EAAQve,SACd,GAAG23C,EAAE13C,WAAW03C,EAAE3qC,SAAS2qC,EAAErQ,SAAWx6B,EAAMuxB,KACjD9f,EAAQ7Y,KAAKoH,EAAMuxB,IACpB,GACE,CAACvxB,EAAMuxB,IAAK9f,IAGd5hB,IAAAA,cAACs6C,GAAc,CAACntC,KAAM8N,IAAY9K,EAAMrB,IACvC9O,IAAAA,cAACi7C,EAAAA,GAAM,CAACr5B,QAASA,GAAUtQ,GACX,EC7Db4pC,IAAe7hC,EAAAA,GAAAA,SAAOkD,EAAAA,KAAIhD,WAAA,CAAAC,YAAA,0BAAAC,YAAA,gBAAXJ,CAAW,qQAgB7B,EAAG4C,YACJA,IACAnZ,EAAAA,GAAAA,KAAG,oCAKCq4C,IAAiB9hC,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,4BAAAC,YAAA,gBAAjBJ,CAAiB,uBAIlC+hC,IAAU/hC,EAAAA,GAAAA,SAAOzE,EAAAA,MAAK2E,WAAA,CAAAC,YAAA,qBAAAC,YAAA,gBAAZJ,CAAY,iCAElB,EAAG4C,YAAsBA,EAAS,UAAY,UAGlDo/B,IAAahiC,EAAAA,GAAAA,SAAO0C,EAAAA,MAAKxC,WAAA,CAAAC,YAAA,wBAAAC,YAAA,gBAAZJ,CAAY,8BAC5B,EAAGiiC,iBACJA,IACAx4C,EAAAA,GAAAA,KAAG,+DAMCy4C,IAAkBliC,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,6BAAAC,YAAA,gBAAjBJ,CAAiB,wEAI1B,EAAGu9B,WAAoBA,EAAMC,QAAQ2D,MAAMzD,UAG7CyE,GAAkFA,EAC9F1sC,KACAjD,OACA4P,QACAggC,eAEA,MAAMxgC,EAAUmmB,IAAe15B,GAAMA,EAAEuT,UACjCxO,EAAIyH,KACJ6B,GAAUlW,EAAAA,EAAAA,cACdu2C,IACKA,EAAMsF,kBACVtZ,GAAgBtzB,EACjB,GAED,CAACA,IAEI6sC,GAAW97C,EAAAA,EAAAA,cACfge,IACKA,EAAG69B,mBACP79B,EAAG4iB,kBACHmB,GAAW9yB,GACZ,GAED,CAACA,IAGI8sC,GAAUhhC,EAAAA,EAAAA,QAAuB,OAChCihC,EAAiBC,IAAsBr+B,EAAAA,EAAAA,WAAS,GACjDs+B,GAAoBnhC,EAAAA,EAAAA,UAkB1B,OAjBA+C,EAAAA,EAAAA,YAAU,KACLi+B,EAAQ3gC,UAAY8gC,EAAkB9gC,UACzC8gC,EAAkB9gC,QAAU,IAAI+gC,gBAAe,KAC9CC,uBAAsB,KACjBL,EAAQ3gC,SACX6gC,EAAmBF,EAAQ3gC,QAAQihC,YAAcN,EAAQ3gC,QAAQkhC,YAClE,GACC,IAEHJ,EAAkB9gC,QAAQmhC,QAAQR,EAAQ3gC,UAGpC,KACN8gC,EAAkB9gC,SAASohC,YAAY,IAEtC,CAACT,IAGH57C,IAAAA,cAAAA,IAAAA,SAAA,MACGy7C,GAAYz7C,IAAAA,cAACu7C,GAAe,MAC9Bv7C,IAAAA,cAACk7C,GAAY,CACZoB,KAAM,SACNjgC,YAAY,MACZC,cAAe,aACfvG,QAASA,EACT,cAAa,aAAajH,IAC1ByG,QAAS,CAAEoH,WAAY,cACvBV,OAAQhB,IAAYnM,GAEpB9O,IAAAA,cAACo7C,GAAO,CAACn/B,OAAQhB,IAAYnM,EAAIjD,KAAMA,EAAMgJ,KAAK,UAClD7U,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAO0W,EAAOyF,UAAU,MAAMq7B,SAAS,QAAQC,WAAYZ,GACnE57C,IAAAA,cAACq7C,GAAU,CACVxmC,KAAK,SACL2H,OAAO,UACPlP,MAAO2N,IAAYnM,EAAK,UAAY,YACpCwsC,YAAaO,EACbh4B,UAAU,YAETpI,IAIHzb,IAAAA,cAACm7C,GAAc,CAAC9+B,YAAa,MAAOnX,MAAO,OAC1ClF,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAO0H,EAAE,kBAAmB,aAAcyU,UAAU,OAC5DlhB,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/c,UAAU,wBACV44B,UAAU,YACV5wC,KAAK,QACLkK,QAAS4lC,EACT5nC,MAAO,CAAEwB,QAAS,WAAYrQ,MAAO,SAAUC,OAAQ,eAKzD,ECtICu3C,IAAYrjC,EAAAA,GAAAA,SAAOkD,EAAAA,KAAIhD,WAAA,CAAAC,YAAA,4BAAAC,YAAA,eAAXJ,CAAW,qKAahBsjC,GAAWA,KACvB,MAAM,OAAErb,EAAM,cAAED,GAAkBD,KAClC,OACCphC,IAAAA,cAAC08C,GAAS,CAACJ,KAAK,SAASn3C,OAAO,OAAOmX,cAAc,aAAawB,oBAAkB,GAClFwjB,KACChT,EAAAA,EAAAA,SAAQ+S,KACTztB,EAAAA,EAAAA,KAAIytB,GAAe,CAACQ,EAASnwB,IAC5B1R,IAAAA,cAACw7C,GAAW,CACXnxC,IAAKw3B,EACL/yB,GAAI+yB,EACJpmB,MAAO6lB,EAAOO,GAASpmB,MACvB5P,KAAMy1B,EAAOO,GAASh2B,KACtB4vC,SAAkB,IAAR/pC,MAGF,ECXDkrC,GAAoB,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,MAEjE,SAASC,GAAoB97B,GACnC,MAAM+7B,GAAY10C,EAAAA,EAAAA,MACjB,CACC,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,KAAM,MACP,CAAC,KAAM,QAEP20C,GAAYA,EAAQhjC,SAASgH,MAC5BrY,KAAK,IACR,OAAOo0C,GAAWE,OAAO,YAAc,EACxC,CAEA,SAASC,GACRl8B,EACAof,EACA+c,GAEA,MAAMC,EAAqB,CAC1Bl3C,IAAKk6B,EAAKl6B,IACVC,KAAMi6B,EAAKj6B,KACXf,OAAQg7B,EAAKh7B,OACbD,MAAOi7B,EAAKj7B,OAEb,GAAI6b,EAAOhH,SAAS,KAAM,CACzB,MAAMqjC,EAAmBjd,EAAKkd,UAAYH,EAAWI,QACrDH,EAAmBh4C,OAASg7B,EAAKh7B,OAASi4C,EAC1CD,EAAmBl3C,IAAMk6B,EAAKl6B,IAAMm3C,CACrC,CAOA,GANIr8B,EAAOhH,SAAS,OACnBojC,EAAmBh4C,OAAS+3C,EAAWI,QAAUnd,EAAKkd,WAEnDt8B,EAAOhH,SAAS,OACnBojC,EAAmBj4C,MAAQg4C,EAAWK,QAAUpd,EAAKqd,YAElDz8B,EAAOhH,SAAS,KAAM,CACzB,MAAM0jC,EAAkBtd,EAAKqd,WAAaN,EAAWK,QACrDJ,EAAmBj4C,MAAQi7B,EAAKj7B,MAAQu4C,EACxCN,EAAmBj3C,KAAOi6B,EAAKj6B,KAAOu3C,CACvC,CACA,OAAON,CACR,C,2NA+F6BhhB,GAAwB,CAAE8gB,4BC9HvD,MAAMS,IAAgBrkC,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,qCAAAC,YAAA,eAAjBJ,CAAiB,+CAMjCskC,GAAmBtkC,GAAAA,QAAOkhC,IAAGhhC,WAAA,CAAAC,YAAA,wCAAAC,YAAA,eAAVJ,CAAU,yEAQxB,EAAGukC,aAAuCA,IAC3C,EAAGC,YAAqBA,IACvB,EAAGC,aAAsBA,IACjC,EAAGC,eAAqCA,IACxC,EAAGC,0BACHA,GAAqBC,GAAKD,GAAqBE,KAChDp7C,EAAAA,GAAAA,KAAG,kCACqBk7C,GAAqBC,GAAK,EAAMD,GAAqBE,GAAK,KAI9EC,GAAkBA,EACvBp9B,SACAq9B,kBACAC,kBACAnhB,4BAEA,MAAMohB,GAAY1jC,EAAAA,EAAAA,QAAuB,MACnC2jC,EDCkBC,EACxBC,EACA19B,EACAsc,KAEA,MAAMqhB,GAA4B9jC,EAAAA,EAAAA,WAC3B+jC,EAA0BC,GAA+BzhB,GAG/DE,GAASghB,iBAAmB,kBAC5B,CAAC,EACD,CAAEnhB,sBAAuBG,GAASH,wBAE7B2hB,GAAyBjkC,EAAAA,EAAAA,QAAiC+jC,IAEhEhhC,EAAAA,EAAAA,YAAU,KACTkhC,EAAuB5jC,QAAU,IAAK0jC,EAA0B,GAC9D,CAACA,IAEJ,MAAMG,GAAgBj/C,EAAAA,EAAAA,cACrB,EAAGqF,QAAOC,SAAQc,MAAKC,WACtB,GAAIu4C,EAAmBxjC,QAAS,CAC/B,MAAMmjC,EAAkBK,EAAmBxjC,QACrC8jC,EAAmDF,EAAuB5jC,QAC1E+jC,EAAgBC,iBAAiBR,EAAmBxjC,SACpDikC,EAAYC,WAAWH,EAAcE,YAAc,EACnDziC,EAAW0iC,WAAWH,EAAcviC,WAAa,EACnDxW,GAAO,GAAKd,GAAU+5C,IACzBH,EAAuB55C,OAASA,EAChC45C,EAAuB94C,IAAMA,GAE1BC,GAAQ,GAAKhB,GAASuX,IACzBsiC,EAAuB75C,MAAQA,EAC/B65C,EAAuB74C,KAAOA,IAE/B8E,EAAAA,EAAAA,SAAQ+zC,GAAwB,CAACj6C,EAAOuF,KACvC4xB,GAA0BmiB,EAAiB/zC,EAA8BvF,EAAM,IAGhFs5C,EAAgBrqC,MAAM6I,OAAS,GAE/BwhC,EAAgBrqC,MAAM5L,MAAQ,GAC9B02C,EAAuB5jC,QAAU8jC,CAClC,IAED,CAACN,IAGIW,GAAcv/C,EAAAA,EAAAA,cAClBw/C,IACA,GAAIX,EAA0BzjC,QAAS,CACtC,MAAMkiC,EAAqBF,GAC1Bl8B,EACA29B,EAA0BzjC,QAC1BokC,GAEDP,EAAc3B,EACf,IAED,CAACp8B,EAAQ+9B,IAGJQ,GAAYz/C,EAAAA,EAAAA,cAAY,KAC7B87B,QAAgB50B,GAChB7C,SAASkpB,KAAKwQ,oBAAoB,YAAawhB,GAC/Cl7C,SAASkpB,KAAKwQ,oBAAoB,UAAW0hB,GACzCjiB,GAASghB,iBACZO,EAA4BC,EAAuB5jC,QACpD,GACE,CAACmkC,EAAa/hB,GAASghB,gBAAiBO,IAE3C,OAAO/+C,EAAAA,EAAAA,cACL0/C,IACA,IAAKA,EAAe7D,kBAAoB+C,EAAmBxjC,QAAS,CACnEskC,EAAeC,iBACf,MAAMC,EAAahB,EAAmBxjC,QAAQykC,wBAC9ChB,EAA0BzjC,QAAU,CACnC/V,MAAOu5C,EAAmBxjC,QAAQihC,YAClC/2C,OAAQs5C,EAAmBxjC,QAAQ0kC,aACnC15C,IAAKw4C,EAAmBxjC,QAAQ2kC,UAChC15C,KAAMu4C,EAAmBxjC,QAAQ4kC,WACjCxC,UAAWoC,EAAWx5C,IACtBu3C,WAAYiC,EAAWv5C,MAExBy1B,GAAgBkhB,GAAoB97B,IACpC7c,SAASkpB,KAAKuQ,iBAAiB,YAAayhB,GAC5Cl7C,SAASkpB,KAAKuQ,iBAAiB,UAAW2hB,EAC3C,IAED,CAACv+B,EAAQ09B,EAAoBW,EAAaE,GAC1C,EC3FqBd,CAAUJ,EAAiBr9B,EAAQ,CACxDs9B,kBACAnhB,0BAGK4iB,GAAQh4C,EAAAA,EAAAA,UAA2D,KACxE,OAAQiZ,GACP,IAAK,IACL,IAAK,IACJ,MAAO,CACN88B,OAAQ,OACRC,QAAS,WAEX,IAAK,IACL,IAAK,IACJ,MAAO,CACND,OAAQ,UACRC,QAAS,QAMX,QACC,MAAO,CACND,OAAQ,UACRC,QAAS,WAEZ,GACE,CAAC/8B,IAEEg/B,GAAYj4C,EAAAA,EAAAA,UAEhB,KACD,MAAMi2C,EAAgD,CAAC,EACjDC,EAAoE,CAAC,EAiB3E,OAhBIj9B,EAAOhH,SAAS,OACnBgkC,EAAU93C,IAAM,EAChB+3C,EAAoBE,EAAI,QAErBn9B,EAAOhH,SAAS,OACnBgkC,EAAUnhC,OAAS,EACnBohC,EAAoBE,EAAI,OAErBn9B,EAAOhH,SAAS,OACnBgkC,EAAU51C,MAAQ,EAClB61C,EAAoBC,EAAI,OAErBl9B,EAAOhH,SAAS,OACnBgkC,EAAU73C,KAAO,EACjB83C,EAAoBC,EAAI,QAElB,CAAEF,YAAWC,sBAAqB,GACvC,CAACj9B,IAEJ,OACC/gB,IAAAA,cAAC29C,GAAgB1oC,GAAA,CAChByd,IAAK4rB,GACDwB,EACAC,EAAS,CACbnC,QAASf,GAAoB97B,GAC7Bi/B,YAAazB,EACb,cAAa,oBAAoBx9B,MAChC,EAISk/B,GAAqBA,EACjC7B,kBACAz+C,WACA0+C,kBACAvhC,YAAW,EACXogB,2BACGgH,MAEH,MAAM6Y,GAAUj1C,EAAAA,EAAAA,UACf,IACC80C,GAAQhpC,KAAKmN,GACZ/gB,IAAAA,cAACm+C,GAAe,CACf9zC,IAAK,oBAAoB0W,IACzBA,OAAQA,EACRq9B,gBAAiBA,EACjBC,gBAAiBA,EACjBnhB,sBAAuBA,OAG1B,CAACkhB,EAAiBlhB,EAAuBmhB,IAG1C,OACCr+C,IAAAA,cAAC09C,GAAkBxZ,GAChBpnB,GAAYigC,EACbp9C,EACc,E,qCCtKlB,MAKA,GALkBugD,EAAGvgD,eACAwgD,EAAAA,GAAAA,IAAc,CAAE1jC,SAAU,KAAMyiC,UAAW,MAC1Cl/C,IAAAA,cAAAA,IAAAA,SAAA,KAAGL,GAAe,KC8DlCygD,GAA2B/mC,GAAAA,QAAOkhC,IAAGhhC,WAAA,CAAAC,YAAA,4CAAAC,YAAA,eAAVJ,CAAU,4HAQ/BtT,GAET,EAAGw7B,eACJA,IACAz+B,EAAAA,GAAAA,KAAG,qBAKCu9C,IAAchnC,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,+BAAAC,YAAA,eAAjBJ,CAAiB,4JArBjC,CACHlR,MAAO,IACPyU,OAAQ,MAwBN,EAAG1X,YACHA,IACDpC,EAAAA,GAAAA,KAAG,oBAMF,EAAGqC,aACHA,IACDrC,EAAAA,GAAAA,KAAG,qBASF,EAAGy9B,cACJA,IACAz9B,EAAAA,GAAAA,KAAG,yEAeCw9C,GAAqBjnC,GAAAA,QAAOkhC,IAAGhhC,WAAA,CAAAC,YAAA,sCAAAC,YAAA,eAAVJ,CAAU,4KAUzBtT,GACT,EAAGw6B,cACJA,IACAz9B,EAAAA,GAAAA,KAAG,yDAIF,EAAGy+B,eACJA,IACAz+B,EAAAA,GAAAA,KAAG,qBAKCy9C,IAAoBlnC,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,qCAAAC,YAAA,eAAjBJ,CAAiB,oBAIrCmnC,IAAQnnC,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,yBAAAC,YAAA,eAAjBJ,CAAiB,sQAjCiE,CAC/FlR,MAAO,IACPyU,OAAQ,MAoCN,EAAG1X,YACHA,IACDpC,EAAAA,GAAAA,KAAG,uCAMF,EAAGqC,aACHA,IACDrC,EAAAA,GAAAA,KAAG,mGAYe+C,EACDC,GAOhB,EAAGy6B,cACJA,IACAz9B,EAAAA,GAAAA,KAAG,8IASC29C,IAAcpnC,EAAAA,GAAAA,SAAOkD,EAAAA,KAAIhD,WAAA,CAAAC,YAAA,+BAAAC,YAAA,eAAXJ,CAAW,uCAKzBqnC,IAAuBrnC,EAAAA,GAAAA,SAAOkD,EAAAA,KAAIhD,WAAA,CAAAC,YAAA,wCAAAC,YAAA,eAAXJ,CAAW,mBAGlCsnC,IAAatnC,EAAAA,GAAAA,SAAOunB,EAAAA,YAAWrnB,WAAA,CAAAC,YAAA,8BAAAC,YAAA,eAAlBJ,CAAkB,4FAQ/BunC,IAAUvnC,EAAAA,GAAAA,SAAOkD,EAAAA,KAAIhD,WAAA,CAAAC,YAAA,2BAAAC,YAAA,eAAXJ,CAAW,MAU3B,SAASwnC,IAAgB,KACxBh1C,EAAI,MACJ9G,EAAK,SACL+7C,EAAQ,IACR50C,EAAG,QACH21B,IAEA,MAAMp1B,EAAIyH,KACJ4H,GAAUjc,EAAAA,EAAAA,cACdge,IACAA,EAAG4iB,kBACHmB,GAAWC,EAAQ,GAEpB,CAACA,IAEF,OACC7hC,IAAAA,cAACkc,EAAAA,UAAS,CAACG,YAAY,aAAaC,cAAc,aAAagZ,IAAK,UAClEzpB,GAAQ7L,IAAAA,cAAC4U,EAAAA,KAAI,CAAC/I,KAAMA,EAAMgJ,KAAM,QAASvH,MAAO,OAAQyG,MAAO,CAAEgtC,cAAe,UACjF/gD,IAAAA,cAACugD,GAAiB,CAAChrB,eAAgB,cAClCv1B,IAAAA,cAAC+b,EAAAA,KAAI,CAAClH,KAAM,SAAU2H,OAAQskC,EAAW,OAAS,UAAWxzC,MAAO,SAClEvI,GAEF/E,IAAAA,cAAC+b,EAAAA,KAAI,CAAClH,KAAM,QAAS2H,OAAQskC,EAAW,OAAS,UAAWxzC,MAAO,aACjEpB,GACAO,EAAE,iBAAkB,eAAgB,CACnCP,UAIJlM,IAAAA,cAAC4gC,EAAAA,WAAU,CAAC/0B,KAAM,eAAgBgJ,KAAM,QAASkB,QAAS+F,IAG7D,CAEA,SAASklC,GACRC,EACAC,EACAC,GAEA,MAAMC,EAAQF,EAAgBC,EAC9B,OAAIF,EAAoBG,EAChBA,EAAQ,EAAIA,EAAQ,EAErBH,CACR,CAEO,MAAM3G,GAAiBA,KAC7B,MAAM7tC,EAAIyH,MACJ,OAAEotB,EAAM,UAAEC,EAAS,SAAEhB,EAAQ,QAAEtlB,EAAO,cAAEomB,GAAkBD,KAE1DigB,GAAqBv5C,EAAAA,EAAAA,UAC1B,KACC8L,EAAAA,EAAAA,KACCytB,GACCQ,IAAO,CACP/yB,GAAI+yB,EACJ98B,MAAOu8B,EAAOO,GAASpmB,MACvB5P,KAAMy1B,EAAOO,GAASh2B,KACtBkK,QAASA,IAAMqsB,GAAgBP,GAC/Bif,SAAUjf,IAAY5mB,EACtBqmC,gBACCthD,IAAAA,cAAC6gD,GAAe,CACf97C,MAAOu8B,EAAOO,GAASpmB,MACvB5P,KAAMy1B,EAAOO,GAASh2B,KACtBi1C,SAAUjf,IAAY5mB,EACtB/O,IAAKmH,GAAOiuB,EAAOO,GAAS31B,IAAvBmH,IAA+BvH,QACpC+1B,QAASA,SAKd,CAACP,EAAQrmB,EAASomB,IAGbkgB,GAAW3mC,EAAAA,EAAAA,QAAuB,MAClC4mC,GAAoB5mC,EAAAA,EAAAA,QAAuB,OAC1C6mC,EAA+BC,GAAoCvkB,GAExEv4B,EAA0B,CAAC,IACtB+8C,EAA6BC,IAAkCnkC,EAAAA,EAAAA,UACrEgkC,GAEKI,GAAmCjnC,EAAAA,EAAAA,QAAO6mC,IACzCK,EAAUC,GCrQKC,EACtBC,EACA5kB,KAEA,MAAOykB,EAAUI,IAAezkC,EAAAA,EAAAA,WAAS,GACnC0kC,GAAmBvnC,EAAAA,EAAAA,SAAO,GAC1B8jC,GAA4B9jC,EAAAA,EAAAA,WAC3BqmC,EAAmBmB,GAAwBjlB,GACjDE,GAASghB,iBAAmB,gBAC5B,CAAC,EACD,CAAEnhB,sBAAuBG,GAASH,wBAE7BmlB,GAAkBznC,EAAAA,EAAAA,QAAiCqmC,GACnDqB,GAA6B1nC,EAAAA,EAAAA,UAC7B2nC,GAA8B3nC,EAAAA,EAAAA,SAAO,GAErC4nC,GAAc3iD,EAAAA,EAAAA,cACnB,EAAGqG,OAAMD,UACR,GAAIg8C,EAAiBhnC,QAAS,CAC7B,MAAMwnC,EAAgBR,EAAiBhnC,QACjCynC,EAA4CL,EAAgBpnC,QAC9DhV,GAAO,IACVy8C,EAAgBz8C,IAAMA,GAEnBC,GAAQ,IACXw8C,EAAgBx8C,KAAOA,IAExB8E,EAAAA,EAAAA,SAAQ03C,GAAiB,CAAC59C,EAAOuF,KAChC4xB,GAA0BwmB,EAAep4C,EAA8BvF,EAAM,IAE9Eu9C,EAAgBpnC,QAAUynC,CAC3B,IAED,CAACT,KAGFtkC,EAAAA,EAAAA,YAAU,KACT0kC,EAAgBpnC,QAAU,IAAKgmC,EAAmB,GAChD,CAACgB,EAAkBhB,IAEtB,MAAM0B,GAAe9iD,EAAAA,EAAAA,cAAau2C,IACjCA,EAAMoJ,iBACNt7C,SAASkpB,KAAKwQ,oBAAoB,QAAS+kB,EAAc,CAAEC,SAAS,GAAO,GACzE,IAEGxD,GAAcv/C,EAAAA,EAAAA,cAClBw/C,IAGA,GADAn7C,SAASkpB,KAAKuQ,iBAAiB,QAASglB,EAAc,CAAEC,SAAS,IAC7DlE,EAA0BzjC,SAAWgnC,EAAiBhnC,QAAS,CAClE,MAAM4nC,EACJZ,EAAiBhnC,QAAQ4nC,wBAAwBC,aACjDb,EAAiBhnC,QAAQ4nC,cAC1B3+C,SAASkpB,KAEJ21B,EAhFV,SACC5iB,EAMA6iB,EACA9F,GAEA,MAAM+F,EAAkBD,EAAetD,wBACjCwD,EAAiBD,EAAgBh9C,KAAO,EACxCk9C,EAAejG,EAAWI,QAAUnd,EAAKijB,aACzCC,EAAeljB,EAAKkd,UAAY8F,EAChCG,EAASnjB,EAAKl6B,IAAMk9C,EACpBI,EAAkBN,EAAgB/8C,MAAQ,EAC1Cs9C,EAAgBtG,EAAWK,QAAUpd,EAAKsjB,aAC1CC,EAAgBvjB,EAAKqd,WAAagG,EAClCG,EAAUxjB,EAAKj6B,KAAOs9C,EAC5B,MAAO,CACNt9C,KAAMw9C,EAAgBH,EAAkBI,EAAU,EAClD19C,IAAKo9C,EAAeH,EAAiBI,EAAS,EAEhD,CAyDwBM,CACnBlF,EAA0BzjC,QAC1B4nC,EACAxD,GAEDmD,EAAY,CACXt8C,KAAM68C,EAAY78C,KAClBD,IAAK88C,EAAY98C,MAElBs8C,EAA4BtnC,SAAU,CACvC,IAED,CAACgnC,EAAkBO,EAAaG,IAG3BkB,GAAahkD,EAAAA,EAAAA,cAAY,KAC1BqE,SAAS4/C,eAAiB5/C,SAAS4/C,yBAAyBhB,aAC/D5+C,SAAS4/C,cAAchoB,UAAUE,IAAI,wBAEtC93B,SAASkpB,KAAKuQ,iBAAiB,YAAayhB,GAC5CzjB,GAAgB,QAChBwmB,EAAiBlnC,SAAU,EAC3BinC,GAAY,EAAK,GACf,CAAC9C,IAEE2E,GAAclkD,EAAAA,EAAAA,cAAY,KAC3BqE,SAAS4/C,eAAiB5/C,SAAS4/C,yBAAyBhB,aAC/D5+C,SAAS4/C,cAAchoB,UAAUC,OAAO,wBAEzC73B,SAASkpB,KAAKwQ,oBAAoB,YAAawhB,GAC/CzjB,QAAgB50B,GAChBo7C,EAAiBlnC,SAAU,EAC3BinC,GAAY,EAAM,GAChB,CAAC9C,IAEEE,GAAYz/C,EAAAA,EAAAA,cAAY,KACzByiD,EAA2BrnC,SAC9BwQ,aAAa62B,EAA2BrnC,SAErCknC,EAAiBlnC,SACpB8oC,IAED7/C,SAASkpB,KAAKwQ,oBAAoB,UAAW0hB,GACzCjiB,GAASghB,iBAAmBkE,EAA4BtnC,UAC3DmnC,EAAqBC,EAAgBpnC,SACrCsnC,EAA4BtnC,SAAU,EACvC,GACE,CAAC8oC,EAAa1mB,GAASghB,gBAAiB+D,IAuB3C,MAAO,CAACN,GArBYjiD,EAAAA,EAAAA,cAClB0/C,IACA,IAAKA,EAAe7D,kBAAoBuG,EAAiBhnC,QAAS,CACjE,MAAMwkC,EAAawC,EAAiBhnC,QAAQykC,wBAC5ChB,EAA0BzjC,QAAU,CACnC/V,MAAO+8C,EAAiBhnC,QAAQihC,YAChC/2C,OAAQ88C,EAAiBhnC,QAAQ0kC,aACjCz5C,KAAM+7C,EAAiBhnC,QAAQ4kC,WAC/B55C,IAAKg8C,EAAiBhnC,QAAQ2kC,UAC9BvC,UAAWoC,EAAWx5C,IACtBu3C,WAAYiC,EAAWv5C,KACvBk9C,aAAc7D,EAAejC,QAC7BmG,aAAclE,EAAehC,SAE9B+E,EAA2BrnC,QAAU6I,WAAW+/B,EAjJhB,KAkJhC3/C,SAASkpB,KAAKuQ,iBAAiB,UAAW2hB,EAC3C,IAED,CAAC2C,EAAkB4B,EAAYvE,IAGF,EDwIS0C,CAAQT,EAAU,CACxDlD,gBAAiBz5C,IAGZo/C,GAA2Bl8C,EAAAA,EAAAA,UAChC,IAA4C,KAAtC+M,EAAAA,EAAAA,MAAK8sC,IACX,CAACA,IAEIsC,GAAen8C,EAAAA,EAAAA,UAAQ,KAAMwmB,EAAAA,EAAAA,SAAQgT,IAAS,CAACA,IAE/C4iB,GAAuBrkD,EAAAA,EAAAA,cAAY,KACxC6hD,EAAiC,CAAC,GAClCvf,IAAc,GACZ,CAACuf,KAEJ/jC,EAAAA,EAAAA,YAAU,KAELsmC,GACHvC,GAAkC/hC,IACjC,MAAMC,EAAW,IAAKD,GAGtB,cAFOC,EAAS1Z,YACT0Z,EAAS3Z,IACT2Z,CAAQ,GAEjB,GACE,CAACqkC,EAAcvC,KAElB/jC,EAAAA,EAAAA,YAAU,KACT,GAAI4jC,EAAStmC,QAAS,CACrB,MAAMkpC,EAAe5C,EAAStmC,QAC9BghB,GAA0BkoB,EAAc,QAASxC,EAA4Bz8C,OAC7E+2B,GAA0BkoB,EAAc,SAAUxC,EAA4Bx8C,QAC9E82B,GAA0BkoB,EAAc,MAAOxC,EAA4B17C,KAC3Eg2B,GAA0BkoB,EAAc,OAAQxC,EAA4Bz7C,KAC7E,IACE,CAACy7C,IAEJ,MAAMyC,GAAsBt8C,EAAAA,EAAAA,UAC3B,KACCmkC,EAAAA,EAAAA,WACC,KACC,GACCuV,EAAkBvmC,SAClBumC,EAAkBvmC,QAAQopC,aAAe,GACzC7C,EAAkBvmC,QAAQqpC,YAAc,EACvC,CACD,MAAMnH,EAA+C,CAAC,OACCp2C,IAAnD86C,EAAiC5mC,QAAQ/V,QAC5Ci4C,EAAmBj4C,MAAQ28C,EAAiC5mC,QAAQ/V,YAEb6B,IAApD86C,EAAiC5mC,QAAQ9V,SAC5Cg4C,EAAmBh4C,OAAS08C,EAAiC5mC,QAAQ9V,QAGtE,MAAMo/C,EAAiB/C,EAAkBvmC,aACYlU,IAAjD86C,EAAiC5mC,QAAQhV,MAC5Ck3C,EAAmBl3C,IAAM+6C,GACxBa,EAAiC5mC,QAAQhV,IACzCs+C,EAAeF,aACfr+C,EAAqBC,WAG+Bc,IAAlD86C,EAAiC5mC,QAAQ/U,OAC5Ci3C,EAAmBj3C,KAAO86C,GACzBa,EAAiC5mC,QAAQ/U,KACzCq+C,EAAeD,YACft+C,EAAqBE,OAGvB07C,EAA+BzE,EAChC,IAED,EACA,CAAEqH,SAAS,EAAOC,UAAU,KAE9B,KAGD9mC,EAAAA,EAAAA,YAAU,KACTva,OAAOu6B,iBAAiB,SAAUymB,GAC3B,KACNhhD,OAAOw6B,oBAAoB,SAAUwmB,EAAoB,IAExD,CAACA,KAEJzmC,EAAAA,EAAAA,YAAU,KACTkkC,EAAiC5mC,QAAU,IAAKwmC,GAE5CF,EAAStmC,SACRpG,EAAAA,EAAAA,MAAK4sC,GAAiC,EACzC2C,IAEAxC,EAA+B,CAAC,GAIjCA,EAA+B,IAAKH,IAG9B,KACN2C,EAAoBjiC,QAAQ,IAE3B,CAACs/B,EAA+B2C,IAEnC,MAAMM,GAAe7kD,EAAAA,EAAAA,cAGnB8kD,GAAavO,IACM,UAAfA,EAAMzqC,MAAqByqC,EAAMsF,kBACpCiJ,EAAQvO,EACT,GAED,IAGKzT,GAAe76B,EAAAA,EAAAA,UAAQ,IAAMmT,GAAWqmB,EAAOrmB,IAAU/J,SAAS,CAACowB,EAAQrmB,IAEjF,OACGgpC,GAAgBhpC,GACjBjb,IAAAA,cAAA,WACCA,IAAAA,cAACkgD,GAAS,KACTlgD,IAAAA,cAACsgD,GAAkB,CAAC/f,SAAUA,EAAUgB,UAAWA,EAAW7O,IAAK8uB,GAClExhD,IAAAA,cAACwgD,GAAK,CACL,cAAY,mBACZtrC,WAAY,UACZqgB,eAAe,QACfgL,SAAUA,EACV7N,IAAK6uB,EACLr8C,MAAOy8C,EAA4Bz8C,MACnCC,OAAQw8C,EAA4Bx8C,QAEpCnF,IAAAA,cAACigD,GAAkB,CAClB1qB,eAAgB,QAChB6oB,gBAAiBmD,EACjBlD,gBAAiBz5C,EACjBkY,SAAUyjB,GAEVvgC,IAAAA,cAACygD,GAAW,CACX,cAAY,cACZT,aAAezf,GAAYwhB,QAAuBh7C,GAElD/G,IAAAA,cAAC2U,EAAAA,QAAO,CAACjO,IAAI,cACZ1G,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,aAAc,cACvByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC2gD,GAAU,CACV9rC,KAAK,QACLhJ,KAAK,uBACLkK,QAAS2uC,EAAa1iB,QAIzBhiC,IAAAA,cAAC28C,GAAQ,MACT38C,IAAAA,cAAC4gD,GAAO,CAACrrC,QAAS,CAAE7O,IAAK,eACvBi8B,GACwB,iBAAjBA,GACP,kBAAmBA,GACnBA,EAAaiiB,eACZ5kD,IAAAA,cAAC2U,EAAAA,QAAO,CAACxM,MAAM,cACdnI,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,iBAAkB,eAC3ByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM,uBACNkK,QAAS2uC,EAAa3iB,QAK3B/hC,IAAAA,cAACkc,EAAAA,UAAS,CACToZ,IAAK,UACLjZ,YAAa,aACbnX,MAAO,MACPC,OAAQ,OAERnF,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,kBAAmB,mBAC5ByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAACihB,EAAAA,SAAQ,CAACxS,MAAO4yC,GAChBrhD,IAAAA,cAAC4gC,EAAAA,WAAU,CAAC/0B,KAAM,cAAekK,QAAS2uC,EAAapY,EAAAA,UAGzDtsC,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MACCi/C,EACGv3C,EACA,4BACA,yCAEAA,EAAE,2BAA4B,uCAElCyU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM,wBACNkK,QAAS2uC,EAAaR,GACtBpnC,SAAUknC,KAGZhkD,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MACCw7B,EACG9zB,EAAE,eAAgB,gBAClBA,EAAE,gBAAiB,iBAEvByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM00B,EAAW,kBAAoB,gBACrCxqB,QAAS2uC,EAAankB,EAAW4B,GAAeD,QAInDliC,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,mBAAoB,uBAC7ByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CAAC/0B,KAAK,eAAekK,QAAS2uC,EAAa5iB,SAIzD9hC,IAAAA,cAACsW,EAAAA,QAAO,CAACvC,MAAO,CAAE5O,OAAQ,cAC1BnF,IAAAA,cAAC0gD,GAAoB,CAAC5iC,oBAAkB,IACtClK,EAAAA,EAAAA,KAAI0tB,GAASpyB,GACblP,IAAAA,cAACy6C,GAAQ,CAACpwC,IAAK6E,EAAEJ,GAAIqB,MAAOjB,WAOlClP,IAAAA,cAAC6kD,GAAAA,EAAO,KACP7kD,IAAAA,cAACsgD,GAAkB,CAAC/f,SAAUA,EAAUgB,UAAWA,EAAW7O,IAAK8uB,GAClExhD,IAAAA,cAACwgD,GAAK,CACL,cAAY,mBACZtrC,WAAY,UACZqgB,eAAe,QACfgL,SAAUA,EACV7N,IAAK6uB,EACLr8C,MAAOy8C,EAA4Bz8C,MACnCC,OAAQw8C,EAA4Bx8C,QAEpCnF,IAAAA,cAACigD,GAAkB,CAClB1qB,eAAgB,QAChB6oB,gBAAiBmD,EACjBlD,gBAAiBz5C,EACjBkY,SAAUyjB,GAEVvgC,IAAAA,cAACygD,GAAW,CACX,cAAY,cACZT,aAAezf,GAAYwhB,QAAuBh7C,GAElD/G,IAAAA,cAAC2U,EAAAA,QAAO,CAACjO,IAAI,cACZ1G,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,aAAc,cACvByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC2gD,GAAU,CACV9rC,KAAK,QACLhJ,KAAK,uBACLkK,QAAS2uC,EAAa1iB,QAIzBhiC,IAAAA,cAAC28C,GAAQ,MACT38C,IAAAA,cAAC4gD,GAAO,CAACrrC,QAAS,CAAE7O,IAAK,eACvBi8B,GACwB,iBAAjBA,GACP,kBAAmBA,GACnBA,EAAaiiB,eACZ5kD,IAAAA,cAAC2U,EAAAA,QAAO,CAACxM,MAAM,cACdnI,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,iBAAkB,eAC3ByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM,uBACNkK,QAAS2uC,EAAa3iB,QAK3B/hC,IAAAA,cAACkc,EAAAA,UAAS,CACToZ,IAAK,UACLjZ,YAAa,aACbnX,MAAO,MACPC,OAAQ,OAERnF,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,kBAAmB,mBAC5ByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAACihB,EAAAA,SAAQ,CAACxS,MAAO4yC,GAChBrhD,IAAAA,cAAC4gC,EAAAA,WAAU,CAAC/0B,KAAM,cAAekK,QAAS2uC,EAAapY,EAAAA,UAGzDtsC,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MACCi/C,EACGv3C,EACA,4BACA,yCAEAA,EAAE,2BAA4B,uCAElCyU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM,wBACNkK,QAAS2uC,EAAaR,GACtBpnC,SAAUknC,KAGZhkD,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MACCw7B,EACG9zB,EAAE,eAAgB,gBAClBA,EAAE,gBAAiB,iBAEvByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM00B,EAAW,kBAAoB,gBACrCxqB,QAAS2uC,EAAankB,EAAW4B,GAAeD,QAInDliC,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,mBAAoB,uBAC7ByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CAAC/0B,KAAK,eAAekK,QAAS2uC,EAAa5iB,SAIzD9hC,IAAAA,cAACsW,EAAAA,QAAO,CAACvC,MAAO,CAAE5O,OAAQ,cAC1BnF,IAAAA,cAAC0gD,GAAoB,CAAC5iC,oBAAkB,IACtClK,EAAAA,EAAAA,KAAI0tB,GAASpyB,GACblP,IAAAA,cAACy6C,GAAQ,CAACpwC,IAAK6E,EAAEJ,GAAIqB,MAAOjB,WAOlClP,IAAAA,cAAC8kD,GAAAA,EAAM,KACN9kD,IAAAA,cAACogD,GAAwB,CAAC7e,UAAWA,EAAW7O,IAAK8uB,GACpDxhD,IAAAA,cAACqgD,GAAW,CACX,cAAY,mBACZnrC,WAAY,QACZqgB,eAAe,QACfgL,SAAUA,EACV7N,IAAK6uB,EACLr8C,MAAOy8C,EAA4Bz8C,MACnCC,OAAQw8C,EAA4Bx8C,QAEpCnF,IAAAA,cAACigD,GAAkB,CAClB1qB,eAAgB,QAChB6oB,gBAAiBmD,EACjBlD,gBAAiBz5C,EACjBkY,SAAUyjB,GAEVvgC,IAAAA,cAACygD,GAAW,CACX,cAAY,cACZvrC,WAAY,QACZ8qC,aAAezf,GAAYwhB,QAAuBh7C,GAElD/G,IAAAA,cAAC2U,EAAAA,QAAO,CAACjO,IAAI,cACZ1G,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,aAAc,cACvByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC2gD,GAAU,CACV90C,KAAK,uBACLkK,QAAS2uC,EAAa1iB,QAIzBhiC,IAAAA,cAAC28C,GAAQ,MACT38C,IAAAA,cAAC4gD,GAAO,CAACrrC,QAAS,CAAE7O,IAAK,eACvBi8B,GACwB,iBAAjBA,GACP,kBAAmBA,GACnBA,EAAaiiB,eACZ5kD,IAAAA,cAAC2U,EAAAA,QAAO,CAACxM,MAAM,cACdnI,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,iBAAkB,eAC3ByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM,uBACNkK,QAAS2uC,EAAa3iB,QAK3B/hC,IAAAA,cAACkc,EAAAA,UAAS,CACToZ,IAAK,UACLjZ,YAAa,aACbnX,MAAO,MACPC,OAAQ,OAERnF,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,kBAAmB,mBAC5ByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAACihB,EAAAA,SAAQ,CAACxS,MAAO4yC,GAChBrhD,IAAAA,cAAC4gC,EAAAA,WAAU,CAAC/0B,KAAM,cAAekK,QAAS2uC,EAAapY,EAAAA,UAGzDtsC,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MACCi/C,EACGv3C,EACA,4BACA,yCAEAA,EAAE,2BAA4B,uCAElCyU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM,wBACNkK,QAAS2uC,EAAaR,GACtBpnC,SAAUknC,KAGZhkD,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MACCw7B,EACG9zB,EAAE,eAAgB,gBAClBA,EAAE,gBAAiB,iBAEvByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM00B,EAAW,kBAAoB,gBACrCxqB,QAAS2uC,EAAankB,EAAW4B,GAAeD,QAInDliC,IAAAA,cAACw6B,EAAAA,QAAO,CACPz1B,MAAO0H,EAAE,mBAAoB,uBAC7ByU,UAAU,MACVpE,SAAUglC,GAEV9hD,IAAAA,cAAC4gC,EAAAA,WAAU,CAAC/0B,KAAK,eAAekK,QAAS2uC,EAAa5iB,SAIzD9hC,IAAAA,cAACsW,EAAAA,QAAO,CAACvC,MAAO,CAAE5O,OAAQ,cAC1BnF,IAAAA,cAAC0gD,GAAoB,CAAC5iC,oBAAkB,IACtClK,EAAAA,EAAAA,KAAI0tB,GAASpyB,GACblP,IAAAA,cAACy6C,GAAQ,CAACpwC,IAAK6E,EAAEJ,GAAIqB,MAAOjB,aASpC,IAAI,EEzvBN,GAb6B61C,EAAGplD,eAC/B,MAAMqlD,GAAaC,EAAAA,EAAAA,iBAEbngD,GAAQgD,EAAAA,EAAAA,UACb,KAAM,CACLmlC,SAAyB,WAAf+X,KAEX,CAACA,IAGF,OAAOhlD,IAAAA,cAACmtC,GAAajK,SAAQ,CAACp+B,MAAOA,GAAQnF,EAAiC,EC1B/E,IAAIulD,GACJ,SAAS,KAAa,OAAO,GAAW57B,OAAO1E,OAAS0E,OAAO1E,OAAOugC,OAAS,SAAU1Y,GAAK,IAAK,IAAIpsB,EAAI,EAAGA,EAAI+kC,UAAUvvC,OAAQwK,IAAK,CAAE,IAAI5T,EAAI24C,UAAU/kC,GAAI,IAAK,IAAIwM,KAAKpgB,GAAG,CAAG,GAAE44C,eAAeC,KAAK74C,EAAGogB,KAAO4f,EAAE5f,GAAKpgB,EAAEogB,GAAK,CAAE,OAAO4f,CAAG,EAAG,GAAS8Y,MAAM,KAAMH,UAAY,CAEnR,MAOA,GAPoBh+C,GAAsB,gBAAoB,MAAO,GAAS,CAC5Eo+C,MAAO,6BACP9qB,KAAM,eACN+qB,QAAS,eACRr+C,GAAQ89C,KAAUA,GAAqB,gBAAoB,OAAQ,CACpE9V,EAAG,o6D,4NCcqB/1B,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,qCAAAC,YAAA,gBAAjBJ,CAAiB,6FACV,EAAGu9B,WAAoBA,EAAMC,QAAQ6O,MAAM3O,UAE7D,EAAGH,QAAO1zB,UAAmB0zB,EAAMC,QAAQ3zB,EAAO,QAAU,SAAS6zB,UAGpE,EAAGH,QAAO1zB,UAAmB0zB,EAAMC,QAAQ3zB,EAAO,QAAU,SAAS8zB,QClB9E,MDsBM2O,GAAiBA,KAC7B,MAAMC,EAAetb,KACf9zB,EAAchG,IAAa9I,GAAMA,EAAEqI,MAAMM,UACxCtC,EAAQD,GAAgBO,KACzBiE,GAAaxK,EAAAA,EAAAA,UAClB,IAAM0O,EAAYpO,MAAMqO,GAAMA,EAAEnF,QAAUvD,KAC1C,CAACA,EAAQyI,KAGH0M,EAAM0X,IAAWnd,EAAAA,EAAAA,WAAS,GAE3BooC,GAAgB/9C,EAAAA,EAAAA,UACrB,IACC0O,EAAY5C,KACX,EAAG9E,KAAI/J,QAAO8G,OAAMyF,YAAO,CAC1BxC,KACA/J,QACA8G,OACAkK,QAASA,KAGRi1B,GAAY,CAAE15B,MAAO3P,EAAe6G,KAAM,KAC1CsF,EAAawD,EAAM,OAIvB,CAACkF,EAAa1I,KAGf6P,EAAAA,EAAAA,YAAU,KAIRioC,GAAct0C,OACdvD,IAAW63C,EAAat0C,OACxBkF,EAAYpO,MAAMqO,GAAMA,EAAEnF,QAAUs0C,EAAat0C,SAEjDxD,EAAa83C,EAAat0C,MAC3B,GACE,CAACgB,EAAYvE,EAAQyI,EAAa1I,EAAc83C,GAAct0C,QAEjE,MAAMw0C,GAAejmD,EAAAA,EAAAA,cAAY,KAChC+6B,GAAQ,EAAK,GACX,IAEGmrB,GAAgBlmD,EAAAA,EAAAA,cAAY,KACjC+6B,GAAQ,EAAM,GACZ,IAEH,OAAKtoB,EAMJtS,IAAAA,cAAA,OAAK+T,MAAO,CAAE7O,MAAO,OAAQC,OAAQ,OAAQ2G,QAAS,SACrD9L,IAAAA,cAACihB,EAAAA,SAAQ,CACRxS,MAAOo3C,EACPzkC,OAAQ0kC,EACRhqC,QAASiqC,EACThyC,MAAO,CACN7O,MAAO,OACPC,OAAQ,OACR2G,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACfI,eAAgB,kBAGjB5V,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACftQ,MAAO,OACPC,OAAQ,OACRyQ,eAAgB,gBAChBO,gBAAiB6vC,GAAAA,KAGlBhmD,IAAAA,cAACyV,GAAAA,EAAU,CAACC,QAAQ,QAAQ3B,MAAO,CAAE4B,WAAY,SAC/CrD,GAAYvN,OAGd/E,IAAAA,cAAC4U,EAAAA,KAAI,CACJC,KAAK,QACLhJ,KAAMqX,EAAO,mBAAqB,qBAClC5V,MAAO4V,EAAO+iC,GAAAA,GAA4BC,GAAAA,GAC1CnyC,MAAO,CAAEoQ,YAAa,YAtCnB,IA0CD,E,eEtFR,MAAMgiC,IAAqB9sC,EAAAA,GAAAA,SAAOunB,EAAAA,YAAWrnB,WAAA,CAAAC,YAAA,iCAAAC,YAAA,gBAAlBJ,CAAkB,gFAUvC+sC,IAAkB/sC,EAAAA,GAAAA,SAAOgtC,EAAAA,WAAU9sC,WAAA,CAAAC,YAAA,8BAAAC,YAAA,gBAAjBJ,CAAiB,uGAMzB,EAAGu9B,QAAO95B,cACvBA,EAAW,QAAU,6BAKlBwpC,IAAkBjtC,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,8BAAAC,YAAA,gBAAjBJ,CAAiB,mFAU5BktC,GAAYA,KACxB,MAAMzhB,GAAWlqB,EAAAA,EAAAA,QAAyB,MACpCnO,EAAIyH,MACHsyC,EAAmBC,GAAwBtpB,GACjDx4B,EACA,KAEM+hD,EAAYC,IAAiBlpC,EAAAA,EAAAA,UAAiB,IAC/CmE,GAAUC,EAAAA,EAAAA,OACT+kC,GAA4Bv4C,MAC7B,YAAET,EAAW,MAAEJ,EAAK,eAAEC,EAAc,kBAAEE,EAAiB,QAAED,GAAYH,KACrEs5C,EAAUr2C,IAAa9I,GAAMA,EAAEqI,MAAMM,SACrCy2C,GAAch/C,EAAAA,EAAAA,UACnB,IACC++C,EAAQz+C,MAAK,EAAGkJ,WAAYA,IAAUs1C,KAA2B7hD,OACjE6hD,GACD,CAACA,EAA0BC,KAGrBE,EAAUC,IAAevpC,EAAAA,EAAAA,WAAS,IAElC4f,EAAS4pB,IAAcxpC,EAAAA,EAAAA,UAAyB,KAEhDypC,EAAeC,IAAoB1pC,EAAAA,EAAAA,WAAS,IAE5C2pC,EAAkBC,IAAuB5pC,EAAAA,EAAAA,UAAsBjQ,GAEhE85C,GAAYx/C,EAAAA,EAAAA,UACjB,IACCs/C,EAAiBvxC,OAAS,GACzBivB,EAAS7pB,SAASnW,OAASggC,EAAS7pB,SAASnW,OAAO+Q,OAAS,GAC/D,CAACuxC,EAAiBvxC,SAEb0xC,GAAc1nD,EAAAA,EAAAA,cAAY,KAC3BilC,EAAS7pB,UACZ6pB,EAAS7pB,QAAQnW,MAAQ,GACzBggC,EAAS7pB,SAASg8B,SAEnB+P,GAAY,GACZK,EAAoB,IACpB15C,GAAkB,GAClBC,EAAY,IACZ+4C,EAAc,GAAG,GACf,CAACh5C,EAAmBC,IAEjB45C,GAAW3nD,EAAAA,EAAAA,cAAY,KAC5B+N,GAAa65C,IACZ,MAAM/0B,EAAMoS,GAAU7pB,QAItB,GAHIyX,IACHA,EAAI5tB,MAAQ,IAET4hD,EAAW7wC,OAAS,EAAG,CAC1B,MAAM6xC,EAAyC,IAC3CN,MACAxzC,EAAAA,EAAAA,KACF8yC,EAAWl6C,MAAM,MACjB,CAACzH,EAAO+J,KAAE,CACTA,GAAI,GAAGA,IACP/J,QACA4iD,WAAW,OAMd,OAFAN,EAAoBK,GACpBf,EAAc,KACP36C,EAAAA,EAAAA,QACN07C,GACA,CAACz7C,EAAK27C,MAEHh5C,EAAAA,EAAAA,MACA64C,GACCI,GAAqBA,EAAiB9iD,QAAU6iD,EAAa7iD,SAG/DkH,EAAIlD,KAAK6+C,GAEH37C,KAERgU,EAAAA,EAAAA,QAAOwnC,GAAeI,IACrBj5C,EAAAA,EAAAA,MACCw4C,GACCU,GAAoBA,EAAgB/iD,QAAU8iD,EAAiB9iD,UAIpE,CAIA,OAFA4hD,EAAc,KAEP36C,EAAAA,EAAAA,QACNo7C,GACA,CAACn7C,EAAK67C,MAEHl5C,EAAAA,EAAAA,MACA64C,GACCI,GAAqBA,EAAiB9iD,QAAU+iD,EAAgB/iD,SAGlEkH,EAAIlD,KAAK++C,GAEH77C,KAGRgU,EAAAA,EAAAA,QAAOwnC,GAAeI,IACrBj5C,EAAAA,EAAAA,MACCw4C,GACCU,GAAoBA,EAAgB/iD,QAAU8iD,EAAiB9iD,UAGlE,IAGF6c,EAAQ7Y,KAAK,IAAIpH,IAAgB,GAC/B,CAACiM,EAAagU,EAAS8kC,EAAYU,IAEhCW,GAAiBjgD,EAAAA,EAAAA,UACtB,KACCmY,EAAAA,EAAAA,QAAOumC,GAAoB5+B,GAAMA,EAAE1b,MAAQ06C,IACzCoB,UACAp0C,KACC/E,IAAI,IACDA,EACHiO,SAAUrP,EACVsI,QAASA,KACR,MAAM6xC,EAA0B,IAAK/4C,EAAM84C,WAAW,EAAO5xC,aAAShP,GACtEsgD,GAAqB1nC,GAAc,IAAIA,EAAWioC,IAAc,OAIrE,CAACpB,EAAmBI,EAA0Bn5C,IAGzCw6C,GAAgBpoD,EAAAA,EAAAA,cACrB,CAACqoD,EAAqBC,KACjBD,EAAYryC,OAAS,EACxBoxC,EACCc,EACE9nC,QACCmoC,GACAF,GACAE,EAAWrjD,MAAMgV,SAASmuC,MACzBt5C,EAAAA,EAAAA,MAAKu5C,GAAapzC,GAAcA,EAAUjQ,QAAUsjD,EAAWrjD,UAEjEsjD,MAAM,EAAG,IAGZpB,EAAWc,EAAeM,MAAM,EAAG,GACpC,GAED,CAACN,IAGIO,GAAgBzoD,EAAAA,EAAAA,cACpB0oD,IAIA,MAAMC,EAAgBD,EAASA,EAAS1yC,OAAS,IAAI9Q,MAEpDyjD,GACyB,iBAAlBA,GACP5B,KACCx+C,EAAAA,EAAAA,MAAK2/C,GAAiBK,GAAeA,EAAWrjD,QAAUyjD,KAE3D/B,GAAsB9mC,GAQd,IAAIA,EAPyB,CACnC7a,MAAO0jD,EACPzjD,MAAOyjD,EACP38C,KAAM,eACNK,IAAK06C,EACL93C,GAAI05C,MAOPnB,EAAoBkB,EAAwB,GAE7C,CAACR,EAAgBnB,EAA0BH,IAGtCgC,GAAc5oD,EAAAA,EAAAA,cAClBge,IACKA,EAAGqqC,YAGPlB,GAAY,GAFZA,GAAY,GAIbL,EAAc9oC,EAAGqqC,aAAe,IAChCD,EAAcpqC,EAAGqqC,aAAe,GAAI16C,EAAM,GAE3C,CAACA,EAAOy6C,KAGTtqC,EAAAA,EAAAA,YAAU,KACT,GAAIipC,EAA0B,CAC7B,MAAM8B,GAAczoC,EAAAA,EAAAA,QACnB8nC,GACCK,GAAeA,EAAWl8C,MAAQ06C,IAClCyB,MAAM,EAAG,GAEXpB,EAAWyB,EACZ,IACE,CAACX,EAAgBnB,KAEChsC,EAAAA,EAAAA,QAAuB,MAA5C,MACM+tC,GAAW9oD,EAAAA,EAAAA,cAAY,IAAMsnD,GAAiB,IAAO,IACrDyB,GAAc/oD,EAAAA,EAAAA,cAAY,IAAMsnD,GAAiB,IAAQ,KAE/DxpC,EAAAA,EAAAA,YAAU,KACT,MAAM+U,EAAMoS,EAAS7pB,QACf4tC,EAAoBhrC,IACV,UAAXA,EAAGxT,MACNm9C,IACAoB,IACD,EAMD,OAJIl2B,GACHA,EAAIiL,iBAAiB,QAASkrB,GAGxB,KACFn2B,GACHA,EAAIkL,oBAAoB,QAASirB,EAClC,CACA,GACC,CAACrB,EAAUoB,IAEd,MAAME,GAAiBhhD,EAAAA,EAAAA,UAAQ,IAAMu1B,EAAQxnB,QAAU,GAAKkxC,GAAU,CAAC1pB,EAAS0pB,IAE1EgC,GAAcjhD,EAAAA,EAAAA,UACnB,IACCo/C,GAAiBN,EACdn6C,EAAE,4BAA6B,qDAC/BA,EAAE,0BAA2B,uBAAwB,CACrDsB,OAAQ+4C,KAEZ,CAACF,EAA0BM,EAAeJ,EAAar6C,IAGlDu8C,GAAyBlhD,EAAAA,EAAAA,UAC9B,IACCw/C,GAAaP,EACVt6C,EAAE,eAAgB,sBAClBA,EAAE,uBAAwB,kCAC9B,CAAC66C,EAAW76C,EAAGs6C,IAGVkC,GAA2BnhD,EAAAA,EAAAA,UAChC,KAAOi/C,IAAoBO,GAC3B,CAACA,EAAWP,IAGPmC,GAAwBphD,EAAAA,EAAAA,UAAQ,KAChCmhD,GAA4B7B,EAAiBvxC,OAAS,EACnDpJ,EAAE,eAAgB,gBAEtBy6C,EACIz6C,EACN,mCACA,kDAGEe,EAAMqI,OAAS,EACXpJ,EAAE,6BAA8B,uCAEjCA,EAAE,8BAA+B,yCACtC,CAACw8C,EAA0B7B,EAAiBvxC,OAAQqxC,EAAe15C,EAAMqI,OAAQpJ,IAE9E08C,GAAYtpD,EAAAA,EAAAA,cAChBupD,IAGA,GAFApC,GAAY,GACZL,EAAc,IACVC,EAA0B,CAC7B,MAAM8B,GAAczoC,EAAAA,EAAAA,QACnB8nC,GACCK,GAAeA,GAAYl8C,MAAQ06C,IACnCyB,MAAM,EAAG,GAEXpB,EAAWyB,EACZ,CACA,MAAO,CACN3jD,MAA0B,iBAAZqkD,EAAuBA,EAAU,GAC/CtkD,MAAOskD,EACPzB,WAAW,EACX,GAEF,CAACI,EAAgBnB,KAGlBjpC,EAAAA,EAAAA,YAAU,KACT0pC,GAAoBzzC,EAAAA,EAAAA,KAAIpG,GAAQuH,IAAS,IAAWA,EAAW+H,SAAUrP,MAAmB,GAC1F,CAACA,EAAgBD,IAEpB,MAAO67C,EAAOC,IAAY7rC,EAAAA,EAAAA,WAAS,GAQnC,OANAE,EAAAA,EAAAA,YAAU,KACL4rC,GAAAA,IACHD,GAAS,EACV,GACE,CAACC,GAAAA,KAGHvpD,IAAAA,cAAA,OAAK+T,MAAO,CAAE7O,MAAO,OAAQC,OAAQ,SACpCnF,IAAAA,cAAC6kD,GAAAA,EAAO,KACP7kD,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACT5G,MAAO,OACPC,OAAQ,OACRqQ,cAAe,SACfI,eAAgB,SAChBsO,WAAY,WAGblkB,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACC,GAAI,CAAEinC,SAAU,OAAQ9/B,SAAU,UAClDzc,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,SAAQJ,EACR/zC,GAAI,CACHpQ,MAAO,OACPC,OAAQ,OACRukD,wBAAyB,IACzBC,qBAAsB,IACtBC,oBAAqB,OACrBC,uBAAwB,SAGzB7pD,IAAAA,cAAC2lD,GAAc,QAGjB3lD,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,SAAQJ,EACR/zC,GAAI,CACHpQ,MAAO,OACPC,OAAQ,OACR0kD,uBAAwB,IACxBD,oBAAqB,IACrBzzC,gBAAiB1I,EAAiB,QAAU,UAG7CzN,IAAAA,cAACsmD,GAAe,CAACjqC,YAAY,cAC5Brc,IAAAA,cAAComD,GAAe,CACftpC,SAAUrP,EACVq3B,SAAUA,EACVhgC,MAAOsiD,EACPz4C,MAAOw6C,EACP9rB,QAASA,EACT0rB,YAAaA,EACbe,mBAAmB,EACnBC,WAAY,CACX,CAAE1/C,IAAK,QAAS2/C,SAAS,GACzB,CAAE3/C,IAAK,IAAK2/C,SAAS,GACrB,CAAE3/C,IAAK,IAAK2/C,SAAS,IAEtBpsC,SAAU0qC,EACVG,YAAaA,EACbwB,oBAAqB,EACrBC,OAAQtB,EACRuB,QAASxB,EACTG,eAAgBA,EAChBsB,oBAAoB,EACpB9N,KAAM,cAKVt8C,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAAA,OACC+T,MAAO,CACN5O,OAAQ,OACRD,MAAO,OACP4G,QAAS,OACT0J,cAAe,MACfG,WAAY,SAGb3V,IAAAA,cAAA,YACGipD,GACDjpD,IAAAA,cAACwpD,GAAAA,EAAI,CAACC,SAAQJ,EAAsB/zC,GAAI,CAAE+0C,aAAc,QACvDrqD,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAOikD,EAAwB9nC,UAAU,UACjDlhB,IAAAA,cAACmmD,GAAkB,CAClBtxC,KAAK,QACLy1C,WAAY,CACXC,SAAU,QACVC,YAAa,SAEd1tC,SAAUmsC,EACVp9C,KAAK,mBACL4wC,UAAWwJ,GAAAA,GACXlwC,QAASwxC,OAMdvnD,IAAAA,cAAA,WACCA,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,SAAQJ,EACR/zC,GAAI,CACH+0C,aAAc,MACdv+C,QAAS,OACT0J,cAAe,SACf0O,WAAY,SACZtO,eAAgB,SAChB1Q,MAAO,OACPC,OAAQ,OACRgR,gBAAiB6vC,GAAAA,GACjBrwC,WAAY,SAGb3V,IAAAA,cAACw6B,EAAAA,QAAO,CACP+hB,SAAS,OACTz/B,SAAUrP,EACV1I,MAAOmkD,EACPhoC,UAAU,UAEVlhB,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/rB,KAAK,QACLy1C,WAAY,CACXC,SAAU,QACVC,YAAa,SAEd3+C,KAAK,SACLiR,SAAUmsC,EACVxM,UACCwM,EACGhD,GAAAA,GACAC,GAAAA,GAEJnwC,QAASyxC,YAUlBxnD,IAAAA,cAACkgD,GAAS,KACTlgD,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACT5G,MAAO,OACPC,OAAQ,OACRqQ,cAAe,SACfI,eAAgB,SAChBsO,WAAY,WAGblkB,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACC,GAAI,CAAEinC,SAAU,OAAQ9/B,SAAU,UAClDzc,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,SAAQJ,EACR/zC,GAAI,CACHpQ,MAAO,OACPC,OAAQ,OACRukD,wBAAyB,IACzBC,qBAAsB,IACtBC,oBAAqB,OACrBC,uBAAwB,SAGzB7pD,IAAAA,cAAC2lD,GAAc,QAGjB3lD,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,SAAQJ,EACR/zC,GAAI,CACHpQ,MAAO,OACPC,OAAQ,OACR0kD,uBAAwB,IACxBD,oBAAqB,IACrBzzC,gBAAiB1I,EAAiB,QAAU,UAG7CzN,IAAAA,cAACsmD,GAAe,CAACjqC,YAAY,cAC5Brc,IAAAA,cAAComD,GAAe,CACftpC,SAAUrP,EACVq3B,SAAUA,EACVhgC,MAAOsiD,EACPz4C,MAAOw6C,EACP9rB,QAASA,EACT0rB,YAAaA,EACbe,mBAAmB,EACnBC,WAAY,CACX,CAAE1/C,IAAK,QAAS2/C,SAAS,GACzB,CAAE3/C,IAAK,IAAK2/C,SAAS,GACrB,CAAE3/C,IAAK,IAAK2/C,SAAS,IAEtBpsC,SAAU0qC,EACVG,YAAaA,EACbwB,oBAAqB,EACrBC,OAAQtB,EACRuB,QAASxB,EACTG,eAAgBA,EAChBsB,oBAAoB,EACpB9N,KAAM,cAKVt8C,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAAA,OACC+T,MAAO,CACN5O,OAAQ,OACRD,MAAO,OACP4G,QAAS,OACT0J,cAAe,MACfG,WAAY,SAGb3V,IAAAA,cAAA,YACGipD,GACDjpD,IAAAA,cAACwpD,GAAAA,EAAI,CAACC,SAAQJ,EAAsB/zC,GAAI,CAAE+0C,aAAc,QACvDrqD,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAOikD,EAAwB9nC,UAAU,UACjDlhB,IAAAA,cAACmmD,GAAkB,CAClBtxC,KAAK,QACLy1C,WAAY,CACXC,SAAU,QACVC,YAAa,SAEd1tC,SAAUmsC,EACVp9C,KAAK,mBACL4wC,UAAWwJ,GAAAA,GACXlwC,QAASwxC,OAMdvnD,IAAAA,cAAA,WACCA,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,SAAQJ,EACR/zC,GAAI,CACH+0C,aAAc,MACdv+C,QAAS,OACT0J,cAAe,SACf0O,WAAY,SACZtO,eAAgB,SAChB1Q,MAAO,OACPC,OAAQ,OACRgR,gBAAiB6vC,GAAAA,GACjBrwC,WAAY,SAGb3V,IAAAA,cAACw6B,EAAAA,QAAO,CACP+hB,SAAS,OACTz/B,SAAUrP,EACV1I,MAAOmkD,EACPhoC,UAAU,UAEVlhB,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/rB,KAAK,QACLy1C,WAAY,CACXC,SAAU,QACVC,YAAa,SAEd3+C,KAAK,SACLiR,SAAUmsC,EACVxM,UACCwM,EACGhD,GAAAA,GACAC,GAAAA,GAEJnwC,QAASyxC,YAUb,E,gDC/nBD,MAAMiD,IAAqB5jD,EAAAA,EAAAA,KAAAA,EAA2B6D,IAAG,CAC/DggD,KAAM,SACNzvC,aAASlU,EACT4jD,mBAAmB,EACnBlxB,QAAUixB,GACThgD,GAAKhD,IAAC,CAAQgjD,OAAMC,kBAA4B,SAATD,GAA0BhjD,EAAEijD,sBACpEC,WAAa3vC,GAAkBvQ,EAAI,CAAEuQ,YACrC4vC,qBAAuBF,GAAqCjgD,EAAI,CAAEigD,0BCEtDG,GAAYA,CAACC,EAAmBC,KAC5CC,EAAAA,EAAAA,cAAaF,EAAIC,GAAIn1C,OAAS,EAElBq1C,GAAaA,CACzBv5C,EACAw5C,KAEA,MAAMC,EAAoB9hC,OAAOC,QAAOqf,EAAAA,EAAAA,MAAKuiB,EAAa,cAAgB,CAAC,GAC3E,OAAIx5C,EAAKw8B,iBAAyB2c,GAAUM,EAAmBz5C,EAAKw8B,kBAChEx8B,EAAKu8B,iBAAwB4c,GAAUM,EAAmBz5C,EAAKu8B,gBACxD,EAECmd,GAAkBA,KAC9B,MAAMC,EAAe96C,IAAa9I,GAAMA,EAAEqI,MAAMK,aAE1C+6C,EAAc7gB,KACpB,OAAOxiC,EAAAA,EAAAA,UACN,KAAMmY,EAAAA,EAAAA,QAAOqrC,GAAe1jC,GAAMsjC,GAAWtjC,EAAGujC,MAChD,CAACA,EAAaG,GACd,ECfIC,IAAmBlyC,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,wCAAAC,YAAA,cAAjBJ,CAAiB,uFAGhC,EAAGmyC,mBAA6BA,EAAgB,OAAS,SAK7DC,GAA4DA,EAAGN,kBACpE,MAAMO,EAASjB,IAAoB/iD,GAAMA,EAAEijD,oBACrCgB,EAAYlB,IAAoB/iD,GAAMA,EAAEmjD,uBACxCe,GAAmB/rD,EAAAA,EAAAA,cAAY,IAAM8rD,GAAWD,IAAS,CAACA,EAAQC,IAClEE,EAAoBr7C,IAAa9I,GAAMA,EAAEqI,MAAME,eAC/C67C,EAA6Bt7C,IAAa9I,GAAMA,EAAEqI,MAAMQ,0BACxDw7C,GAAcjkD,EAAAA,EAAAA,UACnB,KACCsL,EAAAA,EAAAA,SACC6M,EAAAA,EAAAA,QAAO6rC,GAA6BlkC,GAAMsjC,GAAWtjC,EAAGujC,KACxD,aAEF,CAACA,EAAaW,IAMf,OAJiBhkD,EAAAA,EAAAA,UAChB,KAAMyH,EAAAA,EAAAA,WAAUs8C,GAAoBl6C,GAASA,EAAK7C,KAAOq8C,GAAar8C,KAAM,GAC5E,CAACq8C,GAAar8C,GAAI+8C,IAED,KACjB7rD,IAAAA,cAAAA,IAAAA,SAAA,KACCA,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,SACpClF,IAAAA,cAACurD,GAAgB,CAChB,cAAY,4BACZC,cAAeE,EACfvvC,KAAK,OACLG,cAAc,gBACdvG,QAAS21C,OAAS3kD,EAAY6kD,GAE9B5rD,IAAAA,cAACkc,EAAAA,UAAS,CAACI,cAAc,cACxBtc,IAAAA,cAACigC,EAAAA,GAAM,MACLrsB,EAAAA,EAAAA,KAAIi4C,GAAoBl6C,GACxB3R,IAAAA,cAAC+/B,EAAAA,GAAK,CAAC11B,IAAKsH,EAAK7C,GAAItG,KAAM,IAAImJ,EAAKL,SACnCtR,IAAAA,cAAC+M,GAAkB,CAACH,IAAK+E,EAAKzF,KAC7BlM,IAAAA,cAAC2R,EAAKJ,UAAS,CAACgvB,SAAUmrB,UAM/B1rD,IAAAA,cAACkc,EAAAA,UAAS,CAACI,cAAc,WAAWnX,OAAO,OACzC4mD,EAAYn4C,KAAKjC,GACjB3R,IAAAA,cAAC+M,GAAkB,CAAC1C,IAAKsH,EAAK7C,GAAIlC,IAAK+E,EAAKzF,KAC3ClM,IAAAA,cAAC2R,EAAKJ,UAAS,CAACgvB,SAAUmrB,UAShC,EAGIM,GAAwBhsD,IAAAA,KAAWyrD,IAOzC,GAL8BQ,KAC7B,MAAMd,EAAc7gB,KACpB,OAAOtqC,IAAAA,cAACgsD,GAAqB,CAACb,YAAaA,GAAe,E,gBCjDxC9xC,EAAAA,GAAAA,UL9BEjS,IACpB,MAAM,OAAEmqB,GAAWD,KACb46B,EMAA,WACN,MAAM,qBAAEC,EAAoB,yBAAEC,GAA6B96B,MAErD,gBAAE0kB,GAAoBN,KAE5B,OAAO5tC,EAAAA,EAAAA,UAAQ,IACVkuC,EACIoW,GAA4BD,GAAwBE,GAErDF,GAAwBC,GAA4BC,IACzD,CAACD,EAA0BD,EAAsBnW,GACrD,CNXqBsW,GAEpB,OAAO/6B,EACkB,iBAAhB26B,GAA4BlsD,IAAAA,cAAA,MAAAiV,GAAA,CAAKs3C,IAAK,IAAQnlD,EAAK,CAAE4pC,IAAKkb,MACjElsD,IAAAA,cAACksD,EAAgB9kD,GAGlBpH,IAAAA,cAAAA,IAAAA,SAAA,KACA,IKoB6BuZ,WAAA,CAAAC,YAAA,2BAAAC,YAAA,gBAAZJ,CAAY,mBAIFA,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,qCAAAC,YAAA,gBAAjBJ,CAAiB,iBAClCtT,EAAyB,GALrC,MA+QA,GAnQoBymD,EAAG7sD,eACtB,MAAM,iBAAE02C,GAAqBX,KAGvB+W,IADaxH,EAAAA,EAAAA,iBACGz0C,IAAa9I,GAAMA,EAAEqI,MAAMM,OAAOwF,OAAS,KAC3DtP,EAAUoB,KAGV+jD,EAASjB,IAAoB/iD,GAAMA,EAAEijD,oBAErC+B,EAAeA,KACpBjC,GAAmB7hD,WAAWiiD,sBAAsBa,EAAO,GAGrDxoC,EAAM0X,GAAW56B,IAAAA,UAAe,GAOvC,OACCA,IAAAA,cAAA,OAAK+T,MAAO,CAAE7O,MAAO,OAAQC,OAAQ,SACpCnF,IAAAA,cAACkgD,GAAS,KACTlgD,IAAAA,cAACC,EAAAA,QAAO,KACPD,IAAAA,cAACoV,GAAAA,EAAK,CACLC,WAAS,EACTC,GAAI,CAAEnQ,OAAQ,OAAQD,MAAO,OAAQiR,gBAAiBw2C,GAAAA,KAEtD3sD,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,EAAGS,GAAI,CAAEnQ,OAAQ,SAC7BnF,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACT0J,cAAe,MACf0O,WAAY,SACZtO,eAAgB,aAChBzQ,OAAQ,OACRwQ,WAAY,SAGb3V,IAAAA,cAAC4gC,GAAAA,EAAU,CAAC7qB,QAAS22C,GACpB1sD,IAAAA,cAAC4sD,GAAAA,EAAQ,CAAC74C,MAAO,CAAC,KAGnB/T,IAAAA,cAAA,OACCgxC,IAAK6b,GACL94C,MAAO,CACN5O,OAAQ,OACRD,MAAO,OAEPyQ,WAAY,YAKhB3V,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GAAI43C,GAAiBzsD,IAAAA,cAACumD,GAAS,OAC5CvmD,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACT0J,cAAe,MACfI,eAAgB,WAChBuO,YAAa,OACbD,WAAY,SACZ/e,OAAQ,SAGTnF,IAAAA,cAACyV,GAAAA,EAAU,CAACC,QAAQ,QAAQ3B,MAAO,CAAEoQ,YAAa,SAAU,YACjD5d,GAASiT,aAAe,SAEnCxZ,IAAAA,cAACwpD,GAAAA,EAAI,CAACC,QAAM,EAACn0C,GAAI,CAAEa,gBAAiB6vC,GAAAA,GAAkBqE,aAAc,QAClE1qD,QAOPK,IAAAA,cAAC6kD,GAAAA,EAAO,KACP7kD,IAAAA,cAACC,EAAAA,QAAO,KACPD,IAAAA,cAACoV,GAAAA,EAAK,CACLC,WAAS,EACTC,GAAI,CAAEnQ,OAAQ,OAAQD,MAAO,OAAQiR,gBAAiBw2C,GAAAA,KAEtD3sD,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,EAAGS,GAAI,CAAEnQ,OAAQ,SAC7BnF,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACT0J,cAAe,MACf0O,WAAY,SACZtO,eAAgB,aAChBzQ,OAAQ,OACRwQ,WAAY,SAGb3V,IAAAA,cAAC4gC,GAAAA,EAAU,CAAC7qB,QAAS22C,GACpB1sD,IAAAA,cAAC4sD,GAAAA,EAAQ,CAAC74C,MAAO,CAAC,KAGnB/T,IAAAA,cAAA,OACCgxC,IAAK6b,GACL94C,MAAO,CACN5O,OAAQ,OACRD,MAAO,OAEPyQ,WAAY,YAKhB3V,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GAAI43C,GAAiBzsD,IAAAA,cAACumD,GAAS,OAC5CvmD,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACT0J,cAAe,MACfI,eAAgB,WAChBuO,YAAa,OACbD,WAAY,SACZ/e,OAAQ,SAGTnF,IAAAA,cAACyV,GAAAA,EAAU,CAACC,QAAQ,QAAQ3B,MAAO,CAAEoQ,YAAa,SAAU,YACjD5d,GAASiT,aAAe,SAEnCxZ,IAAAA,cAACwpD,GAAAA,EAAI,CAACC,QAAM,EAACn0C,GAAI,CAAEa,gBAAiB6vC,GAAAA,GAAkBqE,aAAc,QAClE1qD,QAOPK,IAAAA,cAAC8kD,GAAAA,EAAM,KACN9kD,IAAAA,cAACC,EAAAA,QAAO,KACPD,IAAAA,cAAA,OACC+T,MAAO,CACN7O,MAAO,OACPC,OAAQ,OACR2G,QAAS,OACT0J,cAAe,SACf0O,WAAY,SACZtO,eAAgB,WAGjB5V,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,QAAM,EACNn0C,GAAI,CACHinC,SAAU,OACV9/B,SAAU,MACVtX,OAAQ,SAGTnF,IAAAA,cAACoV,GAAAA,EAAK,CACLC,WAAS,EACTC,GAAI,CAAEnQ,OAAQ,OAAQD,MAAO,OAAQiR,gBAAiBw2C,GAAAA,KAEtD3sD,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,EAAGS,GAAI,CAAEnQ,OAAQ,SAC7BnF,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACT0J,cAAe,MACf0O,WAAY,SACZtO,eAAgB,aAChBzQ,OAAQ,OACRwQ,WAAY,QAGb3V,IAAAA,cAAC4gC,GAAAA,EAAU,CAAC7qB,QAASA,IAAM6kB,GAAQ,IAClC56B,IAAAA,cAAC4sD,GAAAA,EAAQ,CAAC74C,MAAO,CAAC,KAGnB/T,IAAAA,cAAA,OACCgxC,IAAK6b,GACL94C,MAAO,CACN5O,OAAQ,OACRD,MAAO,OACPyQ,WAAY,WAMhB3V,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GACZ7U,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACT0J,cAAe,MACfI,eAAgB,WAChBuO,YAAa,OACbD,WAAY,SACZ/e,OAAQ,SAMTnF,IAAAA,cAACwpD,GAAAA,EAAI,CAACC,QAAM,EAACn0C,GAAI,CAAEa,gBAAiB6vC,GAAAA,GAAkBqE,aAAc,QAClE1qD,QAOPK,IAAAA,cAAC8sD,GAAAA,GAAM,CACNx3C,GAAI,CAAEpQ,MAAO,OAAQC,OAAQ,OAAQ4nD,qBAAsB,QAC3DC,OAAO,OACP9pC,KAAMA,EACNpH,UAAsB,EAjMgB,KAC1C8e,EAgM0B,MAhMV,IAkMZ56B,IAAAA,cAAA,OACC+T,MAAO,CACN7O,MAAO,OACPC,OAAQ,OACR4nD,qBAAsB,OACtBn3C,eAAgB,kBAGjB5V,IAAAA,cAAA,OACC+T,MAAO,CACN5O,OAAQ,MACRgR,gBAAiB6vC,GAAAA,GACjBl6C,QAAS,OACT0J,cAAe,SACfI,eAAgB,aAGjB5V,IAAAA,cAACitD,GAAAA,EAAoB,CAACl5C,MAAO,CAAE4B,WAAY,OAAQgvB,SAAU,UAC7D3kC,IAAAA,cAACyV,GAAAA,EAAU,CAACC,QAAQ,KAAK3B,MAAO,CAAE4B,WAAY,SAAU,WAC9CpP,GAASiT,aAAe,UAGnCxZ,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,QACrBnF,IAAAA,cAAA,OAAK+T,MAAO,CAAE7O,MAAO,OAAQC,OAAQ,OAAQ0iC,UAAW,SACvD7nC,IAAAA,cAACisD,GAAiB,QAIpBjsD,IAAAA,cAAA,OACC+T,MAAO,CACN5O,OAAQ,KACRgR,gBAAiB6vC,GAAAA,GACjBl6C,QAAS,OACT0J,cAAe,SACfI,eAAgB,aAGjB5V,IAAAA,cAACyV,GAAAA,EAAU,CAAC1B,MAAO,CAAE4B,WAAY,QAAUD,QAAQ,SAAQ,uCAQ3D,EEtSFw3C,IAAY7zC,EAAAA,GAAAA,SAAO8zC,EAAAA,OAAM5zC,WAAA,CAAAC,YAAA,wBAAAC,YAAA,eAAbJ,CAAa,2MAUhB,EAAG+zC,SAAQxW,WAAoBA,EAAMC,QAAQuW,GAAU,WAAWrW,UAEvE,EAAGH,WAAoBA,EAAMC,QAAQwW,MAAMtW,UAmBrD,IAhB4CuW,EAAAA,EAAAA,aAC3C,UAAqB,MAAEpgD,EAAK,SAAEvN,GAAY+yB,GACzC,OACC1yB,IAAAA,cAACkc,EAAAA,UAAS,CAAChX,MAAO,OAAQC,OAAQ,OAAQ4O,MAAO,CAAE5E,SAAU,YAAcujB,IAAKA,GAC9ExlB,EAAMC,MACNnN,IAAAA,cAACktD,GAAS,CACT,cAAa,gBACbpoD,MAAOoI,EAAMG,UAAYH,EAAME,OAAS,EAAI,KAG7CzN,EAGJ,ICPK4tD,IAAsBl0C,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,yCAAAC,YAAA,eAAjBJ,CAAiB,mDACZ,EAAGu9B,WAAoBA,EAAMC,QAAQ2D,MAAMzD,SAChEhxC,EAAyB,GAG/BynD,GAAkBA,KACvB,MAAM,UAAEjsB,EAAS,OAAED,GAAWF,KAE9B,OAAO9S,EAAAA,EAAAA,SAAQgT,GAAU,KACxBthC,IAAAA,cAACkc,EAAAA,UAAS,CAAChX,MAAO,OAAQC,OAAQ,QACjCnF,IAAAA,cAAC4gC,EAAAA,WAAU,CACV6b,UAAWgR,GAAAA,GACX5hD,KAAM01B,EAAY,YAAc,gBAChCxrB,QAASwrB,EAAYU,GAAeD,GACpCntB,KAAK,UAGP,EAaI64C,GAAoBA,EACzB/7C,OACAsK,SACAlG,cAMA,IAJkBoqC,EAAAA,GAAAA,IAAc,CAAE1jC,SAAU,QAEnB0jC,EAAAA,GAAAA,IAAc,CAAE5D,SAAU,QAGlD,GACC,CAAC,QAAS,QAAS,wCAAyC,QAAS,UAAUxiC,SAC9EpI,EAAK5M,OAGN,OAAO,UAGR,GAAI,CAAC,QAAS,QAAS,yCAAyCgV,SAASpI,EAAK5M,OAC7E,OAAO,KAIT,MAAOskD,EAAOC,GAAYtpD,IAAAA,UAAe,GASzC,OARA2d,EAAAA,EAAAA,YAAU,KACL4rC,GAAAA,GACHD,GAAS,GAETA,GAAS,EACV,GACE,CAACC,GAAAA,KAGHvpD,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAO4M,EAAK5M,MAAOmc,UAAU,QAAQ7W,IAAKsH,EAAK7C,IACvD9O,IAAAA,cAAC2tD,GAAS,CAACzgD,MAAOyE,EAAKzE,OACK,iBAAnByE,EAAKJ,UACZvR,IAAAA,cAACwpD,GAAAA,EAAI,CAACC,UAAQJ,IAASptC,IACtBjc,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM8F,EAAKJ,UACX4E,gBAAiB8F,EAAS+pC,GAAAA,GAAmB4H,GAAAA,GAC7CnR,UAAWxgC,EAASgqC,GAAAA,GAA4BC,GAAAA,GAChDnwC,QAASA,EACTlB,KAAK,QACL,kBAAiBoH,KAInBjc,IAAAA,cAAC2R,EAAKJ,UAAS,CAAC0K,OAAQA,KAGjB,EAIN4xC,GAA6BA,EAAGl8C,UACrC3R,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAO4M,EAAK5M,MAAOmc,UAAU,QAAQ7W,IAAKsH,EAAK7C,IACvD9O,IAAAA,cAAC+M,GAAkB,CAAC1C,IAAKsH,EAAK7C,GAAIlC,IAAK+E,EAAKzF,KAChB,iBAAnByF,EAAKJ,UACZvR,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM8F,EAAKJ,UACX4E,gBAAgB,QAChBsmC,UAAU,OACV1mC,QAASpE,EAAKoE,SAAWu2B,EAAAA,KACzBz3B,KAAK,UAGN7U,IAAAA,cAAC2R,EAAKJ,UAAS,QAMbu8C,IAAaz0C,EAAAA,GAAAA,SAAOkD,EAAAA,KAAIhD,WAAA,CAAAC,YAAA,gCAAAC,YAAA,eAAXJ,CAAW,8DAsJ9B,GAhJwB00C,KACvB,MAAM5C,EAAc7gB,KACd0jB,EAAkBx9C,IAAa9I,GAAMA,EAAEqI,MAAMC,cAC7C,KAAEjH,IAAS8Y,EAAAA,EAAAA,OAEX,SAAEve,EAAQ,OAAE+M,IAAWmwB,EAAAA,EAAAA,MACvBytB,GAAYrzC,EAAAA,EAAAA,QAA+B,CAAC,IAElD+C,EAAAA,EAAAA,YAAU,KACTswC,EAAUhzC,QAAU+yC,EAAgBhiD,QAAO,CAAC4E,EAAae,KACnDf,EAAYe,EAAK7C,MACrB8B,EAAYe,EAAK7C,IAAM6C,EAAKL,OAEtBV,IACLq9C,EAAUhzC,QAAQ,GACnB,CAAC+yC,KAEJrwC,EAAAA,EAAAA,YAAU,KACLwtC,GAAeA,EAAYr8C,KAAOnN,IACrCssD,EAAUhzC,QAAU,IAChBgzC,EAAUhzC,QACb,CAACkwC,EAAYr8C,IAAK,IAAGy7B,EAAAA,EAAAA,MAAKjnC,EAAU,OAAO+M,KAE7C,GACE,CAAC86C,EAAa7nD,EAAU+M,IAE3B,MAAM69C,EAA2B19C,IAAa9I,GAAMA,EAAEqI,MAAMO,wBAEtD69C,GAAiBrmD,EAAAA,EAAAA,UACtB,KACCsL,EAAAA,EAAAA,SACC6M,EAAAA,EAAAA,QAAOiuC,GAA2BtmC,GAAMsjC,GAAWtjC,EAAGujC,KACtD,aAEF,CAACA,EAAa+C,IAGTE,GAAkBtmD,EAAAA,EAAAA,UACvB,KACC8L,EAAAA,EAAAA,KAAIo6C,GAAkBr8C,GACrBA,EAAKH,QACJxR,IAAAA,cAAC0tD,GAAiB,CACjBrjD,IAAKsH,EAAK7C,GACViH,QAASA,IAAYhN,EAAK,IAAIklD,EAAUhzC,QAAQtJ,EAAK7C,OACrD6C,KAAMA,EACNsK,OAAQkvC,GAAar8C,KAAO6C,EAAK7C,KAE/B,QAEN,CAACq8C,GAAar8C,GAAI/F,EAAMilD,IAGnBK,GAAiBvmD,EAAAA,EAAAA,UACtB,IAAMqmD,EAAev6C,KAAKjC,GAAS3R,IAAAA,cAAC6tD,GAA0B,CAACl8C,KAAMA,EAAMtH,IAAKsH,EAAK7C,QACrF,CAACq/C,IAGF,OACCnuD,IAAAA,cAAA,OACC+T,MAAO,CACN7O,MAAO,OACPC,OAAQ,OACR2G,QAAS,OACT0J,cAAe,SAEfI,eAAgB,SAChB04C,OAAQ,IAGTtuD,IAAAA,cAACkgD,GAAS,KACTlgD,IAAAA,cAACutD,GAAmB,CACnBroD,MAAO,OACPC,OAAO,OACPkX,YAAY,WACZC,cAAc,aACd,cAAY,qBAEZtc,IAAAA,cAAC8tD,GAAU,CACVxxC,cAAc,aACdD,YAAY,WACZyB,oBAAkB,EAClBw+B,KAAK,UAEJ8R,EACDpuD,IAAAA,cAACwtD,GAAe,OAEjBxtD,IAAAA,cAAC8tD,GAAU,CAACxxC,cAAc,WAAWD,YAAY,WAAWigC,KAAK,UAC/D+R,KAKJruD,IAAAA,cAAC6kD,GAAAA,EAAO,KACP7kD,IAAAA,cAACutD,GAAmB,CACnBroD,MAAO,OACPC,OAAO,OACPkX,YAAY,WACZC,cAAc,aACd,cAAY,qBAEZtc,IAAAA,cAAC8tD,GAAU,CACVxxC,cAAc,aACdD,YAAY,WACZyB,oBAAkB,EAClBw+B,KAAK,UAEJ8R,EACDpuD,IAAAA,cAACwtD,GAAe,OAEjBxtD,IAAAA,cAAC8tD,GAAU,CAACxxC,cAAc,WAAWD,YAAY,WAAWigC,KAAK,UAC/D+R,KAIJruD,IAAAA,cAAC8kD,GAAAA,EAAM,KACN9kD,IAAAA,cAACwpD,GAAAA,EAAI,CAACC,QAAM,EAAC11C,MAAO,CAAE7O,MAAO,OAAQC,OAAQ,SAC5CnF,IAAAA,cAACutD,GAAmB,CACnBroD,MAAM,OACNC,OAAO,OACP+P,WAAY,QACZmH,YAAY,aACZC,cAAc,gBACd,cAAY,qBAEZtc,IAAAA,cAAC8tD,GAAU,CACVxxC,cAAc,eACdD,YAAY,aACZyB,oBAAkB,EAClBw+B,KAAK,SACLp3C,MAAM,QAELkpD,EACDpuD,IAAAA,cAACwtD,GAAe,OAEjBxtD,IAAAA,cAAC8tD,GAAU,CAACxxC,cAAc,WAAWD,YAAY,WAAWigC,KAAK,UAC/D+R,MAKA,ECnQFE,GAAiBA,EAAG58C,WACzB,MAAM,KAAE+4C,EAAI,QAAEjxB,EAAO,QAAExe,EAAO,WAAE2vC,GAAeH,KACzC10C,GAAUlW,EAAAA,EAAAA,cAAY,KAC3B45B,EAASxe,IAAYtJ,EAAK7C,IAA2B,SAAT47C,EAAZ,OAA0C,UAC1EE,EAAWj5C,EAAK7C,GAAG,GACjB,CAACmM,EAASyvC,EAAME,EAAYnxB,EAAS9nB,EAAK7C,KAC7C,MAA2B,iBAAhB6C,EAAKy8B,OAEdpuC,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAO4M,EAAK5M,MAAOmc,UAAU,cACrClhB,IAAAA,cAAC4gC,EAAAA,WAAU,CACV/0B,KAAM8F,EAAKy8B,OACXqO,UAAWxhC,IAAYtJ,EAAK7C,GAAK,UAAY,OAC7CiH,QAASA,EACTlB,KAAK,WAKF7U,IAAAA,cAAC2R,EAAKy8B,OAAM,CAACsc,KAAMA,EAAMjxB,QAASA,GAAW,EAGxC+0B,GAAkBA,KAC9B,MAAMz+C,EAAQs7C,KACR5+C,EAAIyH,KACJ3N,EAAUoB,KAEV8mD,GAAc5uD,EAAAA,EAAAA,cAAY,KAC/B,MAAM6uD,EAAkB,IAAIC,YAAYvoD,EAAcC,YACtDjD,OAAOy6B,cAAc6wB,EAAgB,GACnC,IAEGE,GAAe9mD,EAAAA,EAAAA,UACpB,IAAsB,CACrB,CACCgH,GAAI,UACJ/J,MAAOwB,GAASiT,aAAe,UAC/BsD,UAAU,GAEX,CACChO,GAAI,QACJ/J,MAAOwB,GAASkF,MAAQ,GACxBqR,UAAU,GAEX,CACCnR,KAAM,UACNmD,GAAI,UACJ/J,MAAO,WAER,CACC+J,GAAI,SACJ/J,MAAO0H,EAAE,oBAAqB,eAC9BsJ,QAASA,KACRyU,KACAikC,GAAa,EAEd5iD,KAAM,WAEP,CACCiD,GAAI,OACJ/J,MAAO0H,EAAE,sBAAuB,iBAChCsJ,QAASu2B,EAAAA,KACTxvB,UAAU,EACVjR,KAAM,eAEP,CACCiD,GAAI,SACJ/J,MAAO0H,EAAE,eAAgB,UACzBsJ,QAAS2b,GACT7lB,KAAM,YAGR,CAACtF,GAASiT,YAAajT,GAASkF,KAAMgB,EAAGgiD,IAGpCI,GAAY/mD,EAAAA,EAAAA,UACjB,KAAM8L,EAAAA,EAAAA,KAAI7D,GAAQ4B,GAAS3R,IAAAA,cAACuuD,GAAc,CAAC58C,KAAMA,EAAMtH,IAAKsH,EAAK7C,QACjE,CAACiB,IAGF,OACC/P,IAAAA,cAACkc,EAAAA,UAAS,CAACG,YAAY,aAAanX,MAAM,OACxC2pD,EACD7uD,IAAAA,cAACw6B,EAAAA,QAAO,CAACz1B,MAAOwB,GAASiT,aAAejT,GAASkF,KAAMyV,UAAU,cAChElhB,IAAAA,cAACihB,EAAAA,SAAQ,CAACxS,MAAOmgD,EAAcrS,SAAS,WAAWuS,kBAAgB,GAClE9uD,IAAAA,cAAC4gC,EAAAA,WAAU,CAAC/0B,KAAK,gBAAgBgJ,KAAK,QAAQkB,QAASu2B,EAAAA,SAG9C,EC/FRyiB,IAAQ11C,EAAAA,GAAAA,SAAO6C,EAAAA,WAAU3C,WAAA,CAAAC,YAAA,eAAAC,YAAA,gBAAjBJ,CAAiB,8IACrB,EAAGqxC,UAA6B,WAATA,EAAoB,GAAK,IAQ1B,EAAG9T,WAAoBA,EAAMC,QAAQmY,MAAMjY,UAErEkY,GAAS51C,GAAAA,QAAOkhC,IAAGhhC,WAAA,CAAAC,YAAA,gBAAAC,YAAA,gBAAVJ,CAAU,uEAEf,EAAGqxC,UAA6B,SAATA,EAAkB,GAAK,IAK3CwE,GAAwBA,KACpC,MAAM,KAAExE,EAAI,QAAEjxB,EAAO,QAAExe,EAAO,WAAE2vC,GAAeH,KACzC16C,EAAQs7C,KACR8D,GAAernD,EAAAA,EAAAA,UAAQ,KAAMM,EAAAA,EAAAA,MAAK2H,GAAQ4B,GAASA,EAAK7C,KAAOmM,KAAU,CAACA,EAASlL,IAMzF,OALA4N,EAAAA,EAAAA,YAAU,KACH1C,GAAWk0C,GAChBvE,EAAW76C,EAAM,IAAIjB,GACtB,GACE,CAACmM,EAASk0C,EAAcvE,EAAY76C,IAChCo/C,EACNnvD,IAAAA,cAACovD,EAAAA,WAAU,CAAC1E,KAAK,WAChB1qD,IAAAA,cAACivD,GAAM,CAACvE,KAAMA,GACb1qD,IAAAA,cAAC+uD,GAAK,CAACrE,KAAMA,EAAMpuC,cAAc,cAC/B6yC,GACAnvD,IAAAA,cAAC+M,GAAkB,CAACH,IAAKuiD,GAAcrgD,IACtC9O,IAAAA,cAACmvD,EAAa59C,UAAS,CAACm5C,KAAMA,EAAMjxB,QAASA,QAM/C,IAAI,E,2DCdF,MAAM41B,GAA0BA,EACtClE,cACA9nD,eAEU6Q,KAAV,MACMuvB,EAAU4F,GAAW,CAAE8hB,cAAa9nD,YAAYzB,EAAac,KAE7D4sD,GAAgBxnD,EAAAA,EAAAA,UACrB,KACCM,EAAAA,EAAAA,MACCq7B,GACC0E,IACCA,EAAOonB,QAAUpE,GAAar8C,IAAMq5B,EAAOonB,QAAUpE,GAAaj/C,OAChD,IAAnBi8B,EAAOwQ,WAEV,CAAClV,EAAS0nB,GAAaj/C,IAAKi/C,GAAar8C,KAEpC1D,EAAO+H,KACPq8C,GAAQ1nD,EAAAA,EAAAA,UAAQ,KAAM2nD,EAAAA,EAAAA,SAAQhsB,EAAS,UAAU,CAACA,IAElDisB,GAAmB5nD,EAAAA,EAAAA,UACxB,IAAsB,IACjB0nD,EAAMrE,GAAaj/C,KAAO,KAAO,OAClCF,EAAAA,EAAAA,QACFZ,GACA,CAACa,EAAKC,EAAK8b,KACN9b,EAAIT,OAAS0/C,GAAaj/C,KAAOsjD,EAAMtjD,EAAIT,OAAOoK,OAAS,GAC9D5J,EAAIlD,KAAK,CAAE4C,KAAM,UAAW5G,MAAO,GAAI+J,GAAI,WAAWkZ,QAAUwnC,EAAMtjD,EAAIT,OAEpEQ,IAER,MAGF,CAACk/C,GAAaj/C,IAAKd,EAAMokD,KAGnBtsC,EAAM0X,IAAWnd,EAAAA,EAAAA,WAAS,IAC1BkyC,EAASC,IAAiBnyC,EAAAA,EAAAA,WAAS,GAEpCiuC,EAASjB,IAAoB/iD,GAAMA,EAAEijD,qBAEpCkF,EAAWC,GAAgB9vD,IAAAA,UAAe,GAqCjD,OAnCA2d,EAAAA,EAAAA,YAAU,KAERmyC,IADGpE,EAIJ,GACE,CAACA,IA6BG4D,EACNtvD,IAAAA,cAAA,WACE6vD,EACA7vD,IAAAA,cAAA,WACCA,IAAAA,cAAC6kD,GAAAA,EAAO,KACP7kD,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,QAAM,EACNn0C,GAAI,CACHa,gBAAiB6vC,GAAAA,GACjBl6C,QAAS,OACT0J,cAAe,MACfG,WAAY,OACZzQ,MAAO,cACP02B,OAAQ,UACRyuB,aAAc,SAGfrqD,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACfD,QAAS,OACTw6C,cAAe,QAEhBh6C,QAASu5C,EAAcv5C,SAAWu5C,EAActqB,OAASsH,EAAAA,MAEzDtsC,IAAAA,cAACgwD,GAAAA,EAAU,CAACj8C,MAAO,CAAEoQ,YAAa,SAAU7W,MAAO24C,GAAAA,MACnDjmD,IAAAA,cAACyV,GAAAA,EAAU,CAACC,QAAQ,YAAY3B,MAAO,CAAEzG,MAAO,YAAa,YAK9DtN,IAAAA,cAACsW,GAAAA,EAAO,CAACvC,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,MAAOqQ,QAAS,IAAK06C,OAAQ,OACtEjwD,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACfD,QAAS,MAETK,eAAgB,UAEjBG,QAAUsK,GAAMua,GAAS1X,IAEzBljB,IAAAA,cAACkwD,GAAAA,EAAiB,CAACn8C,MAAO,CAAEzG,MAAO24C,GAAAA,OAEpCjmD,IAAAA,cAACmwD,GAAAA,EAAI,CACJrhD,GAAG,aACHshD,gBAAgB,iBAChBC,eAAgB,CAAEpqD,IAAK,IAAKC,KAAM,GAClCoqD,aAAc,CAAEj7B,SAAU,MAAO1Y,WAAY,QAC7C4zC,gBAAiB,CAAEl7B,SAAU,MAAO1Y,WAAY,QAChDuG,KAAMA,EACNpH,QAASA,IAAM8e,GAAQ,IAEtB80B,EAAiB97C,KAAKu0B,GACD,aAAjBA,EAAOpjC,MAA6B,KAEvC/E,IAAAA,cAACwwD,GAAAA,EAAQ,CACRnmD,IAAK89B,EAAOr5B,GACZiH,QAASoyB,EAAOpyB,SAAWu2B,EAAAA,KAC3BxvB,SAAUqrB,EAAOrrB,UAEhBqrB,EAAOpjC,YAOd/E,IAAAA,cAACkgD,GAAS,KACTlgD,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,QAAM,EACNn0C,GAAI,CACHa,gBAAiB6vC,GAAAA,GACjBl6C,QAAS,OACT0J,cAAe,MACfG,WAAY,OACZzQ,MAAO,cACP02B,OAAQ,UACRyuB,aAAc,SAGfrqD,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACfD,QAAS,OACTw6C,cAAe,QAEhBh6C,QAASu5C,EAAcv5C,SAAWu5C,EAActqB,OAASsH,EAAAA,MAEzDtsC,IAAAA,cAACgwD,GAAAA,EAAU,CAACj8C,MAAO,CAAEoQ,YAAa,SAAU7W,MAAO24C,GAAAA,MACnDjmD,IAAAA,cAACyV,GAAAA,EAAU,CAACC,QAAQ,YAAY3B,MAAO,CAAEzG,MAAO,YAAa,YAK9DtN,IAAAA,cAACsW,GAAAA,EAAO,CAACvC,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,MAAOqQ,QAAS,IAAK06C,OAAQ,OACtEjwD,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACfD,QAAS,MAETK,eAAgB,UAEjBG,QAAUsK,GAAMua,GAAS1X,IAEzBljB,IAAAA,cAACkwD,GAAAA,EAAiB,CAACn8C,MAAO,CAAEzG,MAAO24C,GAAAA,OAEpCjmD,IAAAA,cAACmwD,GAAAA,EAAI,CACJrhD,GAAG,aACHshD,gBAAgB,iBAChBC,eAAgB,CAAEpqD,IAAK,IAAKC,KAAM,GAClCoqD,aAAc,CAAEj7B,SAAU,MAAO1Y,WAAY,QAC7C4zC,gBAAiB,CAAEl7B,SAAU,MAAO1Y,WAAY,QAChDuG,KAAMA,EACNpH,QAASA,IAAM8e,GAAQ,IAEtB80B,EAAiB97C,KAAKu0B,GACD,aAAjBA,EAAOpjC,MAA6B,KAEvC/E,IAAAA,cAACwwD,GAAAA,EAAQ,CACRnmD,IAAK89B,EAAOr5B,GACZiH,QAASoyB,EAAOpyB,SAAWu2B,EAAAA,KAC3BxvB,SAAUqrB,EAAOrrB,UAEhBqrB,EAAOpjC,YAOd/E,IAAAA,cAAC8kD,GAAAA,EAAM,KACN9kD,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,QAAM,EACNn0C,GAAI,CACHa,gBAAiB6vC,GAAAA,GACjBl6C,QAAS,OACT0J,cAAe,MACfG,WAAY,OACZzQ,MAAO,cACP02B,OAAQ,UACRyuB,aAAc,SAGfrqD,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACfD,QAAS,OACTw6C,cAAe,OACfn6C,eAAgB,UAEjBG,QAASu5C,EAAcv5C,SAAWu5C,EAActqB,OAASsH,EAAAA,MAEzDtsC,IAAAA,cAACgwD,GAAAA,EAAU,CAACj8C,MAAO,CAAEzG,MAAO24C,GAAAA,UAMhCjmD,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,QAAM,EACNn0C,GAAI,CACHa,gBAAiB6vC,GAAAA,GACjBl6C,QAAS,OACT0J,cAAe,MACfG,WAAY,OACZzQ,MAAO,cACP02B,OAAQ,UACRyuB,aAAc,SAGfrqD,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACfD,QAAS,OACTw6C,cAAe,OACfn6C,eAAgB,UAEjBG,QAASu5C,EAAcv5C,SAAWu5C,EAActqB,OAASsH,EAAAA,MAEzDtsC,IAAAA,cAACgwD,GAAAA,EAAU,CAACj8C,MAAO,CAAEzG,MAAO24C,GAAAA,SAMhCjmD,IAAAA,cAAA,WACCA,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,QAAM,EACNn0C,GAAI,CACHa,gBAAiB6vC,GAAAA,GACjBl6C,QAAS,OACT0J,cAAe,SACfG,WAAY,OACZzQ,MAAO,cACP02B,OAAQ,UACRyuB,aAAc,QAEft0C,QAAUsK,GAAMua,GAAS1X,IAEzBljB,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACToY,WAAY,SACZ1O,cAAe,MACfD,QAAS,OACTw6C,cAAe,SAGhB/vD,IAAAA,cAACgwD,GAAAA,EAAU,CAACj8C,MAAO,CAAEoQ,YAAa,SAAU7W,MAAO24C,GAAAA,MACnDjmD,IAAAA,cAACyV,GAAAA,EAAU,CAACC,QAAQ,YAAY3B,MAAO,CAAEzG,MAAO,YAAa,YAI9DtN,IAAAA,cAACkgD,GAAS,KACTlgD,IAAAA,cAACmwD,GAAAA,EAAI,CACJrhD,GAAG,aACHshD,gBAAgB,iBAChBC,eAAgB,CAAEpqD,IAAK,IAAKC,KAAM,GAClCoqD,aAAc,CAAEj7B,SAAU,MAAO1Y,WAAY,QAC7C4zC,gBAAiB,CAAEl7B,SAAU,MAAO1Y,WAAY,QAChDuG,KAAMA,EACNpH,QAASA,IAAM8e,GAAQ,IAEtB80B,EAAiB97C,KAAKu0B,GAEJ,aAAjBA,EAAOpjC,OACU,sBAAjBojC,EAAOpjC,OACU,WAAjBojC,EAAOpjC,MAEA,KAEP/E,IAAAA,cAACwwD,GAAAA,EAAQ,CACRnmD,IAAK89B,EAAOr5B,GACZiH,QAASoyB,EAAOpyB,SAAWu2B,EAAAA,KAC3BxvB,SAAUqrB,EAAOrrB,UAEhBqrB,EAAOpjC,WAMb/E,IAAAA,cAAC6kD,GAAAA,EAAO,KACP7kD,IAAAA,cAACmwD,GAAAA,EAAI,CACJrhD,GAAG,aACHshD,gBAAgB,iBAChBC,eAAgB,CAAEpqD,IAAK,IAAKC,KAAM,GAClCoqD,aAAc,CAAEj7B,SAAU,MAAO1Y,WAAY,QAC7C4zC,gBAAiB,CAAEl7B,SAAU,MAAO1Y,WAAY,QAChDuG,KAAMA,EACNpH,QAASA,IAAM8e,GAAQ,IAEtB80B,EAAiB97C,KAAKu0B,GAEJ,aAAjBA,EAAOpjC,OACU,sBAAjBojC,EAAOpjC,OACU,WAAjBojC,EAAOpjC,MAEA,KAEP/E,IAAAA,cAACwwD,GAAAA,EAAQ,CACRnmD,IAAK89B,EAAOr5B,GACZiH,QAASoyB,EAAOpyB,SAAWu2B,EAAAA,KAC3BxvB,SAAUqrB,EAAOrrB,UAEhBqrB,EAAOpjC,WAMb/E,IAAAA,cAAC8kD,GAAAA,EAAM,KACN9kD,IAAAA,cAACmwD,GAAAA,EAAI,CACJrhD,GAAG,aACHshD,gBAAgB,iBAChBC,eAAgB,CAAEpqD,IAAK,IAAKC,KAAM,GAClCoqD,aAAc,CAAEj7B,SAAU,MAAO1Y,WAAY,QAC7C4zC,gBAAiB,CAAEl7B,SAAU,MAAO1Y,WAAY,QAChDuG,KAAMA,EACNpH,QAASA,IAAM8e,GAAQ,IAEtB80B,EAAiB97C,KAAKu0B,GAEJ,aAAjBA,EAAOpjC,OACU,sBAAjBojC,EAAOpjC,OACU,WAAjBojC,EAAOpjC,MAEA,KAEP/E,IAAAA,cAACwwD,GAAAA,EAAQ,CACRnmD,IAAK89B,EAAOr5B,GACZiH,QAASoyB,EAAOpyB,SAAWu2B,EAAAA,KAC3BxvB,SAAUqrB,EAAOrrB,UAEhBqrB,EAAOpjC,YAQf,EAGI0rD,GAAqBzwD,IAAAA,KAAWqvD,IAEzBqB,GAAqBA,KACjC,MAAMC,GAAenwB,EAAAA,EAAAA,MACf2qB,EAAc7gB,KAQdjnC,GAAWyE,EAAAA,EAAAA,UAAQ,IANCzE,KAAkB,IACxCA,EACHC,SAAUD,GAAUC,UAAUkJ,MAAM,KAAK67C,MAAM,EAAG,GAAG3/C,KAAK,KAC1D2B,IAAK,KAGyBumD,CAAiBD,IAAe,CAACA,IAChE,OAAO3wD,IAAAA,cAACywD,GAAkB,CAACtF,YAAaA,EAAa9nD,SAAUA,GAAY,ECrZtEwtD,IAZax3C,GAAAA,QAAOkhC,IAAGhhC,WAAA,CAAAC,YAAA,yBAAAC,YAAA,gBAAVJ,CAAU,8IACd,EAAGu9B,WAAoBA,EAAMC,QAAQwW,MAAMtW,UAWnC8Z,KACtB,MAAMnF,EAASjB,IAAoB/iD,GAAMA,EAAEijD,qBAEpCkF,EAAWC,GAAgB9vD,IAAAA,UAAe,IAEjD2d,EAAAA,EAAAA,YAAU,KAERmyC,IADGpE,EAIJ,GACE,CAACA,IAEJ,MAAOxoC,EAAM0X,GAAW56B,IAAAA,UAAe,GAMjC8wD,EAAUxmB,MACTymB,EAAaC,GAAkBhxD,IAAAA,UAAe,IAC9CixD,EAAeC,GAAoBlxD,IAAAA,UAAe,GAezD,OAbA2d,EAAAA,EAAAA,YAAU,KACW,WAAhBmzC,GAAShiD,IACZkiD,GAAe,GACfE,GAAiB,IACS,aAAhBJ,GAAShiD,IACnBoiD,GAAiB,GACjBF,GAAe,KAEfE,GAAiB,GACjBF,GAAe,GAChB,GACE,CAACF,IAGH9wD,IAAAA,cAAA,OACC+T,MAAO,CACN5O,OAAQ,QACRD,MAAO,QACP4G,QAAS,OACTqK,gBAAiBw2C,GAAAA,GACjB34C,SAAU,WAGXhU,IAAAA,cAACkgD,GAAS,KACTlgD,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACC,GAAI,CAAEnQ,OAAQ,OAAQD,MAAO,SAC7ClF,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,KACV1R,GACDnD,IAAAA,cAACwsD,GAAW,KACXxsD,IAAAA,cAACwuD,GAAe,QAKnBxuD,IAAAA,cAACoV,GAAAA,EAAK,CACLP,KAAM,GACNS,GAAI,CAAEnQ,OAAQ,oBAAqBD,MAAO,OAAQiR,gBAAiBw2C,GAAAA,KAEnE3sD,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,SACpClF,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACmjB,QAAS,EAAGljB,GAAI,CAAEnQ,OAAQ,OAAQD,MAAO,SACzDlF,IAAAA,cAACoV,GAAAA,EAAK,CACLP,KAAMg7C,EAAY,EAAI,EACtBv6C,GAAI,CAAEnQ,OAAQ,OAAQgR,gBAAiBw2C,GAAAA,KAEvC3sD,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,SACpClF,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACmjB,QAAS,EAAGljB,GAAI,CAAEpQ,MAAO,SACzClF,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GAAIS,GAAI,CAAEnQ,OAAQ,SAC7B4rD,GAAeE,EAAgB,KAAOjxD,IAAAA,cAAC0wD,GAAc,OAEvD1wD,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,KACV1R,GACDnD,IAAAA,cAACkc,EAAAA,UAAS,CACTG,YAAY,aACZnH,WAAY,cACZhQ,MAAM,OACNC,OAAO,OACPmX,cAAc,aACdiZ,eAAe,cAEfv1B,IAAAA,cAACisD,GAAiB,WAOxBjsD,IAAAA,cAACoV,GAAAA,EAAK,CACLP,KAAMg7C,EAAY,IAAM,KACxBv6C,GAAI,CACHnQ,OAAQ,OACRgR,gBAAiBw2C,GAAAA,GACjB/C,oBAAqB,OACrBmD,qBAAsB,SAGvB/sD,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,QAAM,EACNn0C,GAAI,CACHnQ,OAAQ,OACRD,MAAO,OACP0kD,oBAAqB,OACrBmD,qBAAsB,SAGvB/sD,IAAAA,cAACo6C,GAAgB,MACjBp6C,IAAAA,cAACkvD,GAAiB,QAGpBlvD,IAAAA,cAACoV,GAAAA,EAAK,CACLP,KAAkB,GAClBS,GAAI,CAAEnQ,OAAQ,OAAQgR,gBAAiBw2C,GAAAA,MAErCxpD,GACDnD,IAAAA,cAACkc,EAAAA,UAAS,CACTG,YAAY,aACZnH,WAAY,cACZhQ,MAAM,OACNC,OAAO,OACPmX,cAAc,aACdiZ,eAAe,cAEfv1B,IAAAA,cAAC+tD,GAAe,YAQvB/tD,IAAAA,cAACs6C,GAAc,OAEhBt6C,IAAAA,cAAC6kD,GAAAA,EAAO,KACP7kD,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACC,GAAI,CAAEnQ,OAAQ,OAAQD,MAAO,SAC7ClF,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,KACV1R,GACDnD,IAAAA,cAACwsD,GAAW,KACXxsD,IAAAA,cAACwuD,GAAe,QAKnBxuD,IAAAA,cAACoV,GAAAA,EAAK,CACLP,KAAM,GACNS,GAAI,CAAEnQ,OAAQ,oBAAqBD,MAAO,OAAQiR,gBAAiBw2C,GAAAA,KAEnE3sD,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,SACpClF,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACmjB,QAAS,EAAGljB,GAAI,CAAEnQ,OAAQ,OAAQD,MAAO,SACzDlF,IAAAA,cAACoV,GAAAA,EAAK,CACLP,KAAMg7C,EAAY,EAAkB,IACpCv6C,GAAI,CAAEnQ,OAAQ,OAAQgR,gBAAiBw2C,GAAAA,KAEvC3sD,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,SACpClF,IAAAA,cAACoV,GAAAA,EAAK,CAACC,WAAS,EAACmjB,QAAS,EAAGljB,GAAI,CAAEpQ,MAAO,SACzClF,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,GAAIS,GAAI,CAAEnQ,OAAQ,SAC7B4rD,GAAeE,EAAgB,KAAOjxD,IAAAA,cAAC0wD,GAAc,OAEvD1wD,IAAAA,cAACoV,GAAAA,EAAK,CAACP,KAAM,KACV1R,GACDnD,IAAAA,cAACkc,EAAAA,UAAS,CACTG,YAAY,aACZnH,WAAY,cACZhQ,MAAM,OACNC,OAAO,OACPmX,cAAc,aACdiZ,eAAe,cAEfv1B,IAAAA,cAACisD,GAAiB,WAOxBjsD,IAAAA,cAACoV,GAAAA,EAAK,CACLP,KAAMg7C,EAAY,EAAI,IACtBv6C,GAAI,CACHnQ,OAAQ,SAGTnF,IAAAA,cAACwpD,GAAAA,EAAI,CACJC,QAAM,EACNn0C,GAAI,CACHnQ,OAAQ,OACRD,MAAO,OACP0kD,oBAAqB,OACrBmD,qBAAsB,OACtB52C,gBAAiBw2C,GAAAA,KAGlB3sD,IAAAA,cAACo6C,GAAgB,MACjBp6C,IAAAA,cAACkvD,GAAiB,QAGpBlvD,IAAAA,cAACoV,GAAAA,EAAK,CACLP,KAAkB,EAClBS,GAAI,CAAEnQ,OAAQ,OAAQgR,gBAAiBw2C,GAAAA,MAErCxpD,GACDnD,IAAAA,cAACkc,EAAAA,UAAS,CACTG,YAAY,aACZnH,WAAY,cACZhQ,MAAM,OACNC,OAAO,OACPmX,cAAc,aACdiZ,eAAe,cAEfv1B,IAAAA,cAAC+tD,GAAe,YAQvB/tD,IAAAA,cAACs6C,GAAc,OAEhBt6C,IAAAA,cAAC8kD,GAAAA,EAAM,KACN9kD,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,SACpClF,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,UAClC/B,GACDnD,IAAAA,cAACwsD,GAAW,KACXxsD,IAAAA,cAACwuD,GAAe,QAKnBxuD,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,oBAAqBD,MAAO,SACjDlF,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,OAAQisD,UAAW,SACvDnxD,IAAAA,cAACo6C,GAAgB,MACjBp6C,IAAAA,cAACkvD,GAAiB,QAGpBlvD,IAAAA,cAAA,OACC+T,MAAO,CAAEjI,QAAS,OAAQqD,SAAU,QAASyN,OAAQ,IAAK1W,KAAM,IAAKhB,MAAO,UAE1E/B,GAUDnD,IAAAA,cAAA,OAAK+T,MAAO,CAAE5O,OAAQ,OAAQD,MAAO,SACpClF,IAAAA,cAAC+tD,GAAe,QAMnB/tD,IAAAA,cAAA,OACC+T,MAAO,CACNjI,QAAS,OACTqD,SAAU,QACVyN,OAAQ,OACRzU,MAAO,SAGP4oD,GAAeE,EAAgB,KAAOjxD,IAAAA,cAAC0wD,GAAc,SAIzD1wD,IAAAA,cAAA,WACCA,IAAAA,cAACs6C,GAAc,OAEX,GAuCR,GARkB8W,IACjBpxD,IAAAA,cAAC+kD,GAAoB,KACpB/kD,IAAAA,cAACqxD,GAAAA,eAAc,KACdrxD,IAAAA,cAAC6wD,GAAc,QCpUZS,GAAoBA,KACzB,MAAM,MAAEhgD,IAAUqS,EAAAA,EAAAA,KAIlB,OAHAhG,EAAAA,EAAAA,YAAU,KACLrM,GAAOd,GAAY0W,SAAS,CAAExX,UAAW4B,GAAQ,GACnD,CAACA,IACG,IAAI,EAGCigD,GAAuBA,KACnC,MAAO9kD,IAAK+N,EAAAA,EAAAA,kBAIZ,OAHAmD,EAAAA,EAAAA,YAAU,KCqC0BlR,KACpC,MAAM,MAAEtF,GAAUP,GAAgBgC,WAAW3B,UACzC4N,EAAAA,EAAAA,MAAK1N,GAAS,GAA2C,UAAtCA,EAAMqqD,8BAC5BhhD,GAAY5H,WAAWwI,SAlBQ3E,KAAY,CAC5CqC,GAAIrN,EACJyK,IAAKzK,EACL6P,MAAO7P,EACPyO,QAAS2vB,GACT3yB,MAAO,CACNC,MAAM,GAEPpI,MAAO0H,EAAE,eAAgB,YACzB0C,SAAU,KACVqC,SAAS,EACTxB,WAAY,qBACZC,aAAcqwB,KAMmBmxB,CAAwBhlD,IACxD+D,GAAY5H,WAAWoJ,gBAtDIvF,KAAY,CACxCqC,GAAI,UACJwC,MAAO,UACPpF,IAAK1K,EACL+P,UAAWwsB,GACXlyB,KAAM,qBACN9G,MAAO0H,EAAE,2BAA4B,oBACrC0C,SAAU,EACVuxB,YAAavO,GAAoB1lB,KA8COilD,CAAoBjlD,IAC3D+D,GAAY5H,WAAWoJ,gBA5CKvF,KAAY,CACzCqC,GAAI,WACJwC,MAAO,WACPpF,IAAK1K,EACL+P,UAAW6f,GACXvlB,KAAM,gBACN9G,MAAO0H,EAAE,oBAAqB,YAC9B0C,SAAU,IAqC8BwiD,CAAqBllD,KAE7D+D,GAAY5H,WAAWwI,SApCO3E,KAAY,CAC1CqC,GAAInN,EACJuK,IAAKvK,EACL2P,MAAO3P,EACPuO,QAASqG,GACTrJ,MAAO,CACNC,MAAM,GAEPpI,MAAO0H,EAAE,aAAc,UACvB0C,SAAU,IACVqC,SAAS,EACTxB,WAAY,qBAyBoB4hD,CAAsBnlD,GAAG,ED3CxDolD,CAAqBplD,EAAE,GACrB,CAACA,IACG,IAAI,EA2BZ,GAxByBqlD,IACxB9xD,IAAAA,cAAC83C,GAAa,KACb93C,IAAAA,cAACu1C,GAAoB,KACpBv1C,IAAAA,cAAC+xD,EAAAA,cAAa,CAACC,SAAUxuD,GACxBxD,IAAAA,cAACiyD,EAAAA,gBAAe,KACfjyD,IAAAA,cAACsyC,GAAM,MACNnvC,GACAnD,IAAAA,cAACigC,EAAAA,GAAM,KACNjgC,IAAAA,cAAC+/B,EAAAA,GAAK,CAACv3B,KAAM,WACZxI,IAAAA,cAACsxD,GAAiB,QAIrBtxD,IAAAA,cAACuxD,GAAoB,MACrBvxD,IAAAA,cAAC+5C,GAA6B,MAC9B/5C,IAAAA,cAACkhC,GAAa,MACdlhC,IAAAA,cAAC0T,GAAgB,MACjB1T,IAAAA,cAACoxD,GAAS,S,2BElDfc,EAAQ,OAAoB,EAC5BA,EAAQ,EAAoB,CACxBx6C,MAAO,CACHjM,KAAM,UACN3G,MAAO,QACPwvC,cAAe,QACfnP,cAAe,WAEnBttB,GAAI,CACApM,KAAM,aACN3G,MAAO,MAEXgT,GAAI,CACArM,KAAM,UACN3G,MAAO,KACPwvC,cAAe,SAEnBv8B,GAAI,CACAtM,KAAM,UACN3G,MAAO,MAEXkT,GAAI,CACAvM,KAAM,QACN3G,MAAO,MAEXmT,GAAI,CACAxM,KAAM,WACN3G,MAAO,MAEXoT,GAAI,CACAzM,KAAM,MACN3G,MAAO,MAEXqT,GAAI,CACA1M,KAAM,YACN3G,MAAO,KACPqgC,cAAe,SAEnB/sB,GAAI,CACA3M,KAAM,SACN3G,MAAO,MAEXuT,MAAO,CACH5M,KAAM,qBACN3G,MAAO,QACPwvC,cAAe,SAEnBh8B,GAAI,CACA7M,KAAM,SACN3G,MAAO,MAEXyT,GAAI,CACA9M,KAAM,UACN3G,MAAO,MAEX0T,GAAI,CACA/M,KAAM,UACN3G,MAAO,MAEX2T,GAAI,CACAhN,KAAM,MACN3G,MAAO,KACPqgC,cAAe,SAEnBzsB,GAAI,CACAjN,KAAM,SACN3G,MAAO,MAEX6T,GAAI,CACAlN,KAAM,WACN3G,MAAO,KACPqgC,cAAe,SAEnBvsB,GAAI,CACAnN,KAAM,aACN3G,MAAO,M,iBClFf,IAAI8O,EAAM,CACT,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,gBAAiB,CAChB,KACA,IAED,gBAAiB,CAChB,KACA,IACA,KAED,gBAAiB,CAChB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,gBAAiB,CAChB,KACA,IACA,KAED,mBAAoB,CACnB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,gBAAiB,CAChB,KACA,IACA,IAED,gBAAiB,CAChB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,IACA,MAGF,SAASu+C,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAE1+C,EAAKw+C,GAC9B,OAAOxlC,QAAQ2S,UAAUhd,MAAK,KAC7B,IAAIlC,EAAI,IAAIyL,MAAM,uBAAyBsmC,EAAM,KAEjD,MADA/xC,EAAEuL,KAAO,mBACHvL,CAAC,IAIT,IAAI0J,EAAMnW,EAAIw+C,GAAMtjD,EAAKib,EAAI,GAC7B,OAAO6C,QAAQlmB,IAAIqjB,EAAIs+B,MAAM,GAAGz0C,IAAIy+C,EAAoBhyC,IAAIkC,MAAK,IACzD8vC,EAAoB5lD,EAAEqC,EAAI,KAEnC,CACAqjD,EAAoB7yB,KAAO,IAAOhW,OAAOgW,KAAK1rB,GAC9Cu+C,EAAoBrjD,GAAK,KACzBf,EAAOmkD,QAAUC,C","sources":["webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-error-catcher.tsx","webpack://@zextras/carbonio-shell-ui/./src/constants/index.ts","webpack://@zextras/carbonio-shell-ui/./src/store/account/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/account/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/store/i18n/store.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/module-i18next-provider.tsx","webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-context-provider.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/app/utils.tsx","webpack://@zextras/carbonio-shell-ui/./src/search/search-store.tsx","webpack://@zextras/carbonio-shell-ui/./src/search/useSearchModule.ts","webpack://@zextras/carbonio-shell-ui/./src/store/app/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/app/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-loader-mounter.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/i18n/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/search/search-app-view.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/components/account-settings/accounts-list.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/account-settings/persona-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/account-settings/primary-account-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/account-settings/settings-sent-messages.tsx","webpack://@zextras/carbonio-shell-ui/./src/ui-extras/nav-guard.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/settings-header.tsx","webpack://@zextras/carbonio-shell-ui/./src/network/user-agent.ts","webpack://@zextras/carbonio-shell-ui/./src/network/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/reporting/store.ts","webpack://@zextras/carbonio-shell-ui/./src/reporting/functions.ts","webpack://@zextras/carbonio-shell-ui/./src/store/network/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/network/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/workers/index.ts","webpack://@zextras/carbonio-shell-ui/./src/store/folder/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/folder/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/store/folder/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/store/tags/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/tags/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/store/network/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/network/fetch.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/accounts-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/login/store.ts","webpack://@zextras/carbonio-shell-ui/./src/network/logout.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/general-settings-sub-sections.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/logout.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/hooks/use-reset.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/out-of-office-time-period-section.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/out-of-office-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/search-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/user-quota.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/language-and-timezone-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/utils/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/hooks/useLocalStorage.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/general-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/settings-app-view.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/settings-sidebar.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/context-bridge.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/context-bridge.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/boards/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/boards/hooks.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/integrations/composer.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/integrations/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/integrations/utils.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/integrations/hooks.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/integrations/getters.tsx","webpack://@zextras/carbonio-shell-ui/./src/network/tags.ts","webpack://@zextras/carbonio-shell-ui/./src/history/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/store/login/getters.ts","webpack://@zextras/carbonio-shell-ui/./src/notification/NotificationManager.ts","webpack://@zextras/carbonio-shell-ui/./src/search/run-search.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-context.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/hooks/useIsMobile.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-loader-functions.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-loader-setters.ts","webpack://@zextras/carbonio-shell-ui/./src/network/edit-settings.ts","webpack://@zextras/carbonio-shell-ui/./src/ui-extras/app-link.tsx","webpack://@zextras/carbonio-shell-ui/./src/ui-extras/spinner.tsx","webpack://@zextras/carbonio-shell-ui/./src/boot/matomo.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/tracker.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/load-app.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/loader.tsx","webpack://@zextras/carbonio-shell-ui/./src/network/login-config.ts","webpack://@zextras/carbonio-shell-ui/./src/network/get-components.ts","webpack://@zextras/carbonio-shell-ui/./src/network/get-info.ts","webpack://@zextras/carbonio-shell-ui/./src/store/account/normalization.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/load-apps.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/shared-libraries.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/shell-i18n-provider.tsx","webpack://@zextras/carbonio-shell-ui/./src/dark-mode/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/dark-mode/use-dark-mode.ts","webpack://@zextras/carbonio-shell-ui/./src/dark-mode/use-dark-reader-result-value.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/theme-provider.tsx","webpack://@zextras/carbonio-shell-ui/./src/boot/use-get-primary-color.tsx","webpack://@zextras/carbonio-shell-ui/./src/notification/NotificationPermissionChecker.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/app-view-container.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/board.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/board-tab.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/board-tab-list.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/hooks/useResize.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/resizable-container.tsx","webpack://@zextras/carbonio-shell-ui/./src/sruvi/VeryLarge.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/board-container.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/hooks/useMove.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-context-provider.tsx","webpack://@zextras/carbonio-shell-ui/./assets/carbonio.svg","webpack://@zextras/carbonio-shell-ui/./src/search/module-selector.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/logo.tsx","webpack://@zextras/carbonio-shell-ui/./src/search/search-bar.tsx","webpack://@zextras/carbonio-shell-ui/./src/utility-bar/store.ts","webpack://@zextras/carbonio-shell-ui/./src/utility-bar/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-secondary-bar.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-header.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/login/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/badge-wrap.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-primary-bar.tsx","webpack://@zextras/carbonio-shell-ui/./src/utility-bar/bar.tsx","webpack://@zextras/carbonio-shell-ui/./src/utility-bar/panel.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/creation-button.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-view.tsx","webpack://@zextras/carbonio-shell-ui/./src/boot/bootstrapper.tsx","webpack://@zextras/carbonio-shell-ui/./src/boot/app/default-views.ts","webpack://@zextras/carbonio-shell-ui/./src/constants/locales.js","webpack://@zextras/carbonio-shell-ui/./node_modules/date-fns/locale/ lazy \\.[/\\\\](zh-CN%7Cnl%7Cen-US%7Cde%7Chi%7Cit%7Cja%7Cpt%7Cpl%7Cpt-BR%7Cro%7Cru%7Ces%7Cth%7Ctr%7Cfr%7Cvi)[/\\\\]index\\.js$ namespace object"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useCallback } from 'react';\n\nimport { Catcher } from '@zextras/carbonio-design-system';\n\nconst AppErrorCatcher: FC = ({ children }) => {\n\tconst onError = useCallback((error) => {\n\t\tconsole.error(error);\n\t\t// ({event: 'report-exception',data: { exception: error }});\n\t}, []);\n\treturn <Catcher onError={onError}>{children}</Catcher>;\n};\nexport default AppErrorCatcher;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { DynamicThemeFix } from 'darkreader';\n\n/**\n * @deprecated This constant is not used inside shell, and therefore it does not belong to it\n * reference: https://zextras.atlassian.net/wiki/spaces/IRIS/pages/223215854/UI+Guidelines+and+theming\n */\nexport const ZIMBRA_STANDARD_COLORS = [\n\t{ zValue: 0, hex: '#000000', zLabel: 'black' },\n\t{ zValue: 1, hex: '#2b73d2', zLabel: 'blue' },\n\t{ zValue: 2, hex: '#29B6F6', zLabel: 'cyan' },\n\t{ zValue: 3, hex: '#66BB6A', zLabel: 'green' },\n\t{ zValue: 4, hex: '#7e57c2', zLabel: 'purple' },\n\t{ zValue: 5, hex: '#ef5350', zLabel: 'red' },\n\t{ zValue: 6, hex: '#ffc107', zLabel: 'yellow' },\n\t{ zValue: 7, hex: '#edaeab', zLabel: 'pink' },\n\t{ zValue: 8, hex: '#828282', zLabel: 'gray' },\n\t{ zValue: 9, hex: '#FF7043', zLabel: 'orange' }\n];\n\n/**\n * @deprecated Folders concept is something that does not belong to shell\n */\nexport const FOLDERS = {\n\tUSER_ROOT: '1',\n\tINBOX: '2',\n\tTRASH: '3',\n\tSPAM: '4',\n\tSENT: '5',\n\tDRAFTS: '6',\n\tCONTACTS: '7',\n\tTAGS: '8',\n\tCONVERSATIONS: '9',\n\tCALENDAR: '10',\n\tROOT: '11',\n\tNOTEBOOK: '12', // no longer created in new mailboxes since Helix (bug 39647).  old mailboxes may still contain a system folder with id 12\n\tAUTO_CONTACTS: '13',\n\tIM_LOGS: '14',\n\tTASKS: '15',\n\tBRIEFCASE: '16',\n\tLAST_SYSTEM_FOLDER_POSITION: '16.1'\n} as const;\n\nexport const SHELL_APP_ID = 'carbonio-shell-ui';\nexport const SETTINGS_APP_ID = 'settings';\n/**\n * @deprecated This constant is not used and will be deleted in next releases\n */\nexport const ACCOUNTS_APP_ID = 'accounts';\nexport const SEARCH_APP_ID = 'search';\n\nexport const ACTION_TYPES = {\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tCONVERSATION: 'conversation',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tCONVERSATION_lIST: 'conversation_list',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tMESSAGE: 'message',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tMESSAGE_lIST: 'message_list',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tCONTACT: 'contact',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tCONTACT_lIST: 'contact_list',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tINVITE: 'invite',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tINVITE_lIST: 'invite_list',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tAPPOINTMENT: 'appointment',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tAPPOINTMENT_lIST: 'appointment_list',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tFOLDER: 'folder',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tFOLDER_lIST: 'folder_list',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tCALENDAR: 'calendar',\n\t/** @deprecated this action does not belong to shell, and therefore it will be removed in next releases */\n\tCALENDAR_lIST: 'calendar_list',\n\tNEW: 'new'\n} as const;\n\nexport const darkReaderDynamicThemeFixes: DynamicThemeFix = {\n\tignoreImageAnalysis: ['.no-dr-invert *'],\n\tinvert: [],\n\tcss: `\n\t\t.tox, .force-white-bg, .tox-swatches-menu, .tox .tox-edit-area__iframe {\n\t\t\tbackground-color: #fff !important;\n\t\t\tbackground: #fff !important;\n\t\t}\n\t`,\n\tignoreInlineStyle: ['.tox-menu *'],\n\tdisableStyleSheetsProxy: false\n};\n\nconst base = '/carbonio/';\n\nconst focusModeBase = `${base}focus-mode`;\n\nexport const IS_FOCUS_MODE = window.location.pathname.startsWith(focusModeBase);\nexport const BASENAME = IS_FOCUS_MODE ? focusModeBase : base;\nexport const EMAIL_VALIDATION_REGEX =\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars, max-len, no-control-regex\n\t/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\n\n/** @deprecated This user root concept does not belong to the shell, and therefore it will be removed asap */\nexport const ROOT_NAME = 'USER_ROOT';\n\nexport const DARK_READER_VALUES = ['auto', 'enabled', 'disabled'] as const;\n\n/** @deprecated this const is not used inside shell, and therefore it does not belong to it */\nexport const FOLDER_VIEW = {\n\tsearch_folder: 'search folder',\n\ttag: 'tag',\n\tconversation: 'conversation',\n\tmessage: 'message',\n\tcontact: 'contact',\n\tdocument: 'document',\n\tappointment: 'appointment',\n\tvirtual_conversation: 'virtual conversation',\n\tremote_folder: 'remote folder',\n\twiki: 'wiki',\n\ttask: 'task',\n\tchat: 'chat'\n};\nexport const LOCAL_STORAGE_SETTINGS_KEY = 'settings';\nexport const LOCAL_STORAGE_LAST_PRIMARY_KEY = 'config';\nexport const LOCAL_STORAGE_SEARCH_KEY = 'search_suggestions';\nexport const LOCAL_STORAGE_BOARD_SIZE = 'board_size';\nexport const SCALING_OPTIONS = [\n\t{ value: 75, label: 'xs' },\n\t{ value: 87.5, label: 's' },\n\t{ value: 100, label: 'm' },\n\t{ value: 112.5, label: 'l' },\n\t{ value: 125, label: 'xl' }\n] as const;\nexport const BASE_FONT_SIZE = 100;\nexport const SCALING_LIMIT = {\n\twidth: 1400,\n\theight: 900,\n\tdpr: 2 // device pixel ratio\n} as const;\n\nexport const LOGIN_V3_CONFIG_PATH = '/zx/login/v3/config';\nexport const DARK_READER_PROP_KEY = 'zappDarkreaderMode';\nexport const SENTRY_SHELL_DSN = 'https://0ce2448c05b94f0182c47ae52c7ff52c@feedback.zextras.tools/6';\n\nexport const RESULT_LABEL_TYPE = {\n\tnormal: 'normal',\n\twarning: 'warning',\n\terror: 'error'\n} as const;\n\nexport const HEADER_BAR_HEIGHT = '3.75rem';\nexport const PRIMARY_BAR_WIDTH = '3.0625rem';\nexport const BOARD_HEADER_HEIGHT = '3rem';\nexport const BOARD_TAB_WIDTH = 'calc(3rem + 15ch)';\nexport const BOARD_CONTAINER_ZINDEX = 10;\nexport const BOARD_MIN_VISIBILITY = {\n\ttop: 50,\n\tleft: 30\n};\n\nexport const DELEGATED_SEND_SAVE_TARGET = ['owner', 'sender', 'both', 'none'];\nexport const CUSTOM_EVENTS = { updateView: 'updateView' } as const;\n\nexport const JSNS = {\n\taccount: 'urn:zimbraAccount',\n\tadmin: 'urn:zimbraAdmin',\n\tmail: 'urn:zimbraMail',\n\tall: 'urn:zimbra',\n\tsync: 'urn:zimbraSync'\n} as const;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nimport type { AccountState } from '../../types/account';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useAccountStore = create<AccountState>()(() => ({\n\tauthenticated: false,\n\taccount: undefined,\n\tversion: '',\n\tsettings: {\n\t\tprefs: {},\n\t\tattrs: {},\n\t\tprops: []\n\t},\n\tusedQuota: 0,\n\tlastNotificationTime: Date.now()\n}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useMemo } from 'react';\n\nimport { find, get, join } from 'lodash';\n\nimport { useAccountStore } from './store';\nimport type {\n\tAccount,\n\tAccountRightName,\n\tAccountRights,\n\tAccountRightTarget,\n\tAccountSettings\n} from '../../types/account';\n\nexport const useAuthenticated = (): boolean => useAccountStore((s) => s.authenticated);\n\nexport const useUserAccount = (): Account => useAccountStore((s) => s.account as Account);\nexport const useUserAccounts = (): Array<Account> => {\n\tconst acct = useAccountStore((s) => s.account);\n\treturn useMemo(() => (acct ? [acct as Account] : []), [acct]);\n};\n\nexport const useUserRights = (): AccountRights =>\n\tuseAccountStore((s) => s.account?.rights ?? { targets: [] });\n\nexport const useUserRight = (right: AccountRightName): Array<AccountRightTarget> => {\n\tconst { targets } = useUserRights();\n\treturn useMemo(\n\t\t() => find(targets, ['right', right])?.target ?? ([] as Array<AccountRightTarget>),\n\t\t[right, targets]\n\t);\n};\nexport const useUserSettings = (): AccountSettings => useAccountStore((s) => s.settings);\nexport const useUserSetting = <T = void>(...path: Array<string>): string | T =>\n\tuseAccountStore((s) => get(s.settings, join(path, '.')));\n\nexport const getUserAccount = (): Account | undefined => useAccountStore.getState().account;\nexport const getUserAccounts = (): Array<Account> => {\n\tconst { account } = useAccountStore.getState();\n\tconst accounts: Account[] = [];\n\tif (account) {\n\t\taccounts.push(account);\n\t}\n\treturn accounts;\n};\nexport const getUserSettings = (): AccountSettings => useAccountStore.getState().settings;\nexport const getUserSetting = <T = void>(...path: Array<string>): string | T =>\n\tget(useAccountStore.getState().settings, join(path, '.'));\n\nexport const getUserRights = (): AccountRights =>\n\tuseAccountStore.getState().account?.rights ?? { targets: [] };\n\nexport const getUserRight = (right: AccountRightName): Array<AccountRightTarget> =>\n\tfind(getUserRights().targets, ['right', right])?.target ?? ([] as Array<AccountRightTarget>);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { i18n, InitOptions } from 'i18next';\nimport i18next from 'i18next';\nimport Backend from 'i18next-http-backend';\nimport { produce } from 'immer';\nimport { dropRight, forEach, reduce } from 'lodash';\nimport { initReactI18next } from 'react-i18next';\nimport { create } from 'zustand';\n\nimport { SHELL_APP_ID } from '../../constants';\nimport type { CarbonioModule } from '../../types/apps';\nimport { useAccountStore } from '../account';\n\nexport type I18nState = {\n\tinstances: Record<string, i18n>;\n\tdefaultI18n: i18n;\n\tlocale: string;\n};\n\ntype I18nActions = {\n\tsetLocale: (locale: string) => void;\n\taddI18n: (apps: Array<CarbonioModule>, locale: string) => void;\n};\n\nconst addShell = (apps: Array<CarbonioModule>): Array<CarbonioModule> => [\n\t...apps,\n\t{\n\t\tcommit: '',\n\t\tdescription: '',\n\t\tjs_entrypoint: '',\n\t\tname: SHELL_APP_ID,\n\t\tpriority: -1,\n\t\tversion: '',\n\t\ttype: 'shell',\n\t\tattrKey: '',\n\t\ticon: '',\n\t\tdisplay: 'Shell'\n\t}\n];\n\nconst { settings } = useAccountStore.getState();\n\nconst defaultLng =\n\t(settings?.prefs?.zimbraPrefLocale as string) ??\n\t(settings?.attrs?.zimbraLocale as string) ??\n\t'en';\n\nconst defaultI18n = i18next.createInstance({ lng: defaultLng });\n\nconst defaultI18nInitOptions: InitOptions = {\n\treturnEmptyString: true,\n\treturnNull: false,\n\tcompatibilityJSON: 'v4',\n\tlng: defaultLng,\n\tfallbackLng: 'en',\n\tdebug: false,\n\tinterpolation: {\n\t\tescapeValue: false // not needed for react as it escapes by default\n\t},\n\tmissingKeyHandler: (_, __, key) => {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.warn(`Missing translation with key '${key}'`);\n\t},\n\tbackend: {\n\t\tloadPath: `${BASE_PATH}/i18n/{{lng}}.json`\n\t}\n};\n\nexport const useI18nStore = create<I18nState & I18nActions>()((set) => ({\n\tinstances: {},\n\tdefaultI18n,\n\tlocale: 'en',\n\tsetLocale: (locale: string): void => {\n\t\tset(\n\t\t\tproduce((state: I18nState) => {\n\t\t\t\tstate.locale = locale;\n\t\t\t\tforEach(state.instances, (i18nInst) => i18nInst.changeLanguage(locale));\n\t\t\t})\n\t\t);\n\t},\n\taddI18n: (apps: Array<CarbonioModule>, locale: string): void => {\n\t\tconst appsWithShell = addShell(apps);\n\t\tset(\n\t\t\tproduce((state: I18nState) => {\n\t\t\t\tstate.instances = reduce<CarbonioModule, Record<string, i18n>>(\n\t\t\t\t\tappsWithShell,\n\t\t\t\t\t(acc, app): Record<string, i18n> => {\n\t\t\t\t\t\tconst newI18n = i18next.createInstance();\n\t\t\t\t\t\tnewI18n\n\t\t\t\t\t\t\t// load translation using http -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\n\t\t\t\t\t\t\t// learn more: https://github.com/i18next/i18next-http-backend\n\t\t\t\t\t\t\t.use(Backend)\n\t\t\t\t\t\t\t// init i18next\n\t\t\t\t\t\t\t// for all options read: https://www.i18next.com/overview/configuration-options\n\t\t\t\t\t\t\t.init({\n\t\t\t\t\t\t\t\t...defaultI18nInitOptions,\n\t\t\t\t\t\t\t\tlng: locale,\n\t\t\t\t\t\t\t\tbackend: {\n\t\t\t\t\t\t\t\t\tloadPath:\n\t\t\t\t\t\t\t\t\t\tapp.name === SHELL_APP_ID\n\t\t\t\t\t\t\t\t\t\t\t? `${BASE_PATH}/i18n/{{lng}}.json`\n\t\t\t\t\t\t\t\t\t\t\t: `${dropRight(app.js_entrypoint.split('/')).join('/')}/i18n/{{lng}}.json`\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tacc[app.name] = newI18n;\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t},\n\t\t\t\t\t{}\n\t\t\t\t);\n\t\t\t\tstate.defaultI18n.t = state.instances[SHELL_APP_ID].t;\n\t\t\t\tstate.locale = locale;\n\t\t\t})\n\t\t);\n\t}\n}));\n\ndefaultI18n\n\t.use(Backend)\n\t// pass the i18n instance to react-i18next.\n\t.use(initReactI18next)\n\t// init i18next\n\t// for all options read: https://www.i18next.com/overview/configuration-options\n\t.init(defaultI18nInitOptions);\n","/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react';\n\nimport { I18nextProvider } from 'react-i18next';\n\nimport { SHELL_APP_ID } from '../constants';\nimport { useI18nStore } from '../store/i18n/store';\n\ninterface ModuleI18nextProviderProps {\n\tpkg: string;\n\tchildren: React.ReactNode | React.ReactNode[];\n}\nexport const ModuleI18nextProvider = ({\n\tpkg,\n\tchildren\n}: ModuleI18nextProviderProps): React.JSX.Element => {\n\tconst { instances, defaultI18n } = useI18nStore.getState();\n\tconst i18n = instances[pkg] ?? instances[SHELL_APP_ID] ?? defaultI18n;\n\n\treturn <I18nextProvider i18n={i18n}>{children}</I18nextProvider>;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react';\n\nimport AppErrorCatcher from './app-error-catcher';\nimport { ModuleI18nextProvider } from '../module-i18next-provider';\n\ninterface AppContextProviderProps {\n\tpkg: string;\n\tchildren: React.ReactNode | React.ReactNode[];\n}\n\nconst AppContextProvider = ({ pkg, children }: AppContextProviderProps): React.JSX.Element => (\n\t<ModuleI18nextProvider pkg={pkg}>\n\t\t<AppErrorCatcher>{children}</AppErrorCatcher>\n\t</ModuleI18nextProvider>\n);\n\nexport default AppContextProvider;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React from 'react';\n\nimport { trim } from 'lodash';\n\nimport type {\n\tAppRouteDescriptor,\n\tBadgeInfo,\n\tBoardView,\n\tCarbonioModule,\n\tPrimaryAccessoryView,\n\tSearchView,\n\tSecondaryAccessoryView,\n\tSettingsView,\n\tUtilityView\n} from '../../types/apps';\n\nexport const normalizeApp = (app: Partial<CarbonioModule>): CarbonioModule => ({\n\tcommit: app.commit ?? '',\n\tdescription: app.description ?? 'A carbonio Module',\n\t// eslint-disable-next-line camelcase\n\tjs_entrypoint: app.js_entrypoint ?? '',\n\tname: app.name ?? 'module',\n\tpriority: app.priority ?? 99,\n\tversion: app.version ?? '',\n\ttype: app.type ?? 'carbonio',\n\tattrKey: app.attrKey,\n\ticon: app.icon ?? 'Cube',\n\tdisplay: app.display ?? 'Module',\n\tsentryDsn: app.sentryDsn\n});\n\nconst FallbackView: FC = () => <p>Missing Component</p>;\n\nexport const normalizeBadgeInfo = (badge: Partial<BadgeInfo>): BadgeInfo => ({\n\tshow: badge.show ?? false,\n\tcount: badge.count ?? 0,\n\tshowCount: badge.showCount ?? false,\n\tcolor: badge.color ?? 'primary'\n});\n\nexport const normalizeRoute = (\n\tdata: Partial<AppRouteDescriptor>,\n\tapp: CarbonioModule\n): AppRouteDescriptor => {\n\tconst route = trim(data.route ?? app.name, '/');\n\treturn {\n\t\tapp: app.name,\n\t\troute,\n\t\tid: data.id ?? route,\n\t\tbadge: normalizeBadgeInfo(data?.badge ?? {}),\n\t\tposition: data?.position ?? app.priority,\n\t\tvisible: data?.visible ?? true,\n\t\tlabel: data?.label ?? '',\n\t\tprimaryBar: data.primaryBar ?? app.icon ?? 'CubeOutline',\n\t\tsecondaryBar: data.secondaryBar,\n\t\tappView: data.appView ?? FallbackView,\n\t\tfocusMode: data.focusMode\n\t};\n};\n\nexport const normalizeSettingsView = (\n\tdata: Partial<SettingsView>,\n\tapp: CarbonioModule\n): SettingsView => {\n\tconst route = trim(data.route ?? app.name, '/');\n\treturn {\n\t\tapp: app.name,\n\t\troute,\n\t\tid: data?.id ?? route,\n\t\tcomponent: data?.component ?? FallbackView,\n\t\tlabel: data.label ?? app.display,\n\t\ticon: data.icon ?? app.icon,\n\t\tposition: data.position ?? app.priority ?? 99,\n\t\tsubSections: data.subSections ?? []\n\t};\n};\nexport const normalizeSearchView = (data: Partial<SearchView>, app: CarbonioModule): SearchView => {\n\tconst route = trim(data.route ?? app.name, '/');\n\treturn {\n\t\tapp: app.name,\n\t\troute,\n\t\tid: data?.id ?? route,\n\t\tcomponent: data?.component ?? FallbackView,\n\t\tlabel: data.label ?? app.display,\n\t\ticon: data.icon ?? app.icon,\n\t\tposition: data.position ?? app.priority ?? 99\n\t};\n};\nexport const normalizeUtilityView = (\n\tdata: Partial<UtilityView>,\n\tapp: CarbonioModule\n): UtilityView => ({\n\tapp: app.name,\n\tid: data?.id ?? app.name,\n\twhitelistRoutes: data?.whitelistRoutes,\n\tblacklistRoutes: data?.blacklistRoutes,\n\tcomponent: data?.component ?? FallbackView,\n\tbutton: data?.button ?? 'Cube',\n\tbadge: normalizeBadgeInfo(data?.badge ?? {}),\n\tposition: data?.position ?? app.priority,\n\tlabel: data?.label ?? app.display\n});\nexport const normalizePrimaryAccessoryView = (\n\tdata: Partial<PrimaryAccessoryView>,\n\tapp: CarbonioModule\n): PrimaryAccessoryView => ({\n\tapp: app.name,\n\tonClick: data?.onClick,\n\tlabel: data?.label ?? app.display,\n\tposition: data?.position ?? app.priority,\n\twhitelistRoutes: data?.whitelistRoutes,\n\tblacklistRoutes: data?.blacklistRoutes,\n\tid: data?.id ?? app.name,\n\tcomponent: data?.component ?? FallbackView\n});\nexport const normalizeSecondaryAccessoryView = (\n\tdata: Partial<SecondaryAccessoryView>,\n\tapp: CarbonioModule\n): SecondaryAccessoryView => ({\n\tapp: app.name,\n\tposition: data?.position ?? app.priority,\n\twhitelistRoutes: data?.whitelistRoutes,\n\tblacklistRoutes: data?.blacklistRoutes,\n\tid: data?.id ?? app.name,\n\tcomponent: data?.component ?? FallbackView\n});\n\nexport const normalizeBoardView = (data: Partial<BoardView>, app: CarbonioModule): BoardView => {\n\tconst route = trim(data.route ?? app.name, '/');\n\treturn {\n\t\tapp: app.name,\n\t\troute,\n\t\tid: data?.id ?? route,\n\t\tcomponent: data?.component ?? FallbackView\n\t};\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { isFunction } from 'lodash';\nimport { create } from 'zustand';\n\nimport type { QueryChip, SearchState } from '../types/search';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useSearchStore = create<SearchState>()((set, get) => ({\n\tquery: [],\n\tsearchDisabled: false,\n\ttooltip: undefined,\n\tsetSearchDisabled: (searchDisabled: boolean, tooltip?: string): void =>\n\t\tset({ searchDisabled, tooltip }),\n\tupdateQuery: (query: Array<QueryChip> | ((q: Array<QueryChip>) => Array<QueryChip>)): void =>\n\t\tset({ query: isFunction(query) ? query(get().query) : query }),\n\tupdateModule: (module: string): void => set({ module })\n}));\n","/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useSearchStore } from './search-store';\n\nexport const SEARCH_MODULE_KEY = 'search_module';\n\nexport const setSearchModule = (newModule: string): void => {\n\tsessionStorage.setItem(SEARCH_MODULE_KEY, newModule);\n\tuseSearchStore.getState().updateModule(newModule);\n};\nexport const useSearchModule = (): [\n\tmodule: string | undefined,\n\tsetModule: (module: string) => void\n] => {\n\tconst { module } = useSearchStore();\n\n\treturn [module ?? sessionStorage.getItem(SEARCH_MODULE_KEY) ?? undefined, setSearchModule];\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { ComponentType } from 'react';\n\nimport { produce } from 'immer';\nimport { findIndex, merge, reduce, some } from 'lodash';\nimport { create } from 'zustand';\n\nimport { normalizeApp } from './utils';\nimport { SHELL_APP_ID } from '../../constants';\nimport { useSearchStore } from '../../search/search-store';\nimport { SEARCH_MODULE_KEY } from '../../search/useSearchModule';\nimport type {\n\tAppRoute,\n\tAppRouteDescriptor,\n\tAppView,\n\tBadgeInfo,\n\tBoardView,\n\tCarbonioModule,\n\tPrimaryAccessoryView,\n\tPrimaryBarView,\n\tSearchView,\n\tSecondaryAccessoryView,\n\tSecondaryBarView,\n\tSettingsView,\n\tUtilityView\n} from '../../types/apps';\n\nexport type AppState = {\n\tfocusMode: false | string;\n\tapps: Record<string, CarbonioModule>;\n\tappContexts: Record<string, unknown>;\n\tentryPoints: Record<string, ComponentType>;\n\troutes: Record<string, AppRoute>;\n\tviews: {\n\t\tprimaryBar: Array<PrimaryBarView>;\n\t\tsecondaryBar: Array<SecondaryBarView>;\n\t\tappView: Array<AppView>;\n\t\tboard: Array<BoardView>;\n\t\tutilityBar: Array<UtilityView>;\n\t\tsettings: Array<SettingsView>;\n\t\tsearch: Array<SearchView>;\n\t\tprimaryBarAccessories: Array<PrimaryAccessoryView>;\n\t\tsecondaryBarAccessories: Array<SecondaryAccessoryView>;\n\t};\n\tshell: CarbonioModule;\n};\n\nexport type AppActions = {\n\tsetApps: (apps: Array<Partial<CarbonioModule>>) => void;\n\tupsertApp: (app: Pick<CarbonioModule, 'name' | 'display' | 'description'>) => void;\n\taddRoute: (routeData: AppRouteDescriptor) => string;\n\tsetRouteVisibility: (id: string, visible: boolean) => void;\n\tremoveRoute: (id: string) => void;\n\tupdatePrimaryBadge: (badge: Partial<BadgeInfo>, id: string) => void;\n\tupdateUtilityBadge: (badge: Partial<BadgeInfo>, id: string) => void;\n\taddBoardView: (data: BoardView) => string;\n\tremoveBoardView: (id: string) => void;\n\taddSettingsView: (data: SettingsView) => string;\n\tremoveSettingsView: (id: string) => void;\n\taddSearchView: (data: SearchView) => string;\n\tremoveSearchView: (id: string) => void;\n\taddUtilityView: (data: UtilityView) => string;\n\tremoveUtilityView: (id: string) => void;\n\taddPrimaryAccessoryView: (data: PrimaryAccessoryView) => string;\n\tremovePrimaryAccessoryView: (id: string) => void;\n\taddSecondaryAccessoryView: (data: SecondaryAccessoryView) => string;\n\tremoveSecondaryAccessoryView: (id: string) => void;\n\tsetAppContext: (app: string) => (context: unknown) => void;\n};\n\nconst FOCUS_MODE_RESPONSE = 'focus-mode';\n\nfunction addIfNotPresent<T extends { id: unknown }>(\n\titems: T[],\n\titemToAdd: T,\n\tonAdd?: (items: T[], item: T) => void\n): void {\n\tif (!some(items, (item) => item.id === itemToAdd.id)) {\n\t\titems.push(itemToAdd);\n\t\tonAdd?.(items, itemToAdd);\n\t}\n}\n\nfunction sortByPosition<T extends { position: number }>(items: T[]): void {\n\titems.sort((a, b) => a.position - b.position);\n}\n\nfunction addAndSort<T extends { id: unknown; position: number }>(items: T[], itemToAdd: T): void {\n\taddIfNotPresent(items, itemToAdd, sortByPosition);\n}\n\nfunction removeById<T extends { id: unknown }>(items: T[], id: unknown): void {\n\tconst index = findIndex(items, (item) => item.id === id);\n\tif (index !== -1) {\n\t\titems.splice(index, 1);\n\t}\n}\n\nconst initialState: AppState = {\n\tfocusMode: false,\n\tapps: {},\n\tappContexts: {},\n\tshell: {\n\t\tcommit: '',\n\t\tdescription: '',\n\t\tjs_entrypoint: '',\n\t\tname: SHELL_APP_ID,\n\t\tpriority: -1,\n\t\tversion: '',\n\t\ttype: 'shell',\n\t\tattrKey: '',\n\t\ticon: '',\n\t\tdisplay: 'Shell'\n\t},\n\tentryPoints: {},\n\troutes: {},\n\tviews: {\n\t\tprimaryBar: [],\n\t\tsecondaryBar: [],\n\t\tappView: [],\n\t\tboard: [],\n\t\tutilityBar: [],\n\t\tsettings: [],\n\t\tsearch: [],\n\t\tprimaryBarAccessories: [],\n\t\tsecondaryBarAccessories: []\n\t}\n};\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useAppStore = create<AppState & AppActions>()((set, get) => ({\n\t...initialState,\n\tsetApps: (apps): void => {\n\t\tset(() => {\n\t\t\tconst { moduleApps, shellApp, appContexts } = reduce<\n\t\t\t\tPartial<CarbonioModule>,\n\t\t\t\t{\n\t\t\t\t\tmoduleApps: AppState['apps'];\n\t\t\t\t\tshellApp: AppState['shell'];\n\t\t\t\t\tappContexts: AppState['appContexts'];\n\t\t\t\t}\n\t\t\t>(\n\t\t\t\tapps,\n\t\t\t\t(accumulator, app) => {\n\t\t\t\t\tif (app.name) {\n\t\t\t\t\t\tconst normalizedApp = normalizeApp(app);\n\t\t\t\t\t\tif (app.name !== SHELL_APP_ID) {\n\t\t\t\t\t\t\taccumulator.moduleApps[app.name] = normalizedApp;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taccumulator.shellApp = normalizedApp;\n\t\t\t\t\t\t}\n\t\t\t\t\t\taccumulator.appContexts[app.name] = {};\n\t\t\t\t\t}\n\t\t\t\t\treturn accumulator;\n\t\t\t\t},\n\t\t\t\t{ moduleApps: {}, shellApp: {} as CarbonioModule, appContexts: {} }\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tapps: moduleApps,\n\t\t\t\tshell: shellApp,\n\t\t\t\tappContexts\n\t\t\t};\n\t\t});\n\t},\n\tupsertApp: (app): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tstate.apps[app.name] = { ...state.apps[app.name], ...app };\n\t\t\t})\n\t\t);\n\t},\n\tsetAppContext:\n\t\t(app) =>\n\t\t(context): void => {\n\t\t\tset(\n\t\t\t\tproduce<AppState>((state) => {\n\t\t\t\t\tstate.appContexts[app] = merge(state.appContexts[app], context);\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\taddRoute: (routeData): string => {\n\t\tconst { focusMode } = get();\n\t\tif (focusMode && (routeData.route !== focusMode || !routeData.focusMode)) {\n\t\t\treturn FOCUS_MODE_RESPONSE;\n\t\t}\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tstate.routes[routeData.id] = routeData;\n\t\t\t\tif (routeData.primaryBar && !routeData.focusMode) {\n\t\t\t\t\taddAndSort(state.views.primaryBar, {\n\t\t\t\t\t\tapp: routeData.app,\n\t\t\t\t\t\tid: routeData.id,\n\t\t\t\t\t\troute: routeData.route,\n\t\t\t\t\t\tcomponent: routeData.primaryBar,\n\t\t\t\t\t\tbadge: routeData.badge,\n\t\t\t\t\t\tposition: routeData.position,\n\t\t\t\t\t\tvisible: routeData.visible,\n\t\t\t\t\t\tlabel: routeData.label\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (routeData.secondaryBar) {\n\t\t\t\t\taddIfNotPresent(state.views.secondaryBar, {\n\t\t\t\t\t\tapp: routeData.app,\n\t\t\t\t\t\tid: routeData.id,\n\t\t\t\t\t\troute: routeData.route,\n\t\t\t\t\t\tcomponent: routeData.secondaryBar\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (routeData.appView) {\n\t\t\t\t\taddIfNotPresent(state.views.appView, {\n\t\t\t\t\t\tapp: routeData.app,\n\t\t\t\t\t\tid: routeData.id,\n\t\t\t\t\t\troute: routeData.route,\n\t\t\t\t\t\tcomponent: routeData.appView\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// TODO remove with SHELL-212\n\t\t\t\tif (routeData.app && state.apps[routeData.app] && routeData.focusMode !== true) {\n\t\t\t\t\tstate.apps[routeData.app].display = routeData.label;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\treturn routeData.id;\n\t},\n\tsetRouteVisibility: (id, visible): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tconst idx = findIndex(state.views.primaryBar, (view) => view.id === id);\n\t\t\t\tif (idx >= 0) {\n\t\t\t\t\tstate.views.primaryBar[idx].visible = visible;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t},\n\tremoveRoute: (id): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tdelete state.routes[id];\n\t\t\t\tremoveById(state.views.primaryBar, id);\n\t\t\t\tremoveById(state.views.secondaryBar, id);\n\t\t\t\tremoveById(state.views.appView, id);\n\t\t\t})\n\t\t);\n\t},\n\taddBoardView: (data): string => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\taddIfNotPresent(state.views.board, data);\n\t\t\t})\n\t\t);\n\t\treturn data.id;\n\t},\n\tremoveBoardView: (id): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tremoveById(state.views.board, id);\n\t\t\t})\n\t\t);\n\t},\n\taddSettingsView: (data): string => {\n\t\tconst { focusMode } = get();\n\t\tif (focusMode && data.route !== focusMode) {\n\t\t\treturn FOCUS_MODE_RESPONSE;\n\t\t}\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\taddAndSort(state.views.settings, data);\n\t\t\t})\n\t\t);\n\t\treturn data.id;\n\t},\n\tremoveSettingsView: (id): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tremoveById(state.views.settings, id);\n\t\t\t})\n\t\t);\n\t},\n\taddSearchView: (data): string => {\n\t\tconst {\n\t\t\tfocusMode,\n\t\t\tviews: { search }\n\t\t} = get();\n\n\t\tconst lastSearchModule = sessionStorage.getItem(SEARCH_MODULE_KEY) ?? undefined;\n\t\tconst currentSearchModule = useSearchStore.getState().module;\n\n\t\tif (currentSearchModule !== lastSearchModule || currentSearchModule === undefined) {\n\t\t\tconst currentModuleSearchView = search.find(\n\t\t\t\t(searchView) => searchView.route === currentSearchModule\n\t\t\t);\n\t\t\tif (\n\t\t\t\t!currentModuleSearchView ||\n\t\t\t\tdata.position < currentModuleSearchView?.position ||\n\t\t\t\tdata.route === lastSearchModule\n\t\t\t) {\n\t\t\t\tuseSearchStore.getState().updateModule(data.route);\n\t\t\t}\n\t\t}\n\n\t\tif (focusMode && data.route !== focusMode) {\n\t\t\treturn FOCUS_MODE_RESPONSE;\n\t\t}\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\taddAndSort(state.views.search, data);\n\t\t\t})\n\t\t);\n\t\treturn data.id;\n\t},\n\tremoveSearchView: (id): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tremoveById(state.views.search, id);\n\t\t\t})\n\t\t);\n\t},\n\taddUtilityView: (data): string => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\taddAndSort(state.views.utilityBar, data);\n\t\t\t})\n\t\t);\n\t\treturn data.id;\n\t},\n\tremoveUtilityView: (id): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tremoveById(state.views.utilityBar, id);\n\t\t\t})\n\t\t);\n\t},\n\taddPrimaryAccessoryView: (data): string => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\taddAndSort(state.views.primaryBarAccessories, data);\n\t\t\t})\n\t\t);\n\t\treturn data.id;\n\t},\n\tremovePrimaryAccessoryView: (id): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tremoveById(state.views.primaryBarAccessories, id);\n\t\t\t})\n\t\t);\n\t},\n\taddSecondaryAccessoryView: (data): string => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\taddAndSort(state.views.secondaryBarAccessories, data);\n\t\t\t})\n\t\t);\n\t\treturn data.id;\n\t},\n\tremoveSecondaryAccessoryView: (id): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tremoveById(state.views.secondaryBarAccessories, id);\n\t\t\t})\n\t\t);\n\t},\n\tupdatePrimaryBadge: (badge, id): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tconst idx = findIndex(state.views.primaryBar, (bar) => bar.id === id);\n\t\t\t\tif (idx >= 0) {\n\t\t\t\t\tstate.views.primaryBar[idx].badge = {\n\t\t\t\t\t\t...state.views.primaryBar[idx].badge,\n\t\t\t\t\t\t...badge\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t},\n\tupdateUtilityBadge: (badge, id): void => {\n\t\tset(\n\t\t\tproduce<AppState>((state) => {\n\t\t\t\tconst idx = findIndex(state.views.utilityBar, (bar) => bar.id === id);\n\t\t\t\tif (idx >= 0) {\n\t\t\t\t\tstate.views.utilityBar[idx].badge = {\n\t\t\t\t\t\t...state.views.utilityBar[idx].badge,\n\t\t\t\t\t\t...badge\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useMemo } from 'react';\n\nimport { sortBy } from 'lodash';\n\nimport { useAppStore } from './store';\nimport type { AppRoute, CarbonioModule } from '../../types/apps';\n\nexport const getAppHook = (appId: string) => (): CarbonioModule =>\n\tuseAppStore((s) => s.apps[appId]);\nexport const useApps = (): Record<string, CarbonioModule> => useAppStore((s) => s.apps);\nexport const useAppList = (): Array<CarbonioModule> => {\n\tconst apps = useApps();\n\treturn useMemo(() => sortBy(apps, (a) => a.priority), [apps]);\n};\nexport const getAppList = (): Array<CarbonioModule> =>\n\tsortBy(useAppStore.getState().apps, (a) => a.priority);\n\nexport const getApp = (appId: string) => (): CarbonioModule | undefined =>\n\tuseAppStore.getState().apps[appId];\nexport const getApps = (): Record<string, CarbonioModule> => useAppStore.getState().apps;\n\nexport const getAppContextHook =\n\t(appId: string) =>\n\t<T>(): T =>\n\t\tuseAppStore((s) => s.appContexts[appId] as T);\nexport const getAppContext = (appId: string) => (): unknown =>\n\tuseAppStore.getState().appContexts[appId];\nexport const getShell = (): CarbonioModule => useAppStore.getState().shell;\nexport const getRoutes = (): Record<string, AppRoute> => useAppStore.getState().routes;\nexport const useRoutes = (): Record<string, AppRoute> => useAppStore((s) => s.routes);\nexport const getRoute = (id: string): AppRoute => useAppStore.getState().routes[id];\nexport const useRoute = (id: string): AppRoute => useAppStore((s) => s.routes[id]);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { map } from 'lodash';\n\nimport AppContextProvider from './app-context-provider';\nimport { useAppStore } from '../../store/app';\n\nconst Mounter: FC<{ appId: string }> = ({ children, appId }) => (\n\t<div key={appId} id={appId}>\n\t\t<AppContextProvider key={appId} pkg={appId}>\n\t\t\t{children}\n\t\t</AppContextProvider>\n\t</div>\n);\n\nconst AppLoaderMounter: FC = () => {\n\tconst entryPoints = useAppStore((s) => s.entryPoints);\n\tconst entries = useMemo(\n\t\t() =>\n\t\t\tmap(entryPoints, (Comp, appId) => (\n\t\t\t\t<Mounter key={appId} appId={appId}>\n\t\t\t\t\t<Comp />\n\t\t\t\t</Mounter>\n\t\t\t)),\n\t\t[entryPoints]\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tdata-testid=\"app-mounter\"\n\t\t\tkey=\"app-mounter\"\n\t\t\thidden\n\t\t\tstyle={{ height: 0, overflow: 'hidden' }}\n\t\t>\n\t\t\t{entries}\n\t\t</div>\n\t);\n};\n\nexport default AppLoaderMounter;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { i18n, TFunction } from 'i18next';\n\nimport { useI18nStore } from './store';\nimport { SHELL_APP_ID } from '../../constants';\n\nexport const getI18n = (app: string) => (): i18n => {\n\tconst { instances, defaultI18n } = useI18nStore.getState();\n\treturn instances[app] ?? instances[SHELL_APP_ID] ?? defaultI18n;\n};\n\nexport const getTFunction = (app: string): TFunction => {\n\tconst { instances, defaultI18n } = useI18nStore.getState();\n\treturn instances[app]?.t ?? defaultI18n.t;\n};\n\nexport const getT = (): TFunction => {\n\tconst { instances, defaultI18n } = useI18nStore.getState();\n\treturn instances[SHELL_APP_ID]?.t ?? defaultI18n.t;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useMemo } from 'react';\n\nimport { Chip, Container, Divider, Icon, Padding, Text } from '@zextras/carbonio-design-system';\nimport { map } from 'lodash';\n\nimport { useSearchStore } from './search-store';\nimport { useSearchModule } from './useSearchModule';\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { RESULT_LABEL_TYPE } from '../constants';\nimport { useAppStore } from '../store/app';\nimport { getT } from '../store/i18n/hooks';\nimport { type SearchState } from '../types/search';\nimport type { ValueOf } from '../utils/typeUtils';\nimport { Button, Grid2, Typography } from '@mui/material';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport {\n\tCENTER_CONTENT_BUTTON_BACKGROUND_COLOR,\n\tCENTER_CONTENT_BUTTON_ICON_COLOR,\n\tCENTER_CONTENT_BUTTON_TEXT_COLOR\n} from '../sruvi/EditedColors';\n\nconst useQuery = (): [query: SearchState['query'], updateQuery: SearchState['updateQuery']] =>\n\tuseSearchStore((s) => [s.query, s.updateQuery]);\n\nconst useDisableSearch = (): [\n\tisDisabled: SearchState['searchDisabled'],\n\tsetDisabled: SearchState['setSearchDisabled']\n] => useSearchStore((s) => [s.searchDisabled, s.setSearchDisabled]);\n\nconst getIconAndColor = (\n\tlabelType: ValueOf<typeof RESULT_LABEL_TYPE>\n): [icon: string, color: string] => {\n\tif (labelType === RESULT_LABEL_TYPE.warning) {\n\t\treturn ['AlertTriangle', 'warning'];\n\t}\n\tif (labelType === RESULT_LABEL_TYPE.error) {\n\t\treturn ['CloseSquare', 'error'];\n\t}\n\treturn ['', ''];\n};\n\ninterface ResultsHeaderProps {\n\tlabel: string;\n\tlabelType?: ValueOf<typeof RESULT_LABEL_TYPE>;\n}\n\nconst ResultsHeader = ({\n\tlabel,\n\tlabelType = RESULT_LABEL_TYPE.normal\n}: ResultsHeaderProps): React.JSX.Element => {\n\tconst t = getT();\n\tconst [query, updateQuery] = useQuery();\n\tconst [, setDisabled] = useDisableSearch();\n\n\tconst resetQuery = useCallback(() => {\n\t\tupdateQuery([]);\n\t\tsetDisabled(false);\n\t}, [updateQuery, setDisabled]);\n\n\tconst labelTypeElem = useMemo<React.JSX.Element>(() => {\n\t\tif (labelType === RESULT_LABEL_TYPE.normal) {\n\t\t\treturn <></>;\n\t\t}\n\n\t\tconst [icon, color] = getIconAndColor(labelType);\n\t\treturn (\n\t\t\t<Padding right=\"small\">\n\t\t\t\t<Icon icon={icon} size=\"large\" color={color} />\n\t\t\t</Padding>\n\t\t);\n\t}, [labelType]);\n\n\tconst chipItems = useMemo(\n\t\t() =>\n\t\t\tmap(query, (queryChip, index) => (\n\t\t\t\t<Padding key={`${index}${queryChip.label}`} all=\"extrasmall\">\n\t\t\t\t\t<Chip {...queryChip} background={'gray5'} />\n\t\t\t\t</Padding>\n\t\t\t)),\n\t\t[query]\n\t);\n\n\treturn (\n\t\t<div style={{ display: 'flex', width: '100%', maxHeight: '7.5rem' }}>\n\t\t\t<Grid2 container sx={{ width: '100%', height: '100%' }}>\n\t\t\t\t<Grid2 size={8} sx={{ padding: '16px' }}>\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\n\t\t\t\t\t\t{labelTypeElem}\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ marginLeft: '8px' }}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t{chipItems}\n\t\t\t\t\t</div>\n\t\t\t\t</Grid2>\n\t\t\t\t<Grid2 size={4} sx={{ padding: '16px' }}>\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'flex-end' }}>\n\t\t\t\t\t\t{query?.length > 0 && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={resetQuery}\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tstartIcon={<ClearIcon style={{ color: CENTER_CONTENT_BUTTON_ICON_COLOR }} />}\n\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\tbackgroundColor: CENTER_CONTENT_BUTTON_BACKGROUND_COLOR,\n\t\t\t\t\t\t\t\t\tcolor: CENTER_CONTENT_BUTTON_TEXT_COLOR\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('label.clear_search_query', 'CLEAR SEARCH')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</Grid2>\n\t\t\t\t<Grid2>\n\t\t\t\t\t<Divider color=\"gray3\" />\n\t\t\t\t</Grid2>\n\t\t\t</Grid2>\n\t\t</div>\n\n\t\t// <>\n\t\t// \t<Container\n\t\t// \t\torientation=\"horizontal\"\n\t\t// \t\tmainAlignment=\"flex-start\"\n\t\t// \t\twidth=\"100%\"\n\t\t// \t\tbackground={'white'}\n\t\t// \t\theight=\"fit\"\n\t\t// \t\tminHeight=\"3rem\"\n\t\t// \t\tmaxHeight=\"7.5rem\"\n\t\t// \t\tstyle={{ overflow: 'hidden', borderRadius: '16px' }}\n\t\t// \t\tpadding={{ horizontal: 'large', vertical: 'medium' }}\n\t\t// \t>\n\t\t// \t\t<Container width=\"85%\" orientation=\"horizontal\" wrap=\"wrap\" mainAlignment=\"flex-start\">\n\t\t// \t\t\t{labelTypeElem}\n\t\t// \t\t\t<Text color=\"secondary\">{label}</Text>\n\t\t// \t\t\t{chipItems}\n\t\t// \t\t</Container>\n\t\t// \t\t{query?.length > 0 && (\n\t\t// \t\t\t<Container width=\"15%\" mainAlignment=\"flex-start\" crossAlignment=\"flex-start\">\n\t\t// \t\t\t\t<Button\n\t\t// \t\t\t\t\tlabel={t('label.clear_search_query', 'CLEAR SEARCH')}\n\t\t// \t\t\t\t\ticon=\"CloseOutline\"\n\t\t// \t\t\t\t\tcolor=\"primary\"\n\t\t// \t\t\t\t\twidth=\"fill\"\n\t\t// \t\t\t\t\ttype=\"ghost\"\n\t\t// \t\t\t\t\tonClick={resetQuery}\n\t\t// \t\t\t\t/>\n\t\t// \t\t\t</Container>\n\t\t// \t\t)}\n\t\t// \t</Container>\n\t\t// \t<Divider color=\"gray3\" />\n\t\t// </>\n\t);\n};\n\nexport const SearchAppView = (): React.JSX.Element => {\n\tconst searchViews = useAppStore((s) => s.views.search);\n\tconst [module] = useSearchModule();\n\n\tconst searchView = useMemo(\n\t\t() => searchViews.find((m) => m.route === module),\n\t\t[module, searchViews]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{searchView && (\n\t\t\t\t<AppContextProvider pkg={searchView.app}>\n\t\t\t\t\t<searchView.component\n\t\t\t\t\t\tuseQuery={useQuery}\n\t\t\t\t\t\tResultsHeader={ResultsHeader}\n\t\t\t\t\t\tuseDisableSearch={useDisableSearch}\n\t\t\t\t\t/>\n\t\t\t\t</AppContextProvider>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type React from 'react';\n\nimport type { TFunction } from 'i18next';\nimport { cloneDeep, filter, findIndex, isArray, isBoolean, reduce, uniq } from 'lodash';\n\nimport { BASE_FONT_SIZE, SCALING_LIMIT, SCALING_OPTIONS } from '../../constants';\nimport type { LocaleDescriptor } from '../../constants/locales';\nimport { SUPPORTED_LOCALES } from '../../constants/locales';\nimport type {\n\tAccount,\n\tAccountSettings,\n\tBooleanString,\n\tGeneralizedTime,\n\tIdentity,\n\tIdentityAttrs\n} from '../../types/account';\nimport type { AddMod, PrefsMods } from '../../types/network';\n\nexport function dateToGenTime(date: Date): GeneralizedTime {\n\treturn `${\n\t\tdate.getUTCFullYear() +\n\t\t(date.getUTCMonth() + 1).toString().padStart(2, '0') +\n\t\tdate.getUTCDate().toString().padStart(2, '0') +\n\t\tdate.getUTCHours().toString().padStart(2, '0') +\n\t\tdate.getUTCMinutes().toString().padStart(2, '0') +\n\t\tdate.getUTCSeconds().toString().padStart(2, '0')\n\t}Z` as GeneralizedTime;\n}\n\nexport function genTimeToDate(genTime: GeneralizedTime): Date {\n\tconst date = new Date();\n\tdate.setUTCFullYear(Number(genTime.substring(0, 4)));\n\tdate.setUTCMonth(Number(genTime.substring(4, 6)) - 1);\n\tdate.setUTCDate(Number(genTime.substring(6, 8)));\n\tdate.setUTCHours(Number(genTime.substring(8, 10)));\n\tdate.setUTCMinutes(Number(genTime.substring(10, 12)));\n\tdate.setUTCSeconds(Number(genTime.substring(12, 14)));\n\tdate.setUTCMilliseconds(0);\n\treturn date;\n}\n\nexport const startOfDay = (date: Date): Date => {\n\tconst newDate = new Date(date);\n\tnewDate.setHours(0, 0, 0, 0);\n\treturn newDate;\n};\n\nexport const endOfDay = (date: Date): Date => {\n\tconst newDate = new Date(date);\n\tnewDate.setHours(23, 59, 59, 0);\n\treturn newDate;\n};\n\nexport type LocaleDescriptorWithLabels = LocaleDescriptor & {\n\tid: string;\n\tlabel: string;\n\tlocalName: string;\n};\n\nexport const localeList = (t: TFunction): Array<LocaleDescriptorWithLabels> => [\n\t{\n\t\tid: 'zh_CN',\n\t\t...SUPPORTED_LOCALES.zh_CN,\n\t\tlocalName: t('locale.chinese_china', 'Chinese (China)'),\n\t\tlabel: t('locale.label_chinese', {\n\t\t\tvalue: SUPPORTED_LOCALES.zh_CN.name,\n\t\t\tdefaultValue: 'Chinese (China) - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'nl',\n\t\t...SUPPORTED_LOCALES.nl,\n\t\tlocalName: t('locale.dutch', 'Dutch'),\n\t\tlabel: t('locale.label_dutch', {\n\t\t\tvalue: SUPPORTED_LOCALES.nl.name,\n\t\t\tdefaultValue: 'Dutch - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'en',\n\t\t...SUPPORTED_LOCALES.en,\n\t\tlocalName: t('locale.English', 'English'),\n\t\tlabel: t('locale.label_english', {\n\t\t\tvalue: SUPPORTED_LOCALES.en.name,\n\t\t\tdefaultValue: 'English - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'de',\n\t\t...SUPPORTED_LOCALES.de,\n\t\tlocalName: t('locale.german', 'German'),\n\t\tlabel: t('locale.label_german', {\n\t\t\tvalue: SUPPORTED_LOCALES.de.name,\n\t\t\tdefaultValue: 'German - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'hi',\n\t\t...SUPPORTED_LOCALES.hi,\n\t\tlocalName: t('locale.hindi', 'Hindi'),\n\t\tlabel: t('locale.label_hindi', {\n\t\t\tvalue: SUPPORTED_LOCALES.hi.name,\n\t\t\tdefaultValue: 'Hindi - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'it',\n\t\t...SUPPORTED_LOCALES.it,\n\t\tlocalName: t('locale.italian', 'Italian'),\n\t\tlabel: t('locale.label_italian', {\n\t\t\tvalue: SUPPORTED_LOCALES.it.name,\n\t\t\tdefaultValue: 'Italian - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'ja',\n\t\t...SUPPORTED_LOCALES.ja,\n\t\tlocalName: t('locale.japanese', 'Japanese'),\n\t\tlabel: t('locale.label_japanese', {\n\t\t\tvalue: SUPPORTED_LOCALES.ja.name,\n\t\t\tdefaultValue: 'Japanese - {{value}}'\n\t\t})\n\t},\n\n\t{\n\t\tid: 'pt',\n\t\t...SUPPORTED_LOCALES.pt,\n\t\tlocalName: t('locale.portuguese', 'Portuguese'),\n\t\tlabel: t('locale.label_portuguese', {\n\t\t\tvalue: SUPPORTED_LOCALES.pt.name,\n\t\t\tdefaultValue: 'Portuguese - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'pl',\n\t\t...SUPPORTED_LOCALES.pl,\n\t\tlocalName: t('locale.polish', 'Polish'),\n\t\tlabel: t('locale.label_polish', {\n\t\t\tvalue: SUPPORTED_LOCALES.pl.name,\n\t\t\tdefaultValue: 'Polish - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'pt_BR',\n\t\t...SUPPORTED_LOCALES.pt_BR,\n\t\tlocalName: t('locale.portuguese_brazil', 'Portuguese (Brazil)'),\n\t\tlabel: t('locale.label_portuguese_brazil', {\n\t\t\tvalue: SUPPORTED_LOCALES.pt_BR.name,\n\t\t\tdefaultValue: 'Portuguese - {{value}}'\n\t\t})\n\t},\n\n\t{\n\t\tid: 'ro',\n\t\t...SUPPORTED_LOCALES.ro,\n\t\tlocalName: t('locale.romanian', 'Romanian'),\n\t\tlabel: t('locale.label_romanian', {\n\t\t\tvalue: SUPPORTED_LOCALES.ro.name,\n\t\t\tdefaultValue: 'Romanian - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'ru',\n\t\t...SUPPORTED_LOCALES.ru,\n\t\tlocalName: t('locale.russian', 'Russian'),\n\t\tlabel: t('locale.label_russian', {\n\t\t\tvalue: SUPPORTED_LOCALES.ru.name,\n\t\t\tdefaultValue: 'Russian - {{value}}'\n\t\t})\n\t},\n\n\t{\n\t\tid: 'es',\n\t\t...SUPPORTED_LOCALES.es,\n\t\tlocalName: t('locale.spanish', 'Spanish'),\n\t\tlabel: t('locale.label_spanish', {\n\t\t\tvalue: SUPPORTED_LOCALES.es.name,\n\t\t\tdefaultValue: 'Spanish - {{value}}'\n\t\t})\n\t},\n\n\t{\n\t\tid: 'th',\n\t\t...SUPPORTED_LOCALES.th,\n\t\tlocalName: t('locale.thai', 'Thai'),\n\t\tlabel: t('locale.label_thai', {\n\t\t\tvalue: SUPPORTED_LOCALES.th.name,\n\t\t\tdefaultValue: 'Thai - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'tr',\n\t\t...SUPPORTED_LOCALES.tr,\n\t\tlocalName: t('locale.turkish', 'Turkish'),\n\t\tlabel: t('locale.label_turkish', {\n\t\t\tvalue: SUPPORTED_LOCALES.tr.name,\n\t\t\tdefaultValue: 'Turkish - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'fr',\n\t\t...SUPPORTED_LOCALES.fr,\n\t\tlocalName: t('locale.french', 'French'),\n\t\tlabel: t('locale.label_french', {\n\t\t\tvalue: SUPPORTED_LOCALES.fr.name,\n\t\t\tdefaultValue: 'French - {{value}}'\n\t\t})\n\t},\n\t{\n\t\tid: 'vi',\n\t\t...SUPPORTED_LOCALES.vi,\n\t\tlocalName: t('locale.vietnamese', 'Vietnamese'),\n\t\tlabel: t('locale.label_vietnamese', {\n\t\t\tvalue: SUPPORTED_LOCALES.vi.name,\n\t\t\tdefaultValue: 'Vietnamese - {{value}}'\n\t\t})\n\t}\n];\n// TODO: For future languages\n// export const localeList = (t: TFunction): any => [\n// \t{\n// \t\tid: 'ar',\n// \t\tname: '',\n// \t\tlocalName: t('locale.arabic', 'Arabic'),\n// \t\tlabel: t('locale.label_arabic', { value: '', defaultValue: 'Arabic - {{value}}' }),\n// \t\tvalue: 'ar'\n// \t},\n// \t{\n// \t\tid: 'eu',\n// \t\tname: 'Euskara',\n// \t\tlocalName: t('locale.basque', 'Basque'),\n// \t\tlabel: t('locale.label_basque', { value: 'Euskara', defaultValue: 'Basque - {{value}}' }),\n// \t\tvalue: 'eu'\n// \t},\n// \t{\n// \t\tid: 'bg',\n// \t\tname: '',\n// \t\tlocalName: t('locale.bulgarian', 'Bulgarian'),\n// \t\tlabel: t('locale.label_bulgarian', {\n// \t\t\tvalue: '',\n// \t\t\tdefaultValue: 'Bulgarian - {{value}}'\n// \t\t}),\n// \t\tvalue: 'bg'\n// \t},\n// \t{\n// \t\tid: 'ca',\n// \t\tname: 'catal',\n// \t\tlocalName: t('locale.catalan', 'Catalan'),\n// \t\tlabel: 'Catalan - catal',\n// \t\tvalue: 'ca'\n// \t},\n// \t{\n// \t\tid: 'zh',\n// \t\tname: '',\n// \t\tlocalName: t('locale.chinese', 'Chinese'),\n// \t\tlabel: 'Chinese - ',\n// \t\tvalue: 'zh'\n// \t},\n// \t{\n// \t\tid: 'zh_CN',\n// \t\tname: ' ()',\n// \t\tlocalName: t('locale.chinese_china', 'Chinese (China)'),\n// \t\tlabel: 'Chinese (China) -  ()',\n// \t\tvalue: 'zh_CN'\n// \t},\n// \t{\n// \t\tid: 'zh_HK',\n// \t\tname: ' ()',\n// \t\tlocalName: t('locale.chinese_hong_kong', 'Chinese (Hong Kong SAR China)'),\n// \t\tlabel: 'Chinese (Hong Kong SAR China) -  ()',\n// \t\tvalue: 'zh_HK'\n// \t},\n// \t{\n// \t\tid: 'zh_TW',\n// \t\tname: ' ()',\n// \t\tlocalName: t('locale.chinese_taiwan', 'Chinese (Taiwan)'),\n// \t\tlabel: 'Chinese (Taiwan) -  ()',\n// \t\tvalue: 'zh_TW'\n// \t},\n// \t{\n// \t\tid: 'hr',\n// \t\tname: 'hrvatski',\n// \t\tlocalName: t('locale.croatian', 'Croatian'),\n// \t\tlabel: 'Croatian - hrvatski',\n// \t\tvalue: 'hr'\n// \t},\n// \t{\n// \t\tid: 'da',\n// \t\tname: 'Dansk',\n// \t\tlocalName: t('locale.danish', 'Danish'),\n// \t\tlabel: 'Danish - Dansk',\n// \t\tvalue: 'da'\n// \t},\n\n// \t{\n// \t\tid: 'en_AU',\n// \t\tname: 'English (Australia)',\n// \t\tlocalName: t('locale.english_australia', 'English (Australia)'),\n// \t\tlabel: 'English (Australia) - English (Australia)',\n// \t\tvalue: 'en_AU'\n// \t},\n// \t{\n// \t\tid: 'en_GB',\n// \t\tname: 'English (United Kingdom)',\n// \t\tlocalName: t('locale.english_united_kingdom', 'English (United Kingdom)'),\n// \t\tlabel: 'English (United Kingdom) - English (United Kingdom)',\n// \t\tvalue: 'en_GB'\n// \t},\n// \t{\n// \t\tid: 'en_US',\n// \t\tname: 'English (United States)',\n// \t\tlocalName: t('locale.english_united_states', 'English (United States)'),\n// \t\tlabel: 'English (United States) - English (United States)',\n// \t\tvalue: 'en_US'\n// \t},\n// \t{\n// \t\tid: 'fr',\n// \t\tname: 'franais',\n// \t\tlocalName: t('locale.french', 'French'),\n// \t\tlabel: 'French - franais',\n// \t\tvalue: 'fr'\n// \t},\n// \t{\n// \t\tid: 'fr_CA',\n// \t\tname: 'franais (Canada)',\n// \t\tlocalName: t('locale.french_canada', 'French (Canada)'),\n// \t\tlabel: 'French (Canada) - franais (Canada)',\n// \t\tvalue: 'fr_CA'\n// \t},\n// \t{\n// \t\tid: 'fr_FR',\n// \t\tname: 'franais (France)',\n// \t\tlocalName: t('locale.french_france', 'French (France)'),\n// \t\tlabel: 'French (France) - franais (France)',\n// \t\tvalue: 'fr_FR'\n// \t},\n\n// \t{\n// \t\tid: 'iw',\n// \t\tname: '',\n// \t\tlocalName: t('locale.hebrew', 'Hebrew'),\n// \t\tlabel: 'Hebrew - ',\n// \t\tvalue: 'iw'\n// \t},\n\n// \t{\n// \t\tid: 'hu',\n// \t\tname: 'magyar',\n// \t\tlocalName: t('locale.hungarian', 'Hungarian'),\n// \t\tlabel: 'Hungarian - magyar',\n// \t\tvalue: 'hu'\n// \t},\n// \t{\n// \t\tid: 'in',\n// \t\tname: 'Bahasa Indonesia',\n// \t\tlocalName: t('locale.indonesian', 'Indonesian'),\n// \t\tlabel: 'Indonesian - Bahasa Indonesia',\n// \t\tvalue: 'in'\n// \t},\n\n// \t{\n// \t\tid: 'ko',\n// \t\tname: '',\n// \t\tlocalName: t('locale.korean', 'Korean'),\n// \t\tlabel: 'Korean - ',\n// \t\tvalue: 'ko'\n// \t},\n// \t{\n// \t\tid: 'lo',\n// eslint-disable-next-line no-irregular-whitespace\n// \t\tname: '',\n// \t\tlocalName: t('locale.lao', 'Lao'),\n// eslint-disable-next-line no-irregular-whitespace\n// \t\tlabel: 'Lao - ',\n// \t\tvalue: 'lo'\n// \t},\n// \t{\n// \t\tid: 'ms',\n// \t\tname: 'Bahasa Melayu',\n// \t\tlocalName: t('locale.malay', 'Malay'),\n// \t\tlabel: 'Malay - Bahasa Melayu',\n// \t\tvalue: 'ms'\n// \t},\n// \t{\n// \t\tid: 'no',\n// \t\tname: 'norsk',\n// \t\tlocalName: t('locale.norwegian', 'Norwegian'),\n// \t\tlabel: 'Norwegian - norsk',\n// \t\tvalue: 'no'\n// \t},\n\n// \t{\n// \t\tid: 'pt_PT',\n// \t\tname: 'portugus (Portugal)',\n// \t\tlocalName: t('locale.potuguese_portugal', 'Portuguese (Portugal)'),\n// \t\tlabel: 'Portuguese (Portugal) - portugus (Portugal)',\n// \t\tvalue: 'pt_PT'\n// \t},\n\n// \t{\n// \t\tid: 'sl',\n// \t\tname: 'Slovenina',\n// \t\tlocalName: t('locale.slovenian', 'Slovenian'),\n// \t\tlabel: 'Slovenian - Slovenina',\n// \t\tvalue: 'sl'\n// \t},\n\n// \t{\n// \t\tid: 'sv',\n// \t\tname: 'svenska',\n// \t\tlocalName: t('locale.swedish', 'Swedish'),\n// \t\tlabel: 'Swedish - svenska',\n// \t\tvalue: 'sv'\n// \t},\n// \t{\n// \t\tid: 'ta',\n// \t\tname: '',\n// \t\tlocalName: t('locale.tamil', 'Tamil'),\n// \t\tlabel: 'Tamil - ',\n// \t\tvalue: 'ta'\n// \t},\n\n// \t{\n// \t\tid: 'uk',\n// \t\tname: '',\n// \t\tlocalName: t('locale.ukrainian', 'Ukrainian'),\n// \t\tlabel: 'Ukrainian - ',\n// \t\tvalue: 'uk'\n// \t},\n\n// ];\n\nexport type TimeZoneDescriptor = {\n\tvalue: string;\n\tlabel: string;\n\toffSet?: string;\n};\n\nexport const timeZoneList = (t: TFunction): Array<TimeZoneDescriptor> => [\n\t{\n\t\tvalue: 'Etc/GMT+12',\n\t\tlabel: t('timezone.etc_gmt+12', { value: 'GMT -12:00', defaultValue: '{{value}} Dateline' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Midway',\n\t\tlabel: t('timezone.pacific_midway', { value: 'GMT -11:00', defaultValue: '{{value}} Samoa' })\n\t},\n\t{\n\t\tvalue: 'America/Adak',\n\t\tlabel: t('timezone.america_adak', { value: 'GMT -10:00', defaultValue: '{{value}} Adak' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Honolulu',\n\t\tlabel: t('timezone.pacific_honolulu', { value: 'GMT -10:00', defaultValue: '{{value}} Hawaii' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Marquesas',\n\t\tlabel: t('timezone.pacific_marquesas', {\n\t\t\tvalue: 'GMT -09:30',\n\t\t\tdefaultValue: '{{value}} Marquesas'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Anchorage',\n\t\tlabel: t('timezone.america_anchorage', {\n\t\t\tvalue: 'GMT -09:00',\n\t\t\tdefaultValue: '{{value}} Alaska'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Los_Angeles',\n\t\tlabel: t('timezone.america_los_angeles', {\n\t\t\tvalue: 'GMT -08:00',\n\t\t\tdefaultValue: '{{value}} US/Canada Pacific'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Tijuana',\n\t\tlabel: t('timezone.america_tijuana', {\n\t\t\tvalue: 'GMT -08:00',\n\t\t\tdefaultValue: '{{value}} Baja California'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Chihuahua',\n\t\tlabel: t('timezone.america_chihuahua', {\n\t\t\tvalue: 'GMT -07:00',\n\t\t\tdefaultValue: '{{value}} Chihuahua, La Paz, Mazatlan'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Denver',\n\t\tlabel: t('timezone.america_denver', {\n\t\t\tvalue: 'GMT -07:00',\n\t\t\tdefaultValue: '{{value}} US/Canada Mountain'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Fort_Nelson',\n\t\tlabel: t('timezone.america_fort_nelson', {\n\t\t\tvalue: 'GMT -07:00',\n\t\t\tdefaultValue: '{{value}} Fort Nelson'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Phoenix',\n\t\tlabel: t('timezone.america_phoenix', { value: 'GMT -07:00', defaultValue: '{{value}} Arizona' })\n\t},\n\t{\n\t\tvalue: 'America/Whitehorse',\n\t\tlabel: t('timezone.america_whitehorse', {\n\t\t\tvalue: 'GMT -07:00',\n\t\t\tdefaultValue: '{{value}} Yukon'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Chicago',\n\t\tlabel: t('timezone.america_chicago', {\n\t\t\tvalue: 'GMT -06:00',\n\t\t\tdefaultValue: '{{value}} US/Canada Central'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Guatemala',\n\t\tlabel: t('timezone.america_guatemala', {\n\t\t\tvalue: 'GMT -06:00',\n\t\t\tdefaultValue: '{{value}} Central America'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Mexico_City',\n\t\tlabel: t('timezone.america_mexico_city', {\n\t\t\tvalue: 'GMT -06:00',\n\t\t\tdefaultValue: '{{value}} Guadalajara, Mexico City, Monterrey'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Regina',\n\t\tlabel: t('timezone.america_regina', {\n\t\t\tvalue: 'GMT -06:00',\n\t\t\tdefaultValue: '{{value}} Saskatchewan'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Easter',\n\t\tlabel: t('timezone.pacific_easter', { value: 'GMT -06:00', defaultValue: '{{value}} Easter' })\n\t},\n\t{\n\t\tvalue: 'America/Bogota',\n\t\tlabel: t('timezone.america_bogota', { value: 'GMT -05:00', defaultValue: '{{value}} Colombia' })\n\t},\n\t{\n\t\tvalue: 'America/Cancun',\n\t\tlabel: t('timezone.america_cancun', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} Cancun, Chetumal'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Grand_Turk',\n\t\tlabel: t('timezone.america_grand_turk', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} Turks and Caicos Islands'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Havana',\n\t\tlabel: t('timezone.america_havana', { value: 'GMT -05:00', defaultValue: '{{value}} Havana' })\n\t},\n\t{\n\t\tvalue: 'America/Indiana/Indianapolis',\n\t\tlabel: t('timezone.america_indiana_indianapolis', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} Indiana (East)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/New_York',\n\t\tlabel: t('timezone.america_new_york', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} US/Canada Eastern'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Port-au-Prince',\n\t\tlabel: t('timezone.america_port-au-prince', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} Port-au-Prince'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Asuncion',\n\t\tlabel: t('timezone.america_asuncion', {\n\t\t\tvalue: 'GMT -04:00',\n\t\t\tdefaultValue: '{{value}} Asuncion'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Caracas',\n\t\tlabel: t('timezone.america_caracas', { value: 'GMT -04:00', defaultValue: '{{value}} Caracas' })\n\t},\n\t{\n\t\tvalue: 'America/Cuiaba',\n\t\tlabel: t('timezone.america_cuiaba', { value: 'GMT -04:00', defaultValue: '{{value}} Cuiaba' })\n\t},\n\t{\n\t\tvalue: 'America/Guyana',\n\t\tlabel: t('timezone.america_guyana', {\n\t\t\tvalue: 'GMT -04:00',\n\t\t\tdefaultValue: '{{value}} Georgetown, La Paz, Manaus, San Juan'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Halifax',\n\t\tlabel: t('timezone.america_halifax', {\n\t\t\tvalue: 'GMT -04:00',\n\t\t\tdefaultValue: '{{value}} Atlantic Time (Canada)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Santiago',\n\t\tlabel: t('timezone.america_santiago', {\n\t\t\tvalue: 'GMT -04:00',\n\t\t\tdefaultValue: '{{value}} Pacific South America'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/St_Johns',\n\t\tlabel: t('timezone.america_st_johns', {\n\t\t\tvalue: 'GMT -03:30',\n\t\t\tdefaultValue: '{{value}} Newfoundland'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Araguaina',\n\t\tlabel: t('timezone.america_araguaina', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Araguaina'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Argentina/Buenos_Aires',\n\t\tlabel: t('timezone.america_argentina_buenos_aires', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Argentina'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Bahia',\n\t\tlabel: t('timezone.america_bahia', { value: 'GMT -03:00', defaultValue: '{{value}} Salvador' })\n\t},\n\t{\n\t\tvalue: 'America/Cayenne',\n\t\tlabel: t('timezone.america_cayenne', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Cayenne, Fortaleza'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Miquelon',\n\t\tlabel: t('timezone.america_miquelon', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Miquelon'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Montevideo',\n\t\tlabel: t('timezone.america_montevideo', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Montevideo'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Punta_Arenas',\n\t\tlabel: t('timezone.america_punta_arenas', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Punta_Arenas'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Sao_Paulo',\n\t\tlabel: t('timezone.america_sao_paulo', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Brasilia'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Atlantic/South_Georgia',\n\t\tlabel: t('timezone.atlantic_south_georgia', {\n\t\t\tvalue: 'GMT -02:00',\n\t\t\tdefaultValue: '{{value}} Mid-Atlantic'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Atlantic/Azores',\n\t\tlabel: t('timezone.atlantic_azores', { value: 'GMT -01:00', defaultValue: '{{value}} Azores' })\n\t},\n\t{\n\t\tvalue: 'Atlantic/Cape_Verde',\n\t\tlabel: t('timezone.atlantic_cape_verde', {\n\t\t\tvalue: 'GMT -01:00',\n\t\t\tdefaultValue: '{{value}} Cape Verde Is.'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Monrovia',\n\t\tlabel: t('timezone.africa_monrovia', {\n\t\t\tvalue: 'GMT +00:00',\n\t\t\tdefaultValue: '{{value}} Monrovia'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Sao_Tome',\n\t\tlabel: t('timezone.africa_sao_tome', {\n\t\t\tvalue: 'GMT +00:00',\n\t\t\tdefaultValue: '{{value}} Sao Tome'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/London',\n\t\tlabel: t('timezone.europe_london', {\n\t\t\tvalue: 'GMT +00:00',\n\t\t\tdefaultValue: '{{value}} Britain, Ireland, Portugal'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'UTC',\n\t\tlabel: t('timezone.utc', {\n\t\t\tvalue: 'GMT/UTC',\n\t\t\tdefaultValue: '{{value}} Coordinated Universal Time'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Algiers',\n\t\tlabel: t('timezone.africa_algiers', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} West Central Africa'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Casablanca',\n\t\tlabel: t('timezone.africa_casablanca', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Casablanca'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Belgrade',\n\t\tlabel: t('timezone.europe_belgrade', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Belgrade, Bratislava, Budapest, Ljubljana, Prague'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Berlin',\n\t\tlabel: t('timezone.europe_berlin', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Brussels',\n\t\tlabel: t('timezone.europe_brussels', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Brussels, Copenhagen, Madrid, Paris'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Warsaw',\n\t\tlabel: t('timezone.europe_warsaw', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Sarajevo, Skopje, Warsaw, Zagreb'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Cairo',\n\t\tlabel: t('timezone.africa_cairo', { value: 'GMT +02:00', defaultValue: '{{value}} Egypt' })\n\t},\n\t{\n\t\tvalue: 'Africa/Harare',\n\t\tlabel: t('timezone.africa_harare', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Harare, Pretoria'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Juba',\n\t\tlabel: t('timezone.africa_juba', { value: 'GMT +02:00', defaultValue: '{{value}} Juba' })\n\t},\n\t{\n\t\tvalue: 'Africa/Khartoum',\n\t\tlabel: t('timezone.africa_khartoum', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Khartoum'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Tripoli',\n\t\tlabel: t('timezone.africa_tripoli', { value: 'GMT +02:00', defaultValue: '{{value}} Tripoli' })\n\t},\n\t{\n\t\tvalue: 'Africa/Windhoek',\n\t\tlabel: t('timezone.africa_windhoek', { value: 'GMT +02:00', defaultValue: '{{value}} Namibia' })\n\t},\n\t{\n\t\tvalue: 'Asia/Amman',\n\t\tlabel: t('timezone.asia_amman', { value: 'GMT +02:00', defaultValue: '{{value}} Jordan' })\n\t},\n\t{\n\t\tvalue: 'Asia/Beirut',\n\t\tlabel: t('timezone.asia_beirut', { value: 'GMT +02:00', defaultValue: '{{value}} Beirut' })\n\t},\n\t{\n\t\tvalue: 'Asia/Damascus',\n\t\tlabel: t('timezone.asia_damascus', { value: 'GMT +02:00', defaultValue: '{{value}} Damascus' })\n\t},\n\t{\n\t\tvalue: 'Asia/Gaza',\n\t\tlabel: t('timezone.asia_gaza', { value: 'GMT +02:00', defaultValue: '{{value}} Gaza' })\n\t},\n\t{\n\t\tvalue: 'Asia/Jerusalem',\n\t\tlabel: t('timezone.asia_jerusalem', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Jerusalem'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Athens',\n\t\tlabel: t('timezone.europe_athens', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Athens, Beirut, Bucharest, Istanbul'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Bucharest',\n\t\tlabel: t('timezone.europe_bucharest', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Bucharest'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Chisinau',\n\t\tlabel: t('timezone.europe_chisinau', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Chisinau'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Helsinki',\n\t\tlabel: t('timezone.europe_helsinki', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Kaliningrad',\n\t\tlabel: t('timezone.europe_kaliningrad', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Kaliningrad (RTZ 1)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Nairobi',\n\t\tlabel: t('timezone.africa_nairobi', { value: 'GMT +03:00', defaultValue: '{{value}} Nairobi' })\n\t},\n\t{\n\t\tvalue: 'Asia/Baghdad',\n\t\tlabel: t('timezone.asia_baghdad', { value: 'GMT +03:00', defaultValue: '{{value}} Iraq' })\n\t},\n\t{\n\t\tvalue: 'Asia/Kuwait',\n\t\tlabel: t('timezone.asia_kuwait', {\n\t\t\tvalue: 'GMT +03:00',\n\t\t\tdefaultValue: '{{value}} Kuwait, Riyadh'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Istanbul',\n\t\tlabel: t('timezone.europe_istanbul', {\n\t\t\tvalue: 'GMT +03:00',\n\t\t\tdefaultValue: '{{value}} Istanbul'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Minsk',\n\t\tlabel: t('timezone.europe_minsk', { value: 'GMT +03:00', defaultValue: '{{value}} Minsk' })\n\t},\n\t{\n\t\tvalue: 'Europe/Moscow',\n\t\tlabel: t('timezone.europe_moscow', {\n\t\t\tvalue: 'GMT +03:00',\n\t\t\tdefaultValue: '{{value}} Moscow, St. Petersburg, Volgograd (RTZ 2)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Volgograd',\n\t\tlabel: t('timezone.europe_volgograd', {\n\t\t\tvalue: 'GMT +03:00',\n\t\t\tdefaultValue: '{{value}} Volgograd'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Tehran',\n\t\tlabel: t('timezone.asia_tehran', { value: 'GMT +03:30', defaultValue: '{{value}} Tehran' })\n\t},\n\t{\n\t\tvalue: 'Asia/Baku',\n\t\tlabel: t('timezone.asia_baku', { value: 'GMT +04:00', defaultValue: '{{value}} Baku' })\n\t},\n\t{\n\t\tvalue: 'Asia/Muscat',\n\t\tlabel: t('timezone.asia_muscat', {\n\t\t\tvalue: 'GMT +04:00',\n\t\t\tdefaultValue: '{{value}} Abu Dhabi, Muscat'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Tbilisi',\n\t\tlabel: t('timezone.asia_tbilisi', { value: 'GMT +04:00', defaultValue: '{{value}} Tbilisi' })\n\t},\n\t{\n\t\tvalue: 'Asia/Yerevan',\n\t\tlabel: t('timezone.asia_yerevan', { value: 'GMT +04:00', defaultValue: '{{value}} Yerevan' })\n\t},\n\t{\n\t\tvalue: 'Europe/Astrakhan',\n\t\tlabel: t('timezone.europe_astrakhan', {\n\t\t\tvalue: 'GMT +04:00',\n\t\t\tdefaultValue: '{{value}} Astrakhan'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Samara',\n\t\tlabel: t('timezone.europe_samara', {\n\t\t\tvalue: 'GMT +04:00',\n\t\t\tdefaultValue: '{{value}} Izhevsk, Samara (RTZ 3)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Saratov',\n\t\tlabel: t('timezone.europe_saratov', { value: 'GMT +04:00', defaultValue: '{{value}} Saratov' })\n\t},\n\t{\n\t\tvalue: 'Indian/Mauritius',\n\t\tlabel: t('timezone.indian_mauritius', {\n\t\t\tvalue: 'GMT +04:00',\n\t\t\tdefaultValue: '{{value}} Port Louis'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Kabul',\n\t\tlabel: t('timezone.asia_kabul', { value: 'GMT +04:30', defaultValue: '{{value}} Kabul' })\n\t},\n\t{\n\t\tvalue: 'Asia/Karachi',\n\t\tlabel: t('timezone.asia_karachi', {\n\t\t\tvalue: 'GMT +05:00',\n\t\t\tdefaultValue: '{{value}} Islamabad, Karachi'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Qyzylorda',\n\t\tlabel: t('timezone.asia_qyzylorda', {\n\t\t\tvalue: 'GMT +05:00',\n\t\t\tdefaultValue: '{{value}} Qyzylorda'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Tashkent',\n\t\tlabel: t('timezone.asia_tashkent', { value: 'GMT +05:00', defaultValue: '{{value}} Tashkent' })\n\t},\n\t{\n\t\tvalue: 'Asia/Yekaterinburg',\n\t\tlabel: t('timezone.asia_yekaterinburg', {\n\t\t\tvalue: 'GMT +05:00',\n\t\t\tdefaultValue: '{{value}} Ekaterinburg (RTZ 4)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Colombo',\n\t\tlabel: t('timezone.asia_colombo', {\n\t\t\tvalue: 'GMT +05:30',\n\t\t\tdefaultValue: '{{value}} Sri Jayawardenepura Kotte'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Kolkata',\n\t\tlabel: t('timezone.asia_kolkata', {\n\t\t\tvalue: 'GMT +05:30',\n\t\t\tdefaultValue: '{{value}} Chennai, Kolkata, Mumbai, New Delhi'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Kathmandu',\n\t\tlabel: t('timezone.asia_kathmandu', {\n\t\t\tvalue: 'GMT +05:45',\n\t\t\tdefaultValue: '{{value}} Kathmandu'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Almaty',\n\t\tlabel: t('timezone.asia_almaty', { value: 'GMT +06:00', defaultValue: '{{value}} Astana' })\n\t},\n\t{\n\t\tvalue: 'Asia/Dhaka',\n\t\tlabel: t('timezone.asia_dhaka', { value: 'GMT +06:00', defaultValue: '{{value}} Dhaka' })\n\t},\n\t{\n\t\tvalue: 'Asia/Omsk',\n\t\tlabel: t('timezone.asia_omsk', { value: 'GMT +06:00', defaultValue: '{{value}} Omsk' })\n\t},\n\t{\n\t\tvalue: 'Asia/Yangon',\n\t\tlabel: t('timezone.asia_yangon', { value: 'GMT +06:30', defaultValue: '{{value}} Yangon' })\n\t},\n\t{\n\t\tvalue: 'Asia/Bangkok',\n\t\tlabel: t('timezone.asia_bangkok', {\n\t\t\tvalue: 'GMT +07:00',\n\t\t\tdefaultValue: '{{value}} Bangkok, Hanoi, Jakarta'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Barnaul',\n\t\tlabel: t('timezone.asia_barnaul', { value: 'GMT +07:00', defaultValue: '{{value}} Barnaul' })\n\t},\n\t{\n\t\tvalue: 'Asia/Hovd',\n\t\tlabel: t('timezone.asia_hovd', { value: 'GMT +07:00', defaultValue: '{{value}} Hovd' })\n\t},\n\t{\n\t\tvalue: 'Asia/Krasnoyarsk',\n\t\tlabel: t('timezone.asia_krasnoyarsk', {\n\t\t\tvalue: 'GMT +07:00',\n\t\t\tdefaultValue: '{{value}} Krasnoyarsk (RTZ 6)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Novosibirsk',\n\t\tlabel: t('timezone.asia_novosibirsk', {\n\t\t\tvalue: 'GMT +07:00',\n\t\t\tdefaultValue: '{{value}} Novosibirsk (RTZ 5)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Tomsk',\n\t\tlabel: t('timezone.asia_tomsk', { value: 'GMT +07:00', defaultValue: '{{value}} Tomsk' })\n\t},\n\t{\n\t\tvalue: 'Asia/Hong_Kong',\n\t\tlabel: t('timezone.asia_hong_kong', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Beijing, Chongqing, Hong Kong, Urumqi'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Irkutsk',\n\t\tlabel: t('timezone.asia_irkutsk', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Irkutsk (RTZ 7)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Kuala_Lumpur',\n\t\tlabel: t('timezone.asia_kuala_lumpur', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Kuala Lumpur'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Singapore',\n\t\tlabel: t('timezone.asia_singapore', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Singapore'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Taipei',\n\t\tlabel: t('timezone.asia_taipei', { value: 'GMT +08:00', defaultValue: '{{value}} Taipei' })\n\t},\n\t{\n\t\tvalue: 'Asia/Ulaanbaatar',\n\t\tlabel: t('timezone.asia_ulaanbaatar', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Ulaanbaatar'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Perth',\n\t\tlabel: t('timezone.australia_perth', { value: 'GMT +08:00', defaultValue: '{{value}} Perth' })\n\t},\n\t{\n\t\tvalue: 'Australia/Eucla',\n\t\tlabel: t('timezone.australia_eucla', { value: 'GMT +08:45', defaultValue: '{{value}} Eucla' })\n\t},\n\t{\n\t\tvalue: 'Asia/Chita',\n\t\tlabel: t('timezone.asia_chita', { value: 'GMT +09:00', defaultValue: '{{value}} Chita' })\n\t},\n\t{\n\t\tvalue: 'Asia/Pyongyang',\n\t\tlabel: t('timezone.asia_pyongyang', {\n\t\t\tvalue: 'GMT +09:00',\n\t\t\tdefaultValue: '{{value}} Pyongyang'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Seoul',\n\t\tlabel: t('timezone.asia_seoul', { value: 'GMT +09:00', defaultValue: '{{value}} Korea' })\n\t},\n\t{\n\t\tvalue: 'Asia/Tokyo',\n\t\tlabel: t('timezone.asia_tokyo', { value: 'GMT +09:00', defaultValue: '{{value}} Japan' })\n\t},\n\t{\n\t\tvalue: 'Asia/Yakutsk',\n\t\tlabel: t('timezone.asia_yakutsk', {\n\t\t\tvalue: 'GMT +09:00',\n\t\t\tdefaultValue: '{{value}} Yakutsk (RTZ 8)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Adelaide',\n\t\tlabel: t('timezone.australia_adelaide', {\n\t\t\tvalue: 'GMT +09:30',\n\t\t\tdefaultValue: '{{value}} Adelaide'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Darwin',\n\t\tlabel: t('timezone.australia_darwin', { value: 'GMT +09:30', defaultValue: '{{value}} Darwin' })\n\t},\n\t{\n\t\tvalue: 'Asia/Vladivostok',\n\t\tlabel: t('timezone.asia_vladivostok', {\n\t\t\tvalue: 'GMT +10:00',\n\t\t\tdefaultValue: '{{value}} Vladivostok, Magadan (RTZ 9)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Brisbane',\n\t\tlabel: t('timezone.australia_brisbane', {\n\t\t\tvalue: 'GMT +10:00',\n\t\t\tdefaultValue: '{{value}} Brisbane'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Hobart',\n\t\tlabel: t('timezone.australia_hobart', { value: 'GMT +10:00', defaultValue: '{{value}} Hobart' })\n\t},\n\t{\n\t\tvalue: 'Australia/Sydney',\n\t\tlabel: t('timezone.australia_sydney', {\n\t\t\tvalue: 'GMT +10:00',\n\t\t\tdefaultValue: '{{value}} Canberra, Melbourne, Sydney'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Guam',\n\t\tlabel: t('timezone.pacific_guam', {\n\t\t\tvalue: 'GMT +10:00',\n\t\t\tdefaultValue: '{{value}} Guam, Port Moresby'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Lord_Howe',\n\t\tlabel: t('timezone.australia_lord_howe', {\n\t\t\tvalue: 'GMT +10:30',\n\t\t\tdefaultValue: '{{value}} Lord_Howe'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Magadan',\n\t\tlabel: t('timezone.asia_magadan', { value: 'GMT +11:00', defaultValue: '{{value}} Magadan' })\n\t},\n\t{\n\t\tvalue: 'Asia/Sakhalin',\n\t\tlabel: t('timezone.asia_sakhalin', { value: 'GMT +11:00', defaultValue: '{{value}} Sakhalin' })\n\t},\n\t{\n\t\tvalue: 'Asia/Srednekolymsk',\n\t\tlabel: t('timezone.asia_srednekolymsk', {\n\t\t\tvalue: 'GMT +11:00',\n\t\t\tdefaultValue: '{{value}} Chokurdakh (RTZ 10)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Bougainville',\n\t\tlabel: t('timezone.pacific_bougainville', {\n\t\t\tvalue: 'GMT +11:00',\n\t\t\tdefaultValue: '{{value}} Bougainville Standard Time'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Guadalcanal',\n\t\tlabel: t('timezone.pacific_guadalcanal', {\n\t\t\tvalue: 'GMT +11:00',\n\t\t\tdefaultValue: '{{value}} Solomon Is. / New Caledonia'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Norfolk',\n\t\tlabel: t('timezone.pacific_norfolk', { value: 'GMT +11:00', defaultValue: '{{value}} Norfolk' })\n\t},\n\t{\n\t\tvalue: 'Asia/Kamchatka',\n\t\tlabel: t('timezone.asia_kamchatka', {\n\t\t\tvalue: 'GMT +12:00',\n\t\t\tdefaultValue: '{{value}} Anadyr, Petropavlovsk-Kamchatsky (RTZ 11)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Auckland',\n\t\tlabel: t('timezone.pacific_auckland', {\n\t\t\tvalue: 'GMT +12:00',\n\t\t\tdefaultValue: '{{value}} New Zealand'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Fiji',\n\t\tlabel: t('timezone.pacific_fiji', { value: 'GMT +12:00', defaultValue: '{{value}} Fiji' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Chatham',\n\t\tlabel: t('timezone.pacific_chatham', { value: 'GMT +12:45', defaultValue: '{{value}} Chatham' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Apia',\n\t\tlabel: t('timezone.pacific_apia', { value: 'GMT +13:00', defaultValue: '{{value}} Samoa' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Tongatapu',\n\t\tlabel: t('timezone.pacific_tongatapu', {\n\t\t\tvalue: 'GMT +13:00',\n\t\t\tdefaultValue: '{{value}} Nukualofa'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Kiritimati',\n\t\tlabel: t('timezone.pacific_kiritimati', {\n\t\t\tvalue: 'GMT +14:00',\n\t\t\tdefaultValue: '{{value}} Kiritimati Island'\n\t\t})\n\t}\n];\n\nexport const getAutoScalingFontSize = (): number => {\n\tif (\n\t\twindow.screen.width <= SCALING_LIMIT.width &&\n\t\twindow.screen.height <= SCALING_LIMIT.height &&\n\t\twindow.devicePixelRatio >= SCALING_LIMIT.dpr\n\t) {\n\t\tconst baseFontIndex = SCALING_OPTIONS.findIndex((option) => option.value === BASE_FONT_SIZE);\n\t\tif (baseFontIndex > 0) {\n\t\t\treturn SCALING_OPTIONS[baseFontIndex - 1].value;\n\t\t}\n\t}\n\treturn BASE_FONT_SIZE;\n};\n\nexport type ResetComponentImperativeHandler = { reset: () => void };\n\ntype UpsertPrefOnUnsavedChangesFn = <K extends keyof PrefsMods>(\n\tprefKey: K,\n\tprefValue: PrefsMods[K] extends BooleanString | undefined ? boolean | undefined : PrefsMods[K]\n) => void;\n\nexport function upsertPrefOnUnsavedChanges(\n\taddModifiedValueCallback: AddMod\n): UpsertPrefOnUnsavedChangesFn {\n\treturn (prefKey, prefValue) => {\n\t\tif (prefValue === undefined) {\n\t\t\taddModifiedValueCallback('prefs', prefKey, '');\n\t\t} else if (isBoolean(prefValue)) {\n\t\t\taddModifiedValueCallback('prefs', prefKey, (prefValue && 'TRUE') || 'FALSE');\n\t\t} else {\n\t\t\taddModifiedValueCallback('prefs', prefKey, prefValue as PrefsMods[typeof prefKey]);\n\t\t}\n\t};\n}\n\nexport type SettingsSectionProps = {\n\tresetRef?: React.Ref<ResetComponentImperativeHandler>;\n};\n\nexport function isPrimary(identity: Identity): boolean {\n\treturn identity.name === 'DEFAULT';\n}\n\nexport function defaultAsFirstOrderIdentities(identities: Array<Identity>): Array<Identity> {\n\tconst defaultIdx = identities.findIndex(isPrimary);\n\tconst result = cloneDeep(identities);\n\tconst defaultIdentity = result.splice(defaultIdx, 1);\n\tresult.unshift(defaultIdentity[0]);\n\treturn result;\n}\n\n/**\n * Compose a unique list of all identities' email addresses\n *\n * The list is composed of:\n * - the email address of the current account\n * - the email addresses of all the shared accounts (taken from the rights infos)\n * - all the aliases\n *\n * @param account\n * @param settings\n *\n * @returns a list of unique email addresses\n */\nexport const getAvailableEmailAddresses = (\n\taccount: Account,\n\tsettings: AccountSettings\n): string[] => {\n\tconst result: string[] = [];\n\n\t// Adds the email address of the primary account\n\tresult.push(account.name);\n\n\t// Adds the email addresses of all the shared accounts\n\tif (account.rights?.targets) {\n\t\taccount.rights?.targets.forEach((target) => {\n\t\t\tif (target.target && (target.right === 'sendAs' || target.right === 'sendOnBehalfOf')) {\n\t\t\t\ttarget.target.forEach((user) => {\n\t\t\t\t\tif (user.type === 'account' && user.email) {\n\t\t\t\t\t\tuser.email.forEach((email) => {\n\t\t\t\t\t\t\tresult.push(email.addr);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t// Adds all the aliases\n\tif (settings.attrs.zimbraMailAlias) {\n\t\tif (isArray(settings.attrs.zimbraMailAlias)) {\n\t\t\tresult.push(...(settings.attrs.zimbraMailAlias as string[]));\n\t\t} else {\n\t\t\tresult.push(String(settings.attrs.zimbraMailAlias));\n\t\t}\n\t}\n\n\treturn uniq(result);\n};\n\nexport function calculateNewIdentitiesState(\n\tcurrentIdentities: Array<Identity>,\n\tdeletedIdentities: Array<string>,\n\taddedIdentities: Array<Identity>,\n\tmodifiedIdentitiesAttrs: Record<string, Partial<IdentityAttrs>>\n): Array<Identity> {\n\tconst filteredIdentities = filter(\n\t\tcurrentIdentities,\n\t\t(item) => !deletedIdentities.includes(item.id)\n\t);\n\n\tconst filteredAndModified = reduce(\n\t\tmodifiedIdentitiesAttrs,\n\t\t(accumulator, attrs, id) => {\n\t\t\tconst propIndex = findIndex(accumulator, (identity) => identity.id === id);\n\t\t\tif (propIndex > -1) {\n\t\t\t\taccumulator[propIndex]._attrs = {\n\t\t\t\t\t...accumulator[propIndex]._attrs,\n\t\t\t\t\t...attrs\n\t\t\t\t};\n\t\t\t\tif (attrs.zimbraPrefIdentityName && !isPrimary(accumulator[propIndex])) {\n\t\t\t\t\taccumulator[propIndex].name = attrs.zimbraPrefIdentityName;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t},\n\t\tfilteredIdentities\n\t);\n\n\tfilteredAndModified.splice(-1, 0, ...addedIdentities);\n\treturn filteredAndModified;\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useRef, useMemo } from 'react';\n\nimport {\n\tContainer,\n\tText,\n\tDivider,\n\tRow,\n\tPadding,\n\tIcon,\n\tListV2,\n\tListItem,\n\tuseModal\n} from '@zextras/carbonio-design-system';\nimport type { TFunction } from 'i18next';\nimport { map } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport type { Identity, IdentityAttrs } from '../../../types/account';\nimport { isPrimary } from '../utils';\nimport {\n\tCENTER_CONTENT_BACKGROUND_COLOR,\n\tCENTER_CONTENT_BUTTON_BACKGROUND_COLOR,\n\tCENTER_CONTENT_BUTTON_BACKGROUND_WARNING_COLOR,\n\tCENTER_CONTENT_BUTTON_DISABLED_BACKGROUND_WARNING_COLOR,\n\tCENTER_CONTENT_BUTTON_ICON_COLOR,\n\tCENTER_CONTENT_BUTTON_ICON_WARNING_COLOR,\n\tCENTER_CONTENT_BUTTON_TEXT_COLOR,\n\tCENTER_CONTENT_BUTTON_TEXT_WARNING_COLOR\n} from '../../../sruvi/EditedColors';\nimport { Button } from '@mui/material';\nimport DeleteForeverRoundedIcon from '@mui/icons-material/DeleteForeverRounded';\nimport AddBoxRoundedIcon from '@mui/icons-material/AddBoxRounded';\n\nconst List = styled(ListV2)`\n\tflex-shrink: 0;\n`;\n\nfunction getNewPersonaNextIdentityName(\n\tnumberToCheck: number,\n\tunavailableIdentityNames: Array<string>,\n\tt: TFunction\n): string {\n\tconst newPersonaNextIdentityName = t('settings.account.new_identity', {\n\t\tdefaultValue: `New Persona {{number}}`,\n\t\tnumber: numberToCheck\n\t});\n\tif (unavailableIdentityNames.includes(newPersonaNextIdentityName)) {\n\t\treturn getNewPersonaNextIdentityName(numberToCheck + 1, unavailableIdentityNames, t);\n\t}\n\treturn newPersonaNextIdentityName;\n}\n\nexport type AccountsListProps = {\n\taccountName: string;\n\tidentities: Array<Identity>;\n\tidentitiesDefault: Array<Identity>;\n\tselectedIdentityId: number;\n\tsetSelectedIdentityId: (value: number) => void;\n\tremoveIdentity: (identityId: string) => void;\n\taddIdentity: (id: string, identityAttrs: IdentityAttrs) => void;\n};\n\nconst AccountsList = ({\n\taccountName,\n\tselectedIdentityId,\n\tidentities,\n\tidentitiesDefault,\n\tsetSelectedIdentityId,\n\tremoveIdentity,\n\taddIdentity\n}: AccountsListProps): ReactElement => {\n\tconst [t] = useTranslation();\n\n\tconst createModal = useModal();\n\n\tconst createListRequestIdRef = useRef(0);\n\tconst addNewPersona = useCallback(() => {\n\t\tconst unavailableIdentityNames = map<Identity, string>(\n\t\t\t[...identitiesDefault, ...identities],\n\t\t\t(item) => item._attrs?.zimbraPrefIdentityName ?? ''\n\t\t);\n\t\tconst newPersonaName = getNewPersonaNextIdentityName(1, unavailableIdentityNames, t);\n\n\t\taddIdentity(`${createListRequestIdRef.current}`, {\n\t\t\tzimbraPrefIdentityName: newPersonaName,\n\t\t\tzimbraPrefFromDisplay: identities[0]._attrs?.zimbraPrefFromDisplay,\n\t\t\tzimbraPrefFromAddress: identities[0]._attrs?.zimbraPrefFromAddress,\n\t\t\tzimbraPrefFromAddressType: 'sendAs',\n\t\t\tzimbraPrefReplyToEnabled: 'FALSE'\n\t\t});\n\t\tcreateListRequestIdRef.current += 1;\n\t\tsetSelectedIdentityId(identities.length);\n\t}, [identitiesDefault, identities, addIdentity, setSelectedIdentityId, t]);\n\n\tconst onConfirmDelete = useCallback((): void => {\n\t\tremoveIdentity(identities[selectedIdentityId].id);\n\t\tsetSelectedIdentityId(selectedIdentityId - 1);\n\t}, [identities, removeIdentity, selectedIdentityId, setSelectedIdentityId]);\n\n\tconst onDelete = useCallback((): void => {\n\t\tconst closeModal = createModal({\n\t\t\ttitle: t('label.permanent_delete_title', 'Are you sure to permanently delete this Persona?'),\n\t\t\tonConfirm: () => {\n\t\t\t\tonConfirmDelete();\n\t\t\t\tcloseModal();\n\t\t\t},\n\t\t\tconfirmLabel: t('label.delete_permanently', 'Delete permanently'),\n\t\t\tconfirmColor: 'error',\n\t\t\tshowCloseIcon: true,\n\t\t\tonClose: () => closeModal(),\n\t\t\tchildren: (\n\t\t\t\t<Padding all=\"small\">\n\t\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'messages.permanent_delete_body',\n\t\t\t\t\t\t\t'If you permanently delete this Persona you will not be able to recover it. Continue?'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t</Padding>\n\t\t\t)\n\t\t});\n\t}, [createModal, t, onConfirmDelete]);\n\n\tconst items = useMemo(\n\t\t() =>\n\t\t\tmap(identities, (item, index) => (\n\t\t\t\t<ListItem key={item.id} active={selectedIdentityId === index}>\n\t\t\t\t\t{(): React.JSX.Element => (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\trole={'listitem'}\n\t\t\t\t\t\t\t\tdata-testid={`account-list-item-${item._attrs?.zimbraPrefIdentityId}`}\n\t\t\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\t\t\tsetSelectedIdentityId(index);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Row width=\"fill\" mainAlignment=\"space-between\">\n\t\t\t\t\t\t\t\t\t<Container orientation=\"horizontal\" mainAlignment=\"flex-start\" width=\"fit\">\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon=\"CheckmarkCircle2Outline\" size=\"large\" color=\"primary\" />\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Text weight=\"regular\" size=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t\t{item._attrs?.zimbraPrefIdentityName}\n\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Text weight=\"regular\" size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\t\t({isPrimary(item) ? accountName : item._attrs?.zimbraPrefFromAddress})\n\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t<Container width=\"fit\" mainAlignment=\"flex-end\">\n\t\t\t\t\t\t\t\t\t\t<Text weight=\"regular\" size=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t{isPrimary(item)\n\t\t\t\t\t\t\t\t\t\t\t\t? t('label.primary', 'Primary')\n\t\t\t\t\t\t\t\t\t\t\t\t: t('label.persona', 'Persona')}\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</ListItem>\n\t\t\t)),\n\t\t[accountName, identities, selectedIdentityId, setSelectedIdentityId, t]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={CENTER_CONTENT_BACKGROUND_COLOR}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Padding horizontal=\"medium\" bottom=\"large\" width=\"100%\">\n\t\t\t\t\t<Text weight=\"bold\">{t('label.accounts_list', 'Accounts list')}</Text>\n\t\t\t\t</Padding>\n\t\t\t\t<List>{items}</List>\n\t\t\t</Container>\n\t\t\t<Row\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\twidth=\"fill\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tbackground={CENTER_CONTENT_BACKGROUND_COLOR}\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\tonClick={addNewPersona}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: CENTER_CONTENT_BUTTON_BACKGROUND_COLOR,\n\n\t\t\t\t\t\tcolor: CENTER_CONTENT_BUTTON_TEXT_COLOR\n\t\t\t\t\t}}\n\t\t\t\t\tstartIcon={<AddBoxRoundedIcon style={{ color: CENTER_CONTENT_BUTTON_ICON_COLOR }} />}\n\t\t\t\t>\n\t\t\t\t\t{t('label.add_persona', 'Add persona')}\n\t\t\t\t</Button>\n\n\t\t\t\t{/* <Padding right=\"small\">\n\t\t\t\t\t<Button onClick={addNewPersona} color=\"primary\" variant=\"contained\">\n\t\t\t\t\t\t{t('label.add_persona', 'Add persona')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Padding> */}\n\t\t\t\t{/* <Button onClick={onDelete} disabled={isPrimary(identities[selectedIdentityId])}>\n\t\t\t\t\t{t('label.delete', 'Delete')}\n\t\t\t\t</Button> */}\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={isPrimary(identities[selectedIdentityId])}\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\tonClick={onDelete}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: isPrimary(identities[selectedIdentityId])\n\t\t\t\t\t\t\t? CENTER_CONTENT_BUTTON_BACKGROUND_WARNING_COLOR\n\t\t\t\t\t\t\t: CENTER_CONTENT_BUTTON_DISABLED_BACKGROUND_WARNING_COLOR,\n\t\t\t\t\t\tcolor: CENTER_CONTENT_BUTTON_TEXT_WARNING_COLOR,\n\t\t\t\t\t\tmarginLeft: '16px'\n\t\t\t\t\t}}\n\t\t\t\t\tstartIcon={\n\t\t\t\t\t\t<DeleteForeverRoundedIcon style={{ color: CENTER_CONTENT_BUTTON_ICON_WARNING_COLOR }} />\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{t('label.delete', 'Delete')}\n\t\t\t\t</Button>\n\t\t\t</Row>\n\t\t\t<Padding bottom=\"large\" />\n\t\t</>\n\t);\n};\n\nexport default AccountsList;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { ReactElement } from 'react';\nimport React, { useState, useCallback, useEffect, useMemo } from 'react';\n\nimport type { InputProps } from '@zextras/carbonio-design-system';\nimport { Container, Text, Padding, Input, Row } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport type { IdentityAttrs } from '../../../types/account';\nimport { FormControl, InputLabel, OutlinedInput, TextField } from '@mui/material';\n\ninterface PersonaSettingsProps {\n\tidentityAttrs: IdentityAttrs;\n\tupdateIdentities: <K extends keyof IdentityAttrs>(\n\t\tid: string,\n\t\tkey: K,\n\t\tvalue: IdentityAttrs[K]\n\t) => void;\n}\n\nconst PersonaSettings = ({\n\tidentityAttrs,\n\tupdateIdentities\n}: PersonaSettingsProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst [personaValue, setPersonaValue] = useState(identityAttrs.zimbraPrefIdentityName);\n\tconst personaLabel = useMemo(() => t('label.persona_name', 'Persona Name'), [t]);\n\tuseEffect(() => {\n\t\tsetPersonaValue(identityAttrs.zimbraPrefIdentityName);\n\t}, [identityAttrs.zimbraPrefIdentityName]);\n\n\tconst onChange = useCallback<NonNullable<InputProps['onChange']>>(\n\t\t(ev) => {\n\t\t\tsetPersonaValue(ev.target.value);\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(\n\t\t\t\t\tidentityAttrs.zimbraPrefIdentityId,\n\t\t\t\t\t'zimbraPrefIdentityName',\n\t\t\t\t\tev.target.value\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[identityAttrs.zimbraPrefIdentityId, updateIdentities]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Padding horizontal=\"medium\" width=\"100%\">\n\t\t\t\t\t<Text weight=\"bold\">{t('label.persona_settings', 'Persona Settings')}</Text>\n\t\t\t\t</Padding>\n\t\t\t</Container>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row orientation=\"vertical\" mainAlignment=\"flex-start\" width=\"fill\">\n\t\t\t\t\t<Row orientation=\"horizontal\" width=\"100%\" mainAlignment=\"flex-start\">\n\t\t\t\t\t\t<Text color=\"secondary\">\n\t\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t\t'label.use_personas_line1',\n\t\t\t\t\t\t\t\t'Use personas to quickly change many settings when sending e-mail messages.'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row orientation=\"horizontal\" width=\"100%\" mainAlignment=\"flex-start\">\n\t\t\t\t\t\t<Text color=\"secondary\">\n\t\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t\t'label.use_personas_line2',\n\t\t\t\t\t\t\t\t'For example, if you sometimes send e-mails in a particular role at work, create a persona for that.'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row takeAvailableSpace>\n\t\t\t\t\t{/* <Input label={personaLabel} value={personaValue} onChange={onChange} /> */}\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tvalue={personaValue}\n\t\t\t\t\t\tlabel={personaLabel}\n\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t/>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\n\t\t\t<Padding bottom=\"large\" />\n\t\t</>\n\t);\n};\n\nexport default PersonaSettings;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useCallback, useState, useEffect } from 'react';\n\nimport type { InputProps } from '@zextras/carbonio-design-system';\nimport { Container, Text, Padding, Input, Row } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport type { Account, Identity, IdentityAttrs } from '../../../types/account';\nimport { TextField } from '@mui/material';\n\ninterface PrimaryAccountSettingsProps {\n\taccount: Account;\n\tidentity: Identity;\n\tupdateIdentities: <K extends keyof IdentityAttrs>(\n\t\tid: string,\n\t\tkey: K,\n\t\tvalue: IdentityAttrs[K]\n\t) => void;\n}\n\nconst PrimaryAccountSettings = ({\n\taccount,\n\tidentity,\n\tupdateIdentities\n}: PrimaryAccountSettingsProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst emailLabel = useMemo(() => t('label.email_address', 'E-mail address'), [t]);\n\tconst [accountNameValue, setAccountNameValue] = useState(\n\t\tidentity?._attrs?.zimbraPrefIdentityName\n\t);\n\n\tuseEffect(\n\t\t() => setAccountNameValue(identity._attrs?.zimbraPrefIdentityName),\n\t\t[identity._attrs?.zimbraPrefIdentityName]\n\t);\n\tconst accountLabel = useMemo(() => t('label.account_name', 'Account Name'), [t]);\n\n\tconst onChangeDisabled = useCallback(() => null, []);\n\tconst onChange = useCallback<NonNullable<InputProps['onChange']>>(\n\t\t(ev): void => {\n\t\t\tsetAccountNameValue(ev.target.value);\n\t\t\tupdateIdentities(identity.id, 'zimbraPrefIdentityName', ev.target.value);\n\t\t},\n\t\t[identity.id, updateIdentities]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground=\"gray6\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Padding horizontal=\"medium\" width=\"100%\">\n\t\t\t\t\t<Text weight=\"bold\">{t('primary_account.title', 'Primary Account Settings')}</Text>\n\t\t\t\t</Padding>\n\t\t\t</Container>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground=\"gray6\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row width=\"50%\" padding={{ right: 'small' }}>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\tlabel={emailLabel}\n\t\t\t\t\t\tvalue={account.name || ' '}\n\t\t\t\t\t\tonChange={onChangeDisabled}\n\t\t\t\t\t/>\n\t\t\t\t\t{/* <Input label={emailLabel} value={account.name || ' '} onChange={onChangeDisabled} /> */}\n\t\t\t\t</Row>\n\t\t\t\t<Row width=\"50%\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\tlabel={accountLabel}\n\t\t\t\t\t\tvalue={accountNameValue}\n\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t/>\n\t\t\t\t\t{/* <Input label={accountLabel} value={accountNameValue} onChange={onChange} /> */}\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Padding bottom=\"large\" />\n\t\t</>\n\t);\n};\n\nexport default PrimaryAccountSettings;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport type {\n\tDropdownItem,\n\tInputProps,\n\tSelectItem,\n\tSingleSelectionOnChange\n} from '@zextras/carbonio-design-system';\nimport {\n\tCheckbox,\n\tContainer,\n\tDropdown,\n\tIcon,\n\tInput,\n\tPadding,\n\tRow,\n\tSelect,\n\tText\n} from '@zextras/carbonio-design-system';\nimport { filter, find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { EMAIL_VALIDATION_REGEX } from '../../../constants';\nimport type { IdentityAttrs } from '../../../types/account';\nimport { TextField } from '@mui/material';\nimport {\n\tCENTER_CONTENT_BACKGROUND_COLOR,\n\tCENTER_CONTENT_SELECT_DROPDOWN_COLOR\n} from '../../../sruvi/EditedColors';\n\ntype SettingsSentMessagesProps = {\n\tidentityAttrs: IdentityAttrs;\n\tupdateIdentities: <K extends keyof IdentityAttrs>(\n\t\tid: string,\n\t\tkey: K,\n\t\tvalue: IdentityAttrs[K]\n\t) => void;\n\tavailableEmailAddresses?: string[];\n};\n\nconst blankItem: SelectItem = { label: '', value: '' };\n\nconst SettingsSentMessages = ({\n\tidentityAttrs,\n\tupdateIdentities,\n\tavailableEmailAddresses\n}: SettingsSentMessagesProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst title = useMemo(() => t('label.settings_sent_messages', 'Settings for Sent Messages'), [t]);\n\tconst [replyToEnabledValue, setReplyToEnabledValue] = useState(\n\t\tidentityAttrs.zimbraPrefReplyToEnabled === 'TRUE'\n\t);\n\tconst [replyToAddress, setReplyToAddress] = useState<string>(\n\t\tidentityAttrs.zimbraPrefReplyToAddress || ''\n\t);\n\tconst [dropdownOpen, setDropdownOpen] = useState(false);\n\tconst [fromDisplayValue, setFromDisplayValue] = useState<string>(\n\t\tidentityAttrs.zimbraPrefFromDisplay || ''\n\t);\n\tconst [replyToDisplay, setReplyToDisplay] = useState<string>(\n\t\tidentityAttrs.zimbraPrefReplyToDisplay || ''\n\t);\n\tconst fromAddressArray = useMemo(\n\t\t(): SelectItem[] =>\n\t\t\tavailableEmailAddresses\n\t\t\t\t? availableEmailAddresses.map((address): SelectItem => ({ value: address, label: address }))\n\t\t\t\t: [blankItem],\n\t\t[availableEmailAddresses]\n\t);\n\tconst [fromAddress, setFromAddress] = useState(\n\t\t() =>\n\t\t\tfind(fromAddressArray, (item) => item.value === identityAttrs.zimbraPrefFromAddress) ??\n\t\t\tblankItem\n\t);\n\n\tuseEffect(() => {\n\t\tsetReplyToEnabledValue(identityAttrs.zimbraPrefReplyToEnabled === 'TRUE');\n\t}, [identityAttrs.zimbraPrefReplyToEnabled]);\n\tuseEffect(() => {\n\t\tsetFromDisplayValue(identityAttrs.zimbraPrefFromDisplay || '');\n\t}, [identityAttrs.zimbraPrefFromDisplay]);\n\tuseEffect(() => {\n\t\tsetFromAddress(\n\t\t\tfind(fromAddressArray, (item) => item.value === identityAttrs.zimbraPrefFromAddress) ??\n\t\t\t\tblankItem\n\t\t);\n\t}, [fromAddressArray, identityAttrs.zimbraPrefFromAddress]);\n\tuseEffect(() => {\n\t\tsetReplyToDisplay(identityAttrs.zimbraPrefReplyToDisplay ?? '');\n\t}, [identityAttrs.zimbraPrefReplyToDisplay]);\n\tuseEffect(() => {\n\t\tsetReplyToAddress(identityAttrs.zimbraPrefReplyToAddress || '');\n\t}, [identityAttrs.zimbraPrefReplyToAddress]);\n\n\tconst onClickReplyToEnabled = useCallback(() => {\n\t\tsetReplyToEnabledValue((prevState) => {\n\t\t\tconst newState = !prevState;\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(\n\t\t\t\t\tidentityAttrs.zimbraPrefIdentityId,\n\t\t\t\t\t'zimbraPrefReplyToEnabled',\n\t\t\t\t\tprevState ? 'FALSE' : 'TRUE'\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn newState;\n\t\t});\n\t}, [identityAttrs.zimbraPrefIdentityId, updateIdentities]);\n\n\tconst fromDisplayLabel = useMemo(() => t('label.from_name', 'From: \"Name\"'), [t]);\n\tconst onChangeFromDisplayValue: InputProps['onChange'] = (e) => {\n\t\tsetFromDisplayValue(e.target.value);\n\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\tupdateIdentities(identityAttrs.zimbraPrefIdentityId, 'zimbraPrefFromDisplay', e.target.value);\n\t\t}\n\t};\n\n\tconst fromAddressLabel = useMemo(() => t('label.address', 'Address'), [t]);\n\n\tconst onChangeFromAddress = useCallback<SingleSelectionOnChange>(\n\t\t(newAddress) => {\n\t\t\tif (!newAddress) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (fromAddress?.value === newAddress) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetFromAddress(filter(fromAddressArray, (item) => item.value === newAddress)[0]);\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(identityAttrs.zimbraPrefIdentityId, 'zimbraPrefFromAddress', newAddress);\n\t\t\t}\n\t\t},\n\t\t[fromAddress?.value, fromAddressArray, identityAttrs.zimbraPrefIdentityId, updateIdentities]\n\t);\n\n\tconst replyToEnabledLabel = t(\n\t\t'label.set_reply_to_field',\n\t\t'Set the \"Reply-to\" field of e-mail message to:'\n\t);\n\n\tconst replyToDisplayLabel = useMemo(\n\t\t() => t('label.reply_to_field_example', 'e.g. Bob Smith'),\n\t\t[t]\n\t);\n\tconst onChangePrefReplyToDisplay = useCallback<NonNullable<InputProps['onChange']>>(\n\t\t(e) => {\n\t\t\tsetReplyToDisplay(e.target.value);\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(\n\t\t\t\t\tidentityAttrs.zimbraPrefIdentityId,\n\t\t\t\t\t'zimbraPrefReplyToDisplay',\n\t\t\t\t\te.target.value\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[identityAttrs.zimbraPrefIdentityId, updateIdentities]\n\t);\n\n\tconst replyToAddressLabel = useMemo(() => t('label.choose_account', 'Choose an account'), [t]);\n\n\tconst onChangeReplyToAddress = useCallback(\n\t\t(value: string) => {\n\t\t\tsetReplyToAddress(value);\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(identityAttrs.zimbraPrefIdentityId, 'zimbraPrefReplyToAddress', value);\n\t\t\t}\n\t\t},\n\t\t[updateIdentities, identityAttrs.zimbraPrefIdentityId]\n\t);\n\n\tconst replyToAddressArray = useMemo(\n\t\t(): DropdownItem[] => [\n\t\t\t{\n\t\t\t\tid: '0',\n\t\t\t\tlabel: identityAttrs.zimbraPrefFromAddress ?? '',\n\t\t\t\tonClick: () => onChangeReplyToAddress(identityAttrs.zimbraPrefFromAddress ?? '')\n\t\t\t}\n\t\t],\n\t\t[identityAttrs.zimbraPrefFromAddress, onChangeReplyToAddress]\n\t);\n\n\tconst isValidEmail = useMemo(\n\t\t() => replyToEnabledValue && !EMAIL_VALIDATION_REGEX.test(replyToAddress || ''),\n\t\t[replyToEnabledValue, replyToAddress]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={CENTER_CONTENT_BACKGROUND_COLOR}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Padding horizontal=\"medium\" width=\"100%\">\n\t\t\t\t\t<Text weight=\"bold\">{title}</Text>\n\t\t\t\t</Padding>\n\t\t\t</Container>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={CENTER_CONTENT_BACKGROUND_COLOR}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row width={'50%'} padding={{ right: 'small' }}>\n\t\t\t\t\t{/* zimbraPrefFromDisplay */}\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tlabel={fromDisplayLabel}\n\t\t\t\t\t\tvalue={fromDisplayValue}\n\t\t\t\t\t\tonChange={onChangeFromDisplayValue}\n\t\t\t\t\t/>\n\t\t\t\t\t{/* <Input\n\t\t\t\t\t\tlabel={fromDisplayLabel}\n\t\t\t\t\t\tvalue={fromDisplayValue}\n\t\t\t\t\t\tonChange={onChangeFromDisplayValue}\n\t\t\t\t\t/> */}\n\t\t\t\t</Row>\n\t\t\t\t<Row width=\"50%\">\n\t\t\t\t\t{/* zimbraPrefFromAddress */}\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel={fromAddressLabel}\n\t\t\t\t\t\tselection={fromAddress}\n\t\t\t\t\t\titems={fromAddressArray}\n\t\t\t\t\t\tshowCheckbox={false}\n\t\t\t\t\t\tbackground={CENTER_CONTENT_SELECT_DROPDOWN_COLOR}\n\t\t\t\t\t\tonChange={onChangeFromAddress}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\tborder: '1px solid lightgray'\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t>\n\t\t\t\t{/* zimbraPrefReplyToEnabled */}\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={replyToEnabledLabel}\n\t\t\t\t\tvalue={replyToEnabledValue}\n\t\t\t\t\tonClick={onClickReplyToEnabled}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={CENTER_CONTENT_BACKGROUND_COLOR}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row width=\"50%\" padding={{ right: 'small' }}>\n\t\t\t\t\t{/* zimbraPrefReplyToDisplay */}\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tlabel={replyToDisplayLabel}\n\t\t\t\t\t\tvalue={replyToDisplay}\n\t\t\t\t\t\tonChange={onChangePrefReplyToDisplay}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/* <Input\n\t\t\t\t\t\tlabel={replyToDisplayLabel}\n\t\t\t\t\t\tvalue={replyToDisplay}\n\t\t\t\t\t\tdisabled={!replyToEnabledValue}\n\t\t\t\t\t\tonChange={onChangePrefReplyToDisplay}\n\t\t\t\t\t/> */}\n\t\t\t\t</Row>\n\t\t\t\t<Row width=\"50%\">\n\t\t\t\t\t{/* zimbraPrefReplyToAddress */}\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\titems={replyToAddressArray}\n\t\t\t\t\t\tplacement=\"bottom-start\"\n\t\t\t\t\t\tstyle={{ flexGrow: '1' }}\n\t\t\t\t\t\tonClose={(): void => setDropdownOpen(false)}\n\t\t\t\t\t\tonOpen={(): void => setDropdownOpen(true)}\n\t\t\t\t\t\tdisabled={!replyToEnabledValue}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tlabel={replyToAddressLabel}\n\t\t\t\t\t\t\tvalue={replyToAddress}\n\t\t\t\t\t\t\tonChange={(ev): void => onChangeReplyToAddress(ev.target.value)}\n\t\t\t\t\t\t\thasError={isValidEmail}\n\t\t\t\t\t\t\tCustomIcon={(): ReactElement => (\n\t\t\t\t\t\t\t\t<Icon icon={dropdownOpen ? 'ArrowUp' : 'ArrowDown'} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tdisabled={!replyToEnabledValue}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Padding bottom=\"large\" />\n\t\t</>\n\t);\n};\n\nexport default SettingsSentMessages;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useState, useMemo, useCallback, useRef } from 'react';\n\nimport type { ModalProps } from '@zextras/carbonio-design-system';\nimport { Modal, Button } from '@zextras/carbonio-design-system';\nimport type { Location } from 'history';\nimport { filter } from 'lodash';\nimport { Prompt, useHistory } from 'react-router-dom';\n\nimport { getT } from '../store/i18n/hooks';\n\nexport interface RouteLeavingGuardProps {\n\tchildren: ModalProps['children'];\n\twhen?: boolean;\n\tonSave: () => Promise<PromiseSettledResult<Awaited<unknown>>[]>;\n\tdataHasError?: boolean;\n}\n\nexport const RouteLeavingGuard = ({\n\tchildren,\n\twhen,\n\tonSave,\n\tdataHasError = false\n}: RouteLeavingGuardProps): React.JSX.Element => {\n\tconst history = useHistory();\n\tconst lastLocationInitial = useMemo(() => history.location, [history]);\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst lastLocationRef = useRef(lastLocationInitial);\n\tconst confirmedNavigationRef = useRef(false);\n\tconst t = getT();\n\tconst cancel = useCallback((): void => {\n\t\tsetModalVisible(false);\n\t\tconfirmedNavigationRef.current = false;\n\t}, []);\n\n\tconst confirmNavigation = useCallback(() => {\n\t\tconfirmedNavigationRef.current = true;\n\t\tif (lastLocationRef.current) {\n\t\t\t// Navigate to the previous blocked location with your navigate function\n\t\t\thistory.push(lastLocationRef.current);\n\t\t}\n\t}, [history]);\n\n\tconst handleBlockedNavigation = useCallback(\n\t\t(nextLocation: Location): boolean => {\n\t\t\tif (\n\t\t\t\t!confirmedNavigationRef.current &&\n\t\t\t\t`${nextLocation.pathname}${nextLocation.search || ''}` !==\n\t\t\t\t\t`${history.location.pathname}${history.location.search}`\n\t\t\t) {\n\t\t\t\tsetModalVisible(true);\n\t\t\t\tlastLocationRef.current = nextLocation;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t[history.location.pathname, history.location.search]\n\t);\n\n\tconst onConfirm = useCallback((): void => {\n\t\tonSave()\n\t\t\t.then((results) => {\n\t\t\t\tconst rejected = filter(\n\t\t\t\t\tresults,\n\t\t\t\t\t(result): result is PromiseRejectedResult => result.status === 'rejected'\n\t\t\t\t);\n\t\t\t\tif (rejected.length > 0) {\n\t\t\t\t\tconsole.error(rejected);\n\t\t\t\t\tcancel();\n\t\t\t\t} else {\n\t\t\t\t\tsetModalVisible(false);\n\t\t\t\t\tconfirmNavigation();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((reason) => {\n\t\t\t\tconsole.error(reason);\n\t\t\t\tcancel();\n\t\t\t});\n\t}, [cancel, confirmNavigation, onSave]);\n\n\tconst onSecondaryAction = useCallback((): void => {\n\t\tsetModalVisible(false);\n\t\tconfirmNavigation();\n\t}, [confirmNavigation]);\n\n\treturn (\n\t\t<>\n\t\t\t<Prompt when={when} message={handleBlockedNavigation} />\n\t\t\t{/* Your own alert/dialog/modal component */}\n\t\t\t<Modal\n\t\t\t\tshowCloseIcon\n\t\t\t\tcloseIconTooltip={t('label.close', 'Close')}\n\t\t\t\topen={modalVisible}\n\t\t\t\ttitle={\n\t\t\t\t\tdataHasError\n\t\t\t\t\t\t? t('label.cannot_save_changes', 'Some changes cannot be saved')\n\t\t\t\t\t\t: t('label.unsaved_changes', 'You have unsaved changes')\n\t\t\t\t}\n\t\t\t\tonClose={cancel}\n\t\t\t\tonConfirm={dataHasError ? onSecondaryAction : onConfirm}\n\t\t\t\tconfirmLabel={\n\t\t\t\t\tdataHasError\n\t\t\t\t\t\t? t('label.leave_anyway', 'Leave anyway')\n\t\t\t\t\t\t: t('label.save_and_leave', 'Save and leave')\n\t\t\t\t}\n\t\t\t\tonSecondaryAction={dataHasError ? cancel : onSecondaryAction}\n\t\t\t\tsecondaryActionLabel={\n\t\t\t\t\tdataHasError ? t('label.cancel', 'Cancel') : t('label.leave_anyway', 'Leave anyway')\n\t\t\t\t}\n\t\t\t\toptionalFooter={\n\t\t\t\t\t!dataHasError ? (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\tlabel={t('label.cancel', 'Cancel')}\n\t\t\t\t\t\t\tonClick={cancel}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : undefined\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useEffect, useMemo } from 'react';\n\nimport {\n\tBreadcrumbs,\n\tContainer,\n\ttype Crumb,\n\tDivider,\n\tPadding,\n\tRow,\n\tText\n} from '@zextras/carbonio-design-system';\nimport { useHistory, useParams } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { getT } from '../../store/i18n/hooks';\nimport type { RouteLeavingGuardProps } from '../../ui-extras/nav-guard';\nimport { RouteLeavingGuard } from '../../ui-extras/nav-guard';\nimport { Button } from '@mui/material';\nimport {\n\tCENTER_CONTENT_BUTTON_BACKGROUND_COLOR,\n\tCENTER_CONTENT_BUTTON_TEXT_COLOR,\n\tCENTER_CONTENT_BUTTON_ICON_COLOR,\n\tCENTER_CONTENT_BUTTON_BACKGROUND_WARNING_COLOR,\n\tCENTER_CONTENT_BUTTON_TEXT_WARNING_COLOR,\n\tCENTER_CONTENT_BUTTON_DISABLED_BACKGROUND_WARNING_COLOR,\n\tCENTER_CONTENT_BUTTON_ICON_WARNING_COLOR,\n\tCENTER_CONTENT_BACKGROUND_COLOR,\n\tCENTER_CONTENT_BUTTON_DISABLED_BACKGROUND_COLOR\n} from '../../sruvi/EditedColors';\nimport BackspaceIcon from '@mui/icons-material/Backspace';\nimport BookmarksIcon from '@mui/icons-material/Bookmarks';\n\nconst CustomBreadcrumbs = styled(Breadcrumbs)`\n\t.breadcrumbCrumb {\n\t\tcursor: default;\n\t}\n`;\n\nexport type SettingsHeaderProps = {\n\ttitle: string;\n\tonSave: RouteLeavingGuardProps['onSave'];\n\tonCancel: () => void;\n\tisDirty: boolean;\n};\n\nexport const SettingsHeader = ({\n\tonSave,\n\tonCancel,\n\tisDirty,\n\ttitle\n}: SettingsHeaderProps): React.JSX.Element => {\n\tconst t = getT();\n\tconst history = useHistory();\n\tconst params = useParams();\n\tconst crumbs = useMemo(\n\t\t(): Crumb[] => [\n\t\t\t{\n\t\t\t\tid: 'settings',\n\t\t\t\tlabel: t('settings.app', 'Settings'),\n\t\t\t\tclassName: 'breadcrumbCrumb'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'general',\n\t\t\t\tlabel: title,\n\t\t\t\tclassName: 'breadcrumbCrumb'\n\t\t\t}\n\t\t],\n\t\t[t, title]\n\t);\n\n\tconst search: string | undefined = history.location?.search;\n\n\tuseEffect(() => {\n\t\tif (search) {\n\t\t\t// TODO: why not using anchor links instead of js?\n\t\t\tsetTimeout(\n\t\t\t\t() =>\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.querySelector(`#${history.location.search}`.replace('?section=', ''))\n\t\t\t\t\t\t?.scrollIntoView(),\n\t\t\t\t1\n\t\t\t);\n\t\t}\n\t}, [history, history.location, history.location.search, search, params]);\n\treturn (\n\t\t<>\n\t\t\t<RouteLeavingGuard when={isDirty} onSave={onSave}>\n\t\t\t\t<Text>\n\t\t\t\t\t{t(\n\t\t\t\t\t\t'label.unsaved_changes_line1',\n\t\t\t\t\t\t'Are you sure you want to leave this page without saving?'\n\t\t\t\t\t)}\n\t\t\t\t</Text>\n\t\t\t\t<Text>{t('label.unsaved_changes_line2', 'All your unsaved changes will be lost')}</Text>\n\t\t\t</RouteLeavingGuard>\n\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\talignItems: 'center',\n\n\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\tbackgroundColor: CENTER_CONTENT_BACKGROUND_COLOR\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\tpadding: '16px'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div style={{ marginLeft: '8px' }}>\n\t\t\t\t\t\t<CustomBreadcrumbs crumbs={crumbs} />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\tmarginRight: '8px'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\tonClick={onCancel}\n\t\t\t\t\t\t\tdisabled={!isDirty}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundColor: isDirty\n\t\t\t\t\t\t\t\t\t? CENTER_CONTENT_BUTTON_BACKGROUND_WARNING_COLOR\n\t\t\t\t\t\t\t\t\t: CENTER_CONTENT_BUTTON_DISABLED_BACKGROUND_WARNING_COLOR,\n\t\t\t\t\t\t\t\tcolor: CENTER_CONTENT_BUTTON_TEXT_WARNING_COLOR,\n\t\t\t\t\t\t\t\tmarginRight: '8px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstartIcon={\n\t\t\t\t\t\t\t\t<BackspaceIcon style={{ color: CENTER_CONTENT_BUTTON_ICON_WARNING_COLOR }} />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('label.discard_changes', 'DISCARD')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\tonClick={onSave}\n\t\t\t\t\t\t\tdisabled={!isDirty}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundColor: isDirty\n\t\t\t\t\t\t\t\t\t? CENTER_CONTENT_BUTTON_BACKGROUND_COLOR\n\t\t\t\t\t\t\t\t\t: CENTER_CONTENT_BUTTON_DISABLED_BACKGROUND_COLOR,\n\t\t\t\t\t\t\t\tcolor: CENTER_CONTENT_BUTTON_TEXT_COLOR\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstartIcon={<BookmarksIcon style={{ color: CENTER_CONTENT_BUTTON_ICON_COLOR }} />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('label.save', 'Save')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* <Container\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tmainAlignment=\"space-around\"\n\t\t\t\tbackground={'white'}\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Row orientation=\"horizontal\" width=\"100%\">\n\t\t\t\t\t<Row\n\t\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\twidth=\"50%\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row\n\t\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\t\twidth=\"50%\"\n\t\t\t\t\t\tmainAlignment=\"flex-end\"\n\t\t\t\t\t\tcrossAlignment=\"flex-end\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tlabel={t('label.discard_changes', 'DISCARD CHANGES')}\n\t\t\t\t\t\t\t\tonClick={onCancel}\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tdisabled={!isDirty}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tlabel={t('label.save', 'Save')}\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={onSave}\n\t\t\t\t\t\t\tdisabled={!isDirty}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t</Container> */}\n\t\t\t<Divider />\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport UAParser from 'ua-parser-js';\n\nconst { os, browser } = UAParser();\nexport const userAgent = `CarbonioWebClient - ${browser.name} ${browser.version} (${os.name})`;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nexport function goToLogin(): void {\n\twindow.location.assign(`${window.location.origin}/static/login`);\n}\n\nexport function goTo(location: string): void {\n\twindow.location.assign(location);\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport {\n\tBrowserClient,\n\tdefaultIntegrations,\n\tdefaultStackParser,\n\tHub,\n\tmakeFetchTransport\n} from '@sentry/browser';\nimport { reduce } from 'lodash';\nimport { create } from 'zustand';\n\nimport { SENTRY_SHELL_DSN, SHELL_APP_ID } from '../constants';\nimport type { CarbonioModule } from '../types/apps';\n\ntype ReporterState = {\n\tclients: Record<string, Hub>;\n\tsetClients: (apps: Array<CarbonioModule>) => void;\n};\n\nexport const useReporter = create<ReporterState>()((set) => ({\n\tclients: {\n\t\t[SHELL_APP_ID]: new Hub(\n\t\t\tnew BrowserClient({\n\t\t\t\ttransport: makeFetchTransport,\n\t\t\t\tstackParser: defaultStackParser,\n\t\t\t\tintegrations: defaultIntegrations,\n\t\t\t\tdsn: SENTRY_SHELL_DSN,\n\t\t\t\trelease: '0',\n\t\t\t\tmaxValueLength: 500\n\t\t\t})\n\t\t)\n\t},\n\tsetClients: (apps): void => {\n\t\tset((s) => ({\n\t\t\tclients: reduce(\n\t\t\t\tapps,\n\t\t\t\t(acc, app) => {\n\t\t\t\t\tif (app.sentryDsn) {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\ts.clients[app.name] = new Hub(\n\t\t\t\t\t\t\tnew BrowserClient({\n\t\t\t\t\t\t\t\ttransport: makeFetchTransport,\n\t\t\t\t\t\t\t\tstackParser: defaultStackParser,\n\t\t\t\t\t\t\t\tintegrations: defaultIntegrations,\n\t\t\t\t\t\t\t\tdsn: app.sentryDsn,\n\t\t\t\t\t\t\t\trelease: app.version,\n\t\t\t\t\t\t\t\tmaxValueLength: 500\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\ts.clients\n\t\t\t)\n\t\t}));\n\t}\n}));\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { Event, EventHint } from '@sentry/browser';\n\nimport { useReporter } from './store';\n\nexport const report =\n\t(appId: string) =>\n\t(error: Event, hint?: EventHint): string => {\n\t\tconst reporter = useReporter.getState();\n\t\tconst eventId = reporter.clients[appId]?.captureException(error, { ...hint });\n\t\tif (eventId) {\n\t\t\tconsole.info('Reported event ', eventId);\n\t\t}\n\t\treturn eventId;\n\t};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nimport type { NetworkState } from '../../types/network';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useNetworkStore = create<NetworkState>()(() => ({\n\tpollingInterval: 30000,\n\tseq: 0\n}));\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useNetworkStore } from './store';\nimport type { SoapNotify, SoapRefresh } from '../../types/network';\n\nexport const useNotify = (): SoapNotify[] => useNetworkStore((s) => s.notify ?? []);\nexport const useRefresh = (): SoapRefresh => useNetworkStore((s) => s.refresh ?? {});\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nexport const tagWorker = new Worker(new URL('./tag', import.meta.url));\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nexport const folderWorker = new Worker(new URL('./folder', import.meta.url));\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nimport type { FolderState } from '../../types/folder';\nimport { folderWorker } from '../../workers';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useFolderStore = create<FolderState>()(() => ({\n\tfolders: {},\n\troots: {},\n\tsearches: {}\n}));\n\nfolderWorker.onmessage = ({ data }): void => {\n\tuseFolderStore.setState(data);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { sortBy } from 'lodash';\n\nimport { FOLDERS, ROOT_NAME } from '../../constants';\nimport type { Folder, LinkFolder } from '../../types/folder';\nimport type { FolderView, TreeNode } from '../../types/misc';\n\nconst hasId = (f: Folder | TreeNode<unknown>, id: string): boolean => f.id.split(':').includes(id);\nconst getOriginalId = (f: Folder): string => {\n\tconst parts = f.id.split(':');\n\treturn parts[1] ?? parts[0];\n};\nexport const sortFolders = (f: Folder): string => {\n\tconst id = getOriginalId(f);\n\tif (id === FOLDERS.TRASH) {\n\t\treturn FOLDERS.LAST_SYSTEM_FOLDER_POSITION;\n\t}\n\treturn parseInt(id, 10) < 17 ? `   ${id}` : f.name.toLowerCase();\n};\n\nexport const isTrash = (f: Folder): boolean => hasId(f, FOLDERS.TRASH);\n\nexport const isRoot = (f: Folder): boolean =>\n\tf.id === FOLDERS.USER_ROOT || (f as LinkFolder).oname === ROOT_NAME;\n\nexport const folderViewFilter =\n\t(v: FolderView) =>\n\t(deep?: boolean) =>\n\t(f: Folder): boolean =>\n\t\tf.view === v || !deep || (typeof f.view === 'undefined' && !isRoot(f));\n\nexport const filterNodes = <T>(\n\tchildren: TreeNode<T>[],\n\tf: (deep?: boolean) => (i: TreeNode<T>) => boolean,\n\tsortFunction?: (i: TreeNode<T>) => number | string,\n\tdeep?: boolean\n): TreeNode<T>[] => {\n\tconst childrenSorted = sortFunction ? sortBy(children, sortFunction) : children;\n\treturn childrenSorted\n\t\t.filter(f(deep))\n\t\t.map((i) => ({ ...i, children: filterNodes<TreeNode<T>>(i.children, f, sortFunction, true) }));\n};\n\ntype MapNodesOptions<T, U> = {\n\tmapFunction: (i: TreeNode<T>) => U;\n\tfilterFunction: (deep?: boolean) => (i: TreeNode<T>) => boolean;\n\trecursionKey: keyof U;\n\tsortFunction: (i: TreeNode<T>) => number | string;\n\tdeep: boolean;\n};\nexport const mapNodes = <T, U>(\n\tchildren: TreeNode<T>[],\n\t{ mapFunction, filterFunction, recursionKey, sortFunction, deep }: MapNodesOptions<T, U>\n): U[] =>\n\tsortBy(children, sortFunction).reduce((acc, folder) => {\n\t\tif (filterFunction(deep)(folder)) {\n\t\t\tacc.push({\n\t\t\t\t...mapFunction(folder),\n\t\t\t\t[recursionKey]: mapNodes<TreeNode<T>, U>(folder.children, {\n\t\t\t\t\tmapFunction,\n\t\t\t\t\tfilterFunction,\n\t\t\t\t\trecursionKey,\n\t\t\t\t\tsortFunction,\n\t\t\t\t\tdeep: true\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t\treturn acc;\n\t}, [] as U[]);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { ComponentType } from 'react';\nimport { useMemo } from 'react';\n\nimport { useFolderStore } from './store';\nimport { filterNodes, folderViewFilter, isRoot, mapNodes, sortFolders } from './utils';\nimport type { Folder, Folders, Searches, SearchFolder } from '../../types/folder';\nimport type { AccordionFolder, FolderView } from '../../types/misc';\n\n// FOLDERS\nexport const useFolder = (id: string): Folder | undefined => useFolderStore((s) => s.folders?.[id]);\nexport const getFolder = (id: string): Folder | undefined =>\n\tuseFolderStore.getState()?.folders?.[id];\nexport const useFolders = (): Folders => useFolderStore((s) => s.folders);\nexport const getFolders = (): Folders => useFolderStore.getState().folders;\n\n// ROOTS\nexport const useRoot = (id: string): Folder | undefined => useFolderStore((s) => s.roots?.[id]);\nexport const getRoot = (id: string): Folder | undefined => useFolderStore.getState().roots?.[id];\nexport const useRoots = (): Folders => useFolderStore((s) => s.roots);\nexport const getRoots = (): Folders => useFolderStore.getState().roots;\n\n// ROOTS BY VIEW\nexport const useRootByUser = (userId: string): Folder | SearchFolder | Record<string, never> =>\n\tuseFolderStore((s) => (s.roots ? s.roots[userId] : {}));\nexport const getRootByUser = (userId: string): Folder | SearchFolder | Record<string, never> => {\n\tconst folders = useFolderStore.getState();\n\treturn folders.roots ? folders.roots[userId] : {};\n};\n\n// SEARCHES\n\nexport const useSearchFolder = (id: string): SearchFolder | undefined =>\n\tuseFolderStore((s) => s.searches?.[id]);\nexport const getSearchFolder = (id: string): SearchFolder | undefined =>\n\tuseFolderStore.getState().searches[id];\nexport const useSearchFolders = (): Searches => useFolderStore((s) => s.searches);\nexport const getSearchFolders = (): Searches => useFolderStore.getState().searches;\n\n// Accordion-ize\n\nexport const useFoldersByView = (view: FolderView): Array<Folder> => {\n\tconst roots = useRoots();\n\treturn useMemo(\n\t\t() =>\n\t\t\troots ? filterNodes<Folder>(Object.values(roots), folderViewFilter(view), sortFolders) : [],\n\t\t[roots, view]\n\t);\n};\n\nexport const useFoldersAccordionByView = (\n\tview: FolderView,\n\tCustomComponent: ComponentType<{ folder: Folder }>,\n\titemProps?: (item: AccordionFolder) => Record<string, unknown>\n): Array<AccordionFolder> => {\n\tconst roots = useRoots();\n\treturn useMemo(\n\t\t() =>\n\t\t\troots\n\t\t\t\t? mapNodes<Folder, AccordionFolder>(Object.values(roots), {\n\t\t\t\t\t\tmapFunction: (f) => {\n\t\t\t\t\t\t\tconst item = {\n\t\t\t\t\t\t\t\tid: f.id,\n\t\t\t\t\t\t\t\tlabel: f.name,\n\t\t\t\t\t\t\t\tCustomComponent,\n\t\t\t\t\t\t\t\titems: [],\n\t\t\t\t\t\t\t\tfolder: f,\n\t\t\t\t\t\t\t\tdisableHover: isRoot(f)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst props = itemProps?.(item) ?? {};\n\t\t\t\t\t\t\treturn { ...item, ...props };\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterFunction: folderViewFilter(view),\n\t\t\t\t\t\trecursionKey: 'items',\n\t\t\t\t\t\tsortFunction: sortFolders,\n\t\t\t\t\t\tdeep: false\n\t\t\t\t\t})\n\t\t\t\t: [],\n\t\t[CustomComponent, itemProps, roots, view]\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nimport type { TagState } from '../../types/tags';\nimport { tagWorker } from '../../workers';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useTagStore = create<TagState>()(() => ({\n\ttags: {}\n}));\n\ntagWorker.onmessage = ({ data }): void => {\n\tuseTagStore.setState(data);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { pick } from 'lodash';\n\nimport { useTagStore } from './store';\nimport type { Tags } from '../../types/tags';\n\nexport const useTags = (ids?: Array<string> | string): Tags =>\n\tuseTagStore((s) => (ids ? pick(s.tags, ids) : s.tags));\nexport const getTags = (ids?: Array<string> | string): Tags =>\n\tids ? pick(useTagStore.getState().tags, ids) : useTagStore.getState().tags;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { forEach } from 'lodash';\n\nimport { useNetworkStore } from './store';\nimport type { AccountSettings } from '../../types/account';\nimport type { RawSoapResponse, SoapContext } from '../../types/network';\nimport { folderWorker, tagWorker } from '../../workers';\nimport { useAccountStore } from '../account';\nimport { useFolderStore } from '../folder';\nimport { useTagStore } from '../tags';\n\n/**\n * Polling interval to use if the long polling delay\n * is not allowed for the user\n */\nconst POLLING_NOWAIT_INTERVAL = 10_000;\n\n/**\n * Polling interval to use if a previous request failed\n * with a 500 error\n */\nconst POLLING_RETRY_INTERVAL = 60_000;\n\nexport const parsePollingInterval = (settings: AccountSettings): number => {\n\tconst pollingPref = settings.prefs?.zimbraPrefMailPollingInterval ?? '';\n\tif (pollingPref === '500') {\n\t\treturn 500;\n\t}\n\tconst pollingValue = parseInt(pollingPref, 10);\n\tif (Number.isNaN(pollingValue)) {\n\t\treturn 30000;\n\t}\n\tif (pollingPref.includes('m')) {\n\t\treturn pollingValue * 60 * 1000;\n\t}\n\treturn pollingValue * 1000;\n};\n\n/**\n * Return the polling interval for the next NoOp request.\n * The interval length depends on the user settings, but it can be\n * overridden by the server response/errors\n * @param res\n */\nexport const getPollingInterval = (res: RawSoapResponse<{ waitDisallowed?: number }>): number => {\n\tconst { pollingInterval } = useNetworkStore.getState();\n\tconst { settings } = useAccountStore.getState();\n\tconst waitDisallowed = res.Body && !('Fault' in res.Body) && res.Body.waitDisallowed;\n\tconst fault = res.Body && 'Fault' in res.Body && res.Body.Fault;\n\tif (fault) {\n\t\treturn POLLING_RETRY_INTERVAL;\n\t}\n\tif (waitDisallowed) {\n\t\treturn POLLING_NOWAIT_INTERVAL;\n\t}\n\tif (!fault) {\n\t\treturn parsePollingInterval(settings);\n\t}\n\treturn pollingInterval;\n};\n\nexport const handleSync = ({ refresh, notify }: SoapContext): Promise<void> =>\n\tnew Promise((r) => {\n\t\tconst { seq } = useNetworkStore.getState();\n\t\tif (refresh) {\n\t\t\ttagWorker.postMessage({\n\t\t\t\top: 'refresh',\n\t\t\t\ttags: refresh.tags\n\t\t\t});\n\t\t\tfolderWorker.postMessage({\n\t\t\t\top: 'refresh',\n\t\t\t\tfolder: refresh.folder ?? []\n\t\t\t});\n\t\t}\n\t\tif (notify?.length) {\n\t\t\tforEach(notify, (item) => {\n\t\t\t\tif (item.seq > seq) {\n\t\t\t\t\ttagWorker.postMessage({\n\t\t\t\t\t\top: 'notify',\n\t\t\t\t\t\tnotify: item,\n\t\t\t\t\t\tstate: useTagStore.getState().tags\n\t\t\t\t\t});\n\t\t\t\t\tfolderWorker.postMessage({\n\t\t\t\t\t\top: 'notify',\n\t\t\t\t\t\tnotify: item,\n\t\t\t\t\t\tstate: useFolderStore.getState().folders\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tr();\n\t});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { find, map, maxBy } from 'lodash';\n\nimport { userAgent } from './user-agent';\nimport { goToLogin } from './utils';\nimport { IS_FOCUS_MODE, JSNS, SHELL_APP_ID } from '../constants';\nimport { report } from '../reporting/functions';\nimport { useAccountStore } from '../store/account';\nimport { useNetworkStore } from '../store/network';\nimport { getPollingInterval, handleSync } from '../store/network/utils';\nimport type { Account } from '../types/account';\nimport type {\n\tErrorSoapBodyResponse,\n\tErrorSoapResponse,\n\tRawSoapContext,\n\tRawSoapNotify,\n\tRawSoapResponse,\n\tSoapContext,\n\tSoapNotify\n} from '../types/network';\n\nexport const fetchNoOp = (): void => {\n\t// eslint-disable-next-line @typescript-eslint/no-use-before-define\n\tgetSoapFetch(SHELL_APP_ID)(\n\t\t'NoOp',\n\t\tuseNetworkStore.getState().pollingInterval === 500\n\t\t\t? { _jsns: JSNS.mail, limitToOneBlocked: 1, wait: 1 }\n\t\t\t: { _jsns: JSNS.mail }\n\t);\n};\n\nconst getAccount = (\n\tacc?: Account,\n\totherAccount?: string\n): { by: string; _content: string } | undefined => {\n\tif (otherAccount) {\n\t\treturn {\n\t\t\tby: 'name',\n\t\t\t_content: otherAccount\n\t\t};\n\t}\n\tif (acc) {\n\t\tif (acc.name) {\n\t\t\treturn {\n\t\t\t\tby: 'name',\n\t\t\t\t_content: acc.name\n\t\t\t};\n\t\t}\n\t\tif (acc.id) {\n\t\t\treturn {\n\t\t\t\tby: 'id',\n\t\t\t\t_content: acc.id\n\t\t\t};\n\t\t}\n\t}\n\treturn undefined;\n};\n\nconst getXmlAccount = (acc?: Account, otherAccount?: string): string => {\n\tif (otherAccount) {\n\t\treturn `<account by=\"name\">${otherAccount}</account>`;\n\t}\n\tif (acc) {\n\t\tif (acc.name) {\n\t\t\treturn `<account by=\"name\">${acc.name}</account>`;\n\t\t}\n\t\tif (acc.id) {\n\t\t\treturn `<account by=\"id\">${acc.id}</account>`;\n\t\t}\n\t}\n\treturn '';\n};\n\nconst getXmlSession = (): string => {\n\tconst sessionId = useNetworkStore.getState().session?.id;\n\tif (sessionId) {\n\t\treturn `<session id=\"${sessionId}\"/>`;\n\t}\n\treturn '';\n};\n\nconst normalizeContext = ({ notify: rawNotify, ...context }: RawSoapContext): SoapContext => {\n\tconst normalizedContext: SoapContext = { ...context, notify: [] };\n\tif (rawNotify) {\n\t\tnormalizedContext.notify = map<RawSoapNotify, SoapNotify>(rawNotify, (notify) => ({\n\t\t\t...notify,\n\t\t\tdeleted: notify.deleted?.id?.split(',') ?? []\n\t\t}));\n\t}\n\treturn normalizedContext;\n};\n\nconst handleResponse = <R extends Record<string, unknown>>(\n\tapi: string,\n\tres: RawSoapResponse<R>\n): R | ErrorSoapBodyResponse => {\n\tconst { noOpTimeout } = useNetworkStore.getState();\n\tconst { usedQuota } = useAccountStore.getState();\n\tclearTimeout(noOpTimeout);\n\tif (res.Body.Fault) {\n\t\tif (\n\t\t\tfind(\n\t\t\t\t['service.AUTH_REQUIRED', 'service.AUTH_EXPIRED'],\n\t\t\t\t(code) => code === (<ErrorSoapResponse>res).Body.Fault.Detail?.Error?.Code\n\t\t\t)\n\t\t) {\n\t\t\tif (IS_FOCUS_MODE) {\n\t\t\t\tuseAccountStore.setState({ authenticated: false });\n\t\t\t} else {\n\t\t\t\tgoToLogin();\n\t\t\t}\n\t\t}\n\t\tconsole.error(\n\t\t\tnew Error(\n\t\t\t\t`${(<ErrorSoapResponse>res).Body.Fault.Detail?.Error?.Detail}: ${\n\t\t\t\t\t(<ErrorSoapResponse>res).Body.Fault.Reason?.Text\n\t\t\t\t}`\n\t\t\t)\n\t\t);\n\t}\n\tif (res.Header?.context) {\n\t\tconst responseUsedQuota =\n\t\t\tres.Header.context?.refresh?.mbx?.[0]?.s ??\n\t\t\tres.Header.context?.notify?.[0]?.modified?.mbx?.[0]?.s;\n\t\tconst _context = normalizeContext(res.Header.context);\n\t\tconst seq = maxBy(_context.notify, 'seq')?.seq ?? 0;\n\t\thandleSync(_context);\n\t\tuseAccountStore.setState({\n\t\t\tusedQuota: responseUsedQuota ?? usedQuota\n\t\t});\n\n\t\tconst nextPollingInterval = getPollingInterval(res);\n\t\tuseNetworkStore.setState({\n\t\t\tnoOpTimeout: setTimeout(() => fetchNoOp(), nextPollingInterval),\n\t\t\tpollingInterval: nextPollingInterval,\n\t\t\tseq,\n\t\t\t..._context\n\t\t});\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\treturn res?.Body?.Fault ? (res.Body as ErrorSoapBodyResponse) : (res.Body[`${api}Response`] as R);\n};\nexport const getSoapFetch =\n\t(app: string) =>\n\t<Request, Response extends Record<string, unknown>>(\n\t\tapi: string,\n\t\tbody: Request,\n\t\totherAccount?: string,\n\t\tsignal?: AbortSignal\n\t): Promise<Response> => {\n\t\tconst { zimbraVersion, account } = useAccountStore.getState();\n\t\tconst { notify, session } = useNetworkStore.getState();\n\t\treturn fetch(`/service/soap/${api}Request`, {\n\t\t\tsignal,\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tBody: {\n\t\t\t\t\t[`${api}Request`]: body\n\t\t\t\t},\n\t\t\t\tHeader: {\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\t_jsns: JSNS.all,\n\t\t\t\t\t\tnotify: notify?.[0]?.seq\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\tseq: notify?.[0]?.seq\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\tsession: session ?? {},\n\t\t\t\t\t\taccount: getAccount(account, otherAccount),\n\t\t\t\t\t\tuserAgent: {\n\t\t\t\t\t\t\tname: userAgent,\n\t\t\t\t\t\t\tversion: zimbraVersion\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}) // TODO proper error handling\n\t\t\t.then((res) => res?.json())\n\t\t\t.then((res: RawSoapResponse<Response>) => handleResponse(api, res))\n\t\t\t.catch((e) => {\n\t\t\t\treport(app)(e);\n\t\t\t\tthrow e;\n\t\t\t}) as Promise<Response>;\n\t};\n\nexport const getXmlSoapFetch =\n\t(app: string) =>\n\t<Request, Response extends Record<string, unknown>>(\n\t\tapi: string,\n\t\tbody: Request,\n\t\totherAccount?: string\n\t): Promise<Response> => {\n\t\tconst { zimbraVersion, account } = useAccountStore.getState();\n\t\treturn fetch(`/service/soap/${api}Request`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/soap+xml'\n\t\t\t},\n\t\t\tbody: `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\t\t<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\">\n\t\t\t<soap:Header><context xmlns=\"urn:zimbra\"><userAgent name=\"${userAgent}\" version=\"${zimbraVersion}\"/>${getXmlSession()}${getXmlAccount(\n\t\t\t\taccount,\n\t\t\t\totherAccount\n\t\t\t)}<format type=\"js\"/></context></soap:Header>\n\t\t\t<soap:Body>${body}</soap:Body>\n\t\t</soap:Envelope>`\n\t\t}) // TODO proper error handling\n\t\t\t.then((res) => res?.json())\n\t\t\t.then((res: RawSoapResponse<Response>) => handleResponse(api, res))\n\t\t\t.catch((e) => {\n\t\t\t\treport(app)(e);\n\t\t\t\tthrow e;\n\t\t\t}) as Promise<Response>;\n\t};\n\nexport const shellSoap = getSoapFetch(SHELL_APP_ID);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useMemo, useState, useEffect, useRef } from 'react';\n\nimport { Container, ModalManager, useSnackbar } from '@zextras/carbonio-design-system';\nimport { produce } from 'immer';\nimport { map, find, isEmpty, filter, size } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport AccountsList from './components/account-settings/accounts-list';\nimport PersonaSettings from './components/account-settings/persona-settings';\nimport PrimaryAccountSettings from './components/account-settings/primary-account-settings';\nimport SettingsSentMessages from './components/account-settings/settings-sent-messages';\nimport type { SettingsHeaderProps } from './components/settings-header';\nimport { SettingsHeader } from './components/settings-header';\nimport {\n\tcalculateNewIdentitiesState,\n\tdefaultAsFirstOrderIdentities,\n\tgetAvailableEmailAddresses,\n\tisPrimary\n} from './components/utils';\nimport { JSNS, SHELL_APP_ID } from '../constants';\nimport { getSoapFetch } from '../network/fetch';\nimport { useAccountStore, useUserAccount, useUserSettings } from '../store/account';\nimport type { AccountState, IdentityAttrs } from '../types/account';\nimport type {\n\tBatchRequest,\n\tBatchResponse,\n\tCreateIdentityRequest,\n\tCreateIdentityResponse,\n\tDeleteIdentityRequest,\n\tDeleteIdentityResponse,\n\tModifyIdentityRequest,\n\tModifyIdentityResponse\n} from '../types/network';\nimport { CENTER_CONTENT_BACKGROUND_COLOR } from '../sruvi/EditedColors';\n\nexport type AccountsSettingsBatchRequest = BatchRequest<{\n\tModifyIdentityRequest?: Array<ModifyIdentityRequest>;\n\tCreateIdentityRequest?: Array<CreateIdentityRequest>;\n\tDeleteIdentityRequest?: Array<DeleteIdentityRequest>;\n}>;\n\ntype AccountsSettingsBatchResponse = BatchResponse<{\n\tModifyIdentityResponse?: ModifyIdentityResponse[];\n\tDeleteIdentityResponse?: DeleteIdentityResponse[];\n\tCreateIdentityResponse?: CreateIdentityResponse[];\n}>;\n\nfunction mapToCreateIdentityRequests(\n\tcreateRecord: Record<string, IdentityAttrs>\n): Array<CreateIdentityRequest> {\n\treturn map(\n\t\tcreateRecord,\n\t\t(item): CreateIdentityRequest => ({\n\t\t\t_jsns: JSNS.account,\n\t\t\tidentity: {\n\t\t\t\tname: item.zimbraPrefIdentityName,\n\t\t\t\t_attrs: {\n\t\t\t\t\t...item,\n\t\t\t\t\tzimbraPrefFromAddressType: item.zimbraPrefFromAddressType || 'sendAs'\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t);\n}\n\nfunction mapToDeleteIdentityRequests(deleteArray: Array<string>): Array<DeleteIdentityRequest> {\n\treturn map(\n\t\tdeleteArray,\n\t\t(identityId, index): DeleteIdentityRequest => ({\n\t\t\t_jsns: JSNS.account,\n\t\t\tidentity: { id: identityId },\n\t\t\trequestId: index.toString()\n\t\t})\n\t);\n}\n\nfunction mapToModifyIdentityRequests(\n\tmodifyRecord: Record<string, Partial<IdentityAttrs>>\n): Array<ModifyIdentityRequest> {\n\treturn map<typeof modifyRecord, ModifyIdentityRequest>(\n\t\tmodifyRecord,\n\t\t(item, index): ModifyIdentityRequest => ({\n\t\t\t_jsns: JSNS.account,\n\t\t\tidentity: {\n\t\t\t\tid: index,\n\t\t\t\t_attrs: item\n\t\t\t}\n\t\t})\n\t);\n}\n\nexport const AccountsSettings = (): React.JSX.Element => {\n\tconst [t] = useTranslation();\n\tconst createSnackbar = useSnackbar();\n\n\tconst account = useUserAccount();\n\tconst settings = useUserSettings();\n\n\tconst createRecordRef = useRef<Record<string, IdentityAttrs>>({});\n\tconst deleteArrayRef = useRef<Array<string>>([]);\n\tconst modifyRecordRef = useRef<Record<string, Partial<IdentityAttrs>>>({});\n\n\tconst [isDirty, setIsDirty] = useState(false);\n\tconst calculateIsDirty = useCallback(() => {\n\t\tsetIsDirty(\n\t\t\t!isEmpty(createRecordRef.current) ||\n\t\t\t\t!isEmpty(deleteArrayRef.current) ||\n\t\t\t\t!isEmpty(modifyRecordRef.current)\n\t\t);\n\t}, []);\n\n\tconst resetLists = useCallback(() => {\n\t\tcreateRecordRef.current = {};\n\t\tdeleteArrayRef.current = [];\n\t\tmodifyRecordRef.current = {};\n\t\tcalculateIsDirty();\n\t}, [calculateIsDirty]);\n\n\tconst [selectedIdentityId, setSelectedIdentityId] = useState(0);\n\n\tconst identitiesDefault = useMemo(\n\t\t() => defaultAsFirstOrderIdentities(account.identities.identity),\n\t\t[account.identities.identity]\n\t);\n\n\tconst [identities, setIdentities] = useState<typeof identitiesDefault>(identitiesDefault);\n\tconst maxIdentities = settings.attrs.zimbraIdentityMaxNumEntries || 0;\n\n\tconst addIdentity = useCallback<(id: string, identityAttrs: IdentityAttrs) => void>(\n\t\t(id, identityAttrs) => {\n\t\t\tcreateRecordRef.current[id] = identityAttrs;\n\t\t\tcalculateIsDirty();\n\t\t\tsetIdentities((prevState) => [\n\t\t\t\t...prevState,\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\tname: identityAttrs.zimbraPrefIdentityName,\n\t\t\t\t\t_attrs: { ...identityAttrs, zimbraPrefIdentityId: id }\n\t\t\t\t}\n\t\t\t]);\n\t\t},\n\t\t[calculateIsDirty]\n\t);\n\n\tconst updateIdentities = useCallback<\n\t\t<K extends keyof IdentityAttrs>(id: string, key: K, value: IdentityAttrs[K]) => void\n\t>(\n\t\t(id, key, value) => {\n\t\t\tif (createRecordRef.current[id]) {\n\t\t\t\tcreateRecordRef.current[id][key] = value;\n\t\t\t} else if (modifyRecordRef.current[id]) {\n\t\t\t\tconst actualIdentity = find(identitiesDefault, (item) => item.id === id);\n\t\t\t\tmodifyRecordRef.current[id][key] = value;\n\t\t\t\tif (actualIdentity && actualIdentity._attrs[key] === value) {\n\t\t\t\t\tdelete modifyRecordRef.current[id][key];\n\t\t\t\t}\n\t\t\t\tif (size(modifyRecordRef.current[id]) === 0) {\n\t\t\t\t\tdelete modifyRecordRef.current[id];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmodifyRecordRef.current[id] = {\n\t\t\t\t\t[key]: value\n\t\t\t\t};\n\t\t\t}\n\t\t\tcalculateIsDirty();\n\t\t\tsetIdentities((prevState) =>\n\t\t\t\tmap(prevState, (item) =>\n\t\t\t\t\titem.id === id\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t_attrs: {\n\t\t\t\t\t\t\t\t\t...item._attrs,\n\t\t\t\t\t\t\t\t\t[key]: value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: item\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t[calculateIsDirty, identitiesDefault]\n\t);\n\n\tconst removeIdentity = useCallback(\n\t\t(identityId: string) => {\n\t\t\tif (createRecordRef.current[identityId]) {\n\t\t\t\tdelete createRecordRef.current[identityId];\n\t\t\t} else {\n\t\t\t\tdeleteArrayRef.current = [...deleteArrayRef.current, identityId];\n\t\t\t\tdelete modifyRecordRef.current[identityId];\n\t\t\t}\n\t\t\tcalculateIsDirty();\n\t\t\tsetIdentities((prevState) => filter(prevState, (identity) => identity.id !== identityId));\n\t\t},\n\t\t[calculateIsDirty]\n\t);\n\n\tuseEffect(() => {\n\t\tsetIdentities(identitiesDefault);\n\t\tresetLists();\n\t}, [identitiesDefault, resetLists]);\n\n\tconst onSave = useCallback<SettingsHeaderProps['onSave']>(() => {\n\t\tif (\n\t\t\tidentitiesDefault.length + size(createRecordRef.current) - deleteArrayRef.current.length >\n\t\t\tmaxIdentities\n\t\t) {\n\t\t\tcreateSnackbar({\n\t\t\t\tkey: `new`,\n\t\t\t\treplace: true,\n\t\t\t\ttype: 'error',\n\t\t\t\tlabel: t(\n\t\t\t\t\t'message.snackbar.identities_quota_exceeded',\n\t\t\t\t\t'The identity could not be created because you have exceeded your identity quota'\n\t\t\t\t),\n\t\t\t\tautoHideTimeout: 5000,\n\t\t\t\thideButton: true\n\t\t\t});\n\t\t\treturn Promise.allSettled([\n\t\t\t\tPromise.reject(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\t'The identity could not be created because you have exceeded your identity quota'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t]);\n\t\t}\n\n\t\tconst createIdentityRequests: Array<CreateIdentityRequest> = mapToCreateIdentityRequests(\n\t\t\tcreateRecordRef.current\n\t\t);\n\t\tconst deleteRequests: Array<DeleteIdentityRequest> = mapToDeleteIdentityRequests(\n\t\t\tdeleteArrayRef.current\n\t\t);\n\n\t\tconst modifyIdentityRequests: Array<ModifyIdentityRequest> = mapToModifyIdentityRequests(\n\t\t\tmodifyRecordRef.current\n\t\t);\n\n\t\tconst promise = getSoapFetch(SHELL_APP_ID)<\n\t\t\tAccountsSettingsBatchRequest,\n\t\t\tAccountsSettingsBatchResponse\n\t\t>('Batch', {\n\t\t\t_jsns: JSNS.all,\n\t\t\tDeleteIdentityRequest: deleteRequests.length > 0 ? deleteRequests : undefined,\n\t\t\tCreateIdentityRequest: createIdentityRequests.length > 0 ? createIdentityRequests : undefined,\n\t\t\tModifyIdentityRequest: modifyIdentityRequests.length > 0 ? modifyIdentityRequests : undefined\n\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `new`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tlabel: t('message.snackbar.settings_saved', 'Edits saved correctly'),\n\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\thideButton: true\n\t\t\t\t});\n\t\t\t\tuseAccountStore.setState(\n\t\t\t\t\tproduce((prevState: AccountState) => {\n\t\t\t\t\t\tif (prevState.account) {\n\t\t\t\t\t\t\tprevState.account.identities.identity = calculateNewIdentitiesState(\n\t\t\t\t\t\t\t\tprevState.account.identities.identity,\n\t\t\t\t\t\t\t\tdeleteArrayRef.current,\n\t\t\t\t\t\t\t\tmap(res.CreateIdentityResponse, (item) => item.identity[0]),\n\t\t\t\t\t\t\t\tmodifyRecordRef.current\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tprevState.account.displayName =\n\t\t\t\t\t\t\t\tfind(\n\t\t\t\t\t\t\t\t\tmodifyRecordRef.current,\n\t\t\t\t\t\t\t\t\t(item) => item.zimbraPrefIdentityId === prevState?.account?.id\n\t\t\t\t\t\t\t\t)?.zimbraPrefIdentityName || prevState.account?.displayName;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tresetLists();\n\t\t\t})\n\t\t\t.catch((error: unknown) => {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `new`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tlabel: t('snackbar.error', 'Something went wrong, please try again'),\n\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\thideButton: true\n\t\t\t\t});\n\t\t\t\tif (error instanceof Error) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t\tthrow new Error(typeof error === 'string' ? error : 'edit setting error');\n\t\t\t});\n\t\treturn Promise.allSettled([promise]);\n\t}, [maxIdentities, identitiesDefault.length, createSnackbar, t, resetLists]);\n\n\tconst availableEmailAddresses = useMemo(\n\t\t() => getAvailableEmailAddresses(account, settings),\n\t\t[account, settings]\n\t);\n\n\tconst onCancel = useCallback(() => {\n\t\tresetLists();\n\t\tsetIdentities(identitiesDefault);\n\t\tsetSelectedIdentityId(size(identitiesDefault) - 1);\n\t}, [identitiesDefault, resetLists]);\n\n\tconst personaSettings = useMemo<React.JSX.Element | null>(() => {\n\t\tconst identity = identities[selectedIdentityId];\n\t\tif (identity) {\n\t\t\treturn (\n\t\t\t\t<PersonaSettings identityAttrs={identity._attrs} updateIdentities={updateIdentities} />\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}, [identities, selectedIdentityId, updateIdentities]);\n\n\tconst settingsSentMessages = useMemo<React.JSX.Element | null>(() => {\n\t\tconst identity = identities[selectedIdentityId];\n\t\tif (identity) {\n\t\t\treturn (\n\t\t\t\t<SettingsSentMessages\n\t\t\t\t\tidentityAttrs={identity._attrs}\n\t\t\t\t\tupdateIdentities={updateIdentities}\n\t\t\t\t\tavailableEmailAddresses={availableEmailAddresses}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}, [availableEmailAddresses, identities, selectedIdentityId, updateIdentities]);\n\n\treturn (\n\t\t<>\n\t\t\t<SettingsHeader\n\t\t\t\tonSave={onSave}\n\t\t\t\tonCancel={onCancel}\n\t\t\t\tisDirty={isDirty}\n\t\t\t\ttitle={t('label.accounts', 'Accounts')}\n\t\t\t/>\n\t\t\t<Container\n\t\t\t\tbackground={CENTER_CONTENT_BACKGROUND_COLOR}\n\t\t\t\tpadding={{ top: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t/>\n\t\t\t<Container\n\t\t\t\tbackground={CENTER_CONTENT_BACKGROUND_COLOR}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\tstyle={{ overflow: 'auto' }}\n\t\t\t>\n\t\t\t\t<AccountsList\n\t\t\t\t\taccountName={account.name}\n\t\t\t\t\tidentities={identities}\n\t\t\t\t\tselectedIdentityId={selectedIdentityId}\n\t\t\t\t\tsetSelectedIdentityId={setSelectedIdentityId}\n\t\t\t\t\tremoveIdentity={removeIdentity}\n\t\t\t\t\taddIdentity={addIdentity}\n\t\t\t\t\tidentitiesDefault={identitiesDefault}\n\t\t\t\t/>\n\t\t\t\t{isPrimary(identities[selectedIdentityId]) ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PrimaryAccountSettings\n\t\t\t\t\t\t\taccount={account}\n\t\t\t\t\t\t\tidentity={identities[0]}\n\t\t\t\t\t\t\tupdateIdentities={updateIdentities}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{settingsSentMessages}\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{personaSettings}\n\t\t\t\t\t\t{settingsSentMessages}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t</>\n\t);\n};\n\nexport const WrappedAccountsSettings = (): React.JSX.Element => (\n\t<ModalManager>\n\t\t<AccountsSettings />\n\t</ModalManager>\n);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nexport type LoginConfigStore = {\n\tcarbonioWebUiDarkMode?: boolean;\n\tcarbonioWebUiAppLogo?: string;\n\tcarbonioWebUiDarkAppLogo?: string;\n\tcarbonioWebUiTitle: string;\n\tcarbonioWebUiFavicon: string;\n\tcarbonioWebUiPrimaryColor?: string;\n\tcarbonioWebUiDarkPrimaryColor?: string;\n\tcarbonioWebUiLogoutURL?: string;\n\tloaded: boolean;\n};\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useLoginConfigStore = create<LoginConfigStore>()(() => ({\n\tloaded: false,\n\t// setup defaults for fields which does not depend on dark mode\n\tcarbonioWebUiTitle: 'Carbonio Client',\n\t// default to png because this icon is used also in notification, and svg are not supported there\n\tcarbonioWebUiFavicon: `${BASE_PATH}favicon.png`\n}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { getSoapFetch } from './fetch';\nimport { goTo, goToLogin } from './utils';\nimport { JSNS, SHELL_APP_ID } from '../constants';\nimport { useLoginConfigStore } from '../store/login/store';\n\nexport function logout(): Promise<void> {\n\treturn getSoapFetch(SHELL_APP_ID)('EndSession', {\n\t\t_jsns: JSNS.account,\n\t\tlogoff: true\n\t})\n\t\t.then(() => fetch('/logout', { redirect: 'manual' }))\n\t\t.then(() => {\n\t\t\tconst customLogoutUrl = useLoginConfigStore.getState().carbonioWebUiLogoutURL;\n\t\t\tcustomLogoutUrl ? goTo(customLogoutUrl) : goToLogin();\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { TFunction } from 'i18next';\n\nimport type { SettingsSubSection } from '../types/apps';\n\nexport const appearanceSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('settings.general.appearance', 'Appearance'),\n\tid: 'appearance'\n});\nexport const timezoneAndLanguageSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('settings.timezone_and_language', 'Time Zone'),\n\tid: 'timezone_and_language'\n});\nexport const outOfOfficeSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('settings.out_of_office.headings.settings_label', 'Out of Office Settings'),\n\tid: 'out_of_office'\n});\nexport const searchPrefsSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('search.app', 'Search'),\n\tid: 'search_prefs'\n});\nexport const versionsSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('module.app.version', 'Application versions'),\n\tid: 'app_version'\n});\nexport const quotaSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('user_quota.title', \"User's quota\"),\n\tid: 'user_quota'\n});\nexport const accountSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('settings.general.account', 'Account'),\n\tid: 'account'\n});\n\nexport const settingsSubSections = (t: TFunction): Array<SettingsSubSection> => [\n\t// appearanceSubSection(t),\n\ttimezoneAndLanguageSubSection(t),\n\toutOfOfficeSubSection(t),\n\tsearchPrefsSubSection(t),\n\t//versionsSubSection(t),\n\tquotaSubSection(t)\n\t//accountSubSection(t)\n];\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useMemo } from 'react';\n\nimport { FormSubSection } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport { logout } from '../../../network/logout';\nimport { accountSubSection } from '../../general-settings-sub-sections';\nimport { Button } from '@mui/material';\nimport {\n\tCENTER_CONTENT_BUTTON_BACKGROUND_WARNING_COLOR,\n\tCENTER_CONTENT_BUTTON_TEXT_WARNING_COLOR,\n\tCENTER_CONTENT_BUTTON_DISABLED_BACKGROUND_WARNING_COLOR,\n\tCENTER_CONTENT_BUTTON_ICON_WARNING_COLOR\n} from '../../../sruvi/EditedColors';\nimport LogoutIcon from '@mui/icons-material/Logout';\n\nexport const Logout = (): React.JSX.Element => {\n\tconst [t] = useTranslation();\n\n\tconst sectionTitle = useMemo(() => accountSubSection(t), [t]);\n\n\treturn (\n\t\t<FormSubSection\n\t\t\tlabel={sectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"100%\"\n\t\t\tid={sectionTitle.id}\n\t\t>\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tsize=\"medium\"\n\t\t\t\tonClick={logout}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: CENTER_CONTENT_BUTTON_BACKGROUND_WARNING_COLOR,\n\t\t\t\t\tcolor: CENTER_CONTENT_BUTTON_TEXT_WARNING_COLOR\n\t\t\t\t}}\n\t\t\t\tstartIcon={<LogoutIcon style={{ color: CENTER_CONTENT_BUTTON_ICON_WARNING_COLOR }} />}\n\t\t\t>\n\t\t\t\t{t('settings.general.account_logout', 'Logout')}\n\t\t\t</Button>\n\t\t</FormSubSection>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useImperativeHandle } from 'react';\n\nimport type { SettingsSectionProps } from '../components/utils';\n\nexport function useReset(ref: SettingsSectionProps['resetRef'], resetFn: () => void): void {\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\treset: resetFn\n\t\t}),\n\t\t[resetFn]\n\t);\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport type { DateTimePickerProps } from '@zextras/carbonio-design-system';\nimport { Checkbox, Container, DateTimePicker } from '@zextras/carbonio-design-system';\n\nimport { getT } from '../../../store/i18n/hooks';\nimport type { GeneralizedTime } from '../../../types/account';\nimport type { AddMod } from '../../../types/network';\nimport { useReset } from '../../hooks/use-reset';\nimport type { SettingsSectionProps } from '../utils';\nimport {\n\tdateToGenTime,\n\tendOfDay,\n\tgenTimeToDate,\n\tstartOfDay,\n\tupsertPrefOnUnsavedChanges\n} from '../utils';\nimport {\n\tCENTER_CONTENT_BACKGROUND_COLOR,\n\tCENTER_CONTENT_SELECT_DROPDOWN_COLOR,\n\tCENTER_CONTENT_SELECT_DROPDOWN_DISABLED_COLOR\n} from '../../../sruvi/EditedColors';\n\ninterface OutOfOfficeTimePeriodSectionProps extends SettingsSectionProps {\n\taddMod: AddMod;\n\tdisabled: boolean;\n\tprefOutOfOfficeFromDate: GeneralizedTime | undefined;\n\tprefOutOfOfficeUntilDate: GeneralizedTime | undefined;\n}\n\nfunction coerceGenTime(genTime: GeneralizedTime | undefined): Date {\n\treturn genTime ? genTimeToDate(genTime) : new Date();\n}\n\nexport const OutOfOfficeTimePeriodSection = ({\n\taddMod,\n\tdisabled,\n\tprefOutOfOfficeFromDate,\n\tprefOutOfOfficeUntilDate,\n\tresetRef\n}: OutOfOfficeTimePeriodSectionProps): React.JSX.Element => {\n\tconst t = getT();\n\tconst [fromDate, setFromDate] = useState<Date>(coerceGenTime(prefOutOfOfficeFromDate));\n\tconst [untilDate, setUntilDate] = useState<Date>(coerceGenTime(prefOutOfOfficeUntilDate));\n\tconst [allDayEnabled, setAllDayEnabled] = useState<boolean>(false);\n\tconst editTimeIsDisabled = useMemo(() => disabled || allDayEnabled, [disabled, allDayEnabled]);\n\n\tconst updatePref = useMemo(() => upsertPrefOnUnsavedChanges(addMod), [addMod]);\n\n\tconst initPrefs = useCallback(() => {\n\t\tconst fromDatePref = coerceGenTime(prefOutOfOfficeFromDate);\n\t\tconst untilDatePref = coerceGenTime(prefOutOfOfficeUntilDate);\n\t\tsetFromDate(fromDatePref);\n\t\tsetUntilDate(untilDatePref);\n\t\t// there is no pref for the all day check. It is considered all day if the start date time is midnight\n\t\t// and the until date time is 23:59:59:00\n\t\tconst fromDateAllDay = startOfDay(fromDatePref);\n\t\tconst untilDateAllDay = endOfDay(untilDatePref);\n\t\tsetAllDayEnabled(\n\t\t\tfromDatePref.getTime() === fromDateAllDay.getTime() &&\n\t\t\t\tuntilDatePref.getTime() === untilDateAllDay.getTime()\n\t\t);\n\t}, [prefOutOfOfficeFromDate, prefOutOfOfficeUntilDate]);\n\n\tuseEffect(() => {\n\t\tinitPrefs();\n\t}, [initPrefs]);\n\n\tuseReset(resetRef, initPrefs);\n\n\tconst outOfOfficeFromDateOnChange = useCallback<NonNullable<DateTimePickerProps['onChange']>>(\n\t\t(newFromDate) => {\n\t\t\tif (newFromDate) {\n\t\t\t\tsetFromDate((prevState) => {\n\t\t\t\t\tif (newFromDate.getTime() !== prevState.getTime()) {\n\t\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', dateToGenTime(newFromDate));\n\t\t\t\t\t}\n\t\t\t\t\treturn newFromDate;\n\t\t\t\t});\n\t\t\t\tif (newFromDate.getTime() > untilDate.getTime()) {\n\t\t\t\t\tconst newUntilDate = new Date(newFromDate);\n\t\t\t\t\tsetUntilDate(newUntilDate);\n\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', dateToGenTime(newUntilDate));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// force an update by cloning the date, so that the input is not left empty\n\t\t\t\tsetFromDate((prevState) => new Date(prevState));\n\t\t\t}\n\t\t},\n\t\t[untilDate, updatePref]\n\t);\n\n\tconst outOfOfficeUntilDateOnChange = useCallback<NonNullable<DateTimePickerProps['onChange']>>(\n\t\t(newUntilDate) => {\n\t\t\tif (newUntilDate) {\n\t\t\t\tsetUntilDate((prevState) => {\n\t\t\t\t\tif (newUntilDate.getTime() !== prevState.getTime()) {\n\t\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', dateToGenTime(newUntilDate));\n\t\t\t\t\t}\n\t\t\t\t\treturn newUntilDate;\n\t\t\t\t});\n\t\t\t\tif (newUntilDate.getTime() < fromDate.getTime()) {\n\t\t\t\t\tconst newFromDate = new Date(newUntilDate);\n\t\t\t\t\tsetFromDate(newFromDate);\n\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', dateToGenTime(newFromDate));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// force an update by cloning the date, so that the input is not left empty\n\t\t\t\tsetUntilDate((prevState) => new Date(prevState));\n\t\t\t}\n\t\t},\n\t\t[fromDate, updatePref]\n\t);\n\n\tconst toggleAllDay = useCallback(() => {\n\t\tsetAllDayEnabled((prevWasEnabled) => {\n\t\t\tconst nowIsEnabled = !prevWasEnabled;\n\t\t\tif (nowIsEnabled) {\n\t\t\t\tsetFromDate((prevState) => {\n\t\t\t\t\tconst startOfFromDate = startOfDay(prevState);\n\t\t\t\t\tif (startOfFromDate.getTime() !== prevState.getTime()) {\n\t\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', dateToGenTime(startOfFromDate));\n\t\t\t\t\t}\n\t\t\t\t\treturn startOfFromDate;\n\t\t\t\t});\n\t\t\t\tsetUntilDate((prevState) => {\n\t\t\t\t\tconst endOfUntilDate = endOfDay(prevState);\n\t\t\t\t\tif (endOfUntilDate.getTime() !== prevState.getTime()) {\n\t\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', dateToGenTime(endOfUntilDate));\n\t\t\t\t\t}\n\t\t\t\t\treturn endOfUntilDate;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn nowIsEnabled;\n\t\t});\n\t}, [updatePref]);\n\n\treturn (\n\t\t<Container padding={{ vertical: 'small' }} gap={'0.5rem'} crossAlignment={'flex-start'}>\n\t\t\t<Container orientation={'horizontal'} gap={'0.5rem'}>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.start_date', 'Start Date')}\n\t\t\t\t\tdateFormat={'P'}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tdefaultValue={fromDate}\n\t\t\t\t\tonChange={outOfOfficeFromDateOnChange}\n\t\t\t\t\tincludeTime={false}\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t\tbackgroundColor={disabled ? 'transparent' : 'white'}\n\t\t\t\t/>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.end_date', 'End Date')}\n\t\t\t\t\tdateFormat={'P'}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttimeLabel={''}\n\t\t\t\t\tdefaultValue={untilDate}\n\t\t\t\t\tonChange={outOfOfficeUntilDateOnChange}\n\t\t\t\t\tincludeTime={false}\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t\tbackgroundColor={disabled ? 'transparent' : 'white'}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Checkbox\n\t\t\t\tdisabled={disabled}\n\t\t\t\tlabel={t('settings.out_of_office.labels.all_day', 'All Day:')}\n\t\t\t\tvalue={allDayEnabled}\n\t\t\t\tonClick={toggleAllDay}\n\t\t\t/>\n\t\t\t<Container orientation={'horizontal'} gap={'0.5rem'}>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.start_time', 'Start Time')}\n\t\t\t\t\tshowTimeSelect\n\t\t\t\t\tshowTimeSelectOnly\n\t\t\t\t\ttimeLabel=\"\"\n\t\t\t\t\tdateFormat=\"p\"\n\t\t\t\t\tdefaultValue={fromDate}\n\t\t\t\t\tonChange={outOfOfficeFromDateOnChange}\n\t\t\t\t\tdisabled={editTimeIsDisabled}\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t\tbackgroundColor={disabled ? 'transparent' : 'white'}\n\t\t\t\t/>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.end_time', 'End Time')}\n\t\t\t\t\tshowTimeSelect\n\t\t\t\t\tshowTimeSelectOnly\n\t\t\t\t\ttimeLabel=\"\"\n\t\t\t\t\tdateFormat=\"p\"\n\t\t\t\t\tdefaultValue={untilDate}\n\t\t\t\t\tonChange={outOfOfficeUntilDateOnChange}\n\t\t\t\t\tdisabled={editTimeIsDisabled}\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t\tbackgroundColor={disabled ? 'transparent' : 'white'}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport type {\n\tSelectItem,\n\tSingleSelectionOnChange,\n\tTextAreaProps\n} from '@zextras/carbonio-design-system';\nimport {\n\tCheckbox,\n\tContainer,\n\tFormSubSection,\n\tPadding,\n\tRow,\n\tSelect,\n\tText,\n\tTextArea\n} from '@zextras/carbonio-design-system';\nimport { type TFunction } from 'i18next';\nimport { find } from 'lodash';\n\nimport { OutOfOfficeTimePeriodSection } from './out-of-office-time-period-section';\nimport { getT } from '../../../store/i18n/hooks';\nimport type { AccountSettings, AccountSettingsPrefs, BooleanString } from '../../../types/account';\nimport type { AddMod } from '../../../types/network';\nimport { outOfOfficeSubSection } from '../../general-settings-sub-sections';\nimport { useReset } from '../../hooks/use-reset';\nimport type { ResetComponentImperativeHandler, SettingsSectionProps } from '../utils';\nimport { dateToGenTime, upsertPrefOnUnsavedChanges } from '../utils';\nimport {\n\tCENTER_CONTENT_SELECT_DROPDOWN_COLOR,\n\tCENTER_CONTENT_SELECT_DROPDOWN_DISABLED_COLOR\n} from '../../../sruvi/EditedColors';\nimport { FormControl, Grid2, InputLabel, OutlinedInput, TextField } from '@mui/material';\n\ntype CoercedPrefType<T> = T extends BooleanString | undefined ? boolean | undefined : T;\n\nexport const buildItemsPrefOutOfOfficeReplyEnabled = (\n\tt: TFunction\n): Array<\n\tSelectItem<\n\t\tNonNullable<CoercedPrefType<AccountSettingsPrefs['zimbraPrefOutOfOfficeReplyEnabled']>>\n\t>\n> => [\n\t{\n\t\tlabel: t('settings.out_of_office.send_auto_replies', 'Send auto-replies'),\n\t\tvalue: true\n\t},\n\t{\n\t\tlabel: t('settings.out_of_office.do_not_send_auto_replies', 'Do not send auto-replies'),\n\t\tvalue: false\n\t}\n];\n\ntype ExternalSenders =\n\t| 'SEND_AUTO_REPLY'\n\t| 'SHOW_EXTERNAL_INPUT'\n\t| 'SEND_NOT_IN_ORG'\n\t| 'SUPPRESS_EXTERNAL';\n\nexport const buildItemsExternalSenders = (\n\tt: TFunction\n): Record<ExternalSenders, SelectItem<ExternalSenders>> => ({\n\tSEND_AUTO_REPLY: {\n\t\tlabel: t(\n\t\t\t'settings.out_of_office.external_senders.send_standard_auto_reply',\n\t\t\t'Send standard auto-reply message'\n\t\t),\n\t\tvalue: 'SEND_AUTO_REPLY'\n\t},\n\tSHOW_EXTERNAL_INPUT: {\n\t\tlabel: t(\n\t\t\t'settings.out_of_office.external_senders.send_custom_in_organisation',\n\t\t\t'Send custom message to those who are not in my organization'\n\t\t),\n\t\tvalue: 'SHOW_EXTERNAL_INPUT'\n\t},\n\tSEND_NOT_IN_ORG: {\n\t\tlabel: t(\n\t\t\t'settings.out_of_office.external_senders.send_custom_not_in_organisation',\n\t\t\t'Send custom message to those who are not in my organization or address book'\n\t\t),\n\t\tvalue: 'SEND_NOT_IN_ORG'\n\t},\n\tSUPPRESS_EXTERNAL: {\n\t\tlabel: t(\n\t\t\t'settings.out_of_office.external_senders.do_not_send_to_external',\n\t\t\t\"Don't send an auto-reply message to external sender\"\n\t\t),\n\t\tvalue: 'SUPPRESS_EXTERNAL'\n\t}\n});\n\nexport const getExternalSendersPrefsData = (\n\tsettings: AccountSettings,\n\tt: TFunction\n): SelectItem<ExternalSenders> => {\n\tconst itemsExternalSenders = buildItemsExternalSenders(t);\n\tif (\n\t\tsettings.prefs.zimbraPrefOutOfOfficeSuppressExternalReply === 'FALSE' &&\n\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'FALSE'\n\t) {\n\t\treturn itemsExternalSenders.SEND_AUTO_REPLY;\n\t}\n\tif (\n\t\tsettings.prefs.zimbraPrefExternalSendersType === 'ALL' &&\n\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'TRUE'\n\t) {\n\t\treturn itemsExternalSenders.SHOW_EXTERNAL_INPUT;\n\t}\n\tif (\n\t\tsettings.prefs.zimbraPrefExternalSendersType === 'ALLNOTINAB' &&\n\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'TRUE'\n\t) {\n\t\treturn itemsExternalSenders.SEND_NOT_IN_ORG;\n\t}\n\treturn itemsExternalSenders.SUPPRESS_EXTERNAL;\n};\n\ninterface OutOfOfficeViewProps extends SettingsSectionProps {\n\tsettings: AccountSettings;\n\taddMod: AddMod;\n}\n\nexport const OutOfOfficeSettings = ({\n\tsettings,\n\taddMod,\n\tresetRef\n}: OutOfOfficeViewProps): React.JSX.Element => {\n\tconst t = getT();\n\tconst outOfOfficeSectionTitle = useMemo(() => outOfOfficeSubSection(t), [t]);\n\tconst [prefOutOfOfficeReplyEnabled, setPrefOutOfOfficeReplyEnabled] = useState<boolean>(\n\t\tsettings.prefs.zimbraPrefOutOfOfficeReplyEnabled === 'TRUE'\n\t);\n\tconst [prefOutOfOfficeReply, setPrefOutOfOfficeReply] = useState<string>(\n\t\tsettings.prefs.zimbraPrefOutOfOfficeReply ?? ''\n\t);\n\tconst [prefOutOfOfficeExternalReplyEnabled, setPrefOutOfOfficeExternalReplyEnabled] =\n\t\tuseState<boolean>(settings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'TRUE');\n\tconst [prefOutOfOfficeExternalReply, setPrefOutOfOfficeExternalReply] = useState<string>(\n\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReply ?? ''\n\t);\n\tconst [externalSendersSelectedItem, setExternalSendersSelectedItem] = useState<\n\t\tSelectItem<ExternalSenders>\n\t>(getExternalSendersPrefsData(settings, t));\n\tconst [sendAutoReplyTimePeriodEnabled, setSendAutoReplyTimePeriodEnabled] = useState<boolean>(\n\t\t!!settings.prefs.zimbraPrefOutOfOfficeFromDate &&\n\t\t\t!!settings.prefs.zimbraPrefOutOfOfficeUntilDate\n\t);\n\n\tconst outOfOfficeTimePeriodResetRef = useRef<ResetComponentImperativeHandler>(null);\n\n\tconst initPrefs = useCallback(() => {\n\t\tsetPrefOutOfOfficeReplyEnabled(settings.prefs.zimbraPrefOutOfOfficeReplyEnabled === 'TRUE');\n\t\tsetPrefOutOfOfficeReply(settings.prefs.zimbraPrefOutOfOfficeReply ?? '');\n\t\tsetPrefOutOfOfficeExternalReplyEnabled(\n\t\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'TRUE'\n\t\t);\n\t\tsetPrefOutOfOfficeExternalReply(settings.prefs.zimbraPrefOutOfOfficeExternalReply ?? '');\n\t\tsetExternalSendersSelectedItem(getExternalSendersPrefsData(settings, t));\n\t\tsetSendAutoReplyTimePeriodEnabled(\n\t\t\t!!settings.prefs.zimbraPrefOutOfOfficeFromDate &&\n\t\t\t\t!!settings.prefs.zimbraPrefOutOfOfficeUntilDate\n\t\t);\n\t\toutOfOfficeTimePeriodResetRef.current?.reset();\n\t}, [settings, t]);\n\n\tuseEffect(() => {\n\t\tinitPrefs();\n\t}, [initPrefs]);\n\n\tuseReset(resetRef, initPrefs);\n\n\tconst updatePref = useMemo(() => upsertPrefOnUnsavedChanges(addMod), [addMod]);\n\n\tconst prefOutOfOfficeReplyEnabledSelectItems = useMemo(\n\t\t() => buildItemsPrefOutOfOfficeReplyEnabled(t),\n\t\t[t]\n\t);\n\n\tconst prefOutOfOfficeReplyEnabledSelectedValue = useMemo<SelectItem<boolean>>(\n\t\t() =>\n\t\t\tfind(\n\t\t\t\tprefOutOfOfficeReplyEnabledSelectItems,\n\t\t\t\t(item) => item.value === prefOutOfOfficeReplyEnabled\n\t\t\t) as SelectItem<boolean>,\n\t\t[prefOutOfOfficeReplyEnabled, prefOutOfOfficeReplyEnabledSelectItems]\n\t);\n\n\tconst prefOutOfOfficeReplyEnabledOnChange = useCallback<\n\t\tSingleSelectionOnChange<\n\t\t\tNonNullable<CoercedPrefType<AccountSettingsPrefs['zimbraPrefOutOfOfficeReplyEnabled']>>\n\t\t>\n\t>(\n\t\t(value): void => {\n\t\t\tif (value !== null) {\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeReplyEnabled', value);\n\t\t\t\tsetPrefOutOfOfficeReplyEnabled(value);\n\t\t\t}\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst externalSendersSelectItems = useMemo(\n\t\t() => Object.values(buildItemsExternalSenders(t)),\n\t\t[t]\n\t);\n\n\tconst externalSendersHandler = useCallback(\n\t\t(value: ExternalSenders) => {\n\t\t\tif (value === 'SEND_AUTO_REPLY') {\n\t\t\t\tupdatePref('zimbraPrefExternalSendersType', 'INSD');\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReplyEnabled', false);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeSuppressExternalReply', false);\n\t\t\t\tsetPrefOutOfOfficeExternalReplyEnabled(false);\n\t\t\t} else if (value === 'SHOW_EXTERNAL_INPUT') {\n\t\t\t\tupdatePref('zimbraPrefExternalSendersType', 'ALL');\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReplyEnabled', true);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeSuppressExternalReply', false);\n\t\t\t\tsetPrefOutOfOfficeExternalReplyEnabled(true);\n\t\t\t} else if (value === 'SEND_NOT_IN_ORG') {\n\t\t\t\tupdatePref('zimbraPrefExternalSendersType', 'ALLNOTINAB');\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReplyEnabled', true);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeSuppressExternalReply', false);\n\t\t\t\tsetPrefOutOfOfficeExternalReplyEnabled(true);\n\t\t\t} else if (value === 'SUPPRESS_EXTERNAL') {\n\t\t\t\tupdatePref('zimbraPrefExternalSendersType', 'INAB');\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReplyEnabled', false);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeSuppressExternalReply', true);\n\t\t\t\tsetPrefOutOfOfficeExternalReplyEnabled(false);\n\t\t\t}\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst externalSendersOnChange = useCallback<SingleSelectionOnChange<ExternalSenders>>(\n\t\t(value) => {\n\t\t\tif (value !== null) {\n\t\t\t\texternalSendersHandler(value);\n\t\t\t\tconst newSelectItem = find(externalSendersSelectItems, (item) => item.value === value);\n\t\t\t\tnewSelectItem && setExternalSendersSelectedItem(newSelectItem);\n\t\t\t}\n\t\t},\n\t\t[externalSendersHandler, externalSendersSelectItems]\n\t);\n\n\tconst prefOutOfOfficeReplyOnChange = useCallback<NonNullable<TextAreaProps['onChange']>>(\n\t\t(ev) => {\n\t\t\tsetPrefOutOfOfficeReply(ev.target.value);\n\t\t\tupdatePref('zimbraPrefOutOfOfficeReply', ev.target.value);\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst prefOutOfOfficeExternalReplyOnChange = useCallback<NonNullable<TextAreaProps['onChange']>>(\n\t\t(ev) => {\n\t\t\tsetPrefOutOfOfficeExternalReply(ev.target.value);\n\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReply', ev.target.value);\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst toggleSendAutoReplyTimePeriod = useCallback(() => {\n\t\tsetSendAutoReplyTimePeriodEnabled((prevState) => {\n\t\t\tconst nextState = !prevState;\n\t\t\tif (!nextState) {\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', undefined);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', undefined);\n\t\t\t} else {\n\t\t\t\tif (!settings.prefs.zimbraPrefOutOfOfficeFromDate) {\n\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', dateToGenTime(new Date()));\n\t\t\t\t}\n\t\t\t\tif (!settings.prefs.zimbraPrefOutOfOfficeUntilDate) {\n\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', dateToGenTime(new Date()));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn nextState;\n\t\t});\n\t}, [\n\t\tsettings.prefs.zimbraPrefOutOfOfficeFromDate,\n\t\tsettings.prefs.zimbraPrefOutOfOfficeUntilDate,\n\t\tupdatePref\n\t]);\n\n\treturn (\n\t\t<FormSubSection\n\t\t\tlabel={outOfOfficeSectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"100%\"\n\t\t\tid={outOfOfficeSectionTitle.id}\n\t\t>\n\t\t\t<Container crossAlignment=\"baseline\" padding={{ all: 'small' }} gap={'0.5rem'}>\n\t\t\t\t<Grid2 container spacing={4} sx={{ width: '100%' }}>\n\t\t\t\t\t<Grid2 size={6}>\n\t\t\t\t\t\t<div style={{ width: '100%' }}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\titems={prefOutOfOfficeReplyEnabledSelectItems}\n\t\t\t\t\t\t\t\tlabel={t('label.out_of_office', 'Out of Office')}\n\t\t\t\t\t\t\t\tonChange={prefOutOfOfficeReplyEnabledOnChange}\n\t\t\t\t\t\t\t\tselection={prefOutOfOfficeReplyEnabledSelectedValue}\n\t\t\t\t\t\t\t\tstyle={{ width: '100%', border: '1px solid lightgray' }}\n\t\t\t\t\t\t\t\tbackground={CENTER_CONTENT_SELECT_DROPDOWN_COLOR}\n\t\t\t\t\t\t\t\tdropdownWidth=\"100%\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid2>\n\t\t\t\t\t<Grid2 size={6}>\n\t\t\t\t\t\t<div style={{ width: '100%' }}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t\t\t\t\titems={externalSendersSelectItems}\n\t\t\t\t\t\t\t\tlabel={t('settings.out_of_office.labels.external_senders', 'External Senders')}\n\t\t\t\t\t\t\t\tonChange={externalSendersOnChange}\n\t\t\t\t\t\t\t\tselection={externalSendersSelectedItem}\n\t\t\t\t\t\t\t\tdropdownWidth={'auto'}\n\t\t\t\t\t\t\t\tdropdownMaxWidth={'unset'}\n\t\t\t\t\t\t\t\tplacement={'bottom-start'}\n\t\t\t\t\t\t\t\tbackground={\n\t\t\t\t\t\t\t\t\tprefOutOfOfficeReplyEnabled\n\t\t\t\t\t\t\t\t\t\t? CENTER_CONTENT_SELECT_DROPDOWN_COLOR\n\t\t\t\t\t\t\t\t\t\t: CENTER_CONTENT_SELECT_DROPDOWN_DISABLED_COLOR\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstyle={{ width: '100%', border: '1px solid lightgray' }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid2>\n\t\t\t\t\t<Grid2 size={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tlabel={t('settings.out_of_office.labels.auto_reply_message', 'Auto-Reply Message:')}\n\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tborderColor: 'lightgray',\n\t\t\t\t\t\t\t\tbackgroundColor: prefOutOfOfficeReplyEnabled\n\t\t\t\t\t\t\t\t\t? CENTER_CONTENT_SELECT_DROPDOWN_COLOR\n\t\t\t\t\t\t\t\t\t: CENTER_CONTENT_SELECT_DROPDOWN_DISABLED_COLOR\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tvalue={prefOutOfOfficeReply}\n\t\t\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t\t\t\tonChange={prefOutOfOfficeReplyOnChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid2>\n\t\t\t\t\t<Grid2 size={12}>\n\t\t\t\t\t\t{prefOutOfOfficeExternalReplyEnabled && (\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\tvalue={prefOutOfOfficeExternalReply}\n\t\t\t\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t\t\t\t'settings.out_of_office.labels.auto_reply_message_external',\n\t\t\t\t\t\t\t\t\t'Auto-Reply Message for External senders:'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tonChange={prefOutOfOfficeExternalReplyOnChange}\n\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\tborderColor: 'lightgray',\n\t\t\t\t\t\t\t\t\tbackgroundColor: prefOutOfOfficeReplyEnabled\n\t\t\t\t\t\t\t\t\t\t? CENTER_CONTENT_SELECT_DROPDOWN_COLOR\n\t\t\t\t\t\t\t\t\t\t: CENTER_CONTENT_SELECT_DROPDOWN_DISABLED_COLOR\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid2>\n\t\t\t\t</Grid2>\n\t\t\t\t{/* <TextArea\n\t\t\t\t\tvalue={prefOutOfOfficeReply}\n\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.auto_reply_message', 'Auto-Reply Message:')}\n\t\t\t\t\tonChange={prefOutOfOfficeReplyOnChange}\n\t\t\t\t/>\n\t\t\t\t{prefOutOfOfficeExternalReplyEnabled && (\n\t\t\t\t\t<TextArea\n\t\t\t\t\t\tvalue={prefOutOfOfficeExternalReply}\n\t\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t\t'settings.out_of_office.labels.auto_reply_message_external',\n\t\t\t\t\t\t\t'Auto-Reply Message for External senders:'\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonChange={prefOutOfOfficeExternalReplyOnChange}\n\t\t\t\t\t/>\n\t\t\t\t)} */}\n\t\t\t</Container>\n\t\t\t<Container crossAlignment=\"baseline\" padding={{ all: 'small' }}>\n\t\t\t\t<Row\n\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\tmainAlignment=\"baseline\"\n\t\t\t\t\tcrossAlignment=\"baseline\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t>\n\t\t\t\t\t<Text size=\"large\" weight=\"bold\">\n\t\t\t\t\t\t{t('settings.out_of_office.headings.time_period', 'Time Period')}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t\t<Padding vertical=\"small\" />\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'settings.out_of_office.labels.send_auto_reply_period',\n\t\t\t\t\t\t'Send auto-replies during the following period:'\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={sendAutoReplyTimePeriodEnabled}\n\t\t\t\t\tonClick={toggleSendAutoReplyTimePeriod}\n\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t/>\n\t\t\t\t<OutOfOfficeTimePeriodSection\n\t\t\t\t\taddMod={addMod}\n\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled || !sendAutoReplyTimePeriodEnabled}\n\t\t\t\t\tprefOutOfOfficeFromDate={settings.prefs.zimbraPrefOutOfOfficeFromDate}\n\t\t\t\t\tprefOutOfOfficeUntilDate={settings.prefs.zimbraPrefOutOfOfficeUntilDate}\n\t\t\t\t\tresetRef={outOfOfficeTimePeriodResetRef}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</FormSubSection>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { Checkbox, Container, FormSubSection } from '@zextras/carbonio-design-system';\n\nimport { getT } from '../../../store/i18n/hooks';\nimport type { AccountSettings } from '../../../types/account';\nimport type { AddMod } from '../../../types/network';\nimport { searchPrefsSubSection } from '../../general-settings-sub-sections';\nimport { useReset } from '../../hooks/use-reset';\nimport type { SettingsSectionProps } from '../utils';\nimport { upsertPrefOnUnsavedChanges } from '../utils';\n\ntype SearchSettingsViewProps = SettingsSectionProps & {\n\tsettings: AccountSettings;\n\taddMod: AddMod;\n};\n\nexport const SearchSettings = ({\n\tsettings,\n\taddMod,\n\tresetRef\n}: SearchSettingsViewProps): React.JSX.Element => {\n\tconst t = getT();\n\tconst [searchInSpamFolder, setSearchInSpamFolder] = useState<boolean>(\n\t\tsettings.prefs.zimbraPrefIncludeSpamInSearch === 'TRUE'\n\t);\n\tconst [searchInTrashFolder, setSearchInTrashFolder] = useState<boolean>(\n\t\tsettings.prefs.zimbraPrefIncludeTrashInSearch === 'TRUE'\n\t);\n\tconst [searchInSharedFolder, setSearchInSharedFolder] = useState<boolean>(\n\t\tsettings.prefs.zimbraPrefIncludeSharedItemsInSearch === 'TRUE'\n\t);\n\tconst setMode = useMemo(() => upsertPrefOnUnsavedChanges(addMod), [addMod]);\n\n\tconst init = useCallback(() => {\n\t\tsetSearchInSpamFolder(settings.prefs.zimbraPrefIncludeSpamInSearch === 'TRUE');\n\t\tsetSearchInTrashFolder(settings.prefs.zimbraPrefIncludeTrashInSearch === 'TRUE');\n\t\tsetSearchInSharedFolder(settings.prefs.zimbraPrefIncludeSharedItemsInSearch === 'TRUE');\n\t}, [\n\t\tsettings.prefs.zimbraPrefIncludeSharedItemsInSearch,\n\t\tsettings.prefs.zimbraPrefIncludeSpamInSearch,\n\t\tsettings.prefs.zimbraPrefIncludeTrashInSearch\n\t]);\n\n\tuseReset(resetRef, init);\n\n\tuseEffect(() => {\n\t\tinit();\n\t}, [init]);\n\n\tconst onClickSpam = useCallback(() => {\n\t\tsetSearchInSpamFolder((prevState) => {\n\t\t\tconst newValue = !prevState;\n\t\t\tsetMode('zimbraPrefIncludeSpamInSearch', newValue);\n\t\t\treturn newValue;\n\t\t});\n\t}, [setMode]);\n\n\tconst onClickTrash = useCallback(() => {\n\t\tsetSearchInTrashFolder((prevState) => {\n\t\t\tconst newValue = !prevState;\n\t\t\tsetMode('zimbraPrefIncludeTrashInSearch', newValue);\n\t\t\treturn newValue;\n\t\t});\n\t}, [setMode]);\n\n\tconst onClickShared = useCallback(() => {\n\t\tsetSearchInSharedFolder((prevState) => {\n\t\t\tconst newValue = !prevState;\n\t\t\tsetMode('zimbraPrefIncludeSharedItemsInSearch', newValue);\n\t\t\treturn newValue;\n\t\t});\n\t}, [setMode]);\n\n\tconst sectionTitle = useMemo(() => searchPrefsSubSection(t), [t]);\n\n\treturn (\n\t\t<FormSubSection\n\t\t\tlabel={sectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"100%\"\n\t\t\tid={sectionTitle.id}\n\t\t>\n\t\t\t<Container crossAlignment=\"baseline\" padding={{ all: 'small' }}>\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'settings.search_settings.labels.include_search_in_spam_folder',\n\t\t\t\t\t\t'Include Spam Folder in Searches'\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={searchInSpamFolder}\n\t\t\t\t\tonClick={onClickSpam}\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'settings.search_settings.labels.include_search_in_trash_folder',\n\t\t\t\t\t\t'Include Trash Folder in Searches'\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={searchInTrashFolder}\n\t\t\t\t\tonClick={onClickTrash}\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'settings.search_settings.labels.include_search_in_shared_folder',\n\t\t\t\t\t\t'Include Shared Folder in Searches'\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={searchInSharedFolder}\n\t\t\t\t\tonClick={onClickShared}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</FormSubSection>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { Container, FormSubSection, Quota, Text, Tooltip } from '@zextras/carbonio-design-system';\n\nimport { useUserSettings } from '../../../store/account/hooks';\nimport { useAccountStore } from '../../../store/account/store';\nimport { getT } from '../../../store/i18n/hooks';\nimport { quotaSubSection } from '../../general-settings-sub-sections';\n\ninterface UserQuotaProps {\n\tmobileView: boolean;\n}\n\nconst UserQuota: FC<UserQuotaProps> = ({ mobileView }) => {\n\tconst t = getT();\n\n\tconst settings = useUserSettings();\n\tconst used = useAccountStore((s) => s.usedQuota);\n\tconst quota = useMemo(() => {\n\t\tconst userQuota = Number(settings?.attrs?.zimbraMailQuota);\n\t\tif (userQuota > 0) {\n\t\t\treturn Math.round((used / userQuota) * 100);\n\t\t}\n\t\treturn -1;\n\t}, [settings?.attrs?.zimbraMailQuota, used]);\n\n\tconst filledQuota = useMemo(() => {\n\t\tif (quota === -1 || quota >= 100) {\n\t\t\treturn 100;\n\t\t}\n\t\treturn quota;\n\t}, [quota]);\n\n\tconst description = useMemo(() => {\n\t\tswitch (true) {\n\t\t\tcase quota < 0:\n\t\t\t\treturn t('user_quota.unlimited', 'You have unlimited space available');\n\t\t\tcase quota === 100:\n\t\t\t\treturn t('user_quota.space_full', 'It seems that all available space is full');\n\t\t\tdefault:\n\t\t\t\treturn t('user_quota.limited', {\n\t\t\t\t\tdefaultValue: 'You have filled {{quota}}% of the available space',\n\t\t\t\t\tquota\n\t\t\t\t});\n\t\t}\n\t}, [quota, t]);\n\n\tconst fillBackground = useMemo(() => {\n\t\tswitch (true) {\n\t\t\tcase quota >= 95:\n\t\t\t\treturn 'error';\n\t\t\tcase quota >= 90:\n\t\t\t\treturn 'warning';\n\t\t\tcase quota === -1:\n\t\t\t\treturn 'gray4';\n\t\t\tdefault:\n\t\t\t\treturn 'primary';\n\t\t}\n\t}, [quota]);\n\tconst sectionTitle = useMemo(() => quotaSubSection(t), [t]);\n\treturn mobileView ? (\n\t\t<Container width=\"fit\" padding={{ right: 'medium' }}>\n\t\t\t<Tooltip label={description} placement=\"bottom\">\n\t\t\t\t<Quota fill={filledQuota} fillBackground={fillBackground} />\n\t\t\t</Tooltip>\n\t\t</Container>\n\t) : (\n\t\t<FormSubSection\n\t\t\tlabel={sectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"100%\"\n\t\t\tid={sectionTitle.id}\n\t\t>\n\t\t\t<Container width=\"fill\" padding={{ vertical: 'medium' }}>\n\t\t\t\t<Container\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tpadding={{ bottom: 'medium' }}\n\t\t\t\t>\n\t\t\t\t\t<Text>{description}</Text>\n\t\t\t\t</Container>\n\t\t\t\t<Quota fill={filledQuota} fillBackground={fillBackground} />\n\t\t\t</Container>\n\t\t</FormSubSection>\n\t);\n};\n\nexport default UserQuota;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport type { SelectItem, SingleSelectionOnChange } from '@zextras/carbonio-design-system';\nimport { Container, FormSubSection, Modal, Select, Text } from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\n\nimport type { SettingsSectionProps } from './components/utils';\nimport { localeList, timeZoneList, upsertPrefOnUnsavedChanges } from './components/utils';\nimport { timezoneAndLanguageSubSection } from './general-settings-sub-sections';\nimport { useReset } from './hooks/use-reset';\nimport { getT } from '../store/i18n/hooks';\nimport type { AccountSettings } from '../types/account';\nimport type { AddMod } from '../types/network';\nimport { CENTER_CONTENT_SELECT_DROPDOWN_COLOR } from '../sruvi/EditedColors';\n\ninterface LanguageAndTimeZoneSettingsProps extends SettingsSectionProps {\n\tsettings: AccountSettings;\n\taddMod: AddMod;\n\topen: boolean;\n\tsetOpen: (arg: boolean) => void;\n}\n\nexport const LanguageAndTimeZoneSettings = ({\n\tsettings,\n\taddMod,\n\topen,\n\tsetOpen,\n\tresetRef\n}: LanguageAndTimeZoneSettingsProps): React.JSX.Element => {\n\tconst t = getT();\n\tconst locales = useMemo(() => localeList(t), [t]);\n\tconst timezones = useMemo(() => timeZoneList(t), [t]);\n\tconst sectionTitle = useMemo(() => timezoneAndLanguageSubSection(t), [t]);\n\n\tconst updatePref = useMemo(() => upsertPrefOnUnsavedChanges(addMod), [addMod]);\n\n\tconst [prefLocale, setPrefLocale] = useState<string>(settings.prefs.zimbraPrefLocale ?? '');\n\n\t// TODO update with SHELL-181\n\tconst prefLocaleSelectedValue = useMemo<SelectItem>(\n\t\t() => find(locales, (item) => item.value === prefLocale) as SelectItem,\n\t\t[locales, prefLocale]\n\t);\n\n\tconst onLocaleChange = useCallback<SingleSelectionOnChange>(\n\t\t(value) => {\n\t\t\tif (value) {\n\t\t\t\tupdatePref('zimbraPrefLocale', value);\n\t\t\t\tsetPrefLocale(value);\n\t\t\t}\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst [prefTimeZoneId, setPrefTimeZoneId] = useState<string>(\n\t\tsettings.prefs.zimbraPrefTimeZoneId ?? ''\n\t);\n\n\t// TODO update with SHELL-181\n\tconst prefTimeZoneIdSelectedValue = useMemo<SelectItem>(\n\t\t() => find(timezones, (item) => item.value === prefTimeZoneId) as SelectItem,\n\t\t[timezones, prefTimeZoneId]\n\t);\n\n\tconst onTimeZoneChange = useCallback<SingleSelectionOnChange>(\n\t\t(value) => {\n\t\t\tif (value) {\n\t\t\t\tupdatePref('zimbraPrefTimeZoneId', value);\n\t\t\t\tsetPrefTimeZoneId(value);\n\t\t\t}\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst init = useCallback(() => {\n\t\tsetPrefLocale(settings.prefs.zimbraPrefLocale ?? '');\n\t\tsetPrefTimeZoneId(settings.prefs.zimbraPrefTimeZoneId ?? '');\n\t}, [settings.prefs.zimbraPrefLocale, settings.prefs.zimbraPrefTimeZoneId]);\n\n\tuseReset(resetRef, init);\n\n\treturn (\n\t\t<FormSubSection\n\t\t\tlabel={sectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"100%\"\n\t\t\tid={sectionTitle.id}\n\t\t>\n\t\t\t<Container crossAlignment=\"baseline\" padding={{ all: 'small' }} gap={'0.5rem'}>\n\t\t\t\t{/* <Select\n\t\t\t\t\t\titems={locales}\n\t\t\t\t\t\tbackground={CENTER_CONTENT_SELECT_DROPDOWN_COLOR}\n\t\t\t\t\t\tlabel={t('label.language', 'Language')}\n\t\t\t\t\t\tonChange={onLocaleChange}\n\t\t\t\t\t\tselection={prefLocaleSelectedValue}\n\t\t\t\t\t\tshowCheckbox={false}\n\t\t\t\t\t\tdropdownMaxHeight=\"12.5rem\"\n\t\t\t\t\t\tselectedBackgroundColor=\"highlight\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\tborder: '1px solid lightgray'\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t */}\n\n\t\t\t\t<Select\n\t\t\t\t\titems={timezones}\n\t\t\t\t\tbackground={CENTER_CONTENT_SELECT_DROPDOWN_COLOR}\n\t\t\t\t\tlabel={t('label.time_zone', 'Time Zone')}\n\t\t\t\t\tonChange={onTimeZoneChange}\n\t\t\t\t\tselection={prefTimeZoneIdSelectedValue}\n\t\t\t\t\tshowCheckbox={false}\n\t\t\t\t\tdropdownMaxHeight=\"12.5rem\"\n\t\t\t\t\tselectedBackgroundColor=\"highlight\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\tborder: '1px solid lightgray'\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={t('label.reload', 'Reload')}\n\t\t\t\t\topen={open}\n\t\t\t\t\tdismissLabel={t('label.no', 'No')}\n\t\t\t\t\tonConfirm={(): void => window.location.reload()}\n\t\t\t\t\tconfirmLabel={t('label.reload', 'Reload')}\n\t\t\t\t\tonClose={(): void => setOpen(false)}\n\t\t\t\t>\n\t\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'message.reload',\n\t\t\t\t\t\t\t`\tWould you like to reload the application now to show the new language?\n\t\t\t\t\t\t\t(Otherwise, the new language will appear the next time you sign in.)`\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t</Modal>\n\t\t\t</Container>\n\t\t</FormSubSection>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { CSSProperties } from 'react';\nimport type React from 'react';\n\nimport { reduce } from 'lodash';\n\nexport type ElementPosition = {\n\ttop: number;\n\tleft: number;\n};\n\nexport type ElementSize = {\n\twidth: number;\n\theight: number;\n};\n\nexport type SizeAndPosition = ElementPosition & ElementSize;\n\nexport const testFolderIsChecked = ({ string }: { string: string | undefined }): boolean =>\n\t/#/.test(string || '');\n\nexport function setGlobalCursor(cursor: CSSProperties['cursor']): void {\n\t// remove previously set cursor\n\tconst cursors: string[] = [];\n\tdocument.body.classList.forEach((item) => {\n\t\tif (item.startsWith('global-cursor-')) {\n\t\t\tcursors.push(item);\n\t\t}\n\t});\n\tdocument.body.classList.remove(...cursors);\n\tif (cursor) {\n\t\tdocument.body.classList.add(`global-cursor-${cursor}`);\n\t}\n}\n\nexport function setElementSizeAndPosition(\n\telement: HTMLElement,\n\tkey: keyof SizeAndPosition,\n\tvalue: number | undefined\n): void {\n\t// eslint-disable-next-line no-param-reassign\n\telement.style[key] = value !== undefined ? `${value}px` : '';\n}\n\nexport function stopPropagation(event: Event | React.SyntheticEvent): void {\n\tevent.stopPropagation();\n}\n\nexport function createExportForTestOnly<TObj extends Record<string, unknown>>(\n\tobjToExport: TObj\n): { [K in keyof TObj]: TObj[K] | undefined } {\n\treturn process.env.NODE_ENV === 'test'\n\t\t? objToExport\n\t\t: reduce(\n\t\t\t\tobjToExport,\n\t\t\t\t(accumulator, value, key) => {\n\t\t\t\t\taccumulator[key as keyof TObj] = undefined;\n\t\t\t\t\treturn accumulator;\n\t\t\t\t},\n\t\t\t\t{} as Record<keyof TObj, undefined>\n\t\t\t);\n}\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type React from 'react';\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\n\nimport { create } from 'zustand';\n\nimport { createExportForTestOnly } from '../../utils/utils';\n\nfunction isSameLocalStorageValue(valueA: unknown, valueB: unknown): boolean {\n\treturn JSON.stringify(valueA) === JSON.stringify(valueB);\n}\n\ntype LocalStorageOptions = { keepSyncedWithStorage?: boolean };\n\ntype LocalStorageState = {\n\tstorage: Record<string, unknown>;\n\treadValue: <T>(key: string, fallback: T) => void;\n\tsetValue: <T>(key: string, value: React.SetStateAction<T>) => void;\n};\n\nconst useLocalStorageStore = create<LocalStorageState>()((setState) => ({\n\tstorage: {},\n\treadValue<T>(key: string, fallback: T): void {\n\t\tconst localStorageItem = window.localStorage.getItem(key);\n\t\tlet item: T;\n\t\ttry {\n\t\t\titem = localStorageItem !== null ? JSON.parse(localStorageItem) : fallback;\n\t\t} catch (error) {\n\t\t\tconsole.error(`Cannot read local storage ${key} with value \"${localStorageItem}\":`, error);\n\t\t\titem = fallback;\n\t\t}\n\t\tsetState((state) => {\n\t\t\tif (state.storage[key] === undefined) {\n\t\t\t\treturn { storage: { ...state.storage, [key]: item } };\n\t\t\t}\n\t\t\treturn state;\n\t\t});\n\t},\n\tsetValue<T>(key: string, value: React.SetStateAction<T>): void {\n\t\tsetState((state) => {\n\t\t\tconst valueToStore = value instanceof Function ? value(state.storage[key] as T) : value;\n\t\t\tif (!isSameLocalStorageValue(valueToStore, state.storage[key])) {\n\t\t\t\twindow.localStorage.setItem(key, JSON.stringify(valueToStore));\n\t\t\t\treturn { storage: { ...state.storage, [key]: valueToStore } };\n\t\t\t}\n\t\t\treturn state;\n\t\t});\n\t}\n}));\n\nconst DEFAULT_OPTIONS: LocalStorageOptions = {\n\tkeepSyncedWithStorage: true\n};\n\nexport function useLocalStorage<T>(\n\tkey: string,\n\tinitialValue: T,\n\toptions = DEFAULT_OPTIONS\n): [T, React.Dispatch<React.SetStateAction<T>>] {\n\tconst storedValue = useLocalStorageStore((state) => (state.storage[key] as T) ?? initialValue);\n\tconst shouldDispatchStorageEventRef = useRef(false);\n\tconst localStorageOptions = useMemo(() => ({ ...DEFAULT_OPTIONS, ...options }), [options]);\n\n\tconst readValueForKey = useCallback(() => {\n\t\tuseLocalStorageStore.getState().readValue(key, initialValue);\n\t}, [key, initialValue]);\n\n\tuseEffect(() => {\n\t\treadValueForKey();\n\t}, [readValueForKey]);\n\n\tconst setValueForKey = useCallback<React.Dispatch<React.SetStateAction<T>>>(\n\t\t(value) => {\n\t\t\tuseLocalStorageStore.getState().setValue(key, value);\n\t\t\tshouldDispatchStorageEventRef.current = true;\n\t\t},\n\t\t[key]\n\t);\n\n\tuseEffect(() => {\n\t\tif (localStorageOptions?.keepSyncedWithStorage) {\n\t\t\twindow.addEventListener('storage', readValueForKey);\n\t\t}\n\n\t\treturn (): void => {\n\t\t\twindow.removeEventListener('storage', readValueForKey);\n\t\t};\n\t}, [localStorageOptions?.keepSyncedWithStorage, readValueForKey]);\n\n\tuseEffect(() => {\n\t\tif (shouldDispatchStorageEventRef.current) {\n\t\t\t// dispatch event when stored value change,\n\t\t\t// but only after render to avoid possible update of parent component during render\n\t\t\twindow.dispatchEvent(new Event('storage'));\n\t\t\tshouldDispatchStorageEventRef.current = false;\n\t\t}\n\t}, [storedValue]);\n\n\treturn [storedValue, setValueForKey];\n}\n\nexport const exportForTest = createExportForTestOnly({ useLocalStorageStore });\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\n\nimport { Container, useSnackbar } from '@zextras/carbonio-design-system';\nimport { findIndex, includes, isEmpty, map, reduce, size } from 'lodash';\n\nimport AppearanceSettings from './components/general-settings/appearance-settings';\nimport DarkThemeSettingSection from './components/general-settings/dark-theme-settings-section';\nimport { Logout } from './components/general-settings/logout';\nimport ModuleVersionSettings from './components/general-settings/module-version-settings';\nimport { OutOfOfficeSettings } from './components/general-settings/out-of-office-settings';\nimport { ScalingSettingSection } from './components/general-settings/scaling-setting-section';\nimport { SearchSettings } from './components/general-settings/search-settings';\nimport UserQuota from './components/general-settings/user-quota';\nimport type { SettingsHeaderProps } from './components/settings-header';\nimport { SettingsHeader } from './components/settings-header';\nimport type { ResetComponentImperativeHandler } from './components/utils';\nimport { LanguageAndTimeZoneSettings } from './language-and-timezone-settings';\nimport { JSNS, LOCAL_STORAGE_SETTINGS_KEY, SHELL_APP_ID } from '../constants';\nimport { getSoapFetch } from '../network/fetch';\nimport { useLocalStorage } from '../shell/hooks/useLocalStorage';\nimport { useAccountStore, useUserSettings } from '../store/account';\nimport { getT } from '../store/i18n/hooks';\nimport type { AccountState } from '../types/account';\nimport type {\n\tAddMod,\n\tBatchRequest,\n\tModifyPrefsRequest,\n\tModifyPrefsResponse,\n\tModifyPropertiesRequest,\n\tModifyPropertiesResponse,\n\tMods,\n\tRemoveMod\n} from '../types/network';\nimport type { ScalingSettings } from '../types/settings';\nimport { CENTER_CONTENT_BACKGROUND_COLOR } from '../sruvi/EditedColors';\nimport Mobile from '../sruvi/Mobile';\n\nconst GeneralSettings = (): React.JSX.Element => {\n\tconst [mods, setMods] = useState<Mods>({});\n\tconst t = getT();\n\tconst userSettings = useUserSettings();\n\tconst [localStorageUnAppliedChanges, setLocalStorageUnAppliedChanges] = useState<ScalingSettings>(\n\t\t{}\n\t);\n\tconst [localStorageSettings, setLocalStorageSettings] = useLocalStorage<ScalingSettings>(\n\t\tLOCAL_STORAGE_SETTINGS_KEY,\n\t\t{}\n\t);\n\tconst [open, setOpen] = useState(false);\n\n\tconst addLocalStoreChange = useCallback((key, value) => {\n\t\tsetLocalStorageUnAppliedChanges((prevState) => ({\n\t\t\t...prevState,\n\t\t\t[key]: value\n\t\t}));\n\t}, []);\n\n\tconst cleanLocalStoreChange = useCallback<(key: keyof ScalingSettings) => void>((key) => {\n\t\tsetLocalStorageUnAppliedChanges((prevState) => {\n\t\t\tconst nextState = { ...prevState };\n\t\t\tdelete nextState[key];\n\t\t\treturn nextState;\n\t\t});\n\t}, []);\n\n\tconst addMod = useCallback<AddMod>((type, key, value) => {\n\t\tsetMods((prevState) => ({\n\t\t\t...prevState,\n\t\t\t[type]: {\n\t\t\t\t...prevState?.[type],\n\t\t\t\t[key]: value\n\t\t\t}\n\t\t}));\n\t}, []);\n\n\tconst removeMod = useCallback<RemoveMod>((type, key) => {\n\t\tsetMods((prevState) => {\n\t\t\tconst prevType = prevState[type];\n\t\t\tif (prevType && prevType[key] !== undefined) {\n\t\t\t\tconst nextState = { ...prevState, [type]: { ...prevState[type] } };\n\t\t\t\tconst nextType = nextState[type];\n\t\t\t\tif (nextType && nextType[key] !== undefined) {\n\t\t\t\t\tdelete nextType[key];\n\t\t\t\t}\n\t\t\t\tif (size(nextState[type]) === 0) {\n\t\t\t\t\tdelete nextState[type];\n\t\t\t\t}\n\t\t\t\treturn nextState;\n\t\t\t}\n\t\t\treturn prevState;\n\t\t});\n\t}, []);\n\tconst createSnackbar = useSnackbar();\n\n\tconst onSave = useCallback<SettingsHeaderProps['onSave']>(() => {\n\t\tsetLocalStorageUnAppliedChanges((unAppliedPrevState) => {\n\t\t\tif (size(unAppliedPrevState) > 0) {\n\t\t\t\tsetLocalStorageSettings((localStorageSettingsPrevState) => ({\n\t\t\t\t\t...localStorageSettingsPrevState,\n\t\t\t\t\t...unAppliedPrevState\n\t\t\t\t}));\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\treturn unAppliedPrevState;\n\t\t});\n\t\tif (size(mods) > 0) {\n\t\t\tlet modifyPropertiesRequest: ModifyPropertiesRequest | undefined;\n\t\t\tif (mods.props) {\n\t\t\t\tconst mappedProperties = map(\n\t\t\t\t\tmods.props,\n\t\t\t\t\t(prop, key): ModifyPropertiesRequest['prop'][0] => ({\n\t\t\t\t\t\tname: key,\n\t\t\t\t\t\tzimlet: prop.app,\n\t\t\t\t\t\t_content: prop.value\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tmodifyPropertiesRequest = { _jsns: JSNS.account, prop: mappedProperties };\n\t\t\t}\n\n\t\t\tlet modifyPrefsRequest: ModifyPrefsRequest | undefined;\n\n\t\t\tif (mods.prefs) {\n\t\t\t\tconst attrs = mods.prefs;\n\t\t\t\tif ('zimbraPrefMailTrustedSenderList' in attrs) {\n\t\t\t\t\tattrs.zimbraPrefMailTrustedSenderList =\n\t\t\t\t\t\tattrs.zimbraPrefMailTrustedSenderList instanceof Array &&\n\t\t\t\t\t\tattrs.zimbraPrefMailTrustedSenderList.length === 0\n\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t: attrs.zimbraPrefMailTrustedSenderList;\n\t\t\t\t}\n\t\t\t\tmodifyPrefsRequest = { _jsns: JSNS.account, _attrs: attrs };\n\t\t\t}\n\n\t\t\tconst promise = getSoapFetch(SHELL_APP_ID)<\n\t\t\t\tBatchRequest,\n\t\t\t\t{\n\t\t\t\t\tModifyPropertiesResponse?: ModifyPropertiesResponse;\n\t\t\t\t\tModifyPrefsResponse?: ModifyPrefsResponse;\n\t\t\t\t}\n\t\t\t>('Batch', {\n\t\t\t\t_jsns: JSNS.all,\n\t\t\t\tModifyPropertiesRequest: modifyPropertiesRequest,\n\t\t\t\tModifyPrefsRequest: modifyPrefsRequest\n\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tuseAccountStore.setState((s: AccountState) => ({\n\t\t\t\t\t\tsettings: {\n\t\t\t\t\t\t\t...s.settings,\n\t\t\t\t\t\t\tprefs: reduce(\n\t\t\t\t\t\t\t\tmods.prefs,\n\t\t\t\t\t\t\t\t(acc, pref, key) => ({\n\t\t\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t\t\t[key]: pref as string\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\ts.settings.prefs\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tprops: reduce(\n\t\t\t\t\t\t\t\tmods.props,\n\t\t\t\t\t\t\t\t(acc, { app, value }, key) => {\n\t\t\t\t\t\t\t\t\tconst propIndex = findIndex(acc, (p) => p.name === key && p.zimlet === app);\n\t\t\t\t\t\t\t\t\tif (propIndex >= 0) {\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\t\t\t\tacc[propIndex] = {\n\t\t\t\t\t\t\t\t\t\t\tname: key,\n\t\t\t\t\t\t\t\t\t\t\tzimlet: app,\n\t\t\t\t\t\t\t\t\t\t\t_content: value as string\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tacc.push({\n\t\t\t\t\t\t\t\t\t\t\tname: key,\n\t\t\t\t\t\t\t\t\t\t\tzimlet: app,\n\t\t\t\t\t\t\t\t\t\t\t_content: value as string\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ts.settings.props\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\n\t\t\t\t\tif (mods.prefs && includes(Object.keys(mods.prefs), 'zimbraPrefLocale')) {\n\t\t\t\t\t\tsetOpen(true);\n\t\t\t\t\t}\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `new`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tlabel: t('message.snackbar.settings_saved', 'Edits saved correctly'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t\tsetMods({});\n\t\t\t\t})\n\t\t\t\t.catch((error: unknown) => {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `new`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tlabel: t('snackbar.error', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t\tif (error instanceof Error) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Error(typeof error === 'string' ? error : 'edit setting error');\n\t\t\t\t});\n\t\t\treturn Promise.allSettled([promise]);\n\t\t}\n\t\treturn Promise.allSettled([Promise.resolve()]);\n\t}, [mods, setLocalStorageSettings, createSnackbar, t]);\n\n\tconst scalingSettingSectionRef = useRef<ResetComponentImperativeHandler>(null);\n\tconst darkThemeSettingSectionRef = useRef<ResetComponentImperativeHandler>(null);\n\tconst languageAndTimeZoneSettingsSectionRef = useRef<ResetComponentImperativeHandler>(null);\n\tconst outOfOfficeSettingsSectionRef = useRef<ResetComponentImperativeHandler>(null);\n\tconst searchSettingsSectionRef = useRef<ResetComponentImperativeHandler>(null);\n\n\tconst onCancel = useCallback(() => {\n\t\tsetMods({});\n\t\tif (size(localStorageUnAppliedChanges) > 0) {\n\t\t\tscalingSettingSectionRef.current?.reset();\n\t\t}\n\t\tdarkThemeSettingSectionRef.current?.reset();\n\t\tlanguageAndTimeZoneSettingsSectionRef.current?.reset();\n\t\toutOfOfficeSettingsSectionRef.current?.reset();\n\t\tsearchSettingsSectionRef?.current?.reset();\n\t}, [localStorageUnAppliedChanges]);\n\n\tconst isDirty = useMemo(\n\t\t() => !isEmpty(mods) || !isEmpty(localStorageUnAppliedChanges),\n\t\t[mods, localStorageUnAppliedChanges]\n\t);\n\n\tconst title = useMemo(() => t('settings.general.general', 'General Settings'), [t]);\n\n\treturn (\n\t\t<>\n\t\t\t<SettingsHeader title={title} onCancel={onCancel} onSave={onSave} isDirty={isDirty} />\n\t\t\t<Container\n\t\t\t\tbackground={CENTER_CONTENT_BACKGROUND_COLOR}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tcrossAlignment={'flex-start'}\n\t\t\t\tpadding={{ all: 'medium' }}\n\t\t\t\tstyle={{ overflow: 'auto' }}\n\t\t\t>\n\t\t\t\t{/* <AppearanceSettings>\n\t\t\t\t\t<ScalingSettingSection\n\t\t\t\t\t\tresetRef={scalingSettingSectionRef}\n\t\t\t\t\t\tscalingSettings={localStorageSettings}\n\t\t\t\t\t\taddLocalStoreChange={addLocalStoreChange}\n\t\t\t\t\t\tcleanLocalStoreChange={cleanLocalStoreChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<DarkThemeSettingSection\n\t\t\t\t\t\tresetRef={darkThemeSettingSectionRef}\n\t\t\t\t\t\taddMod={addMod}\n\t\t\t\t\t\tremoveMod={removeMod}\n\t\t\t\t\t/>\n\t\t\t\t</AppearanceSettings> */}\n\t\t\t\t<LanguageAndTimeZoneSettings\n\t\t\t\t\tsettings={userSettings}\n\t\t\t\t\taddMod={addMod}\n\t\t\t\t\topen={open}\n\t\t\t\t\tsetOpen={setOpen}\n\t\t\t\t\tresetRef={languageAndTimeZoneSettingsSectionRef}\n\t\t\t\t/>\n\n\t\t\t\t<OutOfOfficeSettings\n\t\t\t\t\tsettings={userSettings}\n\t\t\t\t\taddMod={addMod}\n\t\t\t\t\tresetRef={outOfOfficeSettingsSectionRef}\n\t\t\t\t/>\n\t\t\t\t<SearchSettings\n\t\t\t\t\tsettings={userSettings}\n\t\t\t\t\taddMod={addMod}\n\t\t\t\t\tresetRef={searchSettingsSectionRef}\n\t\t\t\t/>\n\t\t\t\t{/* <ModuleVersionSettings /> */}\n\t\t\t\t<UserQuota mobileView={false} />\n\n\t\t\t\t<Logout />\n\t\t\t</Container>\n\t\t</>\n\t);\n};\n\nexport default GeneralSettings;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { map } from 'lodash';\nimport { Redirect, Route, Switch } from 'react-router-dom';\n\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { SETTINGS_APP_ID } from '../constants';\nimport { useAppStore } from '../store/app';\n\nexport const SettingsAppView: FC = () => {\n\tconst settingsViews = useAppStore((s) => s.views.settings);\n\tconst routes = useMemo(\n\t\t() =>\n\t\t\tmap(settingsViews, (view) => (\n\t\t\t\t<Route key={view.route} exact path={`/${SETTINGS_APP_ID}/${view.route}`}>\n\t\t\t\t\t<AppContextProvider pkg={view.app}>\n\t\t\t\t\t\t<view.component />\n\t\t\t\t\t</AppContextProvider>\n\t\t\t\t</Route>\n\t\t\t)),\n\t\t[settingsViews]\n\t);\n\treturn (\n\t\t<Switch>\n\t\t\t{routes}\n\t\t\t<Redirect from={`/${SETTINGS_APP_ID}`} exact strict to={`/${SETTINGS_APP_ID}/general`} />\n\t\t</Switch>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { Accordion, IconButton, Tooltip } from '@zextras/carbonio-design-system';\nimport { map } from 'lodash';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport { SETTINGS_APP_ID } from '../constants';\nimport { useAppStore } from '../store/app';\n\nexport const SettingsSidebar: FC<{ expanded: boolean }> = ({ expanded }) => {\n\tconst settingsViews = useAppStore((s) => s.views.settings);\n\tconst history = useHistory();\n\tconst location = useLocation();\n\tconst items = useMemo(\n\t\t() =>\n\t\t\tsettingsViews.map((view) => ({\n\t\t\t\tid: view.route,\n\t\t\t\tlabel: view.label,\n\t\t\t\ticon: view.icon,\n\t\t\t\tactive: location.pathname === `/${SETTINGS_APP_ID}/${view.route}` && location.search === '',\n\t\t\t\tdisableHover:\n\t\t\t\t\tlocation.pathname === `/${SETTINGS_APP_ID}/${view.route}` && location.search === '',\n\t\t\t\tonClick: (e: KeyboardEvent | React.SyntheticEvent): void => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\thistory.push(`/${SETTINGS_APP_ID}/${view.route}`);\n\t\t\t\t},\n\t\t\t\titems: map(view.subSections, (item) => ({\n\t\t\t\t\t...item,\n\t\t\t\t\tactive: location.search === `?section=${item.id}`,\n\t\t\t\t\tdisableHover: location.search === `?section=${item.id}`,\n\t\t\t\t\tonClick: (e: KeyboardEvent | React.SyntheticEvent): void => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\thistory.replace(`/${SETTINGS_APP_ID}/${view.route}?section=${item.id}`);\n\t\t\t\t\t}\n\t\t\t\t}))\n\t\t\t})),\n\t\t[history, location.pathname, location.search, settingsViews]\n\t);\n\tconst collapsedItems = useMemo(\n\t\t() =>\n\t\t\tsettingsViews.map((v) => (\n\t\t\t\t<Tooltip label={v.label} placement=\"right\" key={v.id}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ticon={v.icon}\n\t\t\t\t\t\t\tonClick={(): void => history.push(`/${SETTINGS_APP_ID}/${v.route}`)}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Tooltip>\n\t\t\t)),\n\t\t[history, settingsViews]\n\t);\n\treturn expanded ? <Accordion background=\"transparent\" items={items} /> : <>{collapsedItems}</>;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { reduce } from 'lodash';\nimport { create } from 'zustand';\n\nimport type { AnyFunction } from '../utils/typeUtils';\n\nexport type PackageDependentFunction = (app: string) => AnyFunction;\n\nexport type ContextBridgeState = {\n\tpackageDependentFunctions: Record<string, PackageDependentFunction>;\n\tfunctions: Record<string, AnyFunction>;\n};\n\nexport type ContextBridgeActions = {\n\tadd: (content: Partial<ContextBridgeState>) => void;\n};\n\nconst initialState: ContextBridgeState = {\n\tpackageDependentFunctions: {},\n\tfunctions: {}\n};\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useContextBridge = create<ContextBridgeState & ContextBridgeActions>()((set) => ({\n\t...initialState,\n\tadd: ({ packageDependentFunctions, functions }): void => {\n\t\tset((s) => ({\n\t\t\tpackageDependentFunctions: reduce(\n\t\t\t\tpackageDependentFunctions ?? {},\n\t\t\t\t(acc, f, key) => {\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\tacc[key] = f;\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\ts.packageDependentFunctions\n\t\t\t),\n\t\t\tfunctions: reduce(\n\t\t\t\tfunctions ?? {},\n\t\t\t\t(acc, f, key) => {\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\tacc[key] = f;\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\ts.functions\n\t\t\t)\n\t\t}));\n\t}\n}));\n\nexport const useBridge = useContextBridge.getState().add;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useHistory } from 'react-router-dom';\n\nimport { useBridge } from '../store/context-bridge';\n\nexport const ContextBridge = (): null => {\n\tconst history = useHistory();\n\tuseBridge({\n\t\tfunctions: {\n\t\t\tgetHistory: () => history\n\t\t}\n\t});\n\treturn null;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { produce } from 'immer';\nimport { forEach, trimStart, uniqueId } from 'lodash';\nimport { create } from 'zustand';\n\nimport type { Board } from '../../types/boards';\nimport { getApp } from '../app';\n\nexport type BoardState = {\n\torderedBoards: Array<string>;\n\tboards: Record<string, Board>;\n\texpanded: boolean;\n\tminimized: boolean;\n\tcurrent?: string;\n};\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useBoardStore = create<BoardState>()(() => ({\n\torderedBoards: [],\n\tboards: {},\n\texpanded: false,\n\tminimized: false\n}));\n\nexport const addBoard =\n\t(app: string) =>\n\t<T = unknown>(\n\t\tboard: Omit<Board<T>, 'app' | 'icon' | 'id'> & { id?: string; icon?: string },\n\t\texpanded?: BoardState['expanded']\n\t): Board => {\n\t\tconst id = board.id ?? uniqueId('board-');\n\t\tuseBoardStore.setState(\n\t\t\tproduce((state: BoardState) => {\n\t\t\t\tstate.boards[id] = {\n\t\t\t\t\t...board,\n\t\t\t\t\tapp,\n\t\t\t\t\tid,\n\t\t\t\t\ticon: board.icon ?? getApp(app)()?.icon ?? 'CubeOutline',\n\t\t\t\t\turl: trimStart(board.url, '/')\n\t\t\t\t} as Board;\n\t\t\t\tstate.current = id;\n\t\t\t\tstate.minimized = false;\n\t\t\t\tstate.expanded = expanded ?? state.expanded;\n\t\t\t\tstate.orderedBoards.unshift(id);\n\t\t\t})\n\t\t);\n\t\treturn useBoardStore.getState().boards[id];\n\t};\nexport const closeBoard = (id: string): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tstate.boards[id]?.onClose?.(state.boards[id]);\n\t\t\tdelete state.boards[id];\n\t\t\tconst index = state.orderedBoards.findIndex((boardId) => boardId === id);\n\t\t\tif (state.current === id) {\n\t\t\t\tstate.current = state.orderedBoards[index + 1] || state.orderedBoards[index - 1];\n\t\t\t}\n\t\t\tif (index !== -1) {\n\t\t\t\tstate.orderedBoards.splice(index, 1);\n\t\t\t}\n\t\t})\n\t);\n};\nexport const closeAllBoards = (): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tforEach(state.boards, (b) => {\n\t\t\t\tb?.onClose?.(b);\n\t\t\t\tdelete state.boards[b.id];\n\t\t\t});\n\t\t\tstate.orderedBoards = [];\n\t\t})\n\t);\n};\nexport const onGoToPanel = (): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tconst id = state.current;\n\t\t\tif (id) {\n\t\t\t\tstate.boards[id]?.onGoToPanel?.(state.boards[id]);\n\t\t\t\tdelete state.boards[id];\n\t\t\t\tconst index = state.orderedBoards.findIndex((boardId) => boardId === id);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tstate.orderedBoards.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t);\n};\nexport const minimizeBoards = (): void => {\n\tuseBoardStore.setState({\n\t\tminimized: true\n\t});\n};\nexport const reopenBoards = (): void => {\n\tuseBoardStore.setState({\n\t\tminimized: false\n\t});\n};\nexport const expandBoards = (): void => {\n\tuseBoardStore.setState({\n\t\texpanded: true\n\t});\n};\nexport const reduceBoards = (): void => {\n\tuseBoardStore.setState({\n\t\texpanded: false\n\t});\n};\nexport const setCurrentBoard = (id: string): void => {\n\tuseBoardStore.setState({\n\t\tcurrent: id\n\t});\n};\nexport const updateBoard = <T = unknown>(id: string, board: Partial<Board<T>>): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tif (state.boards[id])\n\t\t\t\tstate.boards[id] = {\n\t\t\t\t\t...state.boards[id],\n\t\t\t\t\t...board\n\t\t\t\t} as Board;\n\t\t})\n\t);\n};\nexport const updateBoardContext = <T = unknown>(id: string, context: T): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tif (state.boards[id]) {\n\t\t\t\tstate.boards[id].context = context;\n\t\t\t}\n\t\t})\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { FC } from 'react';\nimport React, { createContext, useContext, useMemo } from 'react';\n\nimport { closeBoard, setCurrentBoard, updateBoard, useBoardStore } from './store';\nimport type { Board } from '../../types/boards';\n\nexport const useBoardById = <T,>(id: string): Board<T> | undefined =>\n\tuseBoardStore((s) => s.boards[id]) as Board<T> | undefined;\nexport const getBoardById = <T,>(id: string): Board<T> | undefined =>\n\tuseBoardStore.getState().boards[id] as Board<T> | undefined;\nexport const useBoardContextById = <T,>(id: string): T | undefined =>\n\tuseBoardStore((s) => s.boards[id]?.context) as T | undefined;\nexport const getBoardContextById = <T,>(id: string): T | undefined =>\n\tuseBoardStore.getState().boards[id]?.context as T | undefined;\n\n// Must be empty if no board is available\nexport const boardContext = createContext<Board | undefined>(undefined);\nexport type BoardHooksContext = {\n\tcloseBoard: () => void;\n\tupdateBoard: (b: Partial<Board>) => void;\n\tsetCurrentBoard: () => void;\n\tgetBoardContext: <T>() => T;\n\tgetBoard: <T>() => Board<T>;\n};\n\n// Must be empty if no board is available\nexport const boardHooksContext = createContext<BoardHooksContext | undefined>(undefined);\n\nexport const BoardProvider: FC<{ id: string }> = ({ children, id }) => {\n\tconst board = useBoardById(id);\n\tconst callbacks = useMemo<BoardHooksContext>(\n\t\t() => ({\n\t\t\t// at this point the id should be only one of the available boards,\n\t\t\t// that's way the cast without further checks\n\t\t\tgetBoardContext: <T,>() => getBoardContextById(id) as T,\n\t\t\tgetBoard: <T,>() => getBoardById(id) as Board<T>,\n\t\t\tcloseBoard: () => closeBoard(id),\n\t\t\tupdateBoard: (b) => updateBoard(id, b),\n\t\t\tsetCurrentBoard: () => setCurrentBoard(id)\n\t\t}),\n\t\t[id]\n\t);\n\treturn (\n\t\t<boardHooksContext.Provider value={callbacks}>\n\t\t\t<boardContext.Provider value={board}>{children}</boardContext.Provider>\n\t\t</boardHooksContext.Provider>\n\t);\n};\n\n/**\n * Allow quick access to all current board hooks.\n * This hook must be used from inside a board view.\n * Outside a board, it will throw an error.\n */\nexport const useBoardHooks = (): BoardHooksContext => {\n\tconst hooks = useContext(boardHooksContext);\n\tif (hooks === undefined) {\n\t\tthrow new Error(\n\t\t\t'board hooks is undefined. This hook is meant to be used only from inside boards. Check that the hook is invoked from a board'\n\t\t);\n\t}\n\treturn hooks;\n};\n\n/**\n * Retrieve the board object.\n * This hook must be used from inside a board view.\n * Outside a board, it will throw an error.\n */\nexport const useBoard = <TBoardContext,>(): Board<TBoardContext> => {\n\tconst board = useContext(boardContext);\n\tif (board === undefined) {\n\t\tthrow new Error(\n\t\t\t'board is undefined. This hook is meant to be used only from inside boards. Check that the hook is invoked from a board'\n\t\t);\n\t}\n\treturn board as Board<TBoardContext>;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { FC } from 'react';\nimport React, { useCallback, useMemo, useRef } from 'react';\n\nimport type { IAllProps as EditorProps } from '@tinymce/tinymce-react';\nimport { Editor } from '@tinymce/tinymce-react';\nimport { Container } from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\nimport type { EditorOptions, TinyMCE, Ui } from 'tinymce/tinymce';\n// TinyMCE so the global var exists\nimport tinymce from 'tinymce/tinymce';\nimport 'tinymce/models/dom';\n// Theme\nimport 'tinymce/themes/silver';\n// Toolbar icons\nimport 'tinymce/icons/default';\n// Editor styles\nimport 'tinymce/skins/ui/oxide/skin.min.css';\n// importing the plugin js.\nimport 'tinymce/plugins/advlist';\nimport 'tinymce/plugins/anchor';\nimport 'tinymce/plugins/autolink';\nimport 'tinymce/plugins/autoresize';\nimport 'tinymce/plugins/charmap';\nimport 'tinymce/plugins/code';\nimport 'tinymce/plugins/directionality';\nimport 'tinymce/plugins/fullscreen';\nimport 'tinymce/plugins/help';\nimport 'tinymce/plugins/image';\nimport 'tinymce/plugins/insertdatetime';\nimport 'tinymce/plugins/link';\nimport 'tinymce/plugins/lists';\nimport 'tinymce/plugins/media';\nimport 'tinymce/plugins/preview';\nimport 'tinymce/plugins/quickbars';\nimport 'tinymce/plugins/searchreplace';\nimport 'tinymce/plugins/table';\nimport 'tinymce/plugins/visualblocks';\nimport 'tinymce/plugins/wordcount';\n\nimport { SUPPORTED_LOCALES } from '../../constants/locales';\nimport { useUserSettings } from '../account';\nimport { getT } from '../i18n/hooks';\nimport { useI18nStore } from '../i18n/store';\n\ntype ComposerProps = EditorProps & {\n\t/** The callback invoked when an edit is performed into the editor. `([text, html]) => {}` */\n\tonEditorChange?: (values: [string, string]) => void;\n\t/** Enable the distraction-free mode */\n\tinline?: boolean;\n\t/** The initial content of the editor */\n\tinitialValue?: EditorProps['initialValue'];\n\t/** The content of the editor (controlled mode) */\n\tvalue?: EditorProps['value'];\n\t/**\n\t * Callback called when user choose some file from the os.\n\t * If defined, a menu item to add inline images is added to the composer.\n\t */\n\tonFileSelect?: (arg: { editor: TinyMCE; files: HTMLInputElement['files'] | undefined }) => void;\n\tcustomInitOptions?: Partial<EditorProps['init']>;\n};\n\nexport const FileInput = styled.input`\n\tdisplay: none;\n`;\n\nconst Composer: FC<ComposerProps> = ({\n\tonEditorChange,\n\tonFileSelect,\n\tinline = false,\n\tvalue,\n\tinitialValue,\n\tcustomInitOptions,\n\t...rest\n}) => {\n\tconst _onEditorChange = useCallback<NonNullable<EditorProps['onEditorChange']>>(\n\t\t(newContent, editor) => {\n\t\t\tonEditorChange?.([\n\t\t\t\teditor.getContent({ format: 'text' }),\n\t\t\t\teditor.getContent({ format: 'html' })\n\t\t\t]);\n\t\t},\n\t\t[onEditorChange]\n\t);\n\tconst { prefs } = useUserSettings();\n\tconst defaultStyle = useMemo(\n\t\t() => ({\n\t\t\tfont: prefs?.zimbraPrefHtmlEditorDefaultFontFamily,\n\t\t\tfontSize: prefs?.zimbraPrefHtmlEditorDefaultFontSize,\n\t\t\tcolor: prefs?.zimbraPrefHtmlEditorDefaultFontColor\n\t\t}),\n\t\t[prefs]\n\t);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst onFileClick = useCallback(() => {\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.value = '';\n\t\t\tinputRef.current.click();\n\t\t}\n\t}, []);\n\tconst t = getT();\n\tconst { locale } = useI18nStore.getState();\n\tconst language = useMemo(() => {\n\t\tconst localeObj =\n\t\t\tlocale in SUPPORTED_LOCALES && SUPPORTED_LOCALES[locale as keyof typeof SUPPORTED_LOCALES];\n\t\treturn (\n\t\t\t(localeObj &&\n\t\t\t\t(('tinymceLocale' in localeObj && localeObj?.tinymceLocale) || localeObj?.value)) ||\n\t\t\tlocale\n\t\t);\n\t}, [locale]);\n\tconst inlineLabel = useMemo(() => t('label.add_inline_image', 'Add inline image'), [t]);\n\n\tconst setupCallback = useCallback<NonNullable<EditorOptions['setup']>>(\n\t\t(editor) => {\n\t\t\tif (onFileSelect)\n\t\t\t\teditor.ui.registry.addMenuButton('imageSelector', {\n\t\t\t\t\ticon: 'gallery',\n\t\t\t\t\ttooltip: t('label.select_image', 'Select image'),\n\t\t\t\t\tfetch: (callback) => {\n\t\t\t\t\t\tconst items: Ui.Menu.MenuItemSpec[] = [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'menuitem',\n\t\t\t\t\t\t\t\ttext: inlineLabel,\n\t\t\t\t\t\t\t\tonAction: (): void => {\n\t\t\t\t\t\t\t\t\tonFileClick();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t];\n\t\t\t\t\t\tcallback(items);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\t[inlineLabel, onFileClick, onFileSelect, t]\n\t);\n\n\tconst editorInitConfig = useMemo<EditorProps['init']>(\n\t\t() => ({\n\t\t\tcontent_css: `${BASE_PATH}/tinymce/skins/content/default/content.css`,\n\t\t\tlanguage_url: `${BASE_PATH}tinymce/langs/${language}.js`,\n\t\t\tlanguage,\n\t\t\tsetup: setupCallback,\n\t\t\tmin_height: 350,\n\t\t\tauto_focus: true,\n\t\t\tmenubar: false,\n\t\t\tstatusbar: false,\n\t\t\tbranding: false,\n\t\t\tresize: true,\n\t\t\tinline,\n\t\t\tfont_size_formats:\n\t\t\t\t'8pt 9pt 10pt 11pt 12pt 13pt 14pt 16pt 18pt 24pt 30pt 36pt 48pt 60pt 72pt 96pt',\n\t\t\tobject_resizing: 'img',\n\t\t\tstyle_formats: [\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Headers',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{ title: 'h1', block: 'h1' },\n\t\t\t\t\t\t{ title: 'h2', block: 'h2' },\n\t\t\t\t\t\t{ title: 'h3', block: 'h3' },\n\t\t\t\t\t\t{ title: 'h4', block: 'h4' },\n\t\t\t\t\t\t{ title: 'h5', block: 'h5' },\n\t\t\t\t\t\t{ title: 'h6', block: 'h6' }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Blocks',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{ title: 'p', block: 'p' },\n\t\t\t\t\t\t{ title: 'div', block: 'div' },\n\t\t\t\t\t\t{ title: 'pre', block: 'pre' }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Containers',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{ title: 'section', block: 'section', wrapper: true, merge_siblings: false },\n\t\t\t\t\t\t{ title: 'article', block: 'article', wrapper: true, merge_siblings: false },\n\t\t\t\t\t\t{ title: 'blockquote', block: 'blockquote', wrapper: true },\n\t\t\t\t\t\t{ title: 'hgroup', block: 'hgroup', wrapper: true },\n\t\t\t\t\t\t{ title: 'aside', block: 'aside', wrapper: true },\n\t\t\t\t\t\t{ title: 'figure', block: 'figure', wrapper: true }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\tplugins: [\n\t\t\t\t'advlist',\n\t\t\t\t'autolink',\n\t\t\t\t'lists',\n\t\t\t\t'link',\n\t\t\t\t'image',\n\t\t\t\t'charmap',\n\t\t\t\t'preview',\n\t\t\t\t'anchor',\n\t\t\t\t'searchreplace',\n\t\t\t\t'code',\n\t\t\t\t'fullscreen',\n\t\t\t\t'insertdatetime',\n\t\t\t\t'media',\n\t\t\t\t'table',\n\t\t\t\t'code',\n\t\t\t\t'help',\n\t\t\t\t'quickbars',\n\t\t\t\t'directionality',\n\t\t\t\t'autoresize',\n\t\t\t\t'visualblocks'\n\t\t\t],\n\t\t\ttoolbar: inline\n\t\t\t\t? false\n\t\t\t\t: [\n\t\t\t\t\t\t'fontfamily fontsize styles visualblocks',\n\t\t\t\t\t\t'bold italic underline strikethrough',\n\t\t\t\t\t\t'removeformat code',\n\t\t\t\t\t\t'alignleft aligncenter alignright alignjustify',\n\t\t\t\t\t\t'forecolor backcolor',\n\t\t\t\t\t\t'bullist numlist outdent indent',\n\t\t\t\t\t\t'ltr rtl',\n\t\t\t\t\t\t'link',\n\t\t\t\t\t\t'insertfile image',\n\t\t\t\t\t\t'imageSelector'\n\t\t\t\t\t].join(' | '),\n\t\t\tquickbars_insert_toolbar: inline ? 'bullist numlist' : '',\n\t\t\tquickbars_selection_toolbar: inline\n\t\t\t\t? 'bold italic underline | forecolor backcolor | removeformat | link'\n\t\t\t\t: 'link',\n\t\t\tcontextmenu: '',\n\t\t\ttoolbar_mode: 'wrap',\n\t\t\tcontent_style: `body  {  color: ${defaultStyle?.color}; font-size: ${defaultStyle?.fontSize}; font-family: ${defaultStyle?.font}; }`,\n\t\t\tvisualblocks_default_state: false,\n\t\t\tend_container_on_empty_block: true,\n\t\t\trelative_urls: false,\n\t\t\tremove_script_host: false,\n\t\t\tnewline_behavior: 'default',\n\t\t\tbrowser_spellcheck: true,\n\t\t\tconvert_unsafe_embeds: true,\n\t\t\t...customInitOptions\n\t\t}),\n\t\t[\n\t\t\tlanguage,\n\t\t\tsetupCallback,\n\t\t\tinline,\n\t\t\tdefaultStyle?.color,\n\t\t\tdefaultStyle?.fontSize,\n\t\t\tdefaultStyle?.font,\n\t\t\tcustomInitOptions\n\t\t]\n\t);\n\n\tconst fileInputOnChange = useCallback((): void => {\n\t\tonFileSelect?.({ editor: tinymce, files: inputRef?.current?.files });\n\t}, [onFileSelect]);\n\n\treturn (\n\t\t<Container\n\t\t\theight=\"100%\"\n\t\t\tcrossAlignment=\"baseline\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tstyle={{ overflowY: 'hidden' }}\n\t\t>\n\t\t\t<FileInput\n\t\t\t\ttype=\"file\"\n\t\t\t\tref={inputRef}\n\t\t\t\taccept=\"image/*\"\n\t\t\t\tonChange={fileInputOnChange}\n\t\t\t\tmultiple\n\t\t\t/>\n\n\t\t\t<Editor\n\t\t\t\tinitialValue={initialValue}\n\t\t\t\tvalue={value}\n\t\t\t\tinit={editorInitConfig}\n\t\t\t\tonEditorChange={_onEditorChange}\n\t\t\t\t{...rest}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n\nexport default Composer;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { ComponentType } from 'react';\n\nimport { produce } from 'immer';\nimport { forEach, includes, omit } from 'lodash';\nimport { create } from 'zustand';\n\nimport Composer from './composer';\nimport { SHELL_APP_ID } from '../../constants';\nimport type { ActionFactory } from '../../types/integrations';\nimport type { AnyFunction } from '../../utils/typeUtils';\n\ntype Action<TTarget = unknown> = ActionFactory<TTarget>;\ntype Component<TProps extends Record<string, unknown> = Record<string, unknown>> =\n\tComponentType<TProps>;\n\nexport type IntegrationsState = {\n\tactions: { [type: string]: { [id: string]: Action } };\n\tcomponents: { [id: string]: { app: string; Item: Component } };\n\tfunctions: { [id: string]: AnyFunction };\n};\n\nexport type IntegrationActions = {\n\tremoveActions: (...ids: Array<string>) => void;\n\tregisterActions: (...items: Array<{ id: string; action: Action; type: string }>) => void;\n\tremoveComponents: (...ids: Array<string>) => void;\n\tregisterComponents: (\n\t\tapp: string\n\t) => <TProps extends Record<string, unknown>>(\n\t\t...items: Array<{ id: string; component: Component<TProps> }>\n\t) => void;\n\tremoveFunctions: (...ids: Array<string>) => void;\n\tregisterFunctions: (...items: Array<{ id: string; fn: AnyFunction }>) => void;\n};\n\nconst initialState: IntegrationsState = {\n\tactions: {},\n\tcomponents: {\n\t\tcomposer: {\n\t\t\tItem: Composer,\n\t\t\tapp: SHELL_APP_ID\n\t\t}\n\t},\n\tfunctions: {}\n};\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useIntegrationsStore = create<IntegrationsState & IntegrationActions>()((set) => ({\n\t...initialState,\n\tregisterActions: (...items): void =>\n\t\tset(\n\t\t\tproduce<IntegrationsState>((state) => {\n\t\t\t\tforEach(items, ({ id, action, type }) => {\n\t\t\t\t\tif (!state.actions[type]) state.actions[type] = {};\n\t\t\t\t\tstate.actions[type][id] = action;\n\t\t\t\t});\n\t\t\t})\n\t\t),\n\tregisterComponents:\n\t\t(app) =>\n\t\t(...items): void =>\n\t\t\tset(\n\t\t\t\tproduce<IntegrationsState>((state) => {\n\t\t\t\t\tforEach(items, ({ id, component }) => {\n\t\t\t\t\t\tstate.components[id] = { app, Item: component as Component };\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t),\n\tregisterFunctions: (...items): void =>\n\t\tset(\n\t\t\tproduce<IntegrationsState>((state) => {\n\t\t\t\tforEach(items, ({ id, fn }) => {\n\t\t\t\t\tstate.functions[id] = fn;\n\t\t\t\t});\n\t\t\t})\n\t\t),\n\tremoveActions: (...ids): void =>\n\t\tset(\n\t\t\tproduce<IntegrationsState>((state) => {\n\t\t\t\tforEach(state.actions, (actionTypeMap, type) => {\n\t\t\t\t\tforEach(actionTypeMap, (actionFactory, actionFactoryId) => {\n\t\t\t\t\t\tif (includes(ids, actionFactoryId)) {\n\t\t\t\t\t\t\tdelete state.actions[type][actionFactoryId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t),\n\tremoveComponents: (...ids): void =>\n\t\tset((s) => ({\n\t\t\t...s,\n\t\t\tcomponents: omit(s.components, ids)\n\t\t})),\n\tremoveFunctions: (...ids): void =>\n\t\tset((s) => ({\n\t\t\t...s,\n\t\t\tfunctions: omit(s.functions, ids)\n\t\t}))\n}));\n","/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React from 'react';\n\nimport { compact, map } from 'lodash';\n\nimport type { IntegrationsState } from './store';\nimport AppContextProvider from '../../boot/app/app-context-provider';\nimport type { Action } from '../../types/integrations';\nimport type { AnyFunction } from '../../utils/typeUtils';\n\nexport function buildIntegrationComponent(\n\tintegration: IntegrationsState['components'][string]\n): [React.FunctionComponent<Record<string, unknown>>, boolean] {\n\tif (integration) {\n\t\tconst IntegrationComponent = (props: Record<string, unknown>): React.JSX.Element => (\n\t\t\t<AppContextProvider pkg={integration.app}>\n\t\t\t\t<integration.Item {...props} />\n\t\t\t</AppContextProvider>\n\t\t);\n\t\treturn [IntegrationComponent, true];\n\t}\n\treturn [(): null => null, false];\n}\n\nexport function buildIntegrationFunction(\n\tintegration: IntegrationsState['functions'][string]\n): [AnyFunction, boolean] {\n\treturn integration ? [integration, true] : [(): void => undefined, false];\n}\n\nexport function buildIntegrationActions(\n\tintegration: IntegrationsState['actions'][string],\n\ttarget: unknown\n): Array<Action> {\n\treturn compact(\n\t\tmap(integration, (f) => {\n\t\t\ttry {\n\t\t\t\treturn f(target);\n\t\t\t} catch (e) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t})\n\t);\n}\n\nexport function buildIntegrationAction(\n\tintegration: IntegrationsState['actions'][string][string],\n\ttarget: unknown\n): [Action | undefined, boolean] {\n\ttry {\n\t\treturn [integration?.(target), true];\n\t} catch (e) {\n\t\treturn [undefined, false];\n\t}\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type React from 'react';\nimport { useMemo, useCallback } from 'react';\n\nimport { useIntegrationsStore } from './store';\nimport {\n\tbuildIntegrationAction,\n\tbuildIntegrationActions,\n\tbuildIntegrationComponent,\n\tbuildIntegrationFunction\n} from './utils';\nimport type { Action, ActionFactory } from '../../types/integrations';\nimport type { AnyFunction } from '../../utils/typeUtils';\n\nexport const useIntegratedFunction = (id: string): [AnyFunction, boolean] => {\n\tconst integration = useIntegrationsStore((s) => s.functions?.[id]);\n\treturn buildIntegrationFunction(integration);\n};\n\nexport const useIntegratedComponent = (\n\tid: string\n): [React.FunctionComponent<Record<string, unknown>>, boolean] => {\n\tconst integration = useIntegrationsStore((s) => s.components?.[id]);\n\treturn useMemo(() => buildIntegrationComponent(integration), [integration]);\n};\n\nexport const useActions = <T,>(target: T, type: string): Array<Action> => {\n\tconst factories = useIntegrationsStore((s) => s.actions[type]);\n\treturn useMemo(() => buildIntegrationActions(factories, target), [factories, target]);\n};\n\nexport const useActionsFactory = (type: string): (<T>(target: T) => Array<Action>) => {\n\tconst factories = useIntegrationsStore((s) => s.actions[type]);\n\treturn useCallback((target) => buildIntegrationActions(factories, target), [factories]);\n};\n\nexport const useAction = <T,>(\n\ttype: string,\n\tid: string,\n\ttarget?: T\n): [Action | undefined, boolean] => {\n\tconst factory = useIntegrationsStore((s) => s.actions[type][id]);\n\treturn useMemo(() => buildIntegrationAction(factory, target), [factory, target]);\n};\n\nexport const useActionFactory = <T,>(\n\ttype: string,\n\tid: string\n): [ActionFactory<T> | undefined, boolean] => {\n\tconst factory = useIntegrationsStore((s) => s.actions[type][id]);\n\treturn [factory, !!factory];\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type React from 'react';\n\nimport { useIntegrationsStore } from './store';\nimport {\n\tbuildIntegrationAction,\n\tbuildIntegrationActions,\n\tbuildIntegrationComponent\n} from './utils';\nimport type { Action, ActionFactory } from '../../types/integrations';\nimport type { AnyFunction } from '../../utils/typeUtils';\n\nexport const getIntegratedFunction = (id: string): [AnyFunction, boolean] => {\n\tconst integration = useIntegrationsStore.getState().functions?.[id];\n\treturn integration ? [integration, true] : [(): void => undefined, false];\n};\n\nexport const getIntegratedComponent = (\n\tid: string\n): [React.FunctionComponent<Record<string, unknown>>, boolean] => {\n\tconst integration = useIntegrationsStore.getState().components?.[id];\n\treturn buildIntegrationComponent(integration);\n};\n\nexport const getActions = <T,>(target: T, type: string): Array<Action> => {\n\tconst factories = useIntegrationsStore.getState().actions[type];\n\treturn buildIntegrationActions(factories, target);\n};\n\nexport const getActionsFactory = (type: string): (<T>(target: T) => Array<Action>) => {\n\tconst factories = useIntegrationsStore.getState().actions[type];\n\treturn <T,>(target: T): Array<Action> => buildIntegrationActions(factories, target);\n};\n\nexport const getAction = <T,>(\n\ttype: string,\n\tid: string,\n\ttarget?: T\n): [Action | undefined, boolean] => {\n\tconst factory = useIntegrationsStore.getState().actions[type]?.[id];\n\treturn buildIntegrationAction(factory, target);\n};\n\nexport const getActionFactory = <T,>(\n\ttype: string,\n\tid: string\n): [ActionFactory<T> | undefined, boolean] => {\n\tconst factory = useIntegrationsStore.getState().actions[type]?.[id];\n\treturn [factory, !!factory];\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { getSoapFetch } from './fetch';\nimport { JSNS, SHELL_APP_ID } from '../constants';\nimport type { SoapBody } from '../types/network';\nimport type { Tag } from '../types/tags';\n\nexport type CreateTagRequest = SoapBody<{\n\ttag: Omit<Tag, 'id'>;\n}>;\nexport type CreateTagResponse = {\n\ttag: [Tag];\n};\nexport type TagActionRequest = SoapBody<{\n\taction: {\n\t\top: 'rename' | 'color' | 'delete' | 'update';\n\t\tid: string;\n\t\tname?: string;\n\t\tcolor?: number;\n\t\trgb?: string;\n\t};\n}>;\nexport type TagActionResponse = SoapBody<{\n\taction: { op: string; id: string };\n}>;\n\nexport const createTag = (tag: Omit<Tag, 'id'>): Promise<CreateTagResponse> =>\n\tgetSoapFetch(SHELL_APP_ID)<CreateTagRequest, CreateTagResponse>('CreateTag', {\n\t\t_jsns: JSNS.mail,\n\t\ttag\n\t});\nexport const deleteTag = (id: string): Promise<TagActionResponse> =>\n\tgetSoapFetch(SHELL_APP_ID)<TagActionRequest, TagActionResponse>('TagAction', {\n\t\t_jsns: JSNS.mail,\n\t\taction: { op: 'delete', id }\n\t});\n\nexport const renameTag = (id: string, name: string): Promise<TagActionResponse> =>\n\tgetSoapFetch(SHELL_APP_ID)<TagActionRequest, TagActionResponse>('TagAction', {\n\t\t_jsns: JSNS.mail,\n\t\taction: { op: 'rename', id, name }\n\t});\n\nexport const changeTagColor = (id: string, color: string | number): Promise<TagActionResponse> =>\n\tgetSoapFetch(SHELL_APP_ID)<TagActionRequest, TagActionResponse>('TagAction', {\n\t\t_jsns: JSNS.mail,\n\t\taction: typeof color === 'number' ? { op: 'color', color, id } : { op: 'color', rgb: color, id }\n\t});\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useMemo, useCallback } from 'react';\n\nimport type { To } from 'history';\nimport { find, startsWith, replace, trim } from 'lodash';\nimport { useLocation, useHistory } from 'react-router-dom';\n\nimport { useRoutes, getRoutes } from '../store/app';\nimport { useContextBridge } from '../store/context-bridge';\nimport type { AppRoute } from '../types/apps';\nimport type { HistoryParams } from '../types/misc';\n\nexport const useCurrentRoute = (): AppRoute | undefined => {\n\tconst location = useLocation();\n\tconst routes = useRoutes();\n\treturn useMemo(\n\t\t() => find(routes, ({ route }) => startsWith(trim(location.pathname, '/'), route)),\n\t\t[location.pathname, routes]\n\t);\n};\nexport const getCurrentRoute = (): AppRoute | undefined => {\n\tconst history = useContextBridge.getState().functions.getHistory?.();\n\tconst routes = getRoutes();\n\treturn find(routes, (r) => startsWith(trim(history.location.pathname, '/'), r.route));\n};\n\nexport const parseParams = (params: HistoryParams): To => {\n\tif (typeof params === 'string') {\n\t\treturn replace(`/${getCurrentRoute()?.route}/${params}`, '//', '/');\n\t}\n\tconst routeToApply = params.route\n\t\t? find(getRoutes(), (r) => r.id === params.route || r.route === params.route)\n\t\t: getCurrentRoute();\n\treturn typeof params.path === 'string'\n\t\t? replace(`/${routeToApply?.route}/${params.path}`, '//', '/')\n\t\t: {\n\t\t\t\tsearch: params.path.search,\n\t\t\t\thash: params.path.hash,\n\t\t\t\tpathname: replace(`/${routeToApply?.route}/${params.path.pathname}`, '//', '/')\n\t\t\t};\n};\n\nexport const usePushHistoryCallback = (): ((params: HistoryParams) => void) => {\n\tconst history = useHistory();\n\treturn useCallback((params: HistoryParams): void => history.push(parseParams(params)), [history]);\n};\n\nexport const useReplaceHistoryCallback = (): ((params: HistoryParams) => void) => {\n\tconst history = useHistory();\n\treturn useCallback(\n\t\t(params: HistoryParams): void => history.replace(parseParams(params)),\n\t\t[history]\n\t);\n};\n\nexport function useGoBackHistoryCallback(): () => void {\n\tconst history = useHistory();\n\treturn history.goBack;\n}\n\nexport const pushHistory = (params: HistoryParams): void => {\n\tconst history = useContextBridge.getState().functions.getHistory?.();\n\thistory.push(parseParams(params));\n};\n\nexport const replaceHistory = (params: HistoryParams): void => {\n\tconst history = useContextBridge.getState().functions.getHistory?.();\n\thistory.replace(parseParams(params));\n};\n\nexport const goBackHistory = (): void =>\n\tuseContextBridge.getState().functions.getHistory?.().goBack();\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useLoginConfigStore } from './store';\n\nexport function getFavicon(): string {\n\treturn useLoginConfigStore.getState().carbonioWebUiFavicon;\n}\n\nexport function getClientTitle(): string {\n\treturn useLoginConfigStore.getState().carbonioWebUiTitle;\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { debounce, noop } from 'lodash';\n\nimport defaultAudio from '../../assets/notification.mp3';\nimport { getFavicon } from '../store/login/getters';\n\nexport type PopupNotificationConfig = {\n\ttitle?: string;\n\tmessage?: string;\n\ticon?: string;\n\tvibrate?: Array<number>;\n\ttag?: string;\n\tonClick?: (event: Event) => void;\n};\n\nexport type AudioNotificationConfig = {\n\tsound?: string;\n};\n\nexport type NotificationConfig = {\n\tshowPopup?: boolean;\n\tplaySound?: boolean;\n} & PopupNotificationConfig &\n\tAudioNotificationConfig;\n\nexport interface INotificationManager {\n\tplaySound: (config: AudioNotificationConfig) => void;\n\tshowPopup: (config: PopupNotificationConfig) => void;\n\tnotify: (config: NotificationConfig) => void;\n\tmultipleNotify: (config: NotificationConfig[]) => void;\n}\n\n/**\n * The main goals of the NotificationManager are:\n * - to provide a single and rich implementation for all the Carbonio modules,\n *   reducing the boilerplate code needed to send a notification to the user\n * - to optimize the audio notifications avoiding to spam the same sound file\n *   in a short period of time\n * - to act as a collector for all the notification (for possible future\n *   implementations)\n *\n * In order to reduce the effort needed to send a notification the class\n * provided a set of default values/assets (e.g. icon, sound, title, ...)\n *\n * The class is provided as a singleton\n */\nclass NotificationManager implements INotificationManager {\n\tprivate static instance: NotificationManager;\n\n\t/**\n\t * Minimum time (ms) to wait before the same audio file will be played\n\t * @private\n\t */\n\tprivate static DEBOUNCE_TIME = 1000;\n\n\t/**\n\t * Default configuration for the popup-only notification\n\t * @private\n\t */\n\tprivate PopupNotificationDefaultConfig = {\n\t\ttitle: '',\n\t\tvibrate: [200, 100, 200],\n\t\ticon: getFavicon()\n\t};\n\n\t/**\n\t * Default configuration for the audio-only notification\n\t * @private\n\t */\n\tprivate AudioNotificationDefaultConfig: AudioNotificationConfig = {\n\t\tsound: defaultAudio\n\t};\n\n\t/**\n\t * Default configuration for a notification with both popup and audio\n\t * @private\n\t */\n\tprivate NotificationDefaultConfig: NotificationConfig = {\n\t\t...this.PopupNotificationDefaultConfig,\n\t\t...this.AudioNotificationDefaultConfig,\n\t\tshowPopup: true,\n\t\tplaySound: false\n\t};\n\n\t/**\n\t * Map of functions to play a specific audio file\n\t * @private\n\t */\n\tprivate functions = new Map<string, () => void>();\n\n\t/**\n\t * Gets or creates the (debounced) function to play the audio file\n\t * @param sound - relative path to the audio file to play\n\t */\n\tprivate getAudioFileFunction = (sound: string): (() => void) => {\n\t\tif (!this.functions.has(sound)) {\n\t\t\tthis.functions.set(\n\t\t\t\tsound,\n\t\t\t\tdebounce(() => {\n\t\t\t\t\tnew Audio(sound).play().then();\n\t\t\t\t\tthis.functions.delete(sound);\n\t\t\t\t}, NotificationManager.DEBOUNCE_TIME)\n\t\t\t);\n\t\t}\n\t\tconst result = this.functions.get(sound);\n\t\treturn result ?? noop;\n\t};\n\n\t/**\n\t * Executes the debounced function to play the audio file\n\t * @param config - Configuration for the audio notification. In case of\n\t * missing properties default values are used\n\t */\n\tpublic playSound = (config: AudioNotificationConfig): void => {\n\t\tconst defConfig = {\n\t\t\t...this.AudioNotificationDefaultConfig,\n\t\t\t...config\n\t\t};\n\t\tif (!defConfig.sound) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getAudioFileFunction(defConfig.sound)();\n\t};\n\n\t/**\n\t * Shows a popup notification\n\t * @param config - Configuration for the popup notification. In case of\n\t * missing properties default values are used\n\t */\n\tpublic showPopup = (config: PopupNotificationConfig): void => {\n\t\tconst defConfig = {\n\t\t\t...this.PopupNotificationDefaultConfig,\n\t\t\t...config\n\t\t};\n\n\t\tconst n = new Notification(defConfig.title, {\n\t\t\tbody: defConfig.message,\n\t\t\tvibrate: defConfig.vibrate,\n\t\t\ticon: defConfig.icon,\n\t\t\ttag: defConfig?.tag\n\t\t});\n\n\t\tif (defConfig.onClick) {\n\t\t\tn.addEventListener('click', defConfig.onClick);\n\t\t}\n\t};\n\n\t/**\n\t * Sends a popup/audio notification to the user\n\t * @param config - Configuration for the notification. In case of\n\t * missing properties default values are used\n\t */\n\tpublic notify = (config: NotificationConfig): void => {\n\t\tconst defConfig = {\n\t\t\t...this.NotificationDefaultConfig,\n\t\t\t...config\n\t\t};\n\n\t\tif (defConfig?.showPopup) {\n\t\t\tthis.showPopup(defConfig);\n\t\t}\n\n\t\tif (defConfig?.playSound) {\n\t\t\tthis.playSound(defConfig);\n\t\t}\n\t};\n\n\t/**\n\t * Sends multiple notifications\n\t * @param config - Array of configurations for the notifications. In case of\n\t * missing properties default values are used\n\t */\n\tpublic multipleNotify = (config: NotificationConfig[]): void => {\n\t\tconfig.forEach((conf) => this.notify(conf));\n\t};\n\n\t/**\n\t * Return the singleton instance\n\t */\n\tpublic static getInstance(): NotificationManager {\n\t\tif (!NotificationManager.instance) {\n\t\t\tNotificationManager.instance = new NotificationManager();\n\t\t}\n\n\t\treturn NotificationManager.instance;\n\t}\n}\n\nexport const getNotificationManager = (): INotificationManager => NotificationManager.getInstance();\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useSearchStore } from './search-store';\nimport { SEARCH_APP_ID } from '../constants';\nimport { pushHistory } from '../history/hooks';\nimport type { QueryChip } from '../types/search';\n\nexport const runSearch = (query: Array<QueryChip>, module: string): void => {\n\tuseSearchStore.setState({ query, module, searchDisabled: false });\n\tpushHistory({ route: SEARCH_APP_ID, path: '' });\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { createContext } from 'react';\n\nconst ShellContext = createContext({ isMobile: true });\n\nexport default ShellContext;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useContext } from 'react';\n\nimport ShellContext from '../shell-context';\n\n/**\n * @deprecated Use useScreenMode hook\n */\nexport function useIsMobile(): boolean {\n\tconst { isMobile } = useContext(ShellContext);\n\treturn isMobile;\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { reduce } from 'lodash';\n\nimport { getSoapFetch, getXmlSoapFetch } from '../../network/fetch';\nimport { getApp, getAppContext, getAppHook, getAppContextHook } from '../../store/app';\nimport { addBoard } from '../../store/boards';\nimport type { ContextBridgeState } from '../../store/context-bridge';\nimport { useContextBridge } from '../../store/context-bridge';\nimport { getI18n, getTFunction } from '../../store/i18n/hooks';\nimport type { CarbonioModule } from '../../types/apps';\n\nexport type AppDependantFunctions = {\n\tgetI18n: ReturnType<typeof getI18n>;\n\tt: ReturnType<typeof getTFunction>;\n\tsoapFetch: ReturnType<typeof getSoapFetch>;\n\txmlSoapFetch: ReturnType<typeof getXmlSoapFetch>;\n\tuseAppContext: ReturnType<typeof getAppContextHook>;\n\tgetAppContext: ReturnType<typeof getAppContext>;\n\tuseApp: ReturnType<typeof getAppHook>;\n\tgetApp: ReturnType<typeof getApp>;\n\n\taddBoard: ReturnType<typeof addBoard>;\n\t/**\n\t * @deprecated Use hooks to access to functions which require context\n\t */\n\tgetBridgedFunctions: () => ContextBridgeState['functions'] & {\n\t\t[K in keyof ContextBridgeState['packageDependentFunctions']]: ReturnType<\n\t\t\tContextBridgeState['packageDependentFunctions'][K]\n\t\t>;\n\t};\n};\n\nexport const getAppDependantFunctions = (pkg: CarbonioModule): AppDependantFunctions => ({\n\tgetI18n: getI18n(pkg.name),\n\tt: getTFunction(pkg.name),\n\tsoapFetch: getSoapFetch(pkg.name),\n\txmlSoapFetch: getXmlSoapFetch(pkg.name),\n\tuseAppContext: getAppContextHook(pkg.name),\n\tgetAppContext: getAppContext(pkg.name),\n\tuseApp: getAppHook(pkg.name),\n\tgetApp: getApp(pkg.name),\n\taddBoard: addBoard(pkg.name),\n\tgetBridgedFunctions: (): ReturnType<AppDependantFunctions['getBridgedFunctions']> => {\n\t\tconst { packageDependentFunctions, functions } = useContextBridge.getState();\n\t\treturn {\n\t\t\t...functions,\n\t\t\t...reduce(packageDependentFunctions, (acc, f, name) => ({ ...acc, [name]: f(pkg.name) }), {})\n\t\t};\n\t}\n});\n\nexport {\n\tuseAction,\n\tuseActions,\n\tuseActionsFactory,\n\tuseActionFactory,\n\tuseIntegratedComponent,\n\tuseIntegratedFunction\n} from '../../store/integrations/hooks';\n\nexport {\n\tgetAction,\n\tgetActions,\n\tgetActionsFactory,\n\tgetActionFactory,\n\tgetIntegratedComponent,\n\tgetIntegratedFunction\n} from '../../store/integrations/getters';\n\nexport {\n\tgetUserAccount,\n\tgetUserAccounts,\n\tgetUserSetting,\n\tgetUserSettings,\n\tuseUserAccount,\n\tuseUserAccounts,\n\tuseUserSetting,\n\tuseUserSettings,\n\tuseUserRight,\n\tuseUserRights,\n\tgetUserRight,\n\tgetUserRights,\n\tuseAuthenticated\n} from '../../store/account';\n\nexport { getTags, useTags } from '../../store/tags';\nexport { changeTagColor, createTag, deleteTag, renameTag } from '../../network/tags';\n\nexport { useNotify, useRefresh } from '../../store/network';\n\nexport {\n\tgetFolder,\n\tgetFolders,\n\tuseFolder,\n\tuseFolders,\n\tuseRoot,\n\tgetRoot,\n\tuseRoots,\n\tgetRoots,\n\tuseSearchFolder,\n\tuseSearchFolders,\n\tgetSearchFolder,\n\tgetSearchFolders,\n\tuseFoldersByView,\n\tuseFoldersAccordionByView,\n\tuseRootByUser,\n\tgetRootByUser\n} from '../../store/folder';\n\nexport {\n\tcloseBoard,\n\tupdateBoard,\n\tupdateBoardContext,\n\tgetBoardById,\n\tgetBoardContextById,\n\tuseBoardContextById,\n\tuseBoardById,\n\tuseBoard,\n\tminimizeBoards,\n\treopenBoards,\n\tsetCurrentBoard,\n\tuseBoardHooks\n} from '../../store/boards';\n\nexport {\n\tusePushHistoryCallback,\n\tuseGoBackHistoryCallback,\n\tuseReplaceHistoryCallback,\n\tgetCurrentRoute,\n\tuseCurrentRoute,\n\treplaceHistory,\n\tgoBackHistory,\n\tpushHistory\n} from '../../history/hooks';\n\nexport { getNotificationManager } from '../../notification/NotificationManager';\n\nexport { runSearch } from '../../search/run-search';\n\nexport { useIsMobile } from '../../shell/hooks/useIsMobile';\n\nexport { useLocalStorage } from '../../shell/hooks/useLocalStorage';\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { getEditSettingsForApp } from '../../network/edit-settings';\nimport type { AppActions as StoreAppSetters } from '../../store/app';\nimport { useAppStore } from '../../store/app';\nimport {\n\tnormalizeRoute,\n\tnormalizeSettingsView,\n\tnormalizeSearchView,\n\tnormalizeUtilityView,\n\tnormalizePrimaryAccessoryView,\n\tnormalizeSecondaryAccessoryView,\n\tnormalizeBoardView\n} from '../../store/app/utils';\nimport type { IntegrationActions } from '../../store/integrations/store';\nimport { useIntegrationsStore } from '../../store/integrations/store';\nimport type {\n\tAppRouteDescriptor,\n\tBoardView,\n\tCarbonioModule,\n\tPrimaryAccessoryView,\n\tSearchView,\n\tSecondaryAccessoryView,\n\tSettingsView,\n\tUtilityView\n} from '../../types/apps';\n\nexport type AppDependantSetters = {\n\tsetAppContext: ReturnType<StoreAppSetters['setAppContext']>;\n\taddRoute: (data: Partial<AppRouteDescriptor>) => ReturnType<StoreAppSetters['addRoute']>;\n\taddBoardView: (data: Partial<BoardView>) => ReturnType<StoreAppSetters['addBoardView']>;\n\taddSettingsView: (data: Partial<SettingsView>) => ReturnType<StoreAppSetters['addSettingsView']>;\n\taddSearchView: (data: Partial<SearchView>) => ReturnType<StoreAppSetters['addSearchView']>;\n\taddUtilityView: (data: Partial<UtilityView>) => ReturnType<StoreAppSetters['addUtilityView']>;\n\taddPrimaryAccessoryView: (\n\t\tdata: Partial<PrimaryAccessoryView>\n\t) => ReturnType<StoreAppSetters['addPrimaryAccessoryView']>;\n\taddSecondaryAccessoryView: (\n\t\tdata: Partial<SecondaryAccessoryView>\n\t) => ReturnType<StoreAppSetters['addSecondaryAccessoryView']>;\n\tregisterComponents: ReturnType<IntegrationActions['registerComponents']>;\n\teditSettings: ReturnType<typeof getEditSettingsForApp>;\n};\n\nexport const getAppDependantSetters = (pkg: CarbonioModule): AppDependantSetters => {\n\tconst appStore = useAppStore.getState();\n\tconst integrations = useIntegrationsStore.getState();\n\treturn {\n\t\tsetAppContext: appStore.setAppContext(pkg.name),\n\t\taddRoute: (route: Partial<AppRouteDescriptor>) => appStore.addRoute(normalizeRoute(route, pkg)),\n\t\taddBoardView: (data: Partial<BoardView>) =>\n\t\t\tappStore.addBoardView(normalizeBoardView(data, pkg)),\n\t\taddSettingsView: (data: Partial<SettingsView>) =>\n\t\t\tappStore.addSettingsView(normalizeSettingsView(data, pkg)),\n\t\taddSearchView: (data: Partial<SearchView>) =>\n\t\t\tappStore.addSearchView(normalizeSearchView(data, pkg)),\n\t\taddUtilityView: (data: Partial<UtilityView>) =>\n\t\t\tappStore.addUtilityView(normalizeUtilityView(data, pkg)),\n\t\taddPrimaryAccessoryView: (data: Partial<PrimaryAccessoryView>) =>\n\t\t\tappStore.addPrimaryAccessoryView(normalizePrimaryAccessoryView(data, pkg)),\n\t\taddSecondaryAccessoryView: (data: Partial<SecondaryAccessoryView>) =>\n\t\t\tappStore.addSecondaryAccessoryView(normalizeSecondaryAccessoryView(data, pkg)),\n\t\tregisterComponents: integrations.registerComponents(pkg.name),\n\t\t/** @deprecated */\n\t\teditSettings: getEditSettingsForApp(pkg.name)\n\t};\n};\n\nexport const {\n\tupdatePrimaryBadge,\n\tupdateUtilityBadge,\n\tsetRouteVisibility,\n\tremoveRoute,\n\tremoveBoardView,\n\tremoveSettingsView,\n\tremoveSearchView,\n\tremoveUtilityView,\n\tremovePrimaryAccessoryView,\n\tremoveSecondaryAccessoryView,\n\t/**\n\t * Add or update the translatable display and description labels for an app.\n\t * These fields are the ones used in the UI.\n\t * @param app - The app to update based on the name field\n\t * @example\n\t * upsertApp(\\{\n\t *     name: 'carbonio-example-ui',\n\t *     display: t('label.app_name', 'Example')\n\t *     description: t('label.app_description', 'Example module')\n\t * \\});\n\t */\n\tupsertApp\n} = useAppStore.getState();\n\nexport const {\n\tregisterFunctions,\n\tremoveFunctions,\n\tregisterActions,\n\tremoveActions,\n\tremoveComponents\n} = useIntegrationsStore.getState();\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { filter, find, findIndex, map, reduce, isArray } from 'lodash';\n\nimport { getXmlSoapFetch } from './fetch';\nimport { SHELL_APP_ID } from '../constants';\nimport { useAccountStore } from '../store/account';\nimport type { Account, AccountState } from '../types/account';\nimport type {\n\tMods,\n\tCreateIdentityResponse,\n\tModifyPropertiesResponse,\n\tModifyPrefsResponse,\n\tModifyIdentityResponse,\n\tRevokeRightsResponse,\n\tDeleteIdentityResponse,\n\tGrantRightsResponse\n} from '../types/network';\n\nexport type EditSettingsBatchResponse = {\n\tModifyPropertiesResponse?: ModifyPropertiesResponse[];\n\tModifyPrefsResponse?: ModifyPrefsResponse[];\n\tModifyIdentityResponse?: ModifyIdentityResponse[];\n\tDeleteIdentityResponse?: DeleteIdentityResponse[];\n\tCreateIdentityResponse?: CreateIdentityResponse[];\n\tRevokeRightsResponse?: RevokeRightsResponse[];\n\tGrantRightsResponse?: GrantRightsResponse[];\n};\n\nexport const editSettings = (\n\tmods: Partial<Mods>,\n\tappId: string = SHELL_APP_ID\n): Promise<EditSettingsBatchResponse> =>\n\tgetXmlSoapFetch(SHELL_APP_ID)<string, EditSettingsBatchResponse>(\n\t\t'Batch',\n\t\t`<BatchRequest xmlns=\"urn:zimbra\" onerror=\"stop\">${\n\t\t\tmods.props\n\t\t\t\t? `<ModifyPropertiesRequest xmlns=\"urn:zimbraAccount\">${map(\n\t\t\t\t\t\tmods.props,\n\t\t\t\t\t\t(prop, key) => `<prop name=\"${key}\" zimlet=\"${prop.app ?? appId}\">${prop.value}</prop>`\n\t\t\t\t\t)}</ModifyPropertiesRequest>`\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.prefs\n\t\t\t\t? `<ModifyPrefsRequest xmlns=\"urn:zimbraAccount\">${map(mods.prefs, (pref, key) =>\n\t\t\t\t\t\tisArray(pref)\n\t\t\t\t\t\t\t? map(pref, (p) => `<pref name=\"${key}\">${p}</pref>`).join('')\n\t\t\t\t\t\t\t: `<pref name=\"${key}\">${pref}</pref>`\n\t\t\t\t\t).join('')}</ModifyPrefsRequest>`\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.identity?.modifyList\n\t\t\t\t? map(\n\t\t\t\t\t\tmods.identity.modifyList,\n\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\t`<ModifyIdentityRequest xmlns=\"urn:zimbraAccount\" requestId=\"0\"><identity id=\"${\n\t\t\t\t\t\t\t\titem.id\n\t\t\t\t\t\t\t}\">${map(item.prefs, (value, key) => `<a name=\"${key}\">${value}</a>`).join(\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t)}</identity></ModifyIdentityRequest>`\n\t\t\t\t\t).join('')\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.identity?.deleteList\n\t\t\t\t? map(\n\t\t\t\t\t\tmods.identity.deleteList,\n\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\t`<DeleteIdentityRequest xmlns=\"urn:zimbraAccount\" requestId=\"0\"><identity id=\"${item}\"/></DeleteIdentityRequest>`\n\t\t\t\t\t).join('')\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.identity?.createList\n\t\t\t\t? map(\n\t\t\t\t\t\tmods.identity.createList,\n\t\t\t\t\t\t(item, index) =>\n\t\t\t\t\t\t\t`<CreateIdentityRequest xmlns=\"urn:zimbraAccount\" requestId=\"${index}\"><identity name=\"${item.prefs.zimbraPrefIdentityName}\"><a name=\"zimbraPrefIdentityName\">${item.prefs.zimbraPrefIdentityName}</a><a name=\"zimbraPrefFromDisplay\">${item.prefs.zimbraPrefFromDisplay}</a><a name=\"zimbraPrefFromAddress\">${item.prefs.zimbraPrefFromAddress}</a><a name=\"zimbraPrefFromAddressType\">sendAs</a><a name=\"zimbraPrefReplyToEnabled\">${item.prefs.zimbraPrefReplyToEnabled}</a><a name=\"zimbraPrefReplyToDisplay\">${item.prefs.zimbraPrefReplyToDisplay}</a><a name=\"zimbraPrefReplyToAddress\">${item.prefs.zimbraPrefReplyToAddress}</a><a name=\"zimbraPrefDefaultSignatureId\">${item.prefs.zimbraPrefDefaultSignatureId}</a><a name=\"zimbraPrefForwardReplySignatureId\">${item.prefs.zimbraPrefForwardReplySignatureId}</a><a name=\"zimbraPrefWhenSentToEnabled\">${item.prefs.zimbraPrefWhenSentToEnabled}</a><a name=\"zimbraPrefWhenInFoldersEnabled\">${item.prefs.zimbraPrefWhenInFoldersEnabled}</a></identity></CreateIdentityRequest>`\n\t\t\t\t\t).join('')\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.permissions\n\t\t\t\t? `<RevokeRightsRequest xmlns=\"urn:zimbraAccount\" requestId=\"0\">${\n\t\t\t\t\t\tmods.permissions.freeBusy\n\t\t\t\t\t\t\t? map(mods.permissions.freeBusy.current, (right) => {\n\t\t\t\t\t\t\t\t\tif (right.gt === 'dom')\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${right.gt}\" zid=\"${right.zid}\" d=\"zextras.com\"/>`;\n\t\t\t\t\t\t\t\t\tif (right.gt === 'all' && right.deny)\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${right.gt}\" zid=\"${right.zid}\" deny=\"1\"/>`;\n\t\t\t\t\t\t\t\t\tif (right.gt === 'usr')\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${right.gt}\" zid=\"${right.zid}\" d=\"${right.d}\"/>`;\n\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${right.gt}\" zid=\"${right.zid}\" />`;\n\t\t\t\t\t\t\t\t}).join('')\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t}${\n\t\t\t\t\t\tmods.permissions.inviteRight\n\t\t\t\t\t\t\t? map(mods.permissions.inviteRight.current, (right) => {\n\t\t\t\t\t\t\t\t\tif (right.gt === 'all' && right.deny)\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${right.gt}\" zid=\"${right.zid}\" deny=\"1\"/>`;\n\t\t\t\t\t\t\t\t\tif (right.gt === 'usr')\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${right.gt}\" zid=\"${right.zid}\" d=\"${right.d}\"/>`;\n\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${right.gt}\" zid=\"${right.zid}\" />`;\n\t\t\t\t\t\t\t\t}).join('')\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t}</RevokeRightsRequest><GrantRightsRequest xmlns=\"urn:zimbraAccount\" requestId=\"1\">${\n\t\t\t\t\t\tmods.permissions.freeBusy\n\t\t\t\t\t\t\t? `${((): string => {\n\t\t\t\t\t\t\t\t\tif (mods.permissions.freeBusy.new.gt === 'dom') {\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${mods.permissions.freeBusy.new.gt}\" d=\"zextras.com\"/>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tmods.permissions.freeBusy.new.gt === 'all' &&\n\t\t\t\t\t\t\t\t\t\tmods.permissions.freeBusy.new.deny\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${mods.permissions.freeBusy.new.gt}\" deny=\"1\"/>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (mods.permissions.freeBusy.new.gt === 'usr') {\n\t\t\t\t\t\t\t\t\t\treturn map(\n\t\t\t\t\t\t\t\t\t\t\tmods.permissions.freeBusy.new.d,\n\t\t\t\t\t\t\t\t\t\t\t(u) =>\n\t\t\t\t\t\t\t\t\t\t\t\t// FIXME: usage differs from the declaration of the AccountACE\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t`<ace right=\"viewFreeBusy\" gt=\"${mods.permissions?.freeBusy.new.gt}\" d=\"${u.email}\"/>`\n\t\t\t\t\t\t\t\t\t\t).join('');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${mods.permissions.freeBusy.new.gt}\" />`;\n\t\t\t\t\t\t\t\t})()}`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t}${\n\t\t\t\t\t\tmods.permissions.inviteRight\n\t\t\t\t\t\t\t? `${((): string => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tmods.permissions.inviteRight.new.gt === 'all' &&\n\t\t\t\t\t\t\t\t\t\tmods.permissions.inviteRight.new.deny\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${mods.permissions.inviteRight.new.gt}\" deny=\"1\"/>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (mods.permissions.inviteRight.new.gt === 'usr') {\n\t\t\t\t\t\t\t\t\t\treturn map(\n\t\t\t\t\t\t\t\t\t\t\tmods.permissions.inviteRight.new.d,\n\t\t\t\t\t\t\t\t\t\t\t(u) =>\n\t\t\t\t\t\t\t\t\t\t\t\t// FIXME: usage differs from the declaration of the AccountACE\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t`<ace right=\"invite\" gt=\"${mods.permissions?.inviteRight.new.gt}\" d=\"${u.email}\"/>`\n\t\t\t\t\t\t\t\t\t\t).join('');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${mods.permissions?.inviteRight.new.gt}\" />`;\n\t\t\t\t\t\t\t\t})()}`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t}\n\t</GrantRightsRequest>`\n\t\t\t\t: ''\n\t\t}</BatchRequest>`\n\t).then((r) => {\n\t\tuseAccountStore.setState((s: AccountState) => ({\n\t\t\tsettings: {\n\t\t\t\t...s.settings,\n\t\t\t\tprefs: reduce(\n\t\t\t\t\tmods.prefs,\n\t\t\t\t\t(acc, pref, key) => ({\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[key]: pref as string\n\t\t\t\t\t}),\n\t\t\t\t\ts.settings.prefs\n\t\t\t\t),\n\t\t\t\tprops: reduce(\n\t\t\t\t\tmods.props,\n\t\t\t\t\t(acc, { app, value }, key) => {\n\t\t\t\t\t\tconst propIndex = findIndex(acc, (p) => p.name === key && p.zimlet === app);\n\t\t\t\t\t\tif (propIndex >= 0) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\tacc[propIndex] = {\n\t\t\t\t\t\t\t\tname: key,\n\t\t\t\t\t\t\t\tzimlet: app,\n\t\t\t\t\t\t\t\t_content: value as string\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tacc.push({\n\t\t\t\t\t\t\t\tname: key,\n\t\t\t\t\t\t\t\tzimlet: app,\n\t\t\t\t\t\t\t\t_content: value as string\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t},\n\t\t\t\t\ts.settings.props\n\t\t\t\t)\n\t\t\t},\n\t\t\taccount: {\n\t\t\t\t...s.account,\n\t\t\t\tdisplayName:\n\t\t\t\t\tfind(mods?.identity?.modifyList, (item) => item.id === s?.account?.id)?.prefs\n\t\t\t\t\t\t.zimbraPrefIdentityName || s.account?.displayName,\n\t\t\t\tidentities: {\n\t\t\t\t\tidentity:\n\t\t\t\t\t\ttypeof s.account !== 'undefined'\n\t\t\t\t\t\t\t? reduce(\n\t\t\t\t\t\t\t\t\tmods?.identity?.modifyList,\n\t\t\t\t\t\t\t\t\t(acc, { id, prefs }) => {\n\t\t\t\t\t\t\t\t\t\tconst propIndex = findIndex(\n\t\t\t\t\t\t\t\t\t\t\tacc,\n\t\t\t\t\t\t\t\t\t\t\t(itemMods, indexAccount) => acc[indexAccount].id === id\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tif (propIndex > -1) {\n\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\t\t\t\t\tacc[propIndex]._attrs = {\n\t\t\t\t\t\t\t\t\t\t\t\t...acc[propIndex]._attrs,\n\t\t\t\t\t\t\t\t\t\t\t\t...prefs\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\tif (prefs.zimbraPrefIdentityName && acc[propIndex].name !== 'DEFAULT') {\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\t\t\t\t\t\tacc[propIndex].name = prefs.zimbraPrefIdentityName;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t...filter(\n\t\t\t\t\t\t\t\t\t\t\ts.account.identities.identity,\n\t\t\t\t\t\t\t\t\t\t\t(item) => !mods?.identity?.deleteList?.includes(item.id)\n\t\t\t\t\t\t\t\t\t\t).filter((i) => i.name !== 'DEFAULT'),\n\t\t\t\t\t\t\t\t\t\t...map(r?.CreateIdentityResponse, (item) => item.identity[0]),\n\t\t\t\t\t\t\t\t\t\t...filter(\n\t\t\t\t\t\t\t\t\t\t\ts.account.identities.identity,\n\t\t\t\t\t\t\t\t\t\t\t(item) => !mods?.identity?.deleteList?.includes(item.id)\n\t\t\t\t\t\t\t\t\t\t).filter((i) => i.name === 'DEFAULT')\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t} as Account\n\t\t}));\n\t\treturn r;\n\t});\n\nexport const getEditSettingsForApp =\n\t(app: string) =>\n\t(mods: Mods): Promise<EditSettingsBatchResponse & { type: 'fulfilled' }> =>\n\t\teditSettings(mods, app).then((r) => ({\n\t\t\t...r,\n\t\t\ttype: 'fulfilled'\n\t\t}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport type { LinkProps } from 'react-router-dom';\nimport { Link as RRLink } from 'react-router-dom';\n\nimport { parseParams } from '../history/hooks';\n\nexport type AppLinkProps = LinkProps & {\n\troute?: string;\n};\nexport const AppLink: FC<AppLinkProps> = ({ to, route, ...rest }) => {\n\tconst _to = useMemo(() => parseParams({ path: to, route }), [route, to]);\n\treturn <RRLink style={{ textDecoration: 'none' }} to={_to} {...rest} />;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react';\n\nimport { Button, Container } from '@zextras/carbonio-design-system';\nimport { noop } from 'lodash';\n\nexport const Spinner = (): React.JSX.Element => (\n\t<Container width=\"fill\" height=\"fill\" mainAlignment=\"center\" crossAlignment=\"center\">\n\t\t{/* the \"Button\" string doesn't need to be translated as it's not rendered */}\n\t\t<Button type=\"ghost\" label=\"Button\" color=\"primary\" loading onClick={noop} />\n\t</Container>\n);\n","/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nexport interface MatomoTracker {\n\ttrackPageView(customTitle?: string): void;\n\ttrackEvent(category: string, action: string, name?: string, value?: number): void;\n\tsetCustomUrl(url: string): void;\n}\n\ndeclare global {\n\tconst Matomo: {\n\t\tgetTracker(trackerUrl: string, siteId: number): MatomoTracker;\n\t};\n}\nexport function initMatomo(url: string): void {\n\tconst matomoScriptId = 'matomo-script';\n\n\tif (document.getElementById(matomoScriptId)) {\n\t\treturn;\n\t}\n\n\tconst matomoScript = document.createElement('script');\n\tconst scriptElement = document.getElementsByTagName('script')[0];\n\tmatomoScript.type = 'text/javascript';\n\tmatomoScript.async = true;\n\tmatomoScript.src = `${url}matomo.js`;\n\tmatomoScript.id = matomoScriptId;\n\tscriptElement.parentNode?.insertBefore(matomoScript, scriptElement);\n}\n\nexport function getMatomoTracker(url: string, siteId: number): MatomoTracker {\n\treturn Matomo.getTracker(`${url}matomo.php`, siteId);\n}\n","/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { getMatomoTracker, initMatomo, type MatomoTracker } from './matomo';\n\nexport class Tracker {\n\tprivate static readonly URL = 'https://analytics.zextras.tools/';\n\n\tprivate matomoTracker: MatomoTracker | null;\n\n\tprivate static isEnabled = false;\n\n\tprivate readonly siteId: number;\n\n\tconstructor(siteId: number) {\n\t\tthis.siteId = siteId;\n\t\tif (Tracker.isEnabled) {\n\t\t\tthis.matomoTracker = getMatomoTracker(Tracker.URL, siteId);\n\t\t} else {\n\t\t\tthis.matomoTracker = null;\n\t\t}\n\t}\n\n\tpublic static enableTracker(isEnabled: boolean): void {\n\t\tif (isEnabled) {\n\t\t\tinitMatomo(Tracker.URL);\n\t\t}\n\t\tTracker.isEnabled = isEnabled;\n\t}\n\n\tpublic trackPageView(customTitle?: string): void {\n\t\tconst tracker = this.getMatomoTrackerInstance();\n\t\ttracker?.setCustomUrl(window.location.href);\n\t\ttracker?.trackPageView(customTitle);\n\t}\n\n\tpublic trackEvent(category: string, action: string, name?: string, value?: number): void {\n\t\tconst tracker = this.getMatomoTrackerInstance();\n\t\ttracker?.setCustomUrl(window.location.href);\n\t\ttracker?.trackEvent(category, action, name, value);\n\t}\n\n\tprivate getMatomoTrackerInstance(): MatomoTracker | null {\n\t\tif (!Tracker.isEnabled) {\n\t\t\treturn null;\n\t\t}\n\t\tif (this.matomoTracker === null) {\n\t\t\ttry {\n\t\t\t\tthis.matomoTracker = getMatomoTracker(Tracker.URL, this.siteId);\n\t\t\t} catch (e) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.warn('Matomo is not initialized yet: ', e);\n\t\t\t}\n\t\t}\n\t\treturn this.matomoTracker;\n\t}\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { ComponentType } from 'react';\nimport { memo } from 'react';\n\nimport { forOwn } from 'lodash';\n\nimport * as appFunctions from './app-loader-functions';\nimport * as appSetters from './app-loader-setters';\nimport * as CONSTANTS from '../../constants';\nimport type * as ExportsForApp from '../../lib';\nimport { report } from '../../reporting/functions';\nimport { SettingsHeader } from '../../settings/components/settings-header';\nimport { useAppStore } from '../../store/app';\nimport type { CarbonioModule } from '../../types/apps';\nimport { AppLink } from '../../ui-extras/app-link';\nimport { Spinner } from '../../ui-extras/spinner';\nimport { Tracker } from '../tracker';\n\nexport const _scripts: { [pkgName: string]: HTMLScriptElement } = {};\nlet _scriptId = 0;\n\nconst { getAppDependantSetters, ...otherSetters } = appSetters;\nconst { getAppDependantFunctions, ...otherFunctions } = appFunctions;\n\nexport function loadApp(appPkg: CarbonioModule): Promise<CarbonioModule> {\n\treturn new Promise((resolve, reject) => {\n\t\ttry {\n\t\t\tif (window.__ZAPP_SHARED_LIBRARIES__?.['@zextras/carbonio-shell-ui']) {\n\t\t\t\twindow.__ZAPP_SHARED_LIBRARIES__['@zextras/carbonio-shell-ui'][appPkg.name] = {\n\t\t\t\t\treport: report(appPkg.name),\n\t\t\t\t\tAppLink,\n\t\t\t\t\tSpinner,\n\t\t\t\t\tSettingsHeader,\n\t\t\t\t\t...getAppDependantSetters(appPkg),\n\t\t\t\t\t...otherSetters,\n\t\t\t\t\t...getAppDependantFunctions(appPkg),\n\t\t\t\t\t...otherFunctions,\n\t\t\t\t\t...CONSTANTS,\n\t\t\t\t\tTracker\n\t\t\t\t} satisfies typeof ExportsForApp;\n\t\t\t}\n\n\t\t\twindow.__ZAPP_HMR_EXPORT__[appPkg.name] = (appComponent: ComponentType): void => {\n\t\t\t\tuseAppStore.setState((state) => ({\n\t\t\t\t\tentryPoints: {\n\t\t\t\t\t\t...state.entryPoints,\n\t\t\t\t\t\t[appPkg.name]: memo(appComponent)\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.info(\n\t\t\t\t\t`%c loaded ${appPkg.name}`,\n\t\t\t\t\t'color: white; background: #539507;padding: 4px 8px 2px 4px; font-family: sans-serif; border-radius: 12px; width: 100%'\n\t\t\t\t);\n\t\t\t\tresolve(appPkg);\n\t\t\t};\n\n\t\t\tconst script = document.createElement('script');\n\t\t\tscript.setAttribute('type', 'text/javascript');\n\t\t\tscript.setAttribute('data-pkg_name', appPkg.name);\n\t\t\tscript.setAttribute('data-pkg_version', appPkg.version);\n\t\t\tscript.setAttribute('data-is_app', 'true');\n\t\t\tscript.setAttribute('src', `${appPkg.js_entrypoint}`);\n\t\t\tdocument.body.appendChild(script);\n\t\t\t_scriptId += 1;\n\t\t\t_scripts[`${appPkg.name}-loader-${_scriptId}`] = script;\n\t\t} catch (err: unknown) {\n\t\t\tconsole.error(err);\n\t\t\treject(err);\n\t\t}\n\t});\n}\n\nexport function unloadApps(): Promise<void> {\n\treturn new Promise((resolve) => {\n\t\tforOwn(_scripts, (script) => {\n\t\t\tif (script.parentNode) {\n\t\t\t\tscript.parentNode.removeChild(script);\n\t\t\t}\n\t\t});\n\t\tresolve();\n\t});\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { Modal, Padding, Text } from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { loadApps, unloadAllApps } from './app/load-apps';\nimport { IS_FOCUS_MODE } from '../constants';\nimport { getComponents } from '../network/get-components';\nimport { getInfo } from '../network/get-info';\nimport { loginConfig } from '../network/login-config';\nimport { goToLogin } from '../network/utils';\nimport { useAppStore } from '../store/app';\n\nexport function isPromiseRejectedResult<T>(\n\tpromiseSettledResult: PromiseSettledResult<T>\n): promiseSettledResult is PromiseRejectedResult {\n\treturn promiseSettledResult.status === 'rejected';\n}\n\nexport function isPromiseFulfilledResult<T>(\n\tpromiseSettledResult: PromiseSettledResult<T>\n): promiseSettledResult is PromiseFulfilledResult<T> {\n\treturn promiseSettledResult.status === 'fulfilled';\n}\n\ntype LoaderFailureModalProps = { open: boolean; closeHandler: () => void };\n\nexport const LoaderFailureModal = ({\n\topen,\n\tcloseHandler\n}: LoaderFailureModalProps): React.JSX.Element => {\n\tconst [t] = useTranslation();\n\tconst onConfirm = useCallback(() => window.location.reload(), []);\n\treturn (\n\t\t<Modal\n\t\t\topen={open}\n\t\t\tshowCloseIcon={false}\n\t\t\tonSecondaryAction={goToLogin}\n\t\t\ttitle={t('bootstrap.failure.modal.title', 'Something went wrong...')}\n\t\t\tconfirmLabel={t('bootstrap.failure.modal.confirmButtonLabel', 'refresh')}\n\t\t\tsecondaryActionLabel={t('bootstrap.failure.modal.secondaryButtonLabel', 'login page')}\n\t\t\tonConfirm={onConfirm}\n\t\t\tonClose={closeHandler}\n\t\t>\n\t\t\t<Padding all=\"small\">\n\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t{t(\n\t\t\t\t\t\t'bootstrap.failure.modal.body',\n\t\t\t\t\t\t'Some technical issues occurred while processing your request. Please try to refresh the page or go back to the login page.'\n\t\t\t\t\t)}\n\t\t\t\t</Text>\n\t\t\t</Padding>\n\t\t</Modal>\n\t);\n};\n\nexport const Loader = (): React.JSX.Element => {\n\tconst [open, setOpen] = useState(false);\n\tconst closeHandler = useCallback(() => setOpen(false), []);\n\n\tuseEffect(() => {\n\t\tPromise.allSettled([loginConfig(), getComponents(), getInfo()]).then(\n\t\t\t(promiseSettledResultArray) => {\n\t\t\t\tconst [, getComponentsPromiseSettledResult, getInfoPromiseSettledResult] =\n\t\t\t\t\tpromiseSettledResultArray;\n\n\t\t\t\tconst promiseRejectedResult = find(\n\t\t\t\t\t[getComponentsPromiseSettledResult, getInfoPromiseSettledResult],\n\t\t\t\t\tisPromiseRejectedResult\n\t\t\t\t);\n\t\t\t\tif (promiseRejectedResult) {\n\t\t\t\t\tif (typeof promiseRejectedResult.reason === 'string') {\n\t\t\t\t\t\tconsole.error(promiseRejectedResult.reason);\n\t\t\t\t\t} else if ('message' in promiseRejectedResult.reason) {\n\t\t\t\t\t\tconsole.error(promiseRejectedResult.reason.message);\n\t\t\t\t\t}\n\t\t\t\t\tif (!IS_FOCUS_MODE) {\n\t\t\t\t\t\tsetOpen(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isPromiseFulfilledResult(getComponentsPromiseSettledResult)) {\n\t\t\t\t\tloadApps(Object.values(useAppStore.getState().apps));\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\treturn () => {\n\t\t\tunloadAllApps();\n\t\t};\n\t}, []);\n\treturn <LoaderFailureModal open={open} closeHandler={closeHandler} />;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { LOGIN_V3_CONFIG_PATH } from '../constants';\nimport { getClientTitle, getFavicon } from '../store/login/getters';\nimport type { LoginConfigStore } from '../store/login/store';\nimport { useLoginConfigStore } from '../store/login/store';\n\nexport const loginConfig = (): Promise<void> =>\n\tfetch(LOGIN_V3_CONFIG_PATH)\n\t\t.then((response) => response.json())\n\t\t.then((data: LoginConfigStore) => {\n\t\t\tuseLoginConfigStore.setState(data);\n\t\t})\n\t\t.finally(() => {\n\t\t\tuseLoginConfigStore.setState({ loaded: true });\n\t\t\tconst favicon = document.getElementById('favicon');\n\t\t\tif (favicon && favicon instanceof HTMLLinkElement) {\n\t\t\t\tfavicon.href = getFavicon();\n\t\t\t}\n\t\t\tdocument.title = getClientTitle();\n\t\t});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { filter } from 'lodash';\n\nimport { useAppStore } from '../store/app';\nimport type { CarbonioModule } from '../types/apps';\n\nexport const getComponents = (): Promise<void> =>\n\tfetch('/static/iris/components.json')\n\t\t.then((response) => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn response.json();\n\t\t\t}\n\t\t\tthrow Error(response.statusText);\n\t\t})\n\t\t.then(({ components }: { components: Array<CarbonioModule> }) => {\n\t\t\tuseAppStore\n\t\t\t\t.getState()\n\t\t\t\t.setApps(filter(components, ({ type }) => type === 'shell' || type === 'carbonio'));\n\t\t});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { getSoapFetch } from './fetch';\nimport { JSNS, SHELL_APP_ID } from '../constants';\nimport { useAccountStore } from '../store/account';\nimport { normalizeAccount } from '../store/account/normalization';\nimport { useNetworkStore } from '../store/network';\nimport { parsePollingInterval } from '../store/network/utils';\nimport type { GetInfoResponse, SoapBody } from '../types/network';\n\nexport const getInfo = (): Promise<void> =>\n\tgetSoapFetch(SHELL_APP_ID)<SoapBody<{ rights: string }>, GetInfoResponse>('GetInfo', {\n\t\t_jsns: JSNS.account,\n\t\trights: 'sendAs,sendAsDistList,viewFreeBusy,sendOnBehalfOf,sendOnBehalfOfDistList'\n\t}).then((res: GetInfoResponse): void => {\n\t\tif (res) {\n\t\t\tconst { account, settings, version } = normalizeAccount(res);\n\t\t\tuseNetworkStore.setState({\n\t\t\t\tpollingInterval: parsePollingInterval(settings)\n\t\t\t});\n\t\t\tuseAccountStore.setState({\n\t\t\t\tauthenticated: true,\n\t\t\t\taccount,\n\t\t\t\tsettings,\n\t\t\t\tzimbraVersion: version\n\t\t\t});\n\t\t}\n\t});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { Account, AccountSettings } from '../../types/account';\nimport type { GetInfoResponse } from '../../types/network';\n\nconst normalizeSettings = (\n\tsettings: Pick<GetInfoResponse, 'attrs' | 'prefs' | 'props'>\n): AccountSettings => ({\n\tattrs: settings.attrs._attrs,\n\tprefs: settings.prefs._attrs,\n\tprops: settings.props.prop ?? []\n});\n\nexport const normalizeAccount = ({\n\tid,\n\tname,\n\tattrs,\n\tprefs,\n\tidentities,\n\tsignatures,\n\tprops,\n\tversion,\n\trights\n}: GetInfoResponse): {\n\taccount: Account;\n\tsettings: AccountSettings;\n\tversion: string;\n} => {\n\tconst settings = normalizeSettings({ attrs, prefs, props });\n\treturn {\n\t\taccount: {\n\t\t\tid,\n\t\t\tname,\n\t\t\tdisplayName: attrs._attrs.displayName,\n\t\t\tidentities,\n\t\t\tsignatures,\n\t\t\trights\n\t\t},\n\t\tsettings,\n\t\tversion\n\t};\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { registerLocale, setDefaultLocale } from '@zextras/carbonio-design-system';\nimport type { Locale as DateFnsLocale } from 'date-fns';\nimport { filter, map } from 'lodash';\n\nimport { loadApp, unloadApps } from './load-app';\nimport { injectSharedLibraries } from './shared-libraries';\nimport { SHELL_APP_ID } from '../../constants';\nimport { SUPPORTED_LOCALES } from '../../constants/locales';\nimport { useReporter } from '../../reporting/store';\nimport { getUserSetting, useAccountStore } from '../../store/account';\nimport { useI18nStore } from '../../store/i18n/store';\nimport type { CarbonioModule } from '../../types/apps';\n\nconst getDateFnsLocale = (locale: string): Promise<DateFnsLocale> =>\n\timport(`date-fns/locale/${locale}/index.js`);\n\nexport function loadApps(\n\tapps: Array<CarbonioModule>\n): Promise<PromiseSettledResult<CarbonioModule>[]> {\n\tinjectSharedLibraries();\n\tconst appsToLoad = filter(apps, (app) => {\n\t\tif (app.name === SHELL_APP_ID) return false;\n\t\treturn !(app.attrKey && getUserSetting('attrs', app.attrKey) === 'FALSE');\n\t});\n\t// eslint-disable-next-line no-console\n\tconsole.log(\n\t\t'%cLOADING APPS',\n\t\t'color: white; background: #2b73d2;padding: 4px 8px 2px 4px; font-family: sans-serif; border-radius: 12px; width: 100%'\n\t);\n\tconst { settings } = useAccountStore.getState();\n\tconst locale =\n\t\t(settings?.prefs?.zimbraPrefLocale as string) ??\n\t\t(settings?.attrs?.zimbraLocale as string) ??\n\t\t'en';\n\tuseI18nStore.getState().addI18n(appsToLoad, locale);\n\tconst localeObj =\n\t\tlocale in SUPPORTED_LOCALES && SUPPORTED_LOCALES[locale as keyof typeof SUPPORTED_LOCALES];\n\tif (localeObj) {\n\t\tconst localeDateFnsKey =\n\t\t\t('dateFnsLocale' in localeObj && localeObj.dateFnsLocale) || localeObj.value;\n\t\tgetDateFnsLocale(localeDateFnsKey).then((localeDateFns) => {\n\t\t\tregisterLocale(localeDateFnsKey, localeDateFns);\n\t\t\tsetDefaultLocale(localeDateFnsKey);\n\t\t});\n\t}\n\tuseReporter.getState().setClients(appsToLoad);\n\treturn Promise.allSettled(map(appsToLoad, (app) => loadApp(app)));\n}\n\nexport function unloadAllApps(): Promise<void> {\n\treturn unloadApps();\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react';\n\nimport * as ReduxJSToolkit from '@reduxjs/toolkit';\nimport * as ZappUI from '@zextras/carbonio-design-system';\nimport * as Preview from '@zextras/carbonio-ui-preview';\nimport * as Darkreader from 'darkreader';\nimport * as Lodash from 'lodash';\nimport * as ReactDOM from 'react-dom';\nimport * as ReactI18n from 'react-i18next';\nimport * as ReactRedux from 'react-redux';\nimport * as ReactRouterDom from 'react-router-dom';\nimport * as StyledComponents from 'styled-components';\n\nexport function injectSharedLibraries(): void {\n\tif (!window.__ZAPP_SHARED_LIBRARIES__) {\n\t\twindow.__ZAPP_SHARED_LIBRARIES__ = {\n\t\t\treact: React,\n\t\t\t'react-dom': ReactDOM,\n\t\t\t'react-i18next': ReactI18n,\n\t\t\t'react-redux': ReactRedux,\n\t\t\tlodash: Lodash,\n\t\t\t'react-router-dom': ReactRouterDom,\n\t\t\t'styled-components': StyledComponents,\n\t\t\t'@reduxjs/toolkit': ReduxJSToolkit,\n\t\t\t'@zextras/carbonio-shell-ui': {},\n\t\t\t'@zextras/carbonio-design-system': ZappUI,\n\t\t\t'@zextras/carbonio-ui-preview': Preview,\n\t\t\tdarkreader: Darkreader\n\t\t};\n\t\twindow.__ZAPP_HMR_EXPORT__ = {};\n\t}\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React from 'react';\n\nimport { I18nextProvider } from 'react-i18next';\n\nimport { SHELL_APP_ID } from '../constants';\nimport { useI18nStore } from '../store/i18n/store';\n\nconst ShellI18nextProvider: FC = ({ children }) => {\n\tconst i18n = useI18nStore((s) => s.instances[SHELL_APP_ID]);\n\treturn <I18nextProvider i18n={i18n}>{children}</I18nextProvider>;\n};\nexport default ShellI18nextProvider;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { DARK_READER_VALUES } from '../constants';\n\nexport const getPrefersColorSchemeDarkMedia = (): MediaQueryList =>\n\twindow.matchMedia('(prefers-color-scheme: dark)');\n\nexport type DarkReaderPropValues = (typeof DARK_READER_VALUES)[number];\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useEffect, useState } from 'react';\n\nimport { useDarkReaderResultValue } from './use-dark-reader-result-value';\nimport type { DarkReaderPropValues } from './utils';\nimport { getPrefersColorSchemeDarkMedia } from './utils';\n\nexport const useDarkMode = (): {\n\tdarkModeEnabled: boolean;\n\tdarkReaderStatus: DarkReaderPropValues | undefined;\n} => {\n\tconst darkReaderResultValue = useDarkReaderResultValue();\n\n\tconst [darkModeEnabled, setDarkModeEnabled] = useState<boolean>(false);\n\n\tuseEffect(() => {\n\t\tif (darkReaderResultValue) {\n\t\t\tsetDarkModeEnabled(\n\t\t\t\t(darkReaderResultValue === 'auto' && getPrefersColorSchemeDarkMedia().matches) ||\n\t\t\t\t\tdarkReaderResultValue === 'enabled'\n\t\t\t);\n\t\t}\n\t}, [darkReaderResultValue]);\n\n\tuseEffect(() => {\n\t\tconst setCallback = (event: MediaQueryListEvent): void => {\n\t\t\tsetDarkModeEnabled(event.matches);\n\t\t};\n\t\tgetPrefersColorSchemeDarkMedia().addEventListener('change', setCallback);\n\t\treturn (): void => {\n\t\t\tgetPrefersColorSchemeDarkMedia().removeEventListener('change', setCallback);\n\t\t};\n\t}, []);\n\n\treturn { darkModeEnabled, darkReaderStatus: darkReaderResultValue };\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useMemo } from 'react';\n\nimport { find, size } from 'lodash';\n\nimport type { DarkReaderPropValues } from './utils';\nimport { DARK_READER_PROP_KEY, DARK_READER_VALUES, SHELL_APP_ID } from '../constants';\nimport { useUserSettings } from '../store/account';\nimport { useLoginConfigStore } from '../store/login/store';\nimport type { ZimletProp } from '../types/account';\n\nexport interface ZappDarkreaderModeZimletProp extends ZimletProp {\n\tname: typeof DARK_READER_PROP_KEY;\n\tzimlet: typeof SHELL_APP_ID;\n\t_content: DarkReaderPropValues;\n}\n\nexport function isZappDarkreaderModeZimletProp(\n\tprop: ZimletProp\n): prop is ZappDarkreaderModeZimletProp {\n\treturn prop.name === DARK_READER_PROP_KEY && prop.zimlet === SHELL_APP_ID;\n}\n\nexport function isDarkReaderPropValues(\n\tmaybeDarkReaderPropValue: unknown\n): maybeDarkReaderPropValue is DarkReaderPropValues {\n\treturn (\n\t\ttypeof maybeDarkReaderPropValue === 'string' &&\n\t\tDARK_READER_VALUES.includes(maybeDarkReaderPropValue as DarkReaderPropValues)\n\t);\n}\n\n// return the final calculated value between ZappDarkreaderModeZimletProp value and carbonioWebUiDarkMode config\nexport function useDarkReaderResultValue(): undefined | DarkReaderPropValues {\n\tconst settings = useUserSettings();\n\tconst { carbonioWebUiDarkMode } = useLoginConfigStore();\n\n\tconst settingReceived = useMemo(\n\t\t() => size(settings.prefs) > 0 || size(settings.attrs) > 0 || size(settings.props) > 0,\n\t\t[settings]\n\t);\n\n\treturn useMemo(() => {\n\t\tif (settingReceived) {\n\t\t\tconst result = find<ZimletProp, ZappDarkreaderModeZimletProp>(\n\t\t\t\tsettings.props,\n\t\t\t\t(value): value is ZappDarkreaderModeZimletProp => isZappDarkreaderModeZimletProp(value)\n\t\t\t)?._content;\n\n\t\t\treturn result || (carbonioWebUiDarkMode && 'enabled') || 'disabled';\n\t\t}\n\t\treturn undefined;\n\t}, [settingReceived, settings, carbonioWebUiDarkMode]);\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, {\n\tcreateContext,\n\tuseCallback,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseState\n} from 'react';\n\nimport type { ThemeProviderProps as UIThemeProviderProps } from '@zextras/carbonio-design-system';\nimport {\n\tgenerateColorSet,\n\tThemeProvider as UIThemeProvider\n} from '@zextras/carbonio-design-system';\nimport { auto, disable, enable, setFetchMethod } from 'darkreader';\nimport { map, reduce } from 'lodash';\nimport type { DefaultTheme, SimpleInterpolation } from 'styled-components';\nimport { createGlobalStyle, css } from 'styled-components';\n\nimport { useGetPrimaryColor } from './use-get-primary-color';\nimport { darkReaderDynamicThemeFixes, LOCAL_STORAGE_SETTINGS_KEY } from '../constants';\nimport type { DarkReaderPropValues } from '../dark-mode/utils';\nimport { getAutoScalingFontSize } from '../settings/components/utils';\nimport { useLocalStorage } from '../shell/hooks/useLocalStorage';\nimport type { ScalingSettings } from '../types/settings';\n\nexport type ThemeExtension = (theme: DefaultTheme) => DefaultTheme;\n\nsetFetchMethod(window.fetch);\n\ninterface ThemeCallbacks {\n\taddExtension: (newExtension: ThemeExtension, id: string) => void;\n\tsetDarkReaderState: (newState: DarkReaderPropValues) => void;\n}\n\nexport const ThemeCallbacksContext = createContext<ThemeCallbacks>({\n\taddExtension: () => {\n\t\tthrow Error('Not implemented');\n\t},\n\tsetDarkReaderState: () => {\n\t\tthrow Error('not implemented');\n\t}\n});\n\ntype CustomTheme = Partial<Omit<DefaultTheme, 'palette'>> & {\n\tpalette?: Partial<DefaultTheme['palette']>;\n};\n\nconst paletteExtension =\n\t(customTheme: CustomTheme = {}) =>\n\t(theme: DefaultTheme): DefaultTheme => ({\n\t\t...theme,\n\t\t...customTheme,\n\t\tpalette: {\n\t\t\t...theme.palette,\n\t\t\t...customTheme.palette,\n\t\t\tshared: {\n\t\t\t\tregular: '#FFB74D',\n\t\t\t\thover: '#FFA21A',\n\t\t\t\tactive: '#FFA21A',\n\t\t\t\tfocus: '#FF9800',\n\t\t\t\tdisabled: '#FFD699'\n\t\t\t},\n\t\t\tlinked: {\n\t\t\t\tregular: '#AB47BC',\n\t\t\t\thover: '#8B3899',\n\t\t\t\tactive: '#8B3899',\n\t\t\t\tfocus: '#7A3187',\n\t\t\t\tdisabled: '#DDB4E4'\n\t\t\t}\n\t\t}\n\t});\n\nconst iconExtension: ThemeExtension = (theme) => ({\n\t...theme,\n\ticons: {\n\t\t...theme.icons,\n\t\tShared: theme.icons.ArrowCircleRight,\n\t\tLinked: theme.icons.ArrowCircleLeft\n\t}\n});\n\nconst globalCursorsExtension: ThemeExtension = (theme) => ({\n\t...theme,\n\tglobalCursors: [\n\t\t...(theme.globalCursors || []),\n\t\t'ns-resize',\n\t\t'ew-resize',\n\t\t'nesw-resize',\n\t\t'nwse-resize',\n\t\t'move'\n\t]\n});\n\ninterface GlobalStyledProps {\n\tbaseFontSize: number;\n}\n\nconst GlobalStyle = createGlobalStyle<GlobalStyledProps>`\n  html {\n    font-size: ${({ baseFontSize }): string => `${baseFontSize}%`};\n  }\n  ${({ theme }): SimpleInterpolation =>\n\t\tmap(\n\t\t\ttheme.globalCursors,\n\t\t\t(cursor) => css`\n\t\t\t\t.global-cursor-${cursor} * {\n\t\t\t\t\tcursor: ${cursor} !important;\n\t\t\t\t}\n\t\t\t`\n\t\t)}\n  .no-active-background:active {\n\t  background-color: inherit;\n  }\n`;\n\ninterface ThemeProviderProps {\n\tchildren?: React.ReactNode | React.ReactNode[];\n}\nexport const ThemeProvider = ({ children }: ThemeProviderProps): React.JSX.Element => {\n\tconst [localStorageSettings] = useLocalStorage<ScalingSettings>(LOCAL_STORAGE_SETTINGS_KEY, {});\n\n\tconst [extensions, setExtensions] = useState<Partial<Record<keyof DefaultTheme, ThemeExtension>>>(\n\t\t{}\n\t);\n\n\tconst primaryColor = useGetPrimaryColor();\n\n\tuseLayoutEffect(() => {\n\t\tconst customThemePalette: Partial<DefaultTheme['palette']> = primaryColor\n\t\t\t? { primary: generateColorSet({ regular: primaryColor }) }\n\t\t\t: {};\n\t\tsetExtensions((extension) => ({\n\t\t\t...extension,\n\t\t\tpalette: paletteExtension({\n\t\t\t\tpalette: customThemePalette\n\t\t\t}),\n\t\t\ticons: iconExtension,\n\t\t\tglobalCursors: globalCursorsExtension\n\t\t}));\n\t}, [primaryColor]);\n\n\tconst [darkReaderState, setDarkReaderState] = useState<DarkReaderPropValues>('disabled');\n\n\tuseEffect(() => {\n\t\tswitch (darkReaderState) {\n\t\t\tcase 'disabled':\n\t\t\t\tauto(false);\n\t\t\t\tdisable();\n\t\t\t\tbreak;\n\t\t\tcase 'enabled':\n\t\t\t\tauto(false);\n\t\t\t\tenable({}, darkReaderDynamicThemeFixes);\n\t\t\t\tbreak;\n\t\t\tcase 'auto':\n\t\t\tdefault:\n\t\t\t\tauto({}, darkReaderDynamicThemeFixes);\n\t\t\t\tbreak;\n\t\t}\n\t}, [darkReaderState]);\n\n\tconst aggregatedExtensions = useCallback<NonNullable<UIThemeProviderProps['extension']>>(\n\t\t(theme) =>\n\t\t\treduce(\n\t\t\t\textensions,\n\t\t\t\t(themeAccumulator, themeExtensionFn) => {\n\t\t\t\t\tif (themeExtensionFn) {\n\t\t\t\t\t\treturn themeExtensionFn(themeAccumulator);\n\t\t\t\t\t}\n\t\t\t\t\treturn themeAccumulator;\n\t\t\t\t},\n\t\t\t\ttheme\n\t\t\t),\n\t\t[extensions]\n\t);\n\n\tconst addExtension = useCallback<ThemeCallbacks['addExtension']>((newExtension, id) => {\n\t\tsetExtensions((ext) => ({ ...ext, [id]: newExtension }));\n\t}, []);\n\n\tconst baseFontSize = useMemo<GlobalStyledProps['baseFontSize']>(() => {\n\t\tconst savedScalingValueSetting = localStorageSettings['settings.appearance_setting.scaling'];\n\t\tif (savedScalingValueSetting !== undefined) {\n\t\t\treturn savedScalingValueSetting;\n\t\t}\n\t\treturn getAutoScalingFontSize();\n\t}, [localStorageSettings]);\n\n\tconst themeCallbacksContextValue = useMemo<ThemeCallbacks>(\n\t\t() => ({ addExtension, setDarkReaderState }),\n\t\t[addExtension]\n\t);\n\n\treturn (\n\t\t<UIThemeProvider extension={aggregatedExtensions}>\n\t\t\t<ThemeCallbacksContext.Provider value={themeCallbacksContextValue}>\n\t\t\t\t<GlobalStyle baseFontSize={baseFontSize} />\n\t\t\t\t{children}\n\t\t\t</ThemeCallbacksContext.Provider>\n\t\t</UIThemeProvider>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useEffect, useMemo } from 'react';\n\nimport { size } from 'lodash';\n\nimport { LOCAL_STORAGE_LAST_PRIMARY_KEY } from '../constants';\nimport { useDarkMode } from '../dark-mode/use-dark-mode';\nimport { useLocalStorage } from '../shell/hooks/useLocalStorage';\nimport { useLoginConfigStore } from '../store/login/store';\n\nexport function useGetPrimaryColor(): string | undefined {\n\tconst [localStorageLastPrimary, setLocalStorageLastPrimary] = useLocalStorage<\n\t\tPartial<Record<'dark' | 'light', string>> | undefined\n\t>(LOCAL_STORAGE_LAST_PRIMARY_KEY, undefined);\n\tconst { carbonioWebUiPrimaryColor, carbonioWebUiDarkPrimaryColor, loaded } =\n\t\tuseLoginConfigStore();\n\tconst { darkModeEnabled, darkReaderStatus } = useDarkMode();\n\n\tconst primaryColor = useMemo(() => {\n\t\tif (\n\t\t\tdarkReaderStatus !== undefined &&\n\t\t\t(carbonioWebUiPrimaryColor || carbonioWebUiDarkPrimaryColor)\n\t\t) {\n\t\t\tif (darkModeEnabled) {\n\t\t\t\treturn carbonioWebUiDarkPrimaryColor || carbonioWebUiPrimaryColor;\n\t\t\t}\n\t\t\treturn carbonioWebUiPrimaryColor || carbonioWebUiDarkPrimaryColor;\n\t\t}\n\t\tif (localStorageLastPrimary && size(localStorageLastPrimary) > 0 && !loaded) {\n\t\t\treturn (\n\t\t\t\t(darkModeEnabled && (localStorageLastPrimary.dark || localStorageLastPrimary.light)) ||\n\t\t\t\tlocalStorageLastPrimary.light ||\n\t\t\t\tlocalStorageLastPrimary.dark\n\t\t\t);\n\t\t}\n\t\treturn undefined;\n\t}, [\n\t\tcarbonioWebUiDarkPrimaryColor,\n\t\tcarbonioWebUiPrimaryColor,\n\t\tdarkModeEnabled,\n\t\tdarkReaderStatus,\n\t\tloaded,\n\t\tlocalStorageLastPrimary\n\t]);\n\n\tuseEffect(() => {\n\t\tif (darkReaderStatus !== undefined) {\n\t\t\tsetLocalStorageLastPrimary((prevState) => ({\n\t\t\t\t...prevState,\n\t\t\t\t[darkModeEnabled ? 'dark' : 'light']: primaryColor\n\t\t\t}));\n\t\t}\n\t}, [darkModeEnabled, darkReaderStatus, primaryColor, setLocalStorageLastPrimary]);\n\n\treturn primaryColor;\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { FC, ReactElement } from 'react';\nimport React, { useEffect } from 'react';\n\nexport const NotificationPermissionChecker: FC = (): ReactElement => {\n\tuseEffect(() => {\n\t\tif (!('Notification' in window)) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('This browser does not support desktop notifications');\n\t\t} else {\n\t\t\tNotification.requestPermission();\n\t\t}\n\t}, []);\n\n\treturn <></>;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { Container } from '@zextras/carbonio-design-system';\nimport { map, find } from 'lodash';\nimport { Redirect, Route, Switch, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { IS_FOCUS_MODE } from '../constants';\nimport { useAppList, useAppStore, useRoutes } from '../store/app';\n\nconst _BoardsRouterContainer = styled(Container)`\n\tflex-grow: 1;\n\tflex-basis: 0;\n\tmin-width: 0.0625rem;\n\tmax-height: ${IS_FOCUS_MODE ? '100vh' : 'calc(100vh - 3.75rem)'};\n\toverflow-y: auto;\n`;\n\nconst FirstAppRedirect: FC = () => {\n\tconst apps = useAppList();\n\tconst routes = useRoutes();\n\tconst location = useLocation();\n\tconst mainRoute = useMemo(\n\t\t() => find(routes, (r) => apps[0]?.name === r.app)?.route,\n\t\t[apps, routes]\n\t);\n\treturn mainRoute && location?.pathname === '/' ? (\n\t\t<Redirect exact strict from=\"/\" to={`/${mainRoute}`} />\n\t) : null;\n};\n\nconst AppViewContainer: FC = () => {\n\tconst appViews = useAppStore((s) => s.views.appView);\n\tconst routes = useMemo(\n\t\t() => [\n\t\t\t...map(appViews, (view) => (\n\t\t\t\t<Route key={view.id} path={`/${view.route}`}>\n\t\t\t\t\t<AppContextProvider key={view.app} pkg={view.app}>\n\t\t\t\t\t\t<view.component />\n\t\t\t\t\t</AppContextProvider>\n\t\t\t\t</Route>\n\t\t\t))\n\t\t],\n\t\t[appViews]\n\t);\n\n\treturn (\n\t\t<_BoardsRouterContainer>\n\t\t\t<Container mainAlignment=\"flex-start\">\n\t\t\t\t<Switch>{routes}</Switch>\n\t\t\t\t<FirstAppRedirect />\n\t\t\t</Container>\n\t\t</_BoardsRouterContainer>\n\t);\n};\n\nexport default AppViewContainer;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useEffect, useMemo } from 'react';\n\nimport { createMemoryHistory } from 'history';\nimport { find, startsWith } from 'lodash';\nimport { Route, Router, useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport AppContextProvider from '../../boot/app/app-context-provider';\nimport { useAppStore } from '../../store/app';\nimport { BoardProvider, updateBoard, useBoardStore } from '../../store/boards';\nimport type { Board } from '../../types/boards';\nimport { Modal, Typography } from '@mui/material';\n\nconst BoardContainer = styled.div<{ show: boolean }>`\n\tdisplay: ${(props): string => (props.show ? 'block' : 'none')};\n\theight: 100%;\n\twidth: 100%;\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\twidth: 0.5rem;\n\t}\n\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t}\n\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${({ theme }): string => theme.palette.gray3.regular};\n\t\tborder-radius: 0.25rem;\n\t}\n`;\n\nexport const AppBoard = ({ board }: { board: Board }): React.JSX.Element => {\n\tconst current = useBoardStore((s) => s.current);\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst history = useMemo(() => createMemoryHistory({ initialEntries: [board.url] }), []);\n\tconst boardViews = useAppStore((s) => s.views.board);\n\tconst windowHistory = useHistory();\n\tconst route = useMemo(() => {\n\t\tconst view = find(boardViews, (v) => v.id === board.url || startsWith(board.url, v.route));\n\t\tif (view)\n\t\t\treturn (\n\t\t\t\t<Route key={view.id} path={view.route}>\n\t\t\t\t\t<AppContextProvider key={view.id} pkg={view.app}>\n\t\t\t\t\t\t<BoardProvider id={board.id}>\n\t\t\t\t\t\t\t<view.component windowHistory={windowHistory} />\n\t\t\t\t\t\t</BoardProvider>\n\t\t\t\t\t</AppContextProvider>\n\t\t\t\t</Route>\n\t\t\t);\n\t\treturn null;\n\t}, [board.id, board.url, boardViews, windowHistory]);\n\tuseEffect(() => {\n\t\tconst unlisten = history.listen(({ location }) => {\n\t\t\tif (`${location.pathname}${location.search}${location.hash}` !== board.url) {\n\t\t\t\tupdateBoard(board.id, { url: `${location.pathname}${location.search}${location.hash}` });\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tunlisten();\n\t\t};\n\t}, [board.url, board.id, history]);\n\n\tuseEffect(() => {\n\t\tconst l = history.location;\n\t\tif (`${l.pathname}${l.search}${l.hash}` !== board.url) {\n\t\t\thistory.push(board.url);\n\t\t}\n\t}, [board.url, history]);\n\n\treturn (\n\t\t<BoardContainer show={current === board.id}>\n\t\t\t<Router history={history}>{route}</Router>\n\t\t</BoardContainer>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport type { IconProps, RowProps } from '@zextras/carbonio-design-system';\nimport { Container, Icon, IconButton, Row, Text, Tooltip } from '@zextras/carbonio-design-system';\nimport type { SimpleInterpolation } from 'styled-components';\nimport styled, { css } from 'styled-components';\n\nimport { closeBoard, setCurrentBoard, useBoardStore } from '../../store/boards';\nimport { getT } from '../../store/i18n/hooks';\nimport './board-tab.css';\n\nconst TabContainer = styled(Row)<RowProps & { active: boolean }>`\n\tcontainer-type: inline-size;\n\tcontainer-name: tab;\n\tmax-width: calc(3rem + 15ch);\n\tmin-width: 1rem;\n\tflex-grow: 1;\n\tflex-basis: 0;\n\tcursor: pointer;\n\theight: 1.75rem;\n\tuser-select: none;\n\n\tgap: 0.25rem;\n\tborder-radius: 0.25rem;\n\tmargin-left: 0.25rem;\n\tmargin-right: 0.25rem;\n\toverflow: hidden;\n\t${({ active }): SimpleInterpolation =>\n\t\tactive &&\n\t\tcss`\n\t\t\tmin-width: calc(3rem + 15ch);\n\t\t`}\n`;\n\nconst CloseContainer = styled(Container)`\n\tmargin-left: auto;\n`;\n\nconst TabIcon = styled(Icon)<{ active: boolean }>`\n\tmin-width: 1.5rem;\n\tcolor: ${({ active }): string => (active ? '#2196F3' : 'black')};\n`;\n\nconst CustomText = styled(Text)<{ overflowing: boolean }>`\n\t${({ overflowing }): SimpleInterpolation =>\n\t\toverflowing &&\n\t\tcss`\n\t\t\tmask-image: linear-gradient(90deg, #000 60%, transparent);\n\t\t`}\n\ttext-overflow: unset;\n`;\n\nconst VerticalDivider = styled(Container)`\n\twidth: 0.0625rem;\n\tmin-width: 0.0625rem;\n\theight: 2.25rem;\n\tbackground: ${({ theme }): string => theme.palette.gray3.regular};\n`;\n\nexport const AppBoardTab: FC<{ id: string; icon: string; title: string; firstTab: boolean }> = ({\n\tid,\n\ticon,\n\ttitle,\n\tfirstTab\n}) => {\n\tconst current = useBoardStore((s) => s.current);\n\tconst t = getT();\n\tconst onClick = useCallback(\n\t\t(event: React.SyntheticEvent<HTMLDivElement>) => {\n\t\t\tif (!event.defaultPrevented) {\n\t\t\t\tsetCurrentBoard(id);\n\t\t\t}\n\t\t},\n\t\t[id]\n\t);\n\tconst onRemove = useCallback(\n\t\t(ev: React.SyntheticEvent | Event) => {\n\t\t\tif (!ev.defaultPrevented) {\n\t\t\t\tev.stopPropagation();\n\t\t\t\tcloseBoard(id);\n\t\t\t}\n\t\t},\n\t\t[id]\n\t);\n\n\tconst textRef = useRef<HTMLDivElement>(null);\n\tconst [textOverflowing, setTextOverflowing] = useState(false);\n\tconst resizeObserverRef = useRef<ResizeObserver>();\n\tuseEffect(() => {\n\t\tif (textRef.current && !resizeObserverRef.current) {\n\t\t\tresizeObserverRef.current = new ResizeObserver(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tif (textRef.current) {\n\t\t\t\t\t\tsetTextOverflowing(textRef.current.offsetWidth < textRef.current.scrollWidth);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tresizeObserverRef.current.observe(textRef.current);\n\t\t}\n\n\t\treturn (): void => {\n\t\t\tresizeObserverRef.current?.disconnect();\n\t\t};\n\t}, [textRef]);\n\n\treturn (\n\t\t<>\n\t\t\t{!firstTab && <VerticalDivider />}\n\t\t\t<TabContainer\n\t\t\t\twrap={'nowrap'}\n\t\t\t\torientation=\"row\"\n\t\t\t\tmainAlignment={'flex-start'}\n\t\t\t\tonClick={onClick}\n\t\t\t\tdata-testid={`board-tab-${id}`}\n\t\t\t\tpadding={{ horizontal: 'extrasmall' }}\n\t\t\t\tactive={current === id}\n\t\t\t>\n\t\t\t\t<TabIcon active={current === id} icon={icon} size=\"large\" />\n\t\t\t\t<Tooltip label={title} placement=\"top\" maxWidth=\"700px\" triggerRef={textRef}>\n\t\t\t\t\t<CustomText\n\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\tweight=\"regular\"\n\t\t\t\t\t\tcolor={current === id ? '#2196F3' : 'secondary'}\n\t\t\t\t\t\toverflowing={textOverflowing}\n\t\t\t\t\t\tclassName=\"tab-text\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</CustomText>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<CloseContainer orientation={'row'} width={'fit'}>\n\t\t\t\t\t<Tooltip label={t('board.close_tab', 'Close Tab')} placement=\"top\">\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName=\"tab-close-icon-button\"\n\t\t\t\t\t\t\ticonColor=\"secondary\"\n\t\t\t\t\t\t\ticon=\"Close\"\n\t\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\t\tstyle={{ padding: '0.125rem', width: '1.5rem', height: '1.5rem' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</CloseContainer>\n\t\t\t</TabContainer>\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react';\n\nimport { Row } from '@zextras/carbonio-design-system';\nimport { isEmpty, map } from 'lodash';\nimport styled from 'styled-components';\n\nimport { AppBoardTab } from './board-tab';\nimport { useBoardStore } from '../../store/boards';\n\nconst CustomRow = styled(Row)`\n\toverflow-x: auto;\n\t&::-webkit-scrollbar {\n\t\theight: 0.25rem;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: #eaf1fb;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: #c2e7ff;\n\t}\n`;\n\nexport const TabsList = (): React.JSX.Element => {\n\tconst { boards, orderedBoards } = useBoardStore();\n\treturn (\n\t\t<CustomRow wrap=\"nowrap\" height=\"100%\" mainAlignment=\"flex-start\" takeAvailableSpace>\n\t\t\t{boards &&\n\t\t\t\t!isEmpty(orderedBoards) &&\n\t\t\t\tmap(orderedBoards, (boardId, idx) => (\n\t\t\t\t\t<AppBoardTab\n\t\t\t\t\t\tkey={boardId}\n\t\t\t\t\t\tid={boardId}\n\t\t\t\t\t\ttitle={boards[boardId].title}\n\t\t\t\t\t\ticon={boards[boardId].icon}\n\t\t\t\t\t\tfirstTab={idx === 0}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t</CustomRow>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { CSSProperties } from 'react';\nimport type React from 'react';\nimport { useCallback, useEffect, useRef } from 'react';\n\nimport { find, forEach } from 'lodash';\n\nimport { useLocalStorage } from './useLocalStorage';\nimport type { SizeAndPosition } from '../../utils/utils';\nimport {\n\tcreateExportForTestOnly,\n\tsetElementSizeAndPosition,\n\tsetGlobalCursor\n} from '../../utils/utils';\n\n/**\n * Define the border following the cardinal points (north, south, west, east).\n * Similar to the definition of the cursor for the pointer\n */\nexport type Border = 'n' | 's' | 'e' | 'w' | 'ne' | 'sw' | 'nw' | 'se';\n\ntype UseResizableReturnType = React.MouseEventHandler;\n\ntype ResizeOptions = {\n\tlocalStorageKey?: string;\n\tkeepSyncedWithStorage?: boolean;\n};\n\nexport const BORDERS: Border[] = ['n', 's', 'e', 'w', 'ne', 'se', 'sw', 'nw'];\n\nexport function getCursorFromBorder(border: Border): NonNullable<CSSProperties['cursor']> {\n\tconst direction = find(\n\t\t[\n\t\t\t['n', 's'],\n\t\t\t['e', 'w'],\n\t\t\t['ne', 'sw'],\n\t\t\t['nw', 'se']\n\t\t],\n\t\t(borders) => borders.includes(border)\n\t)?.join('');\n\treturn direction?.concat('-resize') ?? '';\n}\n\nfunction calcNewSizeAndPosition(\n\tborder: Border,\n\tfrom: { clientTop: number; clientLeft: number } & SizeAndPosition,\n\tmouseEvent: MouseEvent\n): SizeAndPosition {\n\tconst newSizeAndPosition = {\n\t\ttop: from.top,\n\t\tleft: from.left,\n\t\theight: from.height,\n\t\twidth: from.width\n\t};\n\tif (border.includes('n')) {\n\t\tconst heightDifference = from.clientTop - mouseEvent.clientY;\n\t\tnewSizeAndPosition.height = from.height + heightDifference;\n\t\tnewSizeAndPosition.top = from.top - heightDifference;\n\t}\n\tif (border.includes('s')) {\n\t\tnewSizeAndPosition.height = mouseEvent.clientY - from.clientTop;\n\t}\n\tif (border.includes('e')) {\n\t\tnewSizeAndPosition.width = mouseEvent.clientX - from.clientLeft;\n\t}\n\tif (border.includes('w')) {\n\t\tconst widthDifference = from.clientLeft - mouseEvent.clientX;\n\t\tnewSizeAndPosition.width = from.width + widthDifference;\n\t\tnewSizeAndPosition.left = from.left - widthDifference;\n\t}\n\treturn newSizeAndPosition;\n}\n\nexport const useResize = (\n\telementToResizeRef: React.RefObject<HTMLElement>,\n\tborder: Border,\n\toptions?: ResizeOptions\n): UseResizableReturnType => {\n\tconst initialSizeAndPositionRef = useRef<Parameters<typeof calcNewSizeAndPosition>[1]>();\n\tconst [lastSavedSizeAndPosition, setLastSavedSizeAndPosition] = useLocalStorage<\n\t\tPartial<SizeAndPosition>\n\t>(\n\t\toptions?.localStorageKey ?? 'use-resize-data',\n\t\t{},\n\t\t{ keepSyncedWithStorage: options?.keepSyncedWithStorage }\n\t);\n\tconst lastSizeAndPositionRef = useRef<Partial<SizeAndPosition>>(lastSavedSizeAndPosition);\n\n\tuseEffect(() => {\n\t\tlastSizeAndPositionRef.current = { ...lastSavedSizeAndPosition };\n\t}, [lastSavedSizeAndPosition]);\n\n\tconst resizeElement = useCallback(\n\t\t({ width, height, top, left }: SizeAndPosition) => {\n\t\t\tif (elementToResizeRef.current) {\n\t\t\t\tconst elementToResize = elementToResizeRef.current;\n\t\t\t\tconst sizeAndPositionToApply: Partial<SizeAndPosition> = lastSizeAndPositionRef.current;\n\t\t\t\tconst computedStyle = getComputedStyle(elementToResizeRef.current);\n\t\t\t\tconst minHeight = parseFloat(computedStyle.minHeight) || 0;\n\t\t\t\tconst minWidth = parseFloat(computedStyle.minWidth) || 0;\n\t\t\t\tif (top >= 0 && height >= minHeight) {\n\t\t\t\t\tsizeAndPositionToApply.height = height;\n\t\t\t\t\tsizeAndPositionToApply.top = top;\n\t\t\t\t}\n\t\t\t\tif (left >= 0 && width >= minWidth) {\n\t\t\t\t\tsizeAndPositionToApply.width = width;\n\t\t\t\t\tsizeAndPositionToApply.left = left;\n\t\t\t\t}\n\t\t\t\tforEach(sizeAndPositionToApply, (value, key) => {\n\t\t\t\t\tsetElementSizeAndPosition(elementToResize, key as keyof SizeAndPosition, value);\n\t\t\t\t});\n\t\t\t\t// reset bottom in favor of top\n\t\t\t\telementToResize.style.bottom = '';\n\t\t\t\t// reset right in favor of left\n\t\t\t\telementToResize.style.right = '';\n\t\t\t\tlastSizeAndPositionRef.current = sizeAndPositionToApply;\n\t\t\t}\n\t\t},\n\t\t[elementToResizeRef]\n\t);\n\n\tconst onMouseMove = useCallback(\n\t\t(mouseMoveEvent: MouseEvent) => {\n\t\t\tif (initialSizeAndPositionRef.current) {\n\t\t\t\tconst newSizeAndPosition = calcNewSizeAndPosition(\n\t\t\t\t\tborder,\n\t\t\t\t\tinitialSizeAndPositionRef.current,\n\t\t\t\t\tmouseMoveEvent\n\t\t\t\t);\n\t\t\t\tresizeElement(newSizeAndPosition);\n\t\t\t}\n\t\t},\n\t\t[border, resizeElement]\n\t);\n\n\tconst onMouseUp = useCallback(() => {\n\t\tsetGlobalCursor(undefined);\n\t\tdocument.body.removeEventListener('mousemove', onMouseMove);\n\t\tdocument.body.removeEventListener('mouseup', onMouseUp);\n\t\tif (options?.localStorageKey) {\n\t\t\tsetLastSavedSizeAndPosition(lastSizeAndPositionRef.current);\n\t\t}\n\t}, [onMouseMove, options?.localStorageKey, setLastSavedSizeAndPosition]);\n\n\treturn useCallback(\n\t\t(mouseDownEvent: React.MouseEvent | MouseEvent) => {\n\t\t\tif (!mouseDownEvent.defaultPrevented && elementToResizeRef.current) {\n\t\t\t\tmouseDownEvent.preventDefault();\n\t\t\t\tconst clientRect = elementToResizeRef.current.getBoundingClientRect();\n\t\t\t\tinitialSizeAndPositionRef.current = {\n\t\t\t\t\twidth: elementToResizeRef.current.offsetWidth,\n\t\t\t\t\theight: elementToResizeRef.current.offsetHeight,\n\t\t\t\t\ttop: elementToResizeRef.current.offsetTop,\n\t\t\t\t\tleft: elementToResizeRef.current.offsetLeft,\n\t\t\t\t\tclientTop: clientRect.top,\n\t\t\t\t\tclientLeft: clientRect.left\n\t\t\t\t};\n\t\t\t\tsetGlobalCursor(getCursorFromBorder(border));\n\t\t\t\tdocument.body.addEventListener('mousemove', onMouseMove);\n\t\t\t\tdocument.body.addEventListener('mouseup', onMouseUp);\n\t\t\t}\n\t\t},\n\t\t[border, elementToResizeRef, onMouseMove, onMouseUp]\n\t);\n};\n\nexport const exportForTest = createExportForTestOnly({ calcNewSizeAndPosition });\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { CSSProperties } from 'react';\nimport React, { useMemo, useRef } from 'react';\n\nimport type { ContainerProps } from '@zextras/carbonio-design-system';\nimport { Container } from '@zextras/carbonio-design-system';\nimport type { SimpleInterpolation } from 'styled-components';\nimport styled, { css } from 'styled-components';\n\nimport type { Border } from '../hooks/useResize';\nimport { BORDERS, getCursorFromBorder, useResize } from '../hooks/useResize';\n\ninterface ResizableBorderProps {\n\tborder: Border;\n\telementToResize: React.RefObject<HTMLElement>;\n\tlocalStorageKey?: string;\n\tkeepSyncedWithStorage?: boolean;\n}\n\ninterface ResizableContainerProps extends ContainerProps {\n\telementToResize: React.RefObject<HTMLElement>;\n\tlocalStorageKey?: string;\n\tkeepSyncedWithStorage?: boolean;\n\tdisabled?: boolean;\n\tminSize?: { width: number; height: number };\n}\n\ninterface BorderWithResizeProps {\n\t$cursor: CSSProperties['cursor'];\n\t$width: string;\n\t$height: string;\n\t$position: {\n\t\ttop?: number;\n\t\tbottom?: number;\n\t\tleft?: number;\n\t\tright?: number;\n\t};\n\t$translateTransform?: { x?: string; y?: string };\n}\n\nconst MainContainer = styled(Container)`\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n`;\n\nconst BorderWithResize = styled.div<\n\tBorderWithResizeProps & {\n\t\theight?: never;\n\t\twidth?: never;\n\t}\n>`\n\tposition: absolute;\n\tz-index: 2;\n\tcursor: ${({ $cursor }): CSSProperties['cursor'] => $cursor};\n\twidth: ${({ $width }): string => $width};\n\theight: ${({ $height }): string => $height};\n\t${({ $position }): SimpleInterpolation => $position};\n\t${({ $translateTransform }): SimpleInterpolation =>\n\t\t($translateTransform?.x || $translateTransform?.y) &&\n\t\tcss`\n\t\t\ttransform: translate(${$translateTransform?.x ?? 0}, ${$translateTransform?.y ?? 0});\n\t\t`}\n`;\n\nconst ResizableBorder = ({\n\tborder,\n\telementToResize,\n\tlocalStorageKey,\n\tkeepSyncedWithStorage\n}: ResizableBorderProps): React.JSX.Element => {\n\tconst borderRef = useRef<HTMLDivElement>(null);\n\tconst resizeHandler = useResize(elementToResize, border, {\n\t\tlocalStorageKey,\n\t\tkeepSyncedWithStorage\n\t});\n\n\tconst sizes = useMemo<Pick<BorderWithResizeProps, '$width' | '$height'>>(() => {\n\t\tswitch (border) {\n\t\t\tcase 'n':\n\t\t\tcase 's':\n\t\t\t\treturn {\n\t\t\t\t\t$width: '100%',\n\t\t\t\t\t$height: '0.25rem'\n\t\t\t\t};\n\t\t\tcase 'e':\n\t\t\tcase 'w':\n\t\t\t\treturn {\n\t\t\t\t\t$width: '0.25rem',\n\t\t\t\t\t$height: '100%'\n\t\t\t\t};\n\t\t\tcase 'ne':\n\t\t\tcase 'nw':\n\t\t\tcase 'se':\n\t\t\tcase 'sw':\n\t\t\tdefault:\n\t\t\t\treturn {\n\t\t\t\t\t$width: '0.25rem',\n\t\t\t\t\t$height: '0.25rem'\n\t\t\t\t};\n\t\t}\n\t}, [border]);\n\n\tconst positions = useMemo<\n\t\tPick<BorderWithResizeProps, '$position' | '$translateTransform'>\n\t>(() => {\n\t\tconst $position: BorderWithResizeProps['$position'] = {};\n\t\tconst $translateTransform: BorderWithResizeProps['$translateTransform'] = {};\n\t\tif (border.includes('n')) {\n\t\t\t$position.top = 0;\n\t\t\t$translateTransform.y = '-50%';\n\t\t}\n\t\tif (border.includes('s')) {\n\t\t\t$position.bottom = 0;\n\t\t\t$translateTransform.y = '50%';\n\t\t}\n\t\tif (border.includes('e')) {\n\t\t\t$position.right = 0;\n\t\t\t$translateTransform.x = '50%';\n\t\t}\n\t\tif (border.includes('w')) {\n\t\t\t$position.left = 0;\n\t\t\t$translateTransform.x = '-50%';\n\t\t}\n\t\treturn { $position, $translateTransform };\n\t}, [border]);\n\n\treturn (\n\t\t<BorderWithResize\n\t\t\tref={borderRef}\n\t\t\t{...sizes}\n\t\t\t{...positions}\n\t\t\t$cursor={getCursorFromBorder(border)}\n\t\t\tonMouseDown={resizeHandler}\n\t\t\tdata-testid={`resizable-border-${border}`}\n\t\t/>\n\t);\n};\n\nexport const ResizableContainer = ({\n\telementToResize,\n\tchildren,\n\tlocalStorageKey,\n\tdisabled = false,\n\tkeepSyncedWithStorage,\n\t...rest\n}: ResizableContainerProps): React.JSX.Element => {\n\tconst borders = useMemo(\n\t\t() =>\n\t\t\tBORDERS.map((border) => (\n\t\t\t\t<ResizableBorder\n\t\t\t\t\tkey={`resizable-border-${border}`}\n\t\t\t\t\tborder={border}\n\t\t\t\t\telementToResize={elementToResize}\n\t\t\t\t\tlocalStorageKey={localStorageKey}\n\t\t\t\t\tkeepSyncedWithStorage={keepSyncedWithStorage}\n\t\t\t\t/>\n\t\t\t)),\n\t\t[elementToResize, keepSyncedWithStorage, localStorageKey]\n\t);\n\n\treturn (\n\t\t<MainContainer {...rest}>\n\t\t\t{!disabled && borders}\n\t\t\t{children}\n\t\t</MainContainer>\n\t);\n};\n","import { useMediaQuery } from 'react-responsive';\nimport React from 'react';\n\nconst VeryLarge = ({ children }: { children: JSX.Element | JSX.Element[] }): JSX.Element | null => {\n\tconst isVeryLarge = useMediaQuery({ minWidth: 1920, minHeight: 720 });\n\treturn isVeryLarge ? <>{children}</> : null;\n};\n\nexport default VeryLarge;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { CSSProperties } from 'react';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport type { DropdownItem, IconButtonProps } from '@zextras/carbonio-design-system';\nimport {\n\tContainer,\n\tDivider,\n\tDropdown,\n\tIcon,\n\tIconButton,\n\tPadding,\n\tRow,\n\tText,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport { debounce, isEmpty, map, noop, size } from 'lodash';\nimport type { SimpleInterpolation } from 'styled-components';\nimport styled, { css } from 'styled-components';\n\nimport { AppBoard } from './board';\nimport { TabsList } from './board-tab-list';\nimport { ResizableContainer } from './resizable-container';\nimport {\n\tBOARD_CONTAINER_ZINDEX,\n\tBOARD_HEADER_HEIGHT,\n\tBOARD_MIN_VISIBILITY,\n\tBOARD_TAB_WIDTH,\n\tHEADER_BAR_HEIGHT,\n\tLOCAL_STORAGE_BOARD_SIZE,\n\tPRIMARY_BAR_WIDTH\n} from '../../constants';\nimport { getApp } from '../../store/app';\nimport {\n\tcloseAllBoards,\n\tcloseBoard,\n\texpandBoards,\n\tminimizeBoards,\n\tonGoToPanel,\n\treduceBoards,\n\tsetCurrentBoard,\n\tuseBoardStore\n} from '../../store/boards';\nimport { getT } from '../../store/i18n/hooks';\nimport type { SizeAndPosition } from '../../utils/utils';\nimport { setElementSizeAndPosition } from '../../utils/utils';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\nimport { useMove } from '../hooks/useMove';\nimport Desktop from '../../sruvi/Desktop';\nimport Other from '../../sruvi/Mobile';\nimport Mobile from '../../sruvi/Mobile';\nimport VeryLarge from '../../sruvi/VeryLarge';\n\n//////////////Mobile Code////////////////\n\nexport const BOARD_DEFAULT_POSITION_MOBILE: Pick<\n\tCSSProperties,\n\t'top' | 'left' | 'right' | 'bottom'\n> = {\n\tright: '0',\n\tbottom: '0'\n};\nconst BoardContainerCompMobile = styled.div<{ minimized: boolean }>`\n\tposition: fixed;\n\twidth: 100vw;\n\theight: 100vh;\n\ttop: 0;\n\tleft: 0;\n\tbackground-color: rgba(0, 0, 0, 0);\n\tpointer-events: none;\n\tz-index: ${BOARD_CONTAINER_ZINDEX};\n\n\t${({ minimized }): SimpleInterpolation =>\n\t\tminimized &&\n\t\tcss`\n\t\t\tdisplay: none;\n\t\t`}\n`;\n\nconst BoardMobile = styled(Container)<{ expanded: boolean }>`\n\tz-index: 5;\n\tposition: absolute;\n\t${BOARD_DEFAULT_POSITION_MOBILE};\n\n\t${({ width }): SimpleInterpolation =>\n\t\t!width &&\n\t\tcss`\n\t\t\t/* default width and aspect ratio */\n\n\t\t\twidth: 100vw;\n\t\t`}\n\n\t${({ height }): SimpleInterpolation =>\n\t\t!height &&\n\t\tcss`\n\t\t\theight: 100vh;\n\t\t`}\n\n\t\n\tbox-shadow: 0 0.125rem 0.3125rem 0 rgba(125, 125, 125, 0.5);\n\tpointer-events: auto;\n\tmax-height: 100%;\n\tmax-width: 100%;\n\t${({ expanded }): SimpleInterpolation =>\n\t\texpanded &&\n\t\tcss`\n\t\t\theight: 100vh;\n\t\t\twidth: calc(100% - 3rem) !important;\n\n\t\t\tmin-height: 100vh;\n\t\t`};\n`;\n\n//////////////Desktop Code////////////////\n\nexport const BOARD_DEFAULT_POSITION: Pick<CSSProperties, 'top' | 'left' | 'right' | 'bottom'> = {\n\tright: '0',\n\tbottom: '0'\n};\n\nconst BoardContainerComp = styled.div<{ expanded: boolean; minimized: boolean }>`\n\tposition: fixed;\n\twidth: calc(100vw - 200px);\n\theight: calc(100vh - 80px);\n\ttop: 80px;\n\tleft: 100px;\n\tright: 100px;\n\n\tbackground-color: transparent;\n\tpointer-events: none;\n\tz-index: ${BOARD_CONTAINER_ZINDEX};\n\t${({ expanded }): SimpleInterpolation =>\n\t\texpanded &&\n\t\tcss`\n\t\t\tbackground-color: transparent;\n\t\t\tpointer-events: auto;\n\t\t`}\n\t${({ minimized }): SimpleInterpolation =>\n\t\tminimized &&\n\t\tcss`\n\t\t\tdisplay: none;\n\t\t`}\n`;\n\nconst OverflowContainer = styled(Container)`\n\toverflow: auto;\n`;\n\nconst Board = styled(Container)<{ expanded: boolean }>`\n\tz-index: 5;\n\tposition: absolute;\n\t${BOARD_DEFAULT_POSITION};\n\n\t${({ width }): SimpleInterpolation =>\n\t\t!width &&\n\t\tcss`\n\t\t\t/* default width and aspect ratio */\n\t\t\taspect-ratio: 4 / 3;\n\t\t\twidth: 600px;\n\t\t`}\n\n\t${({ height }): SimpleInterpolation =>\n\t\t!height &&\n\t\tcss`\n\t\t\t/* default height */\n\t\t\theight: 600px;\n\t\t\t/* on higher screen, reduce the default height */\n\t\t\t@media (min-height: 800px) {\n\t\t\t\theight: 60vh;\n\t\t\t}\n\t\t\t@media (min-height: 1000px) {\n\t\t\t\theight: 50vh;\n\t\t\t}\n\t\t`}\n\n\tmin-height: calc(${BOARD_HEADER_HEIGHT} * 3);\n\tmin-width: calc(${BOARD_TAB_WIDTH} * 2);\n\tbox-shadow: 0 0.125rem 0.3125rem 0 rgba(125, 125, 125, 0.5);\n\tpointer-events: auto;\n\tborder-top-left-radius: 16px;\n\tborder-top-right-radius: 16px;\n\tmax-height: 100%;\n\tmax-width: 100%;\n\t${({ expanded }): SimpleInterpolation =>\n\t\texpanded &&\n\t\tcss`\n\t\t\theight: calc(100% - 1.5rem) !important;\n\t\t\twidth: calc(100% - 3rem) !important;\n\t\t\ttop: 1.5rem !important;\n\t\t\tleft: 1.5rem !important;\n\t\t\tmin-height: auto;\n\t\t`};\n`;\n\nconst BoardHeader = styled(Row)`\n\tposition: relative;\n\tpadding: 0.5rem;\n`;\n\nconst BoardDetailContainer = styled(Row)`\n\tmin-height: 0;\n`;\nconst BackButton = styled(IconButton)`\n\tbackground-color: #2196f3;\n\tcolor: #ffffff;\n\t:hover {\n\t\tbackground-color: #ffffff;\n\t\tcolor: #2196f3;\n\t}\n`;\nconst Actions = styled(Row)``;\n\ninterface ListItemContentProps {\n\ticon?: string;\n\tlabel: string;\n\tselected?: boolean;\n\tapp?: string;\n\tboardId: string;\n}\n\nfunction ListItemContent({\n\ticon,\n\tlabel,\n\tselected,\n\tapp,\n\tboardId\n}: ListItemContentProps): React.JSX.Element {\n\tconst t = getT();\n\tconst onClose = useCallback<IconButtonProps['onClick']>(\n\t\t(ev) => {\n\t\t\tev.stopPropagation();\n\t\t\tcloseBoard(boardId);\n\t\t},\n\t\t[boardId]\n\t);\n\treturn (\n\t\t<Container orientation=\"horizontal\" mainAlignment=\"flex-start\" gap={'0.5rem'}>\n\t\t\t{icon && <Icon icon={icon} size={'large'} color={'text'} style={{ pointerEvents: 'none' }} />}\n\t\t\t<OverflowContainer crossAlignment={'flex-start'}>\n\t\t\t\t<Text size={'medium'} weight={selected ? 'bold' : 'regular'} color={'gray0'}>\n\t\t\t\t\t{label}\n\t\t\t\t</Text>\n\t\t\t\t<Text size={'small'} weight={selected ? 'bold' : 'regular'} color={'secondary'}>\n\t\t\t\t\t{app &&\n\t\t\t\t\t\tt('board.from_app', 'From {{app}}', {\n\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t})}\n\t\t\t\t</Text>\n\t\t\t</OverflowContainer>\n\t\t\t<IconButton icon={'CloseOutline'} size={'large'} onClick={onClose} />\n\t\t</Container>\n\t);\n}\n\nfunction calcPositionToRemainVisible(\n\tlastSavedPosition: number,\n\tcontainerSize: number,\n\tminVisibility: number\n): number {\n\tconst limit = containerSize - minVisibility;\n\tif (lastSavedPosition > limit) {\n\t\treturn limit > 0 ? limit : 0;\n\t}\n\treturn lastSavedPosition;\n}\n\nexport const BoardContainer = (): React.JSX.Element | null => {\n\tconst t = getT();\n\tconst { boards, minimized, expanded, current, orderedBoards } = useBoardStore();\n\n\tconst boardDropdownItems = useMemo(\n\t\t(): DropdownItem[] =>\n\t\t\tmap(\n\t\t\t\torderedBoards,\n\t\t\t\t(boardId): DropdownItem => ({\n\t\t\t\t\tid: boardId,\n\t\t\t\t\tlabel: boards[boardId].title,\n\t\t\t\t\ticon: boards[boardId].icon,\n\t\t\t\t\tonClick: () => setCurrentBoard(boardId),\n\t\t\t\t\tselected: boardId === current,\n\t\t\t\t\tcustomComponent: (\n\t\t\t\t\t\t<ListItemContent\n\t\t\t\t\t\t\tlabel={boards[boardId].title}\n\t\t\t\t\t\t\ticon={boards[boardId].icon}\n\t\t\t\t\t\t\tselected={boardId === current}\n\t\t\t\t\t\t\tapp={getApp(boards[boardId].app)()?.display}\n\t\t\t\t\t\t\tboardId={boardId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t),\n\t\t[boards, current, orderedBoards]\n\t);\n\n\tconst boardRef = useRef<HTMLDivElement>(null);\n\tconst boardContainerRef = useRef<HTMLDivElement>(null);\n\tconst [lastSavedBoardSizeAndPosition, setLastSavedBoardSizeAndPosition] = useLocalStorage<\n\t\tPartial<SizeAndPosition>\n\t>(LOCAL_STORAGE_BOARD_SIZE, {});\n\tconst [currentBoardSizeAndPosition, setCurrentBoardSizeAndPosition] = useState(\n\t\tlastSavedBoardSizeAndPosition\n\t);\n\tconst lastSavedBoardSizeAndPositionRef = useRef(lastSavedBoardSizeAndPosition);\n\tconst [isMoving, moveElementHandler] = useMove(boardRef, {\n\t\tlocalStorageKey: LOCAL_STORAGE_BOARD_SIZE\n\t});\n\n\tconst isDefaultSizeAndPosition = useMemo(\n\t\t() => size(currentBoardSizeAndPosition) === 0,\n\t\t[currentBoardSizeAndPosition]\n\t);\n\tconst isBoardEmpty = useMemo(() => isEmpty(boards), [boards]);\n\n\tconst resetSizeAndPosition = useCallback(() => {\n\t\tsetLastSavedBoardSizeAndPosition({});\n\t\treduceBoards();\n\t}, [setLastSavedBoardSizeAndPosition]);\n\n\tuseEffect(() => {\n\t\t// reset position when the board is closed\n\t\tif (isBoardEmpty) {\n\t\t\tsetLastSavedBoardSizeAndPosition((prevState) => {\n\t\t\t\tconst newState = { ...prevState };\n\t\t\t\tdelete newState.left;\n\t\t\t\tdelete newState.top;\n\t\t\t\treturn newState;\n\t\t\t});\n\t\t}\n\t}, [isBoardEmpty, setLastSavedBoardSizeAndPosition]);\n\n\tuseEffect(() => {\n\t\tif (boardRef.current) {\n\t\t\tconst boardElement = boardRef.current;\n\t\t\tsetElementSizeAndPosition(boardElement, 'width', currentBoardSizeAndPosition.width);\n\t\t\tsetElementSizeAndPosition(boardElement, 'height', currentBoardSizeAndPosition.height);\n\t\t\tsetElementSizeAndPosition(boardElement, 'top', currentBoardSizeAndPosition.top);\n\t\t\tsetElementSizeAndPosition(boardElement, 'left', currentBoardSizeAndPosition.left);\n\t\t}\n\t}, [currentBoardSizeAndPosition]);\n\n\tconst updateBoardPosition = useMemo(\n\t\t() =>\n\t\t\tdebounce(\n\t\t\t\t() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tboardContainerRef.current &&\n\t\t\t\t\t\tboardContainerRef.current.clientHeight > 0 &&\n\t\t\t\t\t\tboardContainerRef.current.clientWidth > 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst newSizeAndPosition: Partial<SizeAndPosition> = {};\n\t\t\t\t\t\tif (lastSavedBoardSizeAndPositionRef.current.width !== undefined) {\n\t\t\t\t\t\t\tnewSizeAndPosition.width = lastSavedBoardSizeAndPositionRef.current.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (lastSavedBoardSizeAndPositionRef.current.height !== undefined) {\n\t\t\t\t\t\t\tnewSizeAndPosition.height = lastSavedBoardSizeAndPositionRef.current.height;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst boardContainer = boardContainerRef.current;\n\t\t\t\t\t\tif (lastSavedBoardSizeAndPositionRef.current.top !== undefined) {\n\t\t\t\t\t\t\tnewSizeAndPosition.top = calcPositionToRemainVisible(\n\t\t\t\t\t\t\t\tlastSavedBoardSizeAndPositionRef.current.top,\n\t\t\t\t\t\t\t\tboardContainer.clientHeight,\n\t\t\t\t\t\t\t\tBOARD_MIN_VISIBILITY.top\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (lastSavedBoardSizeAndPositionRef.current.left !== undefined) {\n\t\t\t\t\t\t\tnewSizeAndPosition.left = calcPositionToRemainVisible(\n\t\t\t\t\t\t\t\tlastSavedBoardSizeAndPositionRef.current.left,\n\t\t\t\t\t\t\t\tboardContainer.clientWidth,\n\t\t\t\t\t\t\t\tBOARD_MIN_VISIBILITY.left\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetCurrentBoardSizeAndPosition(newSizeAndPosition);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t0,\n\t\t\t\t{ leading: false, trailing: true }\n\t\t\t),\n\t\t[]\n\t);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', updateBoardPosition);\n\t\treturn (): void => {\n\t\t\twindow.removeEventListener('resize', updateBoardPosition);\n\t\t};\n\t}, [updateBoardPosition]);\n\n\tuseEffect(() => {\n\t\tlastSavedBoardSizeAndPositionRef.current = { ...lastSavedBoardSizeAndPosition };\n\t\t// if there is a board open, then update the size and position based on the window\n\t\tif (boardRef.current) {\n\t\t\tif (size(lastSavedBoardSizeAndPosition) > 0) {\n\t\t\t\tupdateBoardPosition();\n\t\t\t} else {\n\t\t\t\tsetCurrentBoardSizeAndPosition({});\n\t\t\t}\n\t\t} else {\n\t\t\t// otherwise just align the current with the local storage data (refresh case, board is closed)\n\t\t\tsetCurrentBoardSizeAndPosition({ ...lastSavedBoardSizeAndPosition });\n\t\t}\n\n\t\treturn (): void => {\n\t\t\tupdateBoardPosition.cancel();\n\t\t};\n\t}, [lastSavedBoardSizeAndPosition, updateBoardPosition]);\n\n\tconst clickHandler = useCallback<\n\t\t(onClickFn: IconButtonProps['onClick']) => IconButtonProps['onClick']\n\t>(\n\t\t(clickFn) => (event) => {\n\t\t\tif (event.type !== 'click' || !event.defaultPrevented) {\n\t\t\t\tclickFn(event);\n\t\t\t}\n\t\t},\n\t\t[]\n\t);\n\n\tconst boardContext = useMemo(() => current && boards[current]?.context, [boards, current]);\n\n\treturn (\n\t\t(!isBoardEmpty && current && (\n\t\t\t<div>\n\t\t\t\t<VeryLarge>\n\t\t\t\t\t<BoardContainerComp expanded={expanded} minimized={minimized} ref={boardContainerRef}>\n\t\t\t\t\t\t<Board\n\t\t\t\t\t\t\tdata-testid=\"NewItemContainer\"\n\t\t\t\t\t\t\tbackground={'#ffffff'}\n\t\t\t\t\t\t\tcrossAlignment=\"unset\"\n\t\t\t\t\t\t\texpanded={expanded}\n\t\t\t\t\t\t\tref={boardRef}\n\t\t\t\t\t\t\twidth={currentBoardSizeAndPosition.width}\n\t\t\t\t\t\t\theight={currentBoardSizeAndPosition.height}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ResizableContainer\n\t\t\t\t\t\t\t\tcrossAlignment={'unset'}\n\t\t\t\t\t\t\t\telementToResize={boardRef}\n\t\t\t\t\t\t\t\tlocalStorageKey={LOCAL_STORAGE_BOARD_SIZE}\n\t\t\t\t\t\t\t\tdisabled={expanded}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BoardHeader\n\t\t\t\t\t\t\t\t\tdata-testid=\"BoardHeader\"\n\t\t\t\t\t\t\t\t\tonMouseDown={(!expanded && moveElementHandler) || undefined}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Padding all=\"extrasmall\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.hide', 'Hide board')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<BackButton\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"BoardCollapseOutline\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(minimizeBoards)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t<TabsList />\n\t\t\t\t\t\t\t\t\t<Actions padding={{ all: 'extrasmall' }}>\n\t\t\t\t\t\t\t\t\t\t{boardContext &&\n\t\t\t\t\t\t\t\t\t\t\ttypeof boardContext === 'object' &&\n\t\t\t\t\t\t\t\t\t\t\t'onReturnToApp' in boardContext &&\n\t\t\t\t\t\t\t\t\t\t\tboardContext.onReturnToApp && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Padding right=\"extrasmall\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.open_app', 'Open in app')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={'DiagonalArrowRightUp'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(onGoToPanel)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\t\t\t\tgap={'0.25rem'}\n\t\t\t\t\t\t\t\t\t\t\torientation={'horizontal'}\n\t\t\t\t\t\t\t\t\t\t\twidth={'fit'}\n\t\t\t\t\t\t\t\t\t\t\theight={'fit'}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.show_tabs', 'Show other tabs')}\n\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown items={boardDropdownItems}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton icon={'ChevronDown'} onClick={clickHandler(noop)} />\n\t\t\t\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\t\t\tisDefaultSizeAndPosition\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'board.reset_size.disabled',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Board already at the default position'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: t('board.reset_size.enabled', 'Return to default position and size')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={'DiagonalArrowLeftDown'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(resetSizeAndPosition)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isDefaultSizeAndPosition}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\t\t\texpanded\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? t('board.reduce', 'Reduce board')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: t('board.enlarge', 'Enlarge board')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={expanded ? 'CollapseOutline' : 'ExpandOutline'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(expanded ? reduceBoards : expandBoards)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.close_tabs', 'Close all your tabs')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton icon=\"CloseOutline\" onClick={clickHandler(closeAllBoards)} />\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Actions>\n\t\t\t\t\t\t\t\t</BoardHeader>\n\t\t\t\t\t\t\t\t<Divider style={{ height: '0.125rem' }} />\n\t\t\t\t\t\t\t\t<BoardDetailContainer takeAvailableSpace>\n\t\t\t\t\t\t\t\t\t{map(boards, (b) => (\n\t\t\t\t\t\t\t\t\t\t<AppBoard key={b.id} board={b} />\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</BoardDetailContainer>\n\t\t\t\t\t\t\t</ResizableContainer>\n\t\t\t\t\t\t</Board>\n\t\t\t\t\t</BoardContainerComp>\n\t\t\t\t</VeryLarge>\n\t\t\t\t<Desktop>\n\t\t\t\t\t<BoardContainerComp expanded={expanded} minimized={minimized} ref={boardContainerRef}>\n\t\t\t\t\t\t<Board\n\t\t\t\t\t\t\tdata-testid=\"NewItemContainer\"\n\t\t\t\t\t\t\tbackground={'#ffffff'}\n\t\t\t\t\t\t\tcrossAlignment=\"unset\"\n\t\t\t\t\t\t\texpanded={expanded}\n\t\t\t\t\t\t\tref={boardRef}\n\t\t\t\t\t\t\twidth={currentBoardSizeAndPosition.width}\n\t\t\t\t\t\t\theight={currentBoardSizeAndPosition.height}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ResizableContainer\n\t\t\t\t\t\t\t\tcrossAlignment={'unset'}\n\t\t\t\t\t\t\t\telementToResize={boardRef}\n\t\t\t\t\t\t\t\tlocalStorageKey={LOCAL_STORAGE_BOARD_SIZE}\n\t\t\t\t\t\t\t\tdisabled={expanded}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BoardHeader\n\t\t\t\t\t\t\t\t\tdata-testid=\"BoardHeader\"\n\t\t\t\t\t\t\t\t\tonMouseDown={(!expanded && moveElementHandler) || undefined}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Padding all=\"extrasmall\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.hide', 'Hide board')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<BackButton\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"BoardCollapseOutline\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(minimizeBoards)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t<TabsList />\n\t\t\t\t\t\t\t\t\t<Actions padding={{ all: 'extrasmall' }}>\n\t\t\t\t\t\t\t\t\t\t{boardContext &&\n\t\t\t\t\t\t\t\t\t\t\ttypeof boardContext === 'object' &&\n\t\t\t\t\t\t\t\t\t\t\t'onReturnToApp' in boardContext &&\n\t\t\t\t\t\t\t\t\t\t\tboardContext.onReturnToApp && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Padding right=\"extrasmall\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.open_app', 'Open in app')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={'DiagonalArrowRightUp'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(onGoToPanel)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\t\t\t\tgap={'0.25rem'}\n\t\t\t\t\t\t\t\t\t\t\torientation={'horizontal'}\n\t\t\t\t\t\t\t\t\t\t\twidth={'fit'}\n\t\t\t\t\t\t\t\t\t\t\theight={'fit'}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.show_tabs', 'Show other tabs')}\n\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown items={boardDropdownItems}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton icon={'ChevronDown'} onClick={clickHandler(noop)} />\n\t\t\t\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\t\t\tisDefaultSizeAndPosition\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'board.reset_size.disabled',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Board already at the default position'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: t('board.reset_size.enabled', 'Return to default position and size')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={'DiagonalArrowLeftDown'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(resetSizeAndPosition)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isDefaultSizeAndPosition}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\t\t\texpanded\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? t('board.reduce', 'Reduce board')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: t('board.enlarge', 'Enlarge board')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={expanded ? 'CollapseOutline' : 'ExpandOutline'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(expanded ? reduceBoards : expandBoards)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.close_tabs', 'Close all your tabs')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton icon=\"CloseOutline\" onClick={clickHandler(closeAllBoards)} />\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Actions>\n\t\t\t\t\t\t\t\t</BoardHeader>\n\t\t\t\t\t\t\t\t<Divider style={{ height: '0.125rem' }} />\n\t\t\t\t\t\t\t\t<BoardDetailContainer takeAvailableSpace>\n\t\t\t\t\t\t\t\t\t{map(boards, (b) => (\n\t\t\t\t\t\t\t\t\t\t<AppBoard key={b.id} board={b} />\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</BoardDetailContainer>\n\t\t\t\t\t\t\t</ResizableContainer>\n\t\t\t\t\t\t</Board>\n\t\t\t\t\t</BoardContainerComp>\n\t\t\t\t</Desktop>\n\t\t\t\t<Mobile>\n\t\t\t\t\t<BoardContainerCompMobile minimized={minimized} ref={boardContainerRef}>\n\t\t\t\t\t\t<BoardMobile\n\t\t\t\t\t\t\tdata-testid=\"NewItemContainer\"\n\t\t\t\t\t\t\tbackground={'gray6'}\n\t\t\t\t\t\t\tcrossAlignment=\"unset\"\n\t\t\t\t\t\t\texpanded={expanded}\n\t\t\t\t\t\t\tref={boardRef}\n\t\t\t\t\t\t\twidth={currentBoardSizeAndPosition.width}\n\t\t\t\t\t\t\theight={currentBoardSizeAndPosition.height}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ResizableContainer\n\t\t\t\t\t\t\t\tcrossAlignment={'unset'}\n\t\t\t\t\t\t\t\telementToResize={boardRef}\n\t\t\t\t\t\t\t\tlocalStorageKey={LOCAL_STORAGE_BOARD_SIZE}\n\t\t\t\t\t\t\t\tdisabled={expanded}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BoardHeader\n\t\t\t\t\t\t\t\t\tdata-testid=\"BoardHeader\"\n\t\t\t\t\t\t\t\t\tbackground={'gray5'}\n\t\t\t\t\t\t\t\t\tonMouseDown={(!expanded && moveElementHandler) || undefined}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Padding all=\"extrasmall\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.hide', 'Hide board')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<BackButton\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"BoardCollapseOutline\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(minimizeBoards)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t<TabsList />\n\t\t\t\t\t\t\t\t\t<Actions padding={{ all: 'extrasmall' }}>\n\t\t\t\t\t\t\t\t\t\t{boardContext &&\n\t\t\t\t\t\t\t\t\t\t\ttypeof boardContext === 'object' &&\n\t\t\t\t\t\t\t\t\t\t\t'onReturnToApp' in boardContext &&\n\t\t\t\t\t\t\t\t\t\t\tboardContext.onReturnToApp && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Padding right=\"extrasmall\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.open_app', 'Open in app')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={'DiagonalArrowRightUp'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(onGoToPanel)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\t\t\t\tgap={'0.25rem'}\n\t\t\t\t\t\t\t\t\t\t\torientation={'horizontal'}\n\t\t\t\t\t\t\t\t\t\t\twidth={'fit'}\n\t\t\t\t\t\t\t\t\t\t\theight={'fit'}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.show_tabs', 'Show other tabs')}\n\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown items={boardDropdownItems}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton icon={'ChevronDown'} onClick={clickHandler(noop)} />\n\t\t\t\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\t\t\tisDefaultSizeAndPosition\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'board.reset_size.disabled',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Board already at the default position'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: t('board.reset_size.enabled', 'Return to default position and size')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={'DiagonalArrowLeftDown'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(resetSizeAndPosition)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isDefaultSizeAndPosition}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\t\t\texpanded\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? t('board.reduce', 'Reduce board')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: t('board.enlarge', 'Enlarge board')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={expanded ? 'CollapseOutline' : 'ExpandOutline'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(expanded ? reduceBoards : expandBoards)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.close_tabs', 'Close all your tabs')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton icon=\"CloseOutline\" onClick={clickHandler(closeAllBoards)} />\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Actions>\n\t\t\t\t\t\t\t\t</BoardHeader>\n\t\t\t\t\t\t\t\t<Divider style={{ height: '0.125rem' }} />\n\t\t\t\t\t\t\t\t<BoardDetailContainer takeAvailableSpace>\n\t\t\t\t\t\t\t\t\t{map(boards, (b) => (\n\t\t\t\t\t\t\t\t\t\t<AppBoard key={b.id} board={b} />\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</BoardDetailContainer>\n\t\t\t\t\t\t\t</ResizableContainer>\n\t\t\t\t\t\t</BoardMobile>\n\t\t\t\t\t</BoardContainerCompMobile>\n\t\t\t\t</Mobile>\n\t\t\t</div>\n\t\t)) ||\n\t\tnull\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type React from 'react';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { forEach } from 'lodash';\n\nimport { useLocalStorage } from './useLocalStorage';\nimport type { ElementPosition, SizeAndPosition } from '../../utils/utils';\nimport { setElementSizeAndPosition, setGlobalCursor } from '../../utils/utils';\n\ntype UseMoveReturnType = [isMoving: boolean, moveHandler: React.MouseEventHandler];\ntype MoveOptions = {\n\tlocalStorageKey?: string;\n\tkeepSyncedWithStorage?: boolean;\n};\n\nexport const BOARD_CURSOR_TIMEOUT = 250;\n\nfunction calcNewPosition(\n\tfrom: SizeAndPosition & {\n\t\tclientTop: number;\n\t\tclientLeft: number;\n\t\tmouseClientX: number;\n\t\tmouseClientY: number;\n\t},\n\tlimitContainer: HTMLElement,\n\tmouseEvent: MouseEvent\n): ElementPosition {\n\tconst limitClientRect = limitContainer.getBoundingClientRect();\n\tconst clientTopLimit = limitClientRect.top ?? 0;\n\tconst moveTopDelta = mouseEvent.clientY - from.mouseClientY;\n\tconst newClientTop = from.clientTop + moveTopDelta;\n\tconst newTop = from.top + moveTopDelta;\n\tconst clientLeftLimit = limitClientRect.left ?? 0;\n\tconst moveLeftDelta = mouseEvent.clientX - from.mouseClientX;\n\tconst newClientLeft = from.clientLeft + moveLeftDelta;\n\tconst newLeft = from.left + moveLeftDelta;\n\treturn {\n\t\tleft: newClientLeft > clientLeftLimit ? newLeft : 0,\n\t\ttop: newClientTop > clientTopLimit ? newTop : 0\n\t};\n}\n\nexport const useMove = (\n\telementToMoveRef: React.RefObject<HTMLElement>,\n\toptions?: MoveOptions\n): UseMoveReturnType => {\n\tconst [isMoving, setIsMoving] = useState(false);\n\tconst isMoveEnabledRef = useRef(false);\n\tconst initialSizeAndPositionRef = useRef<Parameters<typeof calcNewPosition>[0]>();\n\tconst [lastSavedPosition, setLastSavedPosition] = useLocalStorage<Partial<SizeAndPosition>>(\n\t\toptions?.localStorageKey || 'use-move-data',\n\t\t{},\n\t\t{ keepSyncedWithStorage: options?.keepSyncedWithStorage }\n\t);\n\tconst lastPositionRef = useRef<Partial<ElementPosition>>(lastSavedPosition);\n\tconst globalCursorSetterTimerRef = useRef<ReturnType<typeof setTimeout>>();\n\tconst shouldUpdateLocalStorageRef = useRef(false);\n\n\tconst moveElement = useCallback(\n\t\t({ left, top }: ElementPosition) => {\n\t\t\tif (elementToMoveRef.current) {\n\t\t\t\tconst elementToMove = elementToMoveRef.current;\n\t\t\t\tconst positionToApply: Partial<ElementPosition> = lastPositionRef.current;\n\t\t\t\tif (top >= 0) {\n\t\t\t\t\tpositionToApply.top = top;\n\t\t\t\t}\n\t\t\t\tif (left >= 0) {\n\t\t\t\t\tpositionToApply.left = left;\n\t\t\t\t}\n\t\t\t\tforEach(positionToApply, (value, key) => {\n\t\t\t\t\tsetElementSizeAndPosition(elementToMove, key as keyof ElementPosition, value);\n\t\t\t\t});\n\t\t\t\tlastPositionRef.current = positionToApply;\n\t\t\t}\n\t\t},\n\t\t[elementToMoveRef]\n\t);\n\n\tuseEffect(() => {\n\t\tlastPositionRef.current = { ...lastSavedPosition };\n\t}, [elementToMoveRef, lastSavedPosition]);\n\n\tconst preventClick = useCallback((event: MouseEvent) => {\n\t\tevent.preventDefault();\n\t\tdocument.body.removeEventListener('click', preventClick, { capture: true });\n\t}, []);\n\n\tconst onMouseMove = useCallback(\n\t\t(mouseMoveEvent: MouseEvent) => {\n\t\t\t// prevent clickable elements from being clicked if a move has been made\n\t\t\tdocument.body.addEventListener('click', preventClick, { capture: true });\n\t\t\tif (initialSizeAndPositionRef.current && elementToMoveRef.current) {\n\t\t\t\tconst offsetParent =\n\t\t\t\t\t(elementToMoveRef.current.offsetParent instanceof HTMLElement &&\n\t\t\t\t\t\telementToMoveRef.current.offsetParent) ||\n\t\t\t\t\tdocument.body;\n\n\t\t\t\tconst newPosition = calcNewPosition(\n\t\t\t\t\tinitialSizeAndPositionRef.current,\n\t\t\t\t\toffsetParent,\n\t\t\t\t\tmouseMoveEvent\n\t\t\t\t);\n\t\t\t\tmoveElement({\n\t\t\t\t\tleft: newPosition.left,\n\t\t\t\t\ttop: newPosition.top\n\t\t\t\t});\n\t\t\t\tshouldUpdateLocalStorageRef.current = true;\n\t\t\t}\n\t\t},\n\t\t[elementToMoveRef, moveElement, preventClick]\n\t);\n\n\tconst enableMove = useCallback(() => {\n\t\tif (document.activeElement && document.activeElement instanceof HTMLElement) {\n\t\t\tdocument.activeElement.classList.add('no-active-background');\n\t\t}\n\t\tdocument.body.addEventListener('mousemove', onMouseMove);\n\t\tsetGlobalCursor('move');\n\t\tisMoveEnabledRef.current = true;\n\t\tsetIsMoving(true);\n\t}, [onMouseMove]);\n\n\tconst disableMove = useCallback(() => {\n\t\tif (document.activeElement && document.activeElement instanceof HTMLElement) {\n\t\t\tdocument.activeElement.classList.remove('no-active-background');\n\t\t}\n\t\tdocument.body.removeEventListener('mousemove', onMouseMove);\n\t\tsetGlobalCursor(undefined);\n\t\tisMoveEnabledRef.current = false;\n\t\tsetIsMoving(false);\n\t}, [onMouseMove]);\n\n\tconst onMouseUp = useCallback(() => {\n\t\tif (globalCursorSetterTimerRef.current) {\n\t\t\tclearTimeout(globalCursorSetterTimerRef.current);\n\t\t}\n\t\tif (isMoveEnabledRef.current) {\n\t\t\tdisableMove();\n\t\t}\n\t\tdocument.body.removeEventListener('mouseup', onMouseUp);\n\t\tif (options?.localStorageKey && shouldUpdateLocalStorageRef.current) {\n\t\t\tsetLastSavedPosition(lastPositionRef.current);\n\t\t\tshouldUpdateLocalStorageRef.current = false;\n\t\t}\n\t}, [disableMove, options?.localStorageKey, setLastSavedPosition]);\n\n\tconst moveHandler = useCallback(\n\t\t(mouseDownEvent: React.MouseEvent) => {\n\t\t\tif (!mouseDownEvent.defaultPrevented && elementToMoveRef.current) {\n\t\t\t\tconst clientRect = elementToMoveRef.current.getBoundingClientRect();\n\t\t\t\tinitialSizeAndPositionRef.current = {\n\t\t\t\t\twidth: elementToMoveRef.current.offsetWidth,\n\t\t\t\t\theight: elementToMoveRef.current.offsetHeight,\n\t\t\t\t\tleft: elementToMoveRef.current.offsetLeft,\n\t\t\t\t\ttop: elementToMoveRef.current.offsetTop,\n\t\t\t\t\tclientTop: clientRect.top,\n\t\t\t\t\tclientLeft: clientRect.left,\n\t\t\t\t\tmouseClientY: mouseDownEvent.clientY,\n\t\t\t\t\tmouseClientX: mouseDownEvent.clientX\n\t\t\t\t};\n\t\t\t\tglobalCursorSetterTimerRef.current = setTimeout(enableMove, BOARD_CURSOR_TIMEOUT);\n\t\t\t\tdocument.body.addEventListener('mouseup', onMouseUp);\n\t\t\t}\n\t\t},\n\t\t[elementToMoveRef, enableMove, onMouseUp]\n\t);\n\n\treturn [isMoving, moveHandler];\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useMemo } from 'react';\n\nimport { useScreenMode } from '@zextras/carbonio-design-system';\n\nimport ShellContext from './shell-context';\n\ninterface ShellContextProviderProps {\n\tchildren: React.ReactNode;\n}\n\nconst ShellContextProvider = ({ children }: ShellContextProviderProps): React.JSX.Element => {\n\tconst screenMode = useScreenMode();\n\n\tconst value = useMemo(\n\t\t() => ({\n\t\t\tisMobile: screenMode === 'mobile'\n\t\t}),\n\t\t[screenMode]\n\t);\n\n\treturn <ShellContext.Provider value={value}>{children}</ShellContext.Provider>;\n};\n\nexport default ShellContextProvider;\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nconst SvgCarbonio = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"currentColor\",\n  viewBox: \"0 0 829 111\"\n}, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M306.721 72.44c-2.884-5.599-7.295-9.5-10.858-11.112v-.255c9.501-4.326 18.237-14.674 18.237-26.04 0-22.903-19.679-33.506-41.054-33.506h-51.912V21.63h51.912c11.79 0 18.152 4.75 18.152 13.911 0 6.956-5.598 13.487-19 13.657h-51.064v19.17h41.648c12.469 0 18.492 3.732 22.903 12.045l14.674 28.331h25.277zM412.835 53.1v-.17c6.701-4.496 10.009-11.875 10.009-20.358 0-16.54-12.724-30.96-37.407-30.96h-54.033v20.103h52.76c12.045 0 15.862 4.326 15.862 11.112 0 6.107-2.884 11.536-15.862 11.536h-52.76v18.746h55.135c13.911 0 18.153 5.683 18.153 12.978 0 7.38-3.563 12.553-18.153 12.553h-55.135v20.104h55.135c25.617 0 40.97-12.13 40.97-32.403 0-11.62-5.938-20.188-14.674-23.241M157.517 1.442l-40.46 86.69-10.01 20.442h21.461l11.875-25.532h51.912l11.875 25.532h21.036L175.16 1.442zm28.077 64.127h-38.171l1.273-1.697 17.643-38.934h.254l17.728 38.934zM102.891 91.013c-11.452 12.384-26.805 19.255-45.296 19.255C19.764 110.268 0 87.789 0 55.726 0 23.578 20.612.082 57.765.082c19.254 0 33.76 6.107 45.041 18.83L87.283 34.437C80.328 25.02 70.658 20.1 57.765 20.1c-24.43 0-34.778 15.099-34.778 35.626 0 19.764 9.67 34.354 34.693 34.354 12.893 0 22.987-5.005 30.027-14.166zM661.451 108.828h-19l-48.434-59.207-7.973-12.638h-.255v71.845h-22.563V1.272h19l49.028 59.207 7.465 12.214h.254V1.272h22.563v107.556zM702.506 108.828h-22.563V1.272h22.563zM773.419 110.185c-36.22 0-55.39-22.393-55.39-54.456C718.029 23.75 737.114 0 773.419 0c36.474 0 55.389 23.75 55.389 55.729-.085 31.978-19.679 54.456-55.389 54.456m0-90.082c-22.818 0-32.403 14.844-32.403 35.626 0 20.018 9.585 34.269 32.403 34.269 23.071 0 32.402-14.166 32.402-34.27 0-20.187-9.331-35.625-32.402-35.625M494.35 110.27c-36.22 0-55.39-22.393-55.39-54.456 0-31.979 19.085-55.73 55.39-55.73 36.474 0 55.389 23.751 55.389 55.73 0 32.063-19.679 54.456-55.389 54.456m0-89.997c-22.818 0-32.403 14.844-32.403 35.626 0 20.018 9.585 34.268 32.403 34.268 23.072 0 32.402-14.165 32.402-34.268 0-20.188-9.245-35.626-32.402-35.626\"\n})));\nexport default SvgCarbonio;","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport type { DropdownItem } from '@zextras/carbonio-design-system';\nimport { Container, Row, Text, Icon, Dropdown } from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\n\nimport { useSearchModule } from './useSearchModule';\nimport { SEARCH_APP_ID } from '../constants';\nimport { pushHistory, useCurrentRoute } from '../history/hooks';\nimport { useAppStore } from '../store/app';\nimport { Typography } from '@mui/material';\nimport {\n\tFOREGROUND_COLOR,\n\tPRIMARY_ICON_COLOR_ACTIVE,\n\tPRIMARY_ICON_COLOR_INACTIVE\n} from '../sruvi/EditedColors';\n\nconst SelectorContainer = styled(Container)<{ open?: boolean }>`\n\tborder-right: 0.0625rem solid ${({ theme }): string => theme.palette.gray4.regular};\n\tcursor: pointer;\n\tbackground: ${({ theme, open }): string => theme.palette[open ? 'gray5' : 'gray6'].regular};\n\n\t&:hover {\n\t\tbackground: ${({ theme, open }): string => theme.palette[open ? 'gray5' : 'gray6'].hover};\n\t}\n`;\n\nexport const ModuleSelector = (): React.JSX.Element | null => {\n\tconst currentRoute = useCurrentRoute();\n\tconst searchViews = useAppStore((s) => s.views.search);\n\tconst [module, updateModule] = useSearchModule();\n\tconst searchView = useMemo(\n\t\t() => searchViews.find((m) => m.route === module),\n\t\t[module, searchViews]\n\t);\n\n\tconst [open, setOpen] = useState(false);\n\n\tconst dropdownItems = useMemo(\n\t\t(): DropdownItem[] =>\n\t\t\tsearchViews.map(\n\t\t\t\t({ id, label, icon, route }): DropdownItem => ({\n\t\t\t\t\tid,\n\t\t\t\t\tlabel,\n\t\t\t\t\ticon,\n\t\t\t\t\tonClick: (): void => {\n\t\t\t\t\t\t// open the search view and update the module of moduleSelector\n\t\t\t\t\t\t// order is important\n\t\t\t\t\t\tpushHistory({ route: SEARCH_APP_ID, path: '' });\n\t\t\t\t\t\tupdateModule(route);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t),\n\t\t[searchViews, updateModule]\n\t);\n\n\tuseEffect(() => {\n\t\t// update the search module based on active route\n\t\t// it handles also back navigation that cannot be handled using primary icon clicks\n\t\tif (\n\t\t\tcurrentRoute?.route &&\n\t\t\tmodule !== currentRoute.route &&\n\t\t\tsearchViews.find((m) => m.route === currentRoute.route)\n\t\t) {\n\t\t\tupdateModule(currentRoute.route);\n\t\t}\n\t}, [searchView, module, searchViews, updateModule, currentRoute?.route]);\n\n\tconst openDropdown = useCallback(() => {\n\t\tsetOpen(true);\n\t}, []);\n\n\tconst closeDropdown = useCallback(() => {\n\t\tsetOpen(false);\n\t}, []);\n\n\tif (!searchView) {\n\t\treturn null;\n\t}\n\n\t// TODO: replace the Dropdown with a Select with the customLabelFactory\n\treturn (\n\t\t<div style={{ width: '100%', height: '48px', display: 'flex' }}>\n\t\t\t<Dropdown\n\t\t\t\titems={dropdownItems}\n\t\t\t\tonOpen={openDropdown}\n\t\t\t\tonClose={closeDropdown}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '48px',\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\talignItems: 'center',\n\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\tjustifyContent: 'space-between'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\theight: '48px',\n\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Typography variant=\"body2\" style={{ marginLeft: '16px' }}>\n\t\t\t\t\t\t{searchView?.label}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\t\t\t\tcolor={open ? PRIMARY_ICON_COLOR_ACTIVE : PRIMARY_ICON_COLOR_INACTIVE}\n\t\t\t\t\t\tstyle={{ marginRight: '8px' }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Dropdown>\n\t\t</div>\n\t);\n};\n{\n\t/* <SelectorContainer\n\t\t\t\tdata-testid=\"HeaderModuleSelector\"\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\theight=\"40px\"\n\t\t\t\twidth=\"fit\"\n\t\t\t\tminWidth=\"9.375rem\"\n\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\tborderRadius=\"half\"\n\t\t\t>\n\t\t\t\t<Row takeAvailableSpace mainAlignment=\"unset\" padding={{ left: 'small' }}>\n\t\t\t\t\t<Text size=\"small\" color={open ? 'primary' : 'text'}>\n\t\t\t\t\t\t{searchView?.label}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t\t<Icon\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\t\t\tcolor={open ? 'primary' : 'text'}\n\t\t\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t\t\t/>\n\t\t\t</SelectorContainer> */\n}\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React from 'react';\n\nimport { useLogo } from '../store/login/hooks';\nimport { useLoginConfigStore } from '../store/login/store';\n\nexport const Logo = (props: Record<string, unknown>): React.JSX.Element => {\n\tconst { loaded } = useLoginConfigStore();\n\tconst LogoElement = useLogo();\n\n\treturn loaded ? (\n\t\t(typeof LogoElement === 'string' && <img alt={''} {...props} src={LogoElement} />) || (\n\t\t\t<LogoElement {...props} />\n\t\t)\n\t) : (\n\t\t<></>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport type { ChipInputProps } from '@zextras/carbonio-design-system';\nimport {\n\tChipInput,\n\tContainer,\n\tIconButton,\n\tPadding,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport { filter, find, map, reduce, some } from 'lodash';\nimport { useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { ModuleSelector } from './module-selector';\nimport { useSearchStore } from './search-store';\nimport { useSearchModule } from './useSearchModule';\nimport { LOCAL_STORAGE_SEARCH_KEY, SEARCH_APP_ID } from '../constants';\nimport { useLocalStorage } from '../shell/hooks/useLocalStorage';\nimport { useAppStore } from '../store/app';\nimport { getT } from '../store/i18n/hooks';\nimport type { QueryChip, QueryItem } from '../types/search';\nimport Desktop from '../sruvi/Desktop';\nimport { Card, Grid2 } from '@mui/material';\nimport {\n\tFOREGROUND_COLOR,\n\tPRIMARY_ICON_COLOR_ACTIVE,\n\tPRIMARY_ICON_COLOR_INACTIVE,\n\tRAISED_SEARCH_BAR\n} from '../sruvi/EditedColors';\nimport VeryLarge from '../sruvi/VeryLarge';\n\nconst OutlinedIconButton = styled(IconButton)`\n\tdisplay: flex;\n\talign-items: center;\n\theight: 48px;\n\twidth: 48px;\n\t& svg {\n\t\tborder: none;\n\t}\n`;\n\nconst StyledChipInput = styled(ChipInput)`\n\tcursor: pointer;\n\toverflow-x: hidden;\n\tpadding: 0 1rem;\n\t&:hover {\n\t\toutline: none;\n\t\tbackground: ${({ theme, disabled }): string =>\n\t\t\tdisabled ? 'gray5' : 'FOREGROUND_COLOR_FOCUSED'};\n\t}\n\theight: 48px;\n`;\n\nconst StyledContainer = styled(Container)`\n\theight: 48px;\n\toverflow-y: hidden;\n\t&:first-child {\n\t\ttransform: translateY(-0.125rem);\n\t}\n`;\n\ntype SearchOption = NonNullable<ChipInputProps['options']>[number] & QueryItem;\n\nexport const SearchBar = (): React.JSX.Element => {\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst t = getT();\n\tconst [storedSuggestions, setStoredSuggestions] = useLocalStorage<SearchOption[]>(\n\t\tLOCAL_STORAGE_SEARCH_KEY,\n\t\t[]\n\t);\n\tconst [inputTyped, setInputTyped] = useState<string>('');\n\tconst history = useHistory();\n\tconst [currentSearchModuleRoute] = useSearchModule();\n\tconst { updateQuery, query, searchDisabled, setSearchDisabled, tooltip } = useSearchStore();\n\tconst modules = useAppStore((s) => s.views.search);\n\tconst moduleLabel = useMemo(\n\t\t() =>\n\t\t\tmodules.find(({ route }) => route === currentSearchModuleRoute)?.label ||\n\t\t\tcurrentSearchModuleRoute,\n\t\t[currentSearchModuleRoute, modules]\n\t);\n\n\tconst [isTyping, setIsTyping] = useState(false);\n\n\tconst [options, setOptions] = useState<SearchOption[]>([]);\n\n\tconst [inputHasFocus, setInputHasFocus] = useState(false);\n\n\tconst [searchInputValue, setSearchInputValue] = useState<QueryChip[]>(query);\n\n\tconst showClear = useMemo(\n\t\t() =>\n\t\t\tsearchInputValue.length > 0 ||\n\t\t\t(inputRef.current?.value && inputRef.current?.value?.length > 0),\n\t\t[searchInputValue.length]\n\t);\n\tconst clearSearch = useCallback((): void => {\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.value = '';\n\t\t\tinputRef.current?.focus();\n\t\t}\n\t\tsetIsTyping(false);\n\t\tsetSearchInputValue([]);\n\t\tsetSearchDisabled(false);\n\t\tupdateQuery([]);\n\t\tsetInputTyped('');\n\t}, [setSearchDisabled, updateQuery]);\n\n\tconst onSearch = useCallback(() => {\n\t\tupdateQuery((currentQuery) => {\n\t\t\tconst ref = inputRef?.current;\n\t\t\tif (ref) {\n\t\t\t\tref.value = '';\n\t\t\t}\n\t\t\tif (inputTyped.length > 0) {\n\t\t\t\tconst newInputValue: typeof searchInputValue = [\n\t\t\t\t\t...searchInputValue,\n\t\t\t\t\t...map(\n\t\t\t\t\t\tinputTyped.split(' '),\n\t\t\t\t\t\t(label, id): QueryChip => ({\n\t\t\t\t\t\t\tid: `${id}`,\n\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\thasAvatar: false\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t];\n\t\t\t\tsetSearchInputValue(newInputValue);\n\t\t\t\tsetInputTyped('');\n\t\t\t\treturn reduce(\n\t\t\t\t\tnewInputValue,\n\t\t\t\t\t(acc, newInputChip) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!some(\n\t\t\t\t\t\t\t\tcurrentQuery,\n\t\t\t\t\t\t\t\t(currentQueryChip) => currentQueryChip.label === newInputChip.label\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tacc.push(newInputChip);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t},\n\t\t\t\t\tfilter(currentQuery, (currentQueryChip) =>\n\t\t\t\t\t\tsome(\n\t\t\t\t\t\t\tsearchInputValue,\n\t\t\t\t\t\t\t(searchInputChip) => searchInputChip.label === currentQueryChip.label\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tsetInputTyped('');\n\n\t\t\treturn reduce(\n\t\t\t\tsearchInputValue,\n\t\t\t\t(acc, searchInputChip) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!some(\n\t\t\t\t\t\t\tcurrentQuery,\n\t\t\t\t\t\t\t(currentQueryChip) => currentQueryChip.label === searchInputChip.label\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tacc.push(searchInputChip);\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\n\t\t\t\tfilter(currentQuery, (currentQueryChip: QueryChip) =>\n\t\t\t\t\tsome(\n\t\t\t\t\t\tsearchInputValue,\n\t\t\t\t\t\t(searchInputChip) => searchInputChip.label === currentQueryChip.label\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t});\n\t\t// TODO: perform a navigation only when coming from a different module (not the search one)\n\t\thistory.push(`/${SEARCH_APP_ID}`);\n\t}, [updateQuery, history, inputTyped, searchInputValue]);\n\n\tconst appSuggestions = useMemo<SearchOption[]>(\n\t\t() =>\n\t\t\tfilter(storedSuggestions, (v) => v.app === currentSearchModuleRoute)\n\t\t\t\t.reverse()\n\t\t\t\t.map(\n\t\t\t\t\t(item): SearchOption => ({\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tdisabled: searchDisabled,\n\t\t\t\t\t\tonClick: (): void => {\n\t\t\t\t\t\t\tconst newInputChip: QueryChip = { ...item, hasAvatar: false, onClick: undefined };\n\t\t\t\t\t\t\tsetSearchInputValue((prevState) => [...prevState, newInputChip]);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t),\n\t\t[storedSuggestions, currentSearchModuleRoute, searchDisabled]\n\t);\n\n\tconst updateOptions = useCallback(\n\t\t(textContent: string, queryChips: QueryChip[]): void => {\n\t\t\tif (textContent.length > 0) {\n\t\t\t\tsetOptions(\n\t\t\t\t\tappSuggestions\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(suggestion) =>\n\t\t\t\t\t\t\t\ttextContent &&\n\t\t\t\t\t\t\t\tsuggestion.label.includes(textContent) &&\n\t\t\t\t\t\t\t\t!some(queryChips, (queryChip) => queryChip.value === suggestion.label)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.slice(0, 5)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsetOptions(appSuggestions.slice(0, 5));\n\t\t\t}\n\t\t},\n\t\t[appSuggestions]\n\t);\n\n\tconst onQueryChange = useCallback<NonNullable<ChipInputProps['onChange']>>(\n\t\t(newQuery) => {\n\t\t\t// FIXME: move the saving of suggestions after the search occurs.\n\t\t\t// \tThe saving logic should not be placed here because the onChange is called even when a chip is removed from the chipInput.\n\t\t\t//  So, at the moment, keywords never searched for are saved too.\n\t\t\tconst lastChipLabel = newQuery[newQuery.length - 1]?.label;\n\t\t\tif (\n\t\t\t\tlastChipLabel &&\n\t\t\t\ttypeof lastChipLabel === 'string' &&\n\t\t\t\tcurrentSearchModuleRoute &&\n\t\t\t\t!find(appSuggestions, (suggestion) => suggestion.label === lastChipLabel)\n\t\t\t) {\n\t\t\t\tsetStoredSuggestions((prevState) => {\n\t\t\t\t\tconst newSuggestion: SearchOption = {\n\t\t\t\t\t\tvalue: lastChipLabel,\n\t\t\t\t\t\tlabel: lastChipLabel,\n\t\t\t\t\t\ticon: 'ClockOutline',\n\t\t\t\t\t\tapp: currentSearchModuleRoute,\n\t\t\t\t\t\tid: lastChipLabel\n\t\t\t\t\t};\n\t\t\t\t\treturn [...prevState, newSuggestion];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// FIXME: remove the cast (by making ChipItem support generics?)\n\t\t\tsetSearchInputValue(newQuery as QueryChip[]);\n\t\t},\n\t\t[appSuggestions, currentSearchModuleRoute, setStoredSuggestions]\n\t);\n\n\tconst onInputType = useCallback<NonNullable<ChipInputProps['onInputType']>>(\n\t\t(ev) => {\n\t\t\tif (!ev.textContent) {\n\t\t\t\tsetIsTyping(false);\n\t\t\t} else {\n\t\t\t\tsetIsTyping(true);\n\t\t\t}\n\t\t\tsetInputTyped(ev.textContent || '');\n\t\t\tupdateOptions(ev.textContent || '', query);\n\t\t},\n\t\t[query, updateOptions]\n\t);\n\n\tuseEffect(() => {\n\t\tif (currentSearchModuleRoute) {\n\t\t\tconst suggestions = filter(\n\t\t\t\tappSuggestions,\n\t\t\t\t(suggestion) => suggestion.app === currentSearchModuleRoute\n\t\t\t).slice(0, 5);\n\n\t\t\tsetOptions(suggestions);\n\t\t}\n\t}, [appSuggestions, currentSearchModuleRoute]);\n\n\tconst containerRef = useRef<HTMLDivElement>(null);\n\tconst addFocus = useCallback(() => setInputHasFocus(true), []);\n\tconst removeFocus = useCallback(() => setInputHasFocus(false), []);\n\n\tuseEffect(() => {\n\t\tconst ref = inputRef.current;\n\t\tconst runSearchOnKeyUp = (ev: KeyboardEvent): void => {\n\t\t\tif (ev.key === 'Enter') {\n\t\t\t\tonSearch();\n\t\t\t\tremoveFocus();\n\t\t\t}\n\t\t};\n\t\tif (ref) {\n\t\t\tref.addEventListener('keyup', runSearchOnKeyUp);\n\t\t}\n\n\t\treturn (): void => {\n\t\t\tif (ref) {\n\t\t\t\tref.removeEventListener('keyup', runSearchOnKeyUp);\n\t\t\t}\n\t\t};\n\t}, [onSearch, removeFocus]);\n\n\tconst disableOptions = useMemo(() => options.length <= 0 || isTyping, [options, isTyping]);\n\n\tconst placeholder = useMemo(\n\t\t() =>\n\t\t\tinputHasFocus && currentSearchModuleRoute\n\t\t\t\t? t('search.active_input_label', 'Separate your keywords by a comma or pressing TAB')\n\t\t\t\t: t('search.idle_input_label', 'Search in {{module}}', {\n\t\t\t\t\t\tmodule: moduleLabel\n\t\t\t\t\t}),\n\t\t[currentSearchModuleRoute, inputHasFocus, moduleLabel, t]\n\t);\n\n\tconst clearButtonPlaceholder = useMemo(\n\t\t() =>\n\t\t\tshowClear || isTyping\n\t\t\t\t? t('search.clear', 'Clear search input')\n\t\t\t\t: t('search.already_clear', 'Search input is already clear'),\n\t\t[showClear, t, isTyping]\n\t);\n\n\tconst searchButtonsAreDisabled = useMemo(\n\t\t() => (isTyping ? false : !showClear),\n\t\t[showClear, isTyping]\n\t);\n\n\tconst searchBtnTooltipLabel = useMemo(() => {\n\t\tif (!searchButtonsAreDisabled && searchInputValue.length > 0) {\n\t\t\treturn t('search.start', 'Start search');\n\t\t}\n\t\tif (inputHasFocus) {\n\t\t\treturn t(\n\t\t\t\t'search.type_or_choose_suggestion',\n\t\t\t\t'Type or choose some keywords to start a search'\n\t\t\t);\n\t\t}\n\t\tif (query.length > 0) {\n\t\t\treturn t('label.edit_to_start_search', 'Edit your search to start a new one');\n\t\t}\n\t\treturn t('search.type_to_start_search', 'Type some keywords to start a search');\n\t}, [searchButtonsAreDisabled, searchInputValue.length, inputHasFocus, query.length, t]);\n\n\tconst onChipAdd = useCallback<NonNullable<ChipInputProps['onAdd']>>(\n\t\t(newChip) => {\n\t\t\tsetIsTyping(false);\n\t\t\tsetInputTyped('');\n\t\t\tif (currentSearchModuleRoute) {\n\t\t\t\tconst suggestions = filter(\n\t\t\t\t\tappSuggestions,\n\t\t\t\t\t(suggestion) => suggestion?.app === currentSearchModuleRoute\n\t\t\t\t).slice(0, 5);\n\n\t\t\t\tsetOptions(suggestions);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tlabel: typeof newChip === 'string' ? newChip : '',\n\t\t\t\tvalue: newChip,\n\t\t\t\thasAvatar: false\n\t\t\t};\n\t\t},\n\t\t[appSuggestions, currentSearchModuleRoute]\n\t);\n\n\tuseEffect(() => {\n\t\tsetSearchInputValue(map(query, (queryChip) => ({ ...queryChip, disabled: searchDisabled })));\n\t}, [searchDisabled, query]);\n\n\tconst [raise, setRaise] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (RAISED_SEARCH_BAR) {\n\t\t\tsetRaise(true);\n\t\t}\n\t}, [RAISED_SEARCH_BAR]);\n\n\treturn (\n\t\t<div style={{ width: '100%', height: '100%' }}>\n\t\t\t<Desktop>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Grid2 container sx={{ maxWidth: '50vw', minWidth: '500px' }}>\n\t\t\t\t\t\t<Grid2 size={3}>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\traised={raise ? true : false}\n\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\tborderBottomRightRadius: '0',\n\t\t\t\t\t\t\t\t\tbordertoprightRadius: '0',\n\t\t\t\t\t\t\t\t\tborderTopLeftRadius: '16px',\n\t\t\t\t\t\t\t\t\tborderBottomLeftRadius: '16px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ModuleSelector />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t<Grid2 size={6}>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\traised={raise ? true : false}\n\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\tborderBottomLeftRadius: '0',\n\t\t\t\t\t\t\t\t\tborderTopLeftRadius: '0',\n\t\t\t\t\t\t\t\t\tbackgroundColor: searchDisabled ? 'gray5' : 'gray6'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<StyledContainer orientation=\"horizontal\">\n\t\t\t\t\t\t\t\t\t<StyledChipInput\n\t\t\t\t\t\t\t\t\t\tdisabled={searchDisabled}\n\t\t\t\t\t\t\t\t\t\tinputRef={inputRef}\n\t\t\t\t\t\t\t\t\t\tvalue={searchInputValue}\n\t\t\t\t\t\t\t\t\t\tonAdd={onChipAdd}\n\t\t\t\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\t\t\t\tconfirmChipOnBlur={false}\n\t\t\t\t\t\t\t\t\t\tseparators={[\n\t\t\t\t\t\t\t\t\t\t\t{ key: 'Enter', ctrlKey: false },\n\t\t\t\t\t\t\t\t\t\t\t{ key: ',', ctrlKey: false },\n\t\t\t\t\t\t\t\t\t\t\t{ key: ' ', ctrlKey: false }\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tonChange={onQueryChange}\n\t\t\t\t\t\t\t\t\t\tonInputType={onInputType}\n\t\t\t\t\t\t\t\t\t\tonInputTypeDebounce={0}\n\t\t\t\t\t\t\t\t\t\tonBlur={removeFocus}\n\t\t\t\t\t\t\t\t\t\tonFocus={addFocus}\n\t\t\t\t\t\t\t\t\t\tdisableOptions={disableOptions}\n\t\t\t\t\t\t\t\t\t\trequireUniqueChips={false}\n\t\t\t\t\t\t\t\t\t\twrap={'nowrap'}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</StyledContainer>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t<Grid2 size={3}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\tmarginLeft: '10px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{!searchButtonsAreDisabled && (\n\t\t\t\t\t\t\t\t\t\t<Card raised={raise ? true : false} sx={{ borderRadius: '8px' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip label={clearButtonPlaceholder} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<OutlinedIconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomSize={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticonSize: 'large',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpaddingSize: 'small'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={searchButtonsAreDisabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon=\"BackspaceOutline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonColor={PRIMARY_ICON_COLOR_ACTIVE}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clearSearch}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\traised={raise ? true : false}\n\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\tborderRadius: '8px',\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\t\t\t\twidth: '48px',\n\t\t\t\t\t\t\t\t\t\t\theight: '48px',\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR,\n\t\t\t\t\t\t\t\t\t\t\tmarginLeft: '10px'\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={searchDisabled}\n\t\t\t\t\t\t\t\t\t\t\tlabel={searchBtnTooltipLabel}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\t\tcustomSize={{\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSize: 'large',\n\t\t\t\t\t\t\t\t\t\t\t\t\tpaddingSize: 'small'\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"Search\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={searchButtonsAreDisabled}\n\t\t\t\t\t\t\t\t\t\t\t\ticonColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tsearchButtonsAreDisabled\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? PRIMARY_ICON_COLOR_ACTIVE\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: PRIMARY_ICON_COLOR_INACTIVE\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={onSearch}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t</Grid2>\n\t\t\t\t</div>\n\t\t\t</Desktop>\n\t\t\t<VeryLarge>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Grid2 container sx={{ maxWidth: '50vw', minWidth: '500px' }}>\n\t\t\t\t\t\t<Grid2 size={3}>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\traised={raise ? true : false}\n\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\tborderBottomRightRadius: '0',\n\t\t\t\t\t\t\t\t\tbordertoprightRadius: '0',\n\t\t\t\t\t\t\t\t\tborderTopLeftRadius: '16px',\n\t\t\t\t\t\t\t\t\tborderBottomLeftRadius: '16px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ModuleSelector />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t<Grid2 size={6}>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\traised={raise ? true : false}\n\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\tborderBottomLeftRadius: '0',\n\t\t\t\t\t\t\t\t\tborderTopLeftRadius: '0',\n\t\t\t\t\t\t\t\t\tbackgroundColor: searchDisabled ? 'gray5' : 'gray6'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<StyledContainer orientation=\"horizontal\">\n\t\t\t\t\t\t\t\t\t<StyledChipInput\n\t\t\t\t\t\t\t\t\t\tdisabled={searchDisabled}\n\t\t\t\t\t\t\t\t\t\tinputRef={inputRef}\n\t\t\t\t\t\t\t\t\t\tvalue={searchInputValue}\n\t\t\t\t\t\t\t\t\t\tonAdd={onChipAdd}\n\t\t\t\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\t\t\t\tconfirmChipOnBlur={false}\n\t\t\t\t\t\t\t\t\t\tseparators={[\n\t\t\t\t\t\t\t\t\t\t\t{ key: 'Enter', ctrlKey: false },\n\t\t\t\t\t\t\t\t\t\t\t{ key: ',', ctrlKey: false },\n\t\t\t\t\t\t\t\t\t\t\t{ key: ' ', ctrlKey: false }\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tonChange={onQueryChange}\n\t\t\t\t\t\t\t\t\t\tonInputType={onInputType}\n\t\t\t\t\t\t\t\t\t\tonInputTypeDebounce={0}\n\t\t\t\t\t\t\t\t\t\tonBlur={removeFocus}\n\t\t\t\t\t\t\t\t\t\tonFocus={addFocus}\n\t\t\t\t\t\t\t\t\t\tdisableOptions={disableOptions}\n\t\t\t\t\t\t\t\t\t\trequireUniqueChips={false}\n\t\t\t\t\t\t\t\t\t\twrap={'nowrap'}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</StyledContainer>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t<Grid2 size={3}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\tmarginLeft: '10px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{!searchButtonsAreDisabled && (\n\t\t\t\t\t\t\t\t\t\t<Card raised={raise ? true : false} sx={{ borderRadius: '8px' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip label={clearButtonPlaceholder} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<OutlinedIconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomSize={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticonSize: 'large',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpaddingSize: 'small'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={searchButtonsAreDisabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon=\"BackspaceOutline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonColor={PRIMARY_ICON_COLOR_ACTIVE}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={clearSearch}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\traised={raise ? true : false}\n\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\tborderRadius: '8px',\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\t\t\t\twidth: '48px',\n\t\t\t\t\t\t\t\t\t\t\theight: '48px',\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR,\n\t\t\t\t\t\t\t\t\t\t\tmarginLeft: '10px'\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={searchDisabled}\n\t\t\t\t\t\t\t\t\t\t\tlabel={searchBtnTooltipLabel}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\t\tcustomSize={{\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSize: 'large',\n\t\t\t\t\t\t\t\t\t\t\t\t\tpaddingSize: 'small'\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"Search\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={searchButtonsAreDisabled}\n\t\t\t\t\t\t\t\t\t\t\t\ticonColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tsearchButtonsAreDisabled\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? PRIMARY_ICON_COLOR_ACTIVE\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: PRIMARY_ICON_COLOR_INACTIVE\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={onSearch}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t</Grid2>\n\t\t\t\t</div>\n\t\t\t</VeryLarge>\n\t\t</div>\n\t);\n};\n{\n\t/* <Container\n\t\t\twidth=\"fit\"\n\t\t\tflexGrow=\"1\"\n\t\t\torientation=\"horizontal\"\n\t\t\tref={containerRef}\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t>\n\t\t\t<Tooltip\n\t\t\t\tdisabled={!searchDisabled}\n\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\tlabel={\n\t\t\t\t\ttooltip ??\n\t\t\t\t\tt('search.unable_to_parse_query', 'Unable to complete the search, clear it and retry')\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Container orientation=\"horizontal\" width=\"fill\" maxWidth={'53vw'} minWidth={'32rem'}>\n\t\t\t\t\t<Container minWidth=\"20rem\" width=\"fill\">\n\t\t\t\t\t\t<Container orientation=\"horizontal\" width=\"fill\">\n\t\t\t\t\t\t\t<Container width=\"fit\">\n\t\t\t\t\t\t\t\t<ModuleSelector />\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t<StyledContainer orientation=\"horizontal\">\n\t\t\t\t\t\t\t\t<StyledChipInput\n\t\t\t\t\t\t\t\t\tdisabled={searchDisabled}\n\t\t\t\t\t\t\t\t\tinputRef={inputRef}\n\t\t\t\t\t\t\t\t\tvalue={searchInputValue}\n\t\t\t\t\t\t\t\t\tonAdd={onChipAdd}\n\t\t\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\t\t\tconfirmChipOnBlur={false}\n\t\t\t\t\t\t\t\t\tseparators={[\n\t\t\t\t\t\t\t\t\t\t{ key: 'Enter', ctrlKey: false },\n\t\t\t\t\t\t\t\t\t\t{ key: ',', ctrlKey: false },\n\t\t\t\t\t\t\t\t\t\t{ key: ' ', ctrlKey: false }\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\tbackground={searchDisabled ? 'gray5' : 'gray6'}\n\t\t\t\t\t\t\t\t\tonChange={onQueryChange}\n\t\t\t\t\t\t\t\t\tonInputType={onInputType}\n\t\t\t\t\t\t\t\t\tonInputTypeDebounce={0}\n\t\t\t\t\t\t\t\t\tonBlur={removeFocus}\n\t\t\t\t\t\t\t\t\tonFocus={addFocus}\n\t\t\t\t\t\t\t\t\tdisableOptions={disableOptions}\n\t\t\t\t\t\t\t\t\trequireUniqueChips={false}\n\t\t\t\t\t\t\t\t\twrap={'nowrap'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</StyledContainer>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</Container>\n\n\t\t\t\t\t{!searchButtonsAreDisabled && (\n\t\t\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t\t\t<Tooltip label={clearButtonPlaceholder} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<OutlinedIconButton\n\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\tcustomSize={{\n\t\t\t\t\t\t\t\t\t\ticonSize: 'large',\n\t\t\t\t\t\t\t\t\t\tpaddingSize: 'small'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdisabled={searchButtonsAreDisabled}\n\t\t\t\t\t\t\t\t\ticon=\"BackspaceOutline\"\n\t\t\t\t\t\t\t\t\ticonColor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={clearSearch}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\t\t\t\tdisabled={searchDisabled}\n\t\t\t\t\t\t\tlabel={searchBtnTooltipLabel}\n\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\tcustomSize={{\n\t\t\t\t\t\t\t\t\ticonSize: 'large',\n\t\t\t\t\t\t\t\t\tpaddingSize: 'small'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ticon=\"Search\"\n\t\t\t\t\t\t\t\tdisabled={searchButtonsAreDisabled}\n\t\t\t\t\t\t\t\tbackgroundColor=\"primary\"\n\t\t\t\t\t\t\t\ticonColor=\"gray6\"\n\t\t\t\t\t\t\t\tonClick={onSearch}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</Padding>\n\t\t\t\t</Container>\n\t\t\t</Tooltip>\n\t\t</Container> */\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { create } from 'zustand';\n\nimport type { UtilityBarStore } from '../types/misc';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useUtilityBarStore = create<UtilityBarStore>()((set) => ({\n\tmode: 'closed',\n\tcurrent: undefined,\n\tsecondaryBarState: true,\n\tsetMode: (mode): void =>\n\t\tset((s) => ({ mode, secondaryBarState: mode === 'open' ? false : s.secondaryBarState })),\n\tsetCurrent: (current): void => set({ current }),\n\tsetSecondaryBarState: (secondaryBarState: boolean): void => set({ secondaryBarState })\n}));\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useMemo } from 'react';\n\nimport { filter, intersection, omit } from 'lodash';\n\nimport { useCurrentRoute } from '../history/hooks';\nimport { useAppStore } from '../store/app';\nimport type {\n\tAppRoute,\n\tPrimaryAccessoryView,\n\tSecondaryAccessoryView,\n\tUtilityView\n} from '../types/apps';\n\nexport const checkList = (l1: Array<string>, l2?: Array<string>): boolean =>\n\tintersection(l1, l2).length > 0;\n\nexport const checkRoute = (\n\tview: UtilityView | PrimaryAccessoryView | SecondaryAccessoryView,\n\tactiveRoute?: AppRoute\n): boolean => {\n\tconst activeRouteValues = Object.values(omit(activeRoute, 'focusMode') ?? {});\n\tif (view.blacklistRoutes) return !checkList(activeRouteValues, view.blacklistRoutes);\n\tif (view.whitelistRoutes) return checkList(activeRouteValues, view.whitelistRoutes);\n\treturn true;\n};\nexport const useUtilityViews = (): Array<UtilityView> => {\n\tconst utilityViews = useAppStore((s) => s.views.utilityBar);\n\n\tconst activeRoute = useCurrentRoute();\n\treturn useMemo(\n\t\t() => filter(utilityViews, (v) => checkRoute(v, activeRoute)),\n\t\t[activeRoute, utilityViews]\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useCallback, useMemo } from 'react';\n\nimport type { ContainerProps } from '@zextras/carbonio-design-system';\nimport { Container } from '@zextras/carbonio-design-system';\nimport { filter, findIndex, map, sortBy } from 'lodash';\nimport { Route, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { Collapser } from './collapser';\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { useCurrentRoute } from '../history/hooks';\nimport { useAppStore } from '../store/app';\nimport type { AppRoute } from '../types/apps';\nimport { useUtilityBarStore } from '../utility-bar/store';\nimport { checkRoute } from '../utility-bar/utils';\n\nconst SidebarContainer = styled(Container)<ContainerProps & { sidebarIsOpen?: boolean }>`\n\tmin-width: 3rem;\n\tmax-width: 100%;\n\twidth: ${({ sidebarIsOpen }): string => (sidebarIsOpen ? '100%' : '3rem')};\n\ttransition: width 300ms;\n\toverflow-x: hidden;\n`;\n\nconst ShellSecondaryBarComponent: FC<{ activeRoute: AppRoute }> = ({ activeRoute }) => {\n\tconst isOpen = useUtilityBarStore((s) => s.secondaryBarState);\n\tconst setIsOpen = useUtilityBarStore((s) => s.setSecondaryBarState);\n\tconst onCollapserClick = useCallback(() => setIsOpen(!isOpen), [isOpen, setIsOpen]);\n\tconst secondaryBarViews = useAppStore((s) => s.views.secondaryBar);\n\tconst secondaryBarAccessoryViews = useAppStore((s) => s.views.secondaryBarAccessories);\n\tconst accessories = useMemo(\n\t\t() =>\n\t\t\tsortBy(\n\t\t\t\tfilter(secondaryBarAccessoryViews, (v) => checkRoute(v, activeRoute)),\n\t\t\t\t'position'\n\t\t\t),\n\t\t[activeRoute, secondaryBarAccessoryViews]\n\t);\n\tconst disabled = useMemo(\n\t\t() => findIndex(secondaryBarViews, (view) => view.id === activeRoute?.id) < 0,\n\t\t[activeRoute?.id, secondaryBarViews]\n\t);\n\treturn disabled ? null : (\n\t\t<>\n\t\t\t<div style={{ height: '100%', width: '100%' }}>\n\t\t\t\t<SidebarContainer\n\t\t\t\t\tdata-testid=\"SideSecondaryBarContainer\"\n\t\t\t\t\tsidebarIsOpen={isOpen}\n\t\t\t\t\trole=\"menu\"\n\t\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\t\tonClick={isOpen ? undefined : onCollapserClick}\n\t\t\t\t>\n\t\t\t\t\t<Container mainAlignment=\"flex-start\">\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t{map(secondaryBarViews, (view) => (\n\t\t\t\t\t\t\t\t<Route key={view.id} path={`/${view.route}`}>\n\t\t\t\t\t\t\t\t\t<AppContextProvider pkg={view.app}>\n\t\t\t\t\t\t\t\t\t\t<view.component expanded={isOpen} />\n\t\t\t\t\t\t\t\t\t</AppContextProvider>\n\t\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</Container>\n\t\t\t\t\t<Container mainAlignment=\"flex-end\" height=\"fit\">\n\t\t\t\t\t\t{accessories.map((view) => (\n\t\t\t\t\t\t\t<AppContextProvider key={view.id} pkg={view.app}>\n\t\t\t\t\t\t\t\t<view.component expanded={isOpen} />\n\t\t\t\t\t\t\t</AppContextProvider>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Container>\n\t\t\t\t</SidebarContainer>\n\t\t\t</div>\n\n\t\t\t{/* <Collapser onClick={onCollapserClick} open={isOpen} /> */}\n\t\t</>\n\t);\n};\n\nconst MemoShellSecondaryBar = React.memo(ShellSecondaryBarComponent);\n\nconst ShellSecondaryBar: FC = () => {\n\tconst activeRoute = useCurrentRoute() as AppRoute;\n\treturn <MemoShellSecondaryBar activeRoute={activeRoute} />;\n};\n\nexport default ShellSecondaryBar;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport {\n\tCatcher,\n\tContainer,\n\tPadding,\n\tResponsive,\n\tuseScreenMode\n} from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\n\nimport { CreationButton } from './creation-button';\nimport { Logo } from './logo';\nimport { BOARD_CONTAINER_ZINDEX, HEADER_BAR_HEIGHT } from '../constants';\nimport { useDarkMode } from '../dark-mode/use-dark-mode';\nimport { SearchBar } from '../search/search-bar';\nimport { useAppStore } from '../store/app';\n\n/////sruvi\nimport { Card, Drawer, Grid2, IconButton, Typography } from '@mui/material';\nimport { BACKGROUND_COLOR, FOREGROUND_COLOR } from '../sruvi/EditedColors';\nimport Desktop from '../sruvi/Desktop';\nimport Mobile from '../sruvi/Mobile';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport indryvelogo from '../../assets/indryve.png';\nimport { useUserAccount } from '../lib';\nimport { useUtilityBarStore } from '../utility-bar/store';\nimport { Collapser } from './collapser';\nimport ShellSecondaryBar from './shell-secondary-bar';\nimport VeryLarge from '../sruvi/VeryLarge';\nimport { AccountCircleRounded, PersonOffOutlined } from '@mui/icons-material';\n\n//////////sruvi\n\nconst StyledLogo = styled(Logo)`\n\theight: 2rem;\n`;\n\nconst ShellHeaderContainer = styled(Container)`\n\tz-index: ${BOARD_CONTAINER_ZINDEX + 1};\n`;\n\ninterface ShellHeaderProps {\n\tchildren: React.ReactNode | React.ReactNode[];\n}\n\nconst ShellHeader = ({ children }: ShellHeaderProps): React.JSX.Element => {\n\tconst { darkReaderStatus } = useDarkMode();\n\n\tconst screenMode = useScreenMode();\n\tconst searchEnabled = useAppStore((s) => s.views.search.length > 0);\n\tconst account = useUserAccount();\n\n\t//sruvi\n\tconst isOpen = useUtilityBarStore((s) => s.secondaryBarState);\n\n\tconst onclickedbar = () => {\n\t\tuseUtilityBarStore.getState().setSecondaryBarState(!isOpen);\n\t};\n\n\tconst [open, setOpen] = React.useState(false);\n\n\tconst toggleDrawer = (newOpen: boolean) => () => {\n\t\tsetOpen(newOpen);\n\t};\n\n\t///sruvi\n\treturn (\n\t\t<div style={{ width: '100%', height: '100%' }}>\n\t\t\t<VeryLarge>\n\t\t\t\t<Catcher>\n\t\t\t\t\t<Grid2\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tsx={{ height: '100%', width: '100%', backgroundColor: BACKGROUND_COLOR }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid2 size={3} sx={{ height: '96px' }}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\tmarginLeft: '16px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconButton onClick={onclickedbar}>\n\t\t\t\t\t\t\t\t\t<MenuIcon style={{}} />\n\t\t\t\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={indryvelogo}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\t\t\twidth: 'auto',\n\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '16px'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t<Grid2 size={6}>{searchEnabled && <SearchBar />}</Grid2>\n\t\t\t\t\t\t<Grid2 size={3}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-end',\n\t\t\t\t\t\t\t\t\tmarginRight: '16px',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\theight: '100%'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Typography variant=\"body2\" style={{ marginRight: '16px' }}>\n\t\t\t\t\t\t\t\t\tWelcome! {account?.displayName || 'Guest'}\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Card raised sx={{ backgroundColor: FOREGROUND_COLOR, borderRadius: '50%' }}>\n\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t</Grid2>\n\t\t\t\t</Catcher>\n\t\t\t</VeryLarge>\n\t\t\t<Desktop>\n\t\t\t\t<Catcher>\n\t\t\t\t\t<Grid2\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tsx={{ height: '100%', width: '100%', backgroundColor: BACKGROUND_COLOR }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid2 size={3} sx={{ height: '96px' }}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\tmarginLeft: '16px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconButton onClick={onclickedbar}>\n\t\t\t\t\t\t\t\t\t<MenuIcon style={{}} />\n\t\t\t\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={indryvelogo}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\t\t\twidth: 'auto',\n\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '16px'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t<Grid2 size={6}>{searchEnabled && <SearchBar />}</Grid2>\n\t\t\t\t\t\t<Grid2 size={3}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-end',\n\t\t\t\t\t\t\t\t\tmarginRight: '16px',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\theight: '100%'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Typography variant=\"body2\" style={{ marginRight: '16px' }}>\n\t\t\t\t\t\t\t\t\tWelcome! {account?.displayName || 'Guest'}\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Card raised sx={{ backgroundColor: FOREGROUND_COLOR, borderRadius: '50%' }}>\n\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t</Grid2>\n\t\t\t\t</Catcher>\n\t\t\t</Desktop>\n\t\t\t<Mobile>\n\t\t\t\t<Catcher>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\theight: '70px',\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\tjustifyContent: 'center'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\traised\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tmaxWidth: '100%',\n\t\t\t\t\t\t\t\tminWidth: '90%',\n\t\t\t\t\t\t\t\theight: '50px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Grid2\n\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\tsx={{ height: '100%', width: '100%', backgroundColor: BACKGROUND_COLOR }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Grid2 size={6} sx={{ height: '100%' }}>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start',\n\t\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\t\t\tmarginLeft: '8px'\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => setOpen(true)}>\n\t\t\t\t\t\t\t\t\t\t\t<MenuIcon style={{}} />\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={indryvelogo}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\theight: '30px',\n\t\t\t\t\t\t\t\t\t\t\t\twidth: 'auto',\n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft: '8px'\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Grid2>\n\n\t\t\t\t\t\t\t\t<Grid2 size={6}>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-end',\n\t\t\t\t\t\t\t\t\t\t\tmarginRight: '16px',\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\t\t\theight: '100%'\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/* <Typography variant=\"body2\" style={{ marginRight: '16px' }}>\n\t\t\t\t\t\t\t\t\tWelcome! {account?.displayName || 'Guest'}\n\t\t\t\t\t\t\t\t</Typography> */}\n\t\t\t\t\t\t\t\t\t\t<Card raised sx={{ backgroundColor: FOREGROUND_COLOR, borderRadius: '50%' }}>\n\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Drawer\n\t\t\t\t\t\tsx={{ width: '60vw', height: '100%', borderTopRightRadius: '10px' }}\n\t\t\t\t\t\tanchor=\"left\"\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tonClose={toggleDrawer(false)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: '60vw',\n\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\tborderTopRightRadius: '10px',\n\t\t\t\t\t\t\t\tjustifyContent: 'space-between'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\theight: '20%',\n\t\t\t\t\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR,\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-end'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<AccountCircleRounded style={{ marginLeft: '16px', fontSize: '48px' }} />\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\" style={{ marginLeft: '16px' }}>\n\t\t\t\t\t\t\t\t\tWelcome {account?.displayName || 'Guest'}\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style={{ height: '75%' }}>\n\t\t\t\t\t\t\t\t<div style={{ width: '100%', height: '100%', overflowY: 'auto' }}>\n\t\t\t\t\t\t\t\t\t<ShellSecondaryBar />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\theight: '5%',\n\t\t\t\t\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR,\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-end'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Typography style={{ marginLeft: '16px' }} variant=\"body2\">\n\t\t\t\t\t\t\t\t\tCopyrights @ 2024 Indryve Inc.\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Drawer>\n\t\t\t\t</Catcher>\n\t\t\t</Mobile>\n\t\t</div>\n\t);\n};\nexport default ShellHeader;\n{\n\t/* <ShellHeaderContainer\n\t\t\t\t\t\t\tdata-testid=\"MainHeaderContainer\"\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\tbackground={'gray3'}\n\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t\theight={HEADER_BAR_HEIGHT}\n\t\t\t\t\t\t\tminHeight={HEADER_BAR_HEIGHT}\n\t\t\t\t\t\t\tmaxHeight={HEADER_BAR_HEIGHT}\n\t\t\t\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\t\t\t\tpadding={{\n\t\t\t\t\t\t\t\thorizontal: screenMode === 'desktop' ? 'large' : 'extrasmall',\n\t\t\t\t\t\t\t\tvertical: 'small'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\tminWidth=\"fit-content\"\n\t\t\t\t\t\t\t\tdata-testid=\"HeaderMainLogoContainer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Container width=\"15.625rem\" height=\"2rem\" crossAlignment=\"flex-start\">\n\t\t\t\t\t\t\t\t\t{darkReaderStatus && <StyledLogo />}\n\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t<Padding horizontal=\"large\">\n\t\t\t\t\t\t\t\t\t<CreationButton />\n\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t<Responsive mode=\"desktop\">{searchEnabled && <SearchBar />}</Responsive>\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t<Container orientation=\"horizontal\" width=\"auto\" mainAlignment=\"flex-end\">\n\t\t\t\t\t\t\t\t<Responsive mode=\"desktop\">{children}</Responsive>\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t</ShellHeaderContainer> */\n}\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type React from 'react';\nimport { useMemo } from 'react';\n\nimport { useLoginConfigStore } from './store';\nimport DefaultLogo from '../../../assets/carbonio.svg';\nimport { useDarkMode } from '../../dark-mode/use-dark-mode';\n\nexport function useLogo(): string | React.ComponentType {\n\tconst { carbonioWebUiAppLogo, carbonioWebUiDarkAppLogo } = useLoginConfigStore();\n\n\tconst { darkModeEnabled } = useDarkMode();\n\n\treturn useMemo(() => {\n\t\tif (darkModeEnabled) {\n\t\t\treturn carbonioWebUiDarkAppLogo || carbonioWebUiAppLogo || DefaultLogo;\n\t\t}\n\t\treturn carbonioWebUiAppLogo || carbonioWebUiDarkAppLogo || DefaultLogo;\n\t}, [carbonioWebUiDarkAppLogo, carbonioWebUiAppLogo, darkModeEnabled]);\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { FC } from 'react';\nimport React, { forwardRef } from 'react';\n\nimport { Container, Badge } from '@zextras/carbonio-design-system';\nimport type { DefaultTheme } from 'styled-components';\nimport styled from 'styled-components';\n\nimport type { BadgeInfo } from '../types/apps';\n\nconst MiniBadge = styled(Badge)<{ $color?: keyof DefaultTheme['palette'] }>`\n\tposition: absolute;\n\tbottom: 25%;\n\tright: 25%;\n\ttransform: translate(30%, 30%);\n\tmin-width: 0.75rem;\n\tmin-height: 0.75rem;\n\tpointer-events: none;\n\tz-index: 99;\n\tfont-size: 0.625rem;\n\tbackground: ${({ $color, theme }): string => theme.palette[$color ?? 'primary'].regular};\n\tpadding: 0.125rem;\n\tcolor: ${({ theme }): string => theme.palette.gray6.regular};\n`;\n\nconst BadgeWrap: FC<{ badge: BadgeInfo }> = forwardRef<HTMLDivElement, { badge: BadgeInfo }>(\n\tfunction BadgeWrapFn({ badge, children }, ref): JSX.Element {\n\t\treturn (\n\t\t\t<Container width={'3rem'} height={'3rem'} style={{ position: 'relative' }} ref={ref}>\n\t\t\t\t{badge.show && (\n\t\t\t\t\t<MiniBadge\n\t\t\t\t\t\tdata-testid={'badge-counter'}\n\t\t\t\t\t\tvalue={badge.showCount ? badge.count ?? 0 : ''}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{children}\n\t\t\t</Container>\n\t\t);\n\t}\n);\n\nexport default BadgeWrap;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useEffect, useMemo, useRef } from 'react';\n\nimport { Container, IconButton, Row, Tooltip } from '@zextras/carbonio-design-system';\nimport { map, isEmpty, trim, filter, sortBy, noop } from 'lodash';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport BadgeWrap from './badge-wrap';\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { BOARD_CONTAINER_ZINDEX, PRIMARY_BAR_WIDTH, SEARCH_APP_ID } from '../constants';\nimport { useCurrentRoute } from '../history/hooks';\nimport { useAppStore } from '../store/app';\nimport { minimizeBoards, reopenBoards, useBoardStore } from '../store/boards';\nimport type { PrimaryAccessoryView, PrimaryBarView } from '../types/apps';\nimport { checkRoute } from '../utility-bar/utils';\nimport {\n\tACCESSORY_ICON_COLOR,\n\tFOREGROUND_COLOR,\n\tFOREGROUND_COLOR_FOCUSED,\n\tPRIMARY_ICON_COLOR_ACTIVE,\n\tPRIMARY_ICON_COLOR_INACTIVE,\n\tRAISED_SEARCH_BAR\n} from '../sruvi/EditedColors';\nimport Desktop from '../sruvi/Desktop';\nimport Mobile from '../sruvi/Mobile';\nimport { Card } from '@mui/material';\nimport VeryLarge from '../sruvi/VeryLarge';\nimport { useMediaQuery } from 'react-responsive';\n\nconst PrimaryBarContainer = styled(Container)`\n\tborder-right: 0.0625rem solid ${({ theme }): string => theme.palette.gray3.regular};\n\tz-index: ${BOARD_CONTAINER_ZINDEX + 1};\n`;\n\nconst ToggleBoardIcon = (): React.JSX.Element | null => {\n\tconst { minimized, boards } = useBoardStore();\n\n\treturn isEmpty(boards) ? null : (\n\t\t<Container width={'4rem'} height={'4rem'}>\n\t\t\t<IconButton\n\t\t\t\ticonColor={ACCESSORY_ICON_COLOR}\n\t\t\t\ticon={minimized ? 'BoardOpen' : 'BoardCollapse'}\n\t\t\t\tonClick={minimized ? reopenBoards : minimizeBoards}\n\t\t\t\tsize=\"large\"\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n\ntype PrimaryBarItemProps = {\n\tview: PrimaryBarView;\n\tactive: boolean;\n\tonClick: () => void;\n};\n\ntype PrimaryBarAccessoryItemProps = {\n\tview: PrimaryAccessoryView;\n};\n\nconst PrimaryBarElement = ({\n\tview,\n\tactive,\n\tonClick\n}: PrimaryBarItemProps): React.JSX.Element | null => {\n\tconst isDesktop = useMediaQuery({ minWidth: 1025 });\n\n\tconst isTabletOrMobile = useMediaQuery({ maxWidth: 1024 });\n\n\tif (isTabletOrMobile) {\n\t\tif (\n\t\t\t['Files', 'Chats', 'Contact Groups and Distribution Lists', 'Tasks', 'Search'].includes(\n\t\t\t\tview.label\n\t\t\t)\n\t\t) {\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (['Files', 'Chats', 'Contact Groups and Distribution Lists'].includes(view.label)) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tconst [raise, setRaise] = React.useState(false);\n\tuseEffect(() => {\n\t\tif (RAISED_SEARCH_BAR) {\n\t\t\tsetRaise(true);\n\t\t} else {\n\t\t\tsetRaise(false);\n\t\t}\n\t}, [RAISED_SEARCH_BAR]);\n\n\treturn (\n\t\t<Tooltip label={view.label} placement=\"right\" key={view.id}>\n\t\t\t<BadgeWrap badge={view.badge}>\n\t\t\t\t{typeof view.component === 'string' ? (\n\t\t\t\t\t<Card raised={raise && active ? true : false}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ticon={view.component}\n\t\t\t\t\t\t\tbackgroundColor={active ? FOREGROUND_COLOR : FOREGROUND_COLOR_FOCUSED}\n\t\t\t\t\t\t\ticonColor={active ? PRIMARY_ICON_COLOR_ACTIVE : PRIMARY_ICON_COLOR_INACTIVE}\n\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tdata-isselected={active}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Card>\n\t\t\t\t) : (\n\t\t\t\t\t<view.component active={active} />\n\t\t\t\t)}\n\t\t\t</BadgeWrap>\n\t\t</Tooltip>\n\t);\n};\n\nconst PrimaryBarAccessoryElement = ({ view }: PrimaryBarAccessoryItemProps): React.JSX.Element => (\n\t<Tooltip label={view.label} placement=\"right\" key={view.id}>\n\t\t<AppContextProvider key={view.id} pkg={view.app}>\n\t\t\t{typeof view.component === 'string' ? (\n\t\t\t\t<IconButton\n\t\t\t\t\ticon={view.component}\n\t\t\t\t\tbackgroundColor=\"gray6\"\n\t\t\t\t\ticonColor=\"text\"\n\t\t\t\t\tonClick={view.onClick ?? noop}\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<view.component />\n\t\t\t)}\n\t\t</AppContextProvider>\n\t</Tooltip>\n);\n\nconst OverlayRow = styled(Row)`\n\tmin-height: 0.0625rem;\n\toverflow-y: auto;\n\toverflow-y: overlay;\n`;\n\nconst ShellPrimaryBar = (): React.JSX.Element | null => {\n\tconst activeRoute = useCurrentRoute();\n\tconst primaryBarViews = useAppStore((s) => s.views.primaryBar);\n\tconst { push } = useHistory();\n\n\tconst { pathname, search } = useLocation();\n\tconst routesRef = useRef<Record<string, string>>({});\n\n\tuseEffect(() => {\n\t\troutesRef.current = primaryBarViews.reduce((accumulator, view) => {\n\t\t\tif (!accumulator[view.id]) {\n\t\t\t\taccumulator[view.id] = view.route;\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t}, routesRef.current);\n\t}, [primaryBarViews]);\n\n\tuseEffect(() => {\n\t\tif (activeRoute && activeRoute.id !== SEARCH_APP_ID) {\n\t\t\troutesRef.current = {\n\t\t\t\t...routesRef.current,\n\t\t\t\t[activeRoute.id]: `${trim(pathname, '/')}${search}`\n\t\t\t};\n\t\t}\n\t}, [activeRoute, pathname, search]);\n\n\tconst primaryBarAccessoryViews = useAppStore((s) => s.views.primaryBarAccessories);\n\n\tconst accessoryViews = useMemo(\n\t\t() =>\n\t\t\tsortBy(\n\t\t\t\tfilter(primaryBarAccessoryViews, (v) => checkRoute(v, activeRoute)),\n\t\t\t\t'position'\n\t\t\t),\n\t\t[activeRoute, primaryBarAccessoryViews]\n\t);\n\n\tconst primaryBarItems = useMemo(\n\t\t() =>\n\t\t\tmap(primaryBarViews, (view) =>\n\t\t\t\tview.visible ? (\n\t\t\t\t\t<PrimaryBarElement\n\t\t\t\t\t\tkey={view.id}\n\t\t\t\t\t\tonClick={(): void => push(`/${routesRef.current[view.id]}`)}\n\t\t\t\t\t\tview={view}\n\t\t\t\t\t\tactive={activeRoute?.id === view.id}\n\t\t\t\t\t/>\n\t\t\t\t) : null\n\t\t\t),\n\t\t[activeRoute?.id, push, primaryBarViews]\n\t);\n\n\tconst accessoryItems = useMemo(\n\t\t() => accessoryViews.map((view) => <PrimaryBarAccessoryElement view={view} key={view.id} />),\n\t\t[accessoryViews]\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tflexDirection: 'column',\n\n\t\t\t\tjustifyContent: 'center',\n\t\t\t\tzIndex: 1\n\t\t\t}}\n\t\t>\n\t\t\t<VeryLarge>\n\t\t\t\t<PrimaryBarContainer\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t\theight=\"fill\"\n\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tdata-testid=\"SideMenuContainer\"\n\t\t\t\t>\n\t\t\t\t\t<OverlayRow\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\ttakeAvailableSpace\n\t\t\t\t\t\twrap=\"nowrap\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{primaryBarItems}\n\t\t\t\t\t\t<ToggleBoardIcon />\n\t\t\t\t\t</OverlayRow>\n\t\t\t\t\t<OverlayRow mainAlignment=\"flex-end\" orientation=\"vertical\" wrap=\"nowrap\">\n\t\t\t\t\t\t{accessoryItems}\n\t\t\t\t\t</OverlayRow>\n\t\t\t\t</PrimaryBarContainer>\n\t\t\t</VeryLarge>\n\n\t\t\t<Desktop>\n\t\t\t\t<PrimaryBarContainer\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t\theight=\"fill\"\n\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tdata-testid=\"SideMenuContainer\"\n\t\t\t\t>\n\t\t\t\t\t<OverlayRow\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\ttakeAvailableSpace\n\t\t\t\t\t\twrap=\"nowrap\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{primaryBarItems}\n\t\t\t\t\t\t<ToggleBoardIcon />\n\t\t\t\t\t</OverlayRow>\n\t\t\t\t\t<OverlayRow mainAlignment=\"flex-end\" orientation=\"vertical\" wrap=\"nowrap\">\n\t\t\t\t\t\t{accessoryItems}\n\t\t\t\t\t</OverlayRow>\n\t\t\t\t</PrimaryBarContainer>\n\t\t\t</Desktop>\n\t\t\t<Mobile>\n\t\t\t\t<Card raised style={{ width: '100%', height: '100%' }}>\n\t\t\t\t\t<PrimaryBarContainer\n\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\theight=\"fill\"\n\t\t\t\t\t\tbackground={'white'}\n\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\t\t\tdata-testid=\"SideMenuContainer\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<OverlayRow\n\t\t\t\t\t\t\tmainAlignment=\"space-around\"\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\ttakeAvailableSpace\n\t\t\t\t\t\t\twrap=\"nowrap\"\n\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{primaryBarItems}\n\t\t\t\t\t\t\t<ToggleBoardIcon />\n\t\t\t\t\t\t</OverlayRow>\n\t\t\t\t\t\t<OverlayRow mainAlignment=\"flex-end\" orientation=\"vertical\" wrap=\"nowrap\">\n\t\t\t\t\t\t\t{accessoryItems}\n\t\t\t\t\t\t</OverlayRow>\n\t\t\t\t\t</PrimaryBarContainer>\n\t\t\t\t</Card>\n\t\t\t</Mobile>\n\t\t</div>\n\t);\n};\n\nexport default ShellPrimaryBar;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo } from 'react';\n\nimport type { DropdownItem } from '@zextras/carbonio-design-system';\nimport { Container, Dropdown, IconButton, Tooltip } from '@zextras/carbonio-design-system';\nimport { map, noop } from 'lodash';\n\nimport { useUtilityBarStore } from './store';\nimport { useUtilityViews } from './utils';\nimport { CUSTOM_EVENTS } from '../constants';\nimport { fetchNoOp } from '../network/fetch';\nimport { logout } from '../network/logout';\nimport { useUserAccount } from '../store/account';\nimport { getT } from '../store/i18n/hooks';\nimport type { UtilityView } from '../types/apps';\n\nexport interface UtilityBarItemProps {\n\tview: UtilityView;\n}\n\nconst UtilityBarItem = ({ view }: UtilityBarItemProps): React.JSX.Element => {\n\tconst { mode, setMode, current, setCurrent } = useUtilityBarStore();\n\tconst onClick = useCallback((): void => {\n\t\tsetMode((current !== view.id && 'open') || (mode !== 'open' && 'open') || 'closed');\n\t\tsetCurrent(view.id);\n\t}, [current, mode, setCurrent, setMode, view.id]);\n\tif (typeof view.button === 'string') {\n\t\treturn (\n\t\t\t<Tooltip label={view.label} placement=\"bottom-end\">\n\t\t\t\t<IconButton\n\t\t\t\t\ticon={view.button}\n\t\t\t\t\ticonColor={current === view.id ? 'primary' : 'text'}\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t/>\n\t\t\t</Tooltip>\n\t\t);\n\t}\n\treturn <view.button mode={mode} setMode={setMode} />;\n};\n\nexport const ShellUtilityBar = (): React.JSX.Element => {\n\tconst views = useUtilityViews();\n\tconst t = getT();\n\tconst account = useUserAccount();\n\n\tconst updateViews = useCallback(() => {\n\t\tconst updateViewEvent = new CustomEvent(CUSTOM_EVENTS.updateView);\n\t\twindow.dispatchEvent(updateViewEvent);\n\t}, []);\n\n\tconst accountItems = useMemo(\n\t\t(): DropdownItem[] => [\n\t\t\t{\n\t\t\t\tid: 'account',\n\t\t\t\tlabel: account?.displayName ?? 'Account',\n\t\t\t\tdisabled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'email',\n\t\t\t\tlabel: account?.name ?? '',\n\t\t\t\tdisabled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'divider',\n\t\t\t\tid: 'divider',\n\t\t\t\tlabel: 'divider'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'update',\n\t\t\t\tlabel: t('label.update_view', 'Update view'),\n\t\t\t\tonClick: (): void => {\n\t\t\t\t\tfetchNoOp();\n\t\t\t\t\tupdateViews();\n\t\t\t\t},\n\t\t\t\ticon: 'Refresh'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'docs',\n\t\t\t\tlabel: t('label.documentation', 'Documentation'),\n\t\t\t\tonClick: noop,\n\t\t\t\tdisabled: true,\n\t\t\t\ticon: 'InfoOutline'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'logout',\n\t\t\t\tlabel: t('label.logout', 'Logout'),\n\t\t\t\tonClick: logout,\n\t\t\t\ticon: 'LogOut'\n\t\t\t}\n\t\t],\n\t\t[account?.displayName, account?.name, t, updateViews]\n\t);\n\n\tconst viewItems = useMemo(\n\t\t() => map(views, (view) => <UtilityBarItem view={view} key={view.id} />),\n\t\t[views]\n\t);\n\n\treturn (\n\t\t<Container orientation=\"horizontal\" width=\"fit\">\n\t\t\t{viewItems}\n\t\t\t<Tooltip label={account?.displayName ?? account?.name} placement=\"bottom-end\">\n\t\t\t\t<Dropdown items={accountItems} maxWidth=\"18.75rem\" disableAutoFocus>\n\t\t\t\t\t<IconButton icon=\"PersonOutline\" size=\"large\" onClick={noop} />\n\t\t\t\t</Dropdown>\n\t\t\t</Tooltip>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { FC } from 'react';\nimport React, { useEffect, useMemo } from 'react';\n\nimport { Container, Responsive } from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\nimport styled from 'styled-components';\n\nimport { useUtilityBarStore } from './store';\nimport { useUtilityViews } from './utils';\nimport AppContextProvider from '../boot/app/app-context-provider';\n\nconst Panel = styled(Container)<{ mode: string }>`\n\twidth: ${({ mode }): number => (mode !== 'closed' ? 16 : 3)}rem;\n\tborder-radius: 0;\n\theight: 100%;\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\ttransition: width 0.2s;\n\tborder-left: 0.0625rem solid ${({ theme }): string => theme.palette.gray2.regular};\n`;\nconst Spacer = styled.div<{ mode: string }>`\n\tposition: relative;\n\twidth: ${({ mode }): number => (mode === 'open' ? 16 : 3)}rem;\n\theight: 100%;\n\ttransition: width 0.2s;\n`;\n\nexport const ShellUtilityPanel: FC = () => {\n\tconst { mode, setMode, current, setCurrent } = useUtilityBarStore();\n\tconst views = useUtilityViews();\n\tconst currentPanel = useMemo(() => find(views, (view) => view.id === current), [current, views]);\n\tuseEffect(() => {\n\t\tif (!(current && currentPanel)) {\n\t\t\tsetCurrent(views[0]?.id);\n\t\t}\n\t}, [current, currentPanel, setCurrent, views]);\n\treturn currentPanel ? (\n\t\t<Responsive mode=\"desktop\">\n\t\t\t<Spacer mode={mode}>\n\t\t\t\t<Panel mode={mode} mainAlignment=\"flex-start\">\n\t\t\t\t\t{currentPanel && (\n\t\t\t\t\t\t<AppContextProvider pkg={currentPanel?.id}>\n\t\t\t\t\t\t\t<currentPanel.component mode={mode} setMode={setMode} />\n\t\t\t\t\t\t</AppContextProvider>\n\t\t\t\t\t)}\n\t\t\t\t</Panel>\n\t\t\t</Spacer>\n\t\t</Responsive>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport {\n\tButton,\n\tContainer,\n\tDropdown,\n\ttype DropdownItem,\n\tMultiButton\n} from '@zextras/carbonio-design-system';\nimport type { Location } from 'history';\nimport { find, groupBy, noop, reduce } from 'lodash';\nimport { useLocation } from 'react-router-dom';\n\nimport { ACTION_TYPES } from '../constants';\nimport { useCurrentRoute } from '../history/hooks';\nimport { useAppList } from '../store/app';\nimport { getT } from '../store/i18n/hooks';\nimport { useActions } from '../store/integrations/hooks';\nimport type { AppRoute, CarbonioModule } from '../types/apps';\nimport { Card, Divider, Menu, MenuItem, Typography } from '@mui/material';\nimport { ArrowDownward } from '@mui/icons-material';\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport CreateIcon from '@mui/icons-material/Create';\nimport Desktop from '../sruvi/Desktop';\nimport { FOREGROUND_COLOR, PRIMARY_ICON_COLOR_ACTIVE } from '../sruvi/EditedColors';\nimport Mobile from '../sruvi/Mobile';\nimport { useUtilityBarStore } from '../utility-bar/store';\nimport VeryLarge from '../sruvi/VeryLarge';\n\ninterface CreationButtonProps {\n\tactiveRoute: AppRoute;\n\tlocation: Location;\n}\n\nexport const CreationButtonComponent = ({\n\tactiveRoute,\n\tlocation\n}: CreationButtonProps): React.JSX.Element => {\n\tconst t = getT();\n\tconst actions = useActions({ activeRoute, location }, ACTION_TYPES.NEW);\n\n\tconst primaryAction = useMemo(\n\t\t() =>\n\t\t\tfind(\n\t\t\t\tactions,\n\t\t\t\t(action) =>\n\t\t\t\t\t(action.group === activeRoute?.id || action.group === activeRoute?.app) &&\n\t\t\t\t\taction.primary === true\n\t\t\t),\n\t\t[actions, activeRoute?.app, activeRoute?.id]\n\t);\n\tconst apps = useAppList();\n\tconst byApp = useMemo(() => groupBy(actions, 'group'), [actions]);\n\n\tconst secondaryActions = useMemo<DropdownItem[]>(\n\t\t(): DropdownItem[] => [\n\t\t\t...(byApp[activeRoute?.app ?? ''] ?? []),\n\t\t\t...reduce<CarbonioModule, DropdownItem[]>(\n\t\t\t\tapps,\n\t\t\t\t(acc, app, i): DropdownItem[] => {\n\t\t\t\t\tif (app.name !== activeRoute?.app && byApp[app.name]?.length > 0) {\n\t\t\t\t\t\tacc.push({ type: 'divider', label: '', id: `divider-${i}` }, ...byApp[app.name]);\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t)\n\t\t],\n\t\t[activeRoute?.app, apps, byApp]\n\t);\n\n\tconst [open, setOpen] = useState(false);\n\tconst [setting, setsettinOpen] = useState(false);\n\n\tconst isOpen = useUtilityBarStore((s) => s.secondaryBarState);\n\n\tconst [barisopen, setbarisopen] = React.useState(false);\n\n\tuseEffect(() => {\n\t\tif (isOpen) {\n\t\t\tsetbarisopen(true);\n\t\t} else {\n\t\t\tsetbarisopen(false);\n\t\t}\n\t}, [isOpen]);\n\n\t// \treturn primaryAction ? (\n\t// \t\t<Container minWidth=\"80px\">\n\t// \t\t\t<MultiButton\n\t// \t\t\t\tdata-testid=\"NewItemButton\"\n\t// \t\t\t\tsize=\"extralarge\"\n\t// \t\t\t\tbackground={'primary'}\n\t// \t\t\t\tlabel={t('new', 'New')}\n\t// \t\t\t\tonClick={primaryAction.onClick || primaryAction.click || noop}\n\t// \t\t\t\titems={secondaryActions}\n\t// \t\t\t\tdisabledPrimary={!primaryAction || primaryAction?.disabled}\n\t// \t\t\t\tdisabledSecondary={!secondaryActions?.length}\n\t// \t\t\t/>\n\t// \t\t</Container>\n\t// \t) : (\n\t// \t\t<Dropdown items={secondaryActions} onClose={onClose} onOpen={onOpen}>\n\t// \t\t\t<Button\n\t// \t\t\t\tdata-testid=\"NewItemButton\"\n\t// \t\t\t\tsize=\"extralarge\"\n\t// \t\t\t\tbackgroundColor=\"primary\"\n\t// \t\t\t\tlabel={t('new', 'New')}\n\t// \t\t\t\ticon={open ? 'ChevronUp' : 'ChevronDown'}\n\t// \t\t\t\tonClick={noop}\n\t// \t\t\t/>\n\t// \t\t</Dropdown>\n\t// \t);\n\t// };\n\n\treturn primaryAction ? (\n\t\t<div>\n\t\t\t{barisopen ? (\n\t\t\t\t<div>\n\t\t\t\t\t<Desktop>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\traised\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR,\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\tmarginLeft: '16px',\n\t\t\t\t\t\t\t\twidth: 'fit-content',\n\t\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\t\tborderRadius: '16px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\tpadding: '16px',\n\t\t\t\t\t\t\t\t\tpaddingBottom: '16px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={primaryAction.onClick || primaryAction.click || noop}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CreateIcon style={{ marginRight: '0.5rem', color: PRIMARY_ICON_COLOR_ACTIVE }} />\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" style={{ color: '#000000' }}>\n\t\t\t\t\t\t\t\t\tCompose\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Divider style={{ height: '100%', width: '1px', padding: '0', margin: '0' }} />\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\tpadding: '2px',\n\n\t\t\t\t\t\t\t\t\tjustifyContent: 'center'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={(e) => setOpen(!open)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ArrowDropDownIcon style={{ color: PRIMARY_ICON_COLOR_ACTIVE }} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\tid=\"basic-menu\"\n\t\t\t\t\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\t\t\t\t\tanchorPosition={{ top: 175, left: 0 }}\n\t\t\t\t\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\t\t\topen={open}\n\t\t\t\t\t\t\t\tonClose={() => setOpen(false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{secondaryActions.map((action) => {\n\t\t\t\t\t\t\t\t\tif (action.label === 'New Chat') return null;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\t\t\t\t\t\tonClick={action.onClick || noop}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{action.label}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</Desktop>\n\t\t\t\t\t<VeryLarge>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\traised\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR,\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\tmarginLeft: '16px',\n\t\t\t\t\t\t\t\twidth: 'fit-content',\n\t\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\t\tborderRadius: '16px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\tpadding: '16px',\n\t\t\t\t\t\t\t\t\tpaddingBottom: '16px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={primaryAction.onClick || primaryAction.click || noop}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CreateIcon style={{ marginRight: '0.5rem', color: PRIMARY_ICON_COLOR_ACTIVE }} />\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" style={{ color: '#000000' }}>\n\t\t\t\t\t\t\t\t\tCompose\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Divider style={{ height: '100%', width: '1px', padding: '0', margin: '0' }} />\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\tpadding: '2px',\n\n\t\t\t\t\t\t\t\t\tjustifyContent: 'center'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={(e) => setOpen(!open)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ArrowDropDownIcon style={{ color: PRIMARY_ICON_COLOR_ACTIVE }} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\tid=\"basic-menu\"\n\t\t\t\t\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\t\t\t\t\tanchorPosition={{ top: 175, left: 0 }}\n\t\t\t\t\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\t\t\topen={open}\n\t\t\t\t\t\t\t\tonClose={() => setOpen(false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{secondaryActions.map((action) => {\n\t\t\t\t\t\t\t\t\tif (action.label === 'New Chat') return null;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\t\t\t\t\t\tonClick={action.onClick || noop}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{action.label}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</VeryLarge>\n\t\t\t\t\t<Mobile>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\traised\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR,\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\tmarginLeft: '16px',\n\t\t\t\t\t\t\t\twidth: 'fit-content',\n\t\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\t\tborderRadius: '16px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\tpadding: '16px',\n\t\t\t\t\t\t\t\t\tpaddingBottom: '16px',\n\t\t\t\t\t\t\t\t\tjustifyContent: 'center'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={primaryAction.onClick || primaryAction.click || noop}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CreateIcon style={{ color: PRIMARY_ICON_COLOR_ACTIVE }} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</Mobile>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<Card\n\t\t\t\t\traised\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR,\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\tmarginLeft: '16px',\n\t\t\t\t\t\twidth: 'fit-content',\n\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\tborderRadius: '16px'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\tpadding: '16px',\n\t\t\t\t\t\t\tpaddingBottom: '16px',\n\t\t\t\t\t\t\tjustifyContent: 'center'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={primaryAction.onClick || primaryAction.click || noop}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CreateIcon style={{ color: PRIMARY_ICON_COLOR_ACTIVE }} />\n\t\t\t\t\t</div>\n\t\t\t\t</Card>\n\t\t\t)}\n\t\t</div>\n\t) : (\n\t\t<div>\n\t\t\t<Card\n\t\t\t\traised\n\t\t\t\tsx={{\n\t\t\t\t\tbackgroundColor: FOREGROUND_COLOR,\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\tmarginLeft: '16px',\n\t\t\t\t\twidth: 'fit-content',\n\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\tborderRadius: '16px'\n\t\t\t\t}}\n\t\t\t\tonClick={(e) => setOpen(!open)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\tpadding: '16px',\n\t\t\t\t\t\tpaddingBottom: '16px'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<CreateIcon style={{ marginRight: '0.5rem', color: PRIMARY_ICON_COLOR_ACTIVE }} />\n\t\t\t\t\t<Typography variant=\"subtitle1\" style={{ color: '#000000' }}>\n\t\t\t\t\t\tCompose\n\t\t\t\t\t</Typography>\n\t\t\t\t</div>\n\t\t\t\t<VeryLarge>\n\t\t\t\t\t<Menu\n\t\t\t\t\t\tid=\"basic-menu\"\n\t\t\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\t\t\tanchorPosition={{ top: 150, left: 0 }}\n\t\t\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tonClose={() => setOpen(false)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{secondaryActions.map((action) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\taction.label === 'New Chat' ||\n\t\t\t\t\t\t\t\taction.label === 'New contact group' ||\n\t\t\t\t\t\t\t\taction.label === 'Upload'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\t\t\t\tonClick={action.onClick || noop}\n\t\t\t\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{action.label}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Menu>\n\t\t\t\t</VeryLarge>\n\t\t\t\t<Desktop>\n\t\t\t\t\t<Menu\n\t\t\t\t\t\tid=\"basic-menu\"\n\t\t\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\t\t\tanchorPosition={{ top: 150, left: 0 }}\n\t\t\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tonClose={() => setOpen(false)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{secondaryActions.map((action) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\taction.label === 'New Chat' ||\n\t\t\t\t\t\t\t\taction.label === 'New contact group' ||\n\t\t\t\t\t\t\t\taction.label === 'Upload'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\t\t\t\tonClick={action.onClick || noop}\n\t\t\t\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{action.label}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Menu>\n\t\t\t\t</Desktop>\n\t\t\t\t<Mobile>\n\t\t\t\t\t<Menu\n\t\t\t\t\t\tid=\"basic-menu\"\n\t\t\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\t\t\tanchorPosition={{ top: 150, left: 0 }}\n\t\t\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tonClose={() => setOpen(false)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{secondaryActions.map((action) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\taction.label === 'New Chat' ||\n\t\t\t\t\t\t\t\taction.label === 'New contact group' ||\n\t\t\t\t\t\t\t\taction.label === 'Upload'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\t\t\t\tonClick={action.onClick || noop}\n\t\t\t\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{action.label}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Menu>\n\t\t\t\t</Mobile>\n\t\t\t</Card>\n\t\t</div>\n\t);\n};\n\nconst MemoCreationButton = React.memo(CreationButtonComponent);\n\nexport const CreationButton: FC = () => {\n\tconst locationFull = useLocation() as Location;\n\tconst activeRoute = useCurrentRoute() as AppRoute;\n\n\tconst truncateLocation = (location: Location): Location => ({\n\t\t...location,\n\t\tpathname: location?.pathname?.split('/').slice(0, 2).join('/'),\n\t\tkey: ''\n\t});\n\n\tconst location = useMemo(() => truncateLocation(locationFull), [locationFull]);\n\treturn <MemoCreationButton activeRoute={activeRoute} location={location} />;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useContext, useEffect } from 'react';\n\nimport { Container, Row } from '@zextras/carbonio-design-system';\nimport { PreviewManager } from '@zextras/carbonio-ui-preview';\nimport styled from 'styled-components';\n\nimport AppViewContainer from './app-view-container';\nimport { BoardContainer } from './boards/board-container';\nimport ShellContextProvider from './shell-context-provider';\nimport ShellHeader from './shell-header';\nimport ShellPrimaryBar from './shell-primary-bar';\nimport ShellSecondaryBar from './shell-secondary-bar';\nimport { ThemeCallbacksContext } from '../boot/theme-provider';\nimport { IS_FOCUS_MODE } from '../constants';\nimport { useDarkReaderResultValue } from '../dark-mode/use-dark-reader-result-value';\nimport { ShellUtilityBar } from '../utility-bar/bar';\nimport { ShellUtilityPanel } from '../utility-bar/panel';\nimport { Card, Drawer, Grid2 } from '@mui/material';\nimport { BACKGROUND_COLOR, FOREGROUND_COLOR } from '../sruvi/EditedColors';\nimport { useUtilityBarStore } from '../utility-bar/store';\nimport { CreationButton } from './creation-button';\nimport Desktop from '../sruvi/Desktop';\nimport Mobile from '../sruvi/Mobile';\nimport VeryLarge from '../sruvi/VeryLarge';\nimport type { AppRoute } from '../types/apps';\nimport { useCurrentRoute } from '../lib';\n\nconst Background = styled.div`\n\tbackground: ${({ theme }): string => theme.palette.gray6.regular};\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tmin-height: 100%;\n\tmax-height: 100%;\n\twidth: 100%;\n\tmin-width: 60rem;\n\tmax-width: 100%;\n`;\n\nconst ShellComponent = () => {\n\tconst isOpen = useUtilityBarStore((s) => s.secondaryBarState);\n\n\tconst [barisopen, setbarisopen] = React.useState(false);\n\n\tuseEffect(() => {\n\t\tif (isOpen) {\n\t\t\tsetbarisopen(true);\n\t\t} else {\n\t\t\tsetbarisopen(false);\n\t\t}\n\t}, [isOpen]);\n\n\tconst [open, setOpen] = React.useState(false);\n\n\tconst toggleDrawer = (newOpen: boolean) => () => {\n\t\tsetOpen(newOpen);\n\t};\n\n\tconst routeid = useCurrentRoute();\n\tconst [routesearch, setroutesearch] = React.useState(false);\n\tconst [routesettings, setroutesettings] = React.useState(false);\n\n\tuseEffect(() => {\n\t\tif (routeid?.id === 'search') {\n\t\t\tsetroutesearch(true);\n\t\t\tsetroutesettings(false);\n\t\t} else if (routeid?.id === 'settings') {\n\t\t\tsetroutesettings(true);\n\t\t\tsetroutesearch(false);\n\t\t} else {\n\t\t\tsetroutesettings(false);\n\t\t\tsetroutesearch(false);\n\t\t}\n\t}, [routeid]);\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\theight: '100vh',\n\t\t\t\twidth: '100vw',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tbackgroundColor: BACKGROUND_COLOR,\n\t\t\t\toverflow: 'hidden'\n\t\t\t}}\n\t\t>\n\t\t\t<VeryLarge>\n\t\t\t\t<Grid2 container sx={{ height: '100%', width: '100%' }}>\n\t\t\t\t\t<Grid2 size={12}>\n\t\t\t\t\t\t{!IS_FOCUS_MODE && (\n\t\t\t\t\t\t\t<ShellHeader>\n\t\t\t\t\t\t\t\t<ShellUtilityBar />\n\t\t\t\t\t\t\t</ShellHeader>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid2>\n\n\t\t\t\t\t<Grid2\n\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\tsx={{ height: 'calc(100% - 96px)', width: '100%', backgroundColor: BACKGROUND_COLOR }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div style={{ height: '100%', width: '100%' }}>\n\t\t\t\t\t\t\t<Grid2 container spacing={2} sx={{ height: '100%', width: '100%' }}>\n\t\t\t\t\t\t\t\t<Grid2\n\t\t\t\t\t\t\t\t\tsize={barisopen ? 2 : 1}\n\t\t\t\t\t\t\t\t\tsx={{ height: '100%', backgroundColor: BACKGROUND_COLOR }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div style={{ height: '100%', width: '100%' }}>\n\t\t\t\t\t\t\t\t\t\t<Grid2 container spacing={2} sx={{ width: '100%' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Grid2 size={12} sx={{ height: 'auto' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t{routesearch || routesettings ? null : <CreationButton />}\n\t\t\t\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t\t\t\t<Grid2 size={12}>\n\t\t\t\t\t\t\t\t\t\t\t\t{!IS_FOCUS_MODE && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground={'transparent'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"fill\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ShellSecondaryBar />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t<Grid2\n\t\t\t\t\t\t\t\t\tsize={barisopen ? 9.5 : 10.5}\n\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: BACKGROUND_COLOR,\n\t\t\t\t\t\t\t\t\t\tborderTopLeftRadius: '16px',\n\t\t\t\t\t\t\t\t\t\tborderTopRightRadius: '16px'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\traised\n\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\t\tborderTopLeftRadius: '16px',\n\t\t\t\t\t\t\t\t\t\t\tborderTopRightRadius: '16px'\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<AppViewContainer />\n\t\t\t\t\t\t\t\t\t\t<ShellUtilityPanel />\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t<Grid2\n\t\t\t\t\t\t\t\t\tsize={barisopen ? 0.5 : 0.5}\n\t\t\t\t\t\t\t\t\tsx={{ height: '100%', backgroundColor: BACKGROUND_COLOR }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{!IS_FOCUS_MODE && (\n\t\t\t\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\t\tbackground={'transparent'}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t\t\t\t\t\theight=\"fill\"\n\t\t\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ShellPrimaryBar />\n\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid2>\n\t\t\t\t</Grid2>\n\t\t\t\t<BoardContainer />\n\t\t\t</VeryLarge>\n\t\t\t<Desktop>\n\t\t\t\t<Grid2 container sx={{ height: '100%', width: '100%' }}>\n\t\t\t\t\t<Grid2 size={12}>\n\t\t\t\t\t\t{!IS_FOCUS_MODE && (\n\t\t\t\t\t\t\t<ShellHeader>\n\t\t\t\t\t\t\t\t<ShellUtilityBar />\n\t\t\t\t\t\t\t</ShellHeader>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid2>\n\n\t\t\t\t\t<Grid2\n\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\tsx={{ height: 'calc(100% - 96px)', width: '100%', backgroundColor: BACKGROUND_COLOR }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div style={{ height: '100%', width: '100%' }}>\n\t\t\t\t\t\t\t<Grid2 container spacing={2} sx={{ height: '100%', width: '100%' }}>\n\t\t\t\t\t\t\t\t<Grid2\n\t\t\t\t\t\t\t\t\tsize={barisopen ? 3 : routesearch ? 1.5 : 1.5}\n\t\t\t\t\t\t\t\t\tsx={{ height: '100%', backgroundColor: BACKGROUND_COLOR }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div style={{ height: '100%', width: '100%' }}>\n\t\t\t\t\t\t\t\t\t\t<Grid2 container spacing={2} sx={{ width: '100%' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Grid2 size={12} sx={{ height: 'auto' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t{routesearch || routesettings ? null : <CreationButton />}\n\t\t\t\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t\t\t\t<Grid2 size={12}>\n\t\t\t\t\t\t\t\t\t\t\t\t{!IS_FOCUS_MODE && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground={'transparent'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"fill\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ShellSecondaryBar />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t<Grid2\n\t\t\t\t\t\t\t\t\tsize={barisopen ? 8 : 9.5}\n\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\theight: '100%'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\traised\n\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\t\tborderTopLeftRadius: '16px',\n\t\t\t\t\t\t\t\t\t\t\tborderTopRightRadius: '16px',\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: BACKGROUND_COLOR\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<AppViewContainer />\n\t\t\t\t\t\t\t\t\t\t<ShellUtilityPanel />\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t\t<Grid2\n\t\t\t\t\t\t\t\t\tsize={barisopen ? 1 : 1}\n\t\t\t\t\t\t\t\t\tsx={{ height: '100%', backgroundColor: BACKGROUND_COLOR }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{!IS_FOCUS_MODE && (\n\t\t\t\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\t\tbackground={'transparent'}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t\t\t\t\t\theight=\"fill\"\n\t\t\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ShellPrimaryBar />\n\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t\t</Grid2>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid2>\n\t\t\t\t</Grid2>\n\t\t\t\t<BoardContainer />\n\t\t\t</Desktop>\n\t\t\t<Mobile>\n\t\t\t\t<div style={{ height: '100%', width: '100%' }}>\n\t\t\t\t\t<div style={{ height: '70px', width: '100%' }}>\n\t\t\t\t\t\t{!IS_FOCUS_MODE && (\n\t\t\t\t\t\t\t<ShellHeader>\n\t\t\t\t\t\t\t\t<ShellUtilityBar />\n\t\t\t\t\t\t\t</ShellHeader>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div style={{ height: 'calc(100% - 70px)', width: '100%' }}>\n\t\t\t\t\t\t<div style={{ height: '100%', width: '100%', marginTop: '16px' }}>\n\t\t\t\t\t\t\t<AppViewContainer />\n\t\t\t\t\t\t\t<ShellUtilityPanel />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{ display: 'flex', position: 'fixed', bottom: '0', left: '0', width: '100%' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!IS_FOCUS_MODE && (\n\t\t\t\t\t\t\t// <Container\n\t\t\t\t\t\t\t// \torientation=\"horizontal\"\n\t\t\t\t\t\t\t// \tbackground={'transparent'}\n\t\t\t\t\t\t\t// \twidth=\"fill\"\n\t\t\t\t\t\t\t// \theight=\"fill\"\n\t\t\t\t\t\t\t// \tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t// \tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\t// >\n\n\t\t\t\t\t\t\t<div style={{ height: '60px', width: '100%' }}>\n\t\t\t\t\t\t\t\t<ShellPrimaryBar />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t// </Container>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\t\t\tbottom: '86px',\n\t\t\t\t\t\t\tright: '16px'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{routesearch || routesettings ? null : <CreationButton />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Mobile>\n\t\t\t<div>\n\t\t\t\t<BoardContainer />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// <Background>\n// \t<DarkReaderListener />\n// \t{!IS_FOCUS_MODE && (\n// \t\t<ShellHeader>\n// \t\t\t<ShellUtilityBar />\n// \t\t</ShellHeader>\n// \t)}\n// \t<Row crossAlignment=\"unset\" style={{ position: 'relative', flexGrow: '1' }}>\n// \t\t{!IS_FOCUS_MODE && (\n// \t\t\t<Container\n// \t\t\t\torientation=\"horizontal\"\n// \t\t\t\tbackground={'gray5'}\n// \t\t\t\twidth=\"fit\"\n// \t\t\t\theight=\"fill\"\n// \t\t\t\tmainAlignment=\"flex-start\"\n// \t\t\t\tcrossAlignment=\"flex-start\"\n// \t\t\t>\n// \t\t\t\t<ShellPrimaryBar />\n// \t\t\t\t<ShellSecondaryBar />\n// \t\t\t</Container>\n// \t\t)}\n// \t\t<AppViewContainer />\n// \t\t<ShellUtilityPanel />\n// \t</Row>\n// \t<BoardContainer />\n// </Background>\n\nconst ShellView = (): React.JSX.Element => (\n\t<ShellContextProvider>\n\t\t<PreviewManager>\n\t\t\t<ShellComponent />\n\t\t</PreviewManager>\n\t</ShellContextProvider>\n);\n\nexport default ShellView;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport type { FC } from 'react';\nimport React, { useEffect } from 'react';\n\nimport { SnackbarManager } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\nimport { BrowserRouter, Route, Switch, useParams } from 'react-router-dom';\n\nimport AppLoaderMounter from './app/app-loader-mounter';\nimport { registerDefaultViews } from './app/default-views';\nimport { ContextBridge } from './context-bridge';\nimport { Loader } from './loader';\nimport ShellI18nextProvider from './shell-i18n-provider';\nimport { ThemeProvider } from './theme-provider';\nimport { BASENAME, IS_FOCUS_MODE } from '../constants';\nimport { NotificationPermissionChecker } from '../notification/NotificationPermissionChecker';\nimport ShellView from '../shell/shell-view';\nimport { useAppStore } from '../store/app/store';\n\nconst FocusModeListener = (): null => {\n\tconst { route } = useParams<{ route?: string }>();\n\tuseEffect(() => {\n\t\tif (route) useAppStore.setState({ focusMode: route });\n\t}, [route]);\n\treturn null;\n};\n\nexport const DefaultViewsRegister = (): null => {\n\tconst [t] = useTranslation();\n\tuseEffect(() => {\n\t\tregisterDefaultViews(t);\n\t}, [t]);\n\treturn null;\n};\n\nconst Bootstrapper: FC = () => (\n\t<ThemeProvider>\n\t\t<ShellI18nextProvider>\n\t\t\t<BrowserRouter basename={BASENAME}>\n\t\t\t\t<SnackbarManager>\n\t\t\t\t\t<Loader />\n\t\t\t\t\t{IS_FOCUS_MODE && (\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route path={'/:route'}>\n\t\t\t\t\t\t\t\t<FocusModeListener />\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t)}\n\t\t\t\t\t<DefaultViewsRegister />\n\t\t\t\t\t<NotificationPermissionChecker />\n\t\t\t\t\t<ContextBridge />\n\t\t\t\t\t<AppLoaderMounter />\n\t\t\t\t\t<ShellView />\n\t\t\t\t</SnackbarManager>\n\t\t\t</BrowserRouter>\n\t\t</ShellI18nextProvider>\n\t</ThemeProvider>\n);\n\nexport default Bootstrapper;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n/* eslint-disable no-param-reassign */\n\nimport type { TFunction } from 'i18next';\nimport { size } from 'lodash';\n\nimport { SEARCH_APP_ID, SETTINGS_APP_ID, SHELL_APP_ID } from '../../constants';\nimport { SearchAppView } from '../../search/search-app-view';\nimport { WrappedAccountsSettings } from '../../settings/accounts-settings';\nimport GeneralSettings from '../../settings/general-settings';\nimport { settingsSubSections } from '../../settings/general-settings-sub-sections';\nimport { SettingsAppView } from '../../settings/settings-app-view';\nimport { SettingsSidebar } from '../../settings/settings-sidebar';\nimport { useAccountStore } from '../../store/account';\nimport { useAppStore } from '../../store/app';\nimport type { AppRouteDescriptor, SettingsView } from '../../types/apps';\n\nconst settingsGeneralView = (t: TFunction): SettingsView => ({\n\tid: 'general',\n\troute: 'general',\n\tapp: SHELL_APP_ID,\n\tcomponent: GeneralSettings,\n\ticon: 'SettingsModOutline',\n\tlabel: t('settings.general.general', 'General Settings'),\n\tposition: 1,\n\tsubSections: settingsSubSections(t)\n});\n\nconst settingsAccountsView = (t: TFunction): SettingsView => ({\n\tid: 'accounts',\n\troute: 'accounts',\n\tapp: SHELL_APP_ID,\n\tcomponent: WrappedAccountsSettings,\n\ticon: 'PersonOutline',\n\tlabel: t('settings.accounts', 'Accounts'),\n\tposition: 1\n});\n\nconst searchRouteDescriptor = (t: TFunction): AppRouteDescriptor => ({\n\tid: SEARCH_APP_ID,\n\tapp: SEARCH_APP_ID,\n\troute: SEARCH_APP_ID,\n\tappView: SearchAppView,\n\tbadge: {\n\t\tshow: false\n\t},\n\tlabel: t('search.app', 'Search'),\n\tposition: 1000,\n\tvisible: true,\n\tprimaryBar: 'SearchModOutline'\n});\n\nconst settingsRouteDescriptor = (t: TFunction): AppRouteDescriptor => ({\n\tid: SETTINGS_APP_ID,\n\tapp: SETTINGS_APP_ID,\n\troute: SETTINGS_APP_ID,\n\tappView: SettingsAppView,\n\tbadge: {\n\t\tshow: false\n\t},\n\tlabel: t('settings.app', 'Settings'),\n\tposition: 1100,\n\tvisible: true,\n\tprimaryBar: 'SettingsModOutline',\n\tsecondaryBar: SettingsSidebar\n});\n\nexport const registerDefaultViews = (t: TFunction): void => {\n\tconst { attrs } = useAccountStore.getState().settings;\n\tif (size(attrs) > 0 && attrs.zimbraFeatureOptionsEnabled !== 'FALSE') {\n\t\tuseAppStore.getState().addRoute(settingsRouteDescriptor(t));\n\t\tuseAppStore.getState().addSettingsView(settingsGeneralView(t));\n\t\tuseAppStore.getState().addSettingsView(settingsAccountsView(t));\n\t}\n\tuseAppStore.getState().addRoute(searchRouteDescriptor(t));\n};\n","\"use strict\";\n/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SUPPORTED_LOCALES = void 0;\nexports.SUPPORTED_LOCALES = {\n    zh_CN: {\n        name: ' ()',\n        value: 'zh_CN',\n        dateFnsLocale: 'zh-CN',\n        tinymceLocale: 'zh-Hans'\n    },\n    nl: {\n        name: 'Nederlands',\n        value: 'nl'\n    },\n    en: {\n        name: 'English',\n        value: 'en',\n        dateFnsLocale: 'en-US'\n    },\n    de: {\n        name: 'Deutsch',\n        value: 'de'\n    },\n    hi: {\n        name: '',\n        value: 'hi'\n    },\n    it: {\n        name: 'italiano',\n        value: 'it'\n    },\n    ja: {\n        name: '',\n        value: 'ja'\n    },\n    pt: {\n        name: 'portugus',\n        value: 'pt',\n        tinymceLocale: 'pt_BR'\n    },\n    pl: {\n        name: 'polski',\n        value: 'pl'\n    },\n    pt_BR: {\n        name: 'portugus (Brasil)',\n        value: 'pt_BR',\n        dateFnsLocale: 'pt-BR'\n    },\n    ro: {\n        name: 'romn',\n        value: 'ro'\n    },\n    ru: {\n        name: '',\n        value: 'ru'\n    },\n    es: {\n        name: 'espaol',\n        value: 'es'\n    },\n    th: {\n        name: '',\n        value: 'th',\n        tinymceLocale: 'th_TH'\n    },\n    tr: {\n        name: 'Trke',\n        value: 'tr'\n    },\n    fr: {\n        name: 'franais',\n        value: 'fr',\n        tinymceLocale: 'fr_FR'\n    },\n    vi: {\n        name: 'Ting Vit',\n        value: 'vi'\n    }\n};\n","var map = {\n\t\"./de/index.js\": [\n\t\t9539,\n\t\t920\n\t],\n\t\"./en-US/index.js\": [\n\t\t3346,\n\t\t346\n\t],\n\t\"./es/index.js\": [\n\t\t1760,\n\t\t760\n\t],\n\t\"./fr/index.js\": [\n\t\t7732,\n\t\t732\n\t],\n\t\"./hi/index.js\": [\n\t\t2075,\n\t\t75\n\t],\n\t\"./it/index.js\": [\n\t\t7481,\n\t\t488,\n\t\t481\n\t],\n\t\"./ja/index.js\": [\n\t\t8777,\n\t\t777\n\t],\n\t\"./nl/index.js\": [\n\t\t7146,\n\t\t146\n\t],\n\t\"./pl/index.js\": [\n\t\t2992,\n\t\t488,\n\t\t992\n\t],\n\t\"./pt-BR/index.js\": [\n\t\t2107,\n\t\t107\n\t],\n\t\"./pt/index.js\": [\n\t\t3224,\n\t\t224\n\t],\n\t\"./ro/index.js\": [\n\t\t5539,\n\t\t539\n\t],\n\t\"./ru/index.js\": [\n\t\t3021,\n\t\t488,\n\t\t21\n\t],\n\t\"./th/index.js\": [\n\t\t2328,\n\t\t328\n\t],\n\t\"./tr/index.js\": [\n\t\t6338,\n\t\t338\n\t],\n\t\"./vi/index.js\": [\n\t\t8117,\n\t\t117\n\t],\n\t\"./zh-CN/index.js\": [\n\t\t6408,\n\t\t488,\n\t\t408\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__.t(id, 7 | 16);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 3913;\nmodule.exports = webpackAsyncContext;"],"names":["AppErrorCatcher","children","onError","useCallback","error","console","React","Catcher","ZIMBRA_STANDARD_COLORS","zValue","hex","zLabel","FOLDERS","USER_ROOT","INBOX","TRASH","SPAM","SENT","DRAFTS","CONTACTS","TAGS","CONVERSATIONS","CALENDAR","ROOT","NOTEBOOK","AUTO_CONTACTS","IM_LOGS","TASKS","BRIEFCASE","LAST_SYSTEM_FOLDER_POSITION","SHELL_APP_ID","SETTINGS_APP_ID","ACCOUNTS_APP_ID","SEARCH_APP_ID","ACTION_TYPES","CONVERSATION","CONVERSATION_lIST","MESSAGE","MESSAGE_lIST","CONTACT","CONTACT_lIST","INVITE","INVITE_lIST","APPOINTMENT","APPOINTMENT_lIST","FOLDER","FOLDER_lIST","CALENDAR_lIST","NEW","darkReaderDynamicThemeFixes","ignoreImageAnalysis","invert","css","ignoreInlineStyle","disableStyleSheetsProxy","base","focusModeBase","IS_FOCUS_MODE","window","location","pathname","startsWith","BASENAME","EMAIL_VALIDATION_REGEX","ROOT_NAME","DARK_READER_VALUES","FOLDER_VIEW","search_folder","tag","conversation","message","contact","document","appointment","virtual_conversation","remote_folder","wiki","task","chat","LOCAL_STORAGE_SETTINGS_KEY","LOCAL_STORAGE_LAST_PRIMARY_KEY","LOCAL_STORAGE_SEARCH_KEY","LOCAL_STORAGE_BOARD_SIZE","SCALING_OPTIONS","value","label","BASE_FONT_SIZE","SCALING_LIMIT","width","height","dpr","LOGIN_V3_CONFIG_PATH","DARK_READER_PROP_KEY","SENTRY_SHELL_DSN","RESULT_LABEL_TYPE","normal","warning","HEADER_BAR_HEIGHT","PRIMARY_BAR_WIDTH","BOARD_HEADER_HEIGHT","BOARD_TAB_WIDTH","BOARD_CONTAINER_ZINDEX","BOARD_MIN_VISIBILITY","top","left","DELEGATED_SEND_SAVE_TARGET","CUSTOM_EVENTS","updateView","JSNS","account","admin","mail","all","sync","useAccountStore","create","authenticated","undefined","version","settings","prefs","attrs","props","usedQuota","lastNotificationTime","Date","now","useAuthenticated","s","useUserAccount","useUserAccounts","acct","useMemo","useUserRights","rights","targets","useUserRight","right","find","target","useUserSettings","useUserSetting","path","get","join","getUserAccount","getState","getUserAccounts","accounts","push","getUserSettings","getUserSetting","getUserRights","getUserRight","defaultLng","zimbraPrefLocale","zimbraLocale","defaultI18n","i18next","lng","defaultI18nInitOptions","returnEmptyString","returnNull","compatibilityJSON","fallbackLng","debug","interpolation","escapeValue","missingKeyHandler","_","__","key","warn","backend","loadPath","useI18nStore","set","instances","locale","setLocale","produce","state","forEach","i18nInst","changeLanguage","addI18n","apps","appsWithShell","commit","description","js_entrypoint","name","priority","type","attrKey","icon","display","addShell","reduce","acc","app","newI18n","use","Backend","init","dropRight","split","t","initReactI18next","ModuleI18nextProvider","pkg","i18n","I18nextProvider","AppContextProvider","FallbackView","normalizeBadgeInfo","badge","show","count","showCount","color","useSearchStore","query","searchDisabled","tooltip","setSearchDisabled","updateQuery","isFunction","updateModule","module","SEARCH_MODULE_KEY","setSearchModule","newModule","sessionStorage","setItem","useSearchModule","getItem","FOCUS_MODE_RESPONSE","addIfNotPresent","items","itemToAdd","onAdd","some","item","id","sortByPosition","sort","a","b","position","addAndSort","removeById","index","findIndex","splice","initialState","focusMode","appContexts","shell","entryPoints","routes","views","primaryBar","secondaryBar","appView","board","utilityBar","search","primaryBarAccessories","secondaryBarAccessories","useAppStore","setApps","moduleApps","shellApp","accumulator","normalizedApp","sentryDsn","normalizeApp","upsertApp","setAppContext","context","merge","addRoute","routeData","route","component","visible","setRouteVisibility","idx","view","removeRoute","addBoardView","data","removeBoardView","addSettingsView","removeSettingsView","addSearchView","lastSearchModule","currentSearchModule","currentModuleSearchView","searchView","removeSearchView","addUtilityView","removeUtilityView","addPrimaryAccessoryView","removePrimaryAccessoryView","addSecondaryAccessoryView","removeSecondaryAccessoryView","updatePrimaryBadge","bar","updateUtilityBadge","getAppHook","appId","useAppList","sortBy","getApp","getAppContext","getRoutes","useRoutes","Mounter","AppLoaderMounter","entries","map","Comp","hidden","style","overflow","getTFunction","getT","useQuery","useDisableSearch","ResultsHeader","labelType","setDisabled","resetQuery","labelTypeElem","getIconAndColor","Padding","Icon","size","chipItems","queryChip","Chip","_extends","background","maxHeight","Grid2","container","sx","padding","flexDirection","Typography","variant","marginLeft","justifyContent","length","Button","onClick","startIcon","ClearIcon","CENTER_CONTENT_BUTTON_ICON_COLOR","backgroundColor","CENTER_CONTENT_BUTTON_BACKGROUND_COLOR","CENTER_CONTENT_BUTTON_TEXT_COLOR","Divider","SearchAppView","searchViews","m","dateToGenTime","date","getUTCFullYear","getUTCMonth","toString","padStart","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","startOfDay","newDate","setHours","endOfDay","localeList","SUPPORTED_LOCALES","zh_CN","localName","defaultValue","nl","en","de","hi","it","ja","pt","pl","pt_BR","ro","ru","es","th","tr","fr","vi","upsertPrefOnUnsavedChanges","addModifiedValueCallback","prefKey","prefValue","isBoolean","isPrimary","identity","List","styled","ListV2","withConfig","displayName","componentId","getNewPersonaNextIdentityName","numberToCheck","unavailableIdentityNames","newPersonaNextIdentityName","number","includes","AccountsList","accountName","selectedIdentityId","identities","identitiesDefault","setSelectedIdentityId","removeIdentity","addIdentity","useTranslation","createModal","useModal","createListRequestIdRef","useRef","addNewPersona","newPersonaName","_attrs","zimbraPrefIdentityName","current","zimbraPrefFromDisplay","zimbraPrefFromAddress","zimbraPrefFromAddressType","zimbraPrefReplyToEnabled","onConfirmDelete","onDelete","closeModal","title","onConfirm","confirmLabel","confirmColor","showCloseIcon","onClose","Text","ListItem","active","Container","role","zimbraPrefIdentityId","orientation","mainAlignment","Row","weight","minWidth","CENTER_CONTENT_BACKGROUND_COLOR","horizontal","bottom","AddBoxRoundedIcon","disabled","CENTER_CONTENT_BUTTON_BACKGROUND_WARNING_COLOR","CENTER_CONTENT_BUTTON_DISABLED_BACKGROUND_WARNING_COLOR","CENTER_CONTENT_BUTTON_TEXT_WARNING_COLOR","DeleteForeverRoundedIcon","CENTER_CONTENT_BUTTON_ICON_WARNING_COLOR","PersonaSettings","identityAttrs","updateIdentities","personaValue","setPersonaValue","useState","personaLabel","useEffect","onChange","ev","takeAvailableSpace","TextField","fullWidth","PrimaryAccountSettings","emailLabel","accountNameValue","setAccountNameValue","accountLabel","onChangeDisabled","blankItem","SettingsSentMessages","availableEmailAddresses","replyToEnabledValue","setReplyToEnabledValue","replyToAddress","setReplyToAddress","zimbraPrefReplyToAddress","dropdownOpen","setDropdownOpen","fromDisplayValue","setFromDisplayValue","replyToDisplay","setReplyToDisplay","zimbraPrefReplyToDisplay","fromAddressArray","address","fromAddress","setFromAddress","onClickReplyToEnabled","prevState","newState","fromDisplayLabel","fromAddressLabel","onChangeFromAddress","newAddress","filter","replyToEnabledLabel","replyToDisplayLabel","onChangePrefReplyToDisplay","e","replyToAddressLabel","onChangeReplyToAddress","replyToAddressArray","isValidEmail","test","Select","selection","showCheckbox","CENTER_CONTENT_SELECT_DROPDOWN_COLOR","border","Checkbox","Dropdown","placement","flexGrow","onOpen","Input","hasError","CustomIcon","RouteLeavingGuard","when","onSave","dataHasError","history","useHistory","lastLocationInitial","modalVisible","setModalVisible","lastLocationRef","confirmedNavigationRef","cancel","confirmNavigation","handleBlockedNavigation","nextLocation","then","results","rejected","result","status","catch","reason","onSecondaryAction","Prompt","Modal","closeIconTooltip","open","secondaryActionLabel","optionalFooter","CustomBreadcrumbs","Breadcrumbs","SettingsHeader","onCancel","isDirty","params","useParams","crumbs","className","setTimeout","querySelector","replace","scrollIntoView","alignItems","marginRight","BackspaceIcon","CENTER_CONTENT_BUTTON_DISABLED_BACKGROUND_COLOR","BookmarksIcon","os","browser","UAParser","userAgent","goToLogin","assign","origin","useReporter","clients","Hub","BrowserClient","transport","makeFetchTransport","stackParser","defaultStackParser","integrations","defaultIntegrations","dsn","release","maxValueLength","setClients","report","hint","reporter","eventId","captureException","info","useNetworkStore","pollingInterval","seq","useNotify","notify","useRefresh","refresh","tagWorker","Worker","URL","folderWorker","useFolderStore","folders","roots","searches","onmessage","setState","sortFolders","f","parts","getOriginalId","parseInt","toLowerCase","isRoot","oname","folderViewFilter","v","deep","filterNodes","sortFunction","i","mapNodes","mapFunction","filterFunction","recursionKey","folder","useFolder","getFolder","useFolders","getFolders","useRoot","getRoot","useRoots","getRoots","useRootByUser","userId","getRootByUser","useSearchFolder","getSearchFolder","useSearchFolders","getSearchFolders","useFoldersByView","Object","values","useFoldersAccordionByView","CustomComponent","itemProps","disableHover","useTagStore","tags","useTags","ids","pick","getTags","parsePollingInterval","pollingPref","zimbraPrefMailPollingInterval","pollingValue","Number","isNaN","fetchNoOp","getSoapFetch","_jsns","limitToOneBlocked","wait","getAccount","otherAccount","by","_content","getXmlAccount","getXmlSession","sessionId","session","handleResponse","api","res","noOpTimeout","clearTimeout","Body","Fault","code","Detail","Error","Code","Reason","Header","responseUsedQuota","mbx","modified","_context","normalizeContext","rawNotify","normalizedContext","deleted","maxBy","handleSync","Promise","r","postMessage","op","nextPollingInterval","waitDisallowed","fault","getPollingInterval","body","signal","zimbraVersion","fetch","method","headers","JSON","stringify","json","getXmlSoapFetch","AccountsSettings","createSnackbar","useSnackbar","createRecordRef","deleteArrayRef","modifyRecordRef","setIsDirty","calculateIsDirty","isEmpty","resetLists","defaultIdx","cloneDeep","defaultIdentity","unshift","defaultAsFirstOrderIdentities","setIdentities","maxIdentities","zimbraIdentityMaxNumEntries","actualIdentity","identityId","autoHideTimeout","hideButton","allSettled","reject","createIdentityRequests","createRecord","deleteRequests","deleteArray","requestId","modifyIdentityRequests","modifyRecord","promise","DeleteIdentityRequest","CreateIdentityRequest","ModifyIdentityRequest","currentIdentities","deletedIdentities","addedIdentities","modifiedIdentitiesAttrs","filteredIdentities","filteredAndModified","propIndex","calculateNewIdentitiesState","CreateIdentityResponse","getAvailableEmailAddresses","user","email","addr","zimbraMailAlias","isArray","String","uniq","personaSettings","settingsSentMessages","WrappedAccountsSettings","ModalManager","useLoginConfigStore","loaded","carbonioWebUiTitle","carbonioWebUiFavicon","logout","logoff","redirect","customLogoutUrl","carbonioWebUiLogoutURL","timezoneAndLanguageSubSection","outOfOfficeSubSection","searchPrefsSubSection","quotaSubSection","settingsSubSections","Logout","sectionTitle","accountSubSection","FormSubSection","LogoutIcon","useReset","ref","resetFn","useImperativeHandle","reset","coerceGenTime","genTime","setUTCFullYear","substring","setUTCMonth","setUTCDate","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","genTimeToDate","OutOfOfficeTimePeriodSection","addMod","prefOutOfOfficeFromDate","prefOutOfOfficeUntilDate","resetRef","fromDate","setFromDate","untilDate","setUntilDate","allDayEnabled","setAllDayEnabled","editTimeIsDisabled","updatePref","initPrefs","fromDatePref","untilDatePref","fromDateAllDay","untilDateAllDay","getTime","outOfOfficeFromDateOnChange","newFromDate","newUntilDate","outOfOfficeUntilDateOnChange","toggleAllDay","prevWasEnabled","nowIsEnabled","startOfFromDate","endOfUntilDate","vertical","gap","crossAlignment","DateTimePicker","dateFormat","includeTime","timeLabel","showTimeSelect","showTimeSelectOnly","buildItemsExternalSenders","SEND_AUTO_REPLY","SHOW_EXTERNAL_INPUT","SEND_NOT_IN_ORG","SUPPRESS_EXTERNAL","getExternalSendersPrefsData","itemsExternalSenders","zimbraPrefOutOfOfficeSuppressExternalReply","zimbraPrefOutOfOfficeExternalReplyEnabled","zimbraPrefExternalSendersType","OutOfOfficeSettings","outOfOfficeSectionTitle","prefOutOfOfficeReplyEnabled","setPrefOutOfOfficeReplyEnabled","zimbraPrefOutOfOfficeReplyEnabled","prefOutOfOfficeReply","setPrefOutOfOfficeReply","zimbraPrefOutOfOfficeReply","prefOutOfOfficeExternalReplyEnabled","setPrefOutOfOfficeExternalReplyEnabled","prefOutOfOfficeExternalReply","setPrefOutOfOfficeExternalReply","zimbraPrefOutOfOfficeExternalReply","externalSendersSelectedItem","setExternalSendersSelectedItem","sendAutoReplyTimePeriodEnabled","setSendAutoReplyTimePeriodEnabled","zimbraPrefOutOfOfficeFromDate","zimbraPrefOutOfOfficeUntilDate","outOfOfficeTimePeriodResetRef","prefOutOfOfficeReplyEnabledSelectItems","buildItemsPrefOutOfOfficeReplyEnabled","prefOutOfOfficeReplyEnabledSelectedValue","prefOutOfOfficeReplyEnabledOnChange","externalSendersSelectItems","externalSendersHandler","externalSendersOnChange","newSelectItem","prefOutOfOfficeReplyOnChange","prefOutOfOfficeExternalReplyOnChange","toggleSendAutoReplyTimePeriod","nextState","spacing","dropdownWidth","dropdownMaxWidth","CENTER_CONTENT_SELECT_DROPDOWN_DISABLED_COLOR","multiline","rows","borderColor","SearchSettings","searchInSpamFolder","setSearchInSpamFolder","zimbraPrefIncludeSpamInSearch","searchInTrashFolder","setSearchInTrashFolder","zimbraPrefIncludeTrashInSearch","searchInSharedFolder","setSearchInSharedFolder","zimbraPrefIncludeSharedItemsInSearch","setMode","onClickSpam","newValue","onClickTrash","onClickShared","UserQuota","mobileView","used","quota","userQuota","zimbraMailQuota","Math","round","filledQuota","fillBackground","Tooltip","Quota","fill","LanguageAndTimeZoneSettings","setOpen","locales","timezones","timeZoneList","prefLocale","setPrefLocale","prefTimeZoneId","setPrefTimeZoneId","zimbraPrefTimeZoneId","prefTimeZoneIdSelectedValue","onTimeZoneChange","dropdownMaxHeight","selectedBackgroundColor","dismissLabel","reload","setGlobalCursor","cursor","cursors","classList","remove","add","setElementSizeAndPosition","element","createExportForTestOnly","objToExport","useLocalStorageStore","storage","readValue","fallback","localStorageItem","localStorage","parse","setValue","valueToStore","Function","valueA","valueB","DEFAULT_OPTIONS","keepSyncedWithStorage","useLocalStorage","initialValue","options","storedValue","shouldDispatchStorageEventRef","localStorageOptions","readValueForKey","setValueForKey","addEventListener","removeEventListener","dispatchEvent","Event","GeneralSettings","mods","setMods","userSettings","localStorageUnAppliedChanges","setLocalStorageUnAppliedChanges","localStorageSettings","setLocalStorageSettings","prevType","nextType","unAppliedPrevState","localStorageSettingsPrevState","modifyPropertiesRequest","modifyPrefsRequest","mappedProperties","prop","zimlet","zimbraPrefMailTrustedSenderList","Array","ModifyPropertiesRequest","ModifyPrefsRequest","pref","p","keys","resolve","scalingSettingSectionRef","darkThemeSettingSectionRef","languageAndTimeZoneSettingsSectionRef","outOfOfficeSettingsSectionRef","searchSettingsSectionRef","SettingsAppView","settingsViews","Route","exact","Switch","Redirect","from","strict","to","SettingsSidebar","expanded","useLocation","stopPropagation","subSections","collapsedItems","IconButton","Accordion","packageDependentFunctions","functions","useContextBridge","useBridge","ContextBridge","getHistory","useBoardStore","orderedBoards","boards","minimized","addBoard","uniqueId","url","trimStart","closeBoard","boardId","closeAllBoards","onGoToPanel","minimizeBoards","reopenBoards","expandBoards","reduceBoards","setCurrentBoard","updateBoard","updateBoardContext","useBoardById","getBoardById","useBoardContextById","getBoardContextById","boardContext","createContext","boardHooksContext","BoardProvider","callbacks","getBoardContext","getBoard","Provider","useBoardHooks","hooks","useContext","useBoard","FileInput","input","actions","components","composer","Item","Composer","onEditorChange","onFileSelect","inline","customInitOptions","rest","_onEditorChange","newContent","editor","getContent","format","defaultStyle","font","zimbraPrefHtmlEditorDefaultFontFamily","fontSize","zimbraPrefHtmlEditorDefaultFontSize","zimbraPrefHtmlEditorDefaultFontColor","inputRef","onFileClick","click","language","localeObj","tinymceLocale","inlineLabel","setupCallback","ui","registry","addMenuButton","callback","text","onAction","editorInitConfig","content_css","language_url","setup","min_height","auto_focus","menubar","statusbar","branding","resize","font_size_formats","object_resizing","style_formats","block","wrapper","merge_siblings","plugins","toolbar","quickbars_insert_toolbar","quickbars_selection_toolbar","contextmenu","toolbar_mode","content_style","visualblocks_default_state","end_container_on_empty_block","relative_urls","remove_script_host","newline_behavior","browser_spellcheck","convert_unsafe_embeds","fileInputOnChange","tinymce","files","overflowY","accept","multiple","Editor","useIntegrationsStore","registerActions","action","registerComponents","registerFunctions","fn","removeActions","actionTypeMap","actionFactory","actionFactoryId","removeComponents","omit","removeFunctions","buildIntegrationComponent","integration","buildIntegrationActions","compact","buildIntegrationAction","useIntegratedFunction","useIntegratedComponent","useActions","factories","useActionsFactory","useAction","factory","useActionFactory","getIntegratedFunction","getIntegratedComponent","getActions","getActionsFactory","getAction","getActionFactory","createTag","deleteTag","renameTag","changeTagColor","rgb","useCurrentRoute","trim","getCurrentRoute","parseParams","routeToApply","hash","usePushHistoryCallback","useReplaceHistoryCallback","useGoBackHistoryCallback","goBack","pushHistory","replaceHistory","goBackHistory","getFavicon","NotificationManager","PopupNotificationDefaultConfig","vibrate","AudioNotificationDefaultConfig","sound","defaultAudio","NotificationDefaultConfig","this","showPopup","playSound","Map","getAudioFileFunction","has","debounce","Audio","play","delete","DEBOUNCE_TIME","noop","config","defConfig","n","Notification","multipleNotify","conf","getInstance","instance","getNotificationManager","runSearch","isMobile","useIsMobile","ShellContext","getAppDependantFunctions","getI18n","soapFetch","xmlSoapFetch","useAppContext","useApp","getBridgedFunctions","getAppDependantSetters","appStore","normalizeRoute","normalizeBoardView","normalizeSettingsView","normalizeSearchView","normalizeUtilityView","whitelistRoutes","blacklistRoutes","button","normalizePrimaryAccessoryView","normalizeSecondaryAccessoryView","editSettings","modifyList","deleteList","createList","zimbraPrefDefaultSignatureId","zimbraPrefForwardReplySignatureId","zimbraPrefWhenSentToEnabled","zimbraPrefWhenInFoldersEnabled","permissions","freeBusy","gt","zid","deny","d","inviteRight","new","u","itemMods","indexAccount","AppLink","_to","RRLink","textDecoration","Spinner","loading","getMatomoTracker","siteId","Matomo","getTracker","Tracker","constructor","isEnabled","matomoTracker","enableTracker","matomoScriptId","getElementById","matomoScript","createElement","scriptElement","getElementsByTagName","async","src","parentNode","insertBefore","initMatomo","trackPageView","customTitle","tracker","getMatomoTrackerInstance","setCustomUrl","href","trackEvent","category","_scripts","_scriptId","otherSetters","appSetters","otherFunctions","appFunctions","isPromiseRejectedResult","promiseSettledResult","LoaderFailureModal","closeHandler","Loader","response","finally","favicon","HTMLLinkElement","ok","statusText","normalizeAccount","signatures","normalizeSettings","promiseSettledResultArray","getComponentsPromiseSettledResult","getInfoPromiseSettledResult","promiseRejectedResult","__ZAPP_SHARED_LIBRARIES__","react","ReactDOM","ReactI18n","ReactRedux","lodash","Lodash","ReactRouterDom","StyledComponents","ReduxJSToolkit","ZappUI","Preview","darkreader","Darkreader","__ZAPP_HMR_EXPORT__","appsToLoad","log","localeDateFnsKey","dateFnsLocale","getDateFnsLocale","localeDateFns","registerLocale","setDefaultLocale","loadApp","appPkg","CONSTANTS","appComponent","memo","script","setAttribute","appendChild","err","loadApps","forOwn","removeChild","ShellI18nextProvider","getPrefersColorSchemeDarkMedia","matchMedia","useDarkMode","darkReaderResultValue","carbonioWebUiDarkMode","settingReceived","isZappDarkreaderModeZimletProp","useDarkReaderResultValue","darkModeEnabled","setDarkModeEnabled","matches","setCallback","event","darkReaderStatus","setFetchMethod","ThemeCallbacksContext","addExtension","setDarkReaderState","paletteExtension","customTheme","theme","palette","shared","regular","hover","focus","linked","iconExtension","icons","Shared","ArrowCircleRight","Linked","ArrowCircleLeft","globalCursorsExtension","globalCursors","GlobalStyle","createGlobalStyle","baseFontSize","ThemeProvider","extensions","setExtensions","primaryColor","localStorageLastPrimary","setLocalStorageLastPrimary","carbonioWebUiPrimaryColor","carbonioWebUiDarkPrimaryColor","dark","light","useGetPrimaryColor","useLayoutEffect","customThemePalette","primary","generateColorSet","extension","darkReaderState","auto","disable","enable","aggregatedExtensions","themeAccumulator","themeExtensionFn","newExtension","ext","savedScalingValueSetting","getAutoScalingFontSize","screen","devicePixelRatio","baseFontIndex","option","themeCallbacksContextValue","UIThemeProvider","NotificationPermissionChecker","requestPermission","_BoardsRouterContainer","FirstAppRedirect","mainRoute","AppViewContainer","appViews","BoardContainer","div","gray3","AppBoard","createMemoryHistory","initialEntries","boardViews","windowHistory","unlisten","listen","l","Router","TabContainer","CloseContainer","TabIcon","CustomText","overflowing","VerticalDivider","AppBoardTab","firstTab","defaultPrevented","onRemove","textRef","textOverflowing","setTextOverflowing","resizeObserverRef","ResizeObserver","requestAnimationFrame","offsetWidth","scrollWidth","observe","disconnect","wrap","maxWidth","triggerRef","iconColor","CustomRow","TabsList","BORDERS","getCursorFromBorder","direction","borders","concat","calcNewSizeAndPosition","mouseEvent","newSizeAndPosition","heightDifference","clientTop","clientY","clientX","clientLeft","widthDifference","MainContainer","BorderWithResize","$cursor","$width","$height","$position","$translateTransform","x","y","ResizableBorder","elementToResize","localStorageKey","borderRef","resizeHandler","useResize","elementToResizeRef","initialSizeAndPositionRef","lastSavedSizeAndPosition","setLastSavedSizeAndPosition","lastSizeAndPositionRef","resizeElement","sizeAndPositionToApply","computedStyle","getComputedStyle","minHeight","parseFloat","onMouseMove","mouseMoveEvent","onMouseUp","mouseDownEvent","preventDefault","clientRect","getBoundingClientRect","offsetHeight","offsetTop","offsetLeft","sizes","positions","onMouseDown","ResizableContainer","VeryLarge","useMediaQuery","BoardContainerCompMobile","BoardMobile","BoardContainerComp","OverflowContainer","Board","BoardHeader","BoardDetailContainer","BackButton","Actions","ListItemContent","selected","pointerEvents","calcPositionToRemainVisible","lastSavedPosition","containerSize","minVisibility","limit","boardDropdownItems","customComponent","boardRef","boardContainerRef","lastSavedBoardSizeAndPosition","setLastSavedBoardSizeAndPosition","currentBoardSizeAndPosition","setCurrentBoardSizeAndPosition","lastSavedBoardSizeAndPositionRef","isMoving","moveElementHandler","useMove","elementToMoveRef","setIsMoving","isMoveEnabledRef","setLastSavedPosition","lastPositionRef","globalCursorSetterTimerRef","shouldUpdateLocalStorageRef","moveElement","elementToMove","positionToApply","preventClick","capture","offsetParent","HTMLElement","newPosition","limitContainer","limitClientRect","clientTopLimit","moveTopDelta","mouseClientY","newClientTop","newTop","clientLeftLimit","moveLeftDelta","mouseClientX","newClientLeft","newLeft","calcNewPosition","enableMove","activeElement","disableMove","isDefaultSizeAndPosition","isBoardEmpty","resetSizeAndPosition","boardElement","updateBoardPosition","clientHeight","clientWidth","boardContainer","leading","trailing","clickHandler","clickFn","onReturnToApp","Desktop","Mobile","ShellContextProvider","screenMode","useScreenMode","_path","bind","arguments","hasOwnProperty","call","apply","xmlns","viewBox","gray4","ModuleSelector","currentRoute","dropdownItems","openDropdown","closeDropdown","FOREGROUND_COLOR","PRIMARY_ICON_COLOR_ACTIVE","PRIMARY_ICON_COLOR_INACTIVE","OutlinedIconButton","StyledChipInput","ChipInput","StyledContainer","SearchBar","storedSuggestions","setStoredSuggestions","inputTyped","setInputTyped","currentSearchModuleRoute","modules","moduleLabel","isTyping","setIsTyping","setOptions","inputHasFocus","setInputHasFocus","searchInputValue","setSearchInputValue","showClear","clearSearch","onSearch","currentQuery","newInputValue","hasAvatar","newInputChip","currentQueryChip","searchInputChip","appSuggestions","reverse","updateOptions","textContent","queryChips","suggestion","slice","onQueryChange","newQuery","lastChipLabel","onInputType","suggestions","addFocus","removeFocus","runSearchOnKeyUp","disableOptions","placeholder","clearButtonPlaceholder","searchButtonsAreDisabled","searchBtnTooltipLabel","onChipAdd","newChip","raise","setRaise","RAISED_SEARCH_BAR","Card","raised","borderBottomRightRadius","bordertoprightRadius","borderTopLeftRadius","borderBottomLeftRadius","confirmChipOnBlur","separators","ctrlKey","onInputTypeDebounce","onBlur","onFocus","requireUniqueChips","borderRadius","customSize","iconSize","paddingSize","useUtilityBarStore","mode","secondaryBarState","setCurrent","setSecondaryBarState","checkList","l1","l2","intersection","checkRoute","activeRoute","activeRouteValues","useUtilityViews","utilityViews","SidebarContainer","sidebarIsOpen","ShellSecondaryBarComponent","isOpen","setIsOpen","onCollapserClick","secondaryBarViews","secondaryBarAccessoryViews","accessories","MemoShellSecondaryBar","ShellSecondaryBar","LogoElement","carbonioWebUiAppLogo","carbonioWebUiDarkAppLogo","DefaultLogo","useLogo","alt","ShellHeader","searchEnabled","onclickedbar","BACKGROUND_COLOR","MenuIcon","indryvelogo","Drawer","borderTopRightRadius","anchor","AccountCircleRounded","MiniBadge","Badge","$color","gray6","forwardRef","PrimaryBarContainer","ToggleBoardIcon","ACCESSORY_ICON_COLOR","PrimaryBarElement","BadgeWrap","FOREGROUND_COLOR_FOCUSED","PrimaryBarAccessoryElement","OverlayRow","ShellPrimaryBar","primaryBarViews","routesRef","primaryBarAccessoryViews","accessoryViews","primaryBarItems","accessoryItems","zIndex","UtilityBarItem","ShellUtilityBar","updateViews","updateViewEvent","CustomEvent","accountItems","viewItems","disableAutoFocus","Panel","gray2","Spacer","ShellUtilityPanel","currentPanel","Responsive","CreationButtonComponent","primaryAction","group","byApp","groupBy","secondaryActions","setting","setsettinOpen","barisopen","setbarisopen","paddingBottom","CreateIcon","margin","ArrowDropDownIcon","Menu","anchorReference","anchorPosition","anchorOrigin","transformOrigin","MenuItem","MemoCreationButton","CreationButton","locationFull","truncateLocation","ShellComponent","routeid","routesearch","setroutesearch","routesettings","setroutesettings","marginTop","ShellView","PreviewManager","FocusModeListener","DefaultViewsRegister","zimbraFeatureOptionsEnabled","settingsRouteDescriptor","settingsGeneralView","settingsAccountsView","searchRouteDescriptor","registerDefaultViews","Bootstrapper","BrowserRouter","basename","SnackbarManager","exports","webpackAsyncContext","req","__webpack_require__","o"],"sourceRoot":""}