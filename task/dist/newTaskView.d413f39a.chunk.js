"use strict";(self.webpackChunkcarbonio_tasks_ui=self.webpackChunkcarbonio_tasks_ui||[]).push([[507],{4578:(e,t,a)=>{a.d(t,{A:()=>r,y:()=>l}),a(3619);var i=a(2509);const r=(...e)=>(t,{toReference:a})=>{if(t&&Array.isArray(t)){const r=(0,i.map)(e,(e=>a(e)?.__ref));return(0,i.filter)(t,(e=>!r.includes(e.__ref)))}return t},l=e=>(t,{toReference:a,readField:r})=>{const l=a(e);if(t&&l&&Array.isArray(t)){const e=[...t],a=(0,i.findIndex)(t,(e=>{const t=r({fieldName:"createdAt",from:e}),a=r({fieldName:"createdAt",from:l});return void 0!==t&&void 0!==a&&t<a}));return a>=0?e.splice(a,0,l):e.push(l),e}return t}},6549:(e,t,a)=>{a.d(t,{f:()=>E});var i=a(7559),r=a.n(i),l=a(4702),n=a(7502),o=a(2509),s=a(4710),c=a.n(s),d=a(5607);const m=c()(l.Icon).withConfig({displayName:"CustomSelectLabelFactory__CustomIcon",componentId:"sc-11xiuze-0"})(["align-self:center;pointer-events:none;"]),u=c()(l.Text).withConfig({displayName:"CustomSelectLabelFactory__Label",componentId:"sc-11xiuze-1"})(["position:absolute;top:",";left:",";transform:translateY(",");transition:150ms ease-out;"],(({$selected:e,theme:t})=>e?`calc(${t.sizes.padding.small} - 0.0625rem)`:"50%"),(({theme:e})=>e.sizes.padding.large),(({$selected:e})=>e?"0":"-50%")),b=c()(l.Container).withConfig({displayName:"CustomSelectLabelFactory__ContainerEl",componentId:"sc-11xiuze-2"})(["transition:background 0.2s ease-out;&:hover{background:",";}",";"],(({theme:e})=>(0,l.getColor)("gray5.hover",e)),(({$focus:e,theme:t})=>e&&(0,s.css)(["background:",";"],(0,l.getColor)("gray5.focus",t)))),h=c()(l.Text).withConfig({displayName:"CustomSelectLabelFactory__CustomText",componentId:"sc-11xiuze-3"})(["min-height:1.167em;line-height:1.5rem;"]),p=({selected:e,label:t,open:a,focus:n,background:s,disabled:c})=>{const p=(0,i.useMemo)((()=>!(0,o.isEmpty)(e)&&e.reduce(((e,t)=>[...e,t.label]),[]).join(", ")),[e]),g=(0,i.useMemo)((()=>{if(1!==e.length)throw new Error("invalid selected length");const t=e[0].value;return t===d.bx.Low&&r().createElement(l.Icon,{icon:"ArrowheadDown",color:"info"})||t===d.bx.High&&r().createElement(l.Icon,{icon:"ArrowheadUp",color:"error"})||r().createElement(l.Icon,{icon:"MinusOutline",color:"gray1"})}),[e]);return r().createElement(r().Fragment,null,r().createElement(b,{orientation:"horizontal",width:"fill",crossAlignment:"flex-end",mainAlignment:"space-between",borderRadius:"half",padding:{horizontal:"large",top:"small"},background:s,$focus:n},r().createElement(l.Row,{takeAvailableSpace:!0,mainAlignment:"unset"},r().createElement(l.Padding,{top:"medium",width:"100%"},r().createElement(l.Container,{orientation:"horizontal",mainAlignment:"flex-start",gap:"1rem"},g,r().createElement(h,{size:"medium",color:c?"secondary":"text"},p))),r().createElement(u,{$selected:!(0,o.isEmpty)(e),size:(0,o.isEmpty)(e)?"medium":"small",color:(c?"gray2":(a||n)&&"primary")||"secondary"},t)),r().createElement(m,{size:"medium",icon:a?"ArrowUp":"ArrowDown",color:(c?"gray2":(a||n)&&"primary")||"secondary"})),r().createElement(l.Divider,{color:a||n?"primary":"gray3"}))};var g=a(8989),y=a(9812),f=a(7100),k=a(3380);const v=({icon:e,iconColor:t,label:a})=>r().createElement(l.Container,{width:"fit",mainAlignment:"flex-start",orientation:"horizontal",gap:"1rem"},r().createElement(l.Icon,{icon:e,color:t}),r().createElement(g.E,null,a)),w=[{label:(0,n.t)("task.priority",{context:"high",defaultValue:"High"}),value:d.bx.High,customComponent:r().createElement(v,{icon:"ArrowheadUp",iconColor:"error",label:(0,n.t)("task.priority",{context:"high",defaultValue:"High"})})},{label:(0,n.t)("task.priority",{context:"medium",defaultValue:"Medium"}),value:d.bx.Medium,customComponent:r().createElement(v,{icon:"MinusOutline",iconColor:"gray1",label:(0,n.t)("task.priority",{context:"medium",defaultValue:"Medium"})})},{label:(0,n.t)("task.priority",{context:"low",defaultValue:"Low"}),value:d.bx.Low,customComponent:r().createElement(v,{icon:"ArrowheadDown",iconColor:"info",label:(0,n.t)("task.priority",{context:"low",defaultValue:"Low"})})}],E=({initialTitle:e,initialPriority:t,initialDescription:a,initialEnableReminder:s,initialIsAllDay:c,initialDate:m,onConfirm:u,banner:b,confirmLabel:h,defaultBoardTabTitle:v})=>{const{updateBoard:E}=(0,n.useBoardHooks)();(0,i.useEffect)((()=>{e&&E({title:e})}),[e,E]);const[x,C]=(0,i.useState)(e),A=(0,i.useCallback)((e=>{C(e.target.value),0===(0,o.size)(e.target.value)?E({title:v}):E({title:e.target.value})}),[v,E]),[D,T]=(0,i.useState)(t),z=(0,i.useCallback)((e=>{e&&function(e){return Object.values(d.bx).includes(e)}(e)&&T(e)}),[]),_=(0,i.useMemo)((()=>(0,o.find)(w,(e=>e.value===D))||(console.error("Invalid priority select item"),w[1])),[D]),[L,S]=(0,i.useState)(s),[I,R]=(0,i.useState)(m),B=(0,i.useCallback)((e=>{R(e)}),[]),M=(0,i.useCallback)((()=>S((e=>(e&&R(m),!e)))),[m]),[P,F]=(0,i.useState)(c),N=(0,i.useCallback)((()=>F((e=>(e||null!==I||R(m),!e)))),[I,m]),[V,H]=(0,i.useState)(a),$=(0,i.useCallback)((e=>{H(e.currentTarget.value)}),[]),j=(0,i.useMemo)((()=>null===I||x.length>y.vd||0===(0,o.trim)(x).length||V.length>y.nl),[I,V.length,x]),O=(0,i.useCallback)((()=>{u(L?{title:x,description:V,priority:D,reminderAllDay:P,enableReminder:!0,reminderAt:I}:{title:x,description:V,priority:D,enableReminder:!1})}),[I,V,L,P,u,D,x]);return r().createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"}},r().createElement("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"column"}},r().createElement("div",{style:{display:"flex",flexDirection:"column",padding:"16px"}},r().createElement(l.Container,{background:"gray6",mainAlignment:"flex-start",crossAlignment:"flex-start",padding:{horizontal:"small",top:"small"},gap:"0.5rem"},r().createElement(g.E,{weight:"bold",overflow:"ellipsis"},(0,n.t)("board.label.details","Details")),r().createElement(l.Container,{orientation:"horizontal",height:"fit",gap:"0.5rem",crossAlignment:"flex-start"},r().createElement(f.A,{fullWidth:!0,size:"medium",label:(0,n.t)("board.input.title.label","Title*"),value:x,onChange:A,error:x.length>y.vd,"aria-describedby":x.length>y.vd?(0,n.t)("board.input.description.error.label","Maximum length allowed is 1024 characters"):void 0}),r().createElement(l.Select,{items:w,background:"white",label:(0,n.t)("board.select.priority.label","Priority"),onChange:z,selection:_,LabelFactory:p,style:{border:"1px solid lightgray",height:"56px"}})),r().createElement(l.Switch,{value:L,onClick:M,label:(0,n.t)("board.switch.enableReminder.label","Enable reminder")}),L&&r().createElement(l.DateTimePicker,{backgroundColor:"transparent",width:"fill",label:(0,n.t)("board.dateTimePicker.reminder.label","Reminder"),defaultValue:I||void 0,includeTime:!P,onChange:B,dateFormat:P?y.qi:y.gL,hasError:null===I,errorLabel:null===I?(0,n.t)("board.dateTimePicker.description.error.label","The reminder option is enabled, set date and time for it or disable the reminder"):void 0}),L&&r().createElement(l.Checkbox,{value:P,onClick:N,label:(0,n.t)("board.checkbox.allDay.label","Remind me at every login throughout the day")}),r().createElement(g.E,{weight:"bold"},(0,n.t)("board.label.description","Description")),r().createElement(f.A,{fullWidth:!0,multiline:!0,rows:4,label:(0,n.t)("board.textArea.taskDescription.label","Task Description"),value:V,onChange:$,error:V.length>y.nl,"aria-describedby":V.length>y.nl?(0,n.t)("board.textArea.description.error.label","Maximum length allowed is 4096 characters"):void 0}))),r().createElement("div",null,b)),r().createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",padding:"16px",width:"100%"}},r().createElement(k.A,{style:{marginBottom:"8px"}}),r().createElement(l.Button,{disabled:j,size:"medium",label:h,onClick:O})))}},6294:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var i=a(7559),r=a.n(i),l=a(4497),n=a(5003),o=a(4702),s=a(7502),c=a(2509),d=a(6549),m=a(4578),u=a(9812),b=a(5607),h=a(2063);const p=()=>{const{closeBoard:e}=(0,s.useBoardHooks)(),t=(0,o.useSnackbar)(),{data:a}=(0,l.I)(b.xG,{fetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0,errorPolicy:"all"}),p=(0,i.useMemo)((()=>(0,c.filter)(a?.findTasks,h.D_)),[a]),[g]=(0,n.n)(b.R_),y=(0,i.useCallback)((({title:a,priority:i,description:r,reminderAt:l,reminderAllDay:n,enableReminder:o})=>{p.length>=u.G4?t({key:(new Date).toLocaleString(),type:"warning",label:(0,s.t)("snackbar.tasksLimitReached","You have reached your 200 tasks. Delete your previous tasks to create more."),replace:!1,hideButton:!0}):(g({variables:{newTask:{status:b.nW.Open,description:(0,c.trim)(r).length>0?(0,c.trim)(r):void 0,priority:i,title:a,reminderAt:o?l.getTime():void 0,reminderAllDay:o?n:void 0}},update(e,{data:t}){t?.createTask&&e.modify({fields:{findTasks:(0,m.y)(t.createTask)}})}}),e())}),[e,t,g,p.length]);return r().createElement(d.f,{initialTitle:"",initialPriority:b.bx.Medium,initialDescription:"",initialEnableReminder:!1,initialIsAllDay:!1,initialDate:new Date,onConfirm:y,confirmLabel:(0,s.t)("board.confirmButton.create","create"),banner:p.length===u.G4-1&&r().createElement(o.Banner,{description:(0,s.t)("newTaskBoard.banner.lastTask","This is the last task you can create. Delete your previous tasks to create more."),severity:"info",type:"outline"})||p.length>=u.G4&&r().createElement(o.Banner,{description:(0,s.t)("newTaskBoard.banner.limitReached","You have reached your 200 tasks. Delete your previous tasks to create more."),severity:"warning",type:"outline"})||void 0,defaultBoardTabTitle:(0,s.t)("board.newTask.title","New Task")})}}}]);
//# sourceMappingURL=newTaskView.d413f39a.chunk.js.map