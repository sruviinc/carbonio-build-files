"use strict";(self.webpackChunkcarbonio_tasks_ui=self.webpackChunkcarbonio_tasks_ui||[]).push([[227],{6549:(e,t,i)=>{i.d(t,{f:()=>C});var l=i(7559),a=i.n(l),r=i(4702),n=i(7502),o=i(2509),c=i(4710),s=i.n(c),d=i(5607);const m=s()(r.Icon).withConfig({displayName:"CustomSelectLabelFactory__CustomIcon",componentId:"sc-11xiuze-0"})(["align-self:center;pointer-events:none;"]),u=s()(r.Text).withConfig({displayName:"CustomSelectLabelFactory__Label",componentId:"sc-11xiuze-1"})(["position:absolute;top:",";left:",";transform:translateY(",");transition:150ms ease-out;"],(({$selected:e,theme:t})=>e?`calc(${t.sizes.padding.small} - 0.0625rem)`:"50%"),(({theme:e})=>e.sizes.padding.large),(({$selected:e})=>e?"0":"-50%")),b=s()(r.Container).withConfig({displayName:"CustomSelectLabelFactory__ContainerEl",componentId:"sc-11xiuze-2"})(["transition:background 0.2s ease-out;&:hover{background:",";}",";"],(({theme:e})=>(0,r.getColor)("gray5.hover",e)),(({$focus:e,theme:t})=>e&&(0,c.css)(["background:",";"],(0,r.getColor)("gray5.focus",t)))),g=s()(r.Text).withConfig({displayName:"CustomSelectLabelFactory__CustomText",componentId:"sc-11xiuze-3"})(["min-height:1.167em;line-height:1.5rem;"]),p=({selected:e,label:t,open:i,focus:n,background:c,disabled:s})=>{const p=(0,l.useMemo)((()=>!(0,o.isEmpty)(e)&&e.reduce(((e,t)=>[...e,t.label]),[]).join(", ")),[e]),h=(0,l.useMemo)((()=>{if(1!==e.length)throw new Error("invalid selected length");const t=e[0].value;return t===d.bx.Low&&a().createElement(r.Icon,{icon:"ArrowheadDown",color:"info"})||t===d.bx.High&&a().createElement(r.Icon,{icon:"ArrowheadUp",color:"error"})||a().createElement(r.Icon,{icon:"MinusOutline",color:"gray1"})}),[e]);return a().createElement(a().Fragment,null,a().createElement(b,{orientation:"horizontal",width:"fill",crossAlignment:"flex-end",mainAlignment:"space-between",borderRadius:"half",padding:{horizontal:"large",top:"small"},background:c,$focus:n},a().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"unset"},a().createElement(r.Padding,{top:"medium",width:"100%"},a().createElement(r.Container,{orientation:"horizontal",mainAlignment:"flex-start",gap:"1rem"},h,a().createElement(g,{size:"medium",color:s?"secondary":"text"},p))),a().createElement(u,{$selected:!(0,o.isEmpty)(e),size:(0,o.isEmpty)(e)?"medium":"small",color:(s?"gray2":(i||n)&&"primary")||"secondary"},t)),a().createElement(m,{size:"medium",icon:i?"ArrowUp":"ArrowDown",color:(s?"gray2":(i||n)&&"primary")||"secondary"})),a().createElement(r.Divider,{color:i||n?"primary":"gray3"}))};var h=i(8989),y=i(9812),f=i(7100),E=i(3380);const k=({icon:e,iconColor:t,label:i})=>a().createElement(r.Container,{width:"fit",mainAlignment:"flex-start",orientation:"horizontal",gap:"1rem"},a().createElement(r.Icon,{icon:e,color:t}),a().createElement(h.E,null,i)),x=[{label:(0,n.t)("task.priority",{context:"high",defaultValue:"High"}),value:d.bx.High,customComponent:a().createElement(k,{icon:"ArrowheadUp",iconColor:"error",label:(0,n.t)("task.priority",{context:"high",defaultValue:"High"})})},{label:(0,n.t)("task.priority",{context:"medium",defaultValue:"Medium"}),value:d.bx.Medium,customComponent:a().createElement(k,{icon:"MinusOutline",iconColor:"gray1",label:(0,n.t)("task.priority",{context:"medium",defaultValue:"Medium"})})},{label:(0,n.t)("task.priority",{context:"low",defaultValue:"Low"}),value:d.bx.Low,customComponent:a().createElement(k,{icon:"ArrowheadDown",iconColor:"info",label:(0,n.t)("task.priority",{context:"low",defaultValue:"Low"})})}],C=({initialTitle:e,initialPriority:t,initialDescription:i,initialEnableReminder:c,initialIsAllDay:s,initialDate:m,onConfirm:u,banner:b,confirmLabel:g,defaultBoardTabTitle:k})=>{const{updateBoard:C}=(0,n.useBoardHooks)();(0,l.useEffect)((()=>{e&&C({title:e})}),[e,C]);const[v,w]=(0,l.useState)(e),A=(0,l.useCallback)((e=>{w(e.target.value),0===(0,o.size)(e.target.value)?C({title:k}):C({title:e.target.value})}),[k,C]),[D,T]=(0,l.useState)(t),z=(0,l.useCallback)((e=>{e&&function(e){return Object.values(d.bx).includes(e)}(e)&&T(e)}),[]),I=(0,l.useMemo)((()=>(0,o.find)(x,(e=>e.value===D))||(console.error("Invalid priority select item"),x[1])),[D]),[L,S]=(0,l.useState)(c),[M,_]=(0,l.useState)(m),B=(0,l.useCallback)((e=>{_(e)}),[]),R=(0,l.useCallback)((()=>S((e=>(e&&_(m),!e)))),[m]),[P,F]=(0,l.useState)(s),V=(0,l.useCallback)((()=>F((e=>(e||null!==M||_(m),!e)))),[M,m]),[H,$]=(0,l.useState)(i),j=(0,l.useCallback)((e=>{$(e.currentTarget.value)}),[]),N=(0,l.useMemo)((()=>null===M||v.length>y.vd||0===(0,o.trim)(v).length||H.length>y.nl),[M,H.length,v]),O=(0,l.useCallback)((()=>{u(L?{title:v,description:H,priority:D,reminderAllDay:P,enableReminder:!0,reminderAt:M}:{title:v,description:H,priority:D,enableReminder:!1})}),[M,H,L,P,u,D,v]);return a().createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"}},a().createElement("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"column"}},a().createElement("div",{style:{display:"flex",flexDirection:"column",padding:"16px"}},a().createElement(r.Container,{background:"gray6",mainAlignment:"flex-start",crossAlignment:"flex-start",padding:{horizontal:"small",top:"small"},gap:"0.5rem"},a().createElement(h.E,{weight:"bold",overflow:"ellipsis"},(0,n.t)("board.label.details","Details")),a().createElement(r.Container,{orientation:"horizontal",height:"fit",gap:"0.5rem",crossAlignment:"flex-start"},a().createElement(f.A,{fullWidth:!0,size:"medium",label:(0,n.t)("board.input.title.label","Title*"),value:v,onChange:A,error:v.length>y.vd,"aria-describedby":v.length>y.vd?(0,n.t)("board.input.description.error.label","Maximum length allowed is 1024 characters"):void 0}),a().createElement(r.Select,{items:x,background:"white",label:(0,n.t)("board.select.priority.label","Priority"),onChange:z,selection:I,LabelFactory:p,style:{border:"1px solid lightgray",height:"56px"}})),a().createElement(r.Switch,{value:L,onClick:R,label:(0,n.t)("board.switch.enableReminder.label","Enable reminder")}),L&&a().createElement(r.DateTimePicker,{backgroundColor:"transparent",width:"fill",label:(0,n.t)("board.dateTimePicker.reminder.label","Reminder"),defaultValue:M||void 0,includeTime:!P,onChange:B,dateFormat:P?y.qi:y.gL,hasError:null===M,errorLabel:null===M?(0,n.t)("board.dateTimePicker.description.error.label","The reminder option is enabled, set date and time for it or disable the reminder"):void 0}),L&&a().createElement(r.Checkbox,{value:P,onClick:V,label:(0,n.t)("board.checkbox.allDay.label","Remind me at every login throughout the day")}),a().createElement(h.E,{weight:"bold"},(0,n.t)("board.label.description","Description")),a().createElement(f.A,{fullWidth:!0,multiline:!0,rows:4,label:(0,n.t)("board.textArea.taskDescription.label","Task Description"),value:H,onChange:j,error:H.length>y.nl,"aria-describedby":H.length>y.nl?(0,n.t)("board.textArea.description.error.label","Maximum length allowed is 4096 characters"):void 0}))),a().createElement("div",null,b)),a().createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",padding:"16px",width:"100%"}},a().createElement(E.A,{style:{marginBottom:"8px"}}),a().createElement(r.Button,{disabled:N,size:"medium",label:g,onClick:O})))}},2724:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var l=i(7559),a=i.n(l),r=i(5003),n=i(4497),o=i(7502),c=i(2509),s=i(6549),d=i(5607);const m=()=>{const{context:e}=(0,o.useBoard)(),t=e?.taskId,{closeBoard:i}=(0,o.useBoardHooks)(),[m]=(0,r.n)(d.SQ),{data:u}=(0,n.I)(d.JP,{errorPolicy:"all",variables:{taskId:t??""},skip:!t}),{title:b,priority:g,description:p,reminderAt:h,reminderAllDay:y}=(0,l.useMemo)((()=>u?.getTask?u.getTask:{title:"",priority:d.bx.Medium,description:"",reminderAt:void 0,reminderAllDay:void 0}),[u]),f=(0,l.useCallback)((({title:e,priority:l,description:a,reminderAt:r,reminderAllDay:n,enableReminder:o})=>{if(!t)return;const s=e!==b?e:void 0,d=l!==g?l:void 0,u=(0,c.trim)(a).length>0&&a!==p?(0,c.trim)(a):void 0,f=!o&&!!h,E=o&&(h!==r.getTime()||y!==n),k=f?0:E&&o&&r.getTime()||void 0;m({variables:{updateTask:{id:t,description:u,priority:d,title:s,reminderAt:k,reminderAllDay:f||E?n||!1:void 0}}}),i()}),[i,p,g,y,h,b,t,m]);return a().createElement(a().Fragment,null,u?.getTask&&a().createElement(s.f,{initialTitle:b,initialPriority:g,initialDescription:p??"",initialEnableReminder:!!h,initialIsAllDay:y??!1,initialDate:h?new Date(h):new Date,onConfirm:f,confirmLabel:(0,o.t)("board.confirmButton.edit","edit"),defaultBoardTabTitle:(0,o.t)("board.editTask.title","Edit Task")}))}}}]);
//# sourceMappingURL=editTaskView.19986ce2.chunk.js.map