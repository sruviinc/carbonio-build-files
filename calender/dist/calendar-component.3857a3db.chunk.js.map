{"version":3,"file":"calendar-component.3857a3db.chunk.js","mappings":"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","sources":["webpack://carbonio-calendars-ui/./src/carbonio-ui-commons/utils/use-prefs.ts","webpack://carbonio-calendars-ui/./src/store/actions/new-create-appointment.ts","webpack://carbonio-calendars-ui/./src/commons/editor-save-send-fns.ts","webpack://carbonio-calendars-ui/./src/sruvi/Colors.tsx","webpack://carbonio-calendars-ui/./src/utils/work-week.ts","webpack://carbonio-calendars-ui/./src/view/calendar/calendar-style.jsx","webpack://carbonio-calendars-ui/./src/view/calendar/appointment-type-handle-modal.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/actions-buttons-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/calendar-info-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/description-fragment-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/never-sent-warning-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/participants-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/title-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/event-summary-view.tsx","webpack://carbonio-calendars-ui/./src/view/calendar/custom-event.tsx","webpack://carbonio-calendars-ui/./src/view/calendar/custom-event-wrapper.tsx","webpack://carbonio-calendars-ui/./src/sruvi/Desktop.tsx","webpack://carbonio-calendars-ui/./src/sruvi/VeryLarge.tsx","webpack://carbonio-calendars-ui/./src/sruvi/Mobile.tsx","webpack://carbonio-calendars-ui/./src/view/calendar/custom-toolbar.tsx","webpack://carbonio-calendars-ui/./src/view/calendar/work-view.tsx","webpack://carbonio-calendars-ui/./src/hooks/use-calendar-component-utils.tsx","webpack://carbonio-calendars-ui/./src/view/calendar/calendar-component.jsx"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useUserSettings } from '@zextras/carbonio-shell-ui';\n\nimport type { UserPrefs } from '../types';\n\nexport const usePrefs = (): UserPrefs => {\n\tconst { prefs } = useUserSettings();\n\treturn <UserPrefs>prefs;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport { soapFetch } from '@zextras/carbonio-shell-ui';\n\nimport { normalizeSoapMessageFromEditor } from '../../normalizations/normalize-soap-message-from-editor';\n\n// todo: this thunk is not using redux! convert to regular async function\nexport const createAppointment = createAsyncThunk(\n\t'appointment/create new appointment',\n\tasync ({ draft, editor }: any, { rejectWithValue }: any): Promise<any> => {\n\t\tif (editor) {\n\t\t\tconst body = normalizeSoapMessageFromEditor({ ...editor, draft });\n\t\t\tconst res: { calItemId: string; invId: string } = await soapFetch('CreateAppointment', body);\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\tconst response = res?.Fault ? { ...res.Fault, error: true } : res;\n\t\t\tif (response?.error) {\n\t\t\t\treturn rejectWithValue(response);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tresponse: res,\n\t\t\t\teditor: {\n\t\t\t\t\t...editor,\n\t\t\t\t\tisNew: false,\n\t\t\t\t\tisSeries: !!editor.recur,\n\t\t\t\t\tisInstance: !editor.recur,\n\t\t\t\t\tisException: false,\n\t\t\t\t\tinviteId: res.invId\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n);\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { createAppointment } from '../store/actions/new-create-appointment';\nimport { modifyAppointment } from '../store/actions/new-modify-appointment';\nimport { proposeNewTime } from '../store/actions/propose-new-time';\nimport { AppDispatch } from '../store/redux';\nimport { updateEditor } from '../store/slices/editor-slice';\nimport { Editor } from '../types/editor';\n\nconst createAppointmentFn = ({\n\tdraft,\n\teditor,\n\tdispatch\n}: {\n\tdraft: boolean;\n\teditor: Editor;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\tdispatch(createAppointment({ draft, editor })).then(({ payload }) => {\n\t\tconst { response } = payload;\n\t\tif (payload?.response) {\n\t\t\tdispatch(updateEditor({ id: payload.editor.id, editor: payload.editor }));\n\t\t}\n\t\treturn Promise.resolve({ response, editor: payload.editor });\n\t});\n\nconst modifyAppointmentFn = ({\n\tdraft,\n\teditor,\n\tdispatch\n}: {\n\tdraft: boolean;\n\teditor: Editor;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\tdispatch(modifyAppointment({ draft, editor })).then(({ payload }) => {\n\t\tconst { response, error } = payload;\n\t\tif (response && !error) {\n\t\t\tdispatch(updateEditor({ id: payload.editor.id, editor: payload.editor }));\n\t\t\treturn Promise.resolve({ response, editor: payload.editor });\n\t\t}\n\t\treturn Promise.resolve(payload);\n\t});\n\nconst onProposeNewTime = async ({\n\teditorId,\n\tdispatch\n}: {\n\teditorId: string;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\tdispatch(proposeNewTime({ id: editorId })).then(({ payload }) => {\n\t\tif (payload) {\n\t\t\tconst { response, editor, error } = payload;\n\t\t\tif (response && !error) {\n\t\t\t\tdispatch(updateEditor({ id: editorId, editor }));\n\t\t\t\treturn Promise.resolve({ response, editor });\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve(payload);\n\t});\n\nexport const onSave = ({\n\tdraft = true,\n\tisNew = true,\n\teditor,\n\tdispatch\n}: {\n\tdraft?: boolean;\n\tisNew?: boolean;\n\teditor: Editor;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\tisNew\n\t\t? createAppointmentFn({ draft, editor, dispatch })\n\t\t: modifyAppointmentFn({ draft, editor, dispatch });\n\nexport const onSend = ({\n\tisNew,\n\teditor,\n\tdispatch\n}: {\n\tisNew: boolean;\n\teditor: Editor;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\teditor?.isProposeNewTime\n\t\t? onProposeNewTime({ editorId: editor.id, dispatch })\n\t\t: onSave({ draft: false, isNew, editor, dispatch });\n","export const BACKGROUND_COLOR = '#FFFFFF';\nexport const BACKGROUND_HEADER_COLOR = '#ffffff';\nexport const PRIMARY_COLOR = '#ff6600';\nexport const SECONDARY_COLOR = '#0a1153';\nexport const FOREGROUND_COLOR = '#c2e7ff';\nexport const PRIMARY_ICON_COLOR_ACTIVE = '#0a1153';\n\nexport const BUTTONCOLOR = '#0a1153';\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { map, sortBy } from 'lodash';\n\nexport interface WorkWeekDay {\n\tday: string;\n\tworking: boolean;\n\tstart: string;\n\tend: string;\n}\n\nexport const workWeek = (zimbraPrefCalendarWorkingHours: string): WorkWeekDay[] =>\n\tsortBy(\n\t\tmap(\n\t\t\tzimbraPrefCalendarWorkingHours?.split(','),\n\t\t\t(t: string): WorkWeekDay =>\n\t\t\t\t({\n\t\t\t\t\tday: t.split(':')[0],\n\t\t\t\t\tworking: t.split(':')[1] !== 'N',\n\t\t\t\t\tstart: t.split(':')[2],\n\t\t\t\t\tend: t.split(':')[3]\n\t\t\t\t}) as WorkWeekDay\n\t\t),\n\t\t'day'\n\t);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { createGlobalStyle } from 'styled-components';\n\nexport default createGlobalStyle`\n\t.rbc-addons-dnd-resizable{\n\t\twidth: 100%;\n\t}\n\t.rbc-calendar {\n\t\tcolor: ${({ theme }) => theme.palette.text.regular};\n\t\tfont-family: ${({ theme }) => theme.fonts.default};\n\t\tfont-size: ${({ theme }) => theme.sizes.font.medium};\n\t\tfont-weight: ${({ theme }) => theme.fonts.weight.regular};\n\t\t& * {\n\t\t\toutline: none !important;\n\t\t}\n\t}\n\n\t.rbc-btn {\n\t\tcolor: inherit;\n\t\tfont: inherit;\n\t\tmargin: 0; }\n\n\tbutton.rbc-btn {\n\t\toverflow: visible;\n\t\ttext-transform: none;\n\t\t-webkit-appearance: button;\n\t\tcursor: pointer; }\n\n\tbutton[disabled].rbc-btn {\n\t\tcursor: not-allowed; }\n\n\tbutton.rbc-input::-moz-focus-inner {\n\t\tborder: 0;\n\t\tpadding: 0; }\n\n\t.rbc-calendar {\n\t\tbox-sizing: border-box;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: stretch; }\n\n\t.rbc-calendar *,\n\t.rbc-calendar *:before,\n\t.rbc-calendar *:after {\n\t\tbox-sizing: inherit; }\n\n\t.rbc-abs-full, .rbc-row-bg {\n\t\toverflow: hidden;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0; }\n\n\t.rbc-ellipsis, .rbc-event-label, .rbc-row-segment .rbc-event-content, .rbc-show-more {\n\t\tdisplay: block;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap; }\n\n\t.rbc-rtl {\n\t\tdirection: rtl; }\n\n\t.rbc-off-range {\n\t\tcolor:${({ theme }) => theme.palette.text.disabled}; }\n\n\t.rbc-off-range-bg {\n\t\tbackground: ${({ theme }) => theme.palette.gray5.regular}; }\n\n\t.rbc-header {\n\t\toverflow: hidden;\n\t\tflex: 1 0 0;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\tpadding: 0 0.1875rem;\n\t\ttext-align: center;\n\t\tvertical-align: middle;\n\t\tfont-weight: bold;\n\t\tfont-size: 90%;\n\t\tmin-height: 0;\n\t\tborder-bottom: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-header + .rbc-header {\n\t\t\tborder-left: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-rtl .rbc-header + .rbc-header {\n\t\t\tborder-left-width: 0;\n\t\t\tborder-right: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-header > a, .rbc-header > a:active, .rbc-header > a:visited {\n\t\t\tcolor: inherit;\n\t\t\ttext-decoration: none; }\n\n\t.rbc-row-content {\n\t\tposition: relative;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\tz-index: 4; }\n\n\t.rbc-today {\n\t\tbackground-color: ${({ theme }) => theme.palette.highlight.regular};\n\t\tcolor: ${({ theme }) => theme.palette.primary.regular};\n\t\tfont-weight: bold; }\n\n\n\t.rbc-toolbar {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin-bottom: 0.625rem;\n\t\tfont-size: 1rem;\n\t\tpadding: 0.5rem;\n\t\tbackground-color: ${({ theme }) => theme.palette.gray5.regular}; }\n\t\t.rbc-toolbar .rbc-toolbar-label {\n\t\t\tflex-grow: 1;\n\t\t\tpadding: 0 0.625rem;\n\t\t\ttext-align: center; }\n\t\t.rbc-toolbar button {\n\t\t\tcolor: ${({ theme }) => theme.palette.primary.regular};\n\t\t\tdisplay: inline-block;\n\t\t\tmargin: 0;\n\t\t\ttext-align: center;\n\t\t\tvertical-align: middle;\n\t\t\tbackground: none;\n\t\t\tborder: 0.0625rem solid ${({ theme }) => theme.palette.primary.regular};\n\t\t\tpadding: .375rem 1rem;\n\t\t\tborder-radius: 0.125rem;\n\t\t\tline-height: normal;\n\t\t\twhite-space: nowrap; }\n\t\t\t.rbc-toolbar button:active, .rbc-toolbar button.rbc-active {\n\t\t\t\tbackground-image: none;\n\t\t\t//\tbox-shadow: inset 0 0.1875rem 0.3125rem rgba(0, 0, 0, 0.125);\n\t\t\t\tbackground-color: ${({ theme }) => theme.palette.highlight.regular};\n\t\t\t\tborder-color: ${({ theme }) => theme.palette.primary.active};\n\t\t\t}\n\t\t\t.rbc-toolbar button:active:hover, .rbc-toolbar button:active:focus, .rbc-toolbar button.rbc-active:hover, .rbc-toolbar button.rbc-active:focus {\n\t\t\t\tcolor:${({ theme }) => theme.palette.primary.focus};\n\t\t\t\tbackground-color: ${({ theme }) => theme.palette.transparent.focus};\n\t\t\t\tborder-color: ${({ theme }) => theme.palette.primary.focus};\n\t\t\t}\n\t\t\t.rbc-toolbar button:focus {\n\t\t\t\tcolor: ${({ theme }) => theme.palette.primary.focus};\n\t\t\t\tbackground-color: ${({ theme }) => theme.palette.transparent.focus};\n\t\t\t\tborder-color: ${({ theme }) => theme.palette.primary.focus};\n\t\t\t}\n\t\t\t.rbc-toolbar button:hover {\n\t\t\t\tcolor: ${({ theme }) => theme.palette.primary.hover};\n\t\t\t\tbackground-color: ${({ theme }) => theme.palette.transparent.hover};\n\t\t\t\tborder-color: ${({ theme }) => theme.palette.primary.hover};\n\t\t\t}\n\n\t.rbc-btn-group {\n\t\tdisplay: inline-block;\n\t\theight: 2rem;\n\t\twhite-space: nowrap; }\n\t\t.rbc-btn-group > button {\n\t\t\theight: 2rem;\n\t\t\ttext-transform: uppercase;\n\t\t\tfont-size: 0.875rem; }\n\t\t.rbc-btn-group > button:first-child:not(:last-child) {\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0; }\n\t\t.rbc-btn-group > button:last-child:not(:first-child) {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0; }\n\t\t.rbc-rtl .rbc-btn-group > button:first-child:not(:last-child) {\n\t\t\tborder-radius: 0.125rem;\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0; }\n\t\t.rbc-rtl .rbc-btn-group > button:last-child:not(:first-child) {\n\t\t\tborder-radius: 0.125rem;\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0; }\n\t\t.rbc-btn-group > button:not(:first-child):not(:last-child) {\n\t\t\tborder-radius: 0; }\n\t\t.rbc-btn-group button + button {\n\t\t\tmargin-left: -0.0625rem; }\n\t\t.rbc-rtl .rbc-btn-group button + button {\n\t\t\tmargin-left: 0;\n\t\t\tmargin-right: -0.0625rem; }\n\t\t.rbc-btn-group + .rbc-btn-group,\n\t\t.rbc-btn-group + button {\n\t\t\tmargin-left: 0.625rem; }\n\n\n\t.rbc-row {\n\t\tdisplay: flex;\n\t\tflex-direction: row; }\n\n\t.rbc-row-segment {\n\t\tpadding: 0 0.0625rem 0.0625rem 0.0625rem; }\n\n  .rbc-day-bg.rbc-selected-cell {\n    background-color: ${({ primaryCalendar, summaryViewOpen, action }) =>\n\t\t\t!summaryViewOpen && !action ? primaryCalendar?.color?.background : 'inherit'} !important;\n    border: 0.0625rem solid ${({ primaryCalendar, summaryViewOpen, action }) =>\n\t\t\t!summaryViewOpen && !action ? primaryCalendar?.color?.color : 'inherit'} !important;}\n\n\t.rbc-show-more {\n\t\tbackground-color: ${({ theme }) => theme.palette.transparent.active};\n\t\tz-index: 4;\n\t\tfont-weight: bold;\n\t\tfont-size: 85%;\n\t\theight: auto;\n\t\tline-height: normal; }\n\n\t.rbc-month-view {\n\t\tposition: relative;\n\t\tborder: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular};\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex: 1 0 0;\n\t\twidth: 100%;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\theight: 100%; }\n\n\t.rbc-month-header {\n\t\tdisplay: flex;\n\t\tflex-direction: row; }\n\n\t.rbc-month-row {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tflex-direction: column;\n\t\tflex: 1 0 0;\n\t\tflex-basis: 0;\n\t\toverflow: hidden;\n\t\theight: 100%; }\n\t\t.rbc-month-row + .rbc-month-row {\n\t\t\tborder-top: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\n\t.rbc-date-cell {\n\t\tflex: 1 1 0;\n\t\tmin-width: 0;\n\t\tpadding-right: 0.3125rem;\n\t\ttext-align: right; }\n\t\t.rbc-date-cell.rbc-now {\n\t\t\tfont-weight: bold; }\n\t\t.rbc-date-cell > a, .rbc-date-cell > a:active, .rbc-date-cell > a:visited {\n\t\t\tcolor: inherit;\n\t\t\ttext-decoration: none; }\n\t.rbc-row-bg {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tflex: 1 0 0;\n\t\toverflow: hidden;\n\t}\n\t.rbc-day-bg {\n\t\tcursor: pointer;\n\t\tflex: 1 0 0; }\n\t\t.rbc-day-bg + .rbc-day-bg {\n\t\t\tborder-left: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-rtl .rbc-day-bg + .rbc-day-bg {\n\t\t\tborder-left-width: 0;\n\t\t\tborder-right: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\n\t.rbc-overlay {\n\t\tposition: absolute;\n\t\tz-index: 5;\n\t\tborder: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular};\n\t\tbackground-color: #fff;\n\t\tbox-shadow: 0 0.3125rem 0.9375rem rgba(0, 0, 0, 0.25);\n\t\tpadding: 0.625rem; }\n\t\t.rbc-overlay > * + * {\n\t\t\tmargin-top: 0.0625rem; }\n\n\t.rbc-overlay-header {\n\t\tborder-bottom: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular};\n\t\tmargin: -0.625rem -0.625rem 0.3125rem -0.625rem;\n\t\tpadding: 0.125rem 0.625rem; }\n\n\t.rbc-agenda-view {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex: 1 0 0;\n\t\toverflow: auto; }\n\t\t.rbc-agenda-view table.rbc-agenda-table {\n\t\t\twidth: 100%;\n\t\t\tborder: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular};\n\t\t\tborder-spacing: 0;\n\t\t\tborder-collapse: collapse; }\n\t\t\t.rbc-agenda-view table.rbc-agenda-table tbody > tr > td {\n\t\t\t\tpadding: 0.3125rem 0.625rem;\n\t\t\t\tvertical-align: top; }\n\t\t\t.rbc-agenda-view table.rbc-agenda-table .rbc-agenda-time-cell {\n\t\t\t\tpadding-left: 0.9375rem;\n\t\t\t\tpadding-right: 0.9375rem;\n\t\t\t\ttext-transform: lowercase; }\n\t\t\t.rbc-agenda-view table.rbc-agenda-table tbody > tr > td + td {\n\t\t\t\tborder-left: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t\t.rbc-rtl .rbc-agenda-view table.rbc-agenda-table tbody > tr > td + td {\n\t\t\t\tborder-left-width: 0;\n\t\t\t\tborder-right: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t\t.rbc-agenda-view table.rbc-agenda-table tbody > tr + tr {\n\t\t\t\tborder-top: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t\t.rbc-agenda-view table.rbc-agenda-table thead > tr > th {\n\t\t\t\tpadding: 0.1875rem 0.3125rem;\n\t\t\t\ttext-align: left;\n\t\t\t\tborder-bottom: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t\t\t.rbc-rtl .rbc-agenda-view table.rbc-agenda-table thead > tr > th {\n\t\t\t\t\ttext-align: right; }\n\n\t.rbc-agenda-time-cell {\n\t\ttext-transform: lowercase; }\n\t\t.rbc-agenda-time-cell .rbc-continues-after:after {\n\t\t\tcontent: ' »'; }\n\t\t.rbc-agenda-time-cell .rbc-continues-prior:before {\n\t\t\tcontent: '« '; }\n\n\t.rbc-agenda-date-cell,\n\t.rbc-agenda-time-cell {\n\t\twhite-space: nowrap; }\n\n\t.rbc-agenda-event-cell {\n\t\twidth: 100%; }\n\n\t.rbc-time-column {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%; }\n\t\t.rbc-time-column .rbc-timeslot-group {\n\t\t\tflex: 1; }\n\n\t.rbc-timeslot-group {\n\t\tborder-bottom: 0.0625rem solid ${({ theme }) => theme.palette.gray6.regular};\n\t\tmin-height: 5rem;\n\t\tdisplay: flex;\n\t\tflex-flow: column nowrap; }\n\n\t.rbc-time-gutter,\n\t.rbc-header-gutter {\n\t\tflex: none; }\n\n\t.rbc-label {\n\t\tpadding: 0 0.3125rem; }\n\n\t.rbc-day-slot {\n\t\tposition: relative; }\n\t\t.rbc-day-slot .rbc-events-container {\n\t\t\tbottom: 0;\n\t\t\tleft: 0;\n\t\t\tposition: absolute;\n\t\t\tright: 0;\n\t\t\tmargin-right: 0.625rem;\n\t\t\ttop: 0; }\n\t\t\t.rbc-day-slot .rbc-events-container.rbc-rtl {\n\t\t\t\tleft: 0.625rem;\n\t\t\t\tright: 0; }\n\t\t.rbc-day-slot .rbc-event {\n\t\t\tborder: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular};\n\t\t\tdisplay: flex;\n\t\t\tmax-height: 100%;\n\t\t\tmin-height: 1.25rem;\n\t\t\tflex-flow: column wrap;\n\t\t\talign-items: flex-start;\n\t\t\toverflow: hidden;\n\t\t\tposition: absolute; }\n\t\t.rbc-day-slot .rbc-event-label {\n\t\t\tflex: none;\n\t\t\tpadding-right: 0.3125rem;\n\t\t\twidth: auto; }\n\t\t.rbc-day-slot .rbc-event-content {\n\t\t\twidth: 100%;\n\t\t\tflex: 1 1 0;\n\t\t\tword-wrap: break-word;\n\t\t\tline-height: 1;\n\t\t\theight: 100%;\n\t\t\tmin-height: 1em; }\n\t\t.rbc-day-slot .rbc-time-slot {\n\t\t\tborder-top: 0.0625rem solid ${({ theme }) => theme.palette.gray5.regular}; }\n\n\t.rbc-time-view-resources .rbc-time-gutter,\n\t.rbc-time-view-resources .rbc-time-header-gutter {\n\t\tposition: sticky;\n\t\tleft: 0;\n\t\tbackground-color: ${({ theme }) => theme.palette.gray6.regular};\n\t\tborder-right: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular};\n\t\tz-index: 10;\n\t\tmargin-right: -0.0625rem; }\n\n\t.rbc-time-view-resources .rbc-time-header {\n\t\toverflow: hidden; }\n\n\t.rbc-time-view-resources .rbc-time-header-content {\n\t\tmin-width: auto;\n\t\tflex: 1 0 0; }\n\n\t.rbc-time-view-resources .rbc-time-header-cell-single-day {\n\t\tdisplay: none; }\n\n\t.rbc-time-view-resources .rbc-day-slot {\n\t\tmin-width: 8.75rem; }\n\n\t.rbc-time-view-resources .rbc-header,\n\t.rbc-time-view-resources .rbc-day-bg {\n\t\twidth: 8.75rem;\n\t\tflex: 1 1 0; }\n\n\t.rbc-time-header-content + .rbc-time-header-content {\n\t\tmargin-left: -0.0625rem; }\n\n\t.rbc-time-slot {\n\t\tflex: 1 0 0; }\n\t\t.rbc-time-slot.rbc-now {\n\t\t\tfont-weight: bold; }\n\n\t.rbc-day-header {\n\t\ttext-align: center; }\n\t.rbc-allday-cell {\n    cursor: ${({ summaryViewOpen, action }) =>\n\t\t\t!summaryViewOpen && !action ? 'pointer' : 'inherit'};\n\t}\n  .rbc-day-slot.rbc-time-column {\n    cursor: ${({ summaryViewOpen, action }) =>\n\t\t\t!summaryViewOpen && !action ? 'pointer' : 'inherit'};\n  }\n\t.rbc-slot-selection {\n\t\tcolor: ${({ primaryCalendar }) => primaryCalendar?.color?.color};\n\t\tbackground-color: ${({ primaryCalendar }) => primaryCalendar?.color?.background};\n\t\tborder: 0.0625rem solid ${({ primaryCalendar }) => primaryCalendar?.color?.color} !important;\n\t\tz-index: 10;\n\t\tposition: absolute;\n\t\tfont-size: ${({ theme }) => theme.sizes.font.medium};\n\t\twidth: 100%;\n\t\tpadding: ${({ theme }) => `${theme.sizes.padding.small} ${theme.sizes.padding.extrasmall}`};\n\t\tborder-radius : 0.25rem;\n\t}\n\n  .rbc-day-slot.rbc-time-column.rbc-slot-selecting {\n\t\tcursor: ns-resize; }\n\n\t.rbc-time-view {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex: 1;\n\t\twidth: 100%;\n\t\tborder: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular};\n\t\tmin-height: 0; }\n\t\t.rbc-time-view .rbc-time-gutter {\n\t\t\twhite-space: nowrap; }\n\t\t.rbc-time-view .rbc-allday-cell {\n\t\t\tbox-sizing: content-box;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tposition: relative; }\n\t\t.rbc-time-view .rbc-allday-cell + .rbc-allday-cell {\n\t\t\tborder-left: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-time-view .rbc-allday-events {\n\t\t\tposition: relative;\n\t\t\tz-index: 4; }\n\t\t.rbc-time-view .rbc-row {\n\t\t\tbox-sizing: border-box;\n\t\t\tmin-height: 1.25rem; }\n\n\t.rbc-time-header {\n\t\tdisplay: flex;\n\t\tflex: 0 0 auto;\n\t\tflex-direction: row; }\n\t\t.rbc-time-header.rbc-overflowing {\n\t\t\tborder-right: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-rtl .rbc-time-header.rbc-overflowing {\n\t\t\tborder-right-width: 0;\n\t\t\tborder-left: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-time-header > .rbc-row:first-child {\n\t\t\tborder-bottom: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-time-header > .rbc-row.rbc-row-resource {\n\t\t\tborder-bottom: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\n\t.rbc-time-header-cell-single-day {\n\t\tdisplay: none; }\n\n\t.rbc-time-header-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tmin-width: 0;\n\t\tflex-direction: column;\n\t\tborder-left: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-rtl .rbc-time-header-content {\n\t\t\tborder-left-width: 0;\n\t\t\tborder-right: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular}; }\n\t\t.rbc-time-header-content > .rbc-row.rbc-row-resource {\n\t\t\tborder-bottom: 0.0625rem solid ${({ theme }) => theme.palette.gray3.regular};\n\t\t\tflex-shrink: 0; }\n\n\t.rbc-time-content {\n\t\tdisplay: flex;\n\t\tflex: 1 0 0;\n\t\talign-items: flex-start;\n\t\twidth: 100%;\n\t\tborder-top: 0.125rem solid ${({ theme }) => theme.palette.gray3.regular};\n\t\toverflow-y: auto;\n\t\tposition: relative; }\n\t\t.rbc-time-content > .rbc-time-gutter {\n\t\t\tflex: none; }\n\t\t.rbc-time-content > * + * > * {\n\t\t\tborder-left: 0.0625rem solid ${({ theme }) => theme.palette.gray6.regular}; }\n\t\t.rbc-rtl .rbc-time-content > * + * > * {\n\t\t\tborder-left-width: 0;\n\t\t\tborder-right: 0.0625rem solid ${({ theme }) => theme.palette.gray6.regular}; }\n\t\t.rbc-time-content > .rbc-day-slot {\n\t\t\twidth: 100%;\n\t\t\tuser-select: none;\n\t\t\t-webkit-user-select: none; }\n\n\t.rbc-current-time-indicator {\n\t\tposition: absolute;\n\t\tz-index: 3;\n\t\tleft: 0;\n\t\tright: 0;\n\t\theight: 0.125rem;\n\t\tbackground-color: ${({ theme }) => theme.palette.primary.regular};\n\t\tpointer-events: none; }\n\n  .rbc-addons-dnd .rbc-addons-dnd-row-body {\n    position: relative; }\n\n  .rbc-addons-dnd .rbc-addons-dnd-drag-row {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0; }\n\n  .rbc-addons-dnd .rbc-addons-dnd-over {\n    background-color: rgba(0, 0, 0, 0.3); }\n\n  .rbc-addons-dnd .rbc-event {\n    transition: opacity 150ms; }\n  .rbc-addons-dnd .rbc-event:hover .rbc-addons-dnd-resize-ns-icon, .rbc-addons-dnd .rbc-event:hover .rbc-addons-dnd-resize-ew-icon {\n    display: block; }\n\n  .rbc-addons-dnd .rbc-addons-dnd-dragged-event {\n    opacity: 0; }\n\t\n  .rbc-addons-dnd.rbc-addons-dnd-is-dragging .rbc-event:not(.rbc-addons-dnd-dragged-event):not(.rbc-addons-dnd-drag-preview) {\n    opacity: .50; }\n\n  .rbc-addons-dnd .rbc-addons-dnd-resizable {\n    position: relative;\n    width: 100%;\n    height: 100%; }\n\n  .rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor {\n    width: 100%;\n    text-align: center;\n    position: absolute; }\n  .rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor:first-child {\n    z-index: 20;\n    top: 0; }\n  .rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor:last-child {\n    z-index: 20;\n    bottom: 0; }\n  .rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor .rbc-addons-dnd-resize-ns-icon {\n    display: none;\n    border-top: 0.1875rem double;\n    margin: 0 auto;\n    width: 0.625rem;\n    cursor: ns-resize; }\n\n  .rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor {\n    position: absolute;\n    top: 0.25rem;\n    bottom: 0; }\n  .rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor:first-child {\n\t\tz-index: 20;\n    left: 0; }\n  .rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor:last-child {\n    z-index: 20;\n    right: 0; }\n  .rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor .rbc-addons-dnd-resize-ew-icon {\n    display: none;\n    border-left: 0.1875rem double;\n    margin-top: auto;\n    margin-bottom: auto;\n    height: 0.625rem;\n    cursor: ew-resize; }\n\t`;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Text, Container, Padding } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\n\nimport ModalFooter from '../../commons/modal-footer';\nimport { ModalHeader } from '../../commons/modal-header';\nimport { EventType } from '../../types/event';\n\ntype ModalProps = {\n\tevent: EventType;\n\tonClose: () => void;\n\tonSeries: () => void;\n\tonInstance: () => void;\n};\n\nexport const AppointmentTypeHandlingModal = ({\n\tevent,\n\tonClose,\n\tonSeries,\n\tonInstance\n}: ModalProps): ReactElement => {\n\tconst onEntireSeries = useCallback((): void => {\n\t\tonSeries?.();\n\t\tonClose?.();\n\t}, [onClose, onSeries]);\n\n\tconst onSingleInstance = useCallback((): void => {\n\t\tonInstance?.();\n\t\tonClose?.();\n\t}, [onClose, onInstance]);\n\n\treturn (\n\t\t<Container\n\t\t\tpadding={{ all: 'small' }}\n\t\t\tmainAlignment=\"center\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t>\n\t\t\t<ModalHeader onClose={onClose} title={event.title} />\n\t\t\t<Padding all=\"small\">\n\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t{t('message.appointment_type_handle', {\n\t\t\t\t\t\tname: event.title,\n\t\t\t\t\t\tdefaultValue:\n\t\t\t\t\t\t\t'\"{{name}}” is a recurring appointment. Would you like to open only this instance or the series?'\n\t\t\t\t\t})}\n\t\t\t\t</Text>\n\t\t\t</Padding>\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onSingleInstance}\n\t\t\t\tlabel={t('label.single_instance', 'SINGLE INSTANCE')}\n\t\t\t\tsecondaryAction={onEntireSeries}\n\t\t\t\tsecondaryLabel={t('label.entire_serires', 'ENTIRE SERIES')}\n\t\t\t\tsecondaryBtnType=\"outlined\"\n\t\t\t\tsecondaryColor=\"primary\"\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Button, Dropdown, Padding, Row } from '@zextras/carbonio-design-system';\nimport { noop } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { useEventActions } from '../../hooks/use-event-actions';\nimport { SeriesActionsItems } from '../../types/actions';\nimport { EventType } from '../../types/event';\n\nexport const ActionsButtonsRow = ({\n\tonClose,\n\tevent\n}: {\n\tonClose: () => void;\n\tevent: EventType;\n}): ReactElement | null => {\n\tconst [t] = useTranslation();\n\tconst actions = useEventActions({\n\t\tonClose,\n\t\tevent\n\t});\n\tif (!actions) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Row width=\"fill\" mainAlignment=\"flex-end\" padding={{ all: 'small' }}>\n\t\t\t<Padding right=\"small\" style={{ display: 'flex' }}>\n\t\t\t\t{event.resource.isRecurrent && (actions as SeriesActionsItems)?.[1]?.items?.length > 0 && (\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\tdata-testid={`series-options`}\n\t\t\t\t\t\titems={(actions as SeriesActionsItems)?.[1]?.items}\n\t\t\t\t\t\tplacement=\"bottom-end\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\tlabel={t('label.series', 'Series')}\n\t\t\t\t\t\t\ticon=\"ChevronDown\"\n\t\t\t\t\t\t\tonClick={noop}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t)}\n\t\t\t\t{((actions as SeriesActionsItems)?.[0]?.items?.length > 0 || actions?.length > 0) && (\n\t\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\tdata-testid={`instance-options`}\n\t\t\t\t\t\t\titems={(actions as SeriesActionsItems)?.[0]?.items ?? actions}\n\t\t\t\t\t\t\tplacement=\"bottom-end\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tlabel={t('label.instance', 'Instance')}\n\t\t\t\t\t\t\t\ticon=\"ChevronDown\"\n\t\t\t\t\t\t\t\tonClick={noop}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t</Padding>\n\t\t\t\t)}\n\t\t\t</Padding>\n\t\t</Row>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Icon, Padding, Row, Text } from '@zextras/carbonio-design-system';\nimport { useParams } from 'react-router-dom';\n\nimport { useFolder } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { setCalendarColor } from '../../normalizations/normalizations-utils';\n\nexport const CalendarInfoRow = (): ReactElement => {\n\tconst { calendarId } = useParams<{ calendarId: string }>();\n\tconst calendar = useFolder(calendarId);\n\tconst color = setCalendarColor({ color: calendar?.color, rgb: calendar?.rgb });\n\treturn (\n\t\t<>\n\t\t\t{calendar && (\n\t\t\t\t<Row width=\"fill\" mainAlignment=\"flex-start\" padding={{ top: 'small' }}>\n\t\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t<Icon icon=\"Calendar2\" size=\"medium\" customColor={color.color} />\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<Text overflow=\"break-word\" size=\"medium\" weight=\"bold\">\n\t\t\t\t\t\t\t{calendar?.name}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Icon, Row, Text } from '@zextras/carbonio-design-system';\n\nimport { EventType } from '../../types/event';\n\nexport const DescriptionFragmentRow = ({ event }: { event: EventType }): ReactElement => (\n\t<>\n\t\t{event.resource.class === 'PRI' &&\n\t\t!event?.resource?.iAmOrganizer &&\n\t\t!event?.resource?.calendar?.owner ? null : (\n\t\t\t<>\n\t\t\t\t{event.resource.fragment && event.resource.fragment.length > 0 && (\n\t\t\t\t\t<Row\n\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\tpadding={{ vertical: 'small' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Row padding={{ right: 'small' }}>\n\t\t\t\t\t\t\t<Icon icon=\"MessageSquareOutline\" />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t\t\t<Text overflow=\"break-word\">{event.resource.fragment}</Text>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Row>\n\t\t\t\t)}\n\t\t\t</>\n\t\t)}\n\t</>\n);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Icon, Row, Text } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport styled from 'styled-components';\n\nconst WarningText = styled(Text)`\n\tcolor: #d74942;\n`;\n\nexport const NeverSentWarningRow = ({ neverSent }: { neverSent: boolean }): ReactElement => (\n\t<>\n\t\t{neverSent && (\n\t\t\t<Row width=\"fill\" mainAlignment=\"flex-start\" padding={{ all: 'small' }}>\n\t\t\t\t<Row padding={{ right: 'small' }}>\n\t\t\t\t\t<Icon customColor=\"#D74942\" icon=\"AlertCircleOutline\" />\n\t\t\t\t</Row>\n\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t<WarningText overflow=\"break-word\">\n\t\t\t\t\t\t{t('label.invitation_not_sent', \"You haven't sent the invitation to the attendees yet\")}\n\t\t\t\t\t</WarningText>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t)}\n\t</>\n);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Container } from '@zextras/carbonio-design-system';\n\nimport { EventType } from '../../types/event';\nimport { Invite } from '../../types/store/invite';\nimport { ParticipantsPart } from '../event-panel-view/participants-part';\n\nexport const ParticipantsRow = ({\n\tevent,\n\tinvite\n}: {\n\tevent: EventType;\n\tinvite: Invite;\n}): ReactElement => (\n\t<>\n\t\t{invite &&\n\t\tevent?.resource?.class === 'PRI' &&\n\t\tevent?.resource?.calendar?.owner &&\n\t\t!event?.resource?.iAmOrganizer ? null : (\n\t\t\t<Container\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\theight=\"fit\"\n\t\t\t\tpadding={{ top: 'small' }}\n\t\t\t>\n\t\t\t\t<ParticipantsPart\n\t\t\t\t\tinvite={invite}\n\t\t\t\t\tevent={event}\n\t\t\t\t\torganizer={invite.organizer}\n\t\t\t\t\tparticipants={invite?.participants}\n\t\t\t\t\tisSummary\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t)}\n\t</>\n);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Divider, Icon, Row, Text, Tooltip } from '@zextras/carbonio-design-system';\nimport { Tag, useTags, ZIMBRA_STANDARD_COLORS } from '@zextras/carbonio-shell-ui';\nimport { reduce, includes } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { EventType } from '../../types/event';\n\nexport const TitleRow = ({ event }: { event: EventType }): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst tags = useTags();\n\tconst tagItems = useMemo(\n\t\t() =>\n\t\t\treduce(\n\t\t\t\ttags,\n\t\t\t\t(acc, v) => {\n\t\t\t\t\tif (includes(event?.resource?.tags, v.id))\n\t\t\t\t\t\tacc.push({\n\t\t\t\t\t\t\t...v,\n\t\t\t\t\t\t\tcolor: parseInt(ZIMBRA_STANDARD_COLORS[v?.color ?? 0].hex, 10)\n\t\t\t\t\t\t});\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t[] as Array<Tag>\n\t\t\t),\n\t\t[event?.resource?.tags, tags]\n\t);\n\tconst tagIcon = useMemo(() => (tagItems?.length > 1 ? 'TagsMoreOutline' : 'Tag'), [tagItems]);\n\tconst tagIconColor = useMemo(\n\t\t() => (tagItems?.length === 1 ? tagItems?.[0]?.color : undefined),\n\t\t[tagItems]\n\t);\n\treturn (\n\t\t<>\n\t\t\t<Row width=\"fill\" padding={{ bottom: 'small' }}>\n\t\t\t\t{event.resource.class === 'PRI' && (\n\t\t\t\t\t<Row padding={{ all: 'small' }}>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tcustomColor={event.resource.calendar.color.color}\n\t\t\t\t\t\t\ticon=\"LockOutline\"\n\t\t\t\t\t\t\tstyle={{ minWidth: '1rem' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Row>\n\t\t\t\t)}\n\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t<Text size=\"large\" weight=\"bold\">\n\t\t\t\t\t\t{event.resource.class === 'PRI' ? 'Private' : event.title}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t\t{event.resource.class !== 'PRI' && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{event?.resource?.isRecurrent && (\n\t\t\t\t\t\t\t<Tooltip label={t('label.recurrent', 'Recurrent appointment')} placement=\"top\">\n\t\t\t\t\t\t\t\t<Row padding={{ right: 'small' }}>\n\t\t\t\t\t\t\t\t\t<Icon color=\"0\" icon=\"Repeat\" />\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Row padding={{ right: 'small' }}>\n\t\t\t\t\t\t\t{event?.resource?.tags?.length > 0 && (\n\t\t\t\t\t\t\t\t<Icon color={tagIconColor ? `${tagIconColor}` : '0'} icon={tagIcon} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>{event?.resource?.flags?.includes('a') && <Icon icon=\"AttachOutline\" />}</Row>\n\t\t\t\t\t\t{!event.resource.calendar?.owner && !event?.resource?.iAmOrganizer && (\n\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t{event.resource?.participationStatus === 'NE' && (\n\t\t\t\t\t\t\t\t\t<Icon icon=\"CalendarWarning\" color=\"primary\" />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Row>\n\t\t\t<Divider />\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Container, Divider } from '@zextras/carbonio-design-system';\nimport { isNil, omitBy, startsWith } from 'lodash';\nimport moment from 'moment';\n\nimport { ActionsButtonsRow } from './actions-buttons-row';\nimport { CalendarInfoRow } from './calendar-info-row';\nimport { DescriptionFragmentRow } from './description-fragment-row';\nimport { EquipmentsRow } from './equipments-row';\nimport { LocationRow } from './location-row';\nimport { MeetingRoomsRow } from './meeting-rooms-row';\nimport { NeverSentWarningRow } from './never-sent-warning-row';\nimport { ParticipantsRow } from './participants-row';\nimport TagsRow from './tags-row';\nimport { TimeInfoRow } from './time-info-row';\nimport { TitleRow } from './title-row';\nimport { VirtualRoomRow } from './virtual-room-row';\nimport { ROOM_DIVIDER } from '../../constants';\nimport { useInvite } from '../../hooks/use-invite';\nimport { EventType } from '../../types/event';\n\ntype EventSummaryProps = {\n\tevent: EventType;\n\tonClose: () => void;\n\tinviteId: string | undefined;\n};\n\nexport const EventSummaryView = ({\n\tevent,\n\tonClose,\n\tinviteId\n}: EventSummaryProps): ReactElement | null => {\n\tconst invite = useInvite(inviteId);\n\n\tconst timeData = useMemo(\n\t\t() => ({\n\t\t\t...omitBy(\n\t\t\t\t{\n\t\t\t\t\tallDay: event.allDay,\n\t\t\t\t\tstart: event.start,\n\t\t\t\t\tend: event.end\n\t\t\t\t},\n\t\t\t\tisNil\n\t\t\t),\n\t\t\t...{ timezone: invite?.tz ?? moment.tz.guess() }\n\t\t}),\n\t\t[event.allDay, event.end, event.start, invite?.tz]\n\t);\n\n\tconst locationData = useMemo(\n\t\t() =>\n\t\t\tomitBy(\n\t\t\t\t{\n\t\t\t\t\tclass: event.resource.class,\n\t\t\t\t\tlocation: event.resource.location,\n\t\t\t\t\tlocationUrl: event.resource.locationUrl\n\t\t\t\t},\n\t\t\t\tisNil\n\t\t\t),\n\t\t[event?.resource?.class, event?.resource?.location, event?.resource?.locationUrl]\n\t);\n\n\treturn (\n\t\t<Container padding={{ top: 'medium', horizontal: 'small', bottom: 'extrasmall' }} width=\"25rem\">\n\t\t\t<TitleRow event={event} />\n\t\t\t<NeverSentWarningRow neverSent={event?.resource?.inviteNeverSent} />\n\t\t\t<CalendarInfoRow />\n\t\t\t{timeData && <TimeInfoRow timeInfoData={timeData} showIcon />}\n\t\t\t{locationData && <LocationRow locationData={locationData} showIcon />}\n\t\t\t{invite && <MeetingRoomsRow invite={invite} showIcon />}\n\t\t\t{invite && <EquipmentsRow invite={invite} showIcon />}\n\t\t\t{invite?.xprop && <VirtualRoomRow xprop={invite?.xprop} showIcon />}\n\t\t\t{invite && <ParticipantsRow event={event} invite={invite} />}\n\t\t\t{event?.resource?.tags?.length > 0 && <TagsRow event={event} />}\n\t\t\t{!startsWith(event?.resource?.fragment ?? '', ROOM_DIVIDER) && (\n\t\t\t\t<DescriptionFragmentRow event={event} />\n\t\t\t)}\n\t\t\t<Divider />\n\t\t\t<ActionsButtonsRow onClose={onClose} event={event} />\n\t\t</Container>\n\t);\n};\n\nexport const MemoEventSummaryView = React.memo(EventSummaryView);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, {\n\tDispatch,\n\tReactElement,\n\tSetStateAction,\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tuseState\n} from 'react';\n\nimport {\n\tContainer,\n\tText,\n\tIcon,\n\tRow,\n\tTooltip,\n\tDropdown,\n\tPopover,\n\tuseModal,\n\tuseSnackbar,\n\tPadding\n} from '@zextras/carbonio-design-system';\nimport { replaceHistory } from '@zextras/carbonio-shell-ui';\nimport { isNil } from 'lodash';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\nimport { useParams } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { AppointmentTypeHandlingModal } from './appointment-type-handle-modal';\nimport { TagIconComponent } from '../../commons/tag-icon-component';\nimport { useEventActions } from '../../hooks/use-event-actions';\nimport { StoreProvider } from '../../store/redux';\nimport { useSummaryView } from '../../store/zustand/hooks';\nimport { useAppStatusStore } from '../../store/zustand/store';\nimport { EventActionsEnum } from '../../types/enums/event-actions-enum';\nimport { EventType } from '../../types/event';\nimport { MemoEventSummaryView } from '../event-summary-view/event-summary-view';\n\ntype CustomEventProps = {\n\tevent: EventType;\n\ttitle: string;\n};\n\nconst AlignedIcon = styled(Icon)`\n\tposition: relative;\n\ttop: -0.0625rem;\n`;\n\nconst CustomEventTitle = ({\n\ttitle,\n\toverflow = 'break-word'\n}: {\n\ttitle: CustomEventProps['title'];\n\toverflow?: 'ellipsis' | 'visible' | 'break-word';\n}): ReactElement => (\n\t<Text color=\"currentColor\" style={{ overflow }} weight=\"bold\">\n\t\t{title}\n\t</Text>\n);\n\nconst CustomEventIcon = ({\n\tisIconVisible,\n\ttooltipLabel,\n\ticonColor,\n\ticonName,\n\tdisableOuterTooltip\n}: {\n\tisIconVisible: boolean;\n\ttooltipLabel: string;\n\ticonColor?: string;\n\ticonName: string;\n\tdisableOuterTooltip: Dispatch<SetStateAction<boolean>>;\n}): ReactElement | null =>\n\tisIconVisible ? (\n\t\t<Tooltip label={tooltipLabel} placement=\"top\">\n\t\t\t<Row\n\t\t\t\tpadding={{ right: 'extrasmall' }}\n\t\t\t\tonMouseEnter={(): void => disableOuterTooltip(true)}\n\t\t\t\tonMouseLeave={(): void => disableOuterTooltip(false)}\n\t\t\t\tonFocus={(): void => disableOuterTooltip(true)}\n\t\t\t\tonBlur={(): void => disableOuterTooltip(false)}\n\t\t\t>\n\t\t\t\t<AlignedIcon color={iconColor} icon={iconName} style={{ minWidth: '1rem' }} />\n\t\t\t</Row>\n\t\t</Tooltip>\n\t) : null;\n\nconst CustomEvent = ({ event, title }: CustomEventProps): ReactElement => {\n\tconst createModal = useModal();\n\tconst anchorRef = useRef(null);\n\tconst { action } = useParams<{ action: string }>();\n\tconst createSnackbar = useSnackbar();\n\tconst summaryViewId = useSummaryView();\n\tconst [t] = useTranslation();\n\tconst [isOuterTooltipDisabled, setIsOuterTooltipDisabled] = useState(false);\n\tconst recurrentLabel = t('label.recurrent', 'Recurrent appointment');\n\n\tconst eventDiff = useMemo(\n\t\t() => moment(event.end).diff(event.start, 'minutes'),\n\t\t[event.start, event.end]\n\t);\n\n\tconst onEntireSeries = useCallback((): void => {\n\t\treplaceHistory(\n\t\t\t`/${event.resource.calendar.id}/${EventActionsEnum.EXPAND}/${event.resource.id}`\n\t\t);\n\t}, [event.resource.calendar.id, event.resource.id]);\n\n\tconst onSingleInstance = useCallback((): void => {\n\t\treplaceHistory(\n\t\t\t`/${event.resource.calendar.id}/${EventActionsEnum.EXPAND}/${event.resource.id}/${event.resource.ridZ}`\n\t\t);\n\t}, [event?.resource?.calendar?.id, event?.resource?.id, event?.resource?.ridZ]);\n\n\tconst showPanelView = useCallback(() => {\n\t\tif (event?.resource?.class === 'PRI' && !event?.haveWriteAccess) {\n\t\t\tcreateSnackbar({\n\t\t\t\tkey: `private_appointment`,\n\t\t\t\treplace: true,\n\t\t\t\ttype: 'info',\n\t\t\t\tlabel: t('label.appointment_is_private', 'The appointment is private.'),\n\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\thideButton: true\n\t\t\t});\n\t\t} else if (event?.resource?.isRecurrent) {\n\t\t\tconst closeModal = createModal(\n\t\t\t\t{\n\t\t\t\t\tchildren: (\n\t\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t\t<AppointmentTypeHandlingModal\n\t\t\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\t\t\tonClose={(): void => closeModal()}\n\t\t\t\t\t\t\t\tonSeries={onEntireSeries}\n\t\t\t\t\t\t\t\tonInstance={onSingleInstance}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</StoreProvider>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t} else {\n\t\t\treplaceHistory(\n\t\t\t\t`/${event.resource.calendar.id}/${EventActionsEnum.EXPAND}/${event.resource.id}/${event.resource.ridZ}`\n\t\t\t);\n\t\t}\n\t}, [event, createSnackbar, t, createModal, onEntireSeries, onSingleInstance]);\n\n\tconst toggleOpen = useCallback(\n\t\t(e): void => {\n\t\t\tif (event?.resource?.class === 'PRI' && !event?.haveWriteAccess) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `private_appointment`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tlabel: t('label.appointment_is_private', 'The appointment is private.'),\n\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\thideButton: true\n\t\t\t\t});\n\t\t\t} else if (e.detail === 1 && (action === EventActionsEnum.EXPAND || isNil(action))) {\n\t\t\t\tuseAppStatusStore.setState({ summaryViewId: event.id });\n\t\t\t}\n\t\t},\n\t\t[event?.resource?.class, event?.haveWriteAccess, event.id, action, createSnackbar, t]\n\t);\n\n\tconst onClose = useCallback(() => {\n\t\tuseAppStatusStore.setState({ summaryViewId: undefined });\n\t}, []);\n\n\tconst actions = useEventActions({\n\t\tevent,\n\t\tonClose\n\t});\n\n\tuseEffect(() => {\n\t\tif (!isNil(action)) {\n\t\t\tuseAppStatusStore.setState({ summaryViewId: undefined });\n\t\t}\n\t}, [action]);\n\n\tconst hasTags = useMemo(\n\t\t() =>\n\t\t\tevent?.resource?.tags &&\n\t\t\tevent?.resource?.tags?.length !== 0 &&\n\t\t\tevent?.resource?.tags?.[0] !== '',\n\t\t[event?.resource?.tags]\n\t);\n\n\tconst textOverflow = useMemo(\n\t\t() => (hasTags || event.resource.isRecurrent ? 'ellipsis' : 'visible'),\n\t\t[event.resource.isRecurrent, hasTags]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Tooltip\n\t\t\t\tlabel={title}\n\t\t\t\tplacement=\"top\"\n\t\t\t\tdisabled={event.resource.class === 'PRI' || isOuterTooltipDisabled}\n\t\t\t>\n\t\t\t\t<Container height=\"100%\" data-testid=\"calendar-event\" style={{ padding: '0.15rem 0.5rem' }}>\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\tcontextMenu\n\t\t\t\t\t\twidth=\"cal(min(100%,12.5rem))\"\n\t\t\t\t\t\tstyle={{ width: '100%', height: '100%' }}\n\t\t\t\t\t\titems={actions ?? []}\n\t\t\t\t\t\tdisplay=\"block\"\n\t\t\t\t\t\tonClick={(e: React.MouseEvent<HTMLDivElement, MouseEvent> | Event): void => {\n\t\t\t\t\t\t\tif (e) (e as Event)?.stopImmediatePropagation?.();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t\theight=\"fill\"\n\t\t\t\t\t\t\tbackground={'transparent'}\n\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\tonDoubleClick={showPanelView}\n\t\t\t\t\t\t\tonClick={toggleOpen}\n\t\t\t\t\t\t\tdata-testid=\"calendar-event-inner-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t\t\theight=\"fit\"\n\t\t\t\t\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{event.allDay && event.resource.isRecurrent && (\n\t\t\t\t\t\t\t\t\t<CustomEventIcon\n\t\t\t\t\t\t\t\t\t\ticonName={'Repeat'}\n\t\t\t\t\t\t\t\t\t\ticonColor={'currentColor'}\n\t\t\t\t\t\t\t\t\t\tisIconVisible={event.resource.isRecurrent}\n\t\t\t\t\t\t\t\t\t\ttooltipLabel={recurrentLabel}\n\t\t\t\t\t\t\t\t\t\tdisableOuterTooltip={setIsOuterTooltipDisabled}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{event.resource.inviteNeverSent && (\n\t\t\t\t\t\t\t\t\t<CustomEventIcon\n\t\t\t\t\t\t\t\t\t\ttooltipLabel={t(\n\t\t\t\t\t\t\t\t\t\t\t'event.action.invitation_not_sent_yet',\n\t\t\t\t\t\t\t\t\t\t\t'The invitation has not been sent yet'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tisIconVisible={event.resource.inviteNeverSent}\n\t\t\t\t\t\t\t\t\t\ticonColor={'error'}\n\t\t\t\t\t\t\t\t\t\ticonName={'AlertCircleOutline'}\n\t\t\t\t\t\t\t\t\t\tdisableOuterTooltip={setIsOuterTooltipDisabled}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{event.resource.class === 'PRI' && (\n\t\t\t\t\t\t\t\t\t<CustomEventIcon\n\t\t\t\t\t\t\t\t\t\ttooltipLabel={t('label.private', 'Private')}\n\t\t\t\t\t\t\t\t\t\tisIconVisible={event.resource.class === 'PRI'}\n\t\t\t\t\t\t\t\t\t\ticonColor={'currentColor'}\n\t\t\t\t\t\t\t\t\t\ticonName={'Lock'}\n\t\t\t\t\t\t\t\t\t\tdisableOuterTooltip={setIsOuterTooltipDisabled}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{!event?.resource?.calendar?.owner &&\n\t\t\t\t\t\t\t\t\t!event?.resource?.iAmOrganizer &&\n\t\t\t\t\t\t\t\t\tevent.resource?.participationStatus === 'NE' && (\n\t\t\t\t\t\t\t\t\t\t<CustomEventIcon\n\t\t\t\t\t\t\t\t\t\t\ticonColor={'primary'}\n\t\t\t\t\t\t\t\t\t\t\ticonName={'CalendarWarning'}\n\t\t\t\t\t\t\t\t\t\t\tisIconVisible={\n\t\t\t\t\t\t\t\t\t\t\t\t!event?.resource?.calendar?.owner &&\n\t\t\t\t\t\t\t\t\t\t\t\t!event?.resource?.iAmOrganizer &&\n\t\t\t\t\t\t\t\t\t\t\t\tevent.resource?.participationStatus === 'NE'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\ttooltipLabel={t('event.action.needs_action', 'Needs action')}\n\t\t\t\t\t\t\t\t\t\t\tdisableOuterTooltip={setIsOuterTooltipDisabled}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\t\tref={anchorRef}\n\t\t\t\t\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\t\t\t\t\t\t\ttakeAvailableSpace\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t{!event.allDay && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\t\t\t\t\ttakeAvailableSpace\n\t\t\t\t\t\t\t\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t\twrap=\"nowrap\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tweight=\"medium\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toverflow: textOverflow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${moment(event.start).format('LT')} - ${moment(event.end).format('LT')}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t{eventDiff <= 15 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{event.resource.isRecurrent && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomEventIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticonName={'Repeat'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticonColor={'currentColor'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisIconVisible={event.resource.isRecurrent}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltipLabel={recurrentLabel}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisableOuterTooltip={setIsOuterTooltipDisabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomEventTitle title={title} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{event.allDay && <CustomEventTitle title={title} overflow={textOverflow} />}\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t<TagIconComponent event={event} disableOuterTooltip={setIsOuterTooltipDisabled} />\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t{eventDiff >= 15 && event.resource.class !== 'PRI' && !event.allDay && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Padding top=\"extrasmall\" />\n\t\t\t\t\t\t\t\t\t<Row wrap=\"nowrap\">\n\t\t\t\t\t\t\t\t\t\t{event.resource.isRecurrent && (\n\t\t\t\t\t\t\t\t\t\t\t<CustomEventIcon\n\t\t\t\t\t\t\t\t\t\t\t\ticonName={'Repeat'}\n\t\t\t\t\t\t\t\t\t\t\t\ticonColor={'currentColor'}\n\t\t\t\t\t\t\t\t\t\t\t\tisIconVisible={event.resource.isRecurrent}\n\t\t\t\t\t\t\t\t\t\t\t\ttooltipLabel={recurrentLabel}\n\t\t\t\t\t\t\t\t\t\t\t\tdisableOuterTooltip={setIsOuterTooltipDisabled}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<CustomEventTitle title={title} />\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t</Container>\n\t\t\t</Tooltip>\n\t\t\t<Popover\n\t\t\t\tanchorEl={anchorRef}\n\t\t\t\topen={summaryViewId === event.id}\n\t\t\t\tstyleAsModal\n\t\t\t\tplacement=\"left\"\n\t\t\t\tonClose={onClose}\n\t\t\t>\n\t\t\t\t<MemoEventSummaryView event={event} onClose={onClose} inviteId={event.resource.inviteId} />\n\t\t\t</Popover>\n\t\t</>\n\t);\n};\n\nexport const MemoCustomEvent = React.memo(CustomEvent);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { setLightness } from 'polished';\nimport styled from 'styled-components';\n\nimport { EventType } from '../../types/event';\n\nexport const CustomEventWrapperStyler = styled.div<{ event: EventType }>`\n\t.rbc-event {\n\t\tcolor: ${({ event, theme }): string => {\n\t\t\tswitch (event.resource.status) {\n\t\t\t\tcase 'CANC':\n\t\t\t\t\treturn theme.palette.gray0.regular;\n\t\t\t\tcase 'TENT':\n\t\t\t\tcase 'CONF':\n\t\t\t\tdefault:\n\t\t\t\t\treturn event.resource.calendar.color.color;\n\t\t\t}\n\t\t}};\n\t\tbackground-color: ${({ event, theme }): string => {\n\t\t\tswitch (event.resource.status) {\n\t\t\t\tcase 'CANC':\n\t\t\t\t\treturn theme.palette.gray3.regular;\n\t\t\t\tcase 'TENT':\n\t\t\t\t\treturn theme.palette.gray6.regular;\n\t\t\t\tcase 'CONF':\n\t\t\t\tdefault:\n\t\t\t\t\treturn event.resource.calendar.color.background;\n\t\t\t}\n\t\t}};\n\t\tborder: ${({ event }): string =>\n\t\t\t`0.0625rem solid ${event.resource.calendar.color.color} !important`};\n\t\tbox-sizing: border-box;\n\t\tmargin: 0;\n\t\tborder-radius: 0.25rem;\n\t\tcursor: pointer;\n\t\twidth: 100%;\n\t\ttext-align: left;\n\t\ttransition:\n\t\t\tborder 0.15s ease-in-out,\n\t\t\tbackground 0.15s ease-in-out;\n\t\tbox-shadow: 0 0 0.875rem -0.5rem rgba(0, 0, 0, 0.5);\n\t}\n\t.rbc-slot-selecting .rbc-event {\n\t\tcursor: inherit;\n\t\tpointer-events: none;\n\t}\n\t.rbc-event.rbc-selected {\n\t\tbackground-color: ${({ event }): string =>\n\t\t\tsetLightness(0.95, event.resource.calendar.color.background)};\n\t\tborder: 0.0625rem solid ${({ event }): string => event.resource.calendar.color.color};\n\t}\n\t.rbc-event:focus {\n\t\tbackground-color: ${({ event }): string =>\n\t\t\tsetLightness(0.8, event.resource.calendar.color.background)};\n\t}\n\t.rbc-event-label {\n\t\tdisplay: none;\n\t}\n\n\t.rbc-event-overlaps {\n\t\tbox-shadow: -0.0625rem 0.0625rem 0.3125rem 0 rgba(51, 51, 51, 0.5);\n\t}\n\n\t.rbc-event-continues-prior {\n\t\tborder-top-left-radius: 0;\n\t\tborder-bottom-left-radius: 0;\n\t}\n\n\t.rbc-event-continues-after {\n\t\tborder-top-right-radius: 0;\n\t\tborder-bottom-right-radius: 0;\n\t}\n\n\t.rbc-event-continues-earlier {\n\t\tborder-top-left-radius: 0;\n\t\tborder-top-right-radius: 0;\n\t}\n\n\t.rbc-event-continues-later {\n\t\tborder-bottom-left-radius: 0;\n\t\tborder-bottom-right-radius: 0;\n\t}\n\t.rbc-addons-dnd-resizable {\n\t\theight: 100%;\n\t}\n\t.rbc-event-content {\n\t\theight: 100%;\n\t}\n`;\n\ntype EventWrapperProps = {\n\tevent: EventType;\n\tchildren: React.ReactChildren;\n};\n\nexport default function CustomEventWrapper({ event, children }: EventWrapperProps): ReactElement {\n\treturn <CustomEventWrapperStyler event={event}>{children}</CustomEventWrapperStyler>;\n}\n","import { useMediaQuery } from 'react-responsive';\nimport React from 'react';\n\nconst Desktop = ({ children }: { children: JSX.Element | JSX.Element[] }): JSX.Element | null => {\n\tconst isDesktop = useMediaQuery({ minWidth: 1025, minHeight: 720, maxWidth: 1919 });\n\treturn isDesktop ? <>{children}</> : null;\n};\n\nexport default Desktop;\n","import { useMediaQuery } from 'react-responsive';\nimport React from 'react';\n\nconst VeryLarge = ({ children }: { children: JSX.Element | JSX.Element[] }): JSX.Element | null => {\n\tconst isVeryLarge = useMediaQuery({ minWidth: 1920, minHeight: 720 });\n\treturn isVeryLarge ? <>{children}</> : null;\n};\n\nexport default VeryLarge;\n","import React from 'react';\nimport { useMediaQuery } from 'react-responsive';\n\nconst Mobile = ({ children }: { children: JSX.Element | JSX.Element[] }): JSX.Element | null => {\n\tconst isMobile = useMediaQuery({ maxWidth: 1024 });\n\treturn isMobile ? <>{children}</> : null;\n};\n\nexport default Mobile;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement, useCallback, useMemo } from 'react';\n\nimport {\n\tContainer,\n\tButton,\n\tIconButton,\n\tButtonProps,\n\tpseudoClasses,\n\tTooltip,\n\tPadding\n} from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\nimport styled, { css, SimpleInterpolation } from 'styled-components';\n\nimport { useAppStatusStore } from '../../store/zustand/store';\nimport {\n\tBACKGROUND_HEADER_COLOR,\n\tBUTTONCOLOR,\n\tFOREGROUND_COLOR,\n\tPRIMARY_ICON_COLOR_ACTIVE\n} from '../../sruvi/Colors';\nimport Desktop from '../../sruvi/Desktop';\nimport VeryLarge from '../../sruvi/VeryLarge';\nimport Mobile from '../../sruvi/Mobile';\nimport { Paper } from '@mui/material';\n\nconst ButtonWrapper = styled.div`\n\tmin-width: fit-content;\n\tborder: 0.0625rem solid;\n\t${({ color = 'primary', theme }): SimpleInterpolation => css`\n\t\t${pseudoClasses(theme, color, 'border-color')};\n\t`};\n\t&:last-child {\n\t\tborder-left: none;\n\t\tborder-radius: 0 0.125rem 0.125rem 0;\n\t}\n\t&:first-child {\n\t\tborder-right: none;\n\t\tborder-radius: 0.125rem 0 0 0.125rem;\n\t}\n\t&:not(:first-child):not(:last-child) {\n\t\tborder-radius: 0;\n\t\tborder-right: none;\n\t\tborder-left: none;\n\t}\n`;\n\nconst CustomButton: FC<ButtonProps> = (props: ButtonProps): ReactElement => (\n\t<ButtonWrapper>\n\t\t<Button {...props} color={BUTTONCOLOR} style={{ border: 0 }} />\n\t</ButtonWrapper>\n);\n\nexport interface CustomToolbarProps {\n\tlabel: string;\n\tonView: (arg: string) => void;\n\tonNavigate: (arg: string) => void;\n\tview: string;\n}\n\nexport const CustomToolbar = ({\n\tlabel,\n\tonView,\n\tonNavigate,\n\tview\n}: CustomToolbarProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst today = useCallback(() => onNavigate('TODAY'), [onNavigate]);\n\tconst next = useCallback(() => onNavigate('NEXT'), [onNavigate]);\n\tconst prev = useCallback(() => onNavigate('PREV'), [onNavigate]);\n\tconst week = useCallback(() => {\n\t\tuseAppStatusStore.setState({ calendarView: 'week' });\n\t\treturn onView('week');\n\t}, [onView]);\n\tconst day = useCallback(() => {\n\t\tuseAppStatusStore.setState({ calendarView: 'day' });\n\t\treturn onView('day');\n\t}, [onView]);\n\tconst month = useCallback(() => {\n\t\tuseAppStatusStore.setState({ calendarView: 'month' });\n\t\treturn onView('month');\n\t}, [onView]);\n\tconst workView = useCallback(() => {\n\t\tuseAppStatusStore.setState({ calendarView: 'work_week' });\n\t\treturn onView('work_week');\n\t}, [onView]);\n\n\tconst leftClickLabel = useMemo(() => {\n\t\tif (view === 'month') {\n\t\t\treturn t('previous_month', 'Previous month');\n\t\t}\n\t\tif (view === 'week' || view === 'work_week') {\n\t\t\treturn t('previous_week', 'Previous week');\n\t\t}\n\t\treturn t('previous_day', 'Previous day');\n\t}, [t, view]);\n\n\tconst rightClickLabel = useMemo(() => {\n\t\tif (view === 'month') {\n\t\t\treturn t('next_month', 'Next month');\n\t\t}\n\t\tif (view === 'week' || view === 'work_week') {\n\t\t\treturn t('next_week', 'Next week');\n\t\t}\n\t\treturn t('next_day', 'Next day');\n\t}, [t, view]);\n\n\treturn (\n\t\t// <Container width=\"fill\" height=\"fit\" padding={{ bottom: 'small' }}>\n\t\t// \t<Container\n\t\t// \t\tdata-testid=\"CalendarToolbar\"\n\t\t// \t\torientation=\"horizontal\"\n\t\t// \t\twidth=\"fill\"\n\t\t// \t\theight=\"3rem\"\n\t\t// \t\tmainAlignment=\"flex-start\"\n\t\t// \t\tbackground={BACKGROUND_HEADER_COLOR}\n\t\t// \t\tpadding={{ horizontal: 'small' }}\n\t\t// \t>\n\n\t\t<div style={{ width: '100%' }}>\n\t\t\t<Desktop>\n\t\t\t\t<div style={{ padding: '16px' }}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor={BUTTONCOLOR}\n\t\t\t\t\t\t\t\tlabel={t('label.today', 'today')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={today}\n\t\t\t\t\t\t\t\tminWidth={'fit-content'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\n\t\t\t\t\t\t\t<Tooltip label={leftClickLabel}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\ticonColor={PRIMARY_ICON_COLOR_ACTIVE}\n\t\t\t\t\t\t\t\t\ticon=\"ChevronLeft\"\n\t\t\t\t\t\t\t\t\tonClick={prev}\n\t\t\t\t\t\t\t\t\tminWidth={'max-content'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t<Tooltip label={rightClickLabel}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\ticonColor={PRIMARY_ICON_COLOR_ACTIVE}\n\t\t\t\t\t\t\t\t\ticon=\"ChevronRight\"\n\t\t\t\t\t\t\t\t\tonClick={next}\n\t\t\t\t\t\t\t\t\tminWidth={'max-content'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor={BUTTONCOLOR}\n\t\t\t\t\t\t\t\ttype=\"ghost\"\n\t\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\t\tonClick={(): null => null}\n\t\t\t\t\t\t\t\tdata-testid=\"CurrentDateContainer\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'month' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.month', 'month')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={month}\n\t\t\t\t\t\t\t\tdata-testid=\"MonthButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'week' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.week', 'week')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={week}\n\t\t\t\t\t\t\t\tdata-testid=\"WeekButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'day' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.day', 'day')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={day}\n\t\t\t\t\t\t\t\tdata-testid=\"DayButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'work_week' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.work_week', 'work week')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={workView}\n\t\t\t\t\t\t\t\tdata-testid=\"WorkWeekButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Desktop>\n\t\t\t<VeryLarge>\n\t\t\t\t<div style={{ padding: '16px' }}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor={BUTTONCOLOR}\n\t\t\t\t\t\t\t\tlabel={t('label.today', 'today')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={today}\n\t\t\t\t\t\t\t\tminWidth={'fit-content'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\n\t\t\t\t\t\t\t<Tooltip label={leftClickLabel}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\ticonColor={PRIMARY_ICON_COLOR_ACTIVE}\n\t\t\t\t\t\t\t\t\ticon=\"ChevronLeft\"\n\t\t\t\t\t\t\t\t\tonClick={prev}\n\t\t\t\t\t\t\t\t\tminWidth={'max-content'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t<Tooltip label={rightClickLabel}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\ticonColor={PRIMARY_ICON_COLOR_ACTIVE}\n\t\t\t\t\t\t\t\t\ticon=\"ChevronRight\"\n\t\t\t\t\t\t\t\t\tonClick={next}\n\t\t\t\t\t\t\t\t\tminWidth={'max-content'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttype=\"ghost\"\n\t\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\t\tonClick={(): null => null}\n\t\t\t\t\t\t\t\tdata-testid=\"CurrentDateContainer\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'month' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.month', 'month')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={month}\n\t\t\t\t\t\t\t\tdata-testid=\"MonthButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'week' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.week', 'week')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={week}\n\t\t\t\t\t\t\t\tdata-testid=\"WeekButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'day' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.day', 'day')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={day}\n\t\t\t\t\t\t\t\tdata-testid=\"DayButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'work_week' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.work_week', 'work week')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={workView}\n\t\t\t\t\t\t\t\tdata-testid=\"WorkWeekButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</VeryLarge>\n\t\t\t<Mobile>\n\t\t\t\t<Paper variant=\"outlined\">\n\t\t\t\t\t<div style={{ padding: '8px' }}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tcolor={BUTTONCOLOR}\n\t\t\t\t\t\t\t\t\tlabel={t('label.today', 'today')}\n\t\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\t\tonClick={today}\n\t\t\t\t\t\t\t\t\tminWidth={'fit-content'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\n\t\t\t\t\t\t\t\t<Tooltip label={leftClickLabel}>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ticonColor={PRIMARY_ICON_COLOR_ACTIVE}\n\t\t\t\t\t\t\t\t\t\ticon=\"ChevronLeft\"\n\t\t\t\t\t\t\t\t\t\tonClick={prev}\n\t\t\t\t\t\t\t\t\t\tminWidth={'max-content'}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t<Tooltip label={rightClickLabel}>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ticonColor={PRIMARY_ICON_COLOR_ACTIVE}\n\t\t\t\t\t\t\t\t\t\ticon=\"ChevronRight\"\n\t\t\t\t\t\t\t\t\t\tonClick={next}\n\t\t\t\t\t\t\t\t\t\tminWidth={'max-content'}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tcolor={BUTTONCOLOR}\n\t\t\t\t\t\t\t\t\ttype=\"ghost\"\n\t\t\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\t\t\tonClick={(): null => null}\n\t\t\t\t\t\t\t\t\tdata-testid=\"CurrentDateContainer\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\tmarginTop: '8px',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'month' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.month', 'month')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={month}\n\t\t\t\t\t\t\t\tdata-testid=\"MonthButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'week' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.week', 'week')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={week}\n\t\t\t\t\t\t\t\tdata-testid=\"WeekButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'day' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.day', 'day')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={day}\n\t\t\t\t\t\t\t\tdata-testid=\"DayButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\tbackgroundColor={view === 'work_week' ? FOREGROUND_COLOR : undefined}\n\t\t\t\t\t\t\t\tlabel={t('label.work_week', 'work week')}\n\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\tonClick={workView}\n\t\t\t\t\t\t\t\tdata-testid=\"WorkWeekButton\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Paper>\n\t\t\t</Mobile>\n\t\t</div>\n\t);\n};\n{\n\t/* <Container width=\"max-content\" orientation=\"horizontal\" mainAlignment=\"flex-start\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tlabel={t('label.today', 'today')}\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tonClick={today}\n\t\t\t\t\t\tminWidth={'fit-content'}\n\t\t\t\t\t/>\n\t\t\t\t\t<Padding left={'1rem'} />\n\t\t\t\t\t<Tooltip label={leftClickLabel}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ticonColor=\"primary\"\n\t\t\t\t\t\t\ticon=\"ChevronLeft\"\n\t\t\t\t\t\t\tonClick={prev}\n\t\t\t\t\t\t\tminWidth={'max-content'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<Padding horizontal={'.25rem'} />\n\t\t\t\t\t<Tooltip label={rightClickLabel}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ticonColor=\"primary\"\n\t\t\t\t\t\t\ticon=\"ChevronRight\"\n\t\t\t\t\t\t\tonClick={next}\n\t\t\t\t\t\t\tminWidth={'max-content'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</Container>\n\t\t\t\t<Container\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tstyle={{ minWidth: 0, flexBasis: 'content', flexGrow: 1 }}\n\t\t\t\t>\n\t\t\t\t\t<Padding left={'1rem'} />\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"ghost\"\n\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\tonClick={(): null => null}\n\t\t\t\t\t\tdata-testid=\"CurrentDateContainer\"\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t\t<Container width=\"fit\" orientation=\"horizontal\" mainAlignment=\"flex-end\">\n\t\t\t\t\t<CustomButton\n\t\t\t\t\t\tbackgroundColor={view === 'month' ? 'highlight' : undefined}\n\t\t\t\t\t\tlabel={t('label.month', 'month')}\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tonClick={month}\n\t\t\t\t\t\tdata-testid=\"MonthButton\"\n\t\t\t\t\t/>\n\t\t\t\t\t<CustomButton\n\t\t\t\t\t\tbackgroundColor={view === 'week' ? 'highlight' : undefined}\n\t\t\t\t\t\tlabel={t('label.week', 'week')}\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tonClick={week}\n\t\t\t\t\t\tdata-testid=\"WeekButton\"\n\t\t\t\t\t/>\n\t\t\t\t\t<CustomButton\n\t\t\t\t\t\tbackgroundColor={view === 'day' ? 'highlight' : undefined}\n\t\t\t\t\t\tlabel={t('label.day', 'day')}\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tonClick={day}\n\t\t\t\t\t\tdata-testid=\"DayButton\"\n\t\t\t\t\t/>\n\t\t\t\t\t<CustomButton\n\t\t\t\t\t\tbackgroundColor={view === 'work_week' ? 'highlight' : undefined}\n\t\t\t\t\t\tlabel={t('label.work_week', 'work week')}\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tonClick={workView}\n\t\t\t\t\t\tdata-testid=\"WorkWeekButton\"\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t// \t</Container>\n\t\t// </Container> */\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { add as datesAdd } from 'date-arithmetic';\nimport { find, findLast, reduce } from 'lodash';\nimport moment from 'moment';\nimport { Navigate } from 'react-big-calendar';\nimport TimeGrid from 'react-big-calendar/lib/TimeGrid';\n\nimport { WorkWeekDay } from '../../utils/work-week';\n\n// Needed by the \"range\" and \"title\" functions\nlet schedule: WorkWeekDay[] = [];\n\nexport interface WorkViewProps {\n\tdate: Date;\n\tworkingSchedule: WorkWeekDay[];\n}\n\nexport interface WorkWeekBounds {\n\tstart: number;\n\tend: number;\n}\n\nexport interface WorkViewComponent extends React.FC<WorkViewProps> {\n\trange(rangeDate: Date): Date[];\n\t// no-explicit-any: Navigate enums are declared \"any\" by BigCalendar\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tnavigate(navigateDate: Date, action: any): Date;\n\tweekBounds(week: WorkWeekDay[]): WorkWeekBounds;\n\ttitle(titleDate: Date): string;\n}\n\nexport const WorkView: WorkViewComponent = (props: WorkViewProps): ReactElement => {\n\tconst { date, workingSchedule } = props;\n\n\t// Looks horrible but there is no other way to pass and sync the workingSchedule\n\tschedule = useMemo(() => workingSchedule, [workingSchedule]);\n\tconst [min, max, range] = useMemo(\n\t\t() => [\n\t\t\tnew Date(moment(date).startOf('day').valueOf()),\n\t\t\tnew Date(moment(date).endOf('day').valueOf()),\n\t\t\tWorkView.range(date)\n\t\t],\n\t\t[date]\n\t);\n\n\treturn <TimeGrid {...props} range={range} max={max} min={min} />;\n};\n\n// Called by BigCalendar on week change\nWorkView.range = (rangeDate: Date): Date[] => {\n\tconst current = moment(rangeDate).day();\n\tconst d = moment(rangeDate).startOf('day');\n\treturn reduce(\n\t\tschedule,\n\t\t(acc: Date[], day: WorkWeekDay, i: number) => {\n\t\t\tif (day.working) {\n\t\t\t\tacc.push(datesAdd(d, i - current, 'day'));\n\t\t\t}\n\t\t\treturn acc;\n\t\t},\n\t\t[]\n\t);\n};\n\n// no-unused-vars: Actually called by BigCalendar\n// no-explicit-any: Navigate enums are declared \"any\" by BigCalendar\n// eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-explicit-any\nWorkView.navigate = (navigateDate: Date, action: any): Date => {\n\tswitch (action) {\n\t\tcase Navigate.PREVIOUS:\n\t\t\treturn datesAdd(navigateDate, -7, 'day');\n\n\t\tcase Navigate.NEXT:\n\t\t\treturn datesAdd(navigateDate, 7, 'day');\n\n\t\tdefault:\n\t\t\treturn navigateDate;\n\t}\n};\n\nWorkView.weekBounds = (week: WorkWeekDay[]): WorkWeekBounds => {\n\tconst firstDay = find(week, (day) => day.working);\n\tconst lastDay = findLast(week, (day) => day.working);\n\n\treturn {\n\t\tstart: firstDay ? parseInt(firstDay.day, 10) - 1 : 0,\n\t\tend: lastDay ? parseInt(lastDay.day, 10) - 1 : 6\n\t} as WorkWeekBounds;\n};\n\n// no-unused-vars: Actually called by BigCalendar\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nWorkView.title = (titleDate: Date): string => {\n\tconst { start, end } = WorkView.weekBounds(schedule);\n\tconst startDate = moment(titleDate).day(start);\n\tconst endDate = datesAdd(startDate, end - start, 'day');\n\tconst isMonthSame = moment(startDate).format('MMMM') === moment(endDate).format('MMMM');\n\treturn isMonthSame\n\t\t? `${moment(startDate).format('MMMM DD')} - ${moment(endDate).format('DD')}`\n\t\t: ` ${moment(startDate).format('MMMM DD')} - ${moment(endDate).format('MMMM DD')}`;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { useModal, useSnackbar } from '@zextras/carbonio-design-system';\nimport { addBoard, replaceHistory } from '@zextras/carbonio-shell-ui';\nimport { max as datesMax, min as datesMin } from 'date-arithmetic';\nimport { isEqual, isNil, omit, omitBy, size } from 'lodash';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\nimport { useParams } from 'react-router-dom';\n\nimport { useFoldersMap } from '../carbonio-ui-commons/store/zustand/folder';\nimport { generateEditor } from '../commons/editor-generator';\nimport { onSave } from '../commons/editor-save-send-fns';\nimport { CALENDAR_ROUTE } from '../constants';\nimport { normalizeInvite } from '../normalizations/normalize-invite';\nimport { getInvite } from '../store/actions/get-invite';\nimport { StoreProvider } from '../store/redux';\nimport { useAppDispatch } from '../store/redux/hooks';\nimport { useCalendarDate, useIsSummaryViewOpen, useSetRange } from '../store/zustand/hooks';\nimport { AppState, useAppStatusStore } from '../store/zustand/store';\nimport { EventActionsEnum } from '../types/enums/event-actions-enum';\nimport { EventType } from '../types/event';\nimport { AppointmentTypeHandlingModal } from '../view/calendar/appointment-type-handle-modal';\nimport { ModifyStandardMessageModal } from '../view/modals/modify-standard-message-modal';\n\nexport const useCalendarComponentUtils = (): {\n\tonEventDropOrResize: (a: {\n\t\tstart: Date;\n\t\tend: Date;\n\t\tevent: EventType;\n\t\tisAllDay?: boolean;\n\t}) => void;\n\thandleSelect: (e: { start: Date; end: Date }) => void;\n\tonRangeChange: (a: { end: Date; start: Date } | Array<Date>) => void;\n\tonNavigate: (a: Date) => void;\n\tdate: Date;\n} => {\n\tconst calendarDate = useCalendarDate();\n\tconst [date, setDate] = useState(calendarDate);\n\tconst [t] = useTranslation();\n\tconst createModal = useModal();\n\tconst createSnackbar = useSnackbar();\n\n\tconst dispatch = useAppDispatch();\n\tconst calendarFolders = useFoldersMap();\n\tconst summaryViewOpen = useIsSummaryViewOpen();\n\tconst setRange = useSetRange();\n\tconst { action } = useParams<{\n\t\taction: typeof EventActionsEnum.EXPAND | typeof EventActionsEnum.EDIT | undefined;\n\t}>();\n\n\tuseEffect(() => {\n\t\tif (action && action !== EventActionsEnum.EXPAND) {\n\t\t\treplaceHistory('');\n\t\t}\n\t}, [action]);\n\n\tconst getStart = useCallback(({ isAllDay, dropStart, isSeries, inviteStart, eventStart }) => {\n\t\tif (isAllDay) {\n\t\t\treturn dropStart.startOf('day').valueOf();\n\t\t}\n\t\tif (isSeries) {\n\t\t\tconst diff = dropStart.diff(eventStart);\n\t\t\treturn inviteStart.add(diff).valueOf();\n\t\t}\n\t\treturn dropStart.valueOf();\n\t}, []);\n\n\tconst getEnd = useCallback(\n\t\t({ isAllDay, dropEnd, isSeries, inviteEnd, eventEnd, eventAllDay }) => {\n\t\t\tif (isAllDay || eventAllDay) {\n\t\t\t\treturn dropEnd.startOf('day').valueOf();\n\t\t\t}\n\t\t\tif (isSeries) {\n\t\t\t\tconst diff = dropEnd.diff(eventEnd);\n\t\t\t\treturn inviteEnd.add(diff).valueOf();\n\t\t\t}\n\t\t\treturn dropEnd.valueOf();\n\t\t},\n\t\t[]\n\t);\n\n\tconst onDropOrResizeFn = useCallback(\n\t\t({ start, end, event, isAllDay, isSeries }) => {\n\t\t\tdispatch(\n\t\t\t\tgetInvite({ inviteId: event?.resource?.inviteId, ridZ: event?.resource?.ridZ })\n\t\t\t).then(({ payload }) => {\n\t\t\t\tif (payload) {\n\t\t\t\t\tconst inviteStart = moment(payload.m[0].inv[0].comp[0].s[0].u);\n\t\t\t\t\tconst eventStart = moment(event.start);\n\t\t\t\t\tconst dropStart = moment(start);\n\t\t\t\t\tconst inviteEnd = moment(payload.m[0].inv[0].comp[0].e[0].u);\n\t\t\t\t\tconst eventEnd = moment(event.end);\n\t\t\t\t\tconst dropEnd = moment(end);\n\t\t\t\t\tconst eventAllDay = event.allDay;\n\t\t\t\t\tconst startTime = getStart({ isSeries, dropStart, isAllDay, inviteStart, eventStart });\n\t\t\t\t\tconst endTime = getEnd({ isSeries, dropEnd, isAllDay, inviteEnd, eventEnd, eventAllDay });\n\t\t\t\t\tconst invite = normalizeInvite(payload.m[0]);\n\n\t\t\t\t\tconst onConfirm = (draft: boolean, context?: { text: Array<string> }): void => {\n\t\t\t\t\t\tconst contextObj = {\n\t\t\t\t\t\t\tdispatch,\n\t\t\t\t\t\t\tfolders: calendarFolders,\n\t\t\t\t\t\t\tstart: startTime,\n\t\t\t\t\t\t\tend: endTime,\n\t\t\t\t\t\t\tallDay: !!isAllDay,\n\t\t\t\t\t\t\tpanel: false\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst editor = generateEditor({\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\tinvite,\n\t\t\t\t\t\t\tcontext: {\n\t\t\t\t\t\t\t\t...contextObj,\n\t\t\t\t\t\t\t\t...omitBy(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trichText: context?.text?.[1],\n\t\t\t\t\t\t\t\t\t\tplainText: context?.text?.[0]\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tisNil\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tonSave({ draft, editor, isNew: false, dispatch }).then((res) => {\n\t\t\t\t\t\t\tif (res?.response) {\n\t\t\t\t\t\t\t\tconst success = res?.response;\n\t\t\t\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\t\t\t\tkey: `calendar-moved-root`,\n\t\t\t\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\t\t\t\ttype: success ? 'info' : 'warning',\n\t\t\t\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\t\t\t\tlabel: !success\n\t\t\t\t\t\t\t\t\t\t? t('label.error_try_again', 'Something went wrong, please try again')\n\t\t\t\t\t\t\t\t\t\t: t('message.snackbar.calendar_edits_saved', 'Edits saved correctly'),\n\t\t\t\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tif (\n\t\t\t\t\t\tsize(invite.participants) > 0 &&\n\t\t\t\t\t\t(invite.isException || !!event.resource.ridZ) &&\n\t\t\t\t\t\tinvite.isOrganizer &&\n\t\t\t\t\t\t!event.resource.inviteNeverSent\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst closeModal = createModal(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tchildren: (\n\t\t\t\t\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t\t\t\t\t<ModifyStandardMessageModal\n\t\t\t\t\t\t\t\t\t\t\ttitle={t('label.edit')}\n\t\t\t\t\t\t\t\t\t\t\tonClose={(): void => closeModal()}\n\t\t\t\t\t\t\t\t\t\t\tconfirmLabel={t('action.send_edit', 'Send Edit')}\n\t\t\t\t\t\t\t\t\t\t\tonConfirm={(context): void => {\n\t\t\t\t\t\t\t\t\t\t\t\tonConfirm(false, context);\n\t\t\t\t\t\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tinvite={invite}\n\t\t\t\t\t\t\t\t\t\t\tisEdited\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</StoreProvider>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonConfirm(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[calendarFolders, createModal, createSnackbar, dispatch, getEnd, getStart, t]\n\t);\n\n\tconst onEventDropOrResize = useCallback(\n\t\t({ start, end, event, isAllDay }) => {\n\t\t\tif (isAllDay && event.resource.isRecurrent && !event.resource.isException) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `recurrent-moved-in-allDay`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t(\n\t\t\t\t\t\t'recurrent_in_allday',\n\t\t\t\t\t\t'You cannot drag a recurrent appointment in a all day slot'\n\t\t\t\t\t),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t} else if (\n\t\t\t\t!isEqual(event.start, start) ||\n\t\t\t\t!isEqual(event.end, end) ||\n\t\t\t\t(event.allDay !== !!isAllDay && moment(event.start).day() === moment(event.end).day())\n\t\t\t) {\n\t\t\t\tconst onEntireSeries = (): void => {\n\t\t\t\t\tconst seriesEvent = {\n\t\t\t\t\t\t...event,\n\t\t\t\t\t\tresource: omit(event.resource, 'ridZ')\n\t\t\t\t\t};\n\t\t\t\t\tonDropOrResizeFn({ start, end, event: seriesEvent, isAllDay, isSeries: true });\n\t\t\t\t};\n\t\t\t\tconst onSingleInstance = (): void => {\n\t\t\t\t\tonDropOrResizeFn({ start, end, event, isAllDay });\n\t\t\t\t};\n\t\t\t\tif (event.resource.isRecurrent) {\n\t\t\t\t\tconst closeModal = createModal(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchildren: (\n\t\t\t\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t\t\t\t<AppointmentTypeHandlingModal\n\t\t\t\t\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\t\t\t\t\tonClose={(): void => closeModal()}\n\t\t\t\t\t\t\t\t\t\tonSeries={onEntireSeries}\n\t\t\t\t\t\t\t\t\t\tonInstance={onSingleInstance}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</StoreProvider>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tonDropOrResizeFn({ start, end, event, isAllDay });\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[createModal, createSnackbar, onDropOrResizeFn, t]\n\t);\n\n\tconst handleSelect = useCallback(\n\t\t(e) => {\n\t\t\tif (!summaryViewOpen && !action) {\n\t\t\t\tconst isAllDay =\n\t\t\t\t\tmoment(e.end).hours() === moment(e.start).hours() &&\n\t\t\t\t\tmoment(e.end).minutes() === moment(e.start).minutes() &&\n\t\t\t\t\t!moment(e.start).isSame(moment(e.end));\n\t\t\t\tconst end = isAllDay ? moment(e.end).subtract(1, 'day') : moment(e.end);\n\t\t\t\tconst editor = generateEditor({\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\tdispatch,\n\t\t\t\t\t\tfolders: calendarFolders,\n\t\t\t\t\t\tstart: moment(e.start).valueOf(),\n\t\t\t\t\t\tend: end.valueOf(),\n\t\t\t\t\t\tallDay: isAllDay ?? false,\n\t\t\t\t\t\tfreeBusy: isAllDay ? 'F' : 'B',\n\t\t\t\t\t\tpanel: false\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\taddBoard({\n\t\t\t\t\turl: `${CALENDAR_ROUTE}/`,\n\t\t\t\t\ttitle: editor?.title ?? '',\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\teditor\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[action, calendarFolders, dispatch, summaryViewOpen]\n\t);\n\n\tconst onRangeChange = useCallback(\n\t\t(range) => {\n\t\t\tif (range.length) {\n\t\t\t\tconst min = datesMin(...range);\n\t\t\t\tconst max = datesMax(...range);\n\t\t\t\tsetRange({\n\t\t\t\t\tstart: moment(min).startOf('day').valueOf(),\n\t\t\t\t\tend: moment(max).endOf('day').valueOf()\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetRange({\n\t\t\t\t\tstart: moment(range.start).startOf('day').valueOf(),\n\t\t\t\t\tend: moment(range.end).endOf('day').valueOf()\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[setRange]\n\t);\n\n\tconst onNavigate = useCallback(\n\t\t(newDate) => {\n\t\t\tuseAppStatusStore.setState((s: AppState) => ({ ...s, date: newDate }));\n\t\t\treturn setDate(newDate);\n\t\t},\n\t\t[setDate]\n\t);\n\n\treturn { onEventDropOrResize, handleSelect, onRangeChange, onNavigate, date };\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useContext, useEffect, useMemo } from 'react';\n\nimport { find, isEmpty, minBy } from 'lodash';\nimport moment from 'moment-timezone';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport { useParams } from 'react-router-dom';\nimport { ThemeContext } from 'styled-components';\n\nimport CalendarStyle from './calendar-style';\nimport { MemoCustomEvent } from './custom-event';\nimport CustomEventWrapper from './custom-event-wrapper';\nimport { CustomToolbar } from './custom-toolbar';\nimport { WorkView } from './work-view';\nimport { usePrefs } from '../../carbonio-ui-commons/utils/use-prefs';\nimport { useCalendarComponentUtils } from '../../hooks/use-calendar-component-utils';\nimport { useCheckedCalendarsQuery } from '../../hooks/use-checked-calendars-query';\nimport { useCheckedFolders } from '../../hooks/use-checked-folders';\nimport { normalizeCalendarEvents } from '../../normalizations/normalize-calendar-events';\nimport { searchAppointments } from '../../store/actions/search-appointments';\nimport { useAppDispatch, useAppSelector } from '../../store/redux/hooks';\nimport { selectAppointmentsArray } from '../../store/selectors/appointments';\nimport {\n\tuseCalendarView,\n\tuseIsSummaryViewOpen,\n\tuseRangeEnd,\n\tuseRangeStart\n} from '../../store/zustand/hooks';\nimport { isOrganizerOrHaveEqualRights } from '../../utils/store/event';\nimport { workWeek } from '../../utils/work-week';\n\nconst BigCalendar = withDragAndDrop(Calendar);\n\nconst views = { month: true, week: true, day: true, work_week: WorkView };\n\nconst CalendarSyncWithRange = () => {\n\tconst dispatch = useAppDispatch();\n\tconst start = useRangeStart();\n\tconst end = useRangeEnd();\n\tconst query = useCheckedCalendarsQuery();\n\n\tuseEffect(() => {\n\t\tdispatch(searchAppointments({ spanEnd: end, spanStart: start, query }));\n\t}, [dispatch, end, query, start]);\n\treturn null;\n};\n\nconst customComponents = {\n\ttoolbar: CustomToolbar,\n\tevent: MemoCustomEvent,\n\teventWrapper: CustomEventWrapper\n};\n\nexport default function CalendarComponent() {\n\tconst appointments = useAppSelector(selectAppointmentsArray);\n\tconst calendars = useCheckedFolders();\n\tconst theme = useContext(ThemeContext);\n\tconst prefs = usePrefs();\n\tconst calendarView = useCalendarView();\n\tconst timeZone = prefs.zimbraPrefTimeZoneId;\n\tconst summaryViewOpen = useIsSummaryViewOpen();\n\tconst firstDayOfWeek = prefs.zimbraPrefCalendarFirstDayOfWeek ?? 0;\n\tconst localizer = momentLocalizer(moment);\n\tconst primaryCalendar = useMemo(() => calendars?.[10] ?? {}, [calendars]);\n\tconst { action } = useParams();\n\n\tconst { onEventDropOrResize, handleSelect, onRangeChange, onNavigate, date } =\n\t\tuseCalendarComponentUtils();\n\n\tif (prefs.zimbraPrefLocale) {\n\t\tmoment.updateLocale(prefs.zimbraPrefLocale, {\n\t\t\tweek: {\n\t\t\t\tdow: firstDayOfWeek\n\t\t\t}\n\t\t});\n\t}\n\n\tconst workingSchedule = useMemo(\n\t\t() => workWeek(prefs.zimbraPrefCalendarWorkingHours),\n\t\t[prefs?.zimbraPrefCalendarWorkingHours]\n\t);\n\n\tconst events = useMemo(\n\t\t() => normalizeCalendarEvents(appointments, calendars),\n\t\t[appointments, calendars]\n\t);\n\n\tconst startHour = useMemo(\n\t\t() =>\n\t\t\tNumber(\n\t\t\t\tminBy(workingSchedule, (w) => w?.start)\n\t\t\t\t\t?.start?.split('')\n\t\t\t\t\t.splice(0, 2)\n\t\t\t\t\t.join('')\n\t\t\t),\n\t\t[workingSchedule]\n\t);\n\n\tconst selectSlotBgColor = useCallback(\n\t\t(newDate) => {\n\t\t\tif (workingSchedule?.[moment(newDate).day()]?.working) {\n\t\t\t\tif (\n\t\t\t\t\tmoment(newDate).tz(timeZone).format('HHmm') >=\n\t\t\t\t\t\tworkingSchedule[moment(newDate).day()].start &&\n\t\t\t\t\tmoment(newDate).tz(timeZone).format('HHmm') < workingSchedule[moment(newDate).day()].end\n\t\t\t\t) {\n\t\t\t\t\treturn theme.palette.gray6.regular;\n\t\t\t\t}\n\t\t\t\treturn theme.palette.gray5.regular;\n\t\t\t}\n\t\t\treturn theme.palette.gray5.regular;\n\t\t},\n\t\t[theme?.palette?.gray5?.regular, theme?.palette?.gray6?.regular, timeZone, workingSchedule]\n\t);\n\n\tconst slotDayBorderColor = useCallback(\n\t\t(newDate) => {\n\t\t\tif (workingSchedule?.[moment(newDate).day()]?.working) {\n\t\t\t\treturn theme.palette.gray3.regular;\n\t\t\t}\n\t\t\treturn theme.palette.gray6.regular;\n\t\t},\n\t\t[theme?.palette?.gray3?.regular, theme?.palette?.gray6?.regular, workingSchedule]\n\t);\n\n\tconst eventPropGetter = useCallback(\n\t\t(event) => ({\n\t\t\tstyle: {\n\t\t\t\tbackgroundColor: event.resource.calendar.color.background,\n\t\t\t\tcolor: event.resource.calendar.color.color,\n\t\t\t\tborder: `0.0625rem solid ${event.resource.calendar.color.color}`,\n\t\t\t\tpadding: 0\n\t\t\t}\n\t\t}),\n\t\t[]\n\t);\n\n\tconst slotPropGetter = useCallback(\n\t\t(newDate) => ({\n\t\t\tstyle: {\n\t\t\t\tbackgroundColor: selectSlotBgColor(newDate),\n\t\t\t\tborderColor: `${theme.palette.gray3.regular}`,\n\t\t\t\tborderRight: `0.0625rem solid ${theme.palette.gray3.regular}`\n\t\t\t}\n\t\t}),\n\t\t[selectSlotBgColor, theme?.palette?.gray3?.regular]\n\t);\n\n\tconst dayPropGetter = useCallback(\n\t\t(newDate) => ({\n\t\t\tstyle: {\n\t\t\t\tbackgroundColor:\n\t\t\t\t\t// eslint-disable-next-line no-nested-ternary\n\t\t\t\t\tworkingSchedule?.[moment(newDate).day()]?.working\n\t\t\t\t\t\t? moment().isSame(moment(newDate), 'day')\n\t\t\t\t\t\t\t? theme.palette.highlight.regular\n\t\t\t\t\t\t\t: theme.palette.gray6.regular\n\t\t\t\t\t\t: theme.palette.gray3.regular,\n\t\t\t\tborderBottom: `0.0625rem solid ${slotDayBorderColor(newDate)}`\n\t\t\t}\n\t\t}),\n\t\t[\n\t\t\tslotDayBorderColor,\n\t\t\ttheme.palette.gray3.regular,\n\t\t\ttheme.palette.gray6.regular,\n\t\t\ttheme.palette.highlight.regular,\n\t\t\tworkingSchedule\n\t\t]\n\t);\n\n\tconst defaultView = useMemo(() => {\n\t\tif (calendarView) {\n\t\t\treturn calendarView;\n\t\t}\n\t\tswitch (prefs.zimbraPrefCalendarInitialView) {\n\t\t\tcase 'month':\n\t\t\t\treturn 'month';\n\t\t\tcase 'week':\n\t\t\t\treturn 'week';\n\t\t\tcase 'day':\n\t\t\t\treturn 'day';\n\t\t\tdefault:\n\t\t\t\treturn 'work_week';\n\t\t}\n\t}, [calendarView, prefs?.zimbraPrefCalendarInitialView]);\n\n\tconst draggableAccessor = useCallback(\n\t\t(calendarEvent) => {\n\t\t\tif (calendarEvent) {\n\t\t\t\tconst absFolderPath = find(calendars, [\n\t\t\t\t\t'id',\n\t\t\t\t\tcalendarEvent.resource.calendar.id\n\t\t\t\t])?.absFolderPath;\n\t\t\t\treturn isOrganizerOrHaveEqualRights(calendarEvent, absFolderPath);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t[calendars]\n\t);\n\n\tconst resizableAccessor = useCallback(\n\t\t(calendarEvent) => {\n\t\t\tif (calendarEvent) {\n\t\t\t\tconst absFolderPath = find(calendars, [\n\t\t\t\t\t'id',\n\t\t\t\t\tcalendarEvent.resource.calendar.id\n\t\t\t\t])?.absFolderPath;\n\t\t\t\treturn (\n\t\t\t\t\tisOrganizerOrHaveEqualRights(calendarEvent, absFolderPath) &&\n\t\t\t\t\t// disabling every appointment placed in the all day position until a bug is fixed:\n\t\t\t\t\t// https://github.com/jquense/react-big-calendar/issues/2432\n\t\t\t\t\t(!calendarEvent.allDay ||\n\t\t\t\t\t\t(!calendarEvent.allDay &&\n\t\t\t\t\t\t\tmoment(calendarEvent.start).day() === moment(calendarEvent.end).day()))\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t[calendars]\n\t);\n\n\tconst scrollToTime = useMemo(() => new Date(0, 0, 0, startHour, -15, 0), [startHour]);\n\treturn (\n\t\t<>\n\t\t\t{!isEmpty(calendars) && <CalendarSyncWithRange />}\n\t\t\t<CalendarStyle\n\t\t\t\tprimaryCalendar={primaryCalendar}\n\t\t\t\tsummaryViewOpen={summaryViewOpen}\n\t\t\t\taction={action}\n\t\t\t/>\n\t\t\t<BigCalendar\n\t\t\t\tselectable\n\t\t\t\tlocalizer={localizer}\n\t\t\t\tdefaultView={defaultView}\n\t\t\t\tevents={events}\n\t\t\t\tdate={date}\n\t\t\t\tonNavigate={onNavigate}\n\t\t\t\tstartAccessor=\"start\"\n\t\t\t\tendAccessor=\"end\"\n\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\tcomponents={customComponents}\n\t\t\t\tviews={views}\n\t\t\t\ttooltipAccessor={null}\n\t\t\t\tonRangeChange={onRangeChange}\n\t\t\t\tdayPropGetter={dayPropGetter}\n\t\t\t\tslotPropGetter={slotPropGetter}\n\t\t\t\teventPropGetter={eventPropGetter}\n\t\t\t\tworkingSchedule={workingSchedule}\n\t\t\t\tonSelectSlot={handleSelect}\n\t\t\t\tscrollToTime={scrollToTime}\n\t\t\t\tonEventDrop={onEventDropOrResize}\n\t\t\t\tonEventResize={onEventDropOrResize}\n\t\t\t\tformats={{ eventTimeRangeFormat: () => '' }}\n\t\t\t\tresizable\n\t\t\t\tresizableAccessor={resizableAccessor}\n\t\t\t\tonSelecting={() => !summaryViewOpen && !action}\n\t\t\t\tdraggableAccessor={draggableAccessor}\n\t\t\t/>\n\t\t</>\n\t);\n}\n"],"names":["usePrefs","prefs","useUserSettings","createAppointment","createAsyncThunk","async","draft","editor","rejectWithValue","body","normalizeSoapMessageFromEditor","res","soapFetch","response","Fault","error","isNew","isSeries","recur","isInstance","isException","inviteId","invId","onSave","dispatch","createAppointmentFn","then","payload","updateEditor","id","Promise","resolve","modifyAppointmentFn","modifyAppointment","onSend","isProposeNewTime","editorId","proposeNewTime","onProposeNewTime","BACKGROUND_COLOR","FOREGROUND_COLOR","PRIMARY_ICON_COLOR_ACTIVE","BUTTONCOLOR","workWeek","zimbraPrefCalendarWorkingHours","sortBy","map","split","t","day","working","start","end","createGlobalStyle","theme","palette","text","regular","fonts","default","sizes","font","medium","weight","disabled","gray5","gray3","highlight","primary","active","focus","transparent","hover","primaryCalendar","summaryViewOpen","action","color","background","gray6","padding","small","extrasmall","AppointmentTypeHandlingModal","event","onClose","onSeries","onInstance","onEntireSeries","useCallback","onSingleInstance","React","Container","all","mainAlignment","crossAlignment","height","ModalHeader","title","Padding","Text","overflow","name","defaultValue","ModalFooter","onConfirm","label","secondaryAction","secondaryLabel","secondaryBtnType","secondaryColor","ActionsButtonsRow","useTranslation","actions","useEventActions","Row","width","right","style","display","resource","isRecurrent","items","length","Dropdown","placement","Button","type","icon","onClick","noop","left","CalendarInfoRow","calendarId","useParams","calendar","useFolder","setCalendarColor","rgb","top","takeAvailableSpace","Icon","size","customColor","DescriptionFragmentRow","class","iAmOrganizer","owner","fragment","vertical","WarningText","styled","withConfig","displayName","componentId","NeverSentWarningRow","neverSent","ParticipantsRow","invite","orientation","ParticipantsPart","organizer","participants","isSummary","TitleRow","tags","useTags","tagItems","useMemo","reduce","acc","v","includes","push","parseInt","ZIMBRA_STANDARD_COLORS","hex","tagIcon","tagIconColor","undefined","bottom","minWidth","Tooltip","flags","participationStatus","Divider","EventSummaryView","useInvite","timeData","omitBy","allDay","isNil","timezone","tz","moment","locationData","location","locationUrl","horizontal","inviteNeverSent","TimeInfoRow","timeInfoData","showIcon","LocationRow","MeetingRoomsRow","EquipmentsRow","xprop","VirtualRoomRow","TagsRow","startsWith","ROOM_DIVIDER","MemoEventSummaryView","AlignedIcon","CustomEventTitle","CustomEventIcon","isIconVisible","tooltipLabel","iconColor","iconName","disableOuterTooltip","onMouseEnter","onMouseLeave","onFocus","onBlur","CustomEvent","createModal","useModal","anchorRef","useRef","createSnackbar","useSnackbar","summaryViewId","useSummaryView","isOuterTooltipDisabled","setIsOuterTooltipDisabled","useState","recurrentLabel","eventDiff","diff","replaceHistory","EventActionsEnum","ridZ","showPanelView","haveWriteAccess","closeModal","children","StoreProvider","key","replace","autoHideTimeout","hideButton","toggleOpen","e","detail","useAppStatusStore","useEffect","hasTags","textOverflow","contextMenu","stopImmediatePropagation","onDoubleClick","wrap","ref","format","TagIconComponent","Popover","anchorEl","open","styleAsModal","MemoCustomEvent","CustomEventWrapperStyler","status","gray0","setLightness","Desktop","useMediaQuery","minHeight","maxWidth","VeryLarge","Mobile","ButtonWrapper","css","pseudoClasses","CustomButton","props","_extends","border","schedule","WorkView","date","workingSchedule","min","max","range","Date","startOf","valueOf","endOf","TimeGrid","rangeDate","current","d","i","datesAdd","navigate","navigateDate","Navigate","weekBounds","week","firstDay","find","lastDay","findLast","titleDate","startDate","endDate","useCalendarComponentUtils","calendarDate","useCalendarDate","setDate","useAppDispatch","calendarFolders","useFoldersMap","useIsSummaryViewOpen","setRange","useSetRange","getStart","isAllDay","dropStart","inviteStart","eventStart","add","getEnd","dropEnd","inviteEnd","eventEnd","eventAllDay","onDropOrResizeFn","getInvite","m","inv","comp","s","u","startTime","endTime","normalizeInvite","context","contextObj","folders","panel","generateEditor","richText","plainText","success","isOrganizer","ModifyStandardMessageModal","confirmLabel","isEdited","onEventDropOrResize","isEqual","seriesEvent","omit","handleSelect","hours","minutes","isSame","subtract","freeBusy","addBoard","url","CALENDAR_ROUTE","onRangeChange","datesMin","datesMax","onNavigate","newDate","BigCalendar","withDragAndDrop","Calendar","views","month","work_week","CalendarSyncWithRange","useRangeStart","useRangeEnd","query","useCheckedCalendarsQuery","searchAppointments","spanEnd","spanStart","customComponents","toolbar","CustomToolbar","onView","view","today","next","prev","calendarView","workView","leftClickLabel","rightClickLabel","flexDirection","justifyContent","alignItems","IconButton","backgroundColor","Paper","variant","marginTop","eventWrapper","CalendarComponent","appointments","useAppSelector","selectAppointmentsArray","calendars","useCheckedFolders","useContext","ThemeContext","useCalendarView","timeZone","zimbraPrefTimeZoneId","firstDayOfWeek","zimbraPrefCalendarFirstDayOfWeek","localizer","momentLocalizer","zimbraPrefLocale","dow","events","normalizeCalendarEvents","startHour","Number","minBy","w","splice","join","selectSlotBgColor","slotDayBorderColor","eventPropGetter","slotPropGetter","borderColor","borderRight","dayPropGetter","borderBottom","defaultView","zimbraPrefCalendarInitialView","draggableAccessor","calendarEvent","absFolderPath","isOrganizerOrHaveEqualRights","resizableAccessor","scrollToTime","isEmpty","CalendarStyle","selectable","startAccessor","endAccessor","components","tooltipAccessor","onSelectSlot","onEventDrop","onEventResize","formats","eventTimeRangeFormat","resizable","onSelecting"],"sourceRoot":""}