{"version":3,"file":"sidebar-view.9aea952c.chunk.js","mappings":"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","sources":["webpack://carbonio-calendars-ui/./src/soap/noop-request.ts","webpack://carbonio-calendars-ui/./src/soap/create-folder-request.ts","webpack://carbonio-calendars-ui/./src/view/move/new-calendar-modal.tsx","webpack://carbonio-calendars-ui/./src/store/actions/create-calendar.ts","webpack://carbonio-calendars-ui/./src/view/sidebar/collapsed-sidebar-items.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/delete-modal.tsx","webpack://carbonio-calendars-ui/./src/commons/edit-modal-context.ts","webpack://carbonio-calendars-ui/./src/view/sidebar/edit-modal/parts/grantee-chip.tsx","webpack://carbonio-calendars-ui/./src/store/actions/send-share-calendar-notification.ts","webpack://carbonio-calendars-ui/./src/view/sidebar/edit-modal/parts/edit-permission-modal.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/edit-modal/parts/main-edit-modal.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/edit-modal/parts/revoke-modal.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/share-calendar-modal.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/edit-modal/edit-modal.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/edit-modal/parts/svg-container.jsx","webpack://carbonio-calendars-ui/./src/view/sidebar/edit-modal/parts/url-column.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/edit-modal/parts/share-calendar-url-modal.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/empty-modal.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/shares-info-modal.tsx","webpack://carbonio-calendars-ui/./src/store/actions/create-mountpoint.ts","webpack://carbonio-calendars-ui/./src/view/sidebar/shares-modal.tsx","webpack://carbonio-calendars-ui/./src/actions/calendar-actions-fn.tsx","webpack://carbonio-calendars-ui/./src/soap/get-folder-request.ts","webpack://carbonio-calendars-ui/./src/soap/get-share-info-request.ts","webpack://carbonio-calendars-ui/./src/actions/calendar-actions-items.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/custom-components/folders-component.tsx","webpack://carbonio-calendars-ui/./src/hooks/use-calendar-actions.tsx","webpack://carbonio-calendars-ui/./src/carbonio-ui-commons/theme/theme-mui.ts","webpack://carbonio-calendars-ui/./src/carbonio-ui-commons/components/sidebar/sidebar-accordion-mui.tsx","webpack://carbonio-calendars-ui/./src/view/tags/use-get-tags-accordions.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/sidebar.tsx","webpack://carbonio-calendars-ui/./src/view/sidebar/utils.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { soapFetch } from '@zextras/carbonio-shell-ui';\n\nimport { SearchReturnType } from './search-request';\n\nexport const NoOpRequest = async (): Promise<void> => {\n\tconst response: SearchReturnType = await soapFetch('NoOp', {\n\t\t_jsns: 'urn:zimbraMail'\n\t});\n\treturn response?.Fault ? { ...response.Fault, error: true } : response;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { soapFetch } from '@zextras/carbonio-shell-ui';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const createFolderRequest = async ({\n\tname,\n\tparent,\n\tcolor,\n\texcludeFreeBusy\n}: any): Promise<any> =>\n\tsoapFetch('CreateFolder', {\n\t\t_jsns: 'urn:zimbraMail',\n\t\tfolder: {\n\t\t\tcolor,\n\t\t\tf: excludeFreeBusy ? 'b#' : '#',\n\t\t\tl: parent,\n\t\t\tname,\n\t\t\tview: 'appointment'\n\t\t}\n\t});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport {\n\tContainer,\n\tInput,\n\tPadding,\n\tSelect,\n\tText,\n\tCheckbox,\n\tRow,\n\tIcon,\n\tSelectItem,\n\tSelectProps,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport { FOLDERS } from '@zextras/carbonio-shell-ui';\nimport { includes, map } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport { useFoldersMapByRoot, useRoot } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { hasId } from '../../carbonio-ui-commons/worker/handle-message';\nimport ModalFooter from '../../commons/modal-footer';\nimport { ModalHeader } from '../../commons/modal-header';\nimport { CALENDARS_STANDARD_COLORS } from '../../constants/calendar';\nimport { createCalendar } from '../../store/actions/create-calendar';\nimport { EventType } from '../../types/event';\n\nconst Square = styled.div`\n\twidth: 1.125rem;\n\theight: 1.125rem;\n\tposition: relative;\n\ttop: -0.1875rem;\n\tborder: 0.0625rem solid ${({ theme }): string => theme.palette.gray2.regular};\n\tbackground: ${({ color }): string | undefined => color};\n\tborder-radius: 0.25rem;\n`;\n\nconst ColorContainer = styled(Container)`\n\tborder-bottom: 0.0625rem solid ${({ theme }): string => theme.palette.gray2.regular};\n`;\nconst TextUpperCase = styled(Text)`\n\ttext-transform: capitalize;\n`;\n\nconst LabelFactory: SelectProps['LabelFactory'] = ({\n\tselected,\n\tlabel,\n\topen,\n\tfocus\n}): ReactElement => (\n\t<ColorContainer\n\t\torientation=\"horizontal\"\n\t\twidth=\"fill\"\n\t\tcrossAlignment=\"center\"\n\t\tmainAlignment=\"space-between\"\n\t\tborderRadius=\"half\"\n\t\tbackground={'gray5'}\n\t\tpadding={{\n\t\t\tall: 'small'\n\t\t}}\n\t>\n\t\t<Row width=\"100%\" takeAvailableSpace mainAlignment=\"space-between\">\n\t\t\t<Row\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ left: 'small' }}\n\t\t\t>\n\t\t\t\t<Text size=\"small\" color={open || focus ? 'primary' : 'secondary'}>\n\t\t\t\t\t{label}\n\t\t\t\t</Text>\n\t\t\t\t<TextUpperCase>{selected?.[0].label}</TextUpperCase>\n\t\t\t</Row>\n\t\t\t<Padding right=\"small\">\n\t\t\t\t<Square color={CALENDARS_STANDARD_COLORS[Number(selected[0].value)].color} />\n\t\t\t</Padding>\n\t\t</Row>\n\t\t<Icon\n\t\t\tsize=\"large\"\n\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\tcolor={open || focus ? 'primary' : 'secondary'}\n\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t/>\n\t</ColorContainer>\n);\nconst getStatusItems = (): SelectItem[] =>\n\tCALENDARS_STANDARD_COLORS.map((el, index) => ({\n\t\tbackground: el.background,\n\t\tlabel: el.label ?? '',\n\t\tvalue: index.toString(),\n\t\tcustomComponent: (\n\t\t\t<Container width=\"100%\" mainAlignment=\"space-between\" orientation=\"horizontal\" height=\"fit\">\n\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t<TextUpperCase>{el.label}</TextUpperCase>\n\t\t\t\t</Padding>\n\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t<Square color={el.color} />\n\t\t\t\t</Padding>\n\t\t\t</Container>\n\t\t)\n\t}));\n\ntype ActionArgs = {\n\tinviteId: string;\n\tl: string;\n\tid: string;\n\tdestinationCalendarName: string;\n};\n\ntype NewModalProps = {\n\ttoggleModal?: () => void;\n\tonClose: () => void;\n\tevent?: EventType;\n\tfolderId: string;\n\taction?: (arg: ActionArgs) => void;\n};\n\nexport const NewModal = ({\n\tonClose,\n\ttoggleModal,\n\tevent,\n\taction,\n\tfolderId\n}: NewModalProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst [inputValue, setInputValue] = useState('');\n\tconst [freeBusy, setFreeBusy] = useState(false);\n\tconst toggleFreeBusy = useCallback(() => setFreeBusy((c) => !c), []);\n\tconst colors = useMemo(() => getStatusItems(), []);\n\tconst [selectedColor, setSelectedColor] = useState(0);\n\tconst createSnackbar = useSnackbar();\n\tconst root = useRoot(folderId);\n\n\tconst folders = useFoldersMapByRoot(root?.id ?? '1');\n\tconst folderArray = useMemo(() => map(folders, (f) => f.name), [folders]);\n\tconst showDupWarning = useMemo(\n\t\t() => includes(folderArray, inputValue),\n\t\t[inputValue, folderArray]\n\t);\n\tconst disabled = useMemo(\n\t\t() =>\n\t\t\tinputValue.indexOf('/') > -1 ||\n\t\t\tinputValue.length === 0 ||\n\t\t\tinputValue === 'Calendar' ||\n\t\t\tinputValue === 'calendar' ||\n\t\t\tshowDupWarning,\n\t\t[inputValue, showDupWarning]\n\t);\n\n\tconst onConfirm = (): void => {\n\t\tif (inputValue) {\n\t\t\tcreateCalendar({\n\t\t\t\tparent: root?.id ?? '1',\n\t\t\t\tname: inputValue,\n\t\t\t\tcolor: selectedColor,\n\t\t\t\texcludeFreeBusy: freeBusy\n\t\t\t}).then((newCalendarRes) => {\n\t\t\t\tif (!newCalendarRes.Fault) {\n\t\t\t\t\taction &&\n\t\t\t\t\t\tevent &&\n\t\t\t\t\t\taction({\n\t\t\t\t\t\t\tinviteId: event.resource.inviteId,\n\t\t\t\t\t\t\tl: newCalendarRes.id,\n\t\t\t\t\t\t\tdestinationCalendarName: newCalendarRes.name,\n\t\t\t\t\t\t\tid: event.resource.id\n\t\t\t\t\t\t});\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `new`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tlabel: t('message.snackbar.new_calendar_created', 'New calendar created'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t\tonClose();\n\t\t\t\t} else {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `move`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t\tonClose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tsetInputValue('');\n\t\tsetSelectedColor(0);\n\t\tsetFreeBusy(false);\n\t\tonClose();\n\t};\n\n\tconst onCloseModal = useCallback(() => {\n\t\tsetInputValue('');\n\t\tsetSelectedColor(0);\n\t\tsetFreeBusy(false);\n\t\tonClose();\n\t}, [onClose]);\n\n\tconst placeholder = useMemo(() => t('label.type_name_here', 'Calendar name'), [t]);\n\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\treturn (\n\t\t<Container\n\t\t\tpadding={{ all: 'small' }}\n\t\t\tmainAlignment=\"center\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t>\n\t\t\t<ModalHeader\n\t\t\t\ttitle={t('folder.modal.new.title2', 'New calendar creation')}\n\t\t\t\tonClose={onCloseModal}\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\tlabel={placeholder}\n\t\t\t\tbackgroundColor=\"gray5\"\n\t\t\t\tvalue={inputValue}\n\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>): void => {\n\t\t\t\t\tsetInputValue(e.target.value);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{showDupWarning && (\n\t\t\t\t<Padding all=\"small\">\n\t\t\t\t\t<Text size=\"small\" color=\"error\">\n\t\t\t\t\t\t{t('folder.modal.new.duplicate_warning', 'Calendar with the same name already exists')}\n\t\t\t\t\t</Text>\n\t\t\t\t</Padding>\n\t\t\t)}\n\t\t\t<Padding vertical=\"medium\" />\n\t\t\t<Select\n\t\t\t\tlabel={'Select color'}\n\t\t\t\tonChange={(value): void => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tsetSelectedColor(parseInt(value, 10));\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\titems={colors}\n\t\t\t\tdefaultSelection={colors[0]}\n\t\t\t\tLabelFactory={LabelFactory}\n\t\t\t/>\n\t\t\t<Padding vertical=\"medium\" />\n\t\t\t<Checkbox\n\t\t\t\tvalue={freeBusy}\n\t\t\t\tonClick={toggleFreeBusy}\n\t\t\t\tlabel={t(\n\t\t\t\t\t'label.exclude_free_busy',\n\t\t\t\t\t'Exclude this calendar when reporting the free/busy times'\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tsecondaryAction={toggleModal}\n\t\t\t\tsecondaryLabel={t('folder.modal.footer.go_back', 'Go back')}\n\t\t\t\tlabel={\n\t\t\t\t\tevent && hasId(event.resource.calendar, FOLDERS.TRASH)\n\t\t\t\t\t\t? t('folder.modal.restore.footer', 'Create and Restore')\n\t\t\t\t\t\t: t('label.create', 'Create')\n\t\t\t\t}\n\t\t\t\tdisabled={disabled}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { createFolderRequest } from '../../soap/create-folder-request';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const createCalendar = async ({\n\tname,\n\tparent,\n\tcolor,\n\texcludeFreeBusy\n}: any): Promise<any> => {\n\tconst res = await createFolderRequest({ name, parent, color, excludeFreeBusy });\n\tif (res.folder) {\n\t\treturn res.folder[0];\n\t}\n\treturn res;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useCallback, useMemo } from 'react';\n\nimport { Container, IconButton, Padding, Row, Tooltip } from '@zextras/carbonio-design-system';\n\nimport { Folder } from '../../carbonio-ui-commons/types/folder';\nimport { getFolderIcon, recursiveToggleCheck } from '../../commons/utilities';\nimport { useCheckedCalendarsQuery } from '../../hooks/use-checked-calendars-query';\nimport { setCalendarColor } from '../../normalizations/normalizations-utils';\nimport { useAppDispatch } from '../../store/redux/hooks';\nimport { useRangeEnd, useRangeStart } from '../../store/zustand/hooks';\n\nexport const CollapsedSidebarItem: FC<{ item: Folder }> = ({ item }) => {\n\tconst { name, checked = false } = item;\n\tconst dispatch = useAppDispatch();\n\tconst start = useRangeStart();\n\tconst end = useRangeEnd();\n\tconst query = useCheckedCalendarsQuery();\n\n\tconst icon = useMemo(() => getFolderIcon({ checked, item }), [checked, item]);\n\n\tconst iconColor = setCalendarColor({ color: item.color, rgb: item.rgb })?.color;\n\n\tconst onIconClick = useCallback(() => {\n\t\trecursiveToggleCheck({ folder: item, checked, dispatch, start, end, query });\n\t}, [checked, dispatch, end, item, query, start]);\n\n\treturn (\n\t\t<Container width=\"fill\" height=\"fit\">\n\t\t\t<Row mainAlignment=\"flex-start\" takeAvailableSpace>\n\t\t\t\t<Tooltip label={name} placement=\"right\">\n\t\t\t\t\t<Padding all=\"extrasmall\">\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tcustomSize={{ iconSize: 'large', paddingSize: 'small' }}\n\t\t\t\t\t\t\ticon={icon}\n\t\t\t\t\t\t\ticonColor={iconColor}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tonClick={onIconClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Padding>\n\t\t\t\t</Tooltip>\n\t\t\t</Row>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useMemo } from 'react';\n\nimport { Container, Text, useSnackbar } from '@zextras/carbonio-design-system';\nimport { FOLDERS } from '@zextras/carbonio-shell-ui';\nimport { Trans, useTranslation } from 'react-i18next';\n\nimport ModalFooter from '../../carbonio-ui-commons/components/modals/modal-footer';\nimport ModalHeader from '../../carbonio-ui-commons/components/modals/modal-header';\nimport { isNestedInTrash } from '../../carbonio-ui-commons/store/zustand/folder/utils';\nimport { Folder } from '../../carbonio-ui-commons/types/folder';\nimport { hasId } from '../../carbonio-ui-commons/worker/handle-message';\nimport { FOLDER_OPERATIONS } from '../../constants/api';\nimport { folderAction } from '../../store/actions/calendar-actions';\n\nexport const DeleteModal: FC<{ folder: Folder; onClose: () => void }> = ({ folder, onClose }) => {\n\tconst createSnackbar = useSnackbar();\n\tconst [t] = useTranslation();\n\tconst onConfirm = (): void => {\n\t\tonClose();\n\t\tconst restoreEvent = (): void => {\n\t\t\tfolderAction({ id: folder.id, op: FOLDER_OPERATIONS.MOVE, l: folder.l }).then((res) => {\n\t\t\t\tif (!res.Fault) {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: 'send',\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tlabel: t('message.snackbar.calendar_restored', 'Calendar restored successfully'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: 'send',\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tfolderAction({\n\t\t\tid: folder.id,\n\t\t\top: isNestedInTrash(folder) ? FOLDER_OPERATIONS.DELETE : FOLDER_OPERATIONS.TRASH\n\t\t}).then((res) => {\n\t\t\tif (!res.Fault) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: 'send',\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tlabel: isNestedInTrash(folder)\n\t\t\t\t\t\t? t('message.snackbar.calendar_permanently_deleted', 'Calendar permanently deleted')\n\t\t\t\t\t\t: t('message.snackbar.calendar_moved_to_trash', 'Calendar moved to trash'),\n\t\t\t\t\tautoHideTimeout: 5000,\n\t\t\t\t\thideButton: folder ? hasId(folder, FOLDERS.USER_ROOT) : true,\n\t\t\t\t\tactionLabel: t('label.undo', 'Undo'),\n\t\t\t\t\tonActionClick: () => restoreEvent()\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: 'send',\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\thideButton: true\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\tconst title = useMemo(() => t('label.delete', 'Delete'), [t]);\n\treturn folder ? (\n\t\t<Container padding=\"0.5rem 0.5rem 1.5rem\">\n\t\t\t<ModalHeader title={title} onClose={onClose} />\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t{isNestedInTrash(folder) ? (\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"message.you_sure_delete_calendar\"\n\t\t\t\t\t\t\tdefaults={'Are you sure you want to permanently delete the \"{{name}}\" calendar?'}\n\t\t\t\t\t\t\tvalues={{ name: folder.name }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"message.you_sure_move_calendar_trash\"\n\t\t\t\t\t\t\tdefaults={'Are you sure you want to  delete the \"{{name}}\" calendar?'}\n\t\t\t\t\t\t\tvalues={{ name: folder.name }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Text>\n\t\t\t</Container>\n\t\t\t<ModalFooter onConfirm={onConfirm} label={t('label.delete', 'Delete')} color=\"error\" />\n\t\t</Container>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useContext } from 'react';\n\nimport { Grant } from '../carbonio-ui-commons/types/folder';\n\nexport type EditModalContextType = {\n\tsetModal: (modal: string) => void;\n\tonClose: () => void;\n\tsetActiveGrant: (grant: Grant) => void;\n\troleOptions: { label: string; value: string }[];\n};\n\nexport const EditModalContext = React.createContext<EditModalContextType | null>(null);\n\nexport const useEditModalContext = (): EditModalContextType => {\n\tconst editModalContext = useContext(EditModalContext);\n\n\tif (!editModalContext) {\n\t\tthrow new Error('useEditModalContext has to be used within <EditModalContext.Provider>');\n\t}\n\n\treturn editModalContext;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useMemo } from 'react';\n\nimport { Chip } from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { Grant } from '../../../../carbonio-ui-commons/types/folder';\nimport { useEditModalContext } from '../../../../commons/edit-modal-context';\nimport { SHARE_USER_TYPE } from '../../../../constants';\n\nexport const GranteeChip = ({ grant }: { grant: Grant }): JSX.Element => {\n\tconst [t] = useTranslation();\n\tconst { roleOptions } = useEditModalContext();\n\n\tconst role = useMemo(() => find(roleOptions, ['value', grant?.perm ?? '']), [roleOptions, grant]);\n\n\tconst label = useMemo(() => {\n\t\tconst publicLabel = grant.gt === SHARE_USER_TYPE.PUBLIC ? t('public', 'public') : '';\n\t\treturn `${grant.d ?? grant.zid ?? publicLabel} - ${role?.label}`;\n\t}, [grant.d, grant.gt, grant.zid, role, t]);\n\n\treturn <Chip label={label} maxWidth={'fill'} />;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport { map } from 'lodash';\n\n// todo: this thunk is not using redux! convert to regular async function\nexport const sendShareCalendarNotification = createAsyncThunk(\n\t'calendar/sendShareCalendarNotification',\n\tasync (data: any) =>\n\t\tPromise.all(\n\t\t\tmap(data.contacts, (contact) =>\n\t\t\t\tfetch('/service/soap/SendShareNotificationRequest', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'content-type': 'application/soap+xml'\n\t\t\t\t\t},\n\t\t\t\t\tbody: `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n                <soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\">\n                    <soap:Header>\n                        <context xmlns=\"urn:zimbra\">\n                            <account by=\"name\">${data.accounts[0].name}</account>\n                            <format type=\"js\"/>\n                        </context>\n                    </soap:Header>\n                    <soap:Body>\n                    <SendShareNotificationRequest xmlns=\"urn:zimbraMail\">\n                           <item id=\"${data.folder}\"/>\n                           <e a=\"${contact.email}\"/>\n                           ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata?.standardMessage?.length > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `<notes>${data.standardMessage}</notes>`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n                    </SendShareNotificationRequest>\t\t\t\t\n                    </soap:Body>\n                </soap:Envelope>\n            `\n\t\t\t\t}).then((resData) => resData.json())\n\t\t\t)\n\t\t)\n);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo, useState, FC } from 'react';\n\nimport {\n\tCheckbox,\n\tContainer,\n\tInput,\n\tRow,\n\tSelect,\n\tText,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport { useUserAccounts } from '@zextras/carbonio-shell-ui';\nimport { useTranslation } from 'react-i18next';\n\nimport { GranteeChip } from './grantee-chip';\nimport { Folder, Grant } from '../../../../carbonio-ui-commons/types/folder';\nimport { useEditModalContext } from '../../../../commons/edit-modal-context';\nimport ModalFooter from '../../../../commons/modal-footer';\nimport { ModalHeader } from '../../../../commons/modal-header';\nimport { SHARE_USER_TYPE } from '../../../../constants';\nimport { FOLDER_OPERATIONS } from '../../../../constants/api';\nimport { findLabel } from '../../../../settings/components/utils';\nimport { folderAction } from '../../../../store/actions/calendar-actions';\nimport { sendShareCalendarNotification } from '../../../../store/actions/send-share-calendar-notification';\nimport { useAppDispatch } from '../../../../store/redux/hooks';\n\ntype EditPermissionModalProps = {\n\tfolder: Folder;\n\tgrant: Grant;\n\tonGoBack: () => void;\n};\n\nexport const EditPermissionModal: FC<EditPermissionModalProps> = ({ folder, grant, onGoBack }) => {\n\tconst [t] = useTranslation();\n\tconst [sendNotification, setSendNotification] = useState(false);\n\tconst [standardMessage, setStandardMessage] = useState('');\n\tconst { onClose, roleOptions } = useEditModalContext();\n\tconst accounts = useUserAccounts();\n\tconst dispatch = useAppDispatch();\n\tconst createSnackbar = useSnackbar();\n\tconst [shareWithUserRole, setShareWithUserRole] = useState('');\n\tconst [allowToSeePrivateAppointment, setAllowToSeePrivateAppointment] = useState(false);\n\n\tconst onConfirm = (): void => {\n\t\tconst grants = [\n\t\t\t{\n\t\t\t\tgt: SHARE_USER_TYPE.USER,\n\t\t\t\tinh: '1',\n\t\t\t\td: grant.d || grant.zid,\n\t\t\t\tperm: `${shareWithUserRole}${allowToSeePrivateAppointment ? 'p' : ''}`,\n\t\t\t\tpw: ''\n\t\t\t}\n\t\t];\n\t\tfolderAction({ id: folder.id, op: FOLDER_OPERATIONS.GRANT, grant: grants }).then((res) => {\n\t\t\tif (!res?.Fault) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('label.calendar_shared', 'Calendar shared successfully'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t\tsendNotification &&\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\tsendShareCalendarNotification({\n\t\t\t\t\t\t\tsendNotification,\n\t\t\t\t\t\t\tstandardMessage,\n\t\t\t\t\t\t\tcontacts: [{ email: grant.d || grant.zid }],\n\t\t\t\t\t\t\tshareWithUserRole,\n\t\t\t\t\t\t\tfolder: folder.id,\n\t\t\t\t\t\t\taccounts\n\t\t\t\t\t\t})\n\t\t\t\t\t).then((res2) => {\n\t\t\t\t\t\tif (!res2.type.includes('fulfilled')) {\n\t\t\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\t\t\tkey: `folder-action-failed`,\n\t\t\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tonGoBack();\n\t};\n\n\tconst onShareRoleChange = useCallback((shareRole) => {\n\t\tsetShareWithUserRole(shareRole);\n\t}, []);\n\n\tconst title = useMemo(() => t('label.edit_access', 'Edit access'), [t]);\n\treturn (\n\t\t<Container data-testid=\"EditPermissionModal\" padding=\"0.5rem 0.5rem 1.5rem\">\n\t\t\t<ModalHeader title={title} onClose={onClose} />\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<GranteeChip grant={grant} />\n\t\t\t</Container>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Checkbox\n\t\t\t\t\tvalue={allowToSeePrivateAppointment}\n\t\t\t\t\tdefaultChecked={allowToSeePrivateAppointment}\n\t\t\t\t\tonClick={(): void => setAllowToSeePrivateAppointment((prevValue) => !prevValue)}\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'share.label.allow_to_see_private_appt',\n\t\t\t\t\t\t'Allow user(s) to see my private appointments'\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Select\n\t\t\t\t\titems={roleOptions}\n\t\t\t\t\tbackground={'gray5'}\n\t\t\t\t\tlabel={t('label.role', 'Role')}\n\t\t\t\t\tonChange={onShareRoleChange}\n\t\t\t\t\tdisablePortal\n\t\t\t\t\tdefaultSelection={{\n\t\t\t\t\t\tvalue: grant.perm,\n\t\t\t\t\t\tlabel: findLabel(roleOptions, grant.perm)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Checkbox\n\t\t\t\t\tvalue={sendNotification}\n\t\t\t\t\tdefaultChecked={sendNotification}\n\t\t\t\t\tonClick={(): void => setSendNotification(!sendNotification)}\n\t\t\t\t\tlabel={t('share.label.send_notification', 'Send notification about this share')}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Input\n\t\t\t\t\tlabel={t('share.placeholder.standard_message', 'Add a note to standard message')}\n\t\t\t\t\tvalue={standardMessage}\n\t\t\t\t\tonChange={(ev): void => {\n\t\t\t\t\t\tsetStandardMessage(ev.target.value);\n\t\t\t\t\t}}\n\t\t\t\t\tbackgroundColor=\"gray5\"\n\t\t\t\t\tdisabled={!sendNotification}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t\torientation=\"horizontal\"\n\t\t\t>\n\t\t\t\t<Row padding={{ right: 'small' }}>\n\t\t\t\t\t<Text weight=\"bold\" size=\"small\">\n\t\t\t\t\t\tNote:\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Text overflow=\"break-word\" size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'share.note.share_note',\n\t\t\t\t\t\t\t'The standard message displays your name, the name of the shared item, pemissions granted to the recipients, and sign in information.'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tsecondaryAction={onGoBack}\n\t\t\t\tsecondaryLabel={t('folder.modal.footer.go_back', 'Go back')}\n\t\t\t\tlabel={t('label.edit_share', 'Edit share')}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useCallback, useMemo, useState } from 'react';\n\nimport {\n\tButton,\n\tCheckbox,\n\tContainer,\n\tDivider,\n\tIcon,\n\tInput,\n\tModalBody,\n\tModalFooter,\n\tModalHeader,\n\tPadding,\n\tRow,\n\tSelect,\n\tSelectItem,\n\tText,\n\tTooltip,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport { FOLDERS, useUserAccounts } from '@zextras/carbonio-shell-ui';\nimport type { TFunction } from 'i18next';\nimport { compact, find, includes, isEmpty, map } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled, { DefaultTheme } from 'styled-components';\n\nimport { GranteeChip } from './grantee-chip';\nimport { FOLDER_VIEW } from '../../../../carbonio-ui-commons/constants';\nimport { useFoldersMap } from '../../../../carbonio-ui-commons/store/zustand/folder';\nimport { Folder, Grant } from '../../../../carbonio-ui-commons/types/folder';\nimport { hasId } from '../../../../carbonio-ui-commons/worker/handle-message';\nimport { useEditModalContext } from '../../../../commons/edit-modal-context';\nimport { SHARE_USER_TYPE } from '../../../../constants';\nimport { FOLDER_OPERATIONS } from '../../../../constants/api';\nimport { CALENDARS_STANDARD_COLORS } from '../../../../constants/calendar';\nimport { setCalendarColor } from '../../../../normalizations/normalizations-utils';\nimport { folderAction } from '../../../../store/actions/calendar-actions';\nimport { sendShareCalendarNotification } from '../../../../store/actions/send-share-calendar-notification';\nimport { useAppDispatch } from '../../../../store/redux/hooks';\n\nconst Square = styled.div`\n\twidth: 1.125rem;\n\theight: 1.125rem;\n\tposition: relative;\n\ttop: -0.1875rem;\n\tborder: 0.0625rem solid\n\t\t${({ theme }: { theme: DefaultTheme }): string => theme.palette.gray2.regular};\n\tbackground: ${({ color }: { color: string }): string => color};\n\tborder-radius: 0.25rem;\n`;\n\nconst ColorContainer = styled(Container)`\n\tborder-bottom: 0.0625rem solid\n\t\t${({ theme }: { theme: DefaultTheme }): string => theme.palette.gray2.regular};\n`;\n\nconst StyledContainer = styled(Container)`\n\tmin-width: 0;\n\tflex-basis: 0;\n\tflex-grow: 1;\n`;\n\nconst TextUpperCase = styled(Text)`\n\ttext-transform: capitalize;\n`;\n\ntype LabelFactoryProps = {\n\tselected: Array<SelectItem>;\n\tlabel: string | undefined;\n\topen: boolean;\n\tfocus: boolean;\n};\n\nconst LabelFactory: FC<LabelFactoryProps> = ({ selected, label, open, focus }) => {\n\tconst colorName = useMemo(() => selected?.[0]?.label, [selected]);\n\tconst squareColor = useMemo(\n\t\t() =>\n\t\t\t(colorName === 'custom'\n\t\t\t\t? selected?.[0]?.value\n\t\t\t\t: CALENDARS_STANDARD_COLORS[parseInt(selected[0].value, 10)]?.color) || '',\n\t\t[colorName, selected]\n\t) as string;\n\n\treturn (\n\t\t<ColorContainer\n\t\t\torientation=\"horizontal\"\n\t\t\twidth=\"fill\"\n\t\t\tcrossAlignment=\"center\"\n\t\t\tmainAlignment=\"space-between\"\n\t\t\tborderRadius=\"half\"\n\t\t\tbackground={'gray5'}\n\t\t\tpadding={{\n\t\t\t\tall: 'small'\n\t\t\t}}\n\t\t>\n\t\t\t<Row width=\"100%\" takeAvailableSpace mainAlignment=\"space-between\">\n\t\t\t\t<Row\n\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tpadding={{ left: 'small' }}\n\t\t\t\t>\n\t\t\t\t\t<Text size=\"small\" color={open || focus ? 'primary' : 'secondary'}>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</Text>\n\t\t\t\t\t<TextUpperCase>{colorName}</TextUpperCase>\n\t\t\t\t</Row>\n\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t<Square color={squareColor ?? '0'} />\n\t\t\t\t</Padding>\n\t\t\t</Row>\n\t\t\t<Icon\n\t\t\t\tsize=\"large\"\n\t\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\t\tcolor={open || focus ? 'primary' : 'secondary'}\n\t\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t\t/>\n\t\t</ColorContainer>\n\t);\n};\n\nconst getStatusItems = (t: TFunction): Array<SelectItem> =>\n\tCALENDARS_STANDARD_COLORS.map((el, index) => ({\n\t\tlabel: t(el.label ?? ''),\n\t\tvalue: index.toString(),\n\t\tcustomComponent: (\n\t\t\t<Container width=\"100%\" mainAlignment=\"space-between\" orientation=\"horizontal\" height=\"fit\">\n\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t<TextUpperCase>{t(el.label ?? '')}</TextUpperCase>\n\t\t\t\t</Padding>\n\t\t\t\t<Square color={el.color} />\n\t\t\t</Container>\n\t\t)\n\t}));\n\ntype MainEditModalProps = {\n\tfolder: Folder;\n\ttotalAppointments: number;\n\tgrant: Grant[];\n};\n\nexport const MainEditModal: FC<MainEditModalProps> = ({ folder, totalAppointments, grant }) => {\n\tconst allCalendars = useFoldersMap();\n\n\tconst [t] = useTranslation();\n\tconst accounts = useUserAccounts();\n\tconst createSnackbar = useSnackbar();\n\tconst dispatch = useAppDispatch();\n\tconst { setModal, onClose, setActiveGrant } = useEditModalContext();\n\n\tconst colors = useMemo(() => getStatusItems(t), [t]);\n\n\tconst defaultFreeBusy = /b/.test(folder.f ?? '');\n\tconst defaultFolderName = folder.name || '';\n\tconst defaultColor = useMemo(\n\t\t() =>\n\t\t\tfind(colors, { label: setCalendarColor({ color: folder.color, rgb: folder.rgb }).label }) ?? {\n\t\t\t\tlabel: '',\n\t\t\t\tvalue: ''\n\t\t\t},\n\t\t[colors, folder?.color, folder?.rgb]\n\t);\n\n\tconst [folderName, setFolderName] = useState(defaultFolderName);\n\tconst [freeBusy, setFreeBusy] = useState(defaultFreeBusy);\n\n\tconst toggleFreeBusy = useCallback(() => setFreeBusy((c) => !c), []);\n\n\tconst isNotACalendarFolderAndIsNotASystemFolder = useCallback(\n\t\t(f) => f.view !== FOLDER_VIEW.appointment && parseInt(f.id, 10) > 16,\n\t\t[]\n\t);\n\n\tconst folderArray = useMemo(\n\t\t() =>\n\t\t\tmap(allCalendars, (f) =>\n\t\t\t\tf.name === defaultFolderName || isNotACalendarFolderAndIsNotASystemFolder(f) ? null : f.name\n\t\t\t),\n\t\t[allCalendars, defaultFolderName, isNotACalendarFolderAndIsNotASystemFolder]\n\t);\n\n\tconst showDupWarning = useMemo(\n\t\t() => includes(folderArray, folderName),\n\t\t[folderName, folderArray]\n\t);\n\n\tconst disabled = useMemo(\n\t\t() =>\n\t\t\thasId(folder, FOLDERS.CALENDAR)\n\t\t\t\t? false\n\t\t\t\t: folderName.indexOf('/') > -1 ||\n\t\t\t\t\tfolderName.length === 0 ||\n\t\t\t\t\tfolderName.toLowerCase() === 'calendar' ||\n\t\t\t\t\tshowDupWarning,\n\t\t[folderName, folder, showDupWarning]\n\t);\n\n\tconst [selectedColor, setSelectedColor] = useState<SelectItem>(defaultColor);\n\n\tconst onSelectedColorChange = useCallback(\n\t\t(newColor) => {\n\t\t\tconst newResult = find(colors, {\n\t\t\t\tlabel: setCalendarColor({ color: newColor }).label\n\t\t\t});\n\t\t\tif (newResult) {\n\t\t\t\tsetSelectedColor(newResult);\n\t\t\t}\n\t\t},\n\t\t[colors]\n\t);\n\n\tconst onConfirm = useCallback(() => {\n\t\tconst actionRename =\n\t\t\tfolderName?.length && folderName !== defaultFolderName\n\t\t\t\t? { op: FOLDER_OPERATIONS.RENAME, name: folderName, id: folder.id }\n\t\t\t\t: undefined;\n\t\tconst actionColor =\n\t\t\tselectedColor && selectedColor?.value !== defaultColor?.value\n\t\t\t\t? { op: FOLDER_OPERATIONS.COLOR, color: selectedColor.value, id: folder.id }\n\t\t\t\t: undefined;\n\t\tconst actionFreeBusy =\n\t\t\tfreeBusy !== defaultFreeBusy\n\t\t\t\t? {\n\t\t\t\t\t\top: FOLDER_OPERATIONS.FREE_BUSY,\n\t\t\t\t\t\texcludeFreeBusy: !defaultFreeBusy,\n\t\t\t\t\t\tid: folder.id\n\t\t\t\t\t}\n\t\t\t\t: undefined;\n\t\tconst actionsArray = compact([actionRename, actionColor, actionFreeBusy]);\n\t\tif (actionsArray.length) {\n\t\t\tconst actions = actionsArray.length > 1 ? actionsArray : actionsArray[0];\n\t\t\tfolderAction(actions).then((res: { Fault?: string }) => {\n\t\t\t\tif (!res.Fault) {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: t('label.changes_saved', 'Changes saved'),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tonClose();\n\t\t\t});\n\t\t} else {\n\t\t\tonClose();\n\t\t}\n\t}, [\n\t\tfolderName,\n\t\tdefaultFolderName,\n\t\tfolder.id,\n\t\tselectedColor,\n\t\tdefaultColor?.value,\n\t\tfreeBusy,\n\t\tdefaultFreeBusy,\n\t\tonClose,\n\t\tcreateSnackbar,\n\t\tt\n\t]);\n\n\tconst onShare = useCallback(() => {\n\t\tif (setModal) setModal('share');\n\t}, [setModal]);\n\n\tconst onRevoke = useCallback(\n\t\t(item) => {\n\t\t\tif (setActiveGrant) setActiveGrant(item);\n\t\t\tsetModal('revoke');\n\t\t},\n\t\t[setActiveGrant, setModal]\n\t);\n\n\tconst onResend = useCallback(\n\t\t(item) => {\n\t\t\tdispatch(\n\t\t\t\tsendShareCalendarNotification({\n\t\t\t\t\tcontacts: [{ email: item.d }],\n\t\t\t\t\tfolder: folder.id,\n\t\t\t\t\taccounts\n\t\t\t\t})\n\t\t\t).then((res) => {\n\t\t\t\tif (res.type.includes('fulfilled')) {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: t('share_invite_resent', 'Share invite resent'),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[accounts, createSnackbar, dispatch, folder, t]\n\t);\n\n\tconst onEdit = useCallback(\n\t\t(item) => {\n\t\t\tif (setActiveGrant) setActiveGrant(item);\n\t\t\tsetModal('edit');\n\t\t},\n\t\t[setModal, setActiveGrant]\n\t);\n\n\tconst title = useMemo(\n\t\t() => t('action.edit_calendar_properties', 'Edit calendar properties'),\n\t\t[t]\n\t);\n\n\tconst placeholder = useMemo(() => t('label.type_name_here', 'Calendar name'), [t]);\n\n\treturn (\n\t\t<Container\n\t\t\tdata-testid=\"MainEditModal\"\n\t\t\tpadding=\"0.5rem 0.5rem 1.5rem\"\n\t\t\tstyle={{ overflowY: 'auto' }}\n\t\t>\n\t\t\t<ModalHeader onClose={onClose} title={title} showCloseIcon />\n\t\t\t<Divider />\n\t\t\t<ModalBody style={{ padding: '0.5rem' }}>\n\t\t\t\t<Container mainAlignment=\"center\" crossAlignment=\"flex-start\" height=\"fit\">\n\t\t\t\t\t{hasId(folder, FOLDERS.CALENDAR) ? (\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tlabel={t('cannot_edit_name', 'You cannot edit the name of a system calendar')}\n\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\tmaxWidth=\"fit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tlabel={placeholder}\n\t\t\t\t\t\t\t\tbackgroundColor=\"gray5\"\n\t\t\t\t\t\t\t\tdefaultValue={folderName}\n\t\t\t\t\t\t\t\tonChange={(e): void => {\n\t\t\t\t\t\t\t\t\tsetFolderName(e.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tlabel={placeholder}\n\t\t\t\t\t\t\tbackgroundColor=\"gray5\"\n\t\t\t\t\t\t\tdefaultValue={folderName}\n\t\t\t\t\t\t\tonChange={(e): void => {\n\t\t\t\t\t\t\t\tsetFolderName(e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Container>\n\t\t\t\t{showDupWarning && (\n\t\t\t\t\t<Padding all=\"small\">\n\t\t\t\t\t\t<Text size=\"small\" color=\"error\">\n\t\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t\t'folder.modal.new.duplicate_warning',\n\t\t\t\t\t\t\t\t'Calendar with the same name already exists'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Padding>\n\t\t\t\t)}\n\t\t\t\t<Container\n\t\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\theight=\"fit\"\n\t\t\t\t>\n\t\t\t\t\t<Row orientation=\"vertical\" width=\"50%\" crossAlignment=\"flex-start\">\n\t\t\t\t\t\t<Text size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t\t{t('type', 'Type')}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<Text>{t('label.calendar', 'Calendar')}</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row orientation=\"vertical\" width=\"50%\" crossAlignment=\"flex-start\">\n\t\t\t\t\t\t<Text size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t\t{t('appointments', 'Appointments')}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<Text>{totalAppointments}</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t</Container>\n\t\t\t\t<Container\n\t\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\theight=\"fit\"\n\t\t\t\t>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel={t('label.calendar_color', 'Calendar color')}\n\t\t\t\t\t\tonChange={onSelectedColorChange}\n\t\t\t\t\t\titems={colors}\n\t\t\t\t\t\tdefaultSelection={selectedColor}\n\t\t\t\t\t\tLabelFactory={LabelFactory}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t\t<Container\n\t\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\theight=\"fit\"\n\t\t\t\t>\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tvalue={freeBusy}\n\t\t\t\t\t\tdefaultChecked={defaultFreeBusy}\n\t\t\t\t\t\tonClick={toggleFreeBusy}\n\t\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t\t'label.exclude_free_busy',\n\t\t\t\t\t\t\t'Exclude this calendar when reporting the free/busy times'\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t\t{!isEmpty(folder?.acl) && !(folder.isLink && folder.owner) && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Text weight=\"bold\">\n\t\t\t\t\t\t\t\t{t('label.sharing_of_this_folder', 'Sharing of this folder')}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{grant && grant.length > 0 && (\n\t\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\t\tstyle={{ overflowY: 'auto' }}\n\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t\tminHeight={grant.length === 1 ? '2rem' : '4rem'}\n\t\t\t\t\t\t\t\t\tmaxHeight={'4rem'}\n\t\t\t\t\t\t\t\t\tpadding={{ right: 'small' }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{map(grant, (item, index) => (\n\t\t\t\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-end\"\n\t\t\t\t\t\t\t\t\t\t\tpadding={{ bottom: 'small' }}\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<StyledContainer crossAlignment=\"flex-start\">\n\t\t\t\t\t\t\t\t\t\t\t\t<GranteeChip grant={item} />\n\t\t\t\t\t\t\t\t\t\t\t</StyledContainer>\n\t\t\t\t\t\t\t\t\t\t\t<Container orientation=\"horizontal\" mainAlignment=\"flex-end\" width={'fit'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{item.gt !== SHARE_USER_TYPE.PUBLIC && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('tooltip.edit', 'Edit share properties')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('label.edit', 'Edit')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonEdit(item);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Padding horizontal=\"extrasmall\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip label={t('revoke_access', 'Revoke access')} placement=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('label.revoke', 'Revoke')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"error\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonRevoke(item);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t\t{item.gt !== SHARE_USER_TYPE.PUBLIC && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Padding horizontal=\"extrasmall\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('tooltip.resend', 'Send mail notification about this share')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth=\"18.75rem\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('label.resend', 'Resend')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonResend(item);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</ModalBody>\n\t\t\t<Divider />\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tconfirmLabel={t('label.ok', 'OK')}\n\t\t\t\tconfirmDisabled={disabled}\n\t\t\t\tonSecondaryAction={onShare}\n\t\t\t\tsecondaryActionLabel={t('label.add_share', 'Add share')}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo, useState, FC, ReactElement } from 'react';\n\nimport {\n\tCheckbox,\n\tContainer,\n\tInput,\n\tRow,\n\tText,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport { useUserAccounts, Grant } from '@zextras/carbonio-shell-ui';\nimport { useTranslation } from 'react-i18next';\n\nimport { GranteeChip } from './grantee-chip';\nimport { Folder } from '../../../../carbonio-ui-commons/types/folder';\nimport { useEditModalContext } from '../../../../commons/edit-modal-context';\nimport ModalFooter from '../../../../commons/modal-footer';\nimport { ModalHeader } from '../../../../commons/modal-header';\nimport { PUBLIC_SHARE_ZID, SHARE_USER_TYPE } from '../../../../constants';\nimport { FOLDER_OPERATIONS } from '../../../../constants/api';\nimport { folderAction } from '../../../../store/actions/calendar-actions';\nimport { sendShareCalendarNotification } from '../../../../store/actions/send-share-calendar-notification';\nimport { useAppDispatch } from '../../../../store/redux/hooks';\n\ntype ShareRevokeModalProps = {\n\tfolder: Folder;\n\tgrant: Grant;\n\tonGoBack: () => void;\n};\n\nexport const ShareRevokeModal: FC<ShareRevokeModalProps> = ({\n\tfolder,\n\tgrant,\n\tonGoBack\n}): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst [sendNotification, setSendNotification] = useState(false);\n\tconst [standardMessage, setStandardMessage] = useState('');\n\tconst { onClose } = useEditModalContext();\n\tconst accounts = useUserAccounts();\n\tconst dispatch = useAppDispatch();\n\tconst createSnackbar = useSnackbar();\n\n\tconst tooltipLabel = useMemo(() => {\n\t\tif (sendNotification && standardMessage !== '') {\n\t\t\treturn t('revoke_with_custom_message', 'Revoke access sending a custom notification');\n\t\t}\n\t\tif (sendNotification && standardMessage === '') {\n\t\t\treturn t('revoke_without_custom_message', 'Revoke access sending a standard notification');\n\t\t}\n\t\treturn t('revoke_without_notification', 'Revoke access without sending a notification');\n\t}, [sendNotification, standardMessage, t]);\n\n\tconst onConfirm = useCallback(() => {\n\t\tfolderAction({\n\t\t\tid: folder.id,\n\t\t\tzid: grant.gt === SHARE_USER_TYPE.PUBLIC ? PUBLIC_SHARE_ZID : grant.zid,\n\t\t\top: FOLDER_OPERATIONS.REVOKE_GRANT\n\t\t}).then((res) => {\n\t\t\tif (!res.Fault) {\n\t\t\t\tsendNotification &&\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\tsendShareCalendarNotification({\n\t\t\t\t\t\t\tsendNotification,\n\t\t\t\t\t\t\tstandardMessage,\n\t\t\t\t\t\t\tcontacts: [{ email: grant.d }],\n\t\t\t\t\t\t\tfolder: folder.id,\n\t\t\t\t\t\t\taccounts\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('label.access_revoked', 'Access revoked'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t}\n\t\t\tonGoBack();\n\t\t});\n\t}, [\n\t\taccounts,\n\t\tcreateSnackbar,\n\t\tdispatch,\n\t\tfolder.id,\n\t\tgrant.d,\n\t\tgrant.gt,\n\t\tgrant.zid,\n\t\tonGoBack,\n\t\tsendNotification,\n\t\tstandardMessage,\n\t\tt\n\t]);\n\n\treturn (\n\t\t<Container data-testid=\"RevokeModal\" padding=\"0.5rem 0.5rem 1.5rem\">\n\t\t\t<ModalHeader\n\t\t\t\ttitle={t('label.revoke_share', {\n\t\t\t\t\ttitle: folder.name,\n\t\t\t\t\tdefaultValue: 'Revoke share of {{title}}'\n\t\t\t\t})}\n\t\t\t\tonClose={onClose}\n\t\t\t/>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<GranteeChip grant={grant} />\n\t\t\t</Container>\n\t\t\t{grant.gt !== SHARE_USER_TYPE.PUBLIC && (\n\t\t\t\t<>\n\t\t\t\t\t<Container\n\t\t\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\theight=\"fit\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\ticonSize=\"medium\"\n\t\t\t\t\t\t\tvalue={sendNotification}\n\t\t\t\t\t\t\tdefaultChecked={sendNotification}\n\t\t\t\t\t\t\tonClick={(): void => setSendNotification(!sendNotification)}\n\t\t\t\t\t\t\tlabel={t('share.label.send_notification', 'Send notification about this share')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Container>\n\t\t\t\t\t<Container\n\t\t\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\theight=\"fit\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tlabel={t('share.placeholder.standard_message', 'Add a note to standard message')}\n\t\t\t\t\t\t\tvalue={standardMessage}\n\t\t\t\t\t\t\tonChange={(ev): void => {\n\t\t\t\t\t\t\t\tsetStandardMessage(ev.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisabled={!sendNotification}\n\t\t\t\t\t\t\tbackgroundColor=\"gray5\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Container>\n\t\t\t\t\t<Container\n\t\t\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\theight=\"fit\"\n\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Row padding={{ right: 'small' }}>\n\t\t\t\t\t\t\t<Text weight=\"bold\" size=\"small\">\n\t\t\t\t\t\t\t\tNote:\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Text overflow=\"break-word\" size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t\t\t'share.note.share_note',\n\t\t\t\t\t\t\t\t\t'The standard message displays your name, the name of the shared item, pemissions granted to the recipients, and sign in information.'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Container>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<ModalFooter\n\t\t\t\tcolor=\"error\"\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tsecondaryAction={onGoBack}\n\t\t\t\tsecondaryLabel={t('folder.modal.footer.go_back', 'Go back')}\n\t\t\t\tlabel={t('label.revoke', 'Revoke')}\n\t\t\t\ttooltip={tooltipLabel}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport {\n\tCheckbox,\n\tChipInput,\n\tChipItem,\n\tContainer,\n\tIcon,\n\tInput,\n\tPadding,\n\tRow,\n\tSelect,\n\tText,\n\tTooltip,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport { useIntegratedComponent, useUserAccounts } from '@zextras/carbonio-shell-ui';\nimport { map, some } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport ModalFooter from '../../carbonio-ui-commons/components/modals/modal-footer';\nimport ModalHeader from '../../carbonio-ui-commons/components/modals/modal-header';\nimport { SHARE_USER_TYPE } from '../../constants';\nimport { FOLDER_OPERATIONS } from '../../constants/api';\nimport {\n\tShareCalendarRoleOptions,\n\tShareCalendarWithOptions,\n\tfindLabel\n} from '../../settings/components/utils';\nimport { folderAction } from '../../store/actions/calendar-actions';\nimport { sendShareCalendarNotification } from '../../store/actions/send-share-calendar-notification';\nimport { useAppDispatch } from '../../store/redux/hooks';\nimport { ShareCalendarModalProps } from '../../types/share-calendar';\n\ntype SharePrivateCheckboxProps = {\n\tallowToSeePrvtAppt: boolean;\n\tsetAllowToSeePrvtAppt: React.Dispatch<React.SetStateAction<boolean>>;\n};\ntype Contact = {\n\temail: string;\n\terror?: boolean;\n};\n\ntype Contacts = Array<Contact>;\n\nexport type ShareUserType = (typeof SHARE_USER_TYPE)[keyof typeof SHARE_USER_TYPE];\n\nexport const SharePrivateCheckbox: FC<SharePrivateCheckboxProps> = ({\n\tallowToSeePrvtAppt,\n\tsetAllowToSeePrvtAppt\n}): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst privateInfoTooltipLabel = useMemo(\n\t\t() =>\n\t\t\tt(\n\t\t\t\t'private_info_tooltip',\n\t\t\t\t\"When sharing a calendar, other users can see your appointment details (title, description, and attendees) except for the ones marked as private. In this case, other users will see your free/busy time but not the appointment details. Would you like other users to display also your private appointments' detail?\"\n\t\t\t),\n\t\t[t]\n\t);\n\treturn (\n\t\t<Container\n\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"center\"\n\t\t\theight=\"fit\"\n\t\t\tdata-testid={'privateCheckboxContainer'}\n\t\t\torientation=\"horizontal\"\n\t\t>\n\t\t\t<Checkbox\n\t\t\t\tvalue={allowToSeePrvtAppt}\n\t\t\t\tdefaultChecked={allowToSeePrvtAppt}\n\t\t\t\tonClick={(): void => setAllowToSeePrvtAppt((prevValue) => !prevValue)}\n\t\t\t\tlabel={t(\n\t\t\t\t\t'share.label.allow_to_see_private_appt',\n\t\t\t\t\t'Allow user(s) to see private appointments’ detail'\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t<Tooltip label={privateInfoTooltipLabel}>\n\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t<Icon icon=\"InfoOutline\" />\n\t\t\t\t</Padding>\n\t\t\t</Tooltip>\n\t\t</Container>\n\t);\n};\n\nconst UserShare = ({\n\tshareWithUserType,\n\tgrant,\n\tfolderId,\n\tonGoBack,\n\tsecondaryLabel,\n\tcloseFn\n}: Omit<ShareCalendarModalProps, 'folderName'> & {\n\tshareWithUserType: ShareUserType;\n}): JSX.Element | null => {\n\tconst accounts = useUserAccounts();\n\n\tconst [t] = useTranslation();\n\tconst dispatch = useAppDispatch();\n\tconst createSnackbar = useSnackbar();\n\n\tconst [ContactInput, integrationAvailable] = useIntegratedComponent('contact-input');\n\n\tconst [shareWithUserRole, setshareWithUserRole] = useState('r');\n\tconst [sendNotification, setSendNotification] = useState(true);\n\tconst [standardMessage, setStandardMessage] = useState('');\n\tconst [contacts, setContacts] = useState<Contacts>([]);\n\tconst [allowToSeePrvtAppt, setAllowToSeePrvtAppt] = useState(false);\n\tconst disabled = useMemo(() => !contacts.length || some(contacts, 'error'), [contacts]);\n\n\tconst shareCalendarRoleOptions = useMemo(\n\t\t() => ShareCalendarRoleOptions(grant?.[0]?.perm?.includes('p')),\n\t\t[grant]\n\t);\n\n\tconst onContactInputChange = useCallback(\n\t\t(ev) => {\n\t\t\tsetContacts(ev);\n\t\t},\n\t\t[setContacts]\n\t);\n\n\tconst onShareRoleChange = useCallback(\n\t\t(shareRole) => {\n\t\t\tsetshareWithUserRole(shareRole);\n\t\t},\n\t\t[setshareWithUserRole]\n\t);\n\n\tconst onConfirm = useCallback((): void => {\n\t\tconst granted = map(contacts, (contact) => ({\n\t\t\tgt: SHARE_USER_TYPE.USER,\n\t\t\tinh: '1',\n\t\t\td: contact.email,\n\t\t\tperm: `${shareWithUserRole}${allowToSeePrvtAppt ? 'p' : ''}`,\n\t\t\tpw: ''\n\t\t}));\n\t\tfolderAction({ id: folderId, op: FOLDER_OPERATIONS.GRANT, grant: granted }).then((res) => {\n\t\t\tif (!res.Fault) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('snackbar.share_folder_success', 'Calendar shared successfully'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t\tsendNotification &&\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\tsendShareCalendarNotification({\n\t\t\t\t\t\t\tsendNotification,\n\t\t\t\t\t\t\tstandardMessage,\n\t\t\t\t\t\t\tcontacts,\n\t\t\t\t\t\t\tshareWithUserType,\n\t\t\t\t\t\t\tshareWithUserRole,\n\t\t\t\t\t\t\tfolder: folderId,\n\t\t\t\t\t\t\taccounts\n\t\t\t\t\t\t})\n\t\t\t\t\t).then((res2) => {\n\t\t\t\t\t\tif (!res2.type.includes('fulfilled')) {\n\t\t\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\t\t\tkey: `folder-action-failed`,\n\t\t\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tcloseFn && closeFn();\n\t}, [\n\t\taccounts,\n\t\tallowToSeePrvtAppt,\n\t\tcloseFn,\n\t\tcontacts,\n\t\tcreateSnackbar,\n\t\tdispatch,\n\t\tfolderId,\n\t\tsendNotification,\n\t\tshareWithUserRole,\n\t\tshareWithUserType,\n\t\tstandardMessage,\n\t\tt\n\t]);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t{integrationAvailable ? (\n\t\t\t\t\t<ContactInput\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tplaceholder={t('share.placeholder.recipients_address', 'Recipients e-mail addresses')}\n\t\t\t\t\t\tonChange={onContactInputChange}\n\t\t\t\t\t\tbackground={'gray5'}\n\t\t\t\t\t\tdefaultValue={contacts}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<ChipInput\n\t\t\t\t\t\tplaceholder={t('share.placeholder.recipients_address', 'Recipients e-mail addresses')}\n\t\t\t\t\t\thasError\n\t\t\t\t\t\tbackground={'gray4'}\n\t\t\t\t\t\tonChange={(ev: ChipItem<any>[]): void => {\n\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tsetContacts(map(ev, (contact) => ({ email: contact.address })));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t\t<SharePrivateCheckbox\n\t\t\t\tallowToSeePrvtAppt={allowToSeePrvtAppt}\n\t\t\t\tsetAllowToSeePrvtAppt={setAllowToSeePrvtAppt}\n\t\t\t/>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Select\n\t\t\t\t\titems={shareCalendarRoleOptions}\n\t\t\t\t\tbackground={'gray5'}\n\t\t\t\t\tlabel={t('label.role', 'Role')}\n\t\t\t\t\tonChange={onShareRoleChange}\n\t\t\t\t\tdisablePortal\n\t\t\t\t\tdropdownWidth={'auto'}\n\t\t\t\t\tdropdownMaxWidth={'unset'}\n\t\t\t\t\tplacement={'bottom-start'}\n\t\t\t\t\tdefaultSelection={{\n\t\t\t\t\t\tvalue: 'r',\n\t\t\t\t\t\tlabel: findLabel(shareCalendarRoleOptions, 'r')\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t\tdata-testid={'sendNotificationCheckboxContainer'}\n\t\t\t>\n\t\t\t\t<Checkbox\n\t\t\t\t\tvalue={sendNotification}\n\t\t\t\t\tdefaultChecked={sendNotification}\n\t\t\t\t\tonClick={(): void => setSendNotification(!sendNotification)}\n\t\t\t\t\tlabel={t('share.label.send_notification', 'Send notification about this share')}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Input\n\t\t\t\t\tlabel={t('share.placeholder.standard_message', 'Add a note to standard message')}\n\t\t\t\t\tvalue={standardMessage}\n\t\t\t\t\tonChange={(ev): void => {\n\t\t\t\t\t\tsetStandardMessage(ev.target.value);\n\t\t\t\t\t}}\n\t\t\t\t\tdisabled={!sendNotification}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t\torientation=\"horizontal\"\n\t\t\t>\n\t\t\t\t<Row padding={{ right: 'small' }}>\n\t\t\t\t\t<Text weight=\"bold\" size=\"small\">\n\t\t\t\t\t\tNote:\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Text overflow=\"break-word\" size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'share.note.share_note',\n\t\t\t\t\t\t\t'The standard message displays your name, the name of the shared item, permissions granted to the recipients, and sign in information.'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tlabel={t('action.share_calendar', 'Share Calendar')}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tsecondaryAction={onGoBack}\n\t\t\t\tsecondaryLabel={secondaryLabel}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nconst PublicShare = ({\n\tonGoBack,\n\tsecondaryLabel,\n\tfolderId,\n\tcloseFn\n}: Omit<ShareCalendarModalProps, 'folderName' | 'grant'>): JSX.Element => {\n\tconst createSnackbar = useSnackbar();\n\tconst [t] = useTranslation();\n\n\tconst onConfirm = useCallback((): void => {\n\t\tconst grant = {\n\t\t\tgt: SHARE_USER_TYPE.PUBLIC,\n\t\t\tinh: '1',\n\t\t\tperm: 'r',\n\t\t\tpw: ''\n\t\t};\n\t\tfolderAction({ id: folderId, op: FOLDER_OPERATIONS.GRANT, grant }).then((res) => {\n\t\t\tif (!res.Fault) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('snackbar.share_folder_success', 'Calendar shared successfully'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tcloseFn && closeFn();\n\t}, [closeFn, createSnackbar, folderId, t]);\n\n\treturn (\n\t\t<ModalFooter\n\t\t\tonConfirm={onConfirm}\n\t\t\tlabel={t('action.share_calendar', 'Share Calendar')}\n\t\t\tsecondaryAction={onGoBack}\n\t\t\tsecondaryLabel={secondaryLabel}\n\t\t/>\n\t);\n};\n\nexport const ShareCalendarModal: FC<ShareCalendarModalProps> = ({\n\tfolderName,\n\tfolderId,\n\tcloseFn,\n\tonGoBack,\n\tsecondaryLabel,\n\tgrant\n}): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst shareCalendarWithOptions = useMemo(() => ShareCalendarWithOptions(), []);\n\n\tconst [shareWithUserType, setShareWithUserType] = useState(SHARE_USER_TYPE.USER);\n\n\tconst title = useMemo(() => `${t('label.share', 'Share')} ${folderName}`, [folderName, t]);\n\n\tconst onShareWithChange = useCallback((shareWith) => {\n\t\tsetShareWithUserType(shareWith);\n\t}, []);\n\n\treturn (\n\t\t<Container\n\t\t\tdata-testid=\"ShareCalendarModal\"\n\t\t\tpadding=\"0.5rem 0.5rem 1.5rem\"\n\t\t\tstyle={{ overflowY: 'auto' }}\n\t\t>\n\t\t\t<ModalHeader onClose={closeFn} title={title} />\n\t\t\t<Container\n\t\t\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\t\t\tmainAlignment=\"center\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Select\n\t\t\t\t\titems={shareCalendarWithOptions}\n\t\t\t\t\tbackground={'gray5'}\n\t\t\t\t\tlabel={t('label.share_with', 'Share with')}\n\t\t\t\t\tdisablePortal\n\t\t\t\t\tonChange={onShareWithChange}\n\t\t\t\t\tdefaultSelection={{\n\t\t\t\t\t\tvalue: SHARE_USER_TYPE.USER,\n\t\t\t\t\t\tlabel: findLabel(shareCalendarWithOptions, SHARE_USER_TYPE.USER)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t{shareWithUserType === SHARE_USER_TYPE.USER ? (\n\t\t\t\t<UserShare\n\t\t\t\t\tshareWithUserType={shareWithUserType}\n\t\t\t\t\tgrant={grant}\n\t\t\t\t\tfolderId={folderId}\n\t\t\t\t\tonGoBack={onGoBack}\n\t\t\t\t\tsecondaryLabel={secondaryLabel}\n\t\t\t\t\tcloseFn={closeFn}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<PublicShare\n\t\t\t\t\tonGoBack={onGoBack}\n\t\t\t\t\tsecondaryLabel={secondaryLabel}\n\t\t\t\t\tfolderId={folderId}\n\t\t\t\t\tcloseFn={closeFn}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useCallback, useMemo, useState, useEffect } from 'react';\n\nimport { Grant } from '@zextras/carbonio-shell-ui';\nimport { TFunction } from 'i18next';\nimport { useTranslation } from 'react-i18next';\n\nimport { EditPermissionModal } from './parts/edit-permission-modal';\nimport { MainEditModal } from './parts/main-edit-modal';\nimport { ShareRevokeModal } from './parts/revoke-modal';\nimport { getFolderRequest } from '../../../carbonio-ui-commons/soap/get-folder';\nimport { useFolder, getUpdateFolder } from '../../../carbonio-ui-commons/store/zustand/folder';\nimport { Folder } from '../../../carbonio-ui-commons/types/folder';\nimport { EditModalContext } from '../../../commons/edit-modal-context';\nimport { ShareCalendarModal } from '../share-calendar-modal';\n\ntype EditModalProps = {\n\tfolderId: string;\n\tonClose: () => void;\n};\n\nexport const getShareCalendarRoleOptions = ({\n\tt,\n\tcanViewPrivateAppointment\n}: {\n\tt: TFunction;\n\tcanViewPrivateAppointment: boolean;\n}): Array<{ label: string; value: string }> => [\n\t{ label: t('share.options.share_calendar_role.none', 'None'), value: '' },\n\t{\n\t\tlabel: t('share.options.share_calendar_role.viewer', 'Viewer'),\n\t\tvalue: canViewPrivateAppointment ? 'rp' : 'r'\n\t},\n\t{\n\t\tlabel: t('share.options.share_calendar_role.admin', 'Admin'),\n\t\tvalue: canViewPrivateAppointment ? 'rwidxap' : 'rwidxa'\n\t},\n\t{\n\t\tlabel: t('share.options.share_calendar_role.manager', 'Manager'),\n\t\tvalue: canViewPrivateAppointment ? 'rwidxp' : 'rwidx'\n\t}\n];\n\nexport const EditModal: FC<EditModalProps> = ({ onClose, folderId }) => {\n\tconst [activeGrant, setActiveGrant] = useState({});\n\tconst [modal, setModal] = useState('main');\n\tconst [t] = useTranslation();\n\tconst folder = useFolder(folderId);\n\tconst grant = folder?.acl?.grant;\n\n\tconst roleOptions = useMemo(\n\t\t() =>\n\t\t\tgetShareCalendarRoleOptions({\n\t\t\t\tt,\n\t\t\t\tcanViewPrivateAppointment: grant?.[0]?.perm?.includes('p') ?? false\n\t\t\t}),\n\t\t[grant, t]\n\t);\n\n\tconst onGoBack = useCallback(() => {\n\t\tsetModal('main');\n\t}, [setModal]);\n\n\tuseEffect(() => {\n\t\tconst updateFolder = getUpdateFolder();\n\t\tgetFolderRequest({ id: folderId }).then((res: [Folder]) => {\n\t\t\tif (res?.[0]?.acl?.grant) {\n\t\t\t\tupdateFolder(folderId, { acl: { grant: res?.[0]?.acl?.grant } });\n\t\t\t}\n\t\t});\n\t}, [folderId]);\n\n\treturn (\n\t\t<>\n\t\t\t<EditModalContext.Provider value={{ setModal, onClose, roleOptions, setActiveGrant }}>\n\t\t\t\t{modal === 'main' && folder && (\n\t\t\t\t\t<MainEditModal folder={folder} totalAppointments={folder?.n ?? 0} grant={grant ?? []} />\n\t\t\t\t)}\n\n\t\t\t\t{(modal === 'share' && folder && (\n\t\t\t\t\t<ShareCalendarModal\n\t\t\t\t\t\tfolderName={folder.name}\n\t\t\t\t\t\tfolderId={folderId}\n\t\t\t\t\t\tcloseFn={onClose}\n\t\t\t\t\t\tonGoBack={onGoBack}\n\t\t\t\t\t\tsecondaryLabel={t('folder.modal.footer.go_back', 'Go back')}\n\t\t\t\t\t\tgrant={grant}\n\t\t\t\t\t/>\n\t\t\t\t)) ||\n\t\t\t\t\t(modal === 'revoke' && folder && (\n\t\t\t\t\t\t<ShareRevokeModal\n\t\t\t\t\t\t\tfolder={folder}\n\t\t\t\t\t\t\tgrant={\n\t\t\t\t\t\t\t\tObject.keys(activeGrant).length > 0\n\t\t\t\t\t\t\t\t\t? (activeGrant as Grant)\n\t\t\t\t\t\t\t\t\t: (folder?.acl?.grant[0] as Grant)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonGoBack={onGoBack}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\n\t\t\t\t{modal === 'edit' && folder && (\n\t\t\t\t\t<EditPermissionModal\n\t\t\t\t\t\tfolder={folder}\n\t\t\t\t\t\tgrant={\n\t\t\t\t\t\t\tObject.keys(activeGrant).length > 0\n\t\t\t\t\t\t\t\t? (activeGrant as Grant)\n\t\t\t\t\t\t\t\t: (folder?.acl?.grant[0] as Grant)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonGoBack={onGoBack}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</EditModalContext.Provider>\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React from 'react';\n\nconst SvgContainer = ({ type, isHovered }) => {\n\tif (type === 'ics')\n\t\treturn (\n\t\t\t<svg\n\t\t\t\twidth=\"100\"\n\t\t\t\theight=\"100\"\n\t\t\t\tviewBox=\"0 0 63 70\"\n\t\t\t\tfill=\"none\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M26.7432 41.8235H29.92V52.0824H26.7432V41.8235ZM39.0253 47.8905L41.8032 48.7312C41.6169 49.5099 41.3231 50.1596 40.9218 50.6827C40.5206 51.2058 40.0213 51.5999 39.4266 51.865C38.8318 52.1325 38.0746 52.2639 37.1574 52.2639C36.042 52.2639 35.1295 52.1015 34.4249 51.7791C33.7179 51.4542 33.1064 50.8833 32.5929 50.0665C32.0817 49.2496 31.8237 48.2057 31.8237 46.9326C31.8237 45.2343 32.2752 43.9278 33.1781 43.0178C34.0809 42.1053 35.3588 41.6491 37.0093 41.6491C38.3015 41.6491 39.3167 41.9095 40.0571 42.4325C40.7976 42.9557 41.347 43.7582 41.7053 44.8402L38.9058 45.4636C38.8079 45.1507 38.7052 44.9214 38.5977 44.7757C38.421 44.5345 38.2036 44.3482 37.9481 44.2168C37.6901 44.0855 37.4034 44.0209 37.0857 44.0209C36.3692 44.0209 35.8174 44.31 35.4352 44.888C35.1462 45.3179 35.0005 45.9915 35.0005 46.9111C35.0005 48.0505 35.1749 48.8292 35.5189 49.252C35.8652 49.6747 36.3501 49.8849 36.9735 49.8849C37.5802 49.8849 38.0388 49.7153 38.3493 49.3738C38.6598 49.0346 38.8844 48.5402 39.0253 47.8905L39.0253 47.8905ZM42.7897 48.6882L45.8065 48.4995C45.871 48.9892 46.0047 49.3618 46.2054 49.6198C46.5302 50.0354 46.9984 50.2408 47.6051 50.2408C48.0565 50.2408 48.4052 50.1357 48.6513 49.9231C48.8949 49.7105 49.0167 49.4645 49.0167 49.185C49.0167 48.9199 48.9021 48.681 48.668 48.4709C48.4339 48.2607 47.8941 48.0624 47.0437 47.8761C45.6536 47.5632 44.6623 47.15 44.07 46.6317C43.4728 46.1133 43.1743 45.4541 43.1743 44.6515C43.1743 44.1237 43.3271 43.6244 43.6329 43.1563C43.9386 42.6881 44.3972 42.3203 45.0111 42.0504C45.6249 41.7828 46.4657 41.6491 47.5334 41.6491C48.8447 41.6491 49.8455 41.8927 50.5334 42.38C51.2214 42.8673 51.6298 43.6436 51.7612 44.7065L48.7731 44.8809C48.6942 44.4198 48.5271 44.0831 48.2715 43.8729C48.0183 43.6651 47.6672 43.56 47.2205 43.56C46.8502 43.56 46.5732 43.6364 46.3869 43.794C46.2006 43.9493 46.1074 44.1404 46.1074 44.3649C46.1074 44.5273 46.1839 44.673 46.3367 44.8044C46.4872 44.9406 46.8407 45.0648 47.402 45.1818C48.7874 45.4804 49.7787 45.7837 50.3782 46.0894C50.9777 46.3952 51.4148 46.7726 51.6871 47.2264C51.9595 47.6779 52.098 48.1842 52.098 48.7456C52.098 49.4024 51.9141 50.0091 51.551 50.5633C51.1879 51.1198 50.6791 51.5402 50.0247 51.8268C49.3726 52.1135 48.5485 52.2568 47.5549 52.2568C45.8112 52.2568 44.6026 51.9224 43.9314 51.2488C43.2579 50.5776 42.878 49.7249 42.7897 48.6882L42.7897 48.6882Z\"\n\t\t\t\t\tfill={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M22.6371 36.3885H55.029C57.026 36.3885 58.8404 37.2045 60.155 38.5191C61.4696 39.8337 62.2856 41.6482 62.2856 43.6451V50.2676C62.2856 52.2645 61.4696 54.079 60.155 55.3936C58.8404 56.7082 57.026 57.5242 55.029 57.5242H22.6371C20.6401 57.5242 18.8257 56.7082 17.5111 55.3936C16.1965 54.079 15.3805 52.2645 15.3805 50.2676V43.6451C15.3805 41.6482 16.1965 39.8337 17.5111 38.5191C18.8257 37.2045 20.6401 36.3885 22.6371 36.3885ZM55.029 39.051H22.6371C21.3751 39.051 20.2268 39.5683 19.3935 40.4016C18.5603 41.2348 18.043 42.3832 18.043 43.6451V50.2676C18.043 51.5296 18.5603 52.6779 19.3935 53.5111C20.2268 54.3444 21.3751 54.8617 22.6371 54.8617H55.029C56.291 54.8617 57.4393 54.3444 58.2725 53.5111C59.1058 52.6779 59.6231 51.5296 59.6231 50.2676V43.6451C59.6231 42.3832 59.1058 41.2348 58.2725 40.4016C57.4393 39.5683 56.291 39.051 55.029 39.051Z\"\n\t\t\t\t\tfill={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M49.1578 56.1922V59.3379C49.1578 61.1788 48.4056 62.8515 47.1939 64.0632C45.9821 65.2749 44.3094 66.0272 42.4686 66.0272H11.057C9.21618 66.0272 7.54353 65.275 6.3318 64.0632C5.12007 62.8515 4.36786 61.1788 4.36786 59.3379V10.886C4.36786 9.04519 5.12006 7.37249 6.3318 6.16072C7.54353 4.94899 9.21618 4.19678 11.057 4.19678H42.4686C44.3095 4.19678 45.9821 4.94898 47.1939 6.16072C48.4056 7.37249 49.1578 9.04519 49.1578 10.886V37.719H46.4953V10.886C46.4953 9.7801 46.0418 8.77365 45.3114 8.0432C44.581 7.31278 43.5745 6.85933 42.4686 6.85933H11.057C9.95114 6.85933 8.94468 7.31278 8.21428 8.0432C7.48382 8.77365 7.03041 9.7801 7.03041 10.886V59.3379C7.03041 60.4438 7.48382 61.4503 8.21428 62.1807C8.94469 62.9112 9.95114 63.3646 11.057 63.3646H42.4686C43.5745 63.3646 44.5809 62.9112 45.3114 62.1807C46.0418 61.4503 46.4953 60.4438 46.4953 59.3379V56.1922H49.1578Z\"\n\t\t\t\t\tfill={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M49.1578 56.1922V59.3379C49.1578 61.1788 48.4056 62.8515 47.1939 64.0632C45.9821 65.2749 44.3094 66.0272 42.4686 66.0272H11.057C9.21618 66.0272 7.54353 65.275 6.3318 64.0632C5.12007 62.8515 4.36786 61.1788 4.36786 59.3379V10.886C4.36786 9.04519 5.12006 7.37249 6.3318 6.16072C7.54353 4.94899 9.21618 4.19678 11.057 4.19678H42.4686C44.3095 4.19678 45.9821 4.94898 47.1939 6.16072C48.4056 7.37249 49.1578 9.04519 49.1578 10.886V37.719H46.4953V10.886C46.4953 9.7801 46.0418 8.77365 45.3114 8.0432C44.581 7.31278 43.5745 6.85933 42.4686 6.85933H11.057C9.95114 6.85933 8.94468 7.31278 8.21428 8.0432C7.48382 8.77365 7.03041 9.7801 7.03041 10.886V59.3379C7.03041 60.4438 7.48382 61.4503 8.21428 62.1807C8.94469 62.9112 9.95114 63.3646 11.057 63.3646H42.4686C43.5745 63.3646 44.5809 62.9112 45.3114 62.1807C46.0418 61.4503 46.4953 60.4438 46.4953 59.3379V56.1922H49.1578Z\"\n\t\t\t\t\tfill={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M14.4115 12.6282C13.6763 12.6282 13.0803 13.2243 13.0803 13.9595C13.0803 14.6947 13.6763 15.2908 14.4115 15.2908H39.1141C39.8493 15.2908 40.4454 14.6947 40.4454 13.9595C40.4454 13.2243 39.8493 12.6282 39.1141 12.6282H14.4115Z\"\n\t\t\t\t\tfill={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M43.3096 65.3133C39.2159 72.1233 34.4424 70.1874 28.3963 67.7353C26.9419 67.1454 25.4054 66.5222 23.8523 66.0248L24.6636 63.4974C26.3757 64.0458 27.9267 64.6749 29.3948 65.2703C34.2667 67.2462 38.1131 68.8062 41.0319 63.9509L43.3097 65.3133H43.3096ZM5.8035 62.5388L5.4664 62.4735C3.65669 62.1228 2.15664 61.0663 1.19802 59.6468C0.239835 58.2281 -0.179993 56.4447 0.169864 54.6392L4.37544 32.9355L6.98601 33.4347L2.78044 55.1385C2.5697 56.226 2.82381 57.3021 3.40292 58.1595C3.98147 59.0162 4.88235 59.653 5.96563 59.8629L6.30273 59.9282L5.8035 62.5388ZM10.3149 4.75417C14.7107 -2.11757 19.0595 -0.242739 25.0719 2.34922C26.5124 2.97022 28.0609 3.63783 29.7252 4.21003L28.862 6.72696C27.1067 6.12348 25.5084 5.43438 24.0215 4.79339C19.2074 2.71798 15.7253 1.21689 12.551 6.17909L10.3149 4.75417H10.3149ZM48.0593 7.75111C49.869 8.10175 51.369 9.15826 52.3276 10.5778C53.2857 11.9965 53.7056 13.7799 53.3558 15.5854L49.1317 37.3848L46.5211 36.8855L50.7452 15.0861C50.9559 13.9986 50.7018 12.9225 50.1227 12.065C49.5442 11.2084 48.6433 10.5716 47.56 10.3617L48.0593 7.75111Z\"\n\t\t\t\t\tfill={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M14.4115 20.1776C13.6763 20.1776 13.0803 20.7736 13.0803 21.5088C13.0803 22.244 13.6763 22.8401 14.4115 22.8401H39.1141C39.8493 22.8401 40.4454 22.244 40.4454 21.5088C40.4454 20.7736 39.8493 20.1776 39.1141 20.1776H14.4115Z\"\n\t\t\t\t\tfill={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M14.4115 27.7261C13.6763 27.7261 13.0803 28.3221 13.0803 29.0574C13.0803 29.7926 13.6763 30.3886 14.4115 30.3886H39.1141C39.8493 30.3886 40.4454 29.7926 40.4454 29.0574C40.4454 28.3221 39.8493 27.7261 39.1141 27.7261H14.4115Z\"\n\t\t\t\t\tfill={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t);\n\n\tif (type === 'html')\n\t\treturn (\n\t\t\t<svg\n\t\t\t\twidth=\"100\"\n\t\t\t\theight=\"100\"\n\t\t\t\tviewBox=\"0 0 71 70\"\n\t\t\t\tfill=\"none\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M11.4375 4.5859e-05C7.79167 -0.00943331 6.33333 1.44905 6.33333 5.83338C1.95833 5.8239 0.5 7.28238 0.5 10.9375V64.8731C0.5 67.6782 2.8 70 5.60417 70H59.5625C62.3667 70 64.6667 67.6782 64.6667 64.8731V64.1667H65.3958C68.1962 64.1667 70.5 61.8676 70.5 59.0625V5.12695C70.5 2.32192 68.2072 4.5859e-05 65.3958 4.5859e-05H11.4375ZM11.4375 2.91671H65.3958C66.6242 2.91671 67.5833 3.88387 67.5833 5.12695V59.0625C67.5833 60.5115 66.2132 61.25 64.6667 61.25V10.9603V10.9377C64.6667 7.28237 63.2083 5.82402 59.5626 5.83445H9.25007C9.25 3.63652 9.97917 2.90738 11.4375 2.91671ZM5.60417 8.75005C23.5903 8.75005 41.5764 8.75005 59.5625 8.75005C61.0208 8.74057 61.75 9.46987 61.75 10.9603V20.4167H3.41667V10.9375C3.41667 9.69439 4.36867 8.75005 5.60417 8.75005ZM9.25 11.6667C7.63917 11.6667 6.33333 12.9726 6.33333 14.5834C6.33333 16.1942 7.63917 17.5 9.25 17.5C10.8608 17.5 12.1667 16.1942 12.1667 14.5834C12.1667 12.9726 10.8608 11.6667 9.25 11.6667ZM18 11.6667C16.3892 11.6667 15.0833 12.9726 15.0833 14.5834C15.0833 16.1942 16.3892 17.5 18 17.5C19.6108 17.5 20.9167 16.1942 20.9167 14.5834C20.9167 12.9726 19.6108 11.6667 18 11.6667ZM3.41667 23.3334H61.75C61.7499 37.1744 61.75 51.0428 61.75 64.8731C61.75 66.1161 60.798 67.0833 59.5625 67.0833H5.60417C4.36867 67.0833 3.41667 66.1161 3.41667 64.8731V23.3334ZM6.33333 26.25C6.33333 31.5673 6.33333 36.0528 6.33333 40.8333C24.2967 40.8333 41.7999 40.8333 57.375 40.8333C57.375 35.516 57.375 31.0305 57.375 26.25C39.6702 26.25 21.5152 26.25 6.33333 26.25ZM9.25 29.1667H54.4583V37.9167H9.25V29.1667ZM6.33333 43.75C6.33333 50.7911 6.33333 58.1093 6.33333 64.1667C15.912 64.1667 25.8132 64.1667 34.0417 64.1667C34.0417 56.8118 34.0417 50.2699 34.0417 43.75C24.463 43.75 14.5618 43.75 6.33333 43.75ZM36.9583 43.75C36.9583 51.1049 36.9583 57.6468 36.9583 64.1667C44.3132 64.1667 50.8551 64.1667 57.375 64.1667C57.375 57.1255 57.375 49.8074 57.375 43.75C50.0201 43.75 43.4782 43.75 36.9583 43.75ZM9.25 46.6667H31.125V61.25H9.25V46.6667ZM39.875 46.6667H54.4583V61.25H39.875V46.6667Z\"\n\t\t\t\t\tfill={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t);\n\n\treturn (\n\t\t<svg\n\t\t\twidth=\"100\"\n\t\t\theight=\"100\"\n\t\t\tviewBox=\"0 0 77 70\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M17.8509 35.0005C17.8509 32.0652 19.8146 29.7985 21.7287 29.5592C22.5061 29.462 23.3157 29.7997 24.0134 30.7309C24.7228 31.6778 25.2344 33.167 25.2344 35.0005C25.2344 36.8341 24.7228 38.3233 24.0134 39.2702C23.3157 40.2014 22.5061 40.5391 21.7287 40.4419C19.8146 40.2026 17.8509 37.9359 17.8509 35.0005Z\"\n\t\t\t\tstroke={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M2.4447 12.3305C2.4447 10.6541 3.63338 9.2131 5.27919 8.89434L37.648 2.62517C39.8079 2.20685 41.8136 3.86133 41.8136 6.06131V64.0323C41.8136 66.2105 39.8452 67.8596 37.7007 67.4782L5.33183 61.7212C3.66147 61.4241 2.4447 59.9719 2.4447 58.2753V12.3305ZM11.6696 35.0005C11.6696 41.1271 15.7788 46.9676 21.3565 47.6656C24.3253 48.0371 26.907 46.5822 28.664 44.2368C30.4092 41.9071 31.4158 38.6354 31.4158 35.0005C31.4158 31.3656 30.4092 28.0938 28.664 25.7642C26.907 23.4187 24.3253 21.9639 21.3565 22.3354C15.7788 23.0333 11.6696 28.8739 11.6696 35.0005Z\"\n\t\t\t\tstroke={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M74.7626 16.1536L53.7462 33.5789C53.5631 33.7307 53.2984 33.7325 53.1132 33.5833L48.7675 30.0807C48.6498 29.9858 48.5813 29.8427 48.5813 29.6914V16.6536C48.5813 16.3775 48.8052 16.1536 49.0813 16.1536H74.7626Z\"\n\t\t\t\tstroke={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M74.4028 24.0443C74.7287 23.7741 75.2219 24.0059 75.2219 24.4292V54.1849C75.2219 54.461 74.9981 54.6849 74.7219 54.6849H49.0813C48.8052 54.6849 48.5813 54.461 48.5813 54.1849V38.5242C48.5813 38.1041 49.068 37.8713 49.3951 38.1349L51.2307 39.6144C52.5268 40.6591 54.3794 40.6462 55.661 39.5837L74.4028 24.0443Z\"\n\t\t\t\tstroke={isHovered ? '#2B73D2' : '#AAC8EE'}\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\n\nexport default SvgContainer;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement, useState } from 'react';\n\nimport { Container, Button, Tooltip, Padding } from '@zextras/carbonio-design-system';\n\nimport SvgContainer from './svg-container';\nimport { UrlColumnProps } from '../../../../types/share-calendar';\n\nexport const UrlColumn: FC<UrlColumnProps> = ({\n\tlabel,\n\ttooltip,\n\tonUrlCopied,\n\ttype\n}): ReactElement => {\n\tconst [isHovered, setIsHovered] = useState(false);\n\n\treturn (\n\t\t<Container>\n\t\t\t<SvgContainer type={type} isHovered={isHovered} />\n\t\t\t<Padding top=\"medium\" />\n\t\t\t<Tooltip label={tooltip} placement=\"top\">\n\t\t\t\t<Container padding={{ horizontal: 'small' }}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\ticon=\"Copy\"\n\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tonClick={onUrlCopied(label, type)}\n\t\t\t\t\t\tonMouseEnter={(): void => setIsHovered(true)}\n\t\t\t\t\t\tonMouseLeave={(): void => setIsHovered(false)}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t</Tooltip>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement } from 'react';\n\nimport { Container, Text, Padding, useSnackbar } from '@zextras/carbonio-design-system';\nimport { useUserAccounts } from '@zextras/carbonio-shell-ui';\nimport { Trans, useTranslation } from 'react-i18next';\n\nimport { UrlColumn } from './url-column';\nimport { ModalHeader } from '../../../../commons/modal-header';\nimport { ShareCalendarUrlProps } from '../../../../types/share-calendar';\n\nconst getUrl = (type: string, user: string, folderName: string): string => {\n\tconst domain = window.location.hostname;\n\treturn type === 'ics'\n\t\t? `https://${domain}/home/${user}/${folderName}.ics`\n\t\t: `webcals://${domain}/home/${user}/${folderName}`;\n};\nconst ShareCalendarUrl: FC<ShareCalendarUrlProps> = ({\n\tfolderName,\n\tonClose,\n\tisFromEditModal\n}): ReactElement => {\n\tconst createSnackbar = useSnackbar();\n\tconst accounts = useUserAccounts();\n\n\tconst [t] = useTranslation();\n\n\tconst onUrlCopied = (title: string, type: string) => (): void => {\n\t\tconst text = getUrl(type, accounts[0].name, folderName);\n\t\tnavigator.clipboard.writeText(text).then(() => {\n\t\t\tcreateSnackbar({\n\t\t\t\tkey: `folder-action-success`,\n\t\t\t\treplace: true,\n\t\t\t\ttype: 'success',\n\t\t\t\thideButton: true,\n\t\t\t\tlabel: t('snackbar.url_copied', { title, defaultValue: '{{title}} copied' }),\n\t\t\t\tautoHideTimeout: 3000\n\t\t\t});\n\t\t});\n\t};\n\treturn (\n\t\t<Container padding=\"0.5rem 0.5rem 1.5rem\">\n\t\t\t<ModalHeader\n\t\t\t\ttitle={t('label.share_calendar_url', {\n\t\t\t\t\ttitle: folderName,\n\t\t\t\t\tdefaultValue: '{{title}} access share'\n\t\t\t\t})}\n\t\t\t\tonClose={onClose}\n\t\t\t/>\n\t\t\t<Container padding={{ vertical: 'medium' }}>\n\t\t\t\t<Container crossAlignment=\"baseline\">\n\t\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t\t{t('message.share_calendar_url_msg', {\n\t\t\t\t\t\t\ttitle: folderName,\n\t\t\t\t\t\t\tdefaultValue:\n\t\t\t\t\t\t\t\t'You can quickly share {{title}} with your collaborators using one of these URLs:'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Text>\n\t\t\t\t</Container>\n\t\t\t\t<Padding top=\"large\" />\n\t\t\t\t<Container orientation=\"horizontal\" padding={{ horizontal: 'medium', vertical: 'large' }}>\n\t\t\t\t\t<UrlColumn\n\t\t\t\t\t\tlabel={t('label.ics_url', 'ICS URL')}\n\t\t\t\t\t\tonUrlCopied={onUrlCopied}\n\t\t\t\t\t\ttooltip={t('tooltip.copy_ics_url', 'Copy ICS url')}\n\t\t\t\t\t\ttype=\"ics\"\n\t\t\t\t\t/>\n\t\t\t\t\t<UrlColumn\n\t\t\t\t\t\tlabel={t('label.outlook_url', 'Outlook URL')}\n\t\t\t\t\t\ttooltip={t('tooltip.copy_outlook_url', 'Copy Outlook url')}\n\t\t\t\t\t\tonUrlCopied={onUrlCopied}\n\t\t\t\t\t\ttype=\"outlook\"\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t\t<Container crossAlignment=\"center\" mainAlignment=\"center\">\n\t\t\t\t\t<Text overflow=\"break-word\" color=\"secondary\">\n\t\t\t\t\t\t{isFromEditModal ? (\n\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\ti18nKey=\"message.share_calendar_url_note2\"\n\t\t\t\t\t\t\t\tdefaults=\"Only your collaborators can access your data using these URLs.<br/> You can find these links also right-clicking your calendars list.\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tt(\n\t\t\t\t\t\t\t\t'message.share_calendar_url_note',\n\t\t\t\t\t\t\t\t'Only your collaborators can access your data using these URLs.'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t</Container>\n\t);\n};\n\nexport default ShareCalendarUrl;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React from 'react';\n\nimport { Text, Container, Padding, useSnackbar } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport ModalFooter from '../../commons/modal-footer';\nimport { ModalHeader } from '../../commons/modal-header';\nimport { FOLDER_OPERATIONS } from '../../constants/api';\nimport { folderAction } from '../../store/actions/calendar-actions';\n\nexport const EmptyModal = ({\n\tonClose,\n\tfolderId\n}: {\n\tonClose: () => void;\n\tfolderId: string;\n}): JSX.Element => {\n\tconst createSnackbar = useSnackbar();\n\tconst [t] = useTranslation();\n\n\tconst onConfirm = (): void => {\n\t\tfolderAction({\n\t\t\tid: folderId,\n\t\t\top: FOLDER_OPERATIONS.EMPTY,\n\t\t\trecursive: true,\n\t\t\ttype: 'appointments'\n\t\t}).then((res) => {\n\t\t\tonClose();\n\t\t\tif (!res.Fault) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('label.trash_emptied', 'Trash emptied successfully'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `folder-action-success`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\treturn (\n\t\t<Container\n\t\t\tpadding={{ all: 'large' }}\n\t\t\tmainAlignment=\"center\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t>\n\t\t\t<ModalHeader onClose={onClose} title={t('action.empty_trash', 'Empty Trash')} />\n\t\t\t<Padding all=\"small\">\n\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t{t(\n\t\t\t\t\t\t'action.empty_trash_deleting_confirmation',\n\t\t\t\t\t\t'You are deleting all items in the Calendar trash folder. The deletion is permanent. Are you sure you want to delete all the items?'\n\t\t\t\t\t)}\n\t\t\t\t</Text>\n\t\t\t</Padding>\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tsecondaryAction={onClose}\n\t\t\t\tlabel={t('label.empty', 'Empty')}\n\t\t\t\tcolor=\"error\"\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC } from 'react';\n\nimport { Container, Icon, Row, Text } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport ModalHeader from '../../carbonio-ui-commons/components/modals/modal-header';\nimport { Folder } from '../../carbonio-ui-commons/types/folder';\n\nexport const ShareInfoRow: FC<{\n\ticon: string;\n\tlabel: string;\n\ttext: string | number | undefined;\n}> = ({ icon, label, text }) => (\n\t<Row width=\"fill\" mainAlignment=\"flex-start\" padding={{ all: 'small' }}>\n\t\t<Row padding={{ right: 'small' }}>\n\t\t\t<Icon icon={icon} />\n\t\t\t<Row padding={{ right: 'small', left: 'small' }}>\n\t\t\t\t<Text weight=\"bold\">{`${label}: `}</Text>\n\t\t\t</Row>\n\t\t\t<Row takeAvailableSpace>\n\t\t\t\t<Text>{text}</Text>\n\t\t\t</Row>\n\t\t</Row>\n\t</Row>\n);\n\ntype SharesInfoModalProps = {\n\tonClose: () => void;\n\tfolder: Folder & { owner?: string };\n};\n\nexport const SharesInfoModal: FC<SharesInfoModalProps> = ({ onClose, folder }) => {\n\tconst [t] = useTranslation();\n\n\tconst text = (/r/.test(folder.perm || '') ? `${t('read', 'Read')}` : '')\n\t\t.concat(/w/.test(folder.perm || '') ? `, ${t('write', 'Write')}` : '')\n\t\t.concat(/i/.test(folder.perm || '') ? `, ${t('insert', 'Insert')}` : '')\n\t\t.concat(/d/.test(folder.perm || '') ? `, ${t('label.delete', 'Delete')}` : '')\n\t\t.concat(/a/.test(folder.perm || '') ? `, ${t('administer', 'Administer')}` : '')\n\t\t.concat(/p/.test(folder.perm || '') ? `, ${t('label.private', 'Private')}` : '')\n\t\t.concat(/f/.test(folder.perm || '') ? `, ${t('freebusy', 'FreeBusy')}` : '')\n\t\t.concat(/c/.test(folder.perm || '') ? `, ${t('label.create', 'Create')}` : '')\n\t\t.concat(/x/.test(folder.perm || '') ? `, ${t('workflow', 'WorkFlow')}` : '');\n\treturn (\n\t\t<Container\n\t\t\tpadding={{ all: 'small' }}\n\t\t\tmainAlignment=\"center\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t>\n\t\t\t<ModalHeader title={`${t('folder.share_info', 'Share Info')} `} onClose={onClose} />\n\t\t\t<ShareInfoRow\n\t\t\t\ticon=\"InfoOutline\"\n\t\t\t\tlabel={`${t('shared_items', 'Shared items')}`}\n\t\t\t\ttext={folder.name}\n\t\t\t/>\n\t\t\t<ShareInfoRow icon=\"PersonOutline\" label={`${t('owner', 'Owner')}`} text={folder.owner} />\n\t\t\t<ShareInfoRow\n\t\t\t\ticon=\"CalendarModOutline\"\n\t\t\t\tlabel={`${t('type', 'Type')}`}\n\t\t\t\ttext={t('shared_folders', 'Shared Calendars') as string}\n\t\t\t/>\n\t\t\t<ShareInfoRow\n\t\t\t\ticon=\"UnlockOutline\"\n\t\t\t\tlabel={`${t('allowed_actions', 'Allowed actions')}`}\n\t\t\t\ttext={text}\n\t\t\t/>\n\t\t\t<ShareInfoRow\n\t\t\t\ticon=\"AppointmentOutline\"\n\t\t\t\tlabel={`${t('appointments', 'Appointments')}`}\n\t\t\t\ttext={folder.n}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport { map } from 'lodash';\n\nimport { batchRequest } from '../../soap/batch-request';\nimport { CreateMountpointRequest } from '../../types/soap/soap-actions';\n\nexport const createMountpoint = createAsyncThunk(\n\t'folders/get folder',\n\tasync (links: any): Promise<any> => {\n\t\tconst body: CreateMountpointRequest = {\n\t\t\tCreateMountpointRequest: map(links, (link) => ({\n\t\t\t\tlink: {\n\t\t\t\t\tl: 1,\n\t\t\t\t\tname: `${link.name} ${link.of} ${link.ownerName}`,\n\t\t\t\t\trid: link.folderId,\n\t\t\t\t\tview: 'appointment',\n\t\t\t\t\tzid: link.ownerId\n\t\t\t\t},\n\t\t\t\t_jsns: 'urn:zimbraMail'\n\t\t\t})),\n\t\t\t_jsns: 'urn:zimbra'\n\t\t};\n\t\treturn batchRequest(body);\n\t}\n);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport {\n\tAccordion,\n\tAccordionItem,\n\tCheckbox,\n\tContainer,\n\tIcon,\n\tInput,\n\tRow,\n\tText,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport { FOLDERS, t } from '@zextras/carbonio-shell-ui';\nimport {\n\tfilter,\n\tgroupBy,\n\tisEmpty,\n\tisEqual,\n\tlast,\n\tmap,\n\tpickBy,\n\tsplit,\n\tstartsWith,\n\ttoLower,\n\tuniqWith,\n\tvalues\n} from 'lodash';\nimport { Trans } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport ModalFooter from '../../carbonio-ui-commons/components/modals/modal-footer';\nimport ModalHeader from '../../carbonio-ui-commons/components/modals/modal-header';\nimport { SidebarCustomItem } from '../../carbonio-ui-commons/types/sidebar';\nimport { ResFolder } from '../../carbonio-ui-commons/utils';\nimport { getFolderTranslatedName } from '../../commons/utilities';\nimport { createMountpoint } from '../../store/actions/create-mountpoint';\nimport { useAppDispatch } from '../../store/redux/hooks';\n\nconst ContainerEl = styled(Container)`\n\toverflow-y: auto;\n\tdisplay: block;\n`;\n\nconst CustomItem: FC<SidebarCustomItem> = ({ item }) => {\n\tconst [checked, setChecked] = useState(false);\n\n\tconst onClick = useCallback(() => {\n\t\tif (!checked) {\n\t\t\titem.setLinks(\n\t\t\t\tuniqWith(\n\t\t\t\t\t[\n\t\t\t\t\t\t...item.links,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\t\tname: item.label,\n\t\t\t\t\t\t\tfolderId: item.folderId,\n\t\t\t\t\t\t\townerId: item.ownerId,\n\t\t\t\t\t\t\townerName: item.ownerName,\n\t\t\t\t\t\t\tof: t('label.of', 'of')\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tisEqual\n\t\t\t\t)\n\t\t\t);\n\t\t} else {\n\t\t\titem.setLinks(filter(item.links, (v) => v.id !== item.id));\n\t\t}\n\t\tsetChecked(!checked);\n\t}, [checked, item]);\n\n\treturn (\n\t\t<>\n\t\t\t<Checkbox value={checked} onClick={onClick} iconColor=\"primary\" />\n\t\t\t<AccordionItem item={item} />\n\t\t</>\n\t);\n};\n\nexport const SharesModal: FC<{ calendars: ResFolder[]; onClose: () => void }> = ({\n\tcalendars,\n\tonClose\n}) => {\n\tconst [links, setLinks] = useState([]);\n\tconst [data, setData] = useState<any>();\n\tconst dispatch = useAppDispatch();\n\tconst createSnackbar = useSnackbar();\n\tconst onConfirm = useCallback(() => {\n\t\tdispatch(createMountpoint(links)).then(({ payload }) => {\n\t\t\tif (payload.CreateMountpointResponse && !payload.Fault) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `mountpoint`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tlabel: t(\n\t\t\t\t\t\t'mountpoint_success',\n\t\t\t\t\t\t'The share has been added successfully to the Shared Calendars section'\n\t\t\t\t\t),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (payload.CreateMountpointResponse && payload.Fault) {\n\t\t\t\tconst failsLength = payload?.Fault?.length;\n\t\t\t\tconst totalLength = failsLength + payload.CreateMountpointResponse.length;\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `mountpoint`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\tlabel: t('mountpoint_warning', {\n\t\t\t\t\t\tfailed: failsLength,\n\t\t\t\t\t\ttotal: totalLength,\n\t\t\t\t\t\tdefaultValue:\n\t\t\t\t\t\t\t\"{{failed}} out of {{total}} shared calendars couldn't be added to the Shared Calendars\"\n\t\t\t\t\t}),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (!payload.CreateMountpointResponse && payload.Fault) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `mountpoint`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tlabel: t(\n\t\t\t\t\t\t'mountpoint_error',\n\t\t\t\t\t\t\"The share couldn't be added to the Shared Calendars section\"\n\t\t\t\t\t),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tonClose();\n\t}, [createSnackbar, dispatch, links, onClose]);\n\n\tconst shared = map(calendars, (calendar) => ({\n\t\tid: `${calendar?.ownerName} - ${calendar.folderId} - ${calendar.granteeType} - ${calendar.granteeName}`,\n\t\tlabel: getFolderTranslatedName({\n\t\t\tfolderId: calendar.folderId ?? '',\n\t\t\tfolderName: last(split(calendar.folderPath, '/')) ?? ''\n\t\t}),\n\t\topen: true,\n\t\titems: [],\n\t\townerName: calendar.ownerName,\n\t\townerId: calendar.ownerId,\n\t\tchecked: false,\n\t\tfolderId: calendar.folderId,\n\t\tsetLinks,\n\t\tlinks,\n\t\tCustomComponent: CustomItem\n\t}));\n\n\tconst filteredFolders = useMemo(() => groupBy(shared, 'ownerName'), [shared]);\n\n\tconst nestedData = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tid: FOLDERS.USER_ROOT,\n\t\t\t\tlabel: getFolderTranslatedName({ folderId: FOLDERS.USER_ROOT, folderName: 'Root' }),\n\t\t\t\tlevel: 0,\n\t\t\t\topen: true,\n\t\t\t\titems: map(values(data ?? filteredFolders), (value) => ({\n\t\t\t\t\tid: value[0].ownerId,\n\t\t\t\t\tlabel: (\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"label.shares_items\"\n\t\t\t\t\t\t\tdefaults=\"<bold>{{user}}</bold>'s shared calendars\"\n\t\t\t\t\t\t\tvalues={{ user: value[0].ownerName }}\n\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\tbold: (\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tstyle={{ fontWeight: 'bold', fontFamily: 'sans-serif', fontSize: '0.875rem' }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) as unknown as string,\n\t\t\t\t\topen: true,\n\t\t\t\t\titems: value,\n\t\t\t\t\tbackground: undefined\n\t\t\t\t})),\n\t\t\t\tbackground: undefined,\n\t\t\t\tonClick: () => null\n\t\t\t}\n\t\t],\n\t\t[data, filteredFolders]\n\t);\n\n\tconst filterResults = useCallback(\n\t\t(ev: React.ChangeEvent<HTMLInputElement>): void => {\n\t\t\tsetData(\n\t\t\t\tpickBy(filteredFolders, (value, key) =>\n\t\t\t\t\tstartsWith(toLower(key), toLower(ev?.target?.value))\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t[filteredFolders]\n\t);\n\n\treturn isEmpty(nestedData) ? (\n\t\t<>No shared folders to show at the moment</>\n\t) : (\n\t\t<>\n\t\t\t<ModalHeader title={t('find_calendar_shares', 'Find Calendar Shares')} onClose={onClose} />\n\t\t\t<Row padding={{ top: 'large', bottom: 'small' }} width=\"fill\" mainAlignment=\"flex-start\">\n\t\t\t\t<Text>\n\t\t\t\t\t{t('label.find_shares', 'Select which calendars you want to see in calendars tree')}\n\t\t\t\t</Text>\n\t\t\t</Row>\n\t\t\t<Row padding={{ top: 'small', bottom: 'large' }} width=\"fill\">\n\t\t\t\t<Input\n\t\t\t\t\tlabel={t('label.filter_sharer_user', 'Foder owner')}\n\t\t\t\t\tbackgroundColor=\"gray5\"\n\t\t\t\t\tCustomIcon={({ hasFocus }): ReactElement => (\n\t\t\t\t\t\t<Icon icon=\"FunnelOutline\" size=\"large\" color={hasFocus ? 'primary' : 'text'} />\n\t\t\t\t\t)}\n\t\t\t\t\tonChange={filterResults}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t\t<ContainerEl orientation=\"vertical\" mainAlignment=\"flex-start\" maxHeight=\"40vh\">\n\t\t\t\t<Accordion items={nestedData} background={'gray6'} />\n\t\t\t</ContainerEl>\n\t\t\t<Row padding=\"small\" width=\"fill\" mainAlignment=\"flex-end\">\n\t\t\t\t<ModalFooter onConfirm={onConfirm} label={t('add', 'Add')} disabled={links?.length <= 0} />\n\t\t\t</Row>\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React from 'react';\n\nimport { CreateModalFn, CreateSnackbarFn } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { filter, isEqual, lowerCase, map, uniqWith } from 'lodash';\nimport moment from 'moment';\n\nimport { getRoot } from '../carbonio-ui-commons/store/zustand/folder';\nimport { isTrashOrNestedInIt } from '../carbonio-ui-commons/store/zustand/folder/utils';\nimport { Folder } from '../carbonio-ui-commons/types/folder';\nimport { ResFolder } from '../carbonio-ui-commons/utils';\nimport { FOLDER_OPERATIONS } from '../constants/api';\nimport { getFolderRequest } from '../soap/get-folder-request';\nimport { getShareInfoRequest } from '../soap/get-share-info-request';\nimport { folderAction } from '../store/actions/calendar-actions';\nimport { StoreProvider } from '../store/redux';\nimport { ActionsClick } from '../types/actions';\nimport { NewModal } from '../view/move/new-calendar-modal';\nimport { DeleteModal } from '../view/sidebar/delete-modal';\nimport { EditModal } from '../view/sidebar/edit-modal/edit-modal';\nimport ShareCalendarUrlModal from '../view/sidebar/edit-modal/parts/share-calendar-url-modal';\nimport { EmptyModal } from '../view/sidebar/empty-modal';\nimport { ShareCalendarModal } from '../view/sidebar/share-calendar-modal';\nimport { SharesInfoModal } from '../view/sidebar/shares-info-modal';\nimport { SharesModal } from '../view/sidebar/shares-modal';\n\nexport const newCalendar =\n\t({\n\t\tcreateModal,\n\t\titem\n\t}: {\n\t\tcreateModal: CreateModalFn;\n\t\titem: { id: string };\n\t}): ((e?: ActionsClick) => void) =>\n\t(e?: ActionsClick) => {\n\t\tif (e) {\n\t\t\te.stopPropagation();\n\t\t}\n\t\tconst closeModal = createModal(\n\t\t\t{\n\t\t\t\tchildren: (\n\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t<NewModal onClose={(): void => closeModal()} folderId={item.id} />\n\t\t\t\t\t</StoreProvider>\n\t\t\t\t)\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t};\n\nexport const moveToRoot =\n\t({\n\t\tcreateSnackbar,\n\t\titem\n\t}: {\n\t\tcreateSnackbar: CreateSnackbarFn;\n\t\titem: { id: string; absFolderPath?: string };\n\t}): ((e?: ActionsClick) => void) =>\n\t(e?: ActionsClick) => {\n\t\tif (e) {\n\t\t\te.stopPropagation();\n\t\t}\n\t\tconst root = getRoot(item.id);\n\t\tfolderAction({ id: item.id, op: FOLDER_OPERATIONS.MOVE, l: root?.id ?? '1' }).then(\n\t\t\t(res: { Fault?: string }) => {\n\t\t\t\tif (!res.Fault) {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `calendar-moved-root`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: isTrashOrNestedInIt(item) ? 'success' : 'info',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: isTrashOrNestedInIt(item)\n\t\t\t\t\t\t\t? t('message.snackbar.calendar_restored', 'Calendar restored successfully')\n\t\t\t\t\t\t\t: t(\n\t\t\t\t\t\t\t\t\t'message.snackbar.calendar_moved_to_root_folder',\n\t\t\t\t\t\t\t\t\t'Calendar moved to Root folder'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `calendar-moved-root-error`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\nexport const emptyTrash =\n\t({\n\t\tcreateModal,\n\t\titem\n\t}: {\n\t\tcreateModal: CreateModalFn;\n\t\titem: { id: string };\n\t}): ((e?: ActionsClick) => void) =>\n\t(e?: ActionsClick) => {\n\t\tif (e) {\n\t\t\te.stopPropagation();\n\t\t}\n\t\tconst closeModal = createModal(\n\t\t\t{\n\t\t\t\tchildren: (\n\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t<EmptyModal onClose={(): void => closeModal()} folderId={item.id} />\n\t\t\t\t\t</StoreProvider>\n\t\t\t\t),\n\t\t\t\tonClose: () => {\n\t\t\t\t\tcloseModal();\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t};\n\nexport const editCalendar =\n\t({\n\t\tcreateModal,\n\t\titem\n\t}: {\n\t\tcreateModal: CreateModalFn;\n\t\titem: { id: string };\n\t}): ((e?: ActionsClick) => void) =>\n\t(e?: ActionsClick) => {\n\t\tif (e) {\n\t\t\te.stopPropagation();\n\t\t}\n\t\tconst closeModal = createModal(\n\t\t\t{\n\t\t\t\tchildren: (\n\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t<EditModal folderId={item.id} onClose={(): void => closeModal()} />\n\t\t\t\t\t</StoreProvider>\n\t\t\t\t),\n\t\t\t\tmaxHeight: '70vh',\n\t\t\t\tsize: 'medium'\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t};\n\nexport const deleteCalendar =\n\t({\n\t\tcreateModal,\n\t\titem\n\t}: {\n\t\tcreateModal: CreateModalFn;\n\t\titem: Folder;\n\t}): ((e?: ActionsClick) => void) =>\n\t(e?: ActionsClick) => {\n\t\tif (e) {\n\t\t\te.stopPropagation();\n\t\t}\n\t\tconst closeModal = createModal(\n\t\t\t{\n\t\t\t\tchildren: (\n\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t<DeleteModal folder={item} onClose={(): void => closeModal()} />\n\t\t\t\t\t</StoreProvider>\n\t\t\t\t)\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t};\n\nexport const removeFromList =\n\t({\n\t\titem,\n\t\tcreateSnackbar\n\t}: {\n\t\titem: { id: string };\n\t\tcreateSnackbar: CreateSnackbarFn;\n\t}): ((e?: ActionsClick) => void) =>\n\t(e?: ActionsClick) => {\n\t\tif (e) {\n\t\t\te.stopPropagation();\n\t\t}\n\t\tfolderAction({ id: item.id, op: FOLDER_OPERATIONS.DELETE }).then((res: { Fault?: string }) => {\n\t\t\tif (!res.Fault) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `shared-calendar-removed`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('message.snackbar.shared_calendar_removed', 'Calendar removed successfully'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `shared-calendar-removed-error`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\nexport const sharesInfo =\n\t({\n\t\titem,\n\t\tcreateModal\n\t}: {\n\t\titem: { id: string };\n\t\tcreateModal: CreateModalFn;\n\t}): ((e?: ActionsClick) => void) =>\n\t(e?: ActionsClick) => {\n\t\tif (e) {\n\t\t\te.stopPropagation();\n\t\t}\n\t\tgetFolderRequest({ id: item.id }).then((res) => {\n\t\t\tif (!res.Fault && res.link) {\n\t\t\t\tconst closeModal = createModal(\n\t\t\t\t\t{\n\t\t\t\t\t\tchildren: (\n\t\t\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t\t\t<SharesInfoModal onClose={(): void => closeModal()} folder={res.link[0]} />\n\t\t\t\t\t\t\t</StoreProvider>\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t};\n\nexport const shareCalendar =\n\t({\n\t\titem,\n\t\tcreateModal\n\t}: {\n\t\titem: Folder;\n\t\tcreateModal: CreateModalFn;\n\t}): ((e?: ActionsClick) => void) =>\n\t() => {\n\t\tconst closeModal = createModal(\n\t\t\t{\n\t\t\t\tchildren: (\n\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t<ShareCalendarModal\n\t\t\t\t\t\t\tfolderName={item.name}\n\t\t\t\t\t\t\tfolderId={item.id}\n\t\t\t\t\t\t\tcloseFn={(): void => closeModal()}\n\t\t\t\t\t\t\tgrant={item?.acl?.grant ?? []}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</StoreProvider>\n\t\t\t\t),\n\t\t\t\tmaxHeight: '70vh',\n\t\t\t\tonClose: () => {\n\t\t\t\t\tcloseModal();\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t};\n\nexport const shareCalendarUrl =\n\t({\n\t\titem,\n\t\tcreateModal\n\t}: {\n\t\titem: { name: string };\n\t\tcreateModal: CreateModalFn;\n\t}): ((e?: ActionsClick) => void) =>\n\t() => {\n\t\tconst closeModal = createModal(\n\t\t\t{\n\t\t\t\tchildren: (\n\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t<ShareCalendarUrlModal folderName={item.name} onClose={(): void => closeModal()} />\n\t\t\t\t\t</StoreProvider>\n\t\t\t\t),\n\t\t\t\tmaxHeight: '70vh',\n\t\t\t\tsize: 'medium'\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t};\n\nexport const findShares =\n\t({ createModal }: { createModal: CreateModalFn }): ((e?: ActionsClick) => void) =>\n\t() => {\n\t\tgetShareInfoRequest().then((res) => {\n\t\t\tconst resCalendars: Array<ResFolder> = uniqWith(\n\t\t\t\tfilter(res.calendars, ['view', 'appointment']),\n\t\t\t\tisEqual\n\t\t\t);\n\t\t\tif (res.isFulfilled) {\n\t\t\t\tconst closeModal = createModal(\n\t\t\t\t\t{\n\t\t\t\t\t\tchildren: (\n\t\t\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t\t\t<SharesModal calendars={resCalendars} onClose={(): void => closeModal()} />\n\t\t\t\t\t\t\t</StoreProvider>\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t};\n\nexport const exportCalendarICSFn =\n\t({ item }: { item: { name: string; id: string } }): ((e?: ActionsClick) => void) =>\n\t() => {\n\t\tconst downloadICS = (name: string, uri: string): void => {\n\t\t\tconst link = document.createElement('a');\n\t\t\tlink.download = name;\n\t\t\tlink.href = uri;\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link);\n\t\t};\n\t\tconst dateFormat = moment().format('YYYY-MM-DD');\n\t\tdownloadICS(\n\t\t\t`${lowerCase(item?.name)}-${dateFormat}.ics`,\n\t\t\t`/service/home/~/?auth=co&id=${item.id}&mime=text/plain&noAttach=1&icalAttach=none`\n\t\t);\n\t};\n\nexport const importCalendarICSFn = async (\n\tfiles: FileList,\n\tuserMail: string,\n\tcalendarName: string\n): Promise<Array<{ status: number }>> =>\n\tPromise.all(\n\t\tmap(files, (file) =>\n\t\t\tfetch(`/home/${userMail}/${calendarName}?fmt=ics&charset=UTF-8`, {\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'text/calendar',\n\t\t\t\t\t'Access-Control-Allow-Origin': 'same origin'\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: file\n\t\t\t})\n\t\t)\n\t);\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { soapFetch } from '@zextras/carbonio-shell-ui';\n\nexport const getFolderRequest = async ({ id }: { id: string }): Promise<any> =>\n\tsoapFetch('GetFolder', {\n\t\t_jsns: 'urn:zimbraMail',\n\t\tfolder: {\n\t\t\tl: id\n\t\t}\n\t});\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { soapFetch } from '@zextras/carbonio-shell-ui';\nimport { isEmpty } from 'lodash';\n\nexport const getShareInfoRequest = async (): Promise<any> => {\n\tconst result = await soapFetch('GetShareInfo', {\n\t\t_jsns: 'urn:zimbraAccount',\n\t\tincludeSelf: 0\n\t});\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\treturn Promise.resolve({ isFulfilled: !isEmpty(result), calendars: result?.share ?? [] });\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React from 'react';\n\nimport { CreateModalFn, CreateSnackbarFn } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { isNil } from 'lodash';\n\nimport {\n\tdeleteCalendar,\n\teditCalendar,\n\temptyTrash,\n\texportCalendarICSFn,\n\tfindShares,\n\tmoveToRoot,\n\tnewCalendar,\n\tremoveFromList,\n\tshareCalendar,\n\tshareCalendarUrl,\n\tsharesInfo\n} from './calendar-actions-fn';\nimport {\n\tisNestedInTrash,\n\tisTrashOrNestedInIt\n} from '../carbonio-ui-commons/store/zustand/folder/utils';\nimport { FOLDERS } from '../carbonio-ui-commons/test/mocks/carbonio-shell-ui-constants';\nimport { Folder, LinkFolder } from '../carbonio-ui-commons/types/folder';\nimport { hasId } from '../carbonio-ui-commons/worker/handle-message';\nimport { isLinkChild, isMainRootChild } from '../commons/utilities';\nimport { CalendarActionsId, FOLDER_ACTIONS, SIDEBAR_ITEMS } from '../constants/sidebar';\n\nexport type CalendarActionsItems = {\n\tid: CalendarActionsId;\n\ticon: string;\n\tdisabled: boolean;\n\tlabel: string;\n\tonClick: (ev: React.SyntheticEvent | KeyboardEvent) => void;\n\ttooltipLabel: string;\n};\n\nexport const noPermissionLabel = t(\n\t'label.no_rights',\n\t'You do not have permission to perform this action'\n);\n\nexport const newCalendarItem = ({\n\tcreateModal,\n\titem\n}: {\n\tcreateModal: CreateModalFn;\n\titem: { id: string; perm?: string };\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.NEW,\n\ticon: 'CalendarOutline',\n\tlabel: t('label.new_calendar', 'New calendar'),\n\tdisabled:\n\t\tisTrashOrNestedInIt(item) ||\n\t\t(item.perm ? !/w/.test(item.perm) : false) ||\n\t\thasId(item, SIDEBAR_ITEMS.ALL_CALENDAR),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: newCalendar({ createModal, item })\n});\n\nexport const moveToRootItem = ({\n\tcreateSnackbar,\n\titem\n}: {\n\tcreateSnackbar: CreateSnackbarFn;\n\titem: { id: string; absFolderPath?: string; depth: number };\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.MOVE_TO_ROOT,\n\ticon: 'MoveOutline',\n\tlabel: isNestedInTrash(item)\n\t\t? t('label.restore_calendar', 'Restore calendar')\n\t\t: t('action.move_to_root', 'Move to root'),\n\tdisabled:\n\t\thasId(item, FOLDERS.TRASH) ||\n\t\thasId(item, SIDEBAR_ITEMS.ALL_CALENDAR) ||\n\t\thasId(item, FOLDERS.CALENDAR) ||\n\t\titem.depth < 2 ||\n\t\tisLinkChild(item) ||\n\t\t!!(item as LinkFolder)?.owner,\n\ttooltipLabel: noPermissionLabel,\n\tonClick: moveToRoot({ createSnackbar, item })\n});\n\nexport const emptyTrashItem = ({\n\tcreateModal,\n\titem\n}: {\n\tcreateModal: CreateModalFn;\n\titem: { id: string; children?: Array<Folder>; n?: number };\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.EMPTY_TRASH,\n\ticon: 'DeletePermanentlyOutline',\n\tlabel: t('action.empty_trash', 'Empty Trash'),\n\ttooltipLabel:\n\t\thasId(item, FOLDERS.TRASH) &&\n\t\t!isNil(item?.n) &&\n\t\titem?.n < 1 &&\n\t\t!isNil(item?.children) &&\n\t\titem.children.length < 1\n\t\t\t? t('action.Trash_already_empty', 'trash is already empty')\n\t\t\t: noPermissionLabel,\n\tonClick: emptyTrash({ createModal, item }),\n\tdisabled:\n\t\t!hasId(item, FOLDERS.TRASH) ||\n\t\t(hasId(item, FOLDERS.TRASH) &&\n\t\t\t!isNil(item?.n) &&\n\t\t\titem?.n < 1 &&\n\t\t\t!isNil(item?.children) &&\n\t\t\titem.children.length < 1)\n});\n\nexport const editCalendarItem = ({\n\tcreateModal,\n\titem\n}: {\n\tcreateModal: CreateModalFn;\n\titem: { id: string; absFolderPath?: string };\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.EDIT,\n\ticon: 'Edit2Outline',\n\tlabel: t('action.edit_calendar_properties', 'Edit calendar properties'),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: editCalendar({ createModal, item }),\n\tdisabled: hasId(item, SIDEBAR_ITEMS.ALL_CALENDAR) || isTrashOrNestedInIt(item)\n});\n\nexport const deleteCalendarItem = ({\n\tcreateModal,\n\titem\n}: {\n\tcreateModal: CreateModalFn;\n\titem: Folder;\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.DELETE,\n\ticon: 'Trash2Outline',\n\tlabel: isNestedInTrash(item)\n\t\t? t('label.delete_permanently', 'Delete permanently')\n\t\t: t('action.delete_calendar', 'Delete calendar'),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: deleteCalendar({ createModal, item }),\n\tdisabled:\n\t\thasId(item, SIDEBAR_ITEMS.ALL_CALENDAR) ||\n\t\thasId(item, FOLDERS.CALENDAR) ||\n\t\thasId(item, FOLDERS.TRASH) ||\n\t\t(item.perm ? !/w/.test(item.perm) : false)\n});\n\nexport const removeFromListItem = ({\n\titem,\n\tcreateSnackbar\n}: {\n\titem: { id: string; absFolderPath?: string };\n\tcreateSnackbar: CreateSnackbarFn;\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.REMOVE_FROM_LIST,\n\ticon: 'CloseOutline',\n\tlabel: t('remove_from_this_list', 'Remove shared calendar'),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: removeFromList({ item, createSnackbar }),\n\tdisabled:\n\t\t!(item as LinkFolder).isLink ||\n\t\tisLinkChild(item) ||\n\t\thasId(item, SIDEBAR_ITEMS.ALL_CALENDAR) ||\n\t\thasId(item, FOLDERS.CALENDAR) ||\n\t\tisTrashOrNestedInIt(item)\n});\n\nexport const sharesInfoItem = ({\n\tcreateModal,\n\titem\n}: {\n\titem: { id: string; absFolderPath?: string };\n\tcreateModal: CreateModalFn;\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.SHARES_INFO,\n\ticon: 'InfoOutline',\n\tlabel: t('shares_info', 'Shares Info'),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: sharesInfo({ createModal, item }),\n\tdisabled:\n\t\t!(item as LinkFolder).isLink ||\n\t\tisLinkChild(item) ||\n\t\thasId(item, SIDEBAR_ITEMS.ALL_CALENDAR) ||\n\t\thasId(item, FOLDERS.CALENDAR) ||\n\t\tisTrashOrNestedInIt(item)\n});\n\nexport const shareCalendarItem = ({\n\tcreateModal,\n\titem\n}: {\n\titem: Folder;\n\tcreateModal: CreateModalFn;\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.SHARE,\n\ticon: 'SharedCalendarOutline',\n\tlabel: t('action.share_calendar', 'Share Calendar'),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: shareCalendar({ createModal, item }),\n\tdisabled:\n\t\thasId(item, SIDEBAR_ITEMS.ALL_CALENDAR) ||\n\t\tisTrashOrNestedInIt(item) ||\n\t\t(item.perm ? !/w/.test(item.perm) : false)\n});\n\nexport const shareCalendarUrlItem = ({\n\tcreateModal,\n\titem\n}: {\n\titem: { name: string; id: string; absFolderPath?: string };\n\tcreateModal: CreateModalFn;\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.SHARE_URL,\n\ticon: 'Copy',\n\tlabel: t('action.calendar_access_share', 'Calendar access share'),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: shareCalendarUrl({ createModal, item }),\n\tdisabled:\n\t\t(item as LinkFolder).isLink ||\n\t\tisTrashOrNestedInIt(item) ||\n\t\thasId(item, SIDEBAR_ITEMS.ALL_CALENDAR)\n});\n\nexport const findSharesItem = ({\n\tcreateModal,\n\titem\n}: {\n\titem: { name: string; id: string; absFolderPath?: string };\n\tcreateModal: CreateModalFn;\n}): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.FIND_SHARES,\n\ticon: 'PlusOutline',\n\tlabel: t('find_shares', 'Find shares'),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: findShares({ createModal }),\n\tdisabled:\n\t\tisTrashOrNestedInIt(item) || hasId(item, SIDEBAR_ITEMS.ALL_CALENDAR) || !isMainRootChild(item)\n});\n\nexport const exportAppointmentICSItem = ({ item }: { item: Folder }): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.EXPORT_ICS,\n\ticon: 'Download',\n\tlabel: t('action.export_calendar_ics', 'Export ICS file'),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: exportCalendarICSFn({ item }),\n\tdisabled:\n\t\thasId(item, SIDEBAR_ITEMS.ALL_CALENDAR) ||\n\t\tisTrashOrNestedInIt(item) ||\n\t\t(item as LinkFolder).isLink ||\n\t\tisLinkChild(item)\n});\n\nexport const importCalendarICSItem = (\n\titem: Folder,\n\tref?: React.RefObject<HTMLInputElement>\n): CalendarActionsItems => ({\n\tid: FOLDER_ACTIONS.UPLOAD,\n\ticon: 'Upload',\n\tlabel: t('action.calendar_upload', 'Import ICS file'),\n\ttooltipLabel: noPermissionLabel,\n\tonClick: (): void => {\n\t\tif (ref?.current) {\n\t\t\tref.current.click();\n\t\t}\n\t},\n\tdisabled:\n\t\thasId(item, SIDEBAR_ITEMS.ALL_CALENDAR) ||\n\t\tisTrashOrNestedInIt(item) ||\n\t\t(item as LinkFolder).isLink ||\n\t\tisLinkChild(item)\n});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useCallback, useMemo, useRef } from 'react';\n\nimport {\n\tAccordionItem,\n\tAccordionItemType,\n\tAvatar,\n\tDropdown,\n\tIcon,\n\tPadding,\n\tRow,\n\tTooltip,\n\tuseModal,\n\tuseSnackbar,\n\tModalHeader,\n\tModalFooter,\n\tModalBody,\n\tDivider,\n\tText\n} from '@zextras/carbonio-design-system';\nimport { FOLDERS, ROOT_NAME, t, useUserAccount } from '@zextras/carbonio-shell-ui';\nimport styled from 'styled-components';\n\nimport { importCalendarICSFn } from '../../../actions/calendar-actions-fn';\nimport { getRootAccountId, useRoot } from '../../../carbonio-ui-commons/store/zustand/folder';\nimport { isRoot } from '../../../carbonio-ui-commons/store/zustand/folder/utils';\nimport { Folder } from '../../../carbonio-ui-commons/types/folder';\nimport { hasId } from '../../../carbonio-ui-commons/worker/handle-message';\nimport {\n\tgetFolderIcon,\n\tgetFolderTranslatedName,\n\tisLinkChild,\n\trecursiveToggleCheck\n} from '../../../commons/utilities';\nimport { SIDEBAR_ITEMS } from '../../../constants/sidebar';\nimport { useCalendarActions } from '../../../hooks/use-calendar-actions';\nimport { useCheckedCalendarsQuery } from '../../../hooks/use-checked-calendars-query';\nimport { setCalendarColor } from '../../../normalizations/normalizations-utils';\nimport { NoOpRequest } from '../../../soap/noop-request';\nimport { useAppDispatch } from '../../../store/redux/hooks';\nimport { useRangeEnd, useRangeStart } from '../../../store/zustand/hooks';\n\ntype FoldersComponentProps = {\n\titem: Folder;\n};\n\nconst FittedRow = styled(Row)`\n\tmax-width: calc(100% - (2 * ${({ theme }): string => theme.sizes.padding.small}));\n\theight: 3rem;\n`;\n\nconst FileInput = styled.input`\n\tdisplay: none;\n`;\n\nconst ContextMenuItem = ({\n\tchildren,\n\tinputRef,\n\titem\n}: {\n\tchildren: React.JSX.Element;\n\tinputRef: React.RefObject<HTMLInputElement>;\n\titem: Folder;\n}): React.JSX.Element => {\n\tconst isAllCalendar = useMemo(() => hasId(item, SIDEBAR_ITEMS.ALL_CALENDAR), [item]);\n\tconst items = useCalendarActions(item, inputRef);\n\n\treturn isAllCalendar ? (\n\t\tchildren\n\t) : (\n\t\t<Dropdown items={items} contextMenu width=\"100%\" display=\"block\">\n\t\t\t{children}\n\t\t</Dropdown>\n\t);\n};\n\nconst RowWithIcon = (icon: string, color: string, tooltipText: string): React.JSX.Element => (\n\t<Padding left=\"small\">\n\t\t<Tooltip placement=\"right\" label={tooltipText}>\n\t\t\t<Row>\n\t\t\t\t<Icon icon={icon} color={color} size=\"medium\" />\n\t\t\t</Row>\n\t\t</Tooltip>\n\t</Padding>\n);\n\nconst RootChildren = ({\n\taccordionItem,\n\titem\n}: {\n\taccordionItem: AccordionItemType;\n\titem: Folder;\n}): React.JSX.Element => {\n\tconst dispatch = useAppDispatch();\n\tconst start = useRangeStart();\n\tconst end = useRangeEnd();\n\tconst query = useCheckedCalendarsQuery();\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst createSnackbar = useSnackbar();\n\tconst createModal = useModal();\n\n\tconst user = useUserAccount();\n\tconst rootAccountId = getRootAccountId(item.id);\n\tconst root = useRoot(rootAccountId ?? FOLDERS.USER_ROOT);\n\n\tconst onClick = useCallback(\n\t\t(): void =>\n\t\t\trecursiveToggleCheck({\n\t\t\t\tfolder: item,\n\t\t\t\tchecked: !!item.checked,\n\t\t\t\tdispatch,\n\t\t\t\tstart,\n\t\t\t\tend,\n\t\t\t\tquery\n\t\t\t}),\n\t\t[dispatch, end, item, query, start]\n\t);\n\n\tconst sharedStatusIcon = useMemo(() => {\n\t\tif (item.isLink || isLinkChild(item)) {\n\t\t\tconst tooltipText = t('tooltip.folder_linked_status', 'Linked to me');\n\t\t\treturn RowWithIcon('Linked', 'linked', tooltipText);\n\t\t}\n\t\tif (item.acl?.grant) {\n\t\t\tconst tooltipText = t('tooltip.calendar_sharing_status', {\n\t\t\t\tcount: item?.acl?.grant?.length,\n\t\t\t\tdefaultValue_one: 'Shared with 1 person',\n\t\t\t\tdefaultValue: 'Shared with {{count}} people'\n\t\t\t});\n\t\t\treturn RowWithIcon('Shared', 'shared', tooltipText);\n\t\t}\n\t\treturn '';\n\t}, [item]);\n\n\tconst userMail = useMemo(\n\t\t() => (root?.name === ROOT_NAME ? user.name : root?.name ?? user.name),\n\t\t[root, user.name]\n\t);\n\n\tconst confirmModal = useCallback(() => {\n\t\tif (inputRef?.current?.files) {\n\t\t\tcreateSnackbar({\n\t\t\t\tkey: `import ongoing`,\n\t\t\t\treplace: true,\n\t\t\t\ttype: 'info',\n\t\t\t\tlabel: t('label.import_calendar_ongoing', 'Import into the selected calendar in progress.'),\n\t\t\t\thideButton: true\n\t\t\t});\n\t\t\timportCalendarICSFn(inputRef?.current?.files, userMail, item.name).then((res) => {\n\t\t\t\tif (res[0].status === 200) {\n\t\t\t\t\tNoOpRequest().then(() => {\n\t\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\t\tkey: `import success`,\n\t\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\tlabel: t('label.import_calendar_success', 'Import successful'),\n\t\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\t\thideButton: true\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `import failed`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [createSnackbar, item.name, userMail]);\n\n\tconst onFileInputChange = useCallback(() => {\n\t\tif (inputRef?.current?.files) {\n\t\t\tconst closeModal = createModal(\n\t\t\t\t{\n\t\t\t\t\tsize: 'small',\n\t\t\t\t\tchildren: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ModalHeader\n\t\t\t\t\t\t\t\ttitle={t('import_appointments', 'Import appointments')}\n\t\t\t\t\t\t\t\tshowCloseIcon\n\t\t\t\t\t\t\t\tonClose={(): void => {\n\t\t\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t<ModalBody>\n\t\t\t\t\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t\t\t\t\t{t('message.import_appointment_modal', {\n\t\t\t\t\t\t\t\t\t\tfileName: inputRef?.current?.files[0].name,\n\t\t\t\t\t\t\t\t\t\tcalendarName: item.name,\n\t\t\t\t\t\t\t\t\t\tdefaultValue:\n\t\t\t\t\t\t\t\t\t\t\t'The appointments contained within {{fileName}} will be imported into the \"{{calendarName}}\" calendar.'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</ModalBody>\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t<ModalFooter\n\t\t\t\t\t\t\t\tonConfirm={(): void => {\n\t\t\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t\t\t\tconfirmModal();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClose={(): void => {\n\t\t\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tconfirmLabel={t('import', 'Import')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\t}, [confirmModal, createModal, item.name]);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextMenuItem item={item} inputRef={inputRef}>\n\t\t\t\t<Row onClick={onClick}>\n\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t<Tooltip label={accordionItem.label} placement=\"right\" maxWidth=\"100%\">\n\t\t\t\t\t\t<AccordionItem item={accordionItem} />\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{sharedStatusIcon}\n\t\t\t\t</Row>\n\t\t\t</ContextMenuItem>\n\t\t\t<FileInput type=\"file\" ref={inputRef} onChange={onFileInputChange} accept=\".ics\" />\n\t\t</>\n\t);\n};\n\nconst RootAccount = ({\n\taccordionItem\n}: {\n\taccordionItem: AccordionItemType;\n}): React.JSX.Element => (\n\t<FittedRow>\n\t\t<Padding left=\"small\">\n\t\t\t<Avatar\n\t\t\t\tlabel={accordionItem.label ?? ''}\n\t\t\t\tcolorLabel={accordionItem.iconColor}\n\t\t\t\tsize=\"medium\"\n\t\t\t/>\n\t\t</Padding>\n\t\t<Tooltip label={accordionItem.label} placement=\"right\" maxWidth=\"100%\">\n\t\t\t<AccordionItem item={accordionItem} />\n\t\t</Tooltip>\n\t</FittedRow>\n);\n\nexport const FoldersComponent: FC<FoldersComponentProps> = ({ item }) => {\n\tconst { displayName } = useUserAccount();\n\tconst isRootAccount = useMemo(() => isRoot(item), [item]);\n\tconst accordionItem = useMemo(\n\t\t() =>\n\t\t\t({\n\t\t\t\t...item,\n\t\t\t\tlabel:\n\t\t\t\t\titem.id === FOLDERS.USER_ROOT\n\t\t\t\t\t\t? displayName\n\t\t\t\t\t\t: getFolderTranslatedName({ folderId: item.id, folderName: item.name }) ?? '',\n\t\t\t\ticon: getFolderIcon({ item, checked: !!item.checked }),\n\t\t\t\ticonColor: setCalendarColor({ color: item.color, rgb: item.rgb }).color,\n\t\t\t\ttextProps: { size: 'small' }\n\t\t\t}) as AccordionItemType,\n\t\t[item, displayName]\n\t);\n\n\t// hide folders where a share was provided and subsequently removed\n\tif (item.isLink && item.broken) {\n\t\treturn <></>;\n\t}\n\n\tif (isRootAccount) {\n\t\treturn <RootAccount accordionItem={accordionItem} />;\n\t}\n\n\treturn <RootChildren accordionItem={accordionItem} item={item} />;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useModal, useSnackbar } from '@zextras/carbonio-design-system';\nimport { filter } from 'lodash';\n\nimport {\n\tdeleteCalendarItem,\n\teditCalendarItem,\n\temptyTrashItem,\n\texportAppointmentICSItem,\n\tfindSharesItem,\n\timportCalendarICSItem,\n\tmoveToRootItem,\n\tnewCalendarItem,\n\tremoveFromListItem,\n\tshareCalendarItem,\n\tshareCalendarUrlItem,\n\tsharesInfoItem\n} from '../actions/calendar-actions-items';\nimport { Folder } from '../carbonio-ui-commons/types/folder';\nimport { ActionsClick } from '../types/actions';\n\ntype CalendarActionsProps = {\n\tid: string;\n\ticon: string;\n\tlabel: string;\n\tonClick: (e: ActionsClick) => void;\n\tdisabled?: boolean;\n};\nexport const useCalendarActions = (\n\titem: Folder,\n\tinputRef?: React.RefObject<HTMLInputElement>\n): Array<CalendarActionsProps> => {\n\tconst createModal = useModal();\n\tconst createSnackbar = useSnackbar();\n\n\tif (!item) return [];\n\n\tconst actions = [\n\t\tnewCalendarItem({ createModal, item }),\n\t\tmoveToRootItem({ createSnackbar, item }),\n\t\temptyTrashItem({ createModal, item }),\n\t\teditCalendarItem({ createModal, item }),\n\t\tdeleteCalendarItem({ createModal, item }),\n\t\tremoveFromListItem({ item, createSnackbar }),\n\t\tshareCalendarUrlItem({ createModal, item }),\n\t\tfindSharesItem({ createModal, item }),\n\t\tsharesInfoItem({ item, createModal }),\n\t\texportAppointmentICSItem({ item }),\n\t\timportCalendarICSItem(item, inputRef)\n\t];\n\n\treturn filter(actions, ['disabled', false]);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { createTheme, CustomPaletteOptions, CustomTheme } from '@mui/material/styles';\n\nexport const theme: CustomTheme = createTheme(<CustomPaletteOptions>{\n\tpalette: {\n\t\tcurrentColor: {\n\t\t\tregular: 'currentColor',\n\t\t\thover: 'currentColor',\n\t\t\tactive: 'currentColor',\n\t\t\tfocus: 'currentColor',\n\t\t\tdisabled: 'currentColor'\n\t\t},\n\t\ttransparent: {\n\t\t\tregular: 'rgba(0, 0, 0, 0)',\n\t\t\thover: 'rgba(0, 0, 0, 0.05)',\n\t\t\tactive: 'rgba(0, 0, 0, 0.1)',\n\t\t\tfocus: 'rgba(0, 0, 0, 0.05)',\n\t\t\tdisabled: 'rgba(0, 0, 0, 0)'\n\t\t},\n\t\tprimary: {\n\t\t\tregular: '#2b73d2',\n\t\t\thover: '#225ca8',\n\t\t\tactive: '#1e5092',\n\t\t\tfocus: '#225ca8',\n\t\t\tdisabled: '#aac8ee',\n\t\t\tmain: '#2b73d2'\n\t\t},\n\t\tsecondary: {\n\t\t\tregular: '#828282',\n\t\t\thover: '#696969',\n\t\t\tactive: '#5c5c5c',\n\t\t\tfocus: '#696969',\n\t\t\tdisabled: '#cccccc',\n\t\t\tmain: '#828282'\n\t\t},\n\t\theader: {\n\t\t\tregular: '#cfd5dc',\n\t\t\thover: '#b1bbc6',\n\t\t\tactive: '#a3aebc',\n\t\t\tfocus: '#b1bbc6',\n\t\t\tdisabled: '#cfd5dc'\n\t\t},\n\t\thighlight: {\n\t\t\tregular: '#d5e3f6',\n\t\t\thover: '#abc7ed',\n\t\t\tactive: '#96b8e8',\n\t\t\tfocus: '#abc7ed',\n\t\t\tdisabled: '#d5e3f6'\n\t\t},\n\t\tgray0: {\n\t\t\tregular: '#414141',\n\t\t\thover: '#282828',\n\t\t\tactive: '#1b1b1b',\n\t\t\tfocus: '#282828',\n\t\t\tdisabled: '#cccccc'\n\t\t},\n\t\tgray1: {\n\t\t\tregular: '#828282',\n\t\t\thover: '#696969',\n\t\t\tactive: '#5c5c5c',\n\t\t\tfocus: '#696969',\n\t\t\tdisabled: '#cccccc'\n\t\t},\n\t\tgray2: {\n\t\t\tregular: '#cfd5dc',\n\t\t\thover: '#b1bbc6',\n\t\t\tactive: '#a3aebc',\n\t\t\tfocus: '#b1bbc6',\n\t\t\tdisabled: '#cfd5dc'\n\t\t},\n\t\tgray3: {\n\t\t\tregular: '#e6e9ed',\n\t\t\thover: '#c8cfd8',\n\t\t\tactive: '#bac2cd',\n\t\t\tfocus: '#c8cfd8',\n\t\t\tdisabled: '#e6e9ed'\n\t\t},\n\t\tgray4: {\n\t\t\tregular: '#eeeff3',\n\t\t\thover: '#d0d3de',\n\t\t\tactive: '#c1c5d3',\n\t\t\tfocus: '#d0d3de',\n\t\t\tdisabled: '#eeeff3'\n\t\t},\n\t\tgray5: {\n\t\t\tregular: '#f5f6f8',\n\t\t\thover: '#d7dbe3',\n\t\t\tactive: '#c8ced9',\n\t\t\tfocus: '#d7dbe3',\n\t\t\tdisabled: '#f5f6f8'\n\t\t},\n\t\tgray6: {\n\t\t\tregular: '#ffffff',\n\t\t\thover: '#e6e6e6',\n\t\t\tactive: '#d9d9d9',\n\t\t\tfocus: '#e6e6e6',\n\t\t\tdisabled: '#ffffff'\n\t\t},\n\t\twarning: {\n\t\t\tregular: '#ffc107',\n\t\t\thover: '#d39e00',\n\t\t\tactive: '#ba8b00',\n\t\t\tfocus: '#d39e00',\n\t\t\tdisabled: '#ffe699',\n\t\t\tmain: '#ffc107'\n\t\t},\n\t\terror: {\n\t\t\tregular: '#d74942',\n\t\t\thover: '#be3028',\n\t\t\tactive: '#a92a24',\n\t\t\tfocus: '#be3028',\n\t\t\tdisabled: '#edaeab',\n\t\t\tmain: '#d74942'\n\t\t},\n\t\tsuccess: {\n\t\t\tregular: '#8bc34a',\n\t\t\thover: '#71a436',\n\t\t\tactive: '#639030',\n\t\t\tfocus: '#71a436',\n\t\t\tdisabled: '#cee6b2',\n\t\t\tmain: '#8bc34a'\n\t\t},\n\t\tinfo: {\n\t\t\tregular: '#2196d3',\n\t\t\thover: '#1a75a7',\n\t\t\tactive: '#176691',\n\t\t\tfocus: '#1a75a7',\n\t\t\tdisabled: '#a7d7f1',\n\t\t\tmain: '#2196d3'\n\t\t},\n\t\ttext: {\n\t\t\tregular: '#333333',\n\t\t\thover: '#1a1a1a',\n\t\t\tactive: '#0d0d0d',\n\t\t\tfocus: '#1a1a1a',\n\t\t\tdisabled: '#cccccc',\n\t\t\tmain: '#333333'\n\t\t}\n\t},\n\tavatarColors: {\n\t\tavatar_1: '#EF9A9A',\n\t\tavatar_2: '#F48FB1',\n\t\tavatar_3: '#CE93D8',\n\t\tavatar_4: '#B39DDB',\n\t\tavatar_5: '#9FA8DA',\n\t\tavatar_6: '#90CAF9',\n\t\tavatar_7: '#81D4FA',\n\t\tavatar_8: '#80DEEA',\n\t\tavatar_9: '#80CBC4',\n\t\tavatar_10: '#A5D6A7',\n\t\tavatar_11: '#C5E1A5',\n\t\tavatar_12: '#E6EE9C',\n\t\tavatar_13: '#FFE082',\n\t\tavatar_14: '#FFCC80',\n\t\tavatar_15: '#FFAB91',\n\t\tavatar_16: '#BCAAA4',\n\t\tavatar_17: '#E57373',\n\t\tavatar_18: '#F06292',\n\t\tavatar_19: '#BA68C8',\n\t\tavatar_20: '#9575CD',\n\t\tavatar_21: '#7986CB',\n\t\tavatar_22: '#64B5F6',\n\t\tavatar_23: '#4FC3F7',\n\t\tavatar_24: '#4DD0E1',\n\t\tavatar_25: '#4DB6AC',\n\t\tavatar_26: '#81C784',\n\t\tavatar_27: '#AED581',\n\t\tavatar_28: '#DCE775',\n\t\tavatar_29: '#FFD54F',\n\t\tavatar_30: '#FFB74D',\n\t\tavatar_31: '#FF8A65',\n\t\tavatar_32: '#A1887F',\n\t\tavatar_33: '#0097A7',\n\t\tavatar_34: '#EF5350',\n\t\tavatar_35: '#EC407A',\n\t\tavatar_36: '#AB47BC',\n\t\tavatar_37: '#7E57C2',\n\t\tavatar_38: '#5C6BC0',\n\t\tavatar_39: '#42A5F5',\n\t\tavatar_40: '#29B6F6',\n\t\tavatar_41: '#26C6DA',\n\t\tavatar_42: '#26A69A',\n\t\tavatar_43: '#66BB6A',\n\t\tavatar_44: '#9CCC65',\n\t\tavatar_45: '#D4E157',\n\t\tavatar_46: '#FFCA28',\n\t\tavatar_47: '#FFA726',\n\t\tavatar_48: '#FF7043',\n\t\tavatar_49: '#8D6E63',\n\t\tavatar_50: '#0288D1'\n\t}\n});\n\nexport const themeMui = createTheme({\n\tcomponents: {\n\t\tMuiSvgIcon: {\n\t\t\tstyleOverrides: {\n\t\t\t\troot: {\n\t\t\t\t\tcolor: theme.palette.text.regular,\n\t\t\t\t\t'&:hover': { background: theme.palette.gray3.hover },\n\t\t\t\t\tfontSize: '1.25rem',\n\t\t\t\t\tfontWeight: 400\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tMuiAccordionSummary: {\n\t\t\tstyleOverrides: {\n\t\t\t\troot: {\n\t\t\t\t\tpadding: '0 1rem 0 0',\n\t\t\t\t\tmargin: '0',\n\t\t\t\t\tminHeight: '0',\n\t\t\t\t\tjustifyContent: 'left'\n\t\t\t\t},\n\t\t\t\tcontent: {\n\t\t\t\t\tmargin: '0',\n\t\t\t\t\tmaxWidth: 'calc(100% - 1.25rem)'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tMuiAccordionDetails: {\n\t\t\tstyleOverrides: {\n\t\t\t\troot: {\n\t\t\t\t\tbackground: theme.palette.gray5.regular,\n\t\t\t\t\tpadding: '0 0 0 0.5rem',\n\t\t\t\t\tmargin: '0'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tMuiButtonBase: {\n\t\t\tstyleOverrides: {\n\t\t\t\troot: {\n\t\t\t\t\tpadding: '0'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tMuiPaper: {\n\t\t\tstyleOverrides: {\n\t\t\t\troot: {\n\t\t\t\t\tborderBottomLeftRadius: '0',\n\t\t\t\t\tborderTopLeftRadius: '0',\n\t\t\t\t\tborderBottomRightRadius: '0',\n\t\t\t\t\tborderTopRightRadius: '0'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tMuiAccordion: {\n\t\t\tstyleOverrides: {\n\t\t\t\troot: {\n\t\t\t\t\t':last-of-type': {\n\t\t\t\t\t\tborderBottomLeftRadius: '0',\n\t\t\t\t\t\tborderTopLeftRadius: '0',\n\t\t\t\t\t\tborderBottomRightRadius: '0',\n\t\t\t\t\t\tborderTopRightRadius: '0'\n\t\t\t\t\t},\n\t\t\t\t\t':first-of-type': {\n\t\t\t\t\t\tborderBottomLeftRadius: '0',\n\t\t\t\t\t\tborderTopLeftRadius: '0',\n\t\t\t\t\t\tborderBottomRightRadius: '0',\n\t\t\t\t\t\tborderTopRightRadius: '0'\n\t\t\t\t\t},\n\t\t\t\t\tboxShadow: 'none',\n\t\t\t\t\tbackground: theme.palette.gray5.highlight,\n\t\t\t\t\t'&.MuiAccordion-root:before': {\n\t\t\t\t\t\ttop: '0'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useCallback, useRef } from 'react';\n\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport { Accordion, AccordionDetails, AccordionSummary, Container } from '@mui/material';\nimport { useLocalStorage } from '@zextras/carbonio-shell-ui';\n\nimport { theme } from '../../theme/theme-mui';\nimport type { Folder } from '../../types/folder';\nimport type { SidebarAccordionProps } from '../../types/sidebar';\nimport { hasId } from '../../worker/handle-message';\nimport { FOREGROUND_COLOR } from '../../../sruvi/Colors';\n\nexport const SidebarAccordionMui: FC<SidebarAccordionProps> = ({\n\taccordions,\n\tfolderId,\n\tlocalStorageName,\n\tAccordionCustomComponent,\n\tsetSelectedFolder,\n\tbuttonFindShares,\n\tinitialExpanded\n}) => {\n\tconst [openIds, setOpenIds] = useLocalStorage<Array<string>>(\n\t\tlocalStorageName,\n\t\tinitialExpanded ?? []\n\t);\n\tconst sidebarRef = useRef<HTMLInputElement>(null);\n\tconst onClick = useCallback(\n\t\t({ accordion, expanded }: { accordion: Folder; expanded: boolean }): void => {\n\t\t\tif (expanded) {\n\t\t\t\tsetOpenIds((state: Array<string>) =>\n\t\t\t\t\tstate.includes(accordion.id) ? state : [...state, accordion.id]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsetOpenIds((state: Array<string>) => state.filter((id) => id !== accordion.id));\n\t\t\t}\n\t\t},\n\t\t[setOpenIds]\n\t);\n\n\treturn (\n\t\t<Container ref={sidebarRef} disableGutters>\n\t\t\t{accordions.map((accordion) =>\n\t\t\t\taccordion.id === 'find_shares' ? (\n\t\t\t\t\tbuttonFindShares\n\t\t\t\t) : (\n\t\t\t\t\t<Accordion\n\t\t\t\t\t\tdisableGutters\n\t\t\t\t\t\tTransitionProps={{ unmountOnExit: true }}\n\t\t\t\t\t\texpanded={openIds.includes(accordion.id)}\n\t\t\t\t\t\tkey={accordion.id}\n\t\t\t\t\t>\n\t\t\t\t\t\t<AccordionSummary\n\t\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\t\tsetSelectedFolder && setSelectedFolder(accordion.id);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\texpandIcon={\n\t\t\t\t\t\t\t\taccordion?.children?.length > 0 &&\n\t\t\t\t\t\t\t\t!hasId(accordion, 'all') && (\n\t\t\t\t\t\t\t\t\t<ExpandMoreIcon\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={(e): void => {\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\tonClick({ accordion, expanded: !openIds.includes(accordion.id) });\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taria-controls=\"panel1a-content\"\n\t\t\t\t\t\t\tid={accordion.id}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tbackgroundColor: accordion.id === folderId ? FOREGROUND_COLOR : 'transparent',\n\t\t\t\t\t\t\t\t'&:hover': {\n\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\taccordion.id === folderId ? FOREGROUND_COLOR : theme.palette.gray5.hover\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tborderRadius: '16px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AccordionCustomComponent item={accordion} />\n\t\t\t\t\t\t</AccordionSummary>\n\t\t\t\t\t\t{accordion?.children?.length > 0 && (\n\t\t\t\t\t\t\t<AccordionDetails>\n\t\t\t\t\t\t\t\t<SidebarAccordionMui\n\t\t\t\t\t\t\t\t\taccordions={accordion.children}\n\t\t\t\t\t\t\t\t\tfolderId={folderId}\n\t\t\t\t\t\t\t\t\tkey={accordion.id}\n\t\t\t\t\t\t\t\t\tlocalStorageName={localStorageName}\n\t\t\t\t\t\t\t\t\tAccordionCustomComponent={AccordionCustomComponent}\n\t\t\t\t\t\t\t\t\tsetSelectedFolder={setSelectedFolder}\n\t\t\t\t\t\t\t\t\tbuttonFindShares={buttonFindShares}\n\t\t\t\t\t\t\t\t\tinitialExpanded={initialExpanded}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</AccordionDetails>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Accordion>\n\t\t\t\t)\n\t\t\t)}\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, SyntheticEvent, useCallback, useMemo } from 'react';\n\nimport {\n\tAccordionItem,\n\tDropdown,\n\tRow,\n\tIcon,\n\tPadding,\n\tTooltip,\n\tuseModal\n} from '@zextras/carbonio-design-system';\nimport { t, useTags, ZIMBRA_STANDARD_COLORS, runSearch } from '@zextras/carbonio-shell-ui';\nimport { reduce } from 'lodash';\n\nimport { createTag, useGetTagsActions } from './tag-actions';\nimport { ItemType, TagsAccordionItems } from '../../carbonio-ui-commons/types/tags';\n\ntype ItemProps = {\n\titem: ItemType;\n};\n\nconst CustomComp: FC<ItemProps> = (props) => {\n\tconst actions = useGetTagsActions({ tag: props?.item });\n\n\tconst triggerSearch = useCallback(\n\t\t() =>\n\t\t\trunSearch(\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tavatarBackground: ZIMBRA_STANDARD_COLORS[props?.item?.color || 0].hex,\n\t\t\t\t\t\tavatarIcon: 'Tag',\n\t\t\t\t\t\tbackground: 'gray2',\n\t\t\t\t\t\thasAvatar: true,\n\t\t\t\t\t\tlabel: `tag:${props?.item?.name}`,\n\t\t\t\t\t\tvalue: `tag:\"${props?.item?.name}\"`\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t'mails'\n\t\t\t),\n\t\t[props?.item?.color, props?.item?.name]\n\t);\n\n\treturn (\n\t\t<Dropdown contextMenu items={actions} display=\"block\" width=\"fit\" onClick={triggerSearch}>\n\t\t\t<Row mainAlignment=\"flex-start\" height=\"fit\" padding={{ left: 'large' }} takeAvailableSpace>\n\t\t\t\t<Icon size=\"large\" icon=\"Tag\" color={ZIMBRA_STANDARD_COLORS[props?.item?.color ?? 0].hex} />\n\n\t\t\t\t<Padding right=\"large\" />\n\t\t\t\t<Tooltip label={props?.item?.name} placement=\"right\" maxWidth=\"100%\">\n\t\t\t\t\t<AccordionItem {...props} height=\"2.5rem\" />\n\t\t\t\t</Tooltip>\n\t\t\t</Row>\n\t\t</Dropdown>\n\t);\n};\n\nexport const TagLabel: FC<ItemType> = (props) => {\n\tconst createModal = useModal();\n\treturn (\n\t\t<Dropdown contextMenu display=\"block\" width=\"fit\" items={[createTag({ createModal })]}>\n\t\t\t<Row mainAlignment=\"flex-start\" padding={{ horizontal: 'large' }} takeAvailableSpace>\n\t\t\t\t<Icon size=\"large\" icon=\"TagsMoreOutline\" /> <Padding right=\"large\" />\n\t\t\t\t<AccordionItem {...{ ...props, color: `${props.color}` }} height=\"2.5rem\" />\n\t\t\t</Row>\n\t\t</Dropdown>\n\t);\n};\n\nconst useGetTagsAccordion = (): TagsAccordionItems => {\n\tconst tagsFromStore = useTags();\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\tid: 'Tags',\n\t\t\tlabel: t('label.tags', 'Tags'),\n\t\t\tactive: false,\n\t\t\topen: false,\n\t\t\tonClick: (e: SyntheticEvent<Element, Event> | KeyboardEvent): void => {\n\t\t\t\te.stopPropagation();\n\t\t\t},\n\t\t\tCustomComponent: TagLabel,\n\t\t\titems: reduce(\n\t\t\t\ttagsFromStore,\n\t\t\t\t(acc: Array<ItemType>, v) => {\n\t\t\t\t\tconst item = {\n\t\t\t\t\t\tid: v.id,\n\t\t\t\t\t\titem: v,\n\t\t\t\t\t\tactive: false,\n\t\t\t\t\t\tcolor: v.color || 0,\n\t\t\t\t\t\tlabel: v.name,\n\t\t\t\t\t\tname: v.name,\n\t\t\t\t\t\topen: false,\n\t\t\t\t\t\tCustomComponent: CustomComp\n\t\t\t\t\t};\n\t\t\t\t\tacc.push(item);\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t)\n\t\t}),\n\t\t[tagsFromStore]\n\t);\n};\n\nexport default useGetTagsAccordion;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useMemo, useState } from 'react';\n\nimport { ThemeProvider } from '@mui/material';\nimport {\n\tAccordion,\n\tAccordionItemType,\n\tContainer,\n\tDivider,\n\tModalManager,\n\tSnackbarManager\n} from '@zextras/carbonio-design-system';\nimport { FOLDERS } from '@zextras/carbonio-shell-ui';\nimport { find, map, reject } from 'lodash';\n\nimport { CollapsedSidebarItem } from './collapsed-sidebar-items';\nimport { FoldersComponent } from './custom-components/folders-component';\nimport { SharesComponent } from './custom-components/shares-component';\nimport { addAllCalendarsItem } from './utils';\nimport { SidebarAccordionMui } from '../../carbonio-ui-commons/components/sidebar/sidebar-accordion-mui';\nimport { useRootsArray } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { themeMui } from '../../carbonio-ui-commons/theme/theme-mui';\nimport { Folder, LinkFolder } from '../../carbonio-ui-commons/types/folder';\nimport { SidebarProps } from '../../carbonio-ui-commons/types/sidebar';\nimport { hasId } from '../../carbonio-ui-commons/worker/handle-message';\nimport { SIDEBAR_ITEMS } from '../../constants/sidebar';\nimport useGetTagsAccordion from '../tags/use-get-tags-accordions';\n\ntype SidebarComponentProps = {\n\tfoldersAccordionItems: Folder[];\n\ttagsAccordionItems: AccordionItemType;\n};\n\nconst SidebarComponent: FC<SidebarComponentProps> = ({\n\tfoldersAccordionItems,\n\ttagsAccordionItems\n}) => {\n\tconst [selectedFolder, setSelectedFolder] = useState<string>('');\n\n\treturn (\n\t\t<Container orientation=\"vertical\" height=\"fit\" width=\"fill\">\n\t\t\t<SidebarAccordionMui\n\t\t\t\taccordions={foldersAccordionItems}\n\t\t\t\tfolderId={selectedFolder}\n\t\t\t\tlocalStorageName=\"open_calendars_folders\"\n\t\t\t\tAccordionCustomComponent={FoldersComponent}\n\t\t\t\tbuttonFindShares={<></>}\n\t\t\t\tsetSelectedFolder={setSelectedFolder}\n\t\t\t/>\n\t\t\t<Divider />\n\t\t\t<Accordion background=\"transparent\" items={[tagsAccordionItems]} />\n\t\t</Container>\n\t);\n};\nconst MemoSidebar: FC<SidebarComponentProps> = React.memo(SidebarComponent);\n\nconst addFindSharesItem = (foldersAccordionItems: Array<Folder>): Array<Folder> =>\n\tfoldersAccordionItems?.length > 0\n\t\t? [\n\t\t\t\t{\n\t\t\t\t\t...(foldersAccordionItems?.[0] ?? {}),\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t...(foldersAccordionItems?.[0]?.children ?? []),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'find_shares',\n\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tdisableHover: true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t...(reject(foldersAccordionItems, ['id', '1']) ?? [])\n\t\t\t]\n\t\t: [];\n\nconst useSidebarSortedFolders = (folders: Array<Folder>): Array<Folder> =>\n\tuseMemo(\n\t\t() =>\n\t\t\tmap(folders, (accountRoot) => {\n\t\t\t\tconst allCalendarFolder = find(accountRoot.children, (child) =>\n\t\t\t\t\thasId(child, SIDEBAR_ITEMS.ALL_CALENDAR)\n\t\t\t\t);\n\t\t\t\tconst calendar = find(accountRoot.children, (f) => hasId(f, FOLDERS.CALENDAR));\n\t\t\t\tconst trash = find(accountRoot.children, (f) => hasId(f, FOLDERS.TRASH));\n\t\t\t\tconst others = reject(\n\t\t\t\t\taccountRoot.children,\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\thasId(f, SIDEBAR_ITEMS.ALL_CALENDAR) ||\n\t\t\t\t\t\thasId(f, FOLDERS.CALENDAR) ||\n\t\t\t\t\t\thasId(f, FOLDERS.TRASH) ||\n\t\t\t\t\t\t(f as LinkFolder)?.broken === true\n\t\t\t\t);\n\t\t\t\treturn allCalendarFolder && calendar && trash\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...accountRoot,\n\t\t\t\t\t\t\tchildren: [allCalendarFolder, calendar, trash, ...others]\n\t\t\t\t\t\t}\n\t\t\t\t\t: accountRoot;\n\t\t\t}),\n\t\t[folders]\n\t);\n\nconst Sidebar: FC<SidebarProps> = ({ expanded }) => {\n\tconst folders = useRootsArray();\n\n\tconst foldersAccordionItems = useMemo(() => addAllCalendarsItem(folders), [folders]);\n\tconst folderAccordionItemsWithFindShares = useMemo(\n\t\t() => addFindSharesItem(foldersAccordionItems),\n\t\t[foldersAccordionItems]\n\t);\n\n\tconst tagsAccordionItems = useGetTagsAccordion();\n\n\tconst sortedFolders = useSidebarSortedFolders(folderAccordionItemsWithFindShares);\n\n\treturn (\n\t\t<ModalManager>\n\t\t\t<SnackbarManager>\n\t\t\t\t<ThemeProvider theme={themeMui}>\n\t\t\t\t\t{expanded ? (\n\t\t\t\t\t\t<MemoSidebar\n\t\t\t\t\t\t\tfoldersAccordionItems={sortedFolders}\n\t\t\t\t\t\t\ttagsAccordionItems={tagsAccordionItems}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tfoldersAccordionItems[0].children.map((folder) => (\n\t\t\t\t\t\t\t<CollapsedSidebarItem key={folder.id} item={folder} />\n\t\t\t\t\t\t))\n\t\t\t\t\t)}\n\t\t\t\t</ThemeProvider>\n\t\t\t</SnackbarManager>\n\t\t</ModalManager>\n\t);\n};\n\nexport default Sidebar;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { every, reject } from 'lodash';\n\nimport { isTrashOrNestedInIt } from '../../carbonio-ui-commons/store/zustand/folder/utils';\nimport { Folder } from '../../carbonio-ui-commons/types/folder';\nimport { SIDEBAR_ITEMS } from '../../constants/sidebar';\n\nexport function addAllCalendarsItem(folders: Array<Folder>): Array<Folder> {\n\treturn folders.map((folder) => {\n\t\tconst subItems = reject(folder.children, (c) => isTrashOrNestedInIt(c));\n\t\tconst allItems = {\n\t\t\tname: t('label.all_calendars', 'All calendars'),\n\t\t\tid: `${folder.id}:${SIDEBAR_ITEMS.ALL_CALENDAR}`,\n\t\t\tchildren: subItems,\n\t\t\tchecked: every(subItems, ['checked', true]),\n\t\t\tuuid: '',\n\t\t\tactivesyncdisabled: false,\n\t\t\trecursive: true,\n\t\t\tdeletable: false,\n\t\t\tisLink: false,\n\t\t\tdepth: 0,\n\t\t\treminder: false,\n\t\t\tbroken: false\n\t\t};\n\t\treturn folder?.children?.length > 0\n\t\t\t? { ...folder, children: [allItems, ...folder.children] }\n\t\t\t: folder;\n\t});\n}\n"],"names":["NoOpRequest","async","response","soapFetch","_jsns","Fault","error","Square","styled","displayName","componentId","theme","palette","gray2","regular","color","ColorContainer","Container","withConfig","TextUpperCase","Text","LabelFactory","selected","label","open","focus","React","orientation","width","crossAlignment","mainAlignment","borderRadius","background","padding","all","Row","takeAvailableSpace","left","size","Padding","right","CALENDARS_STANDARD_COLORS","Number","value","Icon","icon","style","alignSelf","NewModal","onClose","toggleModal","event","action","folderId","t","useTranslation","inputValue","setInputValue","useState","freeBusy","setFreeBusy","toggleFreeBusy","useCallback","c","colors","useMemo","el","index","toString","customComponent","height","selectedColor","setSelectedColor","createSnackbar","useSnackbar","root","useRoot","folders","useFoldersMapByRoot","id","folderArray","map","f","name","showDupWarning","includes","disabled","indexOf","length","onCloseModal","placeholder","ModalHeader","title","Input","backgroundColor","onChange","e","target","vertical","Select","parseInt","items","defaultSelection","Checkbox","onClick","ModalFooter","onConfirm","parent","excludeFreeBusy","res","folder","l","view","createFolderRequest","createCalendar","then","newCalendarRes","key","replace","type","autoHideTimeout","hideButton","inviteId","resource","destinationCalendarName","secondaryAction","secondaryLabel","hasId","calendar","FOLDERS","CollapsedSidebarItem","item","checked","dispatch","useAppDispatch","start","useRangeStart","end","useRangeEnd","query","useCheckedCalendarsQuery","getFolderIcon","iconColor","setCalendarColor","rgb","onIconClick","recursiveToggleCheck","Tooltip","placement","IconButton","customSize","iconSize","paddingSize","DeleteModal","top","bottom","overflow","isNestedInTrash","Trans","i18nKey","defaults","values","folderAction","op","FOLDER_OPERATIONS","actionLabel","onActionClick","EditModalContext","useEditModalContext","editModalContext","useContext","Error","GranteeChip","grant","roleOptions","role","find","perm","publicLabel","gt","SHARE_USER_TYPE","d","zid","Chip","maxWidth","sendShareCalendarNotification","createAsyncThunk","Promise","data","contacts","contact","fetch","method","headers","body","accounts","email","standardMessage","resData","json","EditPermissionModal","onGoBack","sendNotification","setSendNotification","setStandardMessage","useUserAccounts","shareWithUserRole","setShareWithUserRole","allowToSeePrivateAppointment","setAllowToSeePrivateAppointment","onShareRoleChange","shareRole","defaultChecked","prevValue","disablePortal","findLabel","ev","weight","grants","inh","pw","res2","StyledContainer","colorName","squareColor","MainEditModal","totalAppointments","allCalendars","useFoldersMap","setModal","setActiveGrant","getStatusItems","defaultFreeBusy","test","defaultFolderName","defaultColor","folderName","setFolderName","isNotACalendarFolderAndIsNotASystemFolder","FOLDER_VIEW","toLowerCase","onSelectedColorChange","newColor","newResult","actionRename","undefined","actionColor","actionFreeBusy","actionsArray","compact","actions","onShare","onRevoke","onResend","onEdit","overflowY","showCloseIcon","Divider","ModalBody","defaultValue","isEmpty","acl","isLink","owner","minHeight","maxHeight","Button","horizontal","confirmLabel","confirmDisabled","onSecondaryAction","secondaryActionLabel","ShareRevokeModal","tooltipLabel","PUBLIC_SHARE_ZID","tooltip","SharePrivateCheckbox","allowToSeePrvtAppt","setAllowToSeePrvtAppt","privateInfoTooltipLabel","UserShare","shareWithUserType","closeFn","ContactInput","integrationAvailable","useIntegratedComponent","setshareWithUserRole","setContacts","some","shareCalendarRoleOptions","ShareCalendarRoleOptions","onContactInputChange","granted","ChipInput","hasError","address","dropdownWidth","dropdownMaxWidth","PublicShare","ShareCalendarModal","shareCalendarWithOptions","ShareCalendarWithOptions","setShareWithUserType","onShareWithChange","shareWith","EditModal","activeGrant","modal","useFolder","getShareCalendarRoleOptions","canViewPrivateAppointment","useEffect","updateFolder","getUpdateFolder","getFolderRequest","Provider","n","Object","keys","SvgContainer","isHovered","viewBox","fill","xmlns","stroke","strokeWidth","UrlColumn","onUrlCopied","setIsHovered","onMouseEnter","onMouseLeave","ShareCalendarUrl","isFromEditModal","text","getUrl","user","domain","window","location","hostname","navigator","clipboard","writeText","EmptyModal","recursive","ShareInfoRow","SharesInfoModal","concat","createMountpoint","CreateMountpointRequest","links","link","of","ownerName","rid","ownerId","batchRequest","ContainerEl","CustomItem","setChecked","setLinks","filter","v","uniqWith","isEqual","AccordionItem","SharesModal","calendars","setData","payload","CreateMountpointResponse","failsLength","totalLength","failed","total","shared","granteeType","granteeName","getFolderTranslatedName","last","split","folderPath","CustomComponent","filteredFolders","groupBy","nestedData","level","components","bold","fontWeight","fontFamily","fontSize","filterResults","pickBy","startsWith","toLower","CustomIcon","hasFocus","Accordion","newCalendar","createModal","stopPropagation","closeModal","children","StoreProvider","moveToRoot","getRoot","isTrashOrNestedInIt","emptyTrash","editCalendar","deleteCalendar","removeFromList","sharesInfo","shareCalendarUrl","ShareCalendarUrlModal","findShares","result","includeSelf","resolve","isFulfilled","share","getShareInfoRequest","resCalendars","exportCalendarICSFn","dateFormat","moment","format","downloadICS","uri","document","createElement","download","href","appendChild","click","removeChild","lowerCase","noPermissionLabel","newCalendarItem","FOLDER_ACTIONS","SIDEBAR_ITEMS","moveToRootItem","depth","isLinkChild","emptyTrashItem","isNil","editCalendarItem","deleteCalendarItem","removeFromListItem","sharesInfoItem","shareCalendarUrlItem","findSharesItem","isMainRootChild","exportAppointmentICSItem","importCalendarICSItem","ref","current","FittedRow","sizes","small","FileInput","ContextMenuItem","inputRef","isAllCalendar","useCalendarActions","useModal","Dropdown","contextMenu","display","RowWithIcon","tooltipText","RootChildren","accordionItem","useRef","useUserAccount","rootAccountId","getRootAccountId","sharedStatusIcon","count","defaultValue_one","userMail","ROOT_NAME","confirmModal","files","calendarName","file","importCalendarICSFn","status","onFileInputChange","fileName","accept","RootAccount","Avatar","colorLabel","FoldersComponent","isRootAccount","isRoot","textProps","broken","createTheme","currentColor","hover","active","transparent","primary","main","secondary","header","highlight","gray0","gray1","gray3","gray4","gray5","gray6","warning","success","info","avatarColors","avatar_1","avatar_2","avatar_3","avatar_4","avatar_5","avatar_6","avatar_7","avatar_8","avatar_9","avatar_10","avatar_11","avatar_12","avatar_13","avatar_14","avatar_15","avatar_16","avatar_17","avatar_18","avatar_19","avatar_20","avatar_21","avatar_22","avatar_23","avatar_24","avatar_25","avatar_26","avatar_27","avatar_28","avatar_29","avatar_30","avatar_31","avatar_32","avatar_33","avatar_34","avatar_35","avatar_36","avatar_37","avatar_38","avatar_39","avatar_40","avatar_41","avatar_42","avatar_43","avatar_44","avatar_45","avatar_46","avatar_47","avatar_48","avatar_49","avatar_50","themeMui","MuiSvgIcon","styleOverrides","MuiAccordionSummary","margin","justifyContent","content","MuiAccordionDetails","MuiButtonBase","MuiPaper","borderBottomLeftRadius","borderTopLeftRadius","borderBottomRightRadius","borderTopRightRadius","MuiAccordion","boxShadow","SidebarAccordionMui","accordions","localStorageName","AccordionCustomComponent","setSelectedFolder","buttonFindShares","initialExpanded","openIds","setOpenIds","useLocalStorage","sidebarRef","accordion","expanded","state","disableGutters","TransitionProps","unmountOnExit","AccordionSummary","expandIcon","ExpandMoreIcon","preventDefault","sx","FOREGROUND_COLOR","AccordionDetails","CustomComp","props","useGetTagsActions","tag","triggerSearch","runSearch","avatarBackground","ZIMBRA_STANDARD_COLORS","hex","avatarIcon","hasAvatar","_extends","TagLabel","createTag","SidebarComponent","foldersAccordionItems","tagsAccordionItems","selectedFolder","MemoSidebar","Sidebar","useRootsArray","subItems","reject","allItems","every","uuid","activesyncdisabled","deletable","reminder","addAllCalendarsItem","folderAccordionItemsWithFindShares","disableHover","addFindSharesItem","useGetTagsAccordion","tagsFromStore","useTags","reduce","acc","push","sortedFolders","accountRoot","allCalendarFolder","child","trash","others","useSidebarSortedFolders","ModalManager","SnackbarManager","ThemeProvider"],"sourceRoot":""}