{"version":3,"file":"calendar-edit.3527ac8b.chunk.js","mappings":"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","sources":["webpack://carbonio-calendars-ui/./src/carbonio-ui-commons/utils/use-prefs.ts","webpack://carbonio-calendars-ui/./src/store/actions/new-create-appointment.ts","webpack://carbonio-calendars-ui/./src/commons/editor-save-send-fns.ts","webpack://carbonio-calendars-ui/./src/commons/upload-parts.ts","webpack://carbonio-calendars-ui/./src/utils/work-week.ts","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-styled-components.tsx","webpack://carbonio-calendars-ui/./src/view/editor/editor-util-hooks/use-get-public-url.jsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-attachments-button.tsx","webpack://carbonio-calendars-ui/./src/view/editor/editor-util-hooks/use-get-drive-files.jsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-richtext-button.tsx","webpack://carbonio-calendars-ui/./src/view/modals/series-edit-warning-modal.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-save-button.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-send-button.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-actions.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-allday-checkbox.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-attachments.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-attendees.tsx","webpack://carbonio-calendars-ui/./src/carbonio-ui-commons/helpers/identities.ts","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-calendar-selector.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-composer.tsx","webpack://carbonio-calendars-ui/./src/commons/end-date-picker.jsx","webpack://carbonio-calendars-ui/./src/commons/start-date-picker.jsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-date-picker.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-resource-component.tsx","webpack://carbonio-calendars-ui/./src/soap/search-resources.ts","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-equipments.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-free-busy-selector.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-location.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-meeting-rooms.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-organizer.tsx","webpack://carbonio-calendars-ui/./src/hooks/use-idenity-items.ts","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-private-checkbox.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-reminder.tsx","webpack://carbonio-calendars-ui/./src/soap/search-calendar-resources-request.ts","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-resources-controller.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-summary.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-time-zone.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-title.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/editor-virtual-room.tsx","webpack://carbonio-calendars-ui/./src/constants/recurrence.ts","webpack://carbonio-calendars-ui/./src/commons/recurrence-context.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/components/interval-input.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/views/daily-options.tsx","webpack://carbonio-calendars-ui/./src/commons/use-recurrence-items.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/components/monthly-day-input.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/components/ordinal-number-select.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/components/weekday-select.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/views/monthly-options.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/views/recurrence-end-options.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/components/weekday-checkboxes.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/views/weekly-options.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/components/month-select.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/views/yearly-options.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/components/frequency-select.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/views/custom-recurrence-modal.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/components/custom-repeat.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/components/repeat-item-component.tsx","webpack://carbonio-calendars-ui/./src/view/editor/parts/recurrence/views/editor-recurrence.tsx","webpack://carbonio-calendars-ui/./src/view/editor/editor-panel.tsx","webpack://carbonio-calendars-ui/./src/view/editor/editor-board-wrapper.tsx","webpack://carbonio-calendars-ui/./src/commons/file-preview.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/attachments-part.tsx"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useUserSettings } from '@zextras/carbonio-shell-ui';\n\nimport type { UserPrefs } from '../types';\n\nexport const usePrefs = (): UserPrefs => {\n\tconst { prefs } = useUserSettings();\n\treturn <UserPrefs>prefs;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport { soapFetch } from '@zextras/carbonio-shell-ui';\n\nimport { normalizeSoapMessageFromEditor } from '../../normalizations/normalize-soap-message-from-editor';\n\n// todo: this thunk is not using redux! convert to regular async function\nexport const createAppointment = createAsyncThunk(\n\t'appointment/create new appointment',\n\tasync ({ draft, editor }: any, { rejectWithValue }: any): Promise<any> => {\n\t\tif (editor) {\n\t\t\tconst body = normalizeSoapMessageFromEditor({ ...editor, draft });\n\t\t\tconst res: { calItemId: string; invId: string } = await soapFetch('CreateAppointment', body);\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\tconst response = res?.Fault ? { ...res.Fault, error: true } : res;\n\t\t\tif (response?.error) {\n\t\t\t\treturn rejectWithValue(response);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tresponse: res,\n\t\t\t\teditor: {\n\t\t\t\t\t...editor,\n\t\t\t\t\tisNew: false,\n\t\t\t\t\tisSeries: !!editor.recur,\n\t\t\t\t\tisInstance: !editor.recur,\n\t\t\t\t\tisException: false,\n\t\t\t\t\tinviteId: res.invId\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n);\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { createAppointment } from '../store/actions/new-create-appointment';\nimport { modifyAppointment } from '../store/actions/new-modify-appointment';\nimport { proposeNewTime } from '../store/actions/propose-new-time';\nimport { AppDispatch } from '../store/redux';\nimport { updateEditor } from '../store/slices/editor-slice';\nimport { Editor } from '../types/editor';\n\nconst createAppointmentFn = ({\n\tdraft,\n\teditor,\n\tdispatch\n}: {\n\tdraft: boolean;\n\teditor: Editor;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\tdispatch(createAppointment({ draft, editor })).then(({ payload }) => {\n\t\tconst { response } = payload;\n\t\tif (payload?.response) {\n\t\t\tdispatch(updateEditor({ id: payload.editor.id, editor: payload.editor }));\n\t\t}\n\t\treturn Promise.resolve({ response, editor: payload.editor });\n\t});\n\nconst modifyAppointmentFn = ({\n\tdraft,\n\teditor,\n\tdispatch\n}: {\n\tdraft: boolean;\n\teditor: Editor;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\tdispatch(modifyAppointment({ draft, editor })).then(({ payload }) => {\n\t\tconst { response, error } = payload;\n\t\tif (response && !error) {\n\t\t\tdispatch(updateEditor({ id: payload.editor.id, editor: payload.editor }));\n\t\t\treturn Promise.resolve({ response, editor: payload.editor });\n\t\t}\n\t\treturn Promise.resolve(payload);\n\t});\n\nconst onProposeNewTime = async ({\n\teditorId,\n\tdispatch\n}: {\n\teditorId: string;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\tdispatch(proposeNewTime({ id: editorId })).then(({ payload }) => {\n\t\tif (payload) {\n\t\t\tconst { response, editor, error } = payload;\n\t\t\tif (response && !error) {\n\t\t\t\tdispatch(updateEditor({ id: editorId, editor }));\n\t\t\t\treturn Promise.resolve({ response, editor });\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve(payload);\n\t});\n\nexport const onSave = ({\n\tdraft = true,\n\tisNew = true,\n\teditor,\n\tdispatch\n}: {\n\tdraft?: boolean;\n\tisNew?: boolean;\n\teditor: Editor;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\tisNew\n\t\t? createAppointmentFn({ draft, editor, dispatch })\n\t\t: modifyAppointmentFn({ draft, editor, dispatch });\n\nexport const onSend = ({\n\tisNew,\n\teditor,\n\tdispatch\n}: {\n\tisNew: boolean;\n\teditor: Editor;\n\tdispatch: AppDispatch;\n}): Promise<any> =>\n\teditor?.isProposeNewTime\n\t\t? onProposeNewTime({ editorId: editor.id, dispatch })\n\t\t: onSave({ draft: false, isNew, editor, dispatch });\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { map } from 'lodash';\n\nimport { convertToDecimal } from './utilities';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const uploadParts = async (files: any): Promise<any> =>\n\tPromise.all(\n\t\tmap(files, (file) =>\n\t\t\tfetch('/service/upload?fmt=extended,raw', {\n\t\t\t\theaders: {\n\t\t\t\t\t'Cache-Control': 'no-cache',\n\t\t\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t\t\t'Content-Type': `${file.type || 'application/octet-stream'};`,\n\t\t\t\t\t'Content-Disposition': `attachment; filename=\"${convertToDecimal(file.name)}\"`\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: file\n\t\t\t})\n\t\t\t\t.then((res) => res.text())\n\t\t\t\t// eslint-disable-next-line no-eval\n\t\t\t\t.then((txt) => eval(`[${txt}]`))\n\t\t\t\t.then((val) => val[2][0])\n\t\t)\n\t);\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { map, sortBy } from 'lodash';\n\nexport interface WorkWeekDay {\n\tday: string;\n\tworking: boolean;\n\tstart: string;\n\tend: string;\n}\n\nexport const workWeek = (zimbraPrefCalendarWorkingHours: string): WorkWeekDay[] =>\n\tsortBy(\n\t\tmap(\n\t\t\tzimbraPrefCalendarWorkingHours?.split(','),\n\t\t\t(t: string): WorkWeekDay =>\n\t\t\t\t({\n\t\t\t\t\tday: t.split(':')[0],\n\t\t\t\t\tworking: t.split(':')[1] !== 'N',\n\t\t\t\t\tstart: t.split(':')[2],\n\t\t\t\t\tend: t.split(':')[3]\n\t\t\t\t}) as WorkWeekDay\n\t\t),\n\t\t'day'\n\t);\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { IconCheckbox } from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\n\nexport const ResizedIconCheckbox = styled(IconCheckbox)`\n\t[class^='Padding__Comp'] {\n\t\tpadding: 0.375rem;\n\t\tsvg {\n\t\t\theight: 1.25rem;\n\t\t\twidth: 1.25rem;\n\t\t\tfill: ${({ disabled, theme, value }): string => {\n\t\t\t\tif (disabled) {\n\t\t\t\t\treturn theme.palette.secondary.disabled;\n\t\t\t\t}\n\t\t\t\treturn value ? theme.palette.gray6.regular : theme.palette.currentColor.regular;\n\t\t\t}}\n\t\tbackground: ${({ value, theme }): string =>\n\t\t\tvalue ? theme.palette.primary.regular : theme.palette.currentColor.regular};\n\t\tborder-radius: 50%;\n\t}\n`;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useCallback, useMemo } from 'react';\n\nimport { useSnackbar } from '@zextras/carbonio-design-system';\nimport { t, useIntegratedFunction } from '@zextras/carbonio-shell-ui';\nimport { filter, map } from 'lodash';\nimport moment from 'moment';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditorPlainText,\n\tselectEditorRichText,\n\tselectEditorTitle\n} from '../../../store/selectors/editor';\nimport { editEditorText } from '../../../store/slices/editor-slice';\n\nexport const useGetPublicUrl = ({ editorId }) => {\n\tconst [getLink, getLinkAvailable] = useIntegratedFunction('get-link');\n\tconst createSnackbar = useSnackbar();\n\tconst richText = useAppSelector(selectEditorRichText(editorId));\n\tconst plainText = useAppSelector(selectEditorPlainText(editorId));\n\tconst title = useAppSelector(selectEditorTitle(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst description = useMemo(\n\t\t() =>\n\t\t\tt('label.public_link_description', {\n\t\t\t\ttitle,\n\t\t\t\tdate: moment().format('yyyy-MM-DD_hh:mm'),\n\t\t\t\tdefaultValue: 'Generated from {{title}} on {{date}}'\n\t\t\t}),\n\t\t[title]\n\t);\n\tconst getPublicUrl = useCallback(\n\t\t(nodes) => {\n\t\t\tconst promises = map(nodes, (node) => getLink({ node, type: 'createLink', description }));\n\n\t\t\tPromise.allSettled(promises).then((res) => {\n\t\t\t\tconst success = filter(res, ['status', 'fulfilled']);\n\t\t\t\tconst allSuccess = res.length === success?.length;\n\t\t\t\tconst allFails = res.length === filter(res, ['status', 'rejected'])?.length;\n\t\t\t\tconst type = allSuccess ? 'info' : 'warning';\n\t\t\t\t// eslint-disable-next-line no-nested-ternary\n\t\t\t\tconst label = allSuccess\n\t\t\t\t\t? t('message.snackbar.all_link_copied', 'Public link copied successfully')\n\t\t\t\t\t: allFails\n\t\t\t\t\t\t? t(\n\t\t\t\t\t\t\t\t'message.snackbar.link_copying_error',\n\t\t\t\t\t\t\t\t'There seems to be a problem while generating public link, please try again'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t: t(\n\t\t\t\t\t\t\t\t'message.snackbar.some_link_copying_error',\n\t\t\t\t\t\t\t\t'There seems to be a problem while generating public url for some files, please try again'\n\t\t\t\t\t\t\t);\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `public-link`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype,\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel,\n\t\t\t\t\tautoHideTimeout: 4000\n\t\t\t\t});\n\n\t\t\t\tconst newText = [\n\t\t\t\t\tmap(success, (i) => i.value.url)\n\t\t\t\t\t\t.join('\\n')\n\t\t\t\t\t\t.concat(`\\n${plainText}`),\n\t\t\t\t\t` ${map(success, (i) => `<p><a href=\"${i.value.url}\"> ${i.value.url}</a></p>`).join(\n\t\t\t\t\t\t''\n\t\t\t\t\t)}`.concat(richText)\n\t\t\t\t];\n\t\t\t\tdispatch(editEditorText({ id: editorId, richText: newText[0], plainText: newText[1] }));\n\t\t\t});\n\t\t},\n\t\t[getLink, description, createSnackbar, plainText, richText, dispatch, editorId]\n\t);\n\treturn [getPublicUrl, getLinkAvailable];\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useRef, useState } from 'react';\n\nimport { Dropdown, Icon, Padding, Text, Tooltip } from '@zextras/carbonio-design-system';\nimport { getIntegratedFunction, t } from '@zextras/carbonio-shell-ui';\nimport { map, union } from 'lodash';\nimport styled from 'styled-components';\n\nimport { ResizedIconCheckbox } from './editor-styled-components';\nimport { uploadParts } from '../../../commons/upload-parts';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditorAttach,\n\tselectEditorAttachmentAid,\n\tselectEditorAttachmentFiles,\n\tselectEditorDisabled\n} from '../../../store/selectors/editor';\nimport { editEditorAttachments } from '../../../store/slices/editor-slice';\nimport { EditorProps } from '../../../types/editor';\nimport { useGetFilesFromDrive } from '../editor-util-hooks/use-get-drive-files';\nimport { useGetPublicUrl } from '../editor-util-hooks/use-get-public-url';\n\nconst FileInput = styled.input`\n\tdisplay: none;\n`;\n\nexport const addAttachments = async (\n\teditorId: string,\n\t// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\tparts: any,\n\tfiles: FileList\n): Promise<{ payload: any; mp: any; files: any }> => {\n\tconst res = await uploadParts(files);\n\treturn { payload: res, mp: parts, files };\n};\n\nexport const EditorAttachmentsButton = ({ editorId }: EditorProps): ReactElement => {\n\tconst inputRef = useRef<HTMLInputElement | null>(null);\n\tconst [openDD, setOpenDD] = useState(false);\n\tconst attachmentFiles = useAppSelector(selectEditorAttachmentFiles(editorId));\n\tconst attachAid = useAppSelector(selectEditorAttachmentAid(editorId));\n\tconst parts = useAppSelector(selectEditorAttach(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst onFileClick = useCallback(() => {\n\t\tsetOpenDD(false);\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.click();\n\t\t}\n\t}, []);\n\n\tconst [getLink, getLinkAvailable] = useGetPublicUrl({\n\t\teditorId\n\t});\n\n\tconst [getFilesFromDrive, getFilesAvailable] = useGetFilesFromDrive({ editorId });\n\n\tconst actionURLTarget = useMemo(\n\t\t() => ({\n\t\t\ttitle: t('label.choose_file', 'Choose file'),\n\t\t\tconfirmAction: getLink,\n\t\t\tconfirmLabel: t('label.share_public_link', 'Share Public Link'),\n\t\t\tallowFiles: true,\n\t\t\tallowFolders: false\n\t\t}),\n\t\t[getLink]\n\t);\n\n\tconst [getFilesAction, getFilesActionAvailable] = getIntegratedFunction('select-nodes');\n\tconst publicUrlItem = useMemo(\n\t\t() => ({\n\t\t\tlabel: t('composer.attachment.url', 'Add public link from Files'),\n\t\t\ticon: 'Link2',\n\t\t\tid: 'carbonio_files_action_link',\n\t\t\tdisabled: !getFilesActionAvailable || !getLinkAvailable,\n\t\t\tonClick: (): void => {\n\t\t\t\tsetOpenDD(false);\n\t\t\t\tgetFilesAction && getFilesAction(actionURLTarget);\n\t\t\t}\n\t\t}),\n\t\t[actionURLTarget, getFilesAction, getFilesActionAvailable, getLinkAvailable]\n\t);\n\n\tconst actionTarget = useMemo(\n\t\t() => ({\n\t\t\ttitle: t('label.choose_file', 'Choose file'),\n\t\t\tconfirmAction: getFilesFromDrive,\n\t\t\tconfirmLabel: t('label.select', 'Select'),\n\t\t\tallowFiles: true,\n\t\t\tallowFolders: false\n\t\t}),\n\t\t[getFilesFromDrive]\n\t);\n\n\tconst addFileItem = useMemo(\n\t\t() => ({\n\t\t\tlabel: t('composer.attachment.files', 'Add from Files'),\n\t\t\ticon: 'DriveOutline',\n\t\t\tid: 'carbonio_files_action',\n\t\t\tdisabled: !getFilesActionAvailable || !getFilesAvailable,\n\t\t\tonClick: (): void => {\n\t\t\t\tsetOpenDD(false);\n\t\t\t\tgetFilesAction && getFilesAction(actionTarget);\n\t\t\t}\n\t\t}),\n\t\t[actionTarget, getFilesAction, getFilesActionAvailable, getFilesAvailable]\n\t);\n\n\tconst attachmentsItems = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tid: 'localAttachment',\n\t\t\t\ticon: 'MonitorOutline',\n\t\t\t\tlabel: t('composer.attachment.local', 'Add from local'),\n\t\t\t\tonClick: onFileClick,\n\t\t\t\tcustomComponent: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Icon icon=\"MonitorOutline\" size=\"medium\" />\n\t\t\t\t\t\t<Padding horizontal=\"extrasmall\" />\n\t\t\t\t\t\t<Text>{t('composer.attachment.local', 'Add from local')}</Text>\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\t},\n\t\t\t{\n\t\t\t\t...addFileItem,\n\t\t\t\tid: addFileItem.id ?? ''\n\t\t\t},\n\t\t\t{\n\t\t\t\t...publicUrlItem,\n\t\t\t\tid: publicUrlItem.id ?? ''\n\t\t\t}\n\t\t],\n\t\t[onFileClick, addFileItem, publicUrlItem]\n\t);\n\n\tconst onChange = useCallback((): void => {\n\t\tif (inputRef?.current?.files) {\n\t\t\taddAttachments(editorId, parts, inputRef.current.files).then(({ payload, mp }) => {\n\t\t\t\tconst attachments = map(payload, (file) => ({\n\t\t\t\t\tcontentType: file.ct,\n\t\t\t\t\tdisposition: 'attachment',\n\t\t\t\t\tfilename: file.filename,\n\t\t\t\t\tname: undefined,\n\t\t\t\t\tsize: file.s,\n\t\t\t\t\taid: file.aid\n\t\t\t\t}));\n\t\t\t\tconst attachmentFilesArr = [...(attachmentFiles ?? []), ...attachments];\n\t\t\t\tdispatch(\n\t\t\t\t\teditEditorAttachments({\n\t\t\t\t\t\tid: editorId,\n\t\t\t\t\t\tattach: {\n\t\t\t\t\t\t\taid: union(\n\t\t\t\t\t\t\t\tattachAid,\n\t\t\t\t\t\t\t\tmap(payload, (el) => el.aid)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tmp\n\t\t\t\t\t\t},\n\t\t\t\t\t\tattachmentFiles: attachmentFilesArr\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}, [editorId, parts, attachmentFiles, dispatch, attachAid]);\n\n\treturn (\n\t\t<>\n\t\t\t<Tooltip label={t('tooltip.add_attachments', 'Add attachments')}>\n\t\t\t\t<Dropdown items={attachmentsItems} display=\"inline-block\" width=\"fit\" forceOpen={openDD}>\n\t\t\t\t\t<ResizedIconCheckbox\n\t\t\t\t\t\tonChange={(): null => null}\n\t\t\t\t\t\ticon=\"AttachOutline\"\n\t\t\t\t\t\tonClick={(): void => setOpenDD(!openDD)}\n\t\t\t\t\t\tvalue={openDD}\n\t\t\t\t\t\tdisabled={disabled?.attachmentsButton}\n\t\t\t\t\t/>\n\t\t\t\t</Dropdown>\n\t\t\t</Tooltip>\n\t\t\t<FileInput type=\"file\" ref={inputRef} onChange={onChange} multiple />\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useCallback } from 'react';\n\nimport { useSnackbar } from '@zextras/carbonio-design-system';\nimport { t, useIntegratedFunction } from '@zextras/carbonio-shell-ui';\nimport { filter, map } from 'lodash';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorAttach, selectEditorAttachmentFiles } from '../../../store/selectors/editor';\nimport { editEditorAttachments } from '../../../store/slices/editor-slice';\n\nexport const uploadToFiles = async (node, uploadTo) => {\n\tconst upload = await uploadTo({ nodeId: node.id, targetModule: 'CALENDARS' });\n\treturn {\n\t\tres: upload,\n\t\tnode\n\t};\n};\n\nexport const useGetFilesFromDrive = ({ editorId }) => {\n\tconst createSnackbar = useSnackbar();\n\tconst attachmentFiles = useAppSelector(selectEditorAttachmentFiles(editorId));\n\tconst parts = useAppSelector(selectEditorAttach(editorId));\n\tconst [uploadTo, isAvailable] = useIntegratedFunction('upload-to-target-and-get-target-id');\n\tconst dispatch = useAppDispatch();\n\n\tconst confirmAction = useCallback(\n\t\t(nodes) => {\n\t\t\tconst promises = map(nodes, (node) => uploadToFiles(node, uploadTo));\n\t\t\tif (isAvailable) {\n\t\t\t\tPromise.allSettled(promises).then((res) => {\n\t\t\t\t\tconst success = filter(res, ['status', 'fulfilled']);\n\t\t\t\t\tconst allSuccess = res.length === success?.length;\n\t\t\t\t\tconst allFails = res.length === filter(res, ['status', 'rejected'])?.length;\n\t\t\t\t\tconst type = allSuccess ? 'info' : 'warning';\n\t\t\t\t\t// eslint-disable-next-line no-nested-ternary\n\t\t\t\t\tconst label = allSuccess\n\t\t\t\t\t\t? t('message.snackbar.all_att_added', 'Attachments added successfully')\n\t\t\t\t\t\t: allFails\n\t\t\t\t\t\t\t? t(\n\t\t\t\t\t\t\t\t\t'message.snackbar.att_err_adding',\n\t\t\t\t\t\t\t\t\t'There seems to be a problem when adding attachments, please try again'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: t(\n\t\t\t\t\t\t\t\t\t'message.snackbar.some_att_add_fails',\n\t\t\t\t\t\t\t\t\t'There seems to be a problem when adding some attachments, please try again'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `calendar-moved-root`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel,\n\t\t\t\t\t\tautoHideTimeout: 4000\n\t\t\t\t\t});\n\t\t\t\t\tconst attachments = map(success, (file) => ({\n\t\t\t\t\t\tcontentType: file.value.node.mime_type,\n\t\t\t\t\t\tdisposition: 'attachment',\n\t\t\t\t\t\tfilename: file.value.node.name,\n\t\t\t\t\t\tname: undefined,\n\t\t\t\t\t\tsize: file.value.node.size,\n\t\t\t\t\t\taid: file.value.res.attachmentId\n\t\t\t\t\t}));\n\t\t\t\t\tconst attachmentFilesArr = [...(attachmentFiles ?? []), ...attachments];\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\teditEditorAttachments({\n\t\t\t\t\t\t\tid: editorId,\n\t\t\t\t\t\t\tattach: { aid: map(success, (i) => i.value.res.attachmentId), mp: parts },\n\t\t\t\t\t\t\tattachmentFIles: attachmentFilesArr\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[attachmentFiles, createSnackbar, dispatch, editorId, isAvailable, parts, uploadTo]\n\t);\n\treturn [confirmAction, isAvailable];\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Tooltip } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\n\nimport { ResizedIconCheckbox } from './editor-styled-components';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorDisabled, selectEditorIsRichText } from '../../../store/selectors/editor';\nimport { editIsRichText } from '../../../store/slices/editor-slice';\n\nexport const EditorRichTextButton = ({ editorId }: { editorId: string }): ReactElement => {\n\tconst isRichText = useAppSelector(selectEditorIsRichText(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst onClick = useCallback(() => {\n\t\tdispatch(editIsRichText({ id: editorId, isRichText: !isRichText }));\n\t}, [dispatch, editorId, isRichText]);\n\n\treturn (\n\t\t<Tooltip label={t('tooltip.enable_disable_rich_text', 'Enable/Disable rich text editor')}>\n\t\t\t<ResizedIconCheckbox\n\t\t\t\ticon=\"Text\"\n\t\t\t\tvalue={isRichText}\n\t\t\t\tonClick={onClick}\n\t\t\t\tonChange={(): null => null}\n\t\t\t\tdisabled={disabled?.richTextButton}\n\t\t\t/>\n\t\t</Tooltip>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useMemo } from 'react';\n\nimport { Container, Text, useSnackbar } from '@zextras/carbonio-design-system';\nimport { closeBoard, useBoard, t } from '@zextras/carbonio-shell-ui';\n\nimport ModalFooter from '../../commons/modal-footer';\nimport { ModalHeader } from '../../commons/modal-header';\nimport { useAppDispatch, useAppSelector } from '../../store/redux/hooks';\nimport {\n\tselectEditorAttendees,\n\tselectEditorEquipment,\n\tselectEditorMeetingRoom\n} from '../../store/selectors/editor';\nimport { Editor } from '../../types/editor';\n\ntype ModalProps = {\n\tonClose: () => void;\n\taction: any;\n\tisNew?: boolean;\n\tisSending?: boolean;\n\teditorId: string;\n\teditor: Editor;\n};\n\nexport const SeriesEditWarningModal = ({\n\tonClose,\n\taction,\n\tisSending = false,\n\tisNew,\n\teditorId,\n\teditor\n}: ModalProps): JSX.Element => {\n\tconst message = useMemo(\n\t\t() =>\n\t\t\tt(\n\t\t\t\t'message.edit_series_warning',\n\t\t\t\t'As you proceed with the series modification, all previously deleted or modified instances will be restored with the new series settings.'\n\t\t\t),\n\t\t[]\n\t);\n\n\tconst board = useBoard();\n\tconst attendeesLength = useAppSelector(selectEditorAttendees(editorId))?.length;\n\tconst meetingRoomLength = useAppSelector(selectEditorMeetingRoom(editorId))?.length;\n\tconst equipmentsLength = useAppSelector(selectEditorEquipment(editorId))?.length;\n\tconst dispatch = useAppDispatch();\n\tconst createSnackbar = useSnackbar();\n\n\tconst title = useMemo(() => t('label.warning', 'Warning'), []);\n\tconst label = useMemo(() => t('label.continue', 'Continue'), []);\n\tconst secondaryActionLabel = useMemo(() => t('label.discard_changes', 'Discard Changes'), []);\n\n\tconst onConfirm = useCallback(() => {\n\t\tisSending\n\t\t\t? action({ isNew, editor, dispatch }).then(({ response }: any) => {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `calendar-moved-root`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: response ? 'info' : 'warning',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: !response\n\t\t\t\t\t\t\t? t('label.error_try_again', 'Something went wrong, please try again')\n\t\t\t\t\t\t\t: t('message.appointment_invitation_sent', 'Appointment invitation sent'),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t\tonClose();\n\t\t\t\t})\n\t\t\t: action({\n\t\t\t\t\tdraft: !!attendeesLength || !!meetingRoomLength || !!equipmentsLength,\n\t\t\t\t\tisNew,\n\t\t\t\t\teditor,\n\t\t\t\t\tdispatch\n\t\t\t\t}).then(({ response }: any) => {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `calendar-moved-root`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: response ? 'info' : 'warning',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: !response\n\t\t\t\t\t\t\t? t('label.error_try_again', 'Something went wrong, please try again')\n\t\t\t\t\t\t\t: t('message.snackbar.calendar_edits_saved', 'Edits saved correctly'),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t\tonClose();\n\t\t\t\t});\n\t}, [\n\t\taction,\n\t\tattendeesLength,\n\t\tcreateSnackbar,\n\t\tdispatch,\n\t\teditor,\n\t\tequipmentsLength,\n\t\tisNew,\n\t\tisSending,\n\t\tmeetingRoomLength,\n\t\tonClose\n\t]);\n\n\tconst onDiscard = useCallback(() => {\n\t\tonClose();\n\t\tif (board) {\n\t\t\tcloseBoard(board?.id);\n\t\t}\n\t}, [board, onClose]);\n\treturn (\n\t\t<Container\n\t\t\tpadding={{ all: 'large' }}\n\t\t\tmainAlignment=\"center\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t>\n\t\t\t<ModalHeader title={title} onClose={onClose} />\n\t\t\t<Container padding={{ top: 'large', bottom: 'large' }} crossAlignment=\"flex-start\">\n\t\t\t\t<Text overflow=\"break-word\">{message}</Text>\n\t\t\t</Container>\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tlabel={label}\n\t\t\t\tsecondaryAction={onDiscard}\n\t\t\t\tsecondaryLabel={secondaryActionLabel}\n\t\t\t\tsecondaryBtnType=\"outlined\"\n\t\t\t\tsecondaryColor=\"primary\"\n\t\t\t\tadditionalAction={onClose}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Button, useModal, useSnackbar } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport { onSave } from '../../../commons/editor-save-send-fns';\nimport { StoreProvider } from '../../../store/redux';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditor,\n\tselectEditorAttendees,\n\tselectEditorDisabled,\n\tselectEditorEquipment,\n\tselectEditorIsNew,\n\tselectEditorMeetingRoom,\n\tselectEditorTitle\n} from '../../../store/selectors/editor';\nimport { EditorProps } from '../../../types/editor';\nimport { SeriesEditWarningModal } from '../../modals/series-edit-warning-modal';\n\nexport const EditorSaveButton = ({ editorId }: EditorProps): ReactElement => {\n\tconst title = useAppSelector(selectEditorTitle(editorId));\n\tconst isNew = useAppSelector(selectEditorIsNew(editorId));\n\tconst editor = useAppSelector(selectEditor(editorId));\n\tconst createModal = useModal();\n\tconst createSnackbar = useSnackbar();\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst attendeesLength = useAppSelector(selectEditorAttendees(editorId))?.length;\n\tconst meetingRoomLength = useAppSelector(selectEditorMeetingRoom(editorId))?.length;\n\tconst equipmentsLength = useAppSelector(selectEditorEquipment(editorId))?.length;\n\n\tconst [t] = useTranslation();\n\tconst dispatch = useAppDispatch();\n\n\tconst onClick = useCallback(() => {\n\t\tif (editor.isSeries && !isNew && !editor.isInstance) {\n\t\t\tconst closeModal = createModal(\n\t\t\t\t{\n\t\t\t\t\tsize: 'large',\n\t\t\t\t\tchildren: (\n\t\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t\t<SeriesEditWarningModal\n\t\t\t\t\t\t\t\taction={onSave}\n\t\t\t\t\t\t\t\tisSending={false}\n\t\t\t\t\t\t\t\tonClose={(): void => closeModal()}\n\t\t\t\t\t\t\t\tisNew={isNew}\n\t\t\t\t\t\t\t\teditorId={editorId}\n\t\t\t\t\t\t\t\teditor={editor}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</StoreProvider>\n\t\t\t\t\t),\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t} else {\n\t\t\tonSave({\n\t\t\t\tdraft: !!attendeesLength || !!meetingRoomLength || !!equipmentsLength,\n\t\t\t\tisNew,\n\t\t\t\teditor,\n\t\t\t\tdispatch\n\t\t\t}).then(({ response }) => {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `calendar-moved-root`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: response ? 'info' : 'warning',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: !response\n\t\t\t\t\t\t? t('label.error_try_again', 'Something went wrong, please try again')\n\t\t\t\t\t\t: t('message.snackbar.calendar_edits_saved', 'Edits saved correctly'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, [\n\t\teditor,\n\t\tisNew,\n\t\tcreateModal,\n\t\teditorId,\n\t\tattendeesLength,\n\t\tmeetingRoomLength,\n\t\tequipmentsLength,\n\t\tdispatch,\n\t\tcreateSnackbar,\n\t\tt\n\t]);\n\n\treturn (\n\t\t<Button\n\t\t\tlabel={t('label.save', 'Save')}\n\t\t\ticon=\"SaveOutline\"\n\t\t\tdisabled={disabled?.saveButton || !title?.length}\n\t\t\tonClick={onClick}\n\t\t\ttype=\"outlined\"\n\t\t/>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo } from 'react';\n\nimport { Button, useModal, useSnackbar } from '@zextras/carbonio-design-system';\nimport { closeBoard, replaceHistory, useBoard } from '@zextras/carbonio-shell-ui';\nimport { useTranslation } from 'react-i18next';\n\nimport { onSend } from '../../../commons/editor-save-send-fns';\nimport { StoreProvider } from '../../../store/redux';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditor,\n\tselectEditorAttendees,\n\tselectEditorDisabled,\n\tselectEditorEquipment,\n\tselectEditorIsNew,\n\tselectEditorMeetingRoom,\n\tselectEditorOptionalAttendees,\n\tselectEditorTitle\n} from '../../../store/selectors/editor';\nimport { EditorProps } from '../../../types/editor';\nimport { SeriesEditWarningModal } from '../../modals/series-edit-warning-modal';\n\nexport const EditorSendButton = ({ editorId }: EditorProps): ReactElement => {\n\tconst attendees = useAppSelector(selectEditorAttendees(editorId));\n\tconst title = useAppSelector(selectEditorTitle(editorId));\n\tconst optionalAttendees = useAppSelector(selectEditorOptionalAttendees(editorId));\n\tconst meetingRooms = useAppSelector(selectEditorMeetingRoom(editorId));\n\tconst equipments = useAppSelector(selectEditorEquipment(editorId));\n\n\tconst isNew = useAppSelector(selectEditorIsNew(editorId));\n\tconst editor = useAppSelector(selectEditor(editorId));\n\tconst createModal = useModal();\n\tconst createSnackbar = useSnackbar();\n\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst [t] = useTranslation();\n\tconst board = useBoard();\n\tconst dispatch = useAppDispatch();\n\n\tconst isDisabled = useMemo(\n\t\t() =>\n\t\t\tdisabled?.sendButton ||\n\t\t\t(!attendees?.length &&\n\t\t\t\t!optionalAttendees?.length &&\n\t\t\t\t!meetingRooms?.length &&\n\t\t\t\t!equipments?.length) ||\n\t\t\t!title?.length,\n\t\t[\n\t\t\tattendees?.length,\n\t\t\tdisabled?.sendButton,\n\t\t\tequipments?.length,\n\t\t\tmeetingRooms?.length,\n\t\t\toptionalAttendees?.length,\n\t\t\ttitle?.length\n\t\t]\n\t);\n\tconst onClick = useCallback(() => {\n\t\tif (editor.isSeries && !isNew && !editor.isInstance) {\n\t\t\tconst closeModal = createModal(\n\t\t\t\t{\n\t\t\t\t\tsize: 'large',\n\t\t\t\t\tchildren: (\n\t\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t\t<SeriesEditWarningModal\n\t\t\t\t\t\t\t\taction={onSend}\n\t\t\t\t\t\t\t\tisSending\n\t\t\t\t\t\t\t\tonClose={(): void => closeModal()}\n\t\t\t\t\t\t\t\tisNew={isNew}\n\t\t\t\t\t\t\t\teditorId={editorId}\n\t\t\t\t\t\t\t\teditor={editor}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</StoreProvider>\n\t\t\t\t\t),\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t} else\n\t\t\tonSend({ isNew, editor, dispatch }).then(({ response }) => {\n\t\t\t\tif (editor?.panel && response) {\n\t\t\t\t\treplaceHistory('');\n\t\t\t\t}\n\t\t\t\tif (board && response) {\n\t\t\t\t\tcloseBoard(board?.id);\n\t\t\t\t}\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `calendar-moved-root`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: response ? 'info' : 'warning',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: !response\n\t\t\t\t\t\t? t('label.error_try_again', 'Something went wrong, please try again')\n\t\t\t\t\t\t: t('message.appointment_invitation_sent', 'Appointment invitation sent'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t});\n\t}, [board, createModal, createSnackbar, dispatch, editor, editorId, isNew, t]);\n\n\treturn (\n\t\t<Button\n\t\t\tlabel={t('action.send', 'Send')}\n\t\t\ticon=\"PaperPlane\"\n\t\t\tdisabled={isDisabled}\n\t\t\tonClick={onClick}\n\t\t/>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Row, Padding } from '@zextras/carbonio-design-system';\n\nimport { EditorAttachmentsButton } from './editor-attachments-button';\nimport { EditorRichTextButton } from './editor-richtext-button';\nimport { EditorSaveButton } from './editor-save-button';\nimport { EditorSendButton } from './editor-send-button';\nimport { EditorProps } from '../../../types/editor';\n\nexport const EditorActions = ({ editorId }: EditorProps): ReactElement => (\n\t<Row\n\t\torientation=\"horizontal\"\n\t\tpadding={{ top: 'small', bottom: 'small' }}\n\t\theight=\"fit\"\n\t\twidth=\"fill\"\n\t\tmainAlignment=\"flex-end\"\n\t>\n\t\t<EditorRichTextButton editorId={editorId} />\n\t\t<EditorAttachmentsButton editorId={editorId} />\n\t\t<EditorSaveButton editorId={editorId} />\n\t\t<Padding left=\"medium\" />\n\t\t<EditorSendButton editorId={editorId} />\n\t</Row>\n);\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Checkbox } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { isNil } from 'lodash';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorAllDay, selectEditorDisabled } from '../../../store/selectors/editor';\nimport { editEditorAllDay } from '../../../store/slices/editor-slice';\n\nexport const EditorAllDayCheckbox = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst allDay = useAppSelector(selectEditorAllDay(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst onClick = useCallback(\n\t\t(e) => {\n\t\t\tif (e) {\n\t\t\t\tdispatch(editEditorAllDay({ id: editorId, allDay: !allDay }));\n\t\t\t}\n\t\t},\n\t\t[allDay, dispatch, editorId]\n\t);\n\n\treturn !isNil(allDay) ? (\n\t\t<Checkbox\n\t\t\tlabel={t('label.all_day', 'All day')}\n\t\t\tonClick={onClick}\n\t\t\tvalue={allDay}\n\t\t\tdisabled={disabled?.allDay}\n\t\t\tdata-testid=\"editor-allDay\"\n\t\t/>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditorAttachmentFiles,\n\tselectEditorDisabled,\n\tselectEditorInviteId,\n\tselectEditorTitle\n} from '../../../store/selectors/editor';\nimport { editEditorAttachments } from '../../../store/slices/editor-slice';\nimport { AttachmentsBlock } from '../../event-panel-view/attachments-part';\n\ntype EditorAttachmentsProps = {\n\teditorId: string;\n\texpanded: boolean | undefined;\n};\n\nexport const EditorAttachments = ({ editorId }: EditorAttachmentsProps): ReactElement | null => {\n\tconst attachmentFiles = useAppSelector(selectEditorAttachmentFiles(editorId));\n\tconst inviteId = useAppSelector(selectEditorInviteId(editorId));\n\tconst title = useAppSelector(selectEditorTitle(editorId)) ?? '';\n\tconst dispatch = useAppDispatch();\n\n\tconst onAttachmentsChange = useCallback(\n\t\t(attach, attachments) => {\n\t\t\tdispatch(\n\t\t\t\teditEditorAttachments({\n\t\t\t\t\tid: editorId,\n\t\t\t\t\tattach,\n\t\t\t\t\tattachmentFiles: attachments\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[dispatch, editorId]\n\t);\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\n\treturn attachmentFiles?.length > 0 ? (\n\t\t<AttachmentsBlock\n\t\t\tattachments={attachmentFiles}\n\t\t\tid={inviteId}\n\t\t\tonAttachmentsChange={onAttachmentsChange}\n\t\t\tisEditor\n\t\t\tsubject={title}\n\t\t\tdisabled={disabled?.attachments}\n\t\t/>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { Button, ChipInput, Container, Row, useSnackbar } from '@zextras/carbonio-design-system';\nimport { useIntegratedComponent } from '@zextras/carbonio-shell-ui';\nimport { find, map, reject, some } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport {\n\tEditorAvailabilityWarningRow,\n\tgetIsBusyAtTimeOfTheEvent\n} from './editor-availability-warning-row';\nimport { getOrderedAccountIds } from '../../../carbonio-ui-commons/helpers/identities';\nimport { useAttendeesAvailability } from '../../../hooks/use-attendees-availability';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditorAllDay,\n\tselectEditorAttendees,\n\tselectEditorDisabled,\n\tselectEditorEnd,\n\tselectEditorOptionalAttendees,\n\tselectEditorStart,\n\tselectEditorUid,\n\tselectSender\n} from '../../../store/selectors/editor';\nimport {\n\teditEditorAttendees,\n\teditEditorOptionalAttendees\n} from '../../../store/slices/editor-slice';\n\ntype EditorAttendeesProps = {\n\teditorId: string;\n};\n\nexport const AttendeesContainer = styled.div`\n\twidth: calc(\n\t\t100% - ${({ hasTooltip }: { hasTooltip?: boolean }): string => (hasTooltip ? `3rem` : '0rem')}\n\t);\n\theight: fit-content;\n\tbackground: ${({ theme }): string => theme.palette.gray5.regular};\n\tborder-bottom: 0.0625rem solid ${({ theme }): string => theme.palette.gray2.regular};\n\t[class^='Chip__ChipComp'] {\n\t\t[class^='Text__Comp'] {\n\t\t\tcolor: ${({ theme }): string => theme.palette.text.regular};\n\t\t}\n\t}\n`;\n\nexport const EditorAttendees = ({ editorId }: EditorAttendeesProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst [ContactInput, integrationAvailable] = useIntegratedComponent('contact-input');\n\tconst dispatch = useAppDispatch();\n\tconst attendees = useAppSelector(selectEditorAttendees(editorId));\n\tconst uid = useAppSelector(selectEditorUid(editorId));\n\tconst optionalAttendees = useAppSelector(selectEditorOptionalAttendees(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst start = useAppSelector(selectEditorStart(editorId));\n\tconst end = useAppSelector(selectEditorEnd(editorId));\n\tconst allDay = useAppSelector(selectEditorAllDay(editorId));\n\tconst sender = useAppSelector(selectSender(editorId));\n\tconst createSnackbar = useSnackbar();\n\n\tconst [showOptionals, setShowOptional] = useState(!!optionalAttendees?.length);\n\tconst [orderedAccountIds, setOrderedAccountIds] = useState<Array<string>>([]);\n\tconst toggleOptionals = useCallback(() => setShowOptional((show) => !show), []);\n\n\tconst attendeesAvailabilityList = useAttendeesAvailability(start, attendees, uid);\n\n\tconst hasError = useMemo(() => some(attendees ?? [], { error: true }), [attendees]);\n\tconst optionalHasError = useMemo(\n\t\t() => some(optionalAttendees ?? [], { error: true }),\n\t\t[optionalAttendees]\n\t);\n\n\tuseEffect(() => {\n\t\tgetOrderedAccountIds(sender ? sender.address : '')\n\t\t\t.then((ids) => {\n\t\t\t\tsetOrderedAccountIds(ids);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `ordered-account-ids`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\thideButton: true\n\t\t\t\t});\n\t\t\t});\n\t}, [createSnackbar, sender, t]);\n\n\tconst onChange = useCallback(\n\t\t(value) => {\n\t\t\tdispatch(\n\t\t\t\teditEditorAttendees({\n\t\t\t\t\tid: editorId,\n\t\t\t\t\tattendees: value\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[dispatch, editorId]\n\t);\n\n\tconst onOptionalsChange = useCallback(\n\t\t(value) => {\n\t\t\tdispatch(editEditorOptionalAttendees({ id: editorId, optionalAttendees: value }));\n\t\t},\n\t\t[dispatch, editorId]\n\t);\n\n\tconst defaultValue = useMemo(() => {\n\t\tif (attendees?.length > 0) {\n\t\t\treturn map(attendees, (chip) => {\n\t\t\t\tconst currentChipAvailability = find(attendeesAvailabilityList, ['email', chip.email]);\n\n\t\t\t\tconst oldActions =\n\t\t\t\t\t(chip.actions && !chip.error) || !chip.email\n\t\t\t\t\t\t? reject(chip.actions, ['icon', 'EditOutline'])\n\t\t\t\t\t\t: chip.actions;\n\n\t\t\t\tif (currentChipAvailability) {\n\t\t\t\t\tconst isBusyAtTimeOfEvent = getIsBusyAtTimeOfTheEvent(\n\t\t\t\t\t\tcurrentChipAvailability,\n\t\t\t\t\t\tstart,\n\t\t\t\t\t\tend,\n\t\t\t\t\t\tattendeesAvailabilityList,\n\t\t\t\t\t\tallDay\n\t\t\t\t\t);\n\n\t\t\t\t\tconst actions =\n\t\t\t\t\t\tisBusyAtTimeOfEvent && !find(oldActions, ['id', 'unavailable'])\n\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t...(oldActions ?? []),\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid: 'unavailable',\n\t\t\t\t\t\t\t\t\t\tlabel: t(\n\t\t\t\t\t\t\t\t\t\t\t'attendee_unavailable',\n\t\t\t\t\t\t\t\t\t\t\t'Attendee not available at the selected time of the event'\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tcolor: 'error',\n\t\t\t\t\t\t\t\t\t\ttype: 'icon',\n\t\t\t\t\t\t\t\t\t\ticon: 'AlertTriangle'\n\t\t\t\t\t\t\t\t\t} as const\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t: oldActions;\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...chip,\n\t\t\t\t\t\terror: !chip.email ? false : chip.error,\n\t\t\t\t\t\tactions\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn { ...chip, error: !chip.email ? false : chip.error, actions: oldActions };\n\t\t\t});\n\t\t}\n\t\treturn [];\n\t}, [allDay, attendees, attendeesAvailabilityList, end, start, t]);\n\n\treturn (\n\t\t<>\n\t\t\t<AttendeesContainer>\n\t\t\t\t<Container\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\tbackground={'white'}\n\t\t\t\t\tstyle={{ overflow: 'hidden' }}\n\t\t\t\t\tpadding={{ all: 'none' }}\n\t\t\t\t>\n\t\t\t\t\t<Container background={'white'} style={{ overflow: 'hidden' }}>\n\t\t\t\t\t\t{integrationAvailable ? (\n\t\t\t\t\t\t\t<ContactInput\n\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\tplaceholder={t('label.attendees', 'Attendees')}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tdefaultValue={defaultValue}\n\t\t\t\t\t\t\t\tdisabled={disabled?.attendees}\n\t\t\t\t\t\t\t\tdragAndDropEnabled\n\t\t\t\t\t\t\t\torderedAccountIds={orderedAccountIds}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<ChipInput\n\t\t\t\t\t\t\t\tplaceholder={t('label.attendees', 'Attendees')}\n\t\t\t\t\t\t\t\tbackground={'white'}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tdefaultValue={defaultValue}\n\t\t\t\t\t\t\t\thasError={hasError}\n\t\t\t\t\t\t\t\tdescription={hasError ? '' : undefined}\n\t\t\t\t\t\t\t\tdisabled={disabled?.attendees}\n\t\t\t\t\t\t\t\tstyle={{ border: '1px solid lightgray' }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Container>\n\t\t\t\t\t<Container\n\t\t\t\t\t\twidth=\"fit\"\n\t\t\t\t\t\tbackground={'white'}\n\t\t\t\t\t\tpadding={{ right: 'medium', left: 'extrasmall' }}\n\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tlabel={t('label.optionals', 'Optionals')}\n\t\t\t\t\t\t\ttype=\"ghost\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tstyle={{ padding: 0 }}\n\t\t\t\t\t\t\tonClick={toggleOptionals}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Container>\n\t\t\t\t</Container>\n\t\t\t</AttendeesContainer>\n\t\t\t<EditorAvailabilityWarningRow\n\t\t\t\tlabel={t(\n\t\t\t\t\t'attendees_unavailable',\n\t\t\t\t\t'One or more attendees are not available at the selected time of the event'\n\t\t\t\t)}\n\t\t\t\tlist={attendeesAvailabilityList}\n\t\t\t\titems={attendees}\n\t\t\t\teditorId={editorId}\n\t\t\t/>\n\t\t\t{showOptionals && (\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<AttendeesContainer>\n\t\t\t\t\t\t{integrationAvailable ? (\n\t\t\t\t\t\t\t<ContactInput\n\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\tplaceholder={t('label.optionals', 'Optionals')}\n\t\t\t\t\t\t\t\tonChange={onOptionalsChange}\n\t\t\t\t\t\t\t\tdefaultValue={optionalAttendees}\n\t\t\t\t\t\t\t\tdisabled={disabled?.optionalAttendees}\n\t\t\t\t\t\t\t\tdragAndDropEnabled\n\t\t\t\t\t\t\t\torderedAccountIds={orderedAccountIds}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<ChipInput\n\t\t\t\t\t\t\t\tplaceholder={t('label.optionals', 'Optionals')}\n\t\t\t\t\t\t\t\tbackground={'white'}\n\t\t\t\t\t\t\t\tonChange={onOptionalsChange}\n\t\t\t\t\t\t\t\tdefaultValue={optionalAttendees}\n\t\t\t\t\t\t\t\thasError={optionalHasError}\n\t\t\t\t\t\t\t\tdescription={optionalHasError ? '' : undefined}\n\t\t\t\t\t\t\t\tdisabled={disabled?.optionalAttendees}\n\t\t\t\t\t\t\t\tstyle={{ border: '1px solid lightgray' }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</AttendeesContainer>\n\t\t\t\t</Row>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { getUserAccount } from '@zextras/carbonio-shell-ui';\nimport { filter, map, sortBy } from 'lodash';\n\nimport { getShareInfoRequest } from '../soap/get-share-info';\n\ntype AccountItem = {\n\tid: string;\n\taddress: string;\n};\n\nexport function getSharedAccounts(): Promise<Array<AccountItem>> {\n\treturn getShareInfoRequest().then((res) => {\n\t\tconst sharedAccounts: Array<AccountItem> = [];\n\t\tif (res?.folders) {\n\t\t\tconst sharedRootFolders = filter(res.folders, ['folderId', 1]);\n\t\t\tsharedRootFolders.forEach((account) => {\n\t\t\t\tif (account.ownerId && account.ownerEmail) {\n\t\t\t\t\tsharedAccounts.push({ id: account.ownerId, address: account.ownerEmail });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn sharedAccounts;\n\t});\n}\n\nexport function getDefaultAccount(): AccountItem | undefined {\n\tconst account = getUserAccount();\n\tif (!account) {\n\t\treturn undefined;\n\t}\n\treturn { id: account.id, address: account.name };\n}\n\nexport async function getOrderedAccountIds(\n\tpriorityAccountAddress?: string\n): Promise<Array<string>> {\n\tconst sharedAccounts = await getSharedAccounts();\n\tconst defaultAccount = getDefaultAccount();\n\tconst finalList = defaultAccount ? [defaultAccount].concat(...sharedAccounts) : sharedAccounts;\n\tconst sortedList = sortBy(finalList, (item: AccountItem) =>\n\t\titem.address === priorityAccountAddress ? 0 : 1\n\t);\n\treturn map(sortedList, (item: AccountItem) => item.id);\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Row } from '@zextras/carbonio-design-system';\n\nimport { CalendarSelector } from './calendar-selector';\nimport { normalizeCalendarEditor } from '../../../normalizations/normalize-editor';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorCalendarId, selectEditorDisabled } from '../../../store/selectors/editor';\nimport { editEditorCalendar } from '../../../store/slices/editor-slice';\n\nexport const EditorCalendarSelector = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst calendarId = useAppSelector(selectEditorCalendarId(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst onChange = useCallback(\n\t\t(value) => {\n\t\t\tif (value) {\n\t\t\t\tconst calendar = normalizeCalendarEditor(value);\n\t\t\t\tconst data = {\n\t\t\t\t\tid: editorId,\n\t\t\t\t\tcalendar\n\t\t\t\t};\n\t\t\t\tdispatch(editEditorCalendar(data));\n\t\t\t}\n\t\t},\n\t\t[dispatch, editorId]\n\t);\n\n\treturn calendarId ? (\n\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t<CalendarSelector\n\t\t\t\tcalendarId={calendarId}\n\t\t\t\tonCalendarChange={onChange}\n\t\t\t\tdisabled={disabled?.calendar}\n\t\t\t\texcludeTrash\n\t\t\t/>\n\t\t</Row>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ComponentType, ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport { useIntegratedComponent, t } from '@zextras/carbonio-shell-ui';\nimport { debounce } from 'lodash';\nimport styled from 'styled-components';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditorDisabled,\n\tselectEditorIsRichText,\n\tselectEditorPlainText,\n\tselectEditorRichText\n} from '../../../store/selectors/editor';\nimport { editEditorText } from '../../../store/slices/editor-slice';\n\nconst TextArea = styled.textarea`\n\tbox-sizing: border-box;\n\tpadding: ${(props): string => props.theme.sizes.padding.large};\n\tbackground: ${(props): string => props.theme.palette.gray5.regular};\n\theight: fit-content;\n\tmin-height: 9.375rem;\n\tflex-grow: 1;\n\twidth: 100%;\n\tborder: none;\n\tresize: none;\n\t& :focus,\n\t:active {\n\t\tbox-shadow: none;\n\t\tborder: none;\n\t\toutline: none;\n\t}\n`;\n\nconst EditorWrapper = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\toverflow-y: auto;\n\tposition: relative;\n\t.tox .tox-editor-header {\n\t\tz-index: 0;\n\t}\n\t> .tox:not(.tox-tinymce-inline) {\n\t\twidth: 100%;\n\t\tborder: none;\n\t\t.tox-editor-header {\n\t\t\tbackground-color: ${(props): string => props.theme.palette.gray6.regular};\n\t\t}\n\t\t.tox-toolbar__primary {\n\t\t\tbackground: none;\n\t\t\tbackground-color: ${(props): string => props.theme.palette.gray4.regular};\n\t\t\tborder-radius: ${(props): string => props.theme.borderRadius};\n\t\t}\n\t}\n\t> .tox {\n\t\t.tox-edit-area {\n\t\t\tmargin-left: calc(-1rem + ${(props): string => props.theme.sizes.padding.large});\n\t\t\toverflow-y: auto;\n\t\t\tmax-height: 100%;\n\t\t}\n\t\t.tox-edit-area__iframe {\n\t\t\theight: 100%;\n\t\t\tpadding-bottom: ${(props): string => props.theme.sizes.padding.large};\n\t\t}\n\t\t&.tox-tinymce {\n\t\t\theight: 100%;\n\t\t}\n\t}\n`;\n\nconst PlainComposer = ({ editorId }: { editorId: string }): JSX.Element => {\n\tconst plainText = useAppSelector(selectEditorPlainText(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\n\tconst dispatch = useAppDispatch();\n\n\tconst [plainTextValue, setPlainTextValue] = useState(plainText ?? '');\n\n\tconst debounceInput = useMemo(\n\t\t() =>\n\t\t\tdebounce(\n\t\t\t\t([plain, htmlText]) => {\n\t\t\t\t\tdispatch(editEditorText({ id: editorId, richText: htmlText, plainText: plain }));\n\t\t\t\t},\n\t\t\t\t500,\n\t\t\t\t{\n\t\t\t\t\ttrailing: true,\n\t\t\t\t\tleading: false\n\t\t\t\t}\n\t\t\t),\n\t\t[dispatch, editorId]\n\t);\n\n\tconst textAreaLabel = useMemo(\n\t\t() => t('messages.format_as_plain_text', 'Format as Plain Text'),\n\t\t[]\n\t);\n\n\tconst onPlainTextChange = useCallback(\n\t\t(e) => {\n\t\t\tsetPlainTextValue(e.target.value);\n\t\t\tdebounceInput([e.target.value, e.target.value]);\n\t\t},\n\t\t[debounceInput]\n\t);\n\n\treturn (\n\t\t<TextArea\n\t\t\tplaceholder={textAreaLabel}\n\t\t\tvalue={plainTextValue}\n\t\t\tonChange={onPlainTextChange}\n\t\t\tdisabled={disabled?.composer}\n\t\t\tdata-testid=\"editor-textArea\"\n\t\t/>\n\t);\n};\n\nconst HtmlComposer = ({\n\tComposer,\n\teditorId\n}: {\n\teditorId: string;\n\tComposer: ComponentType<unknown>;\n}): JSX.Element => {\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst richText = useAppSelector(selectEditorRichText(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst [richTextValue, setRichTextValue] = useState(richText ?? '');\n\n\tconst debounceInput = useMemo(\n\t\t() =>\n\t\t\tdebounce(\n\t\t\t\t([plain, htmlText]) => {\n\t\t\t\t\tdispatch(editEditorText({ id: editorId, richText: htmlText, plainText: plain }));\n\t\t\t\t},\n\t\t\t\t500,\n\t\t\t\t{\n\t\t\t\t\ttrailing: true,\n\t\t\t\t\tleading: false\n\t\t\t\t}\n\t\t\t),\n\t\t[dispatch, editorId]\n\t);\n\n\tconst onRichTextChange = useCallback(\n\t\t(e) => {\n\t\t\tsetRichTextValue(e[1]);\n\t\t\tdebounceInput(e);\n\t\t},\n\t\t[debounceInput]\n\t);\n\n\treturn (\n\t\t<EditorWrapper>\n\t\t\t<Composer\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\tonEditorChange={onRichTextChange}\n\t\t\t\tminHeight=\"12.5rem\"\n\t\t\t\tvalue={richTextValue}\n\t\t\t\tdisabled={disabled?.composer}\n\t\t\t\tdata-testid=\"editor-composer\"\n\t\t\t\tcustomInitOptions={{ auto_focus: false }}\n\t\t\t/>\n\t\t</EditorWrapper>\n\t);\n};\n\nexport const EditorComposer = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst [Composer, composerIsAvailable] = useIntegratedComponent('composer');\n\tconst isRichText = useAppSelector(selectEditorIsRichText(editorId));\n\n\treturn (\n\t\t<>\n\t\t\t{composerIsAvailable && isRichText ? (\n\t\t\t\t<HtmlComposer Composer={Composer} editorId={editorId} />\n\t\t\t) : (\n\t\t\t\t<PlainComposer editorId={editorId} />\n\t\t\t)}\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo } from 'react';\n\nimport { DateTimePicker } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport moment from 'moment';\n\nexport default function EndDatePicker({ start, end, allDay, diff, onChange }) {\n\tconst onEndChange = useCallback(\n\t\t(d) =>\n\t\t\tonChange({\n\t\t\t\tend: moment(d).valueOf(),\n\t\t\t\tstart: moment(d).valueOf() > start ? start : moment(d).valueOf() - diff\n\t\t\t}),\n\t\t[onChange, start, diff]\n\t);\n\tconst dateFormat = useMemo(() => (allDay ? 'dd/MM/yyyy' : 'dd/MM/yyyy HH:mm'), [allDay]);\n\tconst label = useMemo(\n\t\t() =>\n\t\t\t`${\n\t\t\t\tallDay ? t('label.end_date', 'End date') : t('label.end_date_and_time', 'End date and time')\n\t\t\t}`,\n\t\t[allDay]\n\t);\n\treturn (\n\t\t<DateTimePicker\n\t\t\twidth=\"100%\"\n\t\t\tlabel={label}\n\t\t\tdefaultValue={end}\n\t\t\tonChange={onEndChange}\n\t\t\tdateFormat={dateFormat}\n\t\t\tincludeTime={!allDay}\n\t\t/>\n\t);\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo } from 'react';\n\nimport { DateTimePicker } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport moment from 'moment';\n\nexport default function StartDatePicker({ start, allDay, diff, onChange }) {\n\tconst onStartChange = useCallback(\n\t\t(d) => {\n\t\t\tconst startTime = moment(d).valueOf();\n\t\t\tconst endTime = startTime + diff;\n\t\t\treturn onChange({\n\t\t\t\tstart: startTime,\n\t\t\t\tend: endTime\n\t\t\t});\n\t\t},\n\t\t[onChange, diff]\n\t);\n\n\tconst label = useMemo(\n\t\t() =>\n\t\t\t`${\n\t\t\t\tallDay\n\t\t\t\t\t? t('label.start_date', 'Start date')\n\t\t\t\t\t: t('label.start_date_and_time', 'Start date and time')\n\t\t\t}`,\n\t\t[allDay]\n\t);\n\tconst dateFormat = useMemo(() => (allDay ? 'dd/MM/yyyy' : 'dd/MM/yyyy HH:mm'), [allDay]);\n\n\treturn (\n\t\t<DateTimePicker\n\t\t\twidth=\"100%\"\n\t\t\tlabel={label}\n\t\t\tdefaultValue={start}\n\t\t\tonChange={onStartChange}\n\t\t\tdateFormat={dateFormat}\n\t\t\tincludeTime={!allDay}\n\t\t/>\n\t);\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo } from 'react';\n\nimport { Padding, Row } from '@zextras/carbonio-design-system';\nimport moment from 'moment';\n\nimport EndDatePicker from '../../../commons/end-date-picker';\nimport StartDatePicker from '../../../commons/start-date-picker';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditorAllDay,\n\tselectEditorDisabled,\n\tselectEditorEnd,\n\tselectEditorStart\n} from '../../../store/selectors/editor';\nimport { editEditorDate } from '../../../store/slices/editor-slice';\n\nexport const EditorDatePicker = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst allDay = useAppSelector(selectEditorAllDay(editorId));\n\tconst start = useAppSelector(selectEditorStart(editorId));\n\tconst end = useAppSelector(selectEditorEnd(editorId));\n\tconst diff = useMemo(() => moment(end).diff(moment(start)), [end, start]);\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\tconst onChange = useCallback(\n\t\t({ start: newStartValue, end: newEndValue }) => {\n\t\t\tdispatch(editEditorDate({ id: editorId, start: newStartValue, end: newEndValue }));\n\t\t},\n\t\t[dispatch, editorId]\n\t);\n\n\treturn start && end ? (\n\t\t<>\n\t\t\t<Row takeAvailableSpace>\n\t\t\t\t<StartDatePicker\n\t\t\t\t\tstart={new Date(start)}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tdiff={diff}\n\t\t\t\t\tallDay={allDay}\n\t\t\t\t\tdisabled={disabled?.datePicker}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t\t<Padding left=\"small\" />\n\t\t\t<Row takeAvailableSpace>\n\t\t\t\t<EndDatePicker\n\t\t\t\t\tstart={start}\n\t\t\t\t\tend={new Date(end)}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tdiff={diff}\n\t\t\t\t\tallDay={allDay}\n\t\t\t\t\tdisabled={disabled?.datePicker}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t</>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { ReactElement, useCallback, useMemo, useRef } from 'react';\n\nimport {\n\tChipInput,\n\tChipInputProps,\n\tContainer,\n\tDropdownItem,\n\tKeyboardPresetObj,\n\tuseKeyboard\n} from '@zextras/carbonio-design-system';\nimport { find, map } from 'lodash';\nimport styled, { DefaultTheme } from 'styled-components';\n\nimport {\n\tEditorAvailabilityWarningRow,\n\tgetIsBusyAtTimeOfTheEvent\n} from './editor-availability-warning-row';\nimport { useAttendeesAvailability } from '../../../hooks/use-attendees-availability';\nimport { useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditorAllDay,\n\tselectEditorEnd,\n\tselectEditorStart,\n\tselectEditorUid\n} from '../../../store/selectors/editor';\nimport { ChipResource, Resource } from '../../../types/editor';\nimport { Contact } from '../../../types/soap/soap-actions';\n\ninterface SkeletonTileProps {\n\twidth?: string;\n\theight?: string;\n\tradius?: string;\n\ttheme: DefaultTheme;\n}\n\nconst SkeletonTile = styled.div<SkeletonTileProps>`\n\twidth: ${({ width }): string => width ?? '1rem'};\n\tmax-width: ${({ width }): string => width ?? '1rem'};\n\tmin-width: ${({ width }): string => width ?? '1rem'};\n\theight: ${({ height }): string => height ?? '1rem'};\n\tmax-height: ${({ height }): string => height ?? '1rem'};\n\tmin-height: ${({ height }): string => height ?? '1rem'};\n\tborder-radius: ${({ radius }): string => radius ?? '0.125rem'};\n\tbackground: ${({ theme }): string => theme.palette.gray2.regular};\n`;\n\nexport const Loader = (): ReactElement => (\n\t<Container\n\t\torientation=\"horizontal\"\n\t\tmainAlignment=\"flex-start\"\n\t\tcrossAlignment=\"center\"\n\t\tminWidth=\"16rem\"\n\t\tminHeight=\"2rem\"\n\t>\n\t\t<SkeletonTile radius=\"50%\" width=\"2rem\" height=\"2rem\" />\n\t\t<Container orientation=\"vertical\" crossAlignment=\"flex-start\" padding={{ left: 'small' }}>\n\t\t\t<SkeletonTile\n\t\t\t\tradius=\"0.25rem\"\n\t\t\t\twidth={`${Math.random() * 9.375 + 4}rem`}\n\t\t\t\theight=\"0.875rem\"\n\t\t\t\tstyle={{ marginBottom: '0.25rem' }}\n\t\t\t/>\n\t\t\t<SkeletonTile radius=\"0.25rem\" width={`${Math.random() * 9.375 + 4}rem`} height=\"0.75rem\" />\n\t\t</Container>\n\t</Container>\n);\n\nexport const normalizeResources = (\n\tr: Contact\n): { id: string; label: string; value: string; email: string; type: string } => ({\n\tid: r.id,\n\tlabel: r.fileAsStr,\n\tvalue: r.fileAsStr,\n\temail: r._attrs.email,\n\ttype: r._attrs.zimbraCalResType\n});\n\nexport const EditorResourceComponent = ({\n\teditorId,\n\tonChange,\n\tplaceholder,\n\tresourcesValue,\n\tonInputType,\n\toptions,\n\tsetOptions,\n\twarningLabel,\n\tdisabled,\n\tsingleWarningLabel\n}: {\n\teditorId: string;\n\tonChange: (e: Array<Resource>) => void;\n\tonInputType: ChipInputProps['onInputType'];\n\tplaceholder: string;\n\tresourcesValue: Array<ChipResource>;\n\toptions: Array<DropdownItem>;\n\tsetOptions: (e: Array<DropdownItem>) => void;\n\twarningLabel: string;\n\tdisabled?: boolean;\n\tsingleWarningLabel: string;\n}): JSX.Element | null => {\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\n\tconst start = useAppSelector(selectEditorStart(editorId));\n\tconst end = useAppSelector(selectEditorEnd(editorId));\n\tconst allDay = useAppSelector(selectEditorAllDay(editorId));\n\tconst uid = useAppSelector(selectEditorUid(editorId));\n\n\tconst attendeesAvailabilityList = useAttendeesAvailability(start, resourcesValue, uid);\n\n\tconst onAdd = useCallback((valueToAdd) => {\n\t\tif (typeof valueToAdd === 'string') {\n\t\t\treturn { label: valueToAdd };\n\t\t}\n\t\tconst defaultLabel = {\n\t\t\tlabel: 'no label'\n\t\t};\n\t\tif (valueToAdd !== null && typeof valueToAdd === 'object') {\n\t\t\treturn {\n\t\t\t\t...defaultLabel,\n\t\t\t\t...valueToAdd\n\t\t\t};\n\t\t}\n\t\treturn defaultLabel;\n\t}, []);\n\n\tconst resourceAvailability = useMemo(() => {\n\t\tif (!resourcesValue?.length) {\n\t\t\treturn [];\n\t\t}\n\t\treturn map(resourcesValue, (room) => {\n\t\t\tconst roomInList = find(attendeesAvailabilityList, ['email', room.email]);\n\n\t\t\tif (roomInList) {\n\t\t\t\tconst isBusyAtTimeOfEvent = getIsBusyAtTimeOfTheEvent(\n\t\t\t\t\troomInList,\n\t\t\t\t\tstart,\n\t\t\t\t\tend,\n\t\t\t\t\tattendeesAvailabilityList,\n\t\t\t\t\tallDay\n\t\t\t\t);\n\n\t\t\t\tif (isBusyAtTimeOfEvent) {\n\t\t\t\t\tconst actions = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'unavailable',\n\t\t\t\t\t\t\tlabel: singleWarningLabel,\n\t\t\t\t\t\t\tcolor: 'error',\n\t\t\t\t\t\t\ttype: 'icon',\n\t\t\t\t\t\t\ticon: 'AlertTriangle'\n\t\t\t\t\t\t} as const\n\t\t\t\t\t];\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...room,\n\t\t\t\t\t\tactions\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn room;\n\t\t});\n\t}, [allDay, attendeesAvailabilityList, end, resourcesValue, singleWarningLabel, start]);\n\n\tconst backspaceEvent = useMemo<KeyboardPresetObj[]>(\n\t\t() => [\n\t\t\t{\n\t\t\t\ttype: 'keydown',\n\t\t\t\tcallback: (): void => {\n\t\t\t\t\t// todo: ignoring cause dropdown can't receive value prop\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tif (options?.[0]?.value && onChange && options?.[0]?.id !== 'loading') {\n\t\t\t\t\t\t// todo: ignoring cause dropdown can't receive value prop\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tonChange([...resourceAvailability, options[0].value]);\n\t\t\t\t\t\tif (inputRef.current) {\n\t\t\t\t\t\t\tinputRef.current.value = '';\n\t\t\t\t\t\t\tsetOptions([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tkeys: [{ key: 'Enter', ctrlKey: false }],\n\t\t\t\thaveToPreventDefault: true\n\t\t\t}\n\t\t],\n\t\t[onChange, options, resourceAvailability, setOptions]\n\t);\n\n\tuseKeyboard(inputRef, backspaceEvent);\n\n\treturn (\n\t\t<>\n\t\t\t<Container width=\"100%\" height=\"100%\">\n\t\t\t\t<ChipInput\n\t\t\t\t\tinputRef={inputRef}\n\t\t\t\t\tconfirmChipOnBlur={false}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tseparators={[]}\n\t\t\t\t\tvalue={resourceAvailability}\n\t\t\t\t\toptions={options}\n\t\t\t\t\tonInputType={onInputType}\n\t\t\t\t\tonAdd={onAdd}\n\t\t\t\t\t// todo: fix chip value\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tbackground=\"white\"\n\t\t\t\t\tstyle={{ border: '1px solid lightgray' }}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<EditorAvailabilityWarningRow\n\t\t\t\tlabel={warningLabel}\n\t\t\t\tlist={attendeesAvailabilityList}\n\t\t\t\titems={resourceAvailability}\n\t\t\t\teditorId={editorId}\n\t\t\t/>\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { soapFetch } from '@zextras/carbonio-shell-ui';\n\nimport { SearchReturnType } from './search-request';\n\nexport const searchResources = async (\n\tname: string,\n\toffset = 0,\n\tlimit = 20\n): Promise<SearchReturnType> => {\n\tconst response: SearchReturnType = await soapFetch('AutoCompleteGal', {\n\t\tname,\n\t\tlimit,\n\t\tneedExp: 1,\n\t\toffset,\n\t\ttype: 'resource',\n\t\t_jsns: 'urn:zimbraAccount'\n\t});\n\treturn response?.Fault ? { ...response.Fault, error: true } : response;\n};\n","/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport { DropdownItem } from '@zextras/carbonio-design-system';\nimport { filter, map, uniqBy } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { EditorResourceComponent, Loader, normalizeResources } from './editor-resource-component';\nimport { searchResources } from '../../../soap/search-resources';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorDisabled, selectEditorEquipment } from '../../../store/selectors/editor';\nimport { editEditorEquipment } from '../../../store/slices/editor-slice';\nimport { useAppStatusStore } from '../../../store/zustand/store';\nimport { Resource } from '../../../types/editor';\n\nexport const EditorEquipments = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst dispatch = useAppDispatch();\n\tconst [t] = useTranslation();\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst equipmentValue = useAppSelector(selectEditorEquipment(editorId));\n\n\tconst equipmentChipValue = useMemo(\n\t\t() =>\n\t\t\tmap(\n\t\t\t\tequipmentValue,\n\t\t\t\t(result) =>\n\t\t\t\t\t({\n\t\t\t\t\t\tid: result.id,\n\t\t\t\t\t\tlabel: result.label,\n\t\t\t\t\t\temail: result.email,\n\t\t\t\t\t\tavatarIcon: 'BriefcaseOutline',\n\t\t\t\t\t\tavatarBackground: 'transparent',\n\t\t\t\t\t\tavatarColor: 'gray0'\n\t\t\t\t\t}) as const\n\t\t\t),\n\t\t[equipmentValue]\n\t);\n\n\tconst [options, setOptions] = useState<Array<DropdownItem>>([]);\n\n\tconst onChange = useCallback(\n\t\t(e: Array<Resource>) => {\n\t\t\tif (e) {\n\t\t\t\tconst newValue = e.length > 0 ? uniqBy(e, 'label') : [];\n\t\t\t\tdispatch(editEditorEquipment({ id: editorId, equipment: newValue }));\n\t\t\t}\n\t\t},\n\t\t[dispatch, editorId]\n\t);\n\n\tconst placeholder = useMemo(() => t('label.equipment', 'Equipment'), [t]);\n\tconst warningLabel = useMemo(\n\t\t() =>\n\t\t\tt(\n\t\t\t\t'attendees_equipments_unavailable',\n\t\t\t\t'One or more Equipments are not available at the selected time of the event'\n\t\t\t),\n\t\t[t]\n\t);\n\tconst singleWarningLabel = useMemo(\n\t\t() =>\n\t\t\tt(\n\t\t\t\t'attendee_equipment_unavailable',\n\t\t\t\t'Equipment not available at the selected time of the event'\n\t\t\t),\n\t\t[t]\n\t);\n\n\tconst onInputType = useCallback((e) => {\n\t\tif (e.textContent && e.textContent !== '') {\n\t\t\tsetOptions([\n\t\t\t\t{\n\t\t\t\t\tid: 'loading',\n\t\t\t\t\tlabel: 'loading',\n\t\t\t\t\tcustomComponent: <Loader />,\n\t\t\t\t\tdisabled: true\n\t\t\t\t}\n\t\t\t]);\n\t\t\tsearchResources(e.textContent).then((response) => {\n\t\t\t\tif (!response.error) {\n\t\t\t\t\tconst equipmentResource = filter(\n\t\t\t\t\t\tresponse.cn,\n\t\t\t\t\t\t(cn) => cn._attrs.zimbraCalResType === 'Equipment'\n\t\t\t\t\t);\n\t\t\t\t\tconst remoteResources = map(equipmentResource, (result) => normalizeResources(result));\n\n\t\t\t\t\tconst res = map(equipmentResource, (result) => ({\n\t\t\t\t\t\tid: result.fileAsStr,\n\t\t\t\t\t\tlabel: result.fileAsStr,\n\t\t\t\t\t\ticon: 'BriefcaseOutline',\n\t\t\t\t\t\tvalue: normalizeResources(result)\n\t\t\t\t\t}));\n\t\t\t\t\tuseAppStatusStore.setState({ equipment: uniqBy(remoteResources, 'label') });\n\t\t\t\t\tsetOptions(res);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<EditorResourceComponent\n\t\t\tonChange={onChange}\n\t\t\teditorId={editorId}\n\t\t\tonInputType={onInputType}\n\t\t\tplaceholder={placeholder}\n\t\t\tresourcesValue={equipmentChipValue ?? []}\n\t\t\toptions={options}\n\t\t\tsetOptions={setOptions}\n\t\t\twarningLabel={warningLabel}\n\t\t\tdisabled={disabled?.equipment}\n\t\t\tsingleWarningLabel={singleWarningLabel}\n\t\t/>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { Container, Padding, Select, Text } from '@zextras/carbonio-design-system';\nimport type { TFunction } from 'i18next';\nimport { find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport LabelFactory, { Square } from './select-label-factory';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorDisabled, selectEditorFreeBusy } from '../../../store/selectors/editor';\nimport { editEditorDisplayStatus } from '../../../store/slices/editor-slice';\n\ntype ItemProps = {\n\tlabel: string;\n\tcolor: string;\n};\n\nconst StatusItemComponent = ({ label, color }: ItemProps): ReactElement => (\n\t<Container width=\"fit\" mainAlignment=\"flex-start\" orientation=\"horizontal\">\n\t\t<Square color={color} />\n\t\t<Padding left=\"small\">\n\t\t\t<Text>{label}</Text>\n\t\t</Padding>\n\t</Container>\n);\n\nconst STATUS_VALUES = {\n\tFREE: 'F',\n\tTENTATIVE: 'T',\n\tBUSY: 'B',\n\tOUT_OF_OFFICE: 'O'\n};\n\nconst getStatusItems = (t: TFunction): Array<any> => [\n\t{\n\t\tlabel: t('label.free', 'Free'),\n\t\tvalue: STATUS_VALUES.FREE,\n\t\tcolor: '#ffffff',\n\t\tcustomComponent: <StatusItemComponent label={t('label.free', 'Free')} color=\"#ffffff\" />\n\t},\n\t{\n\t\tlabel: t('label.tentative', 'Tentative'),\n\t\tvalue: STATUS_VALUES.TENTATIVE,\n\t\tcolor: '#ffc107',\n\t\tcustomComponent: (\n\t\t\t<StatusItemComponent label={t('label.tentative', 'Tentative')} color=\"#ffc107\" />\n\t\t)\n\t},\n\t{\n\t\tlabel: t('label.busy', 'Busy'),\n\t\tvalue: STATUS_VALUES.BUSY,\n\t\tcolor: '#d5e3f6',\n\t\tcustomComponent: <StatusItemComponent label={t('label.busy', 'Busy')} color=\"#d5e3f6\" />\n\t},\n\t{\n\t\tlabel: t('label.out_of_office', 'Out of office'),\n\t\tvalue: STATUS_VALUES.OUT_OF_OFFICE,\n\t\tcolor: '#d5e3f6',\n\t\tcustomComponent: (\n\t\t\t<StatusItemComponent label={t('label.out_of_office', 'Out of office')} color=\"#2b73d2\" />\n\t\t)\n\t}\n];\n\nexport const EditorFreeBusySelector = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst [t] = useTranslation();\n\tconst statusItems = useMemo(() => getStatusItems(t), [t]);\n\tconst freeBusy = useAppSelector(selectEditorFreeBusy(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst getNewSelection = useCallback(\n\t\t(e) => find(statusItems, ['value', e]) ?? statusItems[0],\n\t\t[statusItems]\n\t);\n\n\tconst [selected, setSelected] = useState(getNewSelection(freeBusy));\n\n\tconst onChange = useCallback(\n\t\t(value) => {\n\t\t\tdispatch(editEditorDisplayStatus({ id: editorId, freeBusy: value }));\n\t\t\tsetSelected(getNewSelection(value));\n\t\t},\n\t\t[dispatch, editorId, getNewSelection]\n\t);\n\n\tuseEffect(() => {\n\t\tif (freeBusy) {\n\t\t\tsetSelected(getNewSelection(freeBusy));\n\t\t}\n\t}, [freeBusy, getNewSelection]);\n\n\treturn selected ? (\n\t\t<Select\n\t\t\titems={statusItems}\n\t\t\tbackground=\"white\"\n\t\t\tlabel={t('label.display', 'Display')}\n\t\t\tonChange={onChange}\n\t\t\tselection={selected}\n\t\t\tdisabled={disabled?.freeBusy}\n\t\t\tLabelFactory={LabelFactory}\n\t\t\tstyle={{ border: '1px solid lightgray' }}\n\t\t/>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { Input } from '@zextras/carbonio-design-system';\nimport { isNil, debounce } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorDisabled, selectEditorLocation } from '../../../store/selectors/editor';\nimport { editEditorLocation } from '../../../store/slices/editor-slice';\n\nexport const EditorLocation = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst [t] = useTranslation();\n\tconst location = useAppSelector(selectEditorLocation(editorId));\n\tconst [value, setValue] = useState(location ?? '');\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tuseEffect(() => {\n\t\tif (location) {\n\t\t\tsetValue(location);\n\t\t}\n\t}, [location]);\n\n\tconst debounceInput = useMemo(\n\t\t() =>\n\t\t\tdebounce(\n\t\t\t\t(loc) => {\n\t\t\t\t\tdispatch(editEditorLocation({ id: editorId, location: loc }));\n\t\t\t\t},\n\t\t\t\t500,\n\t\t\t\t{\n\t\t\t\t\ttrailing: true,\n\t\t\t\t\tleading: false\n\t\t\t\t}\n\t\t\t),\n\t\t[dispatch, editorId]\n\t);\n\n\tconst onChange = useCallback(\n\t\t(e) => {\n\t\t\tsetValue(e.target.value);\n\t\t\tdebounceInput(e.target.value);\n\t\t},\n\t\t[debounceInput]\n\t);\n\n\treturn !isNil(location) ? (\n\t\t<Input\n\t\t\tlabel={t('label.location', 'Location')}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tdisabled={disabled?.location}\n\t\t\tbackgroundColor=\"white\"\n\t\t\tdata-testid=\"editor-location\"\n\t\t\tstyle={{ border: '1px solid lightgray' }}\n\t\t/>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport { DropdownItem } from '@zextras/carbonio-design-system';\nimport { filter, map, uniqBy } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { EditorResourceComponent, Loader, normalizeResources } from './editor-resource-component';\nimport { searchResources } from '../../../soap/search-resources';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorDisabled, selectEditorMeetingRoom } from '../../../store/selectors/editor';\nimport { editEditorMeetingRoom } from '../../../store/slices/editor-slice';\nimport { useAppStatusStore } from '../../../store/zustand/store';\nimport { Resource } from '../../../types/editor';\n\nexport const EditorMeetingRooms = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst dispatch = useAppDispatch();\n\tconst [t] = useTranslation();\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\n\tconst meetingRoomsValue = useAppSelector(selectEditorMeetingRoom(editorId));\n\n\tconst meetingRoomsChipValue = useMemo(\n\t\t() =>\n\t\t\tmap(\n\t\t\t\tmeetingRoomsValue,\n\t\t\t\t(result) =>\n\t\t\t\t\t({\n\t\t\t\t\t\tid: result.id,\n\t\t\t\t\t\tlabel: result.label,\n\t\t\t\t\t\temail: result.email,\n\t\t\t\t\t\tavatarIcon: 'BuildingOutline',\n\t\t\t\t\t\tavatarBackground: 'transparent',\n\t\t\t\t\t\tavatarColor: 'gray0'\n\t\t\t\t\t}) as const\n\t\t\t),\n\t\t[meetingRoomsValue]\n\t);\n\n\tconst [options, setOptions] = useState<Array<DropdownItem>>([]);\n\n\tconst onChange = useCallback(\n\t\t(e: Array<Resource>) => {\n\t\t\tif (e) {\n\t\t\t\tconst newValue = e.length > 0 ? uniqBy(e, 'label') : [];\n\t\t\t\tdispatch(editEditorMeetingRoom({ id: editorId, meetingRoom: newValue }));\n\t\t\t}\n\t\t},\n\t\t[dispatch, editorId]\n\t);\n\n\tconst placeholder = useMemo(() => t('label.meeting_room', 'Meeting room'), [t]);\n\tconst warningLabel = useMemo(\n\t\t() =>\n\t\t\tt(\n\t\t\t\t'attendees_rooms_unavailable',\n\t\t\t\t'One or more Meeting Rooms are not available at the selected time of the event'\n\t\t\t),\n\t\t[t]\n\t);\n\tconst singleWarningLabel = useMemo(\n\t\t() => t('attendee_room_unavailable', 'Room not available at the selected time of the event'),\n\t\t[t]\n\t);\n\tconst onInputType = useCallback((e) => {\n\t\tif (e.textContent && e.textContent !== '') {\n\t\t\tsetOptions([\n\t\t\t\t{\n\t\t\t\t\tid: 'loading',\n\t\t\t\t\tlabel: 'loading',\n\t\t\t\t\tcustomComponent: <Loader />,\n\t\t\t\t\tdisabled: true\n\t\t\t\t}\n\t\t\t]);\n\t\t\tsearchResources(e.textContent).then((response) => {\n\t\t\t\tif (!response.error) {\n\t\t\t\t\tconst meetingResources = filter(\n\t\t\t\t\t\tresponse.cn,\n\t\t\t\t\t\t(cn) => cn._attrs.zimbraCalResType === 'Location'\n\t\t\t\t\t);\n\t\t\t\t\tconst remoteResources = map(meetingResources, (result) => normalizeResources(result));\n\n\t\t\t\t\tconst res = map(meetingResources, (result) => ({\n\t\t\t\t\t\tid: result.fileAsStr,\n\t\t\t\t\t\tlabel: result.fileAsStr,\n\t\t\t\t\t\ticon: 'BuildingOutline',\n\t\t\t\t\t\tvalue: normalizeResources(result)\n\t\t\t\t\t}));\n\t\t\t\t\tuseAppStatusStore.setState({ meetingRoom: uniqBy(remoteResources, 'label') });\n\t\t\t\t\tsetOptions(res);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<EditorResourceComponent\n\t\t\tonChange={onChange}\n\t\t\teditorId={editorId}\n\t\t\tonInputType={onInputType}\n\t\t\tplaceholder={placeholder}\n\t\t\tresourcesValue={meetingRoomsChipValue ?? []}\n\t\t\toptions={options}\n\t\t\tsetOptions={setOptions}\n\t\t\twarningLabel={warningLabel}\n\t\t\tdisabled={disabled?.equipment}\n\t\t\tsingleWarningLabel={singleWarningLabel}\n\t\t/>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo } from 'react';\n\nimport { Select } from '@zextras/carbonio-design-system';\nimport { find, upperFirst } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { useIdentityItems } from '../../../hooks/use-idenity-items';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorDisabled, selectSender } from '../../../store/selectors/editor';\nimport { editSender } from '../../../store/slices/editor-slice';\nimport { EditorProps } from '../../../types/editor';\n\nexport const EditorOrganizer = ({ editorId }: EditorProps): ReactElement | null => {\n\tconst [t] = useTranslation();\n\tconst identities = useIdentityItems();\n\tconst sender = useAppSelector(selectSender(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst onChange = useCallback(\n\t\t(e) => {\n\t\t\tconst newValue = find(identities, ['value', e]) ?? sender;\n\t\t\tdispatch(editSender({ id: editorId, sender: newValue }));\n\t\t},\n\t\t[identities, sender, dispatch, editorId]\n\t);\n\n\tconst fromLabel = useMemo(() => upperFirst(t('label.from', 'From')), [t]);\n\treturn sender ? (\n\t\t<Select\n\t\t\tstyle={{ border: '1px solid lightgray' }}\n\t\t\tbackground=\"white\"\n\t\t\titems={identities}\n\t\t\tlabel={fromLabel}\n\t\t\tselection={sender}\n\t\t\tonChange={onChange}\n\t\t\tdisabled={disabled?.organizer}\n\t\t/>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useMemo } from 'react';\n\nimport { useUserAccount } from '@zextras/carbonio-shell-ui';\nimport { compact, map, sortBy } from 'lodash';\n\nimport { IdentityItem } from '../types/editor';\n\nexport const useIdentityItems = (): Array<IdentityItem> => {\n\tconst account = useUserAccount();\n\n\treturn useMemo(() => {\n\t\tconst sortedList = sortBy(account.identities.identity, ({ name }) =>\n\t\t\tname === 'DEFAULT' ? 0 : 1\n\t\t);\n\n\t\treturn map(sortedList, (item, idx) => {\n\t\t\tconst name = item._attrs?.zimbraPrefIdentityName\n\t\t\t\t? `${item._attrs?.zimbraPrefIdentityName}`\n\t\t\t\t: '';\n\t\t\tconst display = item._attrs?.zimbraPrefFromDisplay\n\t\t\t\t? `${item._attrs?.zimbraPrefFromDisplay}`\n\t\t\t\t: '';\n\t\t\tconst fromAddress = item._attrs?.zimbraPrefFromAddress\n\t\t\t\t? `(<${item._attrs?.zimbraPrefFromAddress}>)`\n\t\t\t\t: '';\n\n\t\t\tconst label = compact([name, display, fromAddress]).join(' ');\n\t\t\treturn {\n\t\t\t\tvalue: `${idx}`,\n\t\t\t\tlabel,\n\t\t\t\taddress: item._attrs?.zimbraPrefFromAddress,\n\t\t\t\tfullName: item._attrs?.zimbraPrefFromDisplay,\n\t\t\t\ttype: item._attrs?.zimbraPrefFromAddressType,\n\t\t\t\tidentityName: item.name\n\t\t\t};\n\t\t});\n\t}, [account.identities.identity]);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Checkbox } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorClass, selectEditorDisabled } from '../../../store/selectors/editor';\nimport { editEditorClass } from '../../../store/slices/editor-slice';\n\nexport const EditorPrivateCheckbox = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst [t] = useTranslation();\n\tconst dispatch = useAppDispatch();\n\tconst apptClass = useAppSelector(selectEditorClass(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\n\tconst onClick = useCallback(() => {\n\t\tconst newValue = apptClass === 'PRI' ? 'PUB' : 'PRI';\n\t\tdispatch(\n\t\t\teditEditorClass({\n\t\t\t\tid: editorId,\n\t\t\t\tclass: newValue\n\t\t\t})\n\t\t);\n\t}, [apptClass, dispatch, editorId]);\n\n\treturn (\n\t\t<Checkbox\n\t\t\tlabel={t('label.private', 'Private')}\n\t\t\tonClick={onClick}\n\t\t\tvalue={apptClass === 'PRI'}\n\t\t\tdisabled={disabled?.private}\n\t\t/>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { Select, Icon, Row, Container, Text, SelectProps } from '@zextras/carbonio-design-system';\nimport type { TFunction } from 'i18next';\nimport { find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorDisabled, selectEditorReminder } from '../../../store/selectors/editor';\nimport { editEditorReminder } from '../../../store/slices/editor-slice';\n\nconst getReminderItems = (t: TFunction): Array<{ label: string; value: string }> => [\n\t{ label: t('reminder.never', 'Never'), value: '0' },\n\t{ label: t('reminder.at_time_of_event', 'At the time of the event'), value: '-1' },\n\t{\n\t\tlabel: t('reminder.minute_before', {\n\t\t\tcount: 1,\n\t\t\tdefaultValue_one: '{{count}} minute before',\n\t\t\tdefaultValue_other: '{{count}} minutes before'\n\t\t}),\n\t\tvalue: '1'\n\t},\n\t{\n\t\tlabel: t('reminder.minute_before', {\n\t\t\tcount: 5,\n\t\t\tdefaultValue_one: '{{count}} minute before',\n\t\t\tdefaultValue_other: '{{count}} minutes before'\n\t\t}),\n\t\tvalue: '5'\n\t},\n\t{\n\t\tlabel: t('reminder.minute_before', {\n\t\t\tcount: 10,\n\t\t\tdefaultValue_one: '{{count}} minute before',\n\t\t\tdefaultValue_other: '{{count}} minutes before'\n\t\t}),\n\t\tvalue: '10'\n\t},\n\t{\n\t\tlabel: t('reminder.minute_before', {\n\t\t\tcount: 15,\n\t\t\tdefaultValue_one: '{{count}} minute before',\n\t\t\tdefaultValue_other: '{{count}} minutes before'\n\t\t}),\n\t\tvalue: '15'\n\t},\n\t{\n\t\tlabel: t('reminder.minute_before', {\n\t\t\tcount: 30,\n\t\t\tdefaultValue_one: '{{count}} minute before',\n\t\t\tdefaultValue_other: '{{count}} minutes before'\n\t\t}),\n\t\tvalue: '30'\n\t},\n\t{\n\t\tlabel: t('reminder.minute_before', {\n\t\t\tcount: 45,\n\t\t\tdefaultValue_one: '{{count}} minute before',\n\t\t\tdefaultValue_other: '{{count}} minutes before'\n\t\t}),\n\t\tvalue: '45'\n\t},\n\t{\n\t\tlabel: t('reminder.hour_before', {\n\t\t\tcount: 1,\n\t\t\tdefaultValue_one: '{{count}} hour before',\n\t\t\tdefaultValue_other: '{{count}} hours before'\n\t\t}),\n\t\tvalue: '60'\n\t},\n\t{\n\t\tlabel: t('reminder.hour_before', {\n\t\t\tcount: 2,\n\t\t\tdefaultValue_one: '{{count}} hour before',\n\t\t\tdefaultValue_other: '{{count}} hours before'\n\t\t}),\n\t\tvalue: '120'\n\t},\n\t{\n\t\tlabel: t('reminder.hour_before', {\n\t\t\tcount: 4,\n\t\t\tdefaultValue_one: '{{count}} hour before',\n\t\t\tdefaultValue_other: '{{count}} hours before'\n\t\t}),\n\t\tvalue: '240'\n\t},\n\t{\n\t\tlabel: t('reminder.hour_before', {\n\t\t\tcount: 5,\n\t\t\tdefaultValue_one: '{{count}} hour before',\n\t\t\tdefaultValue_other: '{{count}} hours before'\n\t\t}),\n\t\tvalue: '300'\n\t},\n\t{\n\t\tlabel: t('reminder.hour_before', {\n\t\t\tcount: 18,\n\t\t\tdefaultValue_one: '{{count}} hour before',\n\t\t\tdefaultValue_other: '{{count}} hours before'\n\t\t}),\n\t\tvalue: (18 * 60).toString()\n\t},\n\t{\n\t\tlabel: t('reminder.day_before', {\n\t\t\tcount: 1,\n\t\t\tdefaultValue_one: '{{count}} day before',\n\t\t\tdefaultValue_other: '{{count}} days before'\n\t\t}),\n\t\tvalue: (24 * 60).toString()\n\t},\n\t{\n\t\tlabel: t('reminder.day_before', {\n\t\t\tcount: 2,\n\t\t\tdefaultValue_one: '{{count}} day before',\n\t\t\tdefaultValue_other: '{{count}} days before'\n\t\t}),\n\t\tvalue: (48 * 60).toString()\n\t},\n\t{\n\t\tlabel: t('reminder.day_before', {\n\t\t\tcount: 3,\n\t\t\tdefaultValue_one: '{{count}} day before',\n\t\t\tdefaultValue_other: '{{count}} days before'\n\t\t}),\n\t\tvalue: (72 * 60).toString()\n\t},\n\t{\n\t\tlabel: t('reminder.day_before', {\n\t\t\tcount: 4,\n\t\t\tdefaultValue_one: '{{count}} day before',\n\t\t\tdefaultValue_other: '{{count}} days before'\n\t\t}),\n\t\tvalue: (4 * 24 * 60).toString()\n\t},\n\t{\n\t\tlabel: t('reminder.week_before', {\n\t\t\tcount: 1,\n\t\t\tdefaultValue_one: '{{count}} week before',\n\t\t\tdefaultValue_other: '{{count}} weeks before'\n\t\t}),\n\t\tvalue: (7 * 24 * 60).toString()\n\t},\n\t{\n\t\tlabel: t('reminder.week_before', {\n\t\t\tcount: 2,\n\t\t\tdefaultValue_one: '{{count}} week before',\n\t\t\tdefaultValue_other: '{{count}} weeks before'\n\t\t}),\n\t\tvalue: (2 * 7 * 24 * 60).toString()\n\t}\n];\n\nexport const ColorContainer = styled(Container)`\n\tborder-bottom: 0.0625rem solid ${({ theme }): string => theme.palette.gray2.regular};\n`;\n\nexport const TextUpperCase = styled(Text)`\n\ttext-transform: capitalize;\n`;\n\nconst LabelFactory: SelectProps['LabelFactory'] = ({ selected, label, open, focus }) => (\n\t<ColorContainer\n\t\torientation=\"horizontal\"\n\t\twidth=\"fill\"\n\t\tcrossAlignment=\"center\"\n\t\tmainAlignment=\"space-between\"\n\t\tborderRadius=\"half\"\n\t\tbackground=\"gray5\"\n\t\tpadding={{\n\t\t\tall: 'small'\n\t\t}}\n\t>\n\t\t<Row width=\"100%\" takeAvailableSpace mainAlignment=\"space-between\">\n\t\t\t<Row\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ left: 'small' }}\n\t\t\t>\n\t\t\t\t<Text size=\"small\" color={open || focus ? 'primary' : 'secondary'}>\n\t\t\t\t\t{label}\n\t\t\t\t</Text>\n\t\t\t\t<Row>\n\t\t\t\t\t<TextUpperCase>{selected[0].label}</TextUpperCase>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t</Row>\n\t\t<Icon\n\t\t\tsize=\"large\"\n\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\tcolor={open || focus ? 'primary' : 'secondary'}\n\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t/>\n\t</ColorContainer>\n);\n\ntype SelectValue =\n\t| {\n\t\t\tlabel: string;\n\t\t\tvalue: string;\n\t  }\n\t| undefined;\n\nexport const EditorReminder = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst [t] = useTranslation();\n\tconst reminderItems = useMemo(() => getReminderItems(t), [t]);\n\tconst reminder = useAppSelector(selectEditorReminder(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst getNewSelection = useCallback(\n\t\t(e) => find(reminderItems, ['value', e]) ?? reminderItems[0],\n\t\t[reminderItems]\n\t);\n\n\tconst [selected, setSelected] = useState<SelectValue>(undefined);\n\n\tconst onChange = useCallback(\n\t\t(e) => {\n\t\t\tdispatch(editEditorReminder({ id: editorId, reminder: e }));\n\t\t\tsetSelected(getNewSelection(e));\n\t\t},\n\t\t[dispatch, editorId, getNewSelection]\n\t);\n\n\tuseEffect(() => {\n\t\tif (reminder) {\n\t\t\tsetSelected(getNewSelection(reminder));\n\t\t}\n\t}, [reminder, getNewSelection]);\n\n\treturn selected ? (\n\t\t<Select\n\t\t\titems={reminderItems}\n\t\t\tdisabled={disabled?.reminder}\n\t\t\tlabel={t('label.reminder', 'Reminder')}\n\t\t\tdropdownMaxHeight=\"12.5rem\"\n\t\t\tonChange={onChange}\n\t\t\tselection={selected}\n\t\t\tdisablePortal\n\t\t\tLabelFactory={LabelFactory}\n\t\t\tbackground=\"white\"\n\t\t\tstyle={{ border: '1px solid lightgray' }}\n\t\t/>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2024 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { soapFetch } from '@zextras/carbonio-shell-ui';\n\nimport { SEARCH_RESOURCE_OP, SEARCH_RESOURCES_ATTRS } from '../constants/api';\nimport { Cn } from '../types/soap/soap-actions';\n\nexport type searchCalendarRejectedType = {\n\terror: boolean;\n\tFault: any;\n\tcalresource?: never;\n\tmore?: never;\n\toffset?: never;\n\tsortBy?: never;\n};\n\nexport type searchCalendarFulfilledType = {\n\tcalresource?: Cn;\n\tFault?: never;\n\terror?: never;\n\tmore: boolean;\n\toffset: number;\n\tsortBy: string;\n};\n\nexport type searchCalendarReturnType = searchCalendarFulfilledType | searchCalendarRejectedType;\n\nexport const searchCalendarResourcesRequest = async (\n\tvalue: string\n): Promise<searchCalendarReturnType> => {\n\tconst response: searchCalendarReturnType = await soapFetch('SearchCalendarResources', {\n\t\tattrs: `${SEARCH_RESOURCES_ATTRS.EMAIL},${SEARCH_RESOURCES_ATTRS.CAL_RES_TYPE},${SEARCH_RESOURCES_ATTRS.FULL_NAME}`,\n\t\tsearchFilter: {\n\t\t\tconds: {\n\t\t\t\tor: '1',\n\t\t\t\tcond: {\n\t\t\t\t\tattr: SEARCH_RESOURCES_ATTRS.CAL_RES_TYPE,\n\t\t\t\t\top: SEARCH_RESOURCE_OP.EQUAL,\n\t\t\t\t\tvalue\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_jsns: 'urn:zimbraAccount'\n\t});\n\treturn response?.Fault ? { ...response.Fault, error: true } : response;\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useEffect, useState } from 'react';\n\nimport { map } from 'lodash';\n\nimport { searchCalendarResourcesRequest } from '../../../soap/search-calendar-resources-request';\nimport { useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorEquipment, selectEditorMeetingRoom } from '../../../store/selectors/editor';\nimport { useAppStatusStore } from '../../../store/zustand/store';\nimport { Contact } from '../../../types/soap/soap-actions';\n\nconst normalizeResources = (\n\tr: Contact\n): { id: string; label: string; value: string; email: string; type: string } => ({\n\tid: r.id,\n\tlabel: r._attrs.fullName,\n\tvalue: r._attrs.fullName,\n\temail: r._attrs.email,\n\ttype: r._attrs.zimbraCalResType\n});\n\nexport const EditorResourcesController = ({ editorId }: { editorId: string }): null => {\n\tconst meetingRoomsValue = useAppSelector(selectEditorMeetingRoom(editorId));\n\tconst equipmentsValue = useAppSelector(selectEditorEquipment(editorId));\n\n\tconst [isLoading, setIsLoading] = useState<boolean>(false);\n\n\tuseEffect(() => {\n\t\tif (!isLoading) {\n\t\t\tif (meetingRoomsValue) {\n\t\t\t\tsearchCalendarResourcesRequest('Location').then((res) => {\n\t\t\t\t\tsetIsLoading(true);\n\t\t\t\t\tuseAppStatusStore.setState({\n\t\t\t\t\t\tmeetingRoom: res.calresource\n\t\t\t\t\t\t\t? map(res.calresource, (r) => normalizeResources(r))\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (equipmentsValue) {\n\t\t\t\tsearchCalendarResourcesRequest('Equipment').then((res) => {\n\t\t\t\t\tsetIsLoading(true);\n\t\t\t\t\tuseAppStatusStore.setState({\n\t\t\t\t\t\tequipment: res.calresource\n\t\t\t\t\t\t\t? map(res.calresource, (r) => normalizeResources(r))\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [equipmentsValue, isLoading, meetingRoomsValue, setIsLoading]);\n\treturn null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport {\n\tAvatar,\n\tContainer,\n\tIcon,\n\tPadding,\n\tRow,\n\tText,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport { map } from 'lodash';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport { CALENDARS_STANDARD_COLORS } from '../../../constants/calendar';\nimport { useGetEventTimezoneString } from '../../../hooks/use-get-event-timezone';\nimport { getLocalTime } from '../../../normalizations/normalize-editor';\nimport { useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditorAllDay,\n\tselectEditorCalendar,\n\tselectEditorEnd,\n\tselectEditorEquipment,\n\tselectEditorLocation,\n\tselectEditorMeetingRoom,\n\tselectEditorRoom,\n\tselectEditorStart,\n\tselectEditorTimezone,\n\tselectEditorTitle\n} from '../../../store/selectors/editor';\n\nexport const AvatarComp = styled(Avatar)`\n\tsvg {\n\t\twidth: 1.5rem;\n\t\tmin-width: 1.5rem;\n\t\theight: 1.5rem;\n\t\tmin-height: 1.5rem;\n\t}\n`;\n\nconst TitleRow = ({ children }: { children: ReactElement }): ReactElement => (\n\t<Container\n\t\tmainAlignment=\"flex-start\"\n\t\tcrossAlignment=\"flex-start\"\n\t\tpadding={{ top: 'extrasmall' }}\n\t\torientation=\"horizontal\"\n\t>\n\t\t{children}\n\t</Container>\n);\n\nexport const EditorSummary = ({ editorId }: { editorId: string }): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst start = useAppSelector(selectEditorStart(editorId));\n\tconst end = useAppSelector(selectEditorEnd(editorId));\n\tconst timezone = useAppSelector(selectEditorTimezone(editorId));\n\tconst location = useAppSelector(selectEditorLocation(editorId));\n\tconst meetingRoom = useAppSelector(selectEditorMeetingRoom(editorId));\n\tconst equipments = useAppSelector(selectEditorEquipment(editorId));\n\tconst room = useAppSelector(selectEditorRoom(editorId));\n\tconst title = useAppSelector(selectEditorTitle(editorId));\n\tconst calendar = useAppSelector(selectEditorCalendar(editorId));\n\tconst allDay = useAppSelector(selectEditorAllDay(editorId));\n\n\tconst meetingRoomField = useMemo(() => {\n\t\tif (meetingRoom && meetingRoom.length > 0) {\n\t\t\tconst res = map(meetingRoom, (roo) => roo.label);\n\t\t\treturn res.join(', ');\n\t\t}\n\t\treturn meetingRoom;\n\t}, [meetingRoom]);\n\n\tconst equipmentsField = useMemo(() => {\n\t\tif (equipments && equipments.length > 0) {\n\t\t\tconst res = map(equipments, (eq) => eq.label);\n\t\t\treturn res.join(', ');\n\t\t}\n\t\treturn equipments;\n\t}, [equipments]);\n\n\tconst virtualRoom = useMemo(() => room?.label, [room?.label]);\n\n\tconst localTimezone = useMemo(() => moment.tz.guess(), []);\n\n\t/* start and end value are already converted to the creation timezone value, so to convert it back to the local timezone we need to convert it again to local */\n\tconst localStart = useMemo(\n\t\t() => getLocalTime(start ?? 0, localTimezone, timezone),\n\t\t[localTimezone, start, timezone]\n\t);\n\tconst localEnd = useMemo(\n\t\t() => getLocalTime(end ?? 0, localTimezone, timezone),\n\t\t[end, localTimezone, timezone]\n\t);\n\n\tconst { eventTimeString, eventTimezoneString, showTimezoneTooltip, eventTimezoneTooltip } =\n\t\tuseGetEventTimezoneString(localStart, localEnd, allDay, timezone);\n\n\treturn (\n\t\t<Row\n\t\t\theight=\"fit\"\n\t\t\twidth=\"fill\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\twrap=\"nowrap\"\n\t\t\tpadding={{ top: 'large', bottom: 'medium' }}\n\t\t>\n\t\t\t<AvatarComp\n\t\t\t\tsize=\"large\"\n\t\t\t\ticon=\"Calendar2\"\n\t\t\t\tstyle={{\n\t\t\t\t\tbackground: calendar?.color?.color ?? CALENDARS_STANDARD_COLORS?.[0]?.color\n\t\t\t\t}}\n\t\t\t\tlabel=\"\"\n\t\t\t/>\n\n\t\t\t<Row\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\theight=\"fit\"\n\t\t\t\tpadding={{ left: 'large' }}\n\t\t\t\ttakeAvailableSpace\n\t\t\t>\n\t\t\t\t<Container mainAlignment=\"space-between\" orientation=\"horizontal\">\n\t\t\t\t\t<Text overflow=\"ellipsis\" weight=\"bold\" size=\"small\">\n\t\t\t\t\t\t{title || t('label.subject', 'Subject')}\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon=\"Calendar2\"\n\t\t\t\t\t\tcustomColor={calendar?.color?.color ?? CALENDARS_STANDARD_COLORS?.[0]?.color}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t\t<TitleRow>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Text overflow=\"ellipsis\" color=\"secondary\" weight=\"bold\" size=\"small\">\n\t\t\t\t\t\t\t{eventTimeString}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t{showTimezoneTooltip && (\n\t\t\t\t\t\t\t<Tooltip label={eventTimezoneTooltip}>\n\t\t\t\t\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t\t\t\t\t<Icon icon=\"GlobeOutline\" color=\"gray1\" />\n\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</TitleRow>\n\t\t\t\t<TitleRow>\n\t\t\t\t\t<Text overflow=\"ellipsis\" color=\"secondary\" weight=\"bold\" size=\"small\">\n\t\t\t\t\t\t{eventTimezoneString}\n\t\t\t\t\t</Text>\n\t\t\t\t</TitleRow>\n\t\t\t\t<TitleRow>\n\t\t\t\t\t<Text overflow=\"ellipsis\" color=\"secondary\" size=\"small\">\n\t\t\t\t\t\t{location}\n\t\t\t\t\t</Text>\n\t\t\t\t</TitleRow>\n\t\t\t\t<TitleRow>\n\t\t\t\t\t<Text overflow=\"ellipsis\" color=\"secondary\" size=\"small\">\n\t\t\t\t\t\t{meetingRoomField}\n\t\t\t\t\t</Text>\n\t\t\t\t</TitleRow>\n\t\t\t\t{equipmentsField && (\n\t\t\t\t\t<TitleRow>\n\t\t\t\t\t\t<Text overflow=\"ellipsis\" color=\"secondary\" size=\"small\">\n\t\t\t\t\t\t\t{equipmentsField}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</TitleRow>\n\t\t\t\t)}\n\t\t\t\t{virtualRoom && (\n\t\t\t\t\t<TitleRow>\n\t\t\t\t\t\t<Text overflow=\"ellipsis\" color=\"secondary\" size=\"small\">\n\t\t\t\t\t\t\t{virtualRoom}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</TitleRow>\n\t\t\t\t)}\n\t\t\t</Row>\n\t\t</Row>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport { Select } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport { usePrefs } from '../../../carbonio-ui-commons/utils/use-prefs';\nimport { findLabel, TimeZonesOptions } from '../../../settings/components/utils';\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport {\n\tselectEditorAllDay,\n\tselectEditorDisabled,\n\tselectEditorTimezone\n} from '../../../store/selectors/editor';\nimport { editEditorTimezone } from '../../../store/slices/editor-slice';\n\ntype SelectValue =\n\t| {\n\t\t\tlabel: string;\n\t\t\tvalue: string;\n\t  }\n\t| undefined;\n\nexport const EditorTimezone = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst [t] = useTranslation();\n\tconst timezone = useAppSelector(selectEditorTimezone(editorId));\n\tconst allDay = useAppSelector(selectEditorAllDay(editorId));\n\tconst dispatch = useAppDispatch();\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\n\tconst { zimbraPrefUseTimeZoneListInCalendar } = usePrefs();\n\tconst timeZonesOptions = useMemo(() => TimeZonesOptions(t), [t]);\n\tconst timezoneLabel = t('timezones', 'Timezones');\n\tconst [value, setValue] = useState<SelectValue>(() => {\n\t\tif (timezone && zimbraPrefUseTimeZoneListInCalendar === 'TRUE') {\n\t\t\tconst label = findLabel(timeZonesOptions, timezone);\n\t\t\tif (label) {\n\t\t\t\treturn {\n\t\t\t\t\tlabel,\n\t\t\t\t\tvalue: timezone\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t});\n\n\tconst onChange = useCallback(\n\t\t(item): void => {\n\t\t\tif (item) {\n\t\t\t\tconst newTimezone = findLabel(timeZonesOptions, item);\n\t\t\t\tif (newTimezone) {\n\t\t\t\t\tsetValue({ label: newTimezone, value: item });\n\t\t\t\t}\n\t\t\t\tdispatch(editEditorTimezone({ id: editorId, timezone: item }));\n\t\t\t}\n\t\t},\n\t\t[dispatch, editorId, timeZonesOptions]\n\t);\n\n\treturn zimbraPrefUseTimeZoneListInCalendar === 'TRUE' && !allDay ? (\n\t\t<Select\n\t\t\tlabel={timezoneLabel}\n\t\t\titems={timeZonesOptions}\n\t\t\tmultiple={false}\n\t\t\tonChange={onChange}\n\t\t\tselection={value}\n\t\t\tdisabled={disabled?.timezone}\n\t\t/>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { Input } from '@zextras/carbonio-design-system';\nimport { useBoardHooks } from '@zextras/carbonio-shell-ui';\nimport { debounce, isNil } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorDisabled, selectEditorTitle } from '../../../store/selectors/editor';\nimport { editEditorTitle } from '../../../store/slices/editor-slice';\n\nexport const EditorTitle = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst [t] = useTranslation();\n\tconst title = useAppSelector(selectEditorTitle(editorId));\n\tconst [value, setValue] = useState(title ?? '');\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst dispatch = useAppDispatch();\n\tconst boardUtilities = useBoardHooks();\n\tconst updateBoard = boardUtilities?.updateBoard;\n\n\tuseEffect(() => {\n\t\tif (title) {\n\t\t\tsetValue(title);\n\t\t}\n\t\tconst newBoardTitle = title?.length ? title : t('new_appointment', 'New appointment');\n\t\tupdateBoard({ title: newBoardTitle });\n\t}, [t, title, updateBoard]);\n\n\tconst debounceInput = useMemo(\n\t\t() =>\n\t\t\tdebounce(\n\t\t\t\t(text) => {\n\t\t\t\t\tdispatch(editEditorTitle({ id: editorId, title: text }));\n\t\t\t\t},\n\t\t\t\t500,\n\t\t\t\t{\n\t\t\t\t\ttrailing: true,\n\t\t\t\t\tleading: false\n\t\t\t\t}\n\t\t\t),\n\t\t[dispatch, editorId]\n\t);\n\n\tconst onChange = useCallback(\n\t\t(e) => {\n\t\t\tsetValue(e.target.value);\n\t\t\tdebounceInput(e.target.value);\n\t\t},\n\t\t[debounceInput]\n\t);\n\n\treturn !isNil(title) ? (\n\t\t<Input\n\t\t\tlabel={t('label.event_title', 'Event title')}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tdisabled={disabled?.title}\n\t\t\tdata-testid=\"editor-title\"\n\t\t\t// eslint-disable-next-line jsx-a11y/no-autofocus\n\t\t\tautoFocus\n\t\t\tbackgroundColor=\"white\"\n\t\t\tstyle={{ border: '1px solid lightgray' }}\n\t\t/>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Row } from '@zextras/carbonio-design-system';\nimport { useIntegratedComponent } from '@zextras/carbonio-shell-ui';\n\nimport { useAppDispatch, useAppSelector } from '../../../store/redux/hooks';\nimport { selectEditorDisabled, selectEditorRoom } from '../../../store/selectors/editor';\nimport { editEditorRoom } from '../../../store/slices/editor-slice';\n\nexport const EditorVirtualRoom = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst [RoomSelector, isRoomAvailable] = useIntegratedComponent('room-selector');\n\tconst room = useAppSelector(selectEditorRoom(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\n\tconst dispatch = useAppDispatch();\n\n\tconst onChange = useCallback(\n\t\t(roomData) => {\n\t\t\tdispatch(editEditorRoom({ id: editorId, room: roomData }));\n\t\t},\n\t\t[dispatch, editorId]\n\t);\n\n\treturn isRoomAvailable ? (\n\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t<RoomSelector onChange={onChange} defaultValue={room} disabled={disabled?.virtualRoom} />\n\t\t</Row>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nexport const RECURRENCE_FREQUENCY = {\n\tDAILY: 'DAI',\n\tWEEKLY: 'WEE',\n\tMONTHLY: 'MON',\n\tYEARLY: 'YEA',\n\tNEVER: 'NONE',\n\tCUSTOM: 'CUSTOM'\n};\n\nexport const RADIO_VALUES = {\n\tEVERYDAY: 'everyday',\n\tWORKING_DAY: 'working_day',\n\tEVERY_X_DAY: 'every_x_days',\n\tDAY_OF_MONTH: 'day_of_the_month',\n\tMONTHLY_CUSTOMIZED: 'monthly_customized',\n\tQUICK_OPTIONS: 'quick_options',\n\tCUSTOM_OPTIONS: 'custom_options',\n\tNO_END_DATE: 'no_end',\n\tEND_AFTER_COUNT: 'end_after_count',\n\tEND_AFTER_UNTIL: 'end_after_until',\n\tEVERY_YEAR_ON_MONTH_DAY: 'every_year_on_month_day',\n\tEVERY_YEAR_ON_CUSTOM_DAY: 'every_year_on_custom_day'\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { createContext, Dispatch, SetStateAction } from 'react';\n\nimport { RecurrenceStartValue } from '../types/editor';\n\nexport type RecurrenceContextType = {\n\tnewStartValue: any;\n\tsetNewStartValue: Dispatch<SetStateAction<RecurrenceStartValue | undefined>>;\n\tnewEndValue: { count: { num: number } } | { until: { d: string } } | undefined;\n\tsetNewEndValue: React.Dispatch<\n\t\tReact.SetStateAction<{ count: { num: number } } | { until: { d: string } } | undefined>\n\t>;\n\tfrequency: string | undefined;\n\tsetFrequency: React.Dispatch<React.SetStateAction<string | undefined>>;\n};\n\nexport const RecurrenceContext = createContext<RecurrenceContextType | Record<string, never>>({});\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Input } from '@zextras/carbonio-design-system';\nimport { isNaN, isNumber } from 'lodash';\n\ntype IntervalInputProps = {\n\tlabel: string;\n\tvalue: number | '';\n\tsetValue: React.Dispatch<React.SetStateAction<number | ''>>;\n\tonChange: (ev: number) => void;\n\tdisabled: boolean;\n};\n\nexport const IntervalInput = ({\n\tlabel,\n\tvalue,\n\tsetValue,\n\tonChange,\n\tdisabled\n}: IntervalInputProps): ReactElement => {\n\tconst onIntervalChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev.target.value === '') {\n\t\t\t\tonChange(1);\n\t\t\t\tsetValue(ev.target.value);\n\t\t\t} else {\n\t\t\t\tconst convertedInputToNumber = parseInt(ev.target.value, 10);\n\t\t\t\tif (\n\t\t\t\t\tisNumber(convertedInputToNumber) &&\n\t\t\t\t\t!isNaN(convertedInputToNumber) &&\n\t\t\t\t\tconvertedInputToNumber >= 0\n\t\t\t\t) {\n\t\t\t\t\tsetValue(convertedInputToNumber);\n\t\t\t\t\tonChange(convertedInputToNumber);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[onChange, setValue]\n\t);\n\treturn (\n\t\t<Input\n\t\t\tlabel={label}\n\t\t\tonChange={onIntervalChange}\n\t\t\tbackgroundColor=\"gray5\"\n\t\t\tdisabled={disabled}\n\t\t\tvalue={value}\n\t\t\thasError={(isNumber(value) && !isNaN(value) && (value < 1 || value > 99)) || !isNumber(value)}\n\t\t/>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useContext, useEffect, useState } from 'react';\n\nimport { Radio, RadioGroup, Row, Text, Padding } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { isNumber, isNaN, map, differenceWith, isEqual, omitBy, isNil } from 'lodash';\n\nimport { RecurrenceContext } from '../../../../../commons/recurrence-context';\nimport { RADIO_VALUES, RECURRENCE_FREQUENCY } from '../../../../../constants/recurrence';\nimport { useAppSelector } from '../../../../../store/redux/hooks';\nimport {\n\tselectEditorRecurrenceByDay,\n\tselectEditorRecurrenceFrequency,\n\tselectEditorRecurrenceInterval\n} from '../../../../../store/selectors/editor';\nimport { Byday, Interval, RecurrenceStartValue } from '../../../../../types/editor';\nimport { IntervalInput } from '../components/interval-input';\n\nconst defaultState = {\n\tfreq: RECURRENCE_FREQUENCY.DAILY,\n\tinterval: {\n\t\tival: 1\n\t},\n\tradioValue: RADIO_VALUES.EVERYDAY\n};\n\nconst initialState = (\n\tfreq: string | undefined,\n\tinterval: Interval | undefined,\n\tbyday: Byday | undefined\n): string => {\n\tif (\n\t\t(freq === RECURRENCE_FREQUENCY.DAILY || freq === RECURRENCE_FREQUENCY.WEEKLY) &&\n\t\tbyday?.wkday &&\n\t\tinterval?.ival === 1\n\t) {\n\t\t// building an array with the same structure of wkday to check if they have the same values\n\t\t// to determine if we are receiving a workingday value\n\t\tconst workingDays = map(['MO', 'TU', 'WE', 'TH', 'FR'], (day) => ({ day }));\n\t\tconst diff = differenceWith(workingDays, byday?.wkday, isEqual);\n\t\tif (diff?.length === 0) {\n\t\t\treturn RADIO_VALUES.WORKING_DAY;\n\t\t}\n\t\treturn defaultState.radioValue;\n\t}\n\tif (freq === RECURRENCE_FREQUENCY.DAILY && interval?.ival === 1 && !byday?.wkday) {\n\t\treturn RADIO_VALUES.EVERYDAY;\n\t}\n\tif (freq === RECURRENCE_FREQUENCY.DAILY && interval && interval?.ival > 1 && !byday?.wkday) {\n\t\treturn RADIO_VALUES.EVERY_X_DAY;\n\t}\n\treturn defaultState.radioValue;\n};\n\nconst startValueInitialState = (\n\tfreq: string | undefined,\n\tbyday: Byday | undefined,\n\tinterval: Interval | undefined\n): RecurrenceStartValue | undefined => {\n\tif (freq === RECURRENCE_FREQUENCY.DAILY) {\n\t\treturn omitBy({ interval, byday }, isNil);\n\t}\n\tif (freq === RECURRENCE_FREQUENCY.WEEKLY && byday?.wkday && interval?.ival === 1) {\n\t\tconst workingDays = map(['MO', 'TU', 'WE', 'TH', 'FR'], (day) => ({ day }));\n\t\tconst diff = differenceWith(workingDays, byday?.wkday, isEqual);\n\t\tif (diff?.length === 0 && interval?.ival === 1) {\n\t\t\treturn { interval, byday };\n\t\t}\n\t\treturn { interval: defaultState.interval };\n\t}\n\treturn undefined;\n};\n\nconst DailyOptions = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst { frequency, setNewStartValue } = useContext(RecurrenceContext);\n\tconst freq = useAppSelector(selectEditorRecurrenceFrequency(editorId));\n\tconst interval = useAppSelector(selectEditorRecurrenceInterval(editorId));\n\tconst byday = useAppSelector(selectEditorRecurrenceByDay(editorId));\n\n\tconst [radioValue, setRadioValue] = useState(() => initialState(freq, interval, byday));\n\n\tconst [startValue, setStartValue] = useState(() => startValueInitialState(freq, byday, interval));\n\n\tconst [inputValue, setInputValue] = useState<number | ''>(\n\t\tinterval?.ival ?? defaultState?.interval?.ival\n\t);\n\n\tconst onChange = useCallback(\n\t\t(ev) => {\n\t\t\tswitch (ev) {\n\t\t\t\tcase RADIO_VALUES.EVERYDAY:\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tinterval: {\n\t\t\t\t\t\t\tival: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RADIO_VALUES.WORKING_DAY:\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tbyday: { wkday: map(['MO', 'TU', 'WE', 'TH', 'FR'], (day) => ({ day })) }\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RADIO_VALUES.EVERY_X_DAY:\n\t\t\t\t\tisNumber(inputValue) &&\n\t\t\t\t\t\t!isNaN(inputValue) &&\n\t\t\t\t\t\tinputValue > 0 &&\n\t\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\t\tinterval: {\n\t\t\t\t\t\t\t\tival: inputValue\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tinterval: {\n\t\t\t\t\t\t\tival: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(RADIO_VALUES.EVERYDAY);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[inputValue, setStartValue]\n\t);\n\n\tconst onInputChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (radioValue === RADIO_VALUES.EVERY_X_DAY) {\n\t\t\t\tsetStartValue({\n\t\t\t\t\tinterval: {\n\t\t\t\t\t\tival: ev\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[setStartValue, radioValue]\n\t);\n\n\tuseEffect(() => {\n\t\tif (startValue && frequency === RECURRENCE_FREQUENCY.DAILY) {\n\t\t\tsetNewStartValue(startValue);\n\t\t}\n\t}, [frequency, setNewStartValue, startValue]);\n\n\treturn frequency === RECURRENCE_FREQUENCY.DAILY ? (\n\t\t<RadioGroup value={radioValue} onChange={onChange}>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Padding vertical=\"small\">\n\t\t\t\t\t\t<Text overflow=\"break-word\">{t('label.every_day', 'Every day')}</Text>\n\t\t\t\t\t</Padding>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.EVERYDAY}\n\t\t\t/>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Padding vertical=\"small\">\n\t\t\t\t\t\t<Text overflow=\"break-word\">{t('items.working_day', 'Every working day')}</Text>\n\t\t\t\t\t</Padding>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.WORKING_DAY}\n\t\t\t/>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Padding top=\"small\">\n\t\t\t\t\t\t<Row width=\"fit\" orientation=\"horizontal\" mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t\t<Text overflow=\"break-word\">{t('label.every', 'Every')}</Text>\n\t\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t\t<IntervalInput\n\t\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.EVERY_X_DAY}\n\t\t\t\t\t\t\t\t\tvalue={inputValue}\n\t\t\t\t\t\t\t\t\tonChange={onInputChange}\n\t\t\t\t\t\t\t\t\tlabel={t('label.days', 'Days')}\n\t\t\t\t\t\t\t\t\tsetValue={setInputValue}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t<Text overflow=\"break-word\">{t('label.days', 'Days')}</Text>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Padding>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.EVERY_X_DAY}\n\t\t\t/>\n\t\t</RadioGroup>\n\t) : null;\n};\n\nexport default DailyOptions;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useMemo } from 'react';\n\nimport { useTranslation } from 'react-i18next';\n\nimport { RECURRENCE_FREQUENCY } from '../constants/recurrence';\n\ntype UseRecurrenceItems = {\n\tmonths: Array<{ label: string; value: string }>;\n\tordinalNumbers: Array<{ label: string; value: string }>;\n\tweekDays: Array<{ label: string; value: string }>;\n\tweekOptions: Array<{ label: string; value: string }>;\n\trepetitionItems: Array<{ label: string; value: string }>;\n};\nexport const useRecurrenceItems = (): UseRecurrenceItems => {\n\tconst [t] = useTranslation();\n\n\tconst months = useMemo(\n\t\t() => [\n\t\t\t{ label: t('months.january', 'January'), value: '1' },\n\t\t\t{ label: t('months.february', 'February'), value: '2' },\n\t\t\t{ label: t('months.march', 'March'), value: '3' },\n\t\t\t{ label: t('months.april', 'April'), value: '4' },\n\t\t\t{ label: t('months.may', 'May'), value: '5' },\n\t\t\t{ label: t('months.june', 'June'), value: '6' },\n\t\t\t{ label: t('months.july', 'July'), value: '7' },\n\t\t\t{ label: t('months.august', 'August'), value: '8' },\n\t\t\t{ label: t('months.september', 'September'), value: '9' },\n\t\t\t{ label: t('months.october', 'October'), value: '10' },\n\t\t\t{ label: t('months.november', 'November'), value: '11' },\n\t\t\t{ label: t('months.december', 'December'), value: '12' }\n\t\t],\n\t\t[t]\n\t);\n\n\tconst ordinalNumbers = useMemo(\n\t\t() => [\n\t\t\t{ label: t('items.first', 'First'), value: '1' },\n\t\t\t{ label: t('items.second', 'Second'), value: '2' },\n\t\t\t{ label: t('items.third', 'Third'), value: '3' },\n\t\t\t{ label: t('items.fourth', 'Fourth'), value: '4' },\n\t\t\t{ label: t('items.last', 'Last'), value: '-1' }\n\t\t],\n\t\t[t]\n\t);\n\n\tconst weekDays = useMemo(\n\t\t() => [\n\t\t\t{ label: t('label.week_day.monday', 'Monday'), value: 'MO' },\n\t\t\t{ label: t('label.week_day.tuesday', 'Tuesday'), value: 'TU' },\n\t\t\t{ label: t('label.week_day.wednesday', 'Wednesday'), value: 'WE' },\n\t\t\t{ label: t('label.week_day.thursday', 'Thursday'), value: 'TH' },\n\t\t\t{ label: t('label.week_day.friday', 'Friday'), value: 'FR' },\n\t\t\t{ label: t('label.week_day.saturday', 'Saturday'), value: 'SA' },\n\t\t\t{ label: t('label.week_day.sunday', 'Sunday'), value: 'SU' }\n\t\t],\n\t\t[t]\n\t);\n\n\tconst weekOptions = useMemo(\n\t\t() => [\n\t\t\t{ label: t('label.day', 'Day'), value: 'MO,TU,WE,TH,FR,SA,SU' },\n\t\t\t{ label: t('items.weekend_day', 'Weekend day'), value: 'SA,SU' },\n\t\t\t{ label: t('items.working_day', 'Working day'), value: 'MO,TU,WE,TH,FR' },\n\t\t\t...weekDays\n\t\t],\n\t\t[t, weekDays]\n\t);\n\n\tconst repetitionItems = useMemo(\n\t\t() => [\n\t\t\t{ label: t('repeat.daily', 'Daily'), value: RECURRENCE_FREQUENCY.DAILY },\n\t\t\t{ label: t('repeat.weekly', 'Weekly'), value: RECURRENCE_FREQUENCY.WEEKLY },\n\t\t\t{ label: t('repeat.monthly', 'Monthly'), value: RECURRENCE_FREQUENCY.MONTHLY },\n\t\t\t{ label: t('repeat.yearly', 'Yearly'), value: RECURRENCE_FREQUENCY.YEARLY }\n\t\t],\n\t\t[t]\n\t);\n\n\treturn {\n\t\tmonths,\n\t\tordinalNumbers,\n\t\tweekDays,\n\t\tweekOptions,\n\t\trepetitionItems\n\t};\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Input } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { isNaN, isNumber } from 'lodash';\n\ntype IntervalInputProps = {\n\tvalue: number | '';\n\tsetValue: React.Dispatch<React.SetStateAction<number | ''>>;\n\tonChange: (ev: number) => void;\n\tdisabled: boolean;\n\ttestId?: string | undefined;\n};\n\nexport const MonthlyDayInput = ({\n\tdisabled,\n\tsetValue,\n\tonChange,\n\tvalue,\n\ttestId\n}: IntervalInputProps): ReactElement => {\n\tconst onMonthChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev.target.value === '') {\n\t\t\t\tonChange(1);\n\t\t\t\tsetValue(ev.target.value);\n\t\t\t} else {\n\t\t\t\tconst convertedInputToNumber = parseInt(ev.target.value, 10);\n\t\t\t\tif (\n\t\t\t\t\tisNumber(convertedInputToNumber) &&\n\t\t\t\t\t!isNaN(convertedInputToNumber) &&\n\t\t\t\t\tconvertedInputToNumber >= 0\n\t\t\t\t) {\n\t\t\t\t\tsetValue(convertedInputToNumber);\n\t\t\t\t\tonChange(convertedInputToNumber);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[onChange, setValue]\n\t);\n\treturn (\n\t\t<Input\n\t\t\tbackgroundColor=\"gray5\"\n\t\t\tlabel={t('label.day', 'Day')}\n\t\t\tvalue={value}\n\t\t\tonChange={onMonthChange}\n\t\t\tdisabled={disabled}\n\t\t\thasError={(isNumber(value) && !isNaN(value) && (value < 1 || value > 31)) || !isNumber(value)}\n\t\t\tdata-testid={testId}\n\t\t/>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Select } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { differenceWith, find, isEqual } from 'lodash';\n\nimport { useRecurrenceItems } from '../../../../../commons/use-recurrence-items';\n\ntype OrdinalNumberSelectProps = {\n\tvalue: { label: string; value: string };\n\tsetValue: React.Dispatch<React.SetStateAction<{ label: string; value: string }>>;\n\tonChange: (ev: string) => void;\n\tdisabled: boolean;\n};\n\nexport const OrdinalNumberSelect = ({\n\tvalue,\n\tsetValue,\n\tonChange,\n\tdisabled\n}: OrdinalNumberSelectProps): ReactElement => {\n\tconst { ordinalNumbers } = useRecurrenceItems();\n\n\tconst onBySetPosChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev) {\n\t\t\t\tconst selectedValue = ev?.split?.(',');\n\t\t\t\tconst newValue =\n\t\t\t\t\tfind(ordinalNumbers, (item) => {\n\t\t\t\t\t\tconst itemValue = item?.value?.split?.(',');\n\t\t\t\t\t\treturn differenceWith(itemValue, selectedValue, isEqual).length === 0;\n\t\t\t\t\t}) ?? ordinalNumbers[0];\n\t\t\t\tsetValue(newValue);\n\t\t\t\tonChange(ev);\n\t\t\t}\n\t\t},\n\t\t[onChange, ordinalNumbers, setValue]\n\t);\n\n\treturn (\n\t\t<Select\n\t\t\titems={ordinalNumbers}\n\t\t\tlabel={t('label.number', 'Number')}\n\t\t\tonChange={onBySetPosChange}\n\t\t\tdisablePortal\n\t\t\twidth=\"fit\"\n\t\t\tdisabled={disabled}\n\t\t\tselection={value}\n\t\t/>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo } from 'react';\n\nimport { Select, SelectItem } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { differenceWith, find, isEqual, map } from 'lodash';\n\nimport { useRecurrenceItems } from '../../../../../commons/use-recurrence-items';\n\ntype WeekDaySelectorProps = {\n\tselection?: SelectItem;\n\tsetSelection: React.Dispatch<React.SetStateAction<{ label: string; value: string }>>;\n\tonChange: (ev: { day: string }[]) => void;\n\tdisabled?: boolean;\n};\n\nconst WeekdaySelect = ({\n\tselection,\n\tsetSelection,\n\tonChange,\n\tdisabled = false\n}: WeekDaySelectorProps): ReactElement | null => {\n\tconst { weekOptions } = useRecurrenceItems();\n\n\tconst daySelection = useMemo(\n\t\t() =>\n\t\t\tfind(\n\t\t\t\tweekOptions,\n\t\t\t\t(item) =>\n\t\t\t\t\tdifferenceWith(\n\t\t\t\t\t\tmap(item.value.split(','), (day) => ({ day })),\n\t\t\t\t\t\tmap((selection?.value ?? weekOptions?.[0]?.value)?.split(','), (day) => ({\n\t\t\t\t\t\t\tday\n\t\t\t\t\t\t})),\n\t\t\t\t\t\tisEqual\n\t\t\t\t\t).length === 0\n\t\t\t),\n\t\t[weekOptions, selection]\n\t);\n\n\tconst onByDayChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev) {\n\t\t\t\tconst days = map(ev.split(','), (day) => ({ day }));\n\t\t\t\tconst selectedValue = ev?.split?.(',');\n\n\t\t\t\tconst newValue =\n\t\t\t\t\tfind(weekOptions, (item) => {\n\t\t\t\t\t\tconst itemValue = item?.value?.split?.(',');\n\t\t\t\t\t\treturn differenceWith(itemValue, selectedValue, isEqual).length === 0;\n\t\t\t\t\t}) ?? weekOptions[0];\n\t\t\t\tsetSelection(newValue);\n\t\t\t\tonChange(days);\n\t\t\t}\n\t\t},\n\t\t[onChange, setSelection, weekOptions]\n\t);\n\treturn daySelection ? (\n\t\t<Select\n\t\t\titems={weekOptions}\n\t\t\tlabel={t('label.day', 'Day')}\n\t\t\tonChange={onByDayChange}\n\t\t\tdisablePortal\n\t\t\twidth=\"fit\"\n\t\t\tdisabled={disabled}\n\t\t\tselection={daySelection}\n\t\t/>\n\t) : null;\n};\n\nexport default WeekdaySelect;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useContext, useEffect, useState } from 'react';\n\nimport { Container, Padding, Radio, RadioGroup, Row, Text } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { map } from 'lodash';\n\nimport { RecurrenceContext } from '../../../../../commons/recurrence-context';\nimport { useRecurrenceItems } from '../../../../../commons/use-recurrence-items';\nimport { RADIO_VALUES, RECURRENCE_FREQUENCY } from '../../../../../constants/recurrence';\nimport { RecurrenceStartValue } from '../../../../../types/editor';\nimport { IntervalInput } from '../components/interval-input';\nimport { MonthlyDayInput } from '../components/monthly-day-input';\nimport { OrdinalNumberSelect } from '../components/ordinal-number-select';\nimport WeekdaySelect from '../components/weekday-select';\n\nconst MonthlyOptions = (): ReactElement | null => {\n\tconst { frequency, setNewStartValue } = useContext(RecurrenceContext);\n\tconst [radioValue, setRadioValue] = useState(RADIO_VALUES.DAY_OF_MONTH);\n\tconst [moDayList, setMoDayList] = useState<number | ''>(1);\n\tconst [intervalFirstInput, setIntervalFirstInput] = useState<number | ''>(1);\n\tconst [intervalSecondInput, setIntervalSecondInput] = useState<number | ''>(1);\n\n\tconst [startValue, setStartValue] = useState<RecurrenceStartValue>({\n\t\tbymonthday: {\n\t\t\tmodaylist: moDayList as number\n\t\t},\n\t\tinterval: {\n\t\t\tival: intervalFirstInput as number\n\t\t}\n\t});\n\n\tconst { weekOptions, ordinalNumbers } = useRecurrenceItems();\n\n\tconst [posListSelectValue, setPosListSelectValue] = useState(ordinalNumbers?.[0]);\n\tconst [byDaySelectValue, setByDaySelectValue] = useState(weekOptions?.[0]);\n\n\tconst onRadioChange = useCallback(\n\t\t(ev) => {\n\t\t\tswitch (ev) {\n\t\t\t\tcase RADIO_VALUES.DAY_OF_MONTH:\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tbymonthday: {\n\t\t\t\t\t\t\tmodaylist: moDayList as number\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinterval: {\n\t\t\t\t\t\t\tival: intervalFirstInput as number\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RADIO_VALUES.MONTHLY_CUSTOMIZED:\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tbysetpos: { poslist: posListSelectValue?.value },\n\t\t\t\t\t\tbyday: { wkday: map(byDaySelectValue?.value?.split?.(','), (day) => ({ day })) },\n\t\t\t\t\t\tinterval: {\n\t\t\t\t\t\t\tival: intervalSecondInput as number\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tsetRadioValue(RADIO_VALUES.DAY_OF_MONTH);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tbyDaySelectValue?.value,\n\t\t\tintervalFirstInput,\n\t\t\tintervalSecondInput,\n\t\t\tmoDayList,\n\t\t\tposListSelectValue?.value\n\t\t]\n\t);\n\n\tconst onMoDayListChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev && radioValue === RADIO_VALUES.DAY_OF_MONTH) {\n\t\t\t\tsetStartValue((prevValue) => ({\n\t\t\t\t\t...(prevValue ?? {}),\n\t\t\t\t\tbymonthday: {\n\t\t\t\t\t\tmodaylist: ev\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tconst onFirstIntervalChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (radioValue === RADIO_VALUES.DAY_OF_MONTH) {\n\t\t\t\tsetStartValue((prevValue) => ({\n\t\t\t\t\t...prevValue,\n\t\t\t\t\tinterval: {\n\t\t\t\t\t\tival: ev\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\t\t[setStartValue, radioValue]\n\t);\n\n\tconst onSecondIntervalChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (radioValue === RADIO_VALUES.MONTHLY_CUSTOMIZED) {\n\t\t\t\tsetStartValue((prevValue) => ({\n\t\t\t\t\t...prevValue,\n\t\t\t\t\tinterval: {\n\t\t\t\t\t\tival: ev\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\t\t[setStartValue, radioValue]\n\t);\n\n\tconst onBySetPosChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev && radioValue === RADIO_VALUES.MONTHLY_CUSTOMIZED) {\n\t\t\t\tsetStartValue((prevValue) => ({ ...(prevValue ?? {}), bysetpos: { poslist: ev } }));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tconst onByDayChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev && radioValue === RADIO_VALUES.MONTHLY_CUSTOMIZED) {\n\t\t\t\tsetStartValue((prevValue) => ({ ...(prevValue ?? {}), byday: { wkday: ev } }));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tuseEffect(() => {\n\t\tif (startValue && frequency === RECURRENCE_FREQUENCY.MONTHLY) {\n\t\t\tsetNewStartValue(startValue);\n\t\t}\n\t}, [frequency, setNewStartValue, startValue]);\n\n\treturn frequency === RECURRENCE_FREQUENCY.MONTHLY ? (\n\t\t<RadioGroup value={radioValue} onChange={onRadioChange}>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Row width=\"fit\" orientation=\"horizontal\" mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t<Text>{t('label.day', 'Day')}</Text>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<MonthlyDayInput\n\t\t\t\t\t\t\tvalue={moDayList}\n\t\t\t\t\t\t\tsetValue={setMoDayList}\n\t\t\t\t\t\t\tonChange={onMoDayListChange}\n\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.DAY_OF_MONTH}\n\t\t\t\t\t\t\ttestId={'montly_day_input'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t<Text>{t('label.every', 'every')}</Text>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<IntervalInput\n\t\t\t\t\t\t\tvalue={intervalFirstInput}\n\t\t\t\t\t\t\tsetValue={setIntervalFirstInput}\n\t\t\t\t\t\t\tlabel={t('label.months', 'Months')}\n\t\t\t\t\t\t\tonChange={onFirstIntervalChange}\n\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.DAY_OF_MONTH}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Row>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.DAY_OF_MONTH}\n\t\t\t/>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Container\n\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t\t<Text>{t('label.the', 'The')}</Text>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t<OrdinalNumberSelect\n\t\t\t\t\t\t\t\tvalue={posListSelectValue}\n\t\t\t\t\t\t\t\tsetValue={setPosListSelectValue}\n\t\t\t\t\t\t\t\tonChange={onBySetPosChange}\n\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.MONTHLY_CUSTOMIZED}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Padding horizontal=\"small\" />\n\t\t\t\t\t\t\t<WeekdaySelect\n\t\t\t\t\t\t\t\tsetSelection={setByDaySelectValue}\n\t\t\t\t\t\t\t\tonChange={onByDayChange}\n\t\t\t\t\t\t\t\tselection={byDaySelectValue}\n\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.MONTHLY_CUSTOMIZED}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\t\t\t\tpadding={{ vertical: 'small' }}\n\t\t\t\t\t\t\twidth=\"80%\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t\t<Text>{t('label.of_every_month', 'of the month, every')}</Text>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t<MonthlyDayInput\n\t\t\t\t\t\t\t\tvalue={intervalSecondInput}\n\t\t\t\t\t\t\t\tsetValue={setIntervalSecondInput}\n\t\t\t\t\t\t\t\tonChange={onSecondIntervalChange}\n\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.MONTHLY_CUSTOMIZED}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t\t<Text>{t('label.months', 'Months')}</Text>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</Container>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.MONTHLY_CUSTOMIZED}\n\t\t\t/>\n\t\t</RadioGroup>\n\t) : null;\n};\n\nexport default MonthlyOptions;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useContext, useMemo, useState } from 'react';\n\nimport {\n\tContainer,\n\tDateTimePicker,\n\tInput,\n\tRadio,\n\tRadioGroup,\n\tRow,\n\tText\n} from '@zextras/carbonio-design-system';\nimport { isNaN, isNil, isNumber } from 'lodash';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\nimport momentLocalizer from 'react-widgets-moment';\n\nimport { RecurrenceContext } from '../../../../../commons/recurrence-context';\nimport { RADIO_VALUES } from '../../../../../constants/recurrence';\nimport { useAppSelector } from '../../../../../store/redux/hooks';\nimport {\n\tselectEditorRecurrenceCount,\n\tselectEditorRecurrenceUntilDate,\n\tselectEditorStart\n} from '../../../../../store/selectors/editor';\nimport { Count } from '../../../../../types/editor';\n\nmomentLocalizer();\n\nconst radioInitialState = (count: number | undefined, until: string | undefined): string => {\n\tif (count) {\n\t\treturn RADIO_VALUES.END_AFTER_COUNT;\n\t}\n\tif (until) {\n\t\treturn RADIO_VALUES.END_AFTER_UNTIL;\n\t}\n\treturn RADIO_VALUES.NO_END_DATE;\n};\n\nconst RecurrenceEndOptions = ({ editorId }: { editorId: string }): ReactElement => {\n\tconst { newEndValue, setNewEndValue } = useContext(RecurrenceContext);\n\tconst start = useAppSelector(selectEditorStart(editorId));\n\tconst count = useAppSelector(selectEditorRecurrenceCount(editorId));\n\tconst until = useAppSelector(selectEditorRecurrenceUntilDate(editorId));\n\n\tconst [radioValue, setRadioValue] = useState(() => radioInitialState(count, until));\n\tconst [inputValue, setInputValue] = useState(count ?? '1');\n\n\tconst initialPickerValue = useMemo(\n\t\t() =>\n\t\t\tuntil ? new Date(moment(until).valueOf()) : new Date(moment(start).valueOf()) ?? new Date(),\n\t\t[start, until]\n\t);\n\n\tconst [pickerValue, setPickerValue] = useState(initialPickerValue);\n\n\tconst onInputValueChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev.target.value === '') {\n\t\t\t\tsetNewEndValue({\n\t\t\t\t\tcount: { num: 1 }\n\t\t\t\t});\n\t\t\t\tsetInputValue(ev.target.value);\n\t\t\t} else {\n\t\t\t\tconst convertedInputToNumber = parseInt(ev.target.value, 10);\n\t\t\t\tif (\n\t\t\t\t\tisNumber(convertedInputToNumber) &&\n\t\t\t\t\t!isNaN(convertedInputToNumber) &&\n\t\t\t\t\tconvertedInputToNumber > 0\n\t\t\t\t) {\n\t\t\t\t\tsetInputValue(convertedInputToNumber);\n\t\t\t\t\tif (radioValue === RADIO_VALUES.END_AFTER_COUNT) {\n\t\t\t\t\t\tsetNewEndValue({\n\t\t\t\t\t\t\tcount: {\n\t\t\t\t\t\t\t\tnum: convertedInputToNumber\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[setNewEndValue, radioValue]\n\t);\n\n\tconst onRadioValueChange = useCallback(\n\t\t(ev) => {\n\t\t\tswitch (ev) {\n\t\t\t\tcase RADIO_VALUES.NO_END_DATE:\n\t\t\t\t\tsetNewEndValue(undefined);\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RADIO_VALUES.END_AFTER_COUNT:\n\t\t\t\t\tsetNewEndValue({\n\t\t\t\t\t\tcount: { num: parseInt(`${inputValue}`, 10) }\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RADIO_VALUES.END_AFTER_UNTIL:\n\t\t\t\t\tsetNewEndValue({\n\t\t\t\t\t\tuntil: {\n\t\t\t\t\t\t\td: moment(pickerValue).format('YYYYMMDD')\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tsetNewEndValue(undefined);\n\t\t\t\t\tsetRadioValue(RADIO_VALUES.NO_END_DATE);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[inputValue, pickerValue, setNewEndValue]\n\t);\n\n\tconst num = useMemo(() => (newEndValue as Count)?.count?.num, [newEndValue]);\n\tconst [t] = useTranslation();\n\tconst endAfterString = useMemo(() => t('label.end_after', 'End after'), [t]);\n\tconst isDatePickerDisabled = useMemo(\n\t\t() => radioValue !== RADIO_VALUES.END_AFTER_UNTIL,\n\t\t[radioValue]\n\t);\n\tconst onDateChange = useCallback(\n\t\t(d) => {\n\t\t\tif (!isDatePickerDisabled) {\n\t\t\t\tconst fullData = moment(d.valueOf()).format('YYYYMMDD');\n\t\t\t\tsetPickerValue(d.valueOf());\n\t\t\t\tsetNewEndValue({ until: { d: fullData } });\n\t\t\t}\n\t\t},\n\t\t[isDatePickerDisabled, setNewEndValue]\n\t);\n\treturn (\n\t\t<RadioGroup value={radioValue} onChange={onRadioValueChange}>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={t('label.no_end_date', 'No end date')}\n\t\t\t\tvalue={RADIO_VALUES.NO_END_DATE}\n\t\t\t/>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Row width=\"fill\" orientation=\"horizontal\" mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\twidth=\"fit\"\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\twrap=\"nowrap\"\n\t\t\t\t\t\t\tpadding={{ right: 'small' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Text>{endAfterString}</Text>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row width=\"fit\" orientation=\"horizontal\" mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tbackgroundColor=\"gray5\"\n\t\t\t\t\t\t\t\twidth=\"fit\"\n\t\t\t\t\t\t\t\tlabel={t('label.occurrences', 'Occurence(s)')}\n\t\t\t\t\t\t\t\tvalue={inputValue}\n\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.END_AFTER_COUNT}\n\t\t\t\t\t\t\t\tonChange={onInputValueChange}\n\t\t\t\t\t\t\t\thasError={!isNil(num) && (num > 99 || num < 1 || !isNumber(num))}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Row>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.END_AFTER_COUNT}\n\t\t\t/>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Row width=\"fill\" orientation=\"horizontal\" mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\twidth=\"fit\"\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\twrap=\"nowrap\"\n\t\t\t\t\t\t\tpadding={{ right: 'small' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Text>{endAfterString}</Text>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row width=\"fit\" orientation=\"horizontal\" mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t\t<Container crossAlignment=\"flex-start\" style={{ maxWidth: '31.25rem' }}>\n\t\t\t\t\t\t\t\t<DateTimePicker\n\t\t\t\t\t\t\t\t\tlabel={endAfterString}\n\t\t\t\t\t\t\t\t\tincludeTime={false}\n\t\t\t\t\t\t\t\t\tdefaultValue={initialPickerValue}\n\t\t\t\t\t\t\t\t\tonChange={onDateChange}\n\t\t\t\t\t\t\t\t\tdisabled={isDatePickerDisabled}\n\t\t\t\t\t\t\t\t\tdateFormat=\"dd/MM/yyyy\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Row>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.END_AFTER_UNTIL}\n\t\t\t/>\n\t\t</RadioGroup>\n\t);\n};\n\nexport default RecurrenceEndOptions;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Checkbox, Container } from '@zextras/carbonio-design-system';\nimport { find, map, reject } from 'lodash';\n\nimport { useRecurrenceItems } from '../../../../../commons/use-recurrence-items';\n\ntype WeekdayCheckboxesProps = {\n\tvalue: { day: string }[];\n\tsetValue: React.Dispatch<React.SetStateAction<{ day: string }[]>>;\n\tdisabled: boolean;\n\tonClick: (newValue: { day: string }[]) => void;\n\tisHidden: boolean;\n};\n\nexport const WeekdayCheckboxes = ({\n\tvalue,\n\tsetValue,\n\tdisabled,\n\tonClick,\n\tisHidden\n}: WeekdayCheckboxesProps): ReactElement | null => {\n\tconst { weekDays } = useRecurrenceItems();\n\n\tconst onCheckboxClick = useCallback(\n\t\t(opt) => {\n\t\t\tconst checkbox = find(value, { day: opt.value });\n\t\t\tif (!checkbox) {\n\t\t\t\tconst newValue = [...value, { day: opt.value }];\n\t\t\t\tsetValue(newValue);\n\t\t\t\tonClick(newValue);\n\t\t\t} else {\n\t\t\t\tconst newValue = reject(value, { day: opt.value });\n\t\t\t\tsetValue(newValue);\n\t\t\t\tonClick(newValue);\n\t\t\t}\n\t\t},\n\t\t[value, onClick, setValue]\n\t);\n\n\treturn isHidden ? null : (\n\t\t<>\n\t\t\t{map(weekDays, (opt) => {\n\t\t\t\tconst isChecked = !!find(value, ({ day }) => day === opt.value);\n\t\t\t\treturn (\n\t\t\t\t\t<Container\n\t\t\t\t\t\tkey={`week_day_${opt.value}`}\n\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\twidth=\"fit\"\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\tpadding={{ horizontal: 'small' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tkey={opt.label}\n\t\t\t\t\t\t\tonClick={(): void => onCheckboxClick(opt)}\n\t\t\t\t\t\t\tlabel={opt.label.slice(0, 3)}\n\t\t\t\t\t\t\tvalue={isChecked}\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Container>\n\t\t\t\t);\n\t\t\t})}\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useContext, useEffect, useMemo, useState } from 'react';\n\nimport { Container, Radio, RadioGroup, Row, Text, Padding } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { find, differenceWith, map, isEqual, filter, omitBy, isNil } from 'lodash';\n\nimport { usePrefs } from '../../../../../carbonio-ui-commons/utils/use-prefs';\nimport { RecurrenceContext } from '../../../../../commons/recurrence-context';\nimport { useRecurrenceItems } from '../../../../../commons/use-recurrence-items';\nimport { WEEK_SCHEDULE } from '../../../../../constants/calendar';\nimport { RADIO_VALUES, RECURRENCE_FREQUENCY } from '../../../../../constants/recurrence';\nimport { useAppSelector } from '../../../../../store/redux/hooks';\nimport {\n\tselectEditorRecurrenceByDay,\n\tselectEditorRecurrenceFrequency,\n\tselectEditorRecurrenceInterval\n} from '../../../../../store/selectors/editor';\nimport { Byday, Interval, RecurrenceStartValue } from '../../../../../types/editor';\nimport { workWeek, WorkWeekDay } from '../../../../../utils/work-week';\nimport { IntervalInput } from '../components/interval-input';\nimport { WeekdayCheckboxes } from '../components/weekday-checkboxes';\nimport WeekdaySelect from '../components/weekday-select';\n\nconst defaultState = {\n\tfreq: RECURRENCE_FREQUENCY.WEEKLY,\n\tinterval: {\n\t\tival: 1\n\t},\n\tbyday: {\n\t\twkday: [{ day: 'MO' }]\n\t},\n\tradioValue: RADIO_VALUES.QUICK_OPTIONS\n};\n\nconst radioInitialState = (\n\tfreq: string | undefined,\n\tinterval: Interval | undefined,\n\tbyday: Byday | undefined,\n\tworkingSchedule: WorkWeekDay[]\n): string => {\n\tif (\n\t\t(freq === RECURRENCE_FREQUENCY.DAILY || freq === RECURRENCE_FREQUENCY.WEEKLY) &&\n\t\tbyday?.wkday\n\t) {\n\t\t// building an array with the same structure of wkday to check if they have the same values\n\t\t// to determine if we are receiving the value of the working day option\n\t\tconst workingDays = map(filter(workingSchedule, ['working', true]), (workingDay) => {\n\t\t\tconst day = find(WEEK_SCHEDULE, ['value', workingDay.day])?.label?.slice(0, 2);\n\t\t\treturn { day };\n\t\t});\n\t\tconst diff = differenceWith(workingDays, byday?.wkday, isEqual);\n\t\tif (diff?.length === 0 && interval?.ival === 1) {\n\t\t\treturn RADIO_VALUES.QUICK_OPTIONS;\n\t\t}\n\t\treturn RADIO_VALUES.CUSTOM_OPTIONS;\n\t}\n\tif (freq === RECURRENCE_FREQUENCY.WEEKLY) {\n\t\tif (interval?.ival === 1) {\n\t\t\treturn RADIO_VALUES.QUICK_OPTIONS;\n\t\t}\n\t\treturn RADIO_VALUES.CUSTOM_OPTIONS;\n\t}\n\treturn defaultState.radioValue;\n};\n\nconst startValueInitialState = (\n\tfreq: string | undefined,\n\tinterval: Interval | undefined,\n\tbyday: Byday | undefined,\n\tweeklyOptions: { label: string; value: string }[]\n): RecurrenceStartValue | undefined => {\n\tif (freq === RECURRENCE_FREQUENCY.WEEKLY) {\n\t\treturn omitBy({ interval, byday }, isNil);\n\t}\n\tif (freq === RECURRENCE_FREQUENCY.DAILY && byday?.wkday && interval?.ival === 1) {\n\t\tconst option = find(\n\t\t\tweeklyOptions,\n\t\t\t(item) =>\n\t\t\t\tdifferenceWith(\n\t\t\t\t\tmap(item?.value?.split?.(','), (day) => ({ day })),\n\t\t\t\t\tbyday?.wkday ?? {},\n\t\t\t\t\tisEqual\n\t\t\t\t).length === 0\n\t\t);\n\t\tif (option) {\n\t\t\treturn { interval, byday };\n\t\t}\n\t\treturn { interval: defaultState.interval, byday: defaultState.byday };\n\t}\n\treturn undefined;\n};\n\nconst selectInitialValue = (\n\tweeklyOptions: { label: string; value: string }[],\n\tbyday: Byday | undefined\n): { label: string; value: string } =>\n\tfind(\n\t\tweeklyOptions,\n\t\t(item) =>\n\t\t\tdifferenceWith(\n\t\t\t\tmap(item?.value?.split?.(','), (day) => ({ day })),\n\t\t\t\tbyday?.wkday ?? [],\n\t\t\t\tisEqual\n\t\t\t).length === 0\n\t) ?? weeklyOptions[0];\n\nconst WeeklyOptions = ({ editorId }: { editorId: string }): ReactElement | null => {\n\tconst { frequency, setNewStartValue } = useContext(RecurrenceContext);\n\tconst freq = useAppSelector(selectEditorRecurrenceFrequency(editorId));\n\tconst interval = useAppSelector(selectEditorRecurrenceInterval(editorId));\n\tconst byday = useAppSelector(selectEditorRecurrenceByDay(editorId));\n\n\tconst prefs = usePrefs();\n\n\tconst workingSchedule = useMemo(\n\t\t() => workWeek(prefs.zimbraPrefCalendarWorkingHours),\n\t\t[prefs?.zimbraPrefCalendarWorkingHours]\n\t);\n\n\tconst { weekOptions } = useRecurrenceItems();\n\n\tconst [radioValue, setRadioValue] = useState(() =>\n\t\tradioInitialState(freq, interval, byday, workingSchedule)\n\t);\n\tconst [inputValue, setInputValue] = useState<number | ''>(interval?.ival ?? 1);\n\tconst [selectValue, setSelectValue] = useState(() => selectInitialValue(weekOptions, byday));\n\tconst [checkboxesValue, setCheckboxesValue] = useState(byday?.wkday ?? []);\n\tconst [startValue, setStartValue] = useState(() =>\n\t\tstartValueInitialState(freq, interval, byday, weekOptions)\n\t);\n\n\tconst onByDayChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev && radioValue === RADIO_VALUES.QUICK_OPTIONS) {\n\t\t\t\tsetStartValue((prevValue) => ({ ...(prevValue ?? {}), byday: { wkday: ev } }));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tconst onChange = useCallback(\n\t\t(ev) => {\n\t\t\tswitch (ev) {\n\t\t\t\tcase RADIO_VALUES.QUICK_OPTIONS:\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tbyday: { wkday: map(selectValue?.value?.split?.(','), (day) => ({ day })) }\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RADIO_VALUES.CUSTOM_OPTIONS:\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tbyday: { wkday: checkboxesValue },\n\t\t\t\t\t\tinterval: { ival: inputValue as number }\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tbyday: { wkday: map(selectValue?.value?.split?.(','), (day) => ({ day })) }\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(RADIO_VALUES.QUICK_OPTIONS);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[checkboxesValue, inputValue, selectValue?.value, setStartValue]\n\t);\n\n\tconst onInputChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (radioValue === RADIO_VALUES.CUSTOM_OPTIONS) {\n\t\t\t\tsetStartValue((prevValue) => ({\n\t\t\t\t\t...prevValue,\n\t\t\t\t\tinterval: {\n\t\t\t\t\t\tival: ev\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\t\t[setStartValue, radioValue]\n\t);\n\n\tconst onCheckboxClick = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev && radioValue === RADIO_VALUES.CUSTOM_OPTIONS) {\n\t\t\t\tsetStartValue((prevValue) => ({\n\t\t\t\t\t...prevValue,\n\t\t\t\t\tbyday: { wkday: ev }\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tuseEffect(() => {\n\t\tif (startValue && frequency === RECURRENCE_FREQUENCY.WEEKLY) {\n\t\t\tsetNewStartValue(startValue);\n\t\t}\n\t}, [frequency, setNewStartValue, startValue]);\n\n\treturn frequency === RECURRENCE_FREQUENCY.WEEKLY ? (\n\t\t<RadioGroup value={radioValue} onChange={onChange}>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Row width=\"fit\" orientation=\"horizontal\" mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t<Text overflow=\"break-word\">{t('label.every', 'Every')}</Text>\n\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t<WeekdaySelect\n\t\t\t\t\t\t\t\tsetSelection={setSelectValue}\n\t\t\t\t\t\t\t\tonChange={onByDayChange}\n\t\t\t\t\t\t\t\tselection={selectValue}\n\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.QUICK_OPTIONS}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t</Row>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.QUICK_OPTIONS}\n\t\t\t\tname={RADIO_VALUES.QUICK_OPTIONS}\n\t\t\t/>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Container\n\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\twidth=\"fit\"\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Row width=\"fit\" orientation=\"horizontal\" mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t\t<Text overflow=\"break-word\">{t('label.every', 'Every')}</Text>\n\t\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t\t<IntervalInput\n\t\t\t\t\t\t\t\t\tlabel={t('label.weeks_on', 'Week(s) on')}\n\t\t\t\t\t\t\t\t\tonChange={onInputChange}\n\t\t\t\t\t\t\t\t\tsetValue={setInputValue}\n\t\t\t\t\t\t\t\t\tvalue={inputValue}\n\t\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.CUSTOM_OPTIONS}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Container>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.CUSTOM_OPTIONS}\n\t\t\t/>\n\t\t\t<Row\n\t\t\t\twidth=\"fit\"\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\twrap=\"nowrap\"\n\t\t\t>\n\t\t\t\t<WeekdayCheckboxes\n\t\t\t\t\tisHidden={radioValue !== RADIO_VALUES.CUSTOM_OPTIONS}\n\t\t\t\t\tvalue={checkboxesValue}\n\t\t\t\t\tsetValue={setCheckboxesValue}\n\t\t\t\t\tonClick={onCheckboxClick}\n\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.CUSTOM_OPTIONS}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t</RadioGroup>\n\t) : null;\n};\n\nexport default WeeklyOptions;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Select } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { differenceWith, find, isEqual } from 'lodash';\n\nimport { useRecurrenceItems } from '../../../../../commons/use-recurrence-items';\n\ntype MonthSelectProps = {\n\tvalue: { label: string; value: string };\n\tsetValue: React.Dispatch<React.SetStateAction<{ label: string; value: string }>>;\n\tonChange: (ev: number) => void;\n\tdisabled: boolean;\n\ttestId?: string | undefined;\n};\n\nexport const MonthSelect = ({\n\tvalue,\n\tsetValue,\n\tonChange,\n\tdisabled,\n\ttestId\n}: MonthSelectProps): ReactElement => {\n\tconst { months } = useRecurrenceItems();\n\n\tconst onMonthChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev) {\n\t\t\t\tconst molist = Number(ev);\n\t\t\t\tconst selectedValue = ev?.split?.(',');\n\t\t\t\tconst newValue =\n\t\t\t\t\tfind(months, (item) => {\n\t\t\t\t\t\tconst itemValue = item?.value?.split?.(',');\n\t\t\t\t\t\treturn differenceWith(itemValue, selectedValue, isEqual).length === 0;\n\t\t\t\t\t}) ?? months[0];\n\t\t\t\tsetValue(newValue);\n\t\t\t\tonChange(molist);\n\t\t\t}\n\t\t},\n\t\t[months, onChange, setValue]\n\t);\n\treturn (\n\t\t<Select\n\t\t\titems={months}\n\t\t\tlabel={t('label.month', 'Month')}\n\t\t\tonChange={onMonthChange}\n\t\t\tdisablePortal\n\t\t\twidth=\"fit\"\n\t\t\tdisabled={disabled}\n\t\t\tselection={value}\n\t\t\tdata-testid={testId}\n\t\t/>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useContext, useEffect, useState } from 'react';\n\nimport { Container, Padding, Radio, RadioGroup, Row, Text } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { map } from 'lodash';\n\nimport { RecurrenceContext } from '../../../../../commons/recurrence-context';\nimport { useRecurrenceItems } from '../../../../../commons/use-recurrence-items';\nimport { RADIO_VALUES, RECURRENCE_FREQUENCY } from '../../../../../constants/recurrence';\nimport { RecurrenceStartValue } from '../../../../../types/editor';\nimport { MonthSelect } from '../components/month-select';\nimport { MonthlyDayInput } from '../components/monthly-day-input';\nimport { OrdinalNumberSelect } from '../components/ordinal-number-select';\nimport WeekdaySelect from '../components/weekday-select';\n\nconst YearlyOptions = (): ReactElement | null => {\n\tconst { frequency, setNewStartValue } = useContext(RecurrenceContext);\n\tconst [radioValue, setRadioValue] = useState(RADIO_VALUES.EVERY_YEAR_ON_MONTH_DAY);\n\n\tconst [moDayList, setMoDayList] = useState<number | ''>(1);\n\tconst { weekOptions, ordinalNumbers, months } = useRecurrenceItems();\n\n\tconst [byMonthFirstSelectValue, setByMonthFirstSelectValue] = useState(months[0]);\n\tconst [byMonthSecondSelectValue, setByMonthSecondSelectValue] = useState(months[0]);\n\n\tconst [startValue, setStartValue] = useState<RecurrenceStartValue>({\n\t\tbymonthday: {\n\t\t\tmodaylist: moDayList as number\n\t\t},\n\t\tbymonth: { molist: byMonthFirstSelectValue?.value }\n\t});\n\n\tconst onMoDayListChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (radioValue === RADIO_VALUES.EVERY_YEAR_ON_MONTH_DAY) {\n\t\t\t\tsetStartValue((prevValue) => ({\n\t\t\t\t\t...prevValue,\n\t\t\t\t\tinterval: {\n\t\t\t\t\t\tival: ev\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tconst onFirstMonthChange = useCallback(\n\t\t(molist) => {\n\t\t\tif (molist && radioValue === RADIO_VALUES.EVERY_YEAR_ON_MONTH_DAY) {\n\t\t\t\tsetStartValue((prevValue) => ({ ...(prevValue ?? {}), bymonth: { molist } }));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tconst onSecondMonthChange = useCallback(\n\t\t(molist) => {\n\t\t\tif (molist && radioValue === RADIO_VALUES.EVERY_YEAR_ON_CUSTOM_DAY) {\n\t\t\t\tsetStartValue((prevValue) => ({ ...(prevValue ?? {}), bymonth: { molist } }));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tconst [posListSelectValue, setPosListSelectValue] = useState(ordinalNumbers?.[0]);\n\n\tconst onBySetPosChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev && radioValue === RADIO_VALUES.EVERY_YEAR_ON_CUSTOM_DAY) {\n\t\t\t\tsetStartValue((prevValue) => ({ ...(prevValue ?? {}), bysetpos: { poslist: ev } }));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tconst [byDaySelectValue, setByDaySelectValue] = useState(weekOptions?.[0]);\n\n\tconst onByDayChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev && radioValue === RADIO_VALUES.EVERY_YEAR_ON_CUSTOM_DAY) {\n\t\t\t\tsetStartValue((prevValue) => ({ ...(prevValue ?? {}), byday: { wkday: ev } }));\n\t\t\t}\n\t\t},\n\t\t[radioValue]\n\t);\n\n\tconst onRadioChange = useCallback(\n\t\t(ev) => {\n\t\t\tswitch (ev) {\n\t\t\t\tcase RADIO_VALUES.EVERY_YEAR_ON_MONTH_DAY:\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tbymonthday: {\n\t\t\t\t\t\t\tmodaylist: moDayList as number\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbymonth: { molist: byMonthFirstSelectValue?.value }\n\t\t\t\t\t});\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RADIO_VALUES.EVERY_YEAR_ON_CUSTOM_DAY:\n\t\t\t\t\tsetRadioValue(ev);\n\t\t\t\t\tsetStartValue({\n\t\t\t\t\t\tbysetpos: { poslist: posListSelectValue?.value },\n\t\t\t\t\t\tbyday: { wkday: map(byDaySelectValue?.value?.split?.(','), (day) => ({ day })) },\n\t\t\t\t\t\tbymonth: { molist: byMonthSecondSelectValue?.value }\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tsetRadioValue(RADIO_VALUES.EVERY_YEAR_ON_MONTH_DAY);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tbyDaySelectValue?.value,\n\t\t\tbyMonthFirstSelectValue?.value,\n\t\t\tbyMonthSecondSelectValue?.value,\n\t\t\tmoDayList,\n\t\t\tposListSelectValue?.value\n\t\t]\n\t);\n\n\tuseEffect(() => {\n\t\tif (startValue && frequency === RECURRENCE_FREQUENCY.YEARLY) {\n\t\t\tsetNewStartValue(startValue);\n\t\t}\n\t}, [frequency, setNewStartValue, startValue]);\n\n\treturn frequency === RECURRENCE_FREQUENCY.YEARLY ? (\n\t\t<RadioGroup value={radioValue} onChange={onRadioChange}>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Row width=\"fit\" orientation=\"horizontal\" mainAlignment=\"flex-start\" wrap=\"nowrap\">\n\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t<Text>{t('label.every_year_on', 'Every year on')}</Text>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<MonthlyDayInput\n\t\t\t\t\t\t\tvalue={moDayList}\n\t\t\t\t\t\t\tsetValue={setMoDayList}\n\t\t\t\t\t\t\tonChange={onMoDayListChange}\n\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.EVERY_YEAR_ON_MONTH_DAY}\n\t\t\t\t\t\t\ttestId={'every_yearly_day_input'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t<Text>{t('label.of', 'of')}</Text>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<MonthSelect\n\t\t\t\t\t\t\tvalue={byMonthFirstSelectValue}\n\t\t\t\t\t\t\tsetValue={setByMonthFirstSelectValue}\n\t\t\t\t\t\t\tonChange={onFirstMonthChange}\n\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.EVERY_YEAR_ON_MONTH_DAY}\n\t\t\t\t\t\t\ttestId={'every_yearly_month_input'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Row>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.EVERY_YEAR_ON_MONTH_DAY}\n\t\t\t/>\n\t\t\t<Radio\n\t\t\t\tsize=\"small\"\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\tlabel={\n\t\t\t\t\t<Container\n\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t\t<Text>{t('label.the', 'The')}</Text>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t<OrdinalNumberSelect\n\t\t\t\t\t\t\t\tvalue={posListSelectValue}\n\t\t\t\t\t\t\t\tsetValue={setPosListSelectValue}\n\t\t\t\t\t\t\t\tonChange={onBySetPosChange}\n\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.EVERY_YEAR_ON_CUSTOM_DAY}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Padding horizontal=\"small\" />\n\t\t\t\t\t\t\t<WeekdaySelect\n\t\t\t\t\t\t\t\tonChange={onByDayChange}\n\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.EVERY_YEAR_ON_CUSTOM_DAY}\n\t\t\t\t\t\t\t\tsetSelection={setByDaySelectValue}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t\t<Text>{t('label.of', 'of')}</Text>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t<MonthSelect\n\t\t\t\t\t\t\t\tvalue={byMonthSecondSelectValue}\n\t\t\t\t\t\t\t\tsetValue={setByMonthSecondSelectValue}\n\t\t\t\t\t\t\t\tonChange={onSecondMonthChange}\n\t\t\t\t\t\t\t\tdisabled={radioValue !== RADIO_VALUES.EVERY_YEAR_ON_CUSTOM_DAY}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</Container>\n\t\t\t\t}\n\t\t\t\tvalue={RADIO_VALUES.EVERY_YEAR_ON_CUSTOM_DAY}\n\t\t\t/>\n\t\t</RadioGroup>\n\t) : null;\n};\n\nexport default YearlyOptions;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useContext, useEffect, useMemo } from 'react';\n\nimport { Select } from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { RecurrenceContext } from '../../../../../commons/recurrence-context';\nimport { useRecurrenceItems } from '../../../../../commons/use-recurrence-items';\n\nconst FrequencySelect = (): ReactElement => {\n\tconst context = useContext(RecurrenceContext);\n\tconst [t] = useTranslation();\n\n\tconst { repetitionItems } = useRecurrenceItems();\n\n\tconst initialValue = useMemo(\n\t\t() => find(repetitionItems, { value: context?.frequency }) ?? repetitionItems[0],\n\t\t[repetitionItems, context]\n\t);\n\n\tuseEffect(() => {\n\t\tif (initialValue) {\n\t\t\tconst value = find(repetitionItems, { value: context?.frequency }) ?? repetitionItems[0];\n\t\t\tcontext?.setFrequency(value?.value);\n\t\t}\n\t}, [context, initialValue, repetitionItems]);\n\n\tconst onChange = useCallback(\n\t\t(ev) => {\n\t\t\tcontext?.setFrequency?.(ev);\n\t\t},\n\t\t[context]\n\t);\n\n\treturn (\n\t\t<Select\n\t\t\tlabel={t('label.repeat', 'Repeat')}\n\t\t\tonChange={onChange}\n\t\t\titems={repetitionItems}\n\t\t\tselection={initialValue}\n\t\t\tdisablePortal\n\t\t/>\n\t);\n};\n\nexport default FrequencySelect;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useState } from 'react';\n\nimport {\n\tDivider,\n\tModalBody,\n\tModalHeader,\n\tModalFooter,\n\tPadding,\n\tText\n} from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { isNil, omitBy } from 'lodash';\n\nimport DailyOptions from './daily-options';\nimport MonthlyOptions from './monthly-options';\nimport RecurrenceEndOptions from './recurrence-end-options';\nimport WeeklyOptions from './weekly-options';\nimport YearlyOptions from './yearly-options';\nimport { RecurrenceContext } from '../../../../../commons/recurrence-context';\nimport { useAppDispatch, useAppSelector } from '../../../../../store/redux/hooks';\nimport {\n\tselectEditorRecurrenceCount,\n\tselectEditorRecurrenceFrequency,\n\tselectEditorRecurrenceUntilDate\n} from '../../../../../store/selectors/editor';\nimport { editEditorRecurrence } from '../../../../../store/slices/editor-slice';\nimport { RecurrenceEndValue, RecurrenceStartValue } from '../../../../../types/editor';\nimport FrequencySelect from '../components/frequency-select';\n\nconst setEndInitialValue = (\n\tcount: number | undefined,\n\tuntil: string | undefined\n): RecurrenceEndValue => {\n\tif (count) return { count: { num: count } };\n\tif (until)\n\t\treturn {\n\t\t\tuntil: {\n\t\t\t\td: until\n\t\t\t}\n\t\t};\n\treturn undefined;\n};\n\ntype CustomRecurrenceModalProps = {\n\teditorId: string;\n\tonClose: () => void;\n};\n\nexport const CustomRecurrenceModal = ({\n\teditorId,\n\tonClose\n}: CustomRecurrenceModalProps): ReactElement => {\n\tconst freq = useAppSelector(selectEditorRecurrenceFrequency(editorId));\n\tconst count = useAppSelector(selectEditorRecurrenceCount(editorId));\n\tconst until = useAppSelector(selectEditorRecurrenceUntilDate(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst [frequency, setFrequency] = useState(freq);\n\n\tconst [newStartValue, setNewStartValue] = useState<RecurrenceStartValue>();\n\tconst [newEndValue, setNewEndValue] = useState(() => setEndInitialValue(count, until));\n\n\tconst onConfirm = useCallback(() => {\n\t\tconst recur = {\n\t\t\tadd: {\n\t\t\t\trule: omitBy({ ...(newStartValue ?? {}), ...(newEndValue ?? {}), freq: frequency }, isNil)\n\t\t\t}\n\t\t};\n\t\tdispatch(editEditorRecurrence({ id: editorId, recur }));\n\t\tonClose();\n\t\tsetNewStartValue(undefined);\n\t\tsetNewEndValue(undefined);\n\t}, [newStartValue, newEndValue, frequency, dispatch, editorId, onClose]);\n\n\tconst recurrenceContextValue = {\n\t\tnewStartValue,\n\t\tsetNewStartValue,\n\t\tnewEndValue,\n\t\tsetNewEndValue,\n\t\tfrequency,\n\t\tsetFrequency\n\t};\n\n\treturn (\n\t\t<RecurrenceContext.Provider value={recurrenceContextValue}>\n\t\t\t<ModalHeader\n\t\t\t\ttitle={t('label.custom_repeat', 'Custom Repeat')}\n\t\t\t\tshowCloseIcon\n\t\t\t\tonClose={onClose}\n\t\t\t\tcloseIconTooltip=\"Close\"\n\t\t\t/>\n\t\t\t<Divider />\n\t\t\t<ModalBody>\n\t\t\t\t<Text weight=\"bold\" size=\"large\">\n\t\t\t\t\t{t('label.repeat', 'Repeat')}\n\t\t\t\t</Text>\n\t\t\t\t<Padding top=\"small\" />\n\t\t\t\t<FrequencySelect />\n\t\t\t\t<Padding vertical=\"small\">\n\t\t\t\t\t<DailyOptions editorId={editorId} />\n\t\t\t\t\t<WeeklyOptions editorId={editorId} />\n\t\t\t\t\t<MonthlyOptions />\n\t\t\t\t\t<YearlyOptions />\n\t\t\t\t</Padding>\n\t\t\t\t<Padding vertical=\"medium\">\n\t\t\t\t\t<Text weight=\"bold\" size=\"large\">\n\t\t\t\t\t\t{t('label.end', 'End')}\n\t\t\t\t\t</Text>\n\t\t\t\t</Padding>\n\t\t\t\t<Padding vertical=\"small\">\n\t\t\t\t\t<RecurrenceEndOptions editorId={editorId} />\n\t\t\t\t</Padding>\n\t\t\t</ModalBody>\n\t\t\t<Divider />\n\t\t\t<ModalFooter onConfirm={onConfirm} confirmLabel={t('repeat.customize', 'Customize')} />\n\t\t</RecurrenceContext.Provider>\n\t);\n};\n\nexport default CustomRecurrenceModal;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { Button, Container, useModal } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport { StoreProvider } from '../../../../../store/redux';\nimport { CustomRecurrenceModal } from '../views/custom-recurrence-modal';\n\nconst CustomRepeatSelectItem = ({ editorId }: { editorId: string }): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst createModal = useModal();\n\n\tconst onClick = useCallback(() => {\n\t\tconst closeModal = createModal(\n\t\t\t{\n\t\t\t\tmaxHeight: '90vh',\n\t\t\t\tchildren: (\n\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t<CustomRecurrenceModal editorId={editorId} onClose={(): void => closeModal()} />\n\t\t\t\t\t</StoreProvider>\n\t\t\t\t),\n\t\t\t\tonClose: () => {\n\t\t\t\t\tcloseModal();\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t}, [createModal, editorId]);\n\n\treturn (\n\t\t<Container width=\"fill\" mainAlignment=\"center\" orientation=\"horizontal\">\n\t\t\t<Button\n\t\t\t\ttype=\"outlined\"\n\t\t\t\tlabel={t('label.custom', 'Custom')}\n\t\t\t\tcolor=\"primary\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tonClick={onClick}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n\nexport default CustomRepeatSelectItem;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Container } from '@zextras/carbonio-design-system';\n\nimport { TextUpperCase } from '../../../../../commons/styled-components';\n\nconst RepeatItemComponent = ({ label }: { label: string }): ReactElement => (\n\t<Container width=\"fit\" mainAlignment=\"flex-start\" orientation=\"horizontal\">\n\t\t<TextUpperCase>{label}</TextUpperCase>\n\t</Container>\n);\n\nexport default RepeatItemComponent;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport { Icon, LabelFactoryProps, Row, Select, Text } from '@zextras/carbonio-design-system';\nimport { find, toUpper } from 'lodash';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\n\nimport { ColorContainer, TextUpperCase } from '../../../../../commons/styled-components';\nimport { RECURRENCE_FREQUENCY } from '../../../../../constants/recurrence';\nimport { useAppDispatch, useAppSelector } from '../../../../../store/redux/hooks';\nimport {\n\tselectEditorDisabled,\n\tselectEditorRecurrence,\n\tselectEditorStart\n} from '../../../../../store/selectors/editor';\nimport { editEditorRecurrence } from '../../../../../store/slices/editor-slice';\nimport { EditorProps } from '../../../../../types/editor';\nimport CustomRepeatSelectItem from '../components/custom-repeat';\nimport RepeatItemComponent from '../components/repeat-item-component';\n\nconst LabelFactory = ({ selected, label, open, focus }: LabelFactoryProps): ReactElement => (\n\t<ColorContainer\n\t\torientation=\"horizontal\"\n\t\twidth=\"fill\"\n\t\tcrossAlignment=\"center\"\n\t\tmainAlignment=\"space-between\"\n\t\tborderRadius=\"half\"\n\t\tbackground=\"gray5\"\n\t\tpadding={{\n\t\t\tall: 'small'\n\t\t}}\n\t>\n\t\t<Row width=\"100%\" takeAvailableSpace mainAlignment=\"space-between\">\n\t\t\t<Row\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ left: 'small' }}\n\t\t\t>\n\t\t\t\t<Text size=\"small\" color={open || focus ? 'primary' : 'secondary'}>\n\t\t\t\t\t{label}\n\t\t\t\t</Text>\n\t\t\t\t<Row>\n\t\t\t\t\t<TextUpperCase>{selected[0].label}</TextUpperCase>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t</Row>\n\t\t<Icon\n\t\t\tsize=\"large\"\n\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\tcolor={open || focus ? 'primary' : 'secondary'}\n\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t/>\n\t</ColorContainer>\n);\n\nexport const EditorRecurrence = ({ editorId }: EditorProps): ReactElement | null => {\n\tconst recur = useAppSelector(selectEditorRecurrence(editorId));\n\tconst disabled = useAppSelector(selectEditorDisabled(editorId));\n\tconst [t] = useTranslation();\n\tconst start = useAppSelector(selectEditorStart(editorId));\n\tconst dispatch = useAppDispatch();\n\n\tconst recurrenceItems = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tlabel: t('label.none', 'None'),\n\t\t\t\tvalue: RECURRENCE_FREQUENCY.NEVER,\n\t\t\t\tcustomComponent: <RepeatItemComponent label={t('label.none', 'None')} />\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('label.every_day', 'Every day'),\n\t\t\t\tvalue: RECURRENCE_FREQUENCY.DAILY,\n\t\t\t\tcustomComponent: <RepeatItemComponent label={t('label.every_day', 'Every day')} />\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('repeat.everyWeek', 'Every Week'),\n\t\t\t\tvalue: RECURRENCE_FREQUENCY.WEEKLY,\n\t\t\t\tcustomComponent: <RepeatItemComponent label={t('repeat.everyWeek', 'Every Week')} />\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('repeat.everyMonth', 'Every Month'),\n\t\t\t\tvalue: RECURRENCE_FREQUENCY.MONTHLY,\n\t\t\t\tcustomComponent: <RepeatItemComponent label={t('repeat.everyMonth', 'Every Month')} />\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('repeat.everyYear', 'Every Year'),\n\t\t\t\tvalue: RECURRENCE_FREQUENCY.YEARLY,\n\t\t\t\tcustomComponent: <RepeatItemComponent label={t('repeat.everyYear', 'Every Year')} />\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('label.custom', 'Custom'),\n\t\t\t\tvalue: RECURRENCE_FREQUENCY.CUSTOM,\n\t\t\t\tcustomComponent: <CustomRepeatSelectItem editorId={editorId} />\n\t\t\t}\n\t\t],\n\t\t[editorId, t]\n\t);\n\n\tconst initialValue = useMemo(() => {\n\t\tconst recurrenceValue = recur ? RECURRENCE_FREQUENCY.CUSTOM : RECURRENCE_FREQUENCY.NEVER;\n\t\treturn find(recurrenceItems, { value: recurrenceValue }) ?? recurrenceItems[0];\n\t}, [recur, recurrenceItems]);\n\n\tconst [selected, setSelected] = useState(initialValue);\n\n\tconst onChange = useCallback(\n\t\t(ev) => {\n\t\t\tif (ev) {\n\t\t\t\tconst defaultValue = { freq: ev, interval: [{ ival: 1 }] };\n\t\t\t\tswitch (ev) {\n\t\t\t\t\tcase RECURRENCE_FREQUENCY.CUSTOM:\n\t\t\t\t\t\tsetSelected(find(recurrenceItems, { value: ev }) ?? recurrenceItems[0]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase RECURRENCE_FREQUENCY.DAILY:\n\t\t\t\t\tcase RECURRENCE_FREQUENCY.MONTHLY:\n\t\t\t\t\tcase RECURRENCE_FREQUENCY.YEARLY:\n\t\t\t\t\t\tsetSelected(find(recurrenceItems, { value: ev }) ?? recurrenceItems[0]);\n\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\teditEditorRecurrence({\n\t\t\t\t\t\t\t\tid: editorId,\n\t\t\t\t\t\t\t\trecur: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tadd: [{ rule: [defaultValue] }]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase RECURRENCE_FREQUENCY.WEEKLY:\n\t\t\t\t\t\tsetSelected(find(recurrenceItems, { value: ev }) ?? recurrenceItems[0]);\n\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\teditEditorRecurrence({\n\t\t\t\t\t\t\t\tid: editorId,\n\t\t\t\t\t\t\t\trecur: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tadd: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\trule: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...defaultValue,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbyday: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twkday: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ day: toUpper(`${moment(start).format('dddd').slice(0, 2)}`) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tsetSelected(\n\t\t\t\t\t\t\tfind(recurrenceItems, { value: RECURRENCE_FREQUENCY.NEVER }) ?? recurrenceItems[0]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdispatch(editEditorRecurrence({ id: editorId, recur: undefined }));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[recurrenceItems, dispatch, editorId, start]\n\t);\n\n\treturn initialValue ? (\n\t\t<Select\n\t\t\tlabel={t('label.repeat', 'Repeat')}\n\t\t\tonChange={onChange}\n\t\t\titems={recurrenceItems}\n\t\t\tselection={selected}\n\t\t\tdisablePortal\n\t\t\tdisabled={disabled?.recurrence}\n\t\t\tLabelFactory={LabelFactory}\n\t\t\tbackground=\"white\"\n\t\t\tstyle={{ border: '1px solid lightgray' }}\n\t\t/>\n\t) : null;\n};\n\nexport default EditorRecurrence;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Container, Divider, Row } from '@zextras/carbonio-design-system';\n\nimport { EditorActions } from './parts/editor-actions';\nimport { EditorAllDayCheckbox } from './parts/editor-allday-checkbox';\nimport { EditorAttachments } from './parts/editor-attachments';\nimport { EditorAttendees } from './parts/editor-attendees';\nimport { EditorCalendarSelector } from './parts/editor-calendar-selector';\nimport { EditorComposer } from './parts/editor-composer';\nimport { EditorDatePicker } from './parts/editor-date-picker';\nimport { EditorEquipments } from './parts/editor-equipments';\nimport { EditorFreeBusySelector } from './parts/editor-free-busy-selector';\nimport { EditorLocation } from './parts/editor-location';\nimport { EditorMeetingRooms } from './parts/editor-meeting-rooms';\nimport { EditorOrganizer } from './parts/editor-organizer';\nimport { EditorPrivateCheckbox } from './parts/editor-private-checkbox';\nimport { EditorReminder } from './parts/editor-reminder';\nimport { EditorResourcesController } from './parts/editor-resources-controller';\nimport { EditorSummary } from './parts/editor-summary';\nimport { EditorTimezone } from './parts/editor-time-zone';\nimport { EditorTitle } from './parts/editor-title';\nimport { EditorVirtualRoom } from './parts/editor-virtual-room';\nimport { EditorRecurrence } from './parts/recurrence';\nimport { EditorProps } from '../../types/editor';\nimport { BACKGROUND_COLOR } from '../../sruvi/Colors';\nimport { Paper } from '@mui/material';\n\nexport const EditorPanel = ({ editorId, expanded }: EditorProps): ReactElement | null =>\n\teditorId ? (\n\t\t<Container\n\t\t\tbackground={BACKGROUND_COLOR}\n\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\tstyle={{ overflow: 'auto' }}\n\t\t\tdata-testid=\"EditorPanel\"\n\t\t>\n\t\t\t<EditorSummary editorId={editorId} />\n\t\t\t<EditorActions editorId={editorId} />\n\t\t\t<Divider />\n\t\t\t<Container\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={BACKGROUND_COLOR}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\tpadding={{ all: 'large', bottom: 'extralarge' }}\n\t\t\t\tstyle={{\n\t\t\t\t\toverflowY: 'auto'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<EditorOrganizer editorId={editorId} />\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorTitle editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorLocation editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorMeetingRooms editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorEquipments editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<EditorVirtualRoom editorId={editorId} />\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorAttendees editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorFreeBusySelector editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<EditorCalendarSelector editorId={editorId} />\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }} mainAlignment=\"flex-start\">\n\t\t\t\t\t<EditorPrivateCheckbox editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorDatePicker editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorTimezone editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }} mainAlignment=\"flex-start\">\n\t\t\t\t\t<EditorAllDayCheckbox editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorReminder editorId={editorId} />\n\t\t\t\t</Row>\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<EditorRecurrence editorId={editorId} expanded={expanded} />\n\t\t\t\t</Row>\n\t\t\t\t<EditorAttachments editorId={editorId} expanded={expanded} />\n\t\t\t\t<Row height=\"fit\" width=\"fill\" padding={{ top: 'large' }}>\n\t\t\t\t\t<Paper variant=\"outlined\" style={{ padding: '8px' }}>\n\t\t\t\t\t\t<EditorComposer editorId={editorId} />\n\t\t\t\t\t</Paper>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t\t<EditorResourcesController editorId={editorId} />\n\t\t</Container>\n\t) : null;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { useBoard } from '@zextras/carbonio-shell-ui';\n\nimport { EditorPanel } from './editor-panel';\n\nconst BoardEditPanel = (): ReactElement | null => {\n\tconst board = useBoard();\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tif (!board?.editor?.id) {\n\t\treturn null;\n\t}\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\treturn <EditorPanel editorId={board?.editor?.id} />;\n};\nexport default BoardEditPanel;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\n/**\n * Format a size in byte as human readable\n */\nexport const humanFileSize = (inputSize: number): string => {\n\tif (inputSize === 0) {\n\t\treturn '0 B';\n\t}\n\tconst i = Math.floor(Math.log(inputSize) / Math.log(1024));\n\treturn `${(inputSize / 1024 ** i).toFixed(2).toString()} ${['B', 'KB', 'MB', 'GB', 'TB'][i]}`;\n};\n\nexport const previewType = (contentType: string): 'image' | 'pdf' | undefined =>\n\t// eslint-disable-next-line no-nested-ternary\n\tcontentType?.startsWith('image') ? 'image' : contentType?.endsWith('pdf') ? 'pdf' : undefined;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo, useRef, useState, useContext, ReactElement } from 'react';\n\nimport {\n\tContainer,\n\tIcon,\n\tIconButton,\n\tPadding,\n\tLink,\n\tRow,\n\tText,\n\tTooltip,\n\tuseTheme,\n\tContainerProps,\n\tTextProps,\n\tgetColor\n} from '@zextras/carbonio-design-system';\nimport { PreviewsManagerContext } from '@zextras/carbonio-ui-preview';\nimport { map, filter, reduce, uniqBy, find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport { humanFileSize, previewType } from '../../commons/file-preview';\nimport { getFileExtension, calcColor } from '../../commons/utilities';\n\nconst getAttachmentsLink = (\n\tmessageId: string,\n\tmessageSubject: string,\n\tattachments: Array<string>\n): string => {\n\tif (attachments.length > 1) {\n\t\treturn `/service/home/~/?auth=co&id=${messageId}&filename=${messageSubject}&charset=UTF-8&part=${attachments.join(\n\t\t\t','\n\t\t)}&disp=a&fmt=zip`;\n\t}\n\treturn `/service/home/~/?auth=co&id=${messageId}&part=${attachments.join(',')}&disp=a`;\n};\n\nconst AttachmentHoverBarContainer = styled(Container)`\n\tdisplay: none;\n\theight: 0;\n`;\n\nconst AttachmentContainer = styled(Container)<ContainerProps & { disabled: boolean }>`\n\tborder-radius: 0.125rem;\n\twidth: calc(50% - 0.5rem);\n\ttransition: 0.2s ease-out;\n\tmargin-bottom: ${({ theme }): string => theme.sizes.padding.small};\n\tmargin-right: ${({ theme }): string => theme.sizes.padding.small};\n\tbox-sizing: border-box;\n\t&:hover {\n\t\tbackground-color: ${({ theme, background = 'transparent', disabled }): string =>\n\t\t\tdisabled ? 'gray5' : getColor(`${background}.hover`, theme)};\n\t\t& ${AttachmentHoverBarContainer} {\n\t\t\tdisplay: flex;\n\t\t}\n\t}\n\t&:focus {\n\t\tbackground-color: ${({ theme, background = 'transparent' }): string =>\n\t\t\tgetColor(`${background}.focus`, theme)};\n\t}\n\tcursor: ${({ disabled }): string => (disabled ? 'default' : 'pointer')};\n`;\n\nconst AttachmentLink = styled.a`\n\tmargin-bottom: ${({ theme }): string => theme.sizes.padding.small};\n\tposition: relative;\n\ttext-decoration: none;\n`;\n\nconst AttachmentExtension = styled(Text)<\n\tTextProps & { background?: { extension: string; color: string } }\n>`\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 2rem;\n\theight: 2rem;\n\tborder-radius: ${({ theme }): string => theme.borderRadius};\n\tbackground-color: ${({ theme, disabled, background }): string =>\n\t\tdisabled ? theme.palette.primary.disabled : background?.color || theme.palette.primary.regular};\n\tcolor: ${({ theme }): string => theme.palette.gray6.regular};\n\tfont-size: calc(${({ theme }): string => theme.sizes.font.small} - 0.125rem);\n\ttext-transform: uppercase;\n\tmargin-right: ${({ theme }): string => theme.sizes.padding.small};\n`;\n\ntype AttachmentProps = {\n\tlink?: string;\n\tid?: string;\n\tpart: string;\n\tisEditor: boolean;\n\tremoveAttachment: (arg: string) => void;\n\tdisabled: boolean;\n\ticonColors: Array<{\n\t\textension: string;\n\t\tcolor: string;\n\t}>;\n\tatt: any;\n};\n\nconst Attachment = ({\n\tlink,\n\tid,\n\tpart,\n\tisEditor,\n\tremoveAttachment,\n\tdisabled = false,\n\ticonColors,\n\tatt\n}: AttachmentProps): ReactElement => {\n\tconst { createPreview } = useContext(PreviewsManagerContext);\n\tconst extension = getFileExtension(att);\n\tconst sizeLabel = useMemo(() => humanFileSize(att.size), [att.size]);\n\tconst [t] = useTranslation();\n\tconst inputRef = useRef<HTMLAnchorElement>(null);\n\tconst inputRef2 = useRef<HTMLAnchorElement>(null);\n\tconst downloadAttachment = useCallback(() => {\n\t\tif (inputRef?.current) {\n\t\t\tinputRef.current.click();\n\t\t}\n\t}, [inputRef]);\n\n\tconst preview = useCallback(\n\t\t(ev) => {\n\t\t\tev.preventDefault();\n\t\t\tconst pType = previewType(att.contentType);\n\t\t\tif (pType && link) {\n\t\t\t\tcreatePreview({\n\t\t\t\t\tsrc: link,\n\t\t\t\t\tpreviewType: pType,\n\t\t\t\t\t/** Left Action for the preview */\n\t\t\t\t\tcloseAction: {\n\t\t\t\t\t\tid: 'close',\n\t\t\t\t\t\ticon: 'ArrowBack',\n\t\t\t\t\t\ttooltipLabel: t('preview.close', 'Close Preview')\n\t\t\t\t\t},\n\t\t\t\t\t/** Actions for the preview */\n\t\t\t\t\t// actions: HeaderAction[],\n\t\t\t\t\t/** Extension of the file, shown as info */\n\t\t\t\t\textension: att.filename.substring(att.filename.lastIndexOf('.') + 1),\n\t\t\t\t\t/** Name of the file, shown as info */\n\t\t\t\t\tfilename: att.filename,\n\t\t\t\t\t/** Size of the file, shown as info */\n\t\t\t\t\tsize: humanFileSize(att.size)\n\t\t\t\t});\n\t\t\t} else if (inputRef2.current) {\n\t\t\t\tinputRef2.current.click();\n\t\t\t}\n\t\t},\n\t\t[att, createPreview, link, t]\n\t);\n\treturn (\n\t\t<AttachmentContainer\n\t\t\torientation=\"horizontal\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t\tbackground={disabled ? 'gray5' : 'gray3'}\n\t\t\tdisabled={disabled}\n\t\t\tpadding={{ right: 'medium' }}\n\t\t>\n\t\t\t<Tooltip\n\t\t\t\tkey={isEditor ? `${id}-Edit` : `${id}-Preview`}\n\t\t\t\tlabel={\n\t\t\t\t\tdisabled\n\t\t\t\t\t\t? t('action.save_to_preview', 'Save to preview')\n\t\t\t\t\t\t: t('action.preview', 'Click to preview')\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Row\n\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tonClick={preview}\n\t\t\t\t\ttakeAvailableSpace\n\t\t\t\t>\n\t\t\t\t\t<AttachmentExtension\n\t\t\t\t\t\tbackground={find(iconColors, (ic) => ic.extension === extension)}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t{extension}\n\t\t\t\t\t</AttachmentExtension>\n\t\t\t\t\t<Row orientation=\"vertical\" crossAlignment=\"flex-start\" takeAvailableSpace>\n\t\t\t\t\t\t<Padding style={{ width: '100%' }} bottom=\"extrasmall\">\n\t\t\t\t\t\t\t<Text disabled={disabled}>{att.filename}</Text>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<Text disabled={disabled} color=\"gray1\" size=\"small\">\n\t\t\t\t\t\t\t{sizeLabel}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t</Tooltip>\n\t\t\t<Row orientation=\"horizontal\" crossAlignment=\"center\">\n\t\t\t\t<AttachmentHoverBarContainer orientation=\"horizontal\">\n\t\t\t\t\t{disabled ? (\n\t\t\t\t\t\t<Tooltip key={`${id}-DeletePermanentlyOutline`} label={t('label.delete', 'Delete')}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\ticon={'DeletePermanentlyOutline'}\n\t\t\t\t\t\t\t\tonClick={(): void => removeAttachment(part)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tkey={isEditor ? `${id}-EditOutline` : `${id}-DeletePermanentlyOutline`}\n\t\t\t\t\t\t\tlabel={isEditor ? t('label.delete', 'Delete') : t('label.download', 'Download')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\ticon={isEditor ? 'DeletePermanentlyOutline' : 'DownloadOutline'}\n\t\t\t\t\t\t\t\tonClick={isEditor ? (): void => removeAttachment(part) : downloadAttachment}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t)}\n\t\t\t\t</AttachmentHoverBarContainer>\n\t\t\t</Row>\n\t\t\t{!disabled && (\n\t\t\t\t<AttachmentLink\n\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\tref={inputRef2}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\thref={`/service/home/~/?auth=co&id=${id}&part=${part}`}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<AttachmentLink ref={inputRef} rel=\"noopener\" target=\"_blank\" href={link} />\n\t\t</AttachmentContainer>\n\t);\n};\n\ntype AttachmentsBlockProps = {\n\tattachments: Array<{\n\t\tpart: any;\n\t\tmid: string;\n\t\tfilename: string;\n\t\tcontentType: string;\n\t\tname: string;\n\t\taid?: string;\n\t}>;\n\tid?: string;\n\tsubject: string;\n\tonAttachmentsChange?: (\n\t\targ1: { aid?: string[]; mp: Array<{ part: any; mid: string }> },\n\t\targ2: any\n\t) => void;\n\tisEditor?: boolean;\n\tdisabled?: boolean;\n};\n\nexport const AttachmentsBlock = ({\n\tattachments,\n\tid,\n\tsubject,\n\tonAttachmentsChange,\n\tisEditor = false,\n\tdisabled\n}: AttachmentsBlockProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst [expanded, setExpanded] = useState(false);\n\tconst theme = useTheme();\n\n\tconst attachmentsCount = useMemo(() => attachments.length, [attachments]);\n\n\tconst actionsDownloadLink = useMemo(() => {\n\t\tconst attachmentsParts = map(attachments, 'name');\n\t\treturn id ? getAttachmentsLink(id, subject, attachmentsParts) : undefined;\n\t}, [attachments, id, subject]);\n\n\tconst removeAttachment = useCallback(\n\t\t(part) => {\n\t\t\tconst attachmentFiles = filter(attachments, (p) =>\n\t\t\t\tp.name ? p.name !== part : !p.aid || p.aid !== part\n\t\t\t);\n\t\t\tif (onAttachmentsChange) {\n\t\t\t\tonAttachmentsChange(\n\t\t\t\t\t{\n\t\t\t\t\t\taid: reduce(\n\t\t\t\t\t\t\tattachmentFiles,\n\t\t\t\t\t\t\t(acc, item) => (item.aid ? [...acc, item.aid] : acc),\n\t\t\t\t\t\t\t[] as string[]\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmp: reduce(\n\t\t\t\t\t\t\tattachmentFiles,\n\t\t\t\t\t\t\t(acc, item) => (item.name && id ? [...acc, { part: item.name, mid: id }] : acc),\n\t\t\t\t\t\t\t[] as Array<{ part: any; mid: string }>\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\tattachmentFiles\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[attachments, id, onAttachmentsChange]\n\t);\n\n\tconst removeAllAttachments = useCallback(() => {\n\t\tif (onAttachmentsChange) {\n\t\t\tonAttachmentsChange({ mp: [] }, []);\n\t\t}\n\t}, [onAttachmentsChange]);\n\n\tconst attachToVisualize = useMemo(\n\t\t() => (expanded ? attachments : attachments.slice(0, 2)),\n\t\t[attachments, expanded]\n\t);\n\n\tconst iconColors = useMemo(\n\t\t() =>\n\t\t\tuniqBy(\n\t\t\t\tmap(attachments, (att) => {\n\t\t\t\t\tconst fileExtn = getFileExtension(att);\n\t\t\t\t\tconst color = calcColor(att.contentType, theme);\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\textension: fileExtn,\n\t\t\t\t\t\tcolor\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\t'extension'\n\t\t\t),\n\t\t[attachments, theme]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{attachmentsCount > 0 && (\n\t\t\t\t<Container mainAlignment=\"flex-start\" crossAlignment=\"flex-start\">\n\t\t\t\t\t<Row mainAlignment=\"flex-start\" padding={{ top: 'extrasmall', bottom: 'medium' }}>\n\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t{attachmentsCount < 3 && attachmentsCount > 1 && (\n\t\t\t\t\t\t\t\t<Text color=\"gray1\">\n\t\t\t\t\t\t\t\t\t{t('label.attachment', {\n\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Attachment',\n\t\t\t\t\t\t\t\t\t\tdefaultValue_other: '{{count}} Attachments'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{attachmentsCount === 1 && (\n\t\t\t\t\t\t\t\t<Text color=\"gray1\">{`1 ${t('label.attachment', {\n\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Attachment',\n\t\t\t\t\t\t\t\t\tdefaultValue_other: '{{count}} Attachments'\n\t\t\t\t\t\t\t\t})}`}</Text>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{attachmentsCount > 2 &&\n\t\t\t\t\t\t\t\t(expanded ? (\n\t\t\t\t\t\t\t\t\t<Row onClick={(): void => setExpanded(false)} style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Text color=\"primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t('label.attachment', {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Attachment',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_other: '{{count}} Attachments'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t<Icon icon=\"ArrowIosUpward\" color=\"primary\" />\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Row onClick={(): void => setExpanded(true)} style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Text color=\"primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t('label.show', {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Show',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_other: 'Show all'\n\t\t\t\t\t\t\t\t\t\t\t\t})}{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t{t('label.attachment', {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Attachment',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_other: '{{count}} Attachments'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t<Icon icon=\"ArrowIosDownward\" color=\"primary\" />\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\thref={isEditor ? undefined : actionsDownloadLink}\n\t\t\t\t\t\t\tonClick={isEditor ? removeAllAttachments : undefined}\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isEditor\n\t\t\t\t\t\t\t\t? t('label.delete', {\n\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Delete',\n\t\t\t\t\t\t\t\t\t\tdefaultValue_other: 'Delete all'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t: t('label.download', {\n\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Download',\n\t\t\t\t\t\t\t\t\t\tdefaultValue_other: 'Download all'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Row>\n\n\t\t\t\t\t<Container\n\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\twrap=\"wrap\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{map(attachToVisualize, (att, index) => (\n\t\t\t\t\t\t\t<Attachment\n\t\t\t\t\t\t\t\tkey={`att-${att.filename}-${index}`}\n\t\t\t\t\t\t\t\tlink={id ? getAttachmentsLink(id, subject, [att.name]) : undefined}\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\tpart={att.name ?? att.aid}\n\t\t\t\t\t\t\t\tisEditor={isEditor}\n\t\t\t\t\t\t\t\tremoveAttachment={removeAttachment}\n\t\t\t\t\t\t\t\tdisabled={!att.name ?? disabled}\n\t\t\t\t\t\t\t\ticonColors={iconColors}\n\t\t\t\t\t\t\t\tatt={att}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Container>\n\t\t\t\t</Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n"],"names":["usePrefs","prefs","useUserSettings","createAppointment","createAsyncThunk","async","draft","editor","rejectWithValue","body","normalizeSoapMessageFromEditor","res","soapFetch","response","Fault","error","isNew","isSeries","recur","isInstance","isException","inviteId","invId","onSave","dispatch","createAppointmentFn","then","payload","updateEditor","id","Promise","resolve","modifyAppointmentFn","modifyAppointment","onSend","isProposeNewTime","editorId","proposeNewTime","onProposeNewTime","uploadParts","all","map","files","file","fetch","headers","type","convertToDecimal","name","method","text","txt","eval","val","workWeek","zimbraPrefCalendarWorkingHours","sortBy","split","t","day","working","start","end","ResizedIconCheckbox","styled","IconCheckbox","withConfig","displayName","componentId","disabled","theme","value","palette","secondary","gray6","regular","currentColor","primary","FileInput","EditorAttachmentsButton","inputRef","useRef","openDD","setOpenDD","useState","attachmentFiles","useAppSelector","selectEditorAttachmentFiles","attachAid","selectEditorAttachmentAid","parts","selectEditorAttach","selectEditorDisabled","useAppDispatch","onFileClick","useCallback","current","click","getLink","getLinkAvailable","useGetPublicUrl","useIntegratedFunction","createSnackbar","useSnackbar","richText","selectEditorRichText","plainText","selectEditorPlainText","title","selectEditorTitle","description","useMemo","date","moment","format","defaultValue","nodes","promises","node","allSettled","success","filter","allSuccess","length","allFails","label","key","replace","hideButton","autoHideTimeout","newText","i","url","join","concat","editEditorText","getFilesFromDrive","getFilesAvailable","useGetFilesFromDrive","uploadTo","isAvailable","confirmAction","nodeId","targetModule","uploadToFiles","attachments","contentType","mime_type","disposition","filename","undefined","size","aid","attachmentId","attachmentFilesArr","editEditorAttachments","attach","mp","attachmentFIles","actionURLTarget","confirmLabel","allowFiles","allowFolders","getFilesAction","getFilesActionAvailable","getIntegratedFunction","publicUrlItem","icon","onClick","actionTarget","addFileItem","attachmentsItems","customComponent","React","Icon","Padding","horizontal","Text","onChange","addAttachments","ct","s","union","el","Tooltip","Dropdown","items","display","width","forceOpen","attachmentsButton","ref","multiple","EditorRichTextButton","isRichText","selectEditorIsRichText","editIsRichText","richTextButton","SeriesEditWarningModal","onClose","action","isSending","message","board","useBoard","attendeesLength","selectEditorAttendees","meetingRoomLength","selectEditorMeetingRoom","equipmentsLength","selectEditorEquipment","secondaryActionLabel","onConfirm","onDiscard","closeBoard","Container","padding","mainAlignment","crossAlignment","height","ModalHeader","top","bottom","overflow","ModalFooter","secondaryAction","secondaryLabel","secondaryBtnType","secondaryColor","additionalAction","EditorSaveButton","selectEditorIsNew","selectEditor","createModal","useModal","useTranslation","closeModal","children","StoreProvider","Button","saveButton","EditorSendButton","attendees","optionalAttendees","selectEditorOptionalAttendees","meetingRooms","equipments","isDisabled","sendButton","panel","replaceHistory","EditorActions","Row","orientation","left","EditorAllDayCheckbox","allDay","selectEditorAllDay","e","editEditorAllDay","isNil","Checkbox","EditorAttachments","selectEditorInviteId","onAttachmentsChange","AttachmentsBlock","isEditor","subject","AttendeesContainer","hasTooltip","gray5","gray2","EditorAttendees","ContactInput","integrationAvailable","useIntegratedComponent","uid","selectEditorUid","selectEditorStart","selectEditorEnd","sender","selectSender","showOptionals","setShowOptional","orderedAccountIds","setOrderedAccountIds","toggleOptionals","show","attendeesAvailabilityList","useAttendeesAvailability","hasError","some","optionalHasError","useEffect","priorityAccountAddress","sharedAccounts","getShareInfoRequest","folders","forEach","account","ownerId","ownerEmail","push","address","defaultAccount","getUserAccount","getDefaultAccount","finalList","sortedList","item","getOrderedAccountIds","ids","catch","editEditorAttendees","onOptionalsChange","editEditorOptionalAttendees","chip","currentChipAvailability","find","email","oldActions","actions","reject","getIsBusyAtTimeOfTheEvent","color","background","style","placeholder","dragAndDropEnabled","ChipInput","border","right","EditorAvailabilityWarningRow","list","EditorCalendarSelector","calendarId","selectEditorCalendarId","calendar","normalizeCalendarEditor","data","editEditorCalendar","CalendarSelector","onCalendarChange","excludeTrash","TextArea","props","sizes","large","EditorWrapper","gray4","borderRadius","PlainComposer","plainTextValue","setPlainTextValue","debounceInput","debounce","plain","htmlText","trailing","leading","textAreaLabel","onPlainTextChange","target","composer","HtmlComposer","Composer","richTextValue","setRichTextValue","onRichTextChange","onEditorChange","minHeight","customInitOptions","auto_focus","EditorComposer","composerIsAvailable","EndDatePicker","diff","onEndChange","d","valueOf","dateFormat","DateTimePicker","includeTime","StartDatePicker","onStartChange","startTime","EditorDatePicker","newStartValue","newEndValue","editEditorDate","takeAvailableSpace","Date","datePicker","SkeletonTile","radius","Loader","minWidth","Math","random","marginBottom","normalizeResources","r","fileAsStr","_attrs","zimbraCalResType","EditorResourceComponent","resourcesValue","onInputType","options","setOptions","warningLabel","singleWarningLabel","onAdd","valueToAdd","defaultLabel","resourceAvailability","room","roomInList","backspaceEvent","callback","keys","ctrlKey","haveToPreventDefault","useKeyboard","confirmChipOnBlur","separators","searchResources","offset","limit","needExp","_jsns","EditorEquipments","equipmentValue","equipmentChipValue","result","avatarIcon","avatarBackground","avatarColor","newValue","uniqBy","editEditorEquipment","equipment","textContent","equipmentResource","cn","remoteResources","useAppStatusStore","StatusItemComponent","Square","EditorFreeBusySelector","statusItems","getStatusItems","freeBusy","selectEditorFreeBusy","getNewSelection","selected","setSelected","editEditorDisplayStatus","Select","selection","LabelFactory","EditorLocation","location","selectEditorLocation","setValue","loc","editEditorLocation","Input","backgroundColor","EditorMeetingRooms","meetingRoomsValue","meetingRoomsChipValue","editEditorMeetingRoom","meetingRoom","meetingResources","EditorOrganizer","identities","useIdentityItems","useUserAccount","identity","idx","zimbraPrefIdentityName","zimbraPrefFromDisplay","fromAddress","zimbraPrefFromAddress","compact","fullName","zimbraPrefFromAddressType","identityName","editSender","fromLabel","upperFirst","organizer","EditorPrivateCheckbox","apptClass","selectEditorClass","editEditorClass","class","private","ColorContainer","TextUpperCase","open","focus","alignSelf","EditorReminder","reminderItems","count","defaultValue_one","defaultValue_other","toString","getReminderItems","reminder","selectEditorReminder","editEditorReminder","dropdownMaxHeight","disablePortal","searchCalendarResourcesRequest","attrs","SEARCH_RESOURCES_ATTRS","searchFilter","conds","or","cond","attr","op","SEARCH_RESOURCE_OP","EditorResourcesController","equipmentsValue","isLoading","setIsLoading","calresource","AvatarComp","Avatar","TitleRow","EditorSummary","timezone","selectEditorTimezone","selectEditorRoom","selectEditorCalendar","meetingRoomField","roo","equipmentsField","eq","virtualRoom","localTimezone","localStart","getLocalTime","localEnd","eventTimeString","eventTimezoneString","showTimezoneTooltip","eventTimezoneTooltip","useGetEventTimezoneString","wrap","CALENDARS_STANDARD_COLORS","weight","customColor","EditorTimezone","zimbraPrefUseTimeZoneListInCalendar","timeZonesOptions","TimeZonesOptions","timezoneLabel","findLabel","newTimezone","editEditorTimezone","EditorTitle","boardUtilities","useBoardHooks","updateBoard","newBoardTitle","editEditorTitle","autoFocus","EditorVirtualRoom","RoomSelector","isRoomAvailable","roomData","editEditorRoom","RECURRENCE_FREQUENCY","RADIO_VALUES","RecurrenceContext","createContext","IntervalInput","onIntervalChange","ev","convertedInputToNumber","parseInt","isNumber","isNaN","defaultState","freq","interval","ival","radioValue","DailyOptions","frequency","setNewStartValue","useContext","selectEditorRecurrenceFrequency","selectEditorRecurrenceInterval","byday","selectEditorRecurrenceByDay","setRadioValue","initialState","wkday","workingDays","differenceWith","isEqual","startValue","setStartValue","startValueInitialState","omitBy","inputValue","setInputValue","onInputChange","RadioGroup","Radio","iconColor","vertical","useRecurrenceItems","months","ordinalNumbers","weekDays","weekOptions","repetitionItems","MonthlyDayInput","testId","onMonthChange","OrdinalNumberSelect","onBySetPosChange","selectedValue","itemValue","WeekdaySelect","setSelection","daySelection","onByDayChange","days","MonthlyOptions","moDayList","setMoDayList","intervalFirstInput","setIntervalFirstInput","intervalSecondInput","setIntervalSecondInput","bymonthday","modaylist","posListSelectValue","setPosListSelectValue","byDaySelectValue","setByDaySelectValue","onRadioChange","bysetpos","poslist","onMoDayListChange","prevValue","onFirstIntervalChange","onSecondIntervalChange","momentLocalizer","RecurrenceEndOptions","setNewEndValue","selectEditorRecurrenceCount","until","selectEditorRecurrenceUntilDate","radioInitialState","initialPickerValue","pickerValue","setPickerValue","onInputValueChange","num","onRadioValueChange","endAfterString","isDatePickerDisabled","onDateChange","fullData","maxWidth","WeekdayCheckboxes","isHidden","onCheckboxClick","opt","isChecked","slice","WeeklyOptions","workingSchedule","workingDay","WEEK_SCHEDULE","selectValue","setSelectValue","selectInitialValue","weeklyOptions","checkboxesValue","setCheckboxesValue","MonthSelect","molist","Number","YearlyOptions","byMonthFirstSelectValue","setByMonthFirstSelectValue","byMonthSecondSelectValue","setByMonthSecondSelectValue","bymonth","onFirstMonthChange","onSecondMonthChange","FrequencySelect","context","initialValue","setFrequency","CustomRecurrenceModal","setEndInitialValue","add","rule","editEditorRecurrence","recurrenceContextValue","Provider","showCloseIcon","closeIconTooltip","Divider","ModalBody","CustomRepeatSelectItem","maxHeight","RepeatItemComponent","EditorRecurrence","selectEditorRecurrence","recurrenceItems","recurrenceValue","toUpper","recurrence","EditorPanel","expanded","BACKGROUND_COLOR","overflowY","Paper","variant","BoardEditPanel","humanFileSize","inputSize","floor","log","toFixed","getAttachmentsLink","messageId","messageSubject","AttachmentHoverBarContainer","AttachmentContainer","small","getColor","AttachmentLink","AttachmentExtension","font","Attachment","link","part","removeAttachment","iconColors","att","createPreview","PreviewsManagerContext","extension","getFileExtension","sizeLabel","inputRef2","downloadAttachment","preview","preventDefault","pType","startsWith","endsWith","src","previewType","closeAction","tooltipLabel","substring","lastIndexOf","ic","IconButton","rel","href","setExpanded","useTheme","attachmentsCount","actionsDownloadLink","attachmentsParts","p","reduce","acc","mid","removeAllAttachments","attachToVisualize","calcColor","cursor","Link","index"],"sourceRoot":""}