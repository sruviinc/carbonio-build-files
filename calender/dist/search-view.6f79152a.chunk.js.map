{"version":3,"file":"search-view.6f79152a.chunk.js","mappings":"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","sources":["webpack://carbonio-calendars-ui/./src/carbonio-ui-commons/utils/use-prefs.ts","webpack://carbonio-calendars-ui/./src/sruvi/Colors.tsx","webpack://carbonio-calendars-ui/./src/view/search/parts/from-date-to-date-row.tsx","webpack://carbonio-calendars-ui/./src/view/search/parts/keyword-row.tsx","webpack://carbonio-calendars-ui/./src/constants/advance-filter-modal.ts","webpack://carbonio-calendars-ui/./src/view/search/advance-filter-modal.tsx","webpack://carbonio-calendars-ui/./src/view/search/parts/advanced-filter-button.tsx","webpack://carbonio-calendars-ui/./src/view/search/search-list-item.jsx","webpack://carbonio-calendars-ui/./src/view/search/shimmer-list.tsx","webpack://carbonio-calendars-ui/./src/view/search/search-list.tsx","webpack://carbonio-calendars-ui/./src/view/search/displayer.tsx","webpack://carbonio-calendars-ui/./src/view/search/search-panel.tsx","webpack://carbonio-calendars-ui/./src/hooks/use-selected-event-from-array.tsx","webpack://carbonio-calendars-ui/./src/view/search/search-view.tsx"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useUserSettings } from '@zextras/carbonio-shell-ui';\n\nimport type { UserPrefs } from '../types';\n\nexport const usePrefs = (): UserPrefs => {\n\tconst { prefs } = useUserSettings();\n\treturn <UserPrefs>prefs;\n};\n","export const BACKGROUND_COLOR = '#FFFFFF';\nexport const BACKGROUND_HEADER_COLOR = '#ffffff';\nexport const PRIMARY_COLOR = '#ff6600';\nexport const SECONDARY_COLOR = '#0a1153';\nexport const FOREGROUND_COLOR = '#c2e7ff';\nexport const PRIMARY_ICON_COLOR_ACTIVE = '#0a1153';\n\nexport const BUTTONCOLOR = '#0a1153';\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement, useCallback } from 'react';\n\nimport { Container, DateTimePicker } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\n\ntype ComponentProps = {\n\tfromDate: Date;\n\tsetFromDate: (arg: Date) => void;\n\ttoDate: Date;\n\tsetToDate: (arg: Date) => void;\n};\nconst FromDateToDateRow: FC<ComponentProps> = ({\n\tfromDate,\n\tsetFromDate,\n\ttoDate,\n\tsetToDate\n}): ReactElement => {\n\tconst onFromDateChange = useCallback(\n\t\t(date) => {\n\t\t\tsetFromDate(date);\n\t\t},\n\t\t[setFromDate]\n\t);\n\n\tconst onToDateChange = useCallback(\n\t\t(date) => {\n\t\t\tsetToDate(date);\n\t\t},\n\t\t[setToDate]\n\t);\n\treturn (\n\t\t<Container padding={{ bottom: 'small', top: 'medium' }} orientation=\"horizontal\">\n\t\t\t<Container padding={{ right: 'extrasmall' }}>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\tlabel={t('search.from_date', 'From Date')}\n\t\t\t\t\tenableChips\n\t\t\t\t\tchipProps={{ avatarBackground: 'gray1', avatarIcon: 'CalendarOutline' }}\n\t\t\t\t\tdateFormat=\"dd/MM/yyyy\"\n\t\t\t\t\tincludeTime={false}\n\t\t\t\t\tdefaultValue={fromDate}\n\t\t\t\t\tonChange={onFromDateChange}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Container padding={{ horizontal: 'extrasmall' }}>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\tlabel={t('search.to_date', 'To Date')}\n\t\t\t\t\tenableChips\n\t\t\t\t\tchipProps={{ avatarBackground: 'gray1', avatarIcon: 'CalendarOutline' }}\n\t\t\t\t\tdateFormat=\"dd/MM/yyyy\"\n\t\t\t\t\tincludeTime={false}\n\t\t\t\t\tdefaultValue={toDate}\n\t\t\t\t\tonChange={onToDateChange}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</Container>\n\t);\n};\n\nexport default FromDateToDateRow;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement, useCallback } from 'react';\n\nimport { Container, ChipInput, ChipItem } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\n\ntype ComponentProps = {\n\tcompProps: {\n\t\totherKeywords: Array<any>;\n\t\tsetOtherKeywords: (arg: any) => void;\n\t};\n};\nconst KeywordRow: FC<ComponentProps> = ({ compProps }): ReactElement => {\n\tconst { otherKeywords, setOtherKeywords } = compProps;\n\tconst onChange = useCallback((state, stateHandler) => {\n\t\tstateHandler(state);\n\t}, []);\n\tconst keywordChipOnAdd = useCallback(\n\t\t(label) => ({\n\t\t\tlabel,\n\t\t\thasAvatar: false,\n\t\t\tisGeneric: true\n\t\t}),\n\t\t[]\n\t);\n\n\tconst keywordOnChange = useCallback(\n\t\t(value: ChipItem[]): void => onChange(value, setOtherKeywords),\n\t\t[onChange, setOtherKeywords]\n\t);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Container padding={{ bottom: 'small', top: 'medium' }} orientation=\"horizontal\">\n\t\t\t\t<Container padding={{ right: 'extrasmall' }} maxWidth=\"100%\">\n\t\t\t\t\t<ChipInput\n\t\t\t\t\t\tplaceholder={t('label.keywords', 'Keywords')}\n\t\t\t\t\t\tbackground=\"gray5\"\n\t\t\t\t\t\tvalue={otherKeywords}\n\t\t\t\t\t\tseparators={[\n\t\t\t\t\t\t\t{ key: 'Enter', ctrlKey: false },\n\t\t\t\t\t\t\t{ key: ',', ctrlKey: false }\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tonChange={keywordOnChange}\n\t\t\t\t\t\tonAdd={keywordChipOnAdd}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t</React.Fragment>\n\t);\n};\n\nexport default KeywordRow;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport moment from 'moment';\n\nexport const DEFAULT_DATE_START = moment().startOf('day').subtract(1, 'months').valueOf();\nexport const DEFAULT_DATE_END = moment().startOf('day').add(1, 'months').valueOf();\n","/* eslint-disable prettier/prettier */\n/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement, useState, useCallback, useMemo, useEffect } from 'react';\n\nimport { CustomModal, Container, ChipProps } from '@zextras/carbonio-design-system';\nimport { QueryChip, t } from '@zextras/carbonio-shell-ui';\nimport { concat, filter, includes, map } from 'lodash';\n\nimport FromDateToDateRow from './parts/from-date-to-date-row';\nimport KeywordRow from './parts/keyword-row';\nimport ModalFooter from '../../commons/modal-footer';\nimport { ModalHeader } from '../../commons/modal-header';\nimport { DEFAULT_DATE_START, DEFAULT_DATE_END } from '../../constants/advance-filter-modal';\n\ntype KeywordState = Array<{\n\tid: string;\n\tlabel: string;\n\thasAvatar?: boolean;\n\tvalue?: string;\n\tisQueryFilter?: boolean;\n\tisGeneric?: boolean;\n\tavatarIcon?: string;\n\tavatarBackground?: ChipProps['background'];\n\thasError?: boolean;\n\terror?: boolean;\n}>;\n\ntype AdvancedFilterModalProps = {\n\topen: boolean;\n\tdateStart: number;\n\tdateEnd: number;\n    setDateStart: (arg: number) => void;\n    setDateEnd: (arg: number) => void;\n\tonClose: () => void;\n\tquery: Array<{\n\t\tid: string;\n\t\tlabel: string;\n\t\tvalue?: string;\n\t\tisGeneric?: boolean;\n\t\tisQueryFilter?: boolean;\n\t}>;\n\tupdateQuery: (arg: Array<QueryChip>) => void;\n};\n\nconst AdvancedFilterModal: FC<AdvancedFilterModalProps> = ({\n\topen,\n\tonClose,\n\tquery,\n\tupdateQuery,\n\tdateStart,\n\tdateEnd,\n    setDateStart,\n    setDateEnd\n}): ReactElement => {\n\tconst [otherKeywords, setOtherKeywords] = useState<KeywordState>([]);\n\n\tconst [folder, setFolder] = useState<KeywordState>([]);\n\tconst [fromDate, setFromDate] = useState<any>(dateStart);\n\tconst [toDate, setToDate] = useState<any>(dateEnd);\n\tconst queryArray = useMemo(() => ['has:attachment', 'is:flagged', 'is:unread'], []);\n\n\tuseEffect(() => {\n\t\tconst updatedQuery = map(\n\t\t\tfilter(\n\t\t\t\tquery,\n\t\t\t\t(v) =>\n\t\t\t\t\t!includes(queryArray, v.label) &&\n\t\t\t\t\t!/^Is:/.test(v.label) &&\n\t\t\t\t\t!v.isQueryFilter\n\t\t\t),\n\t\t\t(q) => ({ ...q, hasAvatar: false })\n\t\t);\n\t\tsetOtherKeywords(updatedQuery);\n\t}, [query, queryArray]);\n    \n\n\n\tconst resetFilters = useCallback(() => {\n        setFromDate(DEFAULT_DATE_START);\n        setDateStart(DEFAULT_DATE_START);\n        setToDate(DEFAULT_DATE_END);\n        setDateEnd(DEFAULT_DATE_END);\n        updateQuery([]);\n\t\tsetFolder([]);\n\t}, [setDateEnd, setDateStart, updateQuery]);\n\n\tconst queryToBe = useMemo<Array<QueryChip>>(\n\t\t() => concat(otherKeywords, folder),\n\t\t[folder, otherKeywords]\n\t);\n\n\tconst onConfirm = useCallback(() => {\n\t\tupdateQuery(queryToBe);\n        setDateStart(fromDate.valueOf());\n        setDateEnd(toDate.valueOf());\n\t\tonClose();\n\t}, [updateQuery, queryToBe, setDateStart, fromDate, setDateEnd, toDate, onClose]);\n\n\tconst keywordRowProps = useMemo(\n\t\t() => ({\n\t\t\totherKeywords,\n\t\t\tsetOtherKeywords\n\t\t}),\n\t\t[otherKeywords]\n\t);\n\n\treturn (\n\t\t<CustomModal open={open} onClose={onClose} maxHeight=\"90vh\" size=\"medium\">\n\t\t\t<Container padding={{ bottom: 'medium' }}>\n\t\t\t\t<ModalHeader\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\ttitle={t('label.single_advanced_filter', 'Advanced Filters')}\n\t\t\t\t/>\n\n\t\t\t\t<Container padding={{ horizontal: 'medium', vertical: 'small' }}>\n\t\t\t\t\t<KeywordRow compProps={keywordRowProps} />\n\t\t\t\t\t<FromDateToDateRow\n\t\t\t\t\t\tfromDate={fromDate}\n\t\t\t\t\t\tsetFromDate={setFromDate}\n\t\t\t\t\t\ttoDate={toDate}\n\t\t\t\t\t\tsetToDate={setToDate}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t\t<ModalFooter\n\t\t\t\t\tonConfirm={onConfirm}\n\t\t\t\t\tlabel={t('action.search', 'Search')}\n\t\t\t\t\tsecondaryLabel={t('action.reset', 'Reset')}\n\t\t\t\t\tsecondaryAction={resetFilters}\n\t\t\t\t\tsecondaryBtnType=\"outlined\"\n\t\t\t\t\tsecondaryColor=\"primary\"\n\t\t\t\t\tpaddingTop=\"small\"\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</CustomModal>\n\t);\n};\n\nexport default AdvancedFilterModal;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC } from 'react';\n\nimport { Button, Container, Tooltip } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nconst BorderContainer = styled(Container)`\n\tborder-bottom: 0.0625rem solid ${({ theme }): string => theme?.palette?.gray2?.regular};\n\tborder-right: 0.0625rem solid ${({ theme }): string => theme?.palette?.gray2?.regular};\n`;\n\ntype AdvancedFilterButtonProps = {\n\tsearchDisabled: boolean;\n\tfilterCount: number;\n\tsetShowAdvanceFilters: (arg: boolean) => void;\n};\n\nexport const AdvancedFilterButton: FC<AdvancedFilterButtonProps> = ({\n\tsetShowAdvanceFilters,\n\tsearchDisabled,\n\tfilterCount\n}) => {\n\tconst [t] = useTranslation();\n\n\treturn (\n\t\t<BorderContainer\n\t\t\tpadding={{ all: 'small' }}\n\t\t\theight=\"fit\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\tborderRadius=\"none\"\n\t\t>\n\t\t\t<Tooltip\n\t\t\t\tlabel={t('label.results_for_error', 'Unable to parse the search query, clear it and retry')}\n\t\t\t\tplacement=\"top\"\n\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\tdisabled={!searchDisabled}\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={(): void => setShowAdvanceFilters(true)}\n\t\t\t\t\ttype={filterCount > 0 ? 'default' : 'outlined'}\n\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tfilterCount === 0\n\t\t\t\t\t\t\t? t('label.single_advanced_filter', 'Advanced Filters')\n\t\t\t\t\t\t\t: t('label.advanced_filters', {\n\t\t\t\t\t\t\t\t\tcount: filterCount,\n\t\t\t\t\t\t\t\t\tdefaultValue_one: '{{count}} Advanced Filter',\n\t\t\t\t\t\t\t\t\tdefaultValue_other: '{{count}} Advanced Filters'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tdisabled={searchDisabled}\n\t\t\t\t\ticon=\"Options2Outline\"\n\t\t\t\t/>\n\t\t\t</Tooltip>\n\t\t</BorderContainer>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo } from 'react';\n\nimport {\n\tContainer,\n\tRow,\n\tAvatar,\n\tIcon,\n\tText,\n\tPadding,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport { useTags, ZIMBRA_STANDARD_COLORS } from '@zextras/carbonio-shell-ui';\nimport { find, reduce, includes } from 'lodash';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\n\nimport { openAppointment } from '../../actions/appointment-actions-fn';\nimport { useFoldersMap } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { PANEL_VIEW } from '../../constants';\nimport { getInvite } from '../../store/actions/get-invite';\nimport { useAppDispatch, useAppSelector } from '../../store/redux/hooks';\nimport { selectInstanceInvite } from '../../store/selectors/invites';\nimport { useTagExist } from '../tags/tag-actions';\n\nconst SearchListItem = ({ item, active }) => {\n\tconst isShared = item?.resource?.l?.includes(':');\n\tconst calendars = useFoldersMap();\n\tconst invite = useAppSelector(selectInstanceInvite(item?.resource?.inviteId));\n\tconst dispatch = useAppDispatch();\n\n\tconst cal = isShared\n\t\t? find(calendars, (f) => `${f.zid}:${f.rid}` === item.resource?.l)\n\t\t: find(calendars, (f) => f.id === item.resource?.l);\n\tconst [t] = useTranslation();\n\n\tconst hasAttachments = useMemo(() => item.resource?.flags?.includes('a'), [item.resource?.flags]);\n\tconst showPtstIcon = useMemo(\n\t\t() => ['TE', 'DE', 'AC'].includes(item.resource?.ptst),\n\t\t[item.resource?.ptst]\n\t);\n\tconst [color, icon] = useMemo(() => {\n\t\tif (item.resource?.ptst === 'TE') {\n\t\t\treturn ['warning', 'QuestionMarkOutline'];\n\t\t}\n\t\tif (item.resource?.ptst === 'DE') {\n\t\t\treturn ['error', 'CloseOutline'];\n\t\t}\n\t\treturn ['success', 'CheckmarkOutline'];\n\t}, [item.resource?.ptst]);\n\n\tconst timeString = useMemo(\n\t\t() =>\n\t\t\t`${moment.utc(item.resource?.ridZ, 'YYYYMMDD[T]HHmmss[Z]').local()} - ${moment\n\t\t\t\t.utc(item.resource?.ridZ, 'YYYYMMDD[T]HHmmss[Z]')\n\t\t\t\t.add(item.resource?.dur)\n\t\t\t\t.local()\n\t\t\t\t.format('HH:mm')}`,\n\t\t[item.resource?.dur, item.resource?.ridZ]\n\t);\n\n\t// this is needed to understand if the icons and location can use more space or not and allow code to chose between this style or takeAvailableSpace\n\tconst iconsStyle = useMemo(\n\t\t() =>\n\t\t\thasAttachments ||\n\t\t\titem.resource?.class === 'PRI' ||\n\t\t\titem.resource?.location ||\n\t\t\titem?.resource?.isRecurrent\n\t\t\t\t? { minWidth: '3.125rem', flexBasis: 'content', flexGrow: 1 }\n\t\t\t\t: undefined,\n\t\t[hasAttachments, item.resource?.class, item.resource?.isRecurrent, item.resource?.location]\n\t);\n\n\tconst tagsFromStore = useTags();\n\tconst tags = useMemo(\n\t\t() =>\n\t\t\treduce(\n\t\t\t\ttagsFromStore,\n\t\t\t\t(acc, v) => {\n\t\t\t\t\tif (includes(item?.resource?.tags, v.id))\n\t\t\t\t\t\tacc.push({ ...v, color: ZIMBRA_STANDARD_COLORS[parseInt(v.color ?? '0', 10)].hex });\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t),\n\t\t[item?.resource?.tags, tagsFromStore]\n\t);\n\n\tconst tagIcon = useMemo(() => (tags?.length > 1 ? 'TagsMoreOutline' : 'Tag'), [tags]);\n\tconst tagIconColor = useMemo(() => (tags?.length === 1 ? tags?.[0]?.color : undefined), [tags]);\n\n\tconst isTagInStore = useTagExist(tags);\n\tconst showTagIcon = useMemo(\n\t\t() =>\n\t\t\titem.resource.tags &&\n\t\t\titem.resource.tags.length !== 0 &&\n\t\t\titem.resource.tags?.[0] !== '' &&\n\t\t\tisTagInStore,\n\t\t[isTagInStore, item.resource.tags]\n\t);\n\n\tconst onClick = useCallback(\n\t\t(ev) => {\n\t\t\tconst open = openAppointment({\n\t\t\t\tevent: item,\n\t\t\t\tcontext: { panelView: PANEL_VIEW.SEARCH }\n\t\t\t});\n\t\t\tif (!invite) {\n\t\t\t\tdispatch(getInvite({ inviteId: item.resource.inviteId })).then(() => {\n\t\t\t\t\topen(ev);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\topen(ev);\n\t\t\t}\n\t\t},\n\t\t[dispatch, invite, item]\n\t);\n\n\treturn (\n\t\t<Container wrap=\"nowrap\" style={{ cursor: 'default' }} onClick={onClick} active={active}>\n\t\t\t<Row\n\t\t\t\twrap=\"nowrap\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ all: 'small', right: 'large' }}\n\t\t\t>\n\t\t\t\t{(item.resource?.organizer?.name || item.resource?.organizer?.email) && (\n\t\t\t\t\t<Avatar\n\t\t\t\t\t\tselecting={false}\n\t\t\t\t\t\tselected={false}\n\t\t\t\t\t\tlabel={item.resource?.organizer?.name || item.resource?.organizer?.email}\n\t\t\t\t\t\tonClick={() => null}\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<Container\n\t\t\t\t\tstyle={{ whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: ' ellipsis' }}\n\t\t\t\t\tmainAlignment=\"space-around\"\n\t\t\t\t>\n\t\t\t\t\t<Row width=\"fill\" wrap=\"nowrap\">\n\t\t\t\t\t\t{timeString && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\twrap=\"nowrap\"\n\t\t\t\t\t\t\t\t\tstyle={{ minWidth: '3.125rem', flexBasis: 'content', flexGrow: 1 }}\n\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Tooltip label={timeString} maxWidth=\"100%\">\n\t\t\t\t\t\t\t\t\t\t<Text size=\"small\">{timeString}</Text>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\twrap=\"nowrap\"\n\t\t\t\t\t\t\tstyle={iconsStyle}\n\t\t\t\t\t\t\tmainAlignment=\"flex-end\"\n\t\t\t\t\t\t\ttakeAvailableSpace={!iconsStyle}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{item.resource?.isRecurrent && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t\t<Row mainAlignment=\"flex-end\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip label={t('label.recurrent', 'Recurrent appointment')}>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon=\"Repeat\" size=\"medium\" color=\"gray0\" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{showTagIcon && (\n\t\t\t\t\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t\t\t\t\t<Icon data-testid=\"TagIcon\" icon={tagIcon} color={tagIconColor} />\n\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{hasAttachments && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t\t<Row mainAlignment=\"flex-end\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip label={t('has_attachments', 'Has attachments')}>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata-testid=\"AttachmentIcon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon=\"AttachOutline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"gray0\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{item.resource?.class === 'PRI' && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t\t<Row mainAlignment=\"flex-end\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip label={t('is_private', 'Is private')}>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon data-testid=\"LockIcon\" icon=\"Lock\" size=\"medium\" color=\"gray0\" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{item.resource?.location && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t\t<Tooltip label={item.resource?.location} maxWidth=\"100%\">\n\t\t\t\t\t\t\t\t\t\t<Text size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\t{item.resource?.location}\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t{cal?.color?.label && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t<Row mainAlignment=\"flex-end\">\n\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\tdata-testid=\"CalendarIcon\"\n\t\t\t\t\t\t\t\t\t\ticon=\"Calendar2\"\n\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\t\tcustomColor={cal.color.label}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row width=\"fill\" wrap=\"nowrap\">\n\t\t\t\t\t\t{item.title && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\tstyle={{ minWidth: '3.125rem', flexBasis: 'content', flexGrow: 1 }}\n\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Tooltip label={item.title} maxWidth=\"100%\">\n\t\t\t\t\t\t\t\t\t\t<Text size=\"small\">{item.title}</Text>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{item.resource?.organizer?.name && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\tstyle={{ minWidth: '3.125rem', flexBasis: 'content', flexGrow: 1 }}\n\t\t\t\t\t\t\t\t\tmainAlignment=\"flex-end\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tlabel={`${t('search.organized_by', 'organized by')} ${\n\t\t\t\t\t\t\t\t\t\t\titem.resource?.organizer?.name\n\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Text size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\t{t('search.organized_by', 'organized by')} {item.resource?.organizer?.name}\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showPtstIcon && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t\t\t\t\t<Row mainAlignment=\"flex-end\">\n\t\t\t\t\t\t\t\t\t<Icon data-testid=\"AppointmentIcon\" icon={icon} color={color} size=\"medium\" />\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Row>\n\t\t\t\t</Container>\n\t\t\t</Row>\n\t\t</Container>\n\t);\n};\n\nexport default SearchListItem;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactComponentElement } from 'react';\n\nimport { Shimmer } from '@zextras/carbonio-design-system';\nimport { map } from 'lodash';\n\nconst ShimmerList = (): ReactComponentElement<any> => (\n\t<>\n\t\t{map(Array.from(Array(15).keys()), (item, index) => (\n\t\t\t<Shimmer.ListItem type={1} key={`${item}${index}`} />\n\t\t))}\n\t</>\n);\nexport default ShimmerList;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactComponentElement } from 'react';\n\nimport { Container, List, Row, Text, Padding } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { sortBy } from 'lodash';\nimport moment from 'moment';\nimport { useParams } from 'react-router-dom';\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n\nimport { AdvancedFilterButton } from './parts/advanced-filter-button';\nimport SearchListItem from './search-list-item';\nimport ShimmerList from './shimmer-list';\nimport { BACKGROUND_COLOR } from '../../sruvi/Colors';\n\ntype SearchListProps = {\n\tappointments: Array<any>;\n\tloadMore: () => any;\n\tloading: boolean;\n\tsearchDisabled: boolean;\n\tfilterCount: number;\n\tsetShowAdvanceFilters: (show: boolean) => void;\n\tdateStart: number;\n\tdateEnd: number;\n};\n\nexport type RoutesParams = {\n\taction: 'view' | 'edit';\n\tapptId: string;\n\tridZ: string;\n};\n\nconst SearchList = ({\n\tappointments,\n\tloadMore,\n\tloading,\n\tsearchDisabled,\n\tfilterCount,\n\tsetShowAdvanceFilters,\n\tdateStart,\n\tdateEnd\n}: SearchListProps): ReactComponentElement<any> => {\n\tconst { apptId, ridZ } = useParams<RoutesParams>();\n\n\treturn (\n\t\t<Container\n\t\t\tbackground={BACKGROUND_COLOR}\n\t\t\twidth=\"30%\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\tdata-testid=\"CalendarsSearchResultListContainer\"\n\t\t>\n\t\t\t<Row\n\t\t\t\tpadding={{ horizontal: 'small', top: 'medium', bottom: 'small' }}\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Text size=\"medium\" color=\"secondary\">\n\t\t\t\t\t{t('search.from_date', 'From')} {moment(dateStart).format('DD/MM/YYYY')}\n\t\t\t\t</Text>\n\t\t\t\t<Padding left=\"small\" />\n\t\t\t\t<Text size=\"medium\" color=\"secondary\">\n\t\t\t\t\t{t('search.to_date', 'to')} {moment(dateEnd).format('DD/MM/YYYY')}\n\t\t\t\t</Text>\n\t\t\t</Row>\n\t\t\t<AdvancedFilterButton\n\t\t\t\tsetShowAdvanceFilters={setShowAdvanceFilters}\n\t\t\t\tfilterCount={filterCount}\n\t\t\t\tsearchDisabled={searchDisabled}\n\t\t\t/>\n\t\t\t{loading ? (\n\t\t\t\t<ShimmerList />\n\t\t\t) : (\n\t\t\t\t<List\n\t\t\t\t\titems={sortBy(appointments ?? [], ['start'])}\n\t\t\t\t\tItemComponent={SearchListItem}\n\t\t\t\t\tactive={`${apptId}:${ridZ}`}\n\t\t\t\t\tonListBottom={loadMore}\n\t\t\t\t\tbackground=\"gray6\"\n\t\t\t\t\tdata-testid=\"SearchResultCalendarsContainer\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Container>\n\t);\n};\n\nexport default SearchList;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ComponentProps, ReactComponentElement } from 'react';\n\nimport { Container } from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\n\nimport { extractBody } from '../../commons/body-message-renderer';\nimport StyledDivider from '../../commons/styled-divider';\nimport { PANEL_VIEW } from '../../constants';\nimport { useInvite } from '../../hooks/use-invite';\nimport { AttachmentsBlock } from '../event-panel-view/attachments-part';\nimport { DetailsPart } from '../event-panel-view/details-part';\nimport { DisplayerHeader } from '../event-panel-view/event-panel-view';\nimport { MessagePart } from '../event-panel-view/message-part';\nimport { ParticipantsPart } from '../event-panel-view/participants-part';\nimport { ReminderPart } from '../event-panel-view/reminder-part';\nimport { ReplyButtonsPart } from '../event-panel-view/reply-buttons-part';\nimport { BACKGROUND_COLOR } from '../../sruvi/Colors';\n\nconst BodyContainer = styled(Container)`\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word !important;\n`;\n\nconst Displayer = ({ event }: ComponentProps<any>): ReactComponentElement<any> | null => {\n\tconst invite = useInvite(event?.resource?.inviteId);\n\treturn invite ? (\n\t\t<Container\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\tpadding={{ bottom: 'medium' }}\n\t\t>\n\t\t\t{event && (\n\t\t\t\t<Container padding={{ all: 'none' }} mainAlignment=\"flex-start\">\n\t\t\t\t\t<DisplayerHeader event={event} panelView={PANEL_VIEW.SEARCH} />\n\t\t\t\t\t<BodyContainer\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\theight=\"min(calc(100% - 3.125rem), fit)\"\n\t\t\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DetailsPart\n\t\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\t\tsubject={event?.title}\n\t\t\t\t\t\t\tisPrivate={event?.resource.isPrivate}\n\t\t\t\t\t\t\tinviteNeverSent={event?.resource?.inviteNeverSent}\n\t\t\t\t\t\t\tinvite={invite}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t{event.resource.organizer &&\n\t\t\t\t\t\t\t!event?.resource?.iAmOrganizer &&\n\t\t\t\t\t\t\t!event?.resource?.owner &&\n\t\t\t\t\t\t\tinvite && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<ReplyButtonsPart invite={invite} event={event} />\n\t\t\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t{invite && event && invite.organizer && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ParticipantsPart\n\t\t\t\t\t\t\t\t\tinvite={invite}\n\t\t\t\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\t\t\t\torganizer={invite.organizer}\n\t\t\t\t\t\t\t\t\tparticipants={invite?.participants}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{invite && extractBody(invite?.textDescription?.[0]?._content) && (\n\t\t\t\t\t\t\t<Container>\n\t\t\t\t\t\t\t\t<MessagePart\n\t\t\t\t\t\t\t\t\tfullInvite={invite}\n\t\t\t\t\t\t\t\t\tinviteId={event?.resource?.inviteId}\n\t\t\t\t\t\t\t\t\tparts={invite?.parts}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{invite && invite?.alarmString && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ReminderPart alarmString={invite?.alarmString} invite={invite} event={event} />\n\t\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{invite?.attachmentFiles?.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Container padding={{ all: 'medium' }} background={BACKGROUND_COLOR}>\n\t\t\t\t\t\t\t\t\t<AttachmentsBlock\n\t\t\t\t\t\t\t\t\t\tattachments={invite?.attachmentFiles}\n\t\t\t\t\t\t\t\t\t\tid={event?.resource?.inviteId}\n\t\t\t\t\t\t\t\t\t\tsubject={event?.title}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</BodyContainer>\n\t\t\t\t</Container>\n\t\t\t)}\n\t\t</Container>\n\t) : null;\n};\n\nexport default Displayer;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ComponentProps, ReactComponentElement } from 'react';\n\nimport { Container, Icon, Padding, Text } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport Displayer from './displayer';\nimport { useSelectedEventFromArray } from '../../hooks/use-selected-event-from-array';\nimport { EventActionsEnum } from '../../types/enums/event-actions-enum';\n\nconst LargeIcon = styled(Icon)`\n\ttransform: scale(3.5);\n`;\n\nconst SearchPanel = ({ appointments }: ComponentProps<any>): ReactComponentElement<any> => {\n\tconst { path } = useRouteMatch();\n\tconst event = useSelectedEventFromArray(appointments);\n\treturn (\n\t\t<Switch>\n\t\t\t<Route path={`${path}/:action(${EventActionsEnum.EXPAND})/:apptId/:ridZ?`}>\n\t\t\t\t<Displayer event={event} />\n\t\t\t</Route>\n\t\t\t<Route\n\t\t\t\tpath={path}\n\t\t\t\trender={(): ReactComponentElement<any> => (\n\t\t\t\t\t<Container background={'gray5'} mainAlignment=\"center\">\n\t\t\t\t\t\t<LargeIcon icon=\"SearchOutline\" color=\"secondary\" />\n\t\t\t\t\t\t<Padding top=\"medium\" />\n\t\t\t\t\t\t<Padding top=\"extralarge\" />\n\t\t\t\t\t\t<Text color=\"secondary\" size=\"large\" weight=\"bold\">\n\t\t\t\t\t\t\t{t(`label.search_hint`)}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<Padding top=\"medium\" />\n\t\t\t\t\t\t<Text color=\"secondary\">{t(`message.search_hints`)}</Text>\n\t\t\t\t\t</Container>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</Switch>\n\t);\n};\n\nexport default SearchPanel;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useMemo } from 'react';\n\nimport { find } from 'lodash';\nimport { useParams } from 'react-router-dom';\n\nimport { EventType } from '../types/event';\n\nexport const useSelectedEventFromArray = (eventsArray: Array<EventType>): EventType | undefined => {\n\tconst { apptId, ridZ } = useParams<{ apptId: string; ridZ: string }>();\n\treturn useMemo(\n\t\t() =>\n\t\t\tfind(eventsArray, (appt) => appt?.resource?.id === apptId && appt?.resource?.ridZ === ridZ),\n\t\t[eventsArray, apptId, ridZ]\n\t) as EventType;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useState, useCallback, useEffect, useMemo } from 'react';\n\nimport { Container } from '@zextras/carbonio-design-system';\nimport { FOLDERS, QueryChip, SearchViewProps } from '@zextras/carbonio-shell-ui';\nimport { isEmpty, map, reduce } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport { Switch, Route, useRouteMatch } from 'react-router-dom';\nimport { useFoldersMap } from '../../carbonio-ui-commons/store/zustand/folder';\n\nimport AdvancedFilterModal from './advance-filter-modal';\nimport SearchList from './search-list';\nimport SearchPanel from './search-panel';\nimport { Folder } from '../../carbonio-ui-commons/types/folder';\nimport { usePrefs } from '../../carbonio-ui-commons/utils/use-prefs';\nimport { hasId } from '../../carbonio-ui-commons/worker/handle-message';\nimport { DEFAULT_DATE_START, DEFAULT_DATE_END } from '../../constants/advance-filter-modal';\nimport { searchAppointments } from '../../store/actions/search-appointments';\nimport { useAppDispatch, useAppSelector } from '../../store/redux/hooks';\nimport { getSelectedEvents } from '../../store/selectors/appointments';\n\nexport type SearchResults = {\n\tappointments: Record<string, string[]>;\n\tmore: boolean;\n\toffset: number;\n\tsortBy: string;\n\tquery: QueryChip[];\n};\n\nconst SearchView: FC<SearchViewProps> = ({ useQuery, ResultsHeader }) => {\n\tconst [query, updateQuery] = useQuery();\n\tconst [t] = useTranslation();\n\tconst [searchResults, setSearchResults] = useState<SearchResults>({\n\t\tappointments: {},\n\t\tmore: false,\n\t\toffset: 0,\n\t\tsortBy: 'none',\n\t\tquery: []\n\t});\n\tconst [loading, setLoading] = useState(false);\n\tconst dispatch = useAppDispatch();\n\tconst [showAdvanceFilters, setShowAdvanceFilters] = useState(false);\n\tconst { path } = useRouteMatch();\n\tconst { zimbraPrefIncludeTrashInSearch, zimbraPrefIncludeSharedItemsInSearch } = usePrefs();\n\tconst defaultResultLabel = useMemo(() => t('label.results_for', 'Results for: '), [t]);\n\tconst [resultLabel, setResultLabel] = useState<string>(defaultResultLabel);\n\tconst [isInvalidQuery, setIsInvalidQuery] = useState<boolean>(false);\n\tconst [includeTrash, includeSharedFolders] = useMemo(\n\t\t() => [\n\t\t\tzimbraPrefIncludeTrashInSearch === 'TRUE',\n\t\t\tzimbraPrefIncludeSharedItemsInSearch === 'TRUE'\n\t\t],\n\t\t[zimbraPrefIncludeTrashInSearch, zimbraPrefIncludeSharedItemsInSearch]\n\t);\n\n\tconst calendars = useFoldersMap();\n\tconst searchInFolders = useMemo(\n\t\t() =>\n\t\t\treduce(\n\t\t\t\tcalendars,\n\t\t\t\t(acc: Array<string>, v: Folder) => {\n\t\t\t\t\tif (hasId(v, FOLDERS.TRASH) && includeTrash && v.checked) {\n\t\t\t\t\t\tacc.push(v.id);\n\t\t\t\t\t}\n\t\t\t\t\tif (v.isLink && includeSharedFolders && v.checked) {\n\t\t\t\t\t\tacc.push(v.id);\n\t\t\t\t\t}\n\t\t\t\t\tif (!hasId(v, FOLDERS.TRASH) && !v.isLink && v.checked) acc.push(v.id);\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t),\n\t\t[calendars, includeSharedFolders, includeTrash]\n\t);\n\n\tconst foldersToSearchInQuery = useMemo(() => {\n\t\tconst folderString = map(searchInFolders, (folder) => `inid:\"${folder}\"`).join(' OR ');\n\t\treturn `( ${folderString})`;\n\t}, [searchInFolders]);\n\n\tconst [spanStart, setSpanStart] = useState(() => DEFAULT_DATE_START);\n\tconst [spanEnd, setSpanEnd] = useState(() => DEFAULT_DATE_END);\n\n\tconst search = useCallback(\n\t\t(queryStr: QueryChip[], reset: boolean) => {\n\t\t\tsetResultLabel(defaultResultLabel);\n\t\t\tsetLoading(true);\n\t\t\tconst queryMap = `${queryStr\n\t\t\t\t.map((c) => c.value ?? c.label)\n\t\t\t\t.join(' ')} ${foldersToSearchInQuery}`;\n\t\t\tdispatch(\n\t\t\t\tsearchAppointments({\n\t\t\t\t\tspanStart,\n\t\t\t\t\tspanEnd,\n\t\t\t\t\tquery: queryMap,\n\t\t\t\t\toffset: reset ? 0 : searchResults.offset,\n\t\t\t\t\tsortBy: searchResults.sortBy\n\t\t\t\t})\n\t\t\t)\n\t\t\t\t.then(({ payload }) => {\n\t\t\t\t\tsetLoading(true);\n\t\t\t\t\tif (payload) {\n\t\t\t\t\t\tconst ids = reduce(\n\t\t\t\t\t\t\tpayload.appt,\n\t\t\t\t\t\t\t(acc, v) => ({ ...acc, [v.id]: map(v.inst, 'ridZ') }),\n\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetSearchResults({\n\t\t\t\t\t\t\tquery: queryStr,\n\t\t\t\t\t\t\tappointments: ids,\n\t\t\t\t\t\t\tmore: payload.more ?? false,\n\t\t\t\t\t\t\toffset: (payload.offset ?? 0) + 100,\n\t\t\t\t\t\t\tsortBy: payload.sortBy ?? 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t})\n\n\t\t\t\t.catch(() => {\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t\tconst tempDestructuring = [...queryStr];\n\t\t\t\t\tconst newQueryStr = map(tempDestructuring, (qs) => ({\n\t\t\t\t\t\t...qs,\n\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\tisQueryFilter: true\n\t\t\t\t\t}));\n\t\t\t\t\tupdateQuery(newQueryStr);\n\t\t\t\t\tsetIsInvalidQuery(true);\n\n\t\t\t\t\tsetResultLabel(\n\t\t\t\t\t\tt('label.results_for_error', 'Unable to start the search, clear it and retry: ')\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t},\n\t\t[\n\t\t\tdefaultResultLabel,\n\t\t\tfoldersToSearchInQuery,\n\t\t\tdispatch,\n\t\t\tspanStart,\n\t\t\tspanEnd,\n\t\t\tsearchResults.offset,\n\t\t\tsearchResults.sortBy,\n\t\t\tupdateQuery,\n\t\t\tt\n\t\t]\n\t);\n\tconst [filterCount, setFilterCount] = useState(0);\n\n\tconst loadMore = useCallback(() => {\n\t\tif (!loading && searchResults && !isEmpty(searchResults.appointments) && searchResults.more) {\n\t\t\tsearch(query, false);\n\t\t}\n\t}, [loading, query, search, searchResults]);\n\n\tuseEffect(() => {\n\t\tif (query && query.length > 0 && query !== searchResults.query && !isInvalidQuery) {\n\t\t\tsearch(query, true);\n\t\t\tsetFilterCount(1);\n\t\t}\n\t\tif (query && query.length === 0) {\n\t\t\tsetIsInvalidQuery(false);\n\t\t\tsetFilterCount(0);\n\t\t\tsetResultLabel(defaultResultLabel);\n\t\t}\n\t}, [query, search, searchResults.query, isInvalidQuery, t, defaultResultLabel]);\n\n\tconst appointments = useAppSelector((state) =>\n\t\tgetSelectedEvents(state, searchResults.appointments ?? [], calendars)\n\t);\n\treturn (\n\t\t<>\n\t\t\t<Container style={{ whiteSpace: 'nowrap' }}>\n\t\t\t\t<ResultsHeader label={resultLabel} />\n\t\t\t\t<Container orientation=\"horizontal\" style={{ minHeight: '0' }} mainAlignment=\"flex-start\">\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path={`${path}/:action?/:apptId?/:ridZ?`}>\n\t\t\t\t\t\t\t<SearchList\n\t\t\t\t\t\t\t\tloadMore={loadMore}\n\t\t\t\t\t\t\t\tappointments={appointments}\n\t\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t\t\tfilterCount={filterCount}\n\t\t\t\t\t\t\t\tsetShowAdvanceFilters={setShowAdvanceFilters}\n\t\t\t\t\t\t\t\tsearchDisabled={false}\n\t\t\t\t\t\t\t\tdateStart={spanStart}\n\t\t\t\t\t\t\t\tdateEnd={spanEnd}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Container background={'gray5'} width=\"75%\" mainAlignment=\"center\">\n\t\t\t\t\t\t\t\t<SearchPanel appointments={appointments} />\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t</Switch>\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t\t<AdvancedFilterModal\n\t\t\t\t// TOFIX-SHELL: fix updateQueryFunction inside shell type\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\tquery={query}\n\t\t\t\t// TOFIX-SHELL: fix updateQueryFunction inside shell type\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\tupdateQuery={updateQuery}\n\t\t\t\topen={showAdvanceFilters}\n\t\t\t\tonClose={(): void => setShowAdvanceFilters(false)}\n\t\t\t\tdateStart={spanStart}\n\t\t\t\tdateEnd={spanEnd}\n\t\t\t\tsetDateStart={setSpanStart}\n\t\t\t\tsetDateEnd={setSpanEnd}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default SearchView;\n"],"names":["usePrefs","prefs","useUserSettings","BACKGROUND_COLOR","FOREGROUND_COLOR","PRIMARY_ICON_COLOR_ACTIVE","BUTTONCOLOR","FromDateToDateRow","fromDate","setFromDate","toDate","setToDate","onFromDateChange","useCallback","date","onToDateChange","React","Container","padding","bottom","top","orientation","right","DateTimePicker","width","label","t","enableChips","chipProps","avatarBackground","avatarIcon","dateFormat","includeTime","defaultValue","onChange","horizontal","KeywordRow","compProps","otherKeywords","setOtherKeywords","state","stateHandler","keywordChipOnAdd","hasAvatar","isGeneric","keywordOnChange","value","maxWidth","ChipInput","placeholder","background","separators","key","ctrlKey","onAdd","DEFAULT_DATE_START","moment","startOf","subtract","valueOf","DEFAULT_DATE_END","add","AdvancedFilterModal","open","onClose","query","updateQuery","dateStart","dateEnd","setDateStart","setDateEnd","useState","folder","setFolder","queryArray","useMemo","useEffect","updatedQuery","map","filter","v","includes","test","isQueryFilter","q","resetFilters","queryToBe","concat","onConfirm","keywordRowProps","CustomModal","maxHeight","size","ModalHeader","title","vertical","ModalFooter","secondaryLabel","secondaryAction","secondaryBtnType","secondaryColor","paddingTop","BorderContainer","styled","withConfig","displayName","componentId","theme","palette","gray2","regular","AdvancedFilterButton","setShowAdvanceFilters","searchDisabled","filterCount","useTranslation","all","height","mainAlignment","crossAlignment","borderRadius","Tooltip","placement","disabled","Button","onClick","type","count","defaultValue_one","defaultValue_other","icon","SearchListItem","item","active","isShared","resource","l","calendars","useFoldersMap","invite","useAppSelector","selectInstanceInvite","inviteId","dispatch","useAppDispatch","cal","find","f","zid","rid","id","hasAttachments","flags","showPtstIcon","ptst","color","timeString","ridZ","local","dur","format","iconsStyle","class","location","isRecurrent","minWidth","flexBasis","flexGrow","undefined","tagsFromStore","useTags","tags","reduce","acc","push","ZIMBRA_STANDARD_COLORS","parseInt","hex","tagIcon","length","tagIconColor","isTagInStore","useTagExist","showTagIcon","ev","openAppointment","event","context","panelView","PANEL_VIEW","getInvite","then","wrap","style","cursor","Row","organizer","name","email","Avatar","selecting","selected","whiteSpace","overflow","textOverflow","Padding","left","Text","takeAvailableSpace","Icon","customColor","ShimmerList","Array","from","keys","index","Shimmer","SearchList","appointments","loadMore","loading","apptId","useParams","List","items","sortBy","ItemComponent","onListBottom","BodyContainer","Displayer","useInvite","DisplayerHeader","DetailsPart","subject","isPrivate","inviteNeverSent","StyledDivider","iAmOrganizer","owner","ReplyButtonsPart","ParticipantsPart","participants","extractBody","textDescription","_content","MessagePart","fullInvite","parts","alarmString","ReminderPart","attachmentFiles","AttachmentsBlock","attachments","LargeIcon","SearchPanel","path","useRouteMatch","eventsArray","appt","useSelectedEventFromArray","Switch","Route","EventActionsEnum","render","weight","SearchView","useQuery","ResultsHeader","searchResults","setSearchResults","more","offset","setLoading","showAdvanceFilters","zimbraPrefIncludeTrashInSearch","zimbraPrefIncludeSharedItemsInSearch","defaultResultLabel","resultLabel","setResultLabel","isInvalidQuery","setIsInvalidQuery","includeTrash","includeSharedFolders","searchInFolders","hasId","FOLDERS","checked","isLink","foldersToSearchInQuery","folderString","join","spanStart","setSpanStart","spanEnd","setSpanEnd","search","queryStr","reset","queryMap","c","searchAppointments","payload","ids","inst","catch","tempDestructuring","newQueryStr","qs","setFilterCount","isEmpty","getSelectedEvents","minHeight"],"sourceRoot":""}