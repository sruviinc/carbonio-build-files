"use strict";(self.webpackChunkcarbonio_calendars_ui=self.webpackChunkcarbonio_calendars_ui||[]).push([[945],{366:(e,t,n)=>{n.d(t,{wR:()=>ae,Tg:()=>te,ep:()=>K,Ak:()=>ne,O4:()=>G,BD:()=>X,Pr:()=>re,M_:()=>Q,B0:()=>J,eh:()=>ee,hF:()=>le});var a=n(92652),l=n.n(a),r=n(6017),i=n(51235),o=n(42128),c=n(85259),s=n(50364),m=n(16990),d=n(46609),u=n(61004),p=n(59379),g=n(40232),h=n(36177),v=n(97363),b=n(91750),E=n.n(b),f=n(12393),x=n(93046),w=n(37312),C=n(18671),y=n(750),A=n.n(y),k=n(93747),_=n(9547),T=n(63610);const I=(e,t)=>t.dispatch((0,u.k)({inviteId:e.resource.inviteId,updateOrganizer:!0,action:"DECLINE"})),S=(e,t)=>{const n=(0,i.find)(t.folders,["id",e.resource.calendar.id])?.absFolderPath,{inviteId:a,id:l,isRecurrent:r,ridZ:o}=e.resource,c=(0,i.omitBy)({inviteId:a,ridZ:o,t:t.t,recur:t?.recur,isRecurrent:r,isOrganizer:(0,T.f)(e,n),deleteSingleInstance:t.isInstance??!0,newMessage:t.newMessage,inst:t?.inst,s:t.s,id:l},i.isNil);return t.dispatch((0,_.b)(c))};var R=n(95030),z=n(74713),O=n(68242);const D=(e,t,n,a,l,r)=>{if(e.type.includes("fulfilled")){let e=void 0===a?t("message.snackbar.appointment_permanently_deleted","Appointment permanently deleted"):t("message.snackbar.appt_moved_to_trash","Appointment moved to trash");l&&(e=r?t("message.snackbar.series_deleted_no_notification","Series moved to trash"):t("message.snackbar.series_deleted","Series moved to trash. Attendees will receive the cancellation notification")),n({key:"send",replace:!0,type:"success",label:e,autoHideTimeout:3e3,hideButton:!0,actionLabel:t("label.undo","Undo"),onActionClick:()=>a?a():void 0})}else n({key:"delete",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3,hideButton:!0})},M=(e,t,n)=>{e.type.includes("fulfilled")?n({key:"send",replace:!0,type:"success",label:t("appt_restored_successfully","Appointment restored successfully"),autoHideTimeout:3e3,hideButton:!0}):n({key:"delete",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3,hideButton:!0})},N=E()(v.Text).withConfig({displayName:"delete-event-modal__ItalicText",componentId:"sc-1bl9duq-0"})(["font-style:italic;"]),P=({actions:e,title:t,isSingleInstance:n,isException:i,isInstanceOfSeries:o,invite:c,onConfirm:s,onClose:m,isSeries:d})=>{const{name:u,isOrganizer:p}=c,g=(0,a.useMemo)((()=>n||i?(0,r.t)("message.sure_to_delete_appointment","Are you sure you want to delete the appointment ?"):o?(0,r.t)("message.you_sure_delete_instance",{title:u,defaultValue:"Are you sure you want to delete this instance of “{{title}}” appointment?"}):(0,r.t)("message.sure_to_delete_all_occurences_appointment","Are you sure you want to delete all occurrences of this appointment?")),[n,i,o,u]);return l().createElement(v.Container,{mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},l().createElement(C.x,{title:t,onClose:m}),l().createElement(v.Container,{padding:{vertical:"medium"},mainAlignment:"baseline",crossAlignment:"baseline"},l().createElement(v.Text,{overflow:"break-word"},g),d&&!i&&p&&l().createElement(l().Fragment,null,l().createElement(v.Padding,{top:"small"}),l().createElement(v.Checkbox,{value:e?.deleteAll,onClick:e?.toggleDeleteAll,label:(0,r.t)("message.delete_all_occurences","Delete all occurrences")}),l().createElement(v.Checkbox,{value:!e?.deleteAll,onClick:e?.toggleDeleteAll,label:(0,r.t)("message.delete_future_occurences","Delete this instance and all future occurrences")}),l().createElement(v.Padding,{horizontal:"extralarge"},l().createElement(v.Padding,{horizontal:"small"},l().createElement(N,{overflow:"break-word"},(0,r.t)("message.delete_future_occurences_warning","This will also delete all exceptions (before and after this instance) in the series"))))),!p&&l().createElement(l().Fragment,null,l().createElement(v.Padding,{top:"small"}),l().createElement(v.Checkbox,{value:e?.notifyOrganizer,onClick:e?.toggleNotifyOrganizer,label:(0,r.t)("label.notify_organizer","Notify organizer")}))),l().createElement(w.Z,{onConfirm:s,label:(0,r.t)("label.delete","Delete"),disabled:!c,color:"error"}))},B=({event:e,invite:t,onClose:n})=>{const{isOrganizer:c,isException:s,participants:m}=t,d=(0,a.useMemo)((()=>(0,i.size)(m)),[m]),u=(0,O.T)(),p=(0,x.tc)(),g=!!e.resource.ridZ,b=!!t.recurrenceRule,E=b&&!g,w=g&&!b,C=b&&g,[y,_]=(0,a.useState)((()=>d>0&&(s||g)&&c&&!e.resource.inviteNeverSent)),T=(0,a.useCallback)((()=>{_((e=>!e))}),[]),N=((e,t,n)=>{const[l]=(0,k.useTranslation)(),r=(0,O.T)(),c=(0,v.useSnackbar)(),[s,m]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),p=(0,a.useCallback)((()=>{u((e=>!e))}),[]),g=(0,a.useCallback)((()=>{m((e=>!e))}),[]),b=(0,a.useCallback)((({editor:t,onBoardClose:a})=>{n.onClose();let i=!1;const o=()=>{i=!0,r((0,R.Q)({id:e.resource.inviteId,l:e.resource.calendar.id})).then((e=>{a&&a(),M(e,l,c)}))};n.replaceHistory("");const s={dispatch:r,t:l,isInstance:n.isSingleInstance,createSnackbar:c,newMessage:t?.text?.[0],folders:n.folders};S(e,s).then((e=>{a&&a(),D(e,l,c,o)})).then((()=>{setTimeout((()=>{d&&!i&&(a&&a(),I(e,s))}),5e3)}))}),[e,n,c,r,d,l]),E=(0,a.useCallback)((({editor:a,onBoardClose:m})=>{n?.onClose&&n?.onClose();let u=!1;const p=()=>{u=!0,r((0,R.Q)({id:e.resource.inviteId,l:e.resource.calendar.id})).then((e=>{M(e,l,c)}))};n.replaceHistory("");const g={dispatch:r,t:l,isInstance:n.isSingleInstance,createSnackbar:c,newMessage:a?.text?.[0]},h=e?.resource?.ridZ??e.start.valueOf(),v=A()(h).subtract(1,"day").format("YYYYMMDD");(()=>{const a={...t,recurrenceRule:[{add:[{rule:[{...t?.recurrenceRule[0]?.add[0]?.rule[0],until:[{d:v}]}]}]}]},l=(0,o.kn)({event:e,invite:a,context:{dispatch:n.dispatch,isInstance:n.isSingleInstance,folders:n.folders}}),c=A()(v).isSameOrBefore(A()(t.start.d)),m=!((0,i.size)(t?.participants)>0);return s||c?S(e,g):r((0,z.Q)({editor:l,draft:m}))})().then((t=>{m&&m(),D(t,l,c,p,!0,e.resource.inviteNeverSent)})).then(setTimeout((()=>{d&&!u&&(m&&m(),I(e,g))}),5e3))}),[e,n,c,s,r,t,d,l]),f=(0,a.useCallback)((({editor:a,onBoardClose:i})=>{n.onClose(),n.replaceHistory("");const o={dispatch:r,newMessage:a?.text?.[0],t:l,isInstance:n.isSingleInstance,createSnackbar:c,inst:(0,h.w)({start:e.start,tz:t?.start?.tz,allDay:e?.allDay}),s:A()(e.start).valueOf(),folders:n.folders};S(e,o).then((e=>{i&&i(),D(e,l,c)})).then(setTimeout((()=>{d&&(i&&i(),I(e,o))}),5e3))}),[e,n,c,r,t?.start?.tz,d,l]);return(0,a.useMemo)((()=>({deleteNonRecurrentEvent:b,deleteRecurrentInstance:f,deleteRecurrentSerie:E,toggleNotifyOrganizer:p,toggleDeleteAll:g,deleteAll:s,notifyOrganizer:d})),[b,f,E,s,g,d,p])})(e,t,{isSingleInstance:s||C||!1,replaceHistory:r.replaceHistory,onClose:n,dispatch:u,folders:p}),B=(0,a.useMemo)((()=>s||C?N?.deleteRecurrentInstance:w?N?.deleteNonRecurrentEvent:E?c&&d>0&&!y&&!e.resource.inviteNeverSent?T:N?.deleteRecurrentSerie:N?.deleteNonRecurrentEvent),[s,C,w,E,N?.deleteNonRecurrentEvent,N?.deleteRecurrentInstance,N?.deleteRecurrentSerie,c,d,y,e.resource.inviteNeverSent,T]),F=(0,a.useMemo)((()=>`${(0,r.t)("label.delete","Delete")} ${e.title}`),[e.title]);return t?l().createElement(v.Container,{mainAlignment:"center",crossAlignment:"flex-start",height:"fit",padding:{top:"small",right:"small",bottom:"extralarge",left:"small"}},y?l().createElement(f.R,{title:F,onClose:n,confirmLabel:(0,r.t)("action.send_cancellation","Send Cancellation"),onConfirm:B,invite:t}):l().createElement(P,{actions:N,title:F,isSingleInstance:w,isException:s,isInstanceOfSeries:C,invite:t,onConfirm:B,onClose:n,isSeries:E})):l().createElement(r.Spinner,null)};var F=n(14883);const L=({onClose:e,event:t,context:n})=>{const i=(0,a.useMemo)((()=>(0,r.t)("message.sure_to_delete_appointment_permanently","Are you sure you want to delete this appointment permanently?")),[]),o=(0,a.useMemo)((()=>(0,r.t)("label.delete_permanently","Delete permanently")),[]),c=(0,a.useCallback)((()=>{n.dispatch((0,F.c)({id:t.resource.id})).then((t=>{e(),t.type.includes("fulfilled")?n.createSnackbar({key:"delete-permanently",replace:!0,type:"success",hideButton:!0,label:(0,r.t)("message.snackbar.appointment_permanently_deleted_succesfully","Permanent deletion completed successfully"),autoHideTimeout:3e3}):n.createSnackbar({key:"delete-permanently",replace:!0,type:"error",hideButton:!0,label:(0,r.t)("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3})}))}),[n,t.resource.id,e]);return l().createElement(v.Container,{padding:{all:"large"},mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},l().createElement(C.x,{title:i,onClose:e}),l().createElement(v.Container,{padding:{top:"large",bottom:"large"},crossAlignment:"flex-start"},t.resource.isRecurrent?l().createElement(v.Text,{overflow:"break-word"},(0,r.t)("message.modal.delete.sure_delete_appointment_all_instances_permanently","This will delete all occurences of this appointment and you will not be able to recover it again, continue?")):l().createElement(v.Text,{overflow:"break-word"},(0,r.t)("message.modal.delete.sure_delete_appointment_permanently","By deleting permanently this appointment you will not be able to recover it anymore, continue?"))),l().createElement(w.Z,{onConfirm:c,label:o,color:"error"}))},$=E()(v.Container).withConfig({displayName:"folder-item__ContainerEl",componentId:"sc-10b5p7j-0"})(["overflow-y:auto;display:block;"]),V=({folders:e})=>e.length?l().createElement($,{orientation:"vertical",mainAlignment:"flex-start",minHeight:"30vh",maxHeight:"59vh"},l().createElement(v.Accordion,{items:e,background:"gray6"})):l().createElement(v.Container,{padding:{all:"small"}},l().createElement(v.Text,{size:"large"}," ",(0,r.t)("label.empty","Empty")," "));var H=n(28081),Z=n(4833),U=n(2244);const Y=({toggleModal:e,onClose:t,event:n,currentFolder:o,action:c})=>{const s=(0,x.tc)(),[m,d]=(0,a.useState)(""),[u,p]=(0,a.useState)({}),[g,h]=(0,a.useState)(!1),b=(0,a.useCallback)((()=>{u?.id!==o.id?(c({inviteId:n.resource.inviteId,l:u.id,id:n.resource.id,destinationCalendarName:u.name}),t()):h(!0)}),[u.id,u.name,o.id,c,n.resource.inviteId,n.resource.id,t]),E=(0,a.useMemo)((()=>(0,i.filter)(s,(e=>!(0,i.isEmpty)(e)&&e.id!==o.id&&(0,i.startsWith)(e.name?.toLowerCase(),m?.toLowerCase())))),[o,s,m]),f=(0,a.useCallback)(((e,t,n)=>(0,i.reduce)((0,i.filter)(e,(e=>e.parent===t)),((t,a)=>{const l=(0,i.filter)(n,(e=>e.id===a.id));return l&&l.length?[...t,{divider:!0},{...a,label:a.name,items:s,onClick:()=>p(a),open:!!m.length,background:u.id===a.id?"highlight":void 0}]:l&&!l.length?[...t,...f(e,a.id,n)]:t}),[])),[u.id,m.length,s]),w=(0,a.useMemo)((()=>[{id:r.FOLDERS.USER_ROOT,label:(0,U.qd)({folderId:r.FOLDERS.USER_ROOT,folderName:"Root"}),level:0,open:!0,items:f(s,"1",E),background:"1"===u.id?"highlight":void 0}]),[E,u.id,s,f]);return l().createElement(v.Container,{padding:{all:"small"},mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},l().createElement(Z.Z,{title:`${n.resource.calendar.id===r.FOLDERS.TRASH?(0,r.t)("label.restore","Restore"):(0,r.t)("label.move","Move")} ${n.title}`,onClose:t}),l().createElement(v.Container,{mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},l().createElement(v.Container,{padding:{vertical:"small"},mainAlignment:"center",crossAlignment:"flex-start"},l().createElement(v.Text,{overflow:"break-word"},(0,r.t)("folder.modal.move.body.message3","Select a calendar to move the considered appointment to:"))),l().createElement(v.Input,{label:(0,r.t)("folder.modal.move.input.filter","Filter calendars"),backgroundColor:"gray5",value:m,onChange:e=>{e&&d(e?.target?.value)}}),l().createElement(V,{folders:w}),l().createElement(v.Container,{padding:{all:"medium"},mainAlignment:"center",crossAlignment:"flex-start"},g&&l().createElement(v.Text,{color:"error"},"Cannot move to same folder")),l().createElement(H.Z,{onConfirm:b,secondaryAction:e,secondaryBtnType:"outlined",secondaryColor:"primary",secondaryLabel:(0,r.t)("label.new_calendar","New Calendar"),label:n.resource.calendar.id===r.FOLDERS.TRASH?(0,r.t)("label.restore","Restore"):(0,r.t)("label.move","Move"),disabled:!u.id||u.id===o.id})))};var j=n(52382),W=n(82163);const q=({onClose:e,event:t})=>{const n=(0,O.T)(),i=(0,x.WR)(t.resource.calendar.id),[o,c]=(0,a.useState)(!1),s=(0,v.useSnackbar)(),m=(0,a.useCallback)((()=>c(!o)),[o]),d=e=>{n((0,R.Q)(e)).then((n=>{n.type.includes("fulfilled")?s({key:(0,W.rR)(t.resource.calendar,r.FOLDERS.TRASH)?"restore":"move",replace:!0,type:"info",hideButton:!0,label:(0,W.rR)(t.resource.calendar,r.FOLDERS.TRASH)?`${(0,r.t)("message.snackbar.appt_restored","Appointment restored successfully to")} ${e.destinationCalendarName}`:`${(0,r.t)("message.snackbar.appt_moved","Appointment moved successfully to")} ${e.destinationCalendarName}`,autoHideTimeout:3e3}):s({key:(0,W.rR)(t.resource.calendar,r.FOLDERS.TRASH)?"restore":"move",replace:!0,type:"error",hideButton:!0,label:(0,r.t)("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3})}))};return i?l().createElement(l().Fragment,null,o?l().createElement(j.R,{toggleModal:m,onClose:e,folderId:i.id,event:t,action:d}):l().createElement(Y,{toggleModal:m,onClose:e,currentFolder:i,event:t,action:d})):null},K=({event:e,invite:t,context:n})=>()=>{const a=t=>{const a={...e,resource:(0,i.omit)(e.resource,"id")};n?.onClose&&n?.onClose();const l=(0,c.p)(),m=(0,i.find)(l,["identityName","DEFAULT"]),d=e?.resource?.isRecurrent&&!e?.resource?.ridZ,u=!e?.resource?.isRecurrent&&!!e?.resource?.ridZ,p=(0,o.kn)({event:a,invite:t,context:{folders:n.folders,dispatch:n.dispatch,panel:n.panel??!0,organizer:m,recur:d?t.recurrenceRule:void 0,exceptId:void 0,isInstance:u,isSeries:d,isException:!1}});(0,r.addBoard)({url:`${s.jh}/`,title:p?.title??"",editor:p})};t?a(t):n.dispatch((0,d.E)({inviteId:e?.resource?.inviteId,ridZ:e?.resource?.ridZ})).then((e=>{if(e.payload){const t=(0,m.I)(e.payload.m[0]);a(t)}}))},X=({event:e,invite:t,context:n})=>()=>{const a=t=>{const a=(0,o.kn)({event:e,invite:t,context:{panel:!1,dispatch:n.dispatch,folders:n.folders}});(0,r.addBoard)({url:`${s.jh}/`,title:a?.title??"",editor:a})};t?a(t):n.dispatch((0,d.E)({inviteId:e?.resource?.inviteId,ridZ:e?.resource?.ridZ})).then((e=>{if(e.payload){const t=(0,m.I)(e.payload.m[0]);a(t)}}))},Q=({event:e,context:t})=>n=>{n&&n.preventDefault(),t?.onClose&&t?.onClose();const a=t.createModal({maxHeight:"90vh",children:l().createElement(p.g,null,l().createElement(q,{event:e,onClose:()=>a()})),onClose:()=>{a()}},!0)},G=({event:e,context:t})=>n=>{n&&n.preventDefault(),t?.onClose&&t?.onClose();const a=t.createModal({children:l().createElement(p.g,null,l().createElement(L,{onClose:()=>a(),event:e,context:t})),onClose:()=>{a()}},!0)},J=({event:e,invite:t,context:n})=>()=>{const a=t=>{n?.onClose&&n?.onClose();const a=n.createModal({children:l().createElement(p.g,null,l().createElement(B,{event:e,invite:t,onClose:()=>a()})),onClose:()=>{a()}},!0)};t?a(t):n.dispatch((0,d.E)({inviteId:e?.resource?.inviteId,ridZ:e?.resource?.ridZ})).then((e=>{if(e.payload){const t=(0,m.I)(e.payload.m[0]);a(t)}}))},ee=({event:e,context:t})=>()=>{if(t?.onClose&&t?.onClose(),t?.panelView===s.lg.APP){const t=e.resource.ridZ?`/${e.resource.calendar.id}/${g.x.EXPAND}/${e.resource.id}/${e.resource.ridZ}`:`/${e.resource.calendar.id}/${g.x.EXPAND}/${e.resource.id}`;(0,r.replaceHistory)(t)}if(t?.panelView===s.lg.SEARCH){const t=e.resource.ridZ?`/${g.x.EXPAND}/${e.resource.id}/${e.resource.ridZ}`:`/${g.x.EXPAND}/${e.resource.id}`;(0,r.replaceHistory)(t)}},te=({event:e,invite:t,context:n})=>()=>{const a=n.isInstance||e.resource.isException?(0,h.w)({start:e.start,allDay:e.allDay,tz:t?.tz}):void 0;n.dispatch((0,u.k)({inviteId:e.resource.inviteId,exceptId:a,updateOrganizer:!0,action:"ACCEPT"}))},ne=({event:e,invite:t,context:n})=>()=>{const a=n.isInstance||e.resource.isException?(0,h.w)({start:e.start,allDay:e.allDay,tz:t?.tz}):void 0;n.dispatch((0,u.k)({inviteId:e.resource.inviteId,exceptId:a,updateOrganizer:!0,action:"DECLINE"}))},ae=({event:e,invite:t,context:n})=>()=>{const a=n.isInstance||e.resource.isException?(0,h.w)({start:e.start,allDay:e.allDay,tz:t?.tz}):void 0;n.dispatch((0,u.k)({inviteId:e.resource.inviteId,exceptId:a,updateOrganizer:!0,action:"TENTATIVE"}))},le=({event:e,invite:t,context:n})=>()=>{const a=t=>{const a=(0,o.kn)({event:e,invite:t,context:{panel:!1,dispatch:n.dispatch,folders:n.folders,isProposeNewTime:!0,attendees:[{email:e?.resource?.organizer?.email??e?.resource?.organizer?.email,id:e?.resource?.organizer?.email??e?.resource?.organizer?.email}],disabled:{title:!0,location:!0,organizer:!0,virtualRoom:!0,richTextButton:!0,attachmentsButton:!0,saveButton:!0,attendees:!0,optionalAttendees:!0,freeBusy:!0,calendar:!0,private:!0,allDay:!0,reminder:!0,recurrence:!0,meetingRoom:!0,equipment:!0,timezone:!0}}});(0,r.addBoard)({url:`${s.jh}/`,title:a?.title??"",editor:a})};t?a(t):n.dispatch((0,d.E)({inviteId:e?.resource?.inviteId,ridZ:e?.resource?.ridZ})).then((e=>{if(e.payload){const t=(0,m.I)(e.payload.m[0]);a(t)}}))},re=({event:e})=>()=>{((e,t)=>{const n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)})(`${(0,i.lowerCase)(e?.title)}.ics`,`/service/home/~/?auth=co&id=${e.resource.id}&mime=text/plain&noAttach=1&icalAttach=none`)}},14432:(e,t,n)=>{n.d(t,{Hp:()=>b,Ot:()=>h,SS:()=>s,Un:()=>g,Yw:()=>w,dy:()=>E,gM:()=>f,r1:()=>v,vA:()=>C});var a=n(6017),l=n(51235),r=n(366),i=n(82163),o=n(40232),c=n(63610);const s=({event:e,context:t})=>({id:o.x.EXPAND,icon:"ExpandOutline",disabled:!1,tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action"),label:(0,a.t)("event.action.expand","Open"),onClick:(0,r.eh)({event:e,context:t})}),m=({event:e,invite:t,context:n})=>({id:o.x.ACCEPT,icon:"CheckmarkOutline",label:(0,a.t)("event.action.accept","Accept"),disabled:"AC"===e?.resource?.participationStatus,tooltipLabel:(0,a.t)("label.action_performed","You already performed this action"),onClick:(0,r.Tg)({event:e,context:n,invite:t})}),d=({event:e,invite:t,context:n})=>({id:o.x.DECLINE,icon:"CloseOutline",label:(0,a.t)("event.action.decline","Decline"),disabled:"DE"===e?.resource?.participationStatus,tooltipLabel:(0,a.t)("label.action_performed","You already performed this action"),onClick:(0,r.Ak)({event:e,context:n,invite:t})}),u=({event:e,invite:t,context:n})=>({id:o.x.TENTATIVE,icon:"QuestionMarkOutline",label:(0,a.t)("label.tentative","Tentative"),disabled:"TE"===e?.resource?.participationStatus,tooltipLabel:(0,a.t)("label.action_performed","You already performed this action"),onClick:(0,r.wR)({event:e,context:n,invite:t})}),p=({invite:e,event:t,context:n})=>({id:o.x.PROPOSE_NEW_TIME,icon:"ClockOutline",label:(0,a.t)("label.propose_new_time","Propose new time"),disabled:!1,tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action"),onClick:(0,r.hF)({event:t,invite:e,context:n})}),g=({event:e,context:t})=>({id:o.x.MOVE,icon:(0,i.rR)(e.resource.calendar,a.FOLDERS.TRASH)?"RestoreOutline":"MoveOutline",label:(0,i.rR)(e.resource.calendar,a.FOLDERS.TRASH)?(0,a.t)("label.restore","Restore"):(0,a.t)("label.move","Move"),disabled:!e?.haveWriteAccess,tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action"),onClick:(0,r.M_)({event:e,context:t})}),h=({invite:e,event:t,context:n})=>{const i=(0,l.find)(n.folders,["id",t.resource.calendar.id])?.absFolderPath;return{id:o.x.EDIT,icon:"Edit2Outline",label:(0,a.t)("label.edit","Edit"),disabled:!(0,c.f)(t,i),tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action"),onClick:(0,r.BD)({event:t,invite:e,context:n})}},v=({invite:e,event:t,context:n})=>({id:o.x.CREATE_COPY,icon:"Copy",label:(0,a.t)("label.create_copy","Copy"),disabled:!1,tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action"),onClick:(0,r.ep)({event:t,invite:e,context:n})}),b=({invite:e,event:t,context:n})=>(0,i.rR)(t.resource.calendar,a.FOLDERS.TRASH)?{id:o.x.DELETE_PERMANENTLY,icon:"DeletePermanentlyOutline",label:(0,a.t)("label.delete_permanently","Delete permanently"),disabled:!t?.haveWriteAccess,tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action"),onClick:(0,r.O4)({event:t,context:n})}:{id:o.x.TRASH,icon:"Trash2Outline",label:(0,a.t)("action.delete","Delete"),disabled:!t?.haveWriteAccess,tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action"),onClick:(0,r.B0)({event:t,invite:e,context:n})},E=({event:e})=>({id:o.x.SHOW_ORIGINAL,icon:"CodeOutline",label:(0,a.t)("action.show_original","Show original"),disabled:!1,tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action"),onClick:t=>{t&&t.preventDefault(),window.open(`/service/home/~/?auth=co&id=${e.resource.id}&mime=text/plain&noAttach=1&icalAttach=none`,"_blank")}}),f=({event:e})=>({id:o.x.DOWNLOAD_ICS,icon:"Download",label:(0,a.t)("action.download_ics","Download ICS"),disabled:!1,tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action"),onClick:(0,r.Pr)({event:e})}),x=({event:e,context:t,invite:n})=>[m({event:e,context:t}),u({event:e,context:t}),d({event:e,context:t}),p({event:e,invite:n,context:t})],w=e=>!!e.resource.organizer&&!e.resource.iAmOrganizer&&e.haveWriteAccess&&(!!e.resource.calendar.owner&&e.resource.organizer&&e.resource.calendar.owner!==e.resource.organizer.email||!e.resource.calendar.owner),C=({event:e,invite:t,context:n})=>w(e)?{id:o.x.ANSWER,icon:"ReplyAll",items:x({event:e,invite:t,context:n}),label:(0,a.t)("action.answer","Answer"),disabled:!1,keepOpen:!0,tooltipLabel:(0,a.t)("label.no_rights","You do not have permission to perform this action")}:void 0},55559:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(91750);const l=n.n(a)().hr.withConfig({displayName:"styled-divider__StyledDivider",componentId:"sc-ul9so5-0"})(["border:0;height:0;border-top:0.0625rem solid ",";width:calc(100% - 2rem);margin:0;"],(e=>e.theme.palette.gray2.regular))},83266:(e,t,n)=>{n.d(t,{U:()=>h});var a=n(92652),l=n(97363),r=n(6017),i=n(51235),o=n(14432),c=n(93046),s=n(2244),m=n(68242),d=n(57154),u=n(40232),p=n(65107);const g=({event:e,context:t})=>{const n=(0,i.find)(t.folders,["id",e.resource.calendar.id]);return n&&(!n.isLink||(0,s.ZE)(n))&&(0,o.gM)({event:e})},h=({onClose:e,event:t,context:n})=>{const s=(0,m.C)((0,d.m)(t?.resource?.inviteId)),h=(0,m.T)(),v=(0,l.useModal)(),b=(0,r.useTags)(),E=(0,l.useSnackbar)(),f=(0,c.tc)(),x=(0,a.useMemo)((()=>({tags:b,folders:f,createAndApplyTag:p.Ay,replaceHistory:r.replaceHistory,createModal:v,panelView:"app",dispatch:h,createSnackbar:E,onClose:e,...n})),[f,n,v,E,h,e,b]);return(0,a.useMemo)((()=>{if(!t)return;const{isRecurrent:e,calendar:n}=t.resource;return n.id===r.FOLDERS.TRASH?(({event:e,invite:t,context:n})=>{const a={...e,resource:(0,i.omit)(e.resource,"ridZ")};return(0,i.compact)([(0,o.SS)({event:a,context:n}),(0,o.Ot)({event:a,invite:t,context:n}),(0,o.Hp)({event:a,invite:t,context:n}),(0,o.Un)({event:a,context:n}),(0,o.r1)({event:a,invite:t,context:n}),(0,o.dy)({event:e}),(0,p.Vm)({event:e,context:n}),g({event:a,context:n})])})({event:t,invite:s,context:x}):e?(({event:e,invite:t,context:n})=>{const a={...e,resource:(0,i.omit)(e.resource,"ridZ")},l={...n,isInstance:!0};return[{id:u.x.INSTANCE,icon:"CalendarOutline",label:(0,r.t)("label.instance","Instance"),disabled:!1,tooltipLabel:(0,r.t)("label.no_rights","You do not have permission to perform this action"),onClick:e=>{e&&e.preventDefault()},items:(0,i.compact)([(0,o.SS)({event:e,context:n}),(0,o.Ot)({event:e,invite:t,context:n}),(0,o.Hp)({event:e,invite:t,context:n}),(0,o.r1)({event:e,invite:t,context:n}),(0,o.dy)({event:e}),(0,p.Vm)({event:e,context:n}),(0,o.vA)({event:e,invite:t,context:l})])},{id:u.x.SERIES,icon:"CalendarOutline",label:(0,r.t)("label.series","Series"),disabled:!1,tooltipLabel:(0,r.t)("label.no_rights","You do not have permission to perform this action"),onClick:e=>{e&&e.preventDefault()},items:(0,i.compact)([(0,o.SS)({event:a,context:n}),(0,o.Ot)({event:a,invite:t,context:n}),(0,o.Hp)({event:a,invite:t,context:n}),(0,o.Un)({event:a,context:n}),(0,o.r1)({event:a,invite:t,context:n}),(0,o.dy)({event:e}),(0,p.Vm)({event:e,context:n}),(0,o.vA)({event:a,invite:t,context:n}),g({event:a,context:n})])}]})({event:t,invite:s,context:x}):(({event:e,invite:t,context:n})=>(0,i.compact)([(0,o.SS)({event:e,context:n}),(0,o.Ot)({event:e,invite:t,context:n}),(0,o.Hp)({event:e,invite:t,context:n}),(0,o.Un)({event:e,context:n}),(0,o.r1)({event:e,invite:t,context:n}),(0,o.dy)({event:e}),(0,p.Vm)({event:e,context:n}),(0,o.vA)({event:e,invite:t,context:n}),g({event:e,context:n})]))({event:t,invite:s,context:x})}),[x,t,s])}},25350:(e,t,n)=>{n.d(t,{s:()=>o});var a=n(92652),l=n(46609),r=n(68242),i=n(57154);const o=e=>{const[t,n]=(0,a.useState)(!1),o=(0,r.T)(),c=(0,r.C)((0,i.m)(e));return(0,a.useEffect)((()=>{c||t||!e||(n(!0),o((0,l.E)({inviteId:e})).then((()=>{n(!1)})))}),[o,e,c,t]),c}},57154:(e,t,n)=>{n.d(t,{m:()=>a});const a=e=>t=>e?t?.invites?.invites?.[e]:void 0},63610:(e,t,n)=>{n.d(t,{f:()=>l});var a=n(53955);const l=(e,t)=>!(e.resource.organizer&&((0,a.dK)({id:e.resource.calendar.id,absFolderPath:t})||!e.resource.calendar.owner&&!e.resource.iAmOrganizer||e.resource.calendar.owner&&(e.resource.calendar.owner!==e.resource.organizer?.email||!e?.haveWriteAccess)))},34130:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(92652),l=n.n(a),r=n(97363),i=n(80681),o=n(51235),c=n(93747),s=n(91750),m=n.n(s);const d=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/1024**t).toFixed(2).toString()} ${["B","KB","MB","GB","TB"][t]}`};var u=n(2244);const p=(e,t,n)=>n.length>1?`/service/home/~/?auth=co&id=${e}&filename=${t}&charset=UTF-8&part=${n.join(",")}&disp=a&fmt=zip`:`/service/home/~/?auth=co&id=${e}&part=${n.join(",")}&disp=a`,g=m()(r.Container).withConfig({displayName:"attachments-part__AttachmentHoverBarContainer",componentId:"sc-19us1m1-0"})(["display:none;height:0;"]),h=m()(r.Container).withConfig({displayName:"attachments-part__AttachmentContainer",componentId:"sc-19us1m1-1"})(["border-radius:0.125rem;width:calc(50% - 0.5rem);transition:0.2s ease-out;margin-bottom:",";margin-right:",";box-sizing:border-box;&:hover{background-color:",";& ","{display:flex;}}&:focus{background-color:",";}cursor:",";"],(({theme:e})=>e.sizes.padding.small),(({theme:e})=>e.sizes.padding.small),(({theme:e,background:t="transparent",disabled:n})=>n?"gray5":(0,r.getColor)(`${t}.hover`,e)),g,(({theme:e,background:t="transparent"})=>(0,r.getColor)(`${t}.focus`,e)),(({disabled:e})=>e?"default":"pointer")),v=m().a.withConfig({displayName:"attachments-part__AttachmentLink",componentId:"sc-19us1m1-2"})(["margin-bottom:",";position:relative;text-decoration:none;"],(({theme:e})=>e.sizes.padding.small)),b=m()(r.Text).withConfig({displayName:"attachments-part__AttachmentExtension",componentId:"sc-19us1m1-3"})(["display:flex;justify-content:center;align-items:center;width:2rem;height:2rem;border-radius:",";background-color:",";color:",";font-size:calc("," - 0.125rem);text-transform:uppercase;margin-right:",";"],(({theme:e})=>e.borderRadius),(({theme:e,disabled:t,background:n})=>t?e.palette.primary.disabled:n?.color||e.palette.primary.regular),(({theme:e})=>e.palette.gray6.regular),(({theme:e})=>e.sizes.font.small),(({theme:e})=>e.sizes.padding.small)),E=({link:e,id:t,part:n,isEditor:s,removeAttachment:m,disabled:p=!1,iconColors:E,att:f})=>{const{createPreview:x}=(0,a.useContext)(i.PreviewsManagerContext),w=(0,u.mD)(f),C=(0,a.useMemo)((()=>d(f.size)),[f.size]),[y]=(0,c.useTranslation)(),A=(0,a.useRef)(null),k=(0,a.useRef)(null),_=(0,a.useCallback)((()=>{A?.current&&A.current.click()}),[A]),T=(0,a.useCallback)((t=>{t.preventDefault();const n=(a=f.contentType,a?.startsWith("image")?"image":a?.endsWith("pdf")?"pdf":void 0);var a;n&&e?x({src:e,previewType:n,closeAction:{id:"close",icon:"ArrowBack",tooltipLabel:y("preview.close","Close Preview")},extension:f.filename.substring(f.filename.lastIndexOf(".")+1),filename:f.filename,size:d(f.size)}):k.current&&k.current.click()}),[f,x,e,y]);return l().createElement(h,{orientation:"horizontal",mainAlignment:"flex-start",height:"fit",background:p?"gray5":"gray3",disabled:p,padding:{right:"medium"}},l().createElement(r.Tooltip,{key:s?`${t}-Edit`:`${t}-Preview`,label:p?y("action.save_to_preview","Save to preview"):y("action.preview","Click to preview")},l().createElement(r.Row,{padding:{all:"small"},mainAlignment:"flex-start",onClick:T,takeAvailableSpace:!0},l().createElement(b,{background:(0,o.find)(E,(e=>e.extension===w)),disabled:p},w),l().createElement(r.Row,{orientation:"vertical",crossAlignment:"flex-start",takeAvailableSpace:!0},l().createElement(r.Padding,{style:{width:"100%"},bottom:"extrasmall"},l().createElement(r.Text,{disabled:p},f.filename)),l().createElement(r.Text,{disabled:p,color:"gray1",size:"small"},C)))),l().createElement(r.Row,{orientation:"horizontal",crossAlignment:"center"},l().createElement(g,{orientation:"horizontal"},p?l().createElement(r.Tooltip,{key:`${t}-DeletePermanentlyOutline`,label:y("label.delete","Delete")},l().createElement(r.IconButton,{size:"medium",icon:"DeletePermanentlyOutline",onClick:()=>m(n)})):l().createElement(r.Tooltip,{key:s?`${t}-EditOutline`:`${t}-DeletePermanentlyOutline`,label:s?y("label.delete","Delete"):y("label.download","Download")},l().createElement(r.IconButton,{size:"medium",icon:s?"DeletePermanentlyOutline":"DownloadOutline",onClick:s?()=>m(n):_})))),!p&&l().createElement(v,{rel:"noopener",ref:k,target:"_blank",href:`/service/home/~/?auth=co&id=${t}&part=${n}`}),l().createElement(v,{ref:A,rel:"noopener",target:"_blank",href:e}))},f=({attachments:e,id:t,subject:n,onAttachmentsChange:i,isEditor:s=!1,disabled:m})=>{const[d]=(0,c.useTranslation)(),[g,h]=(0,a.useState)(!1),v=(0,r.useTheme)(),b=(0,a.useMemo)((()=>e.length),[e]),f=(0,a.useMemo)((()=>{const a=(0,o.map)(e,"name");return t?p(t,n,a):void 0}),[e,t,n]),x=(0,a.useCallback)((n=>{const a=(0,o.filter)(e,(e=>e.name?e.name!==n:!e.aid||e.aid!==n));i&&i({aid:(0,o.reduce)(a,((e,t)=>t.aid?[...e,t.aid]:e),[]),mp:(0,o.reduce)(a,((e,n)=>n.name&&t?[...e,{part:n.name,mid:t}]:e),[])},a)}),[e,t,i]),w=(0,a.useCallback)((()=>{i&&i({mp:[]},[])}),[i]),C=(0,a.useMemo)((()=>g?e:e.slice(0,2)),[e,g]),y=(0,a.useMemo)((()=>(0,o.uniqBy)((0,o.map)(e,(e=>({extension:(0,u.mD)(e),color:(0,u.uY)(e.contentType,v)}))),"extension")),[e,v]);return l().createElement(l().Fragment,null,b>0&&l().createElement(r.Container,{mainAlignment:"flex-start",crossAlignment:"flex-start"},l().createElement(r.Row,{mainAlignment:"flex-start",padding:{top:"extrasmall",bottom:"medium"}},l().createElement(r.Padding,{right:"small"},b<3&&b>1&&l().createElement(r.Text,{color:"gray1"},d("label.attachment",{count:b,defaultValue_one:"Attachment",defaultValue_other:"{{count}} Attachments"})),1===b&&l().createElement(r.Text,{color:"gray1"},`1 ${d("label.attachment",{count:b,defaultValue_one:"Attachment",defaultValue_other:"{{count}} Attachments"})}`),b>2&&(g?l().createElement(r.Row,{onClick:()=>h(!1),style:{cursor:"pointer"}},l().createElement(r.Padding,{right:"small"},l().createElement(r.Text,{color:"primary"},d("label.attachment",{count:b,defaultValue_one:"Attachment",defaultValue_other:"{{count}} Attachments"}))),l().createElement(r.Icon,{icon:"ArrowIosUpward",color:"primary"})):l().createElement(r.Row,{onClick:()=>h(!0),style:{cursor:"pointer"}},l().createElement(r.Padding,{right:"small"},l().createElement(r.Text,{color:"primary"},d("label.show",{count:b,defaultValue_one:"Show",defaultValue_other:"Show all"})," ",d("label.attachment",{count:b,defaultValue_one:"Attachment",defaultValue_other:"{{count}} Attachments"}))),l().createElement(r.Icon,{icon:"ArrowIosDownward",color:"primary"})))),l().createElement(r.Link,{size:"medium",href:s?void 0:f,onClick:s?w:void 0,disabled:m},s?d("label.delete",{count:b,defaultValue_one:"Delete",defaultValue_other:"Delete all"}):d("label.download",{count:b,defaultValue_one:"Download",defaultValue_other:"Download all"}))),l().createElement(r.Container,{orientation:"horizontal",mainAlignment:"flex-start",crossAlignment:"flex-start",wrap:"wrap"},(0,o.map)(C,((e,a)=>l().createElement(E,{key:`att-${e.filename}-${a}`,link:t?p(t,n,[e.name]):void 0,id:t,part:e.name??e.aid,isEditor:s,removeAttachment:x,disabled:!e.name??m,iconColors:y,att:e}))))))}},74880:(e,t,n)=>{n.d(t,{P:()=>T});var a=n(92652),l=n.n(a),r=n(97363),i=n(51235),o=n(750),c=n.n(o),s=n(93747),m=n(91750),d=n.n(m);const u=d()(r.Avatar).withConfig({displayName:"image-and-icon-part__IconContainer",componentId:"sc-dwl6f-0"})(["width:3rem;height:3rem;"]),p=({icon:e="CalendarOutline",color:t})=>l().createElement(r.Container,null,l().createElement(u,{icon:e,label:"",background:t.color}));var g=n(93046),h=n(56206),v=n(6482),b=n(78894),E=n(83406),f=n(14775),x=n(64505),w=n(41869);const C=d()(r.Row).withConfig({displayName:"details-part__PaddedRow",componentId:"sc-m14kj7-0"})(["padding:0.25rem 0.25rem;"]),y=d()(r.Icon).withConfig({displayName:"details-part__CustomIcon",componentId:"sc-m14kj7-1"})(["width:1.125rem;height:1.125rem;"]),A=({subject:e,calendarColor:t,isPrivate:n})=>l().createElement(r.Container,{mainAlignment:"flex-start",orientation:"horizontal"},n&&l().createElement(r.Icon,{icon:"Lock",customColor:t,style:{padding:"0.25rem"}}),l().createElement(r.Text,{size:"small",overflow:"break-word",style:{fontWeight:"600"}},e)),k=()=>{const[e]=(0,s.useTranslation)();return l().createElement(C,{takeAvailableSpace:!0},l().createElement(r.Icon,{icon:"AlertCircleOutline",color:"error"}),l().createElement(r.Padding,{horizontal:"small"},l().createElement(r.Text,{color:"error"},e("label.invitation_not_sent","You haven't sent the invitation to the attendees yet"))))},_=({tooltipLabel:e,color:t,icon:n})=>l().createElement(r.Tooltip,{label:e,placement:"left"},l().createElement("div",null,l().createElement(y,{icon:n,size:"medium",customColor:t}))),T=({event:e,subject:t,inviteNeverSent:n,isPrivate:o,invite:m})=>{const d=(0,g.WR)(e.resource.calendar.id),[u]=(0,s.useTranslation)(),C=(0,a.useMemo)((()=>(0,h.Kd)({rgb:d?.rgb,color:d?.color})),[d?.color,d?.rgb]),y=(0,a.useMemo)((()=>({...(0,i.omitBy)({allDay:e.allDay,start:e.start,end:e.end},i.isNil),timezone:m?.tz??c().tz.guess()})),[e.allDay,e.end,e.start,m?.tz]),T=(0,a.useMemo)((()=>(0,i.omitBy)({class:m.class,location:m.location,locationUrl:m.locationUrl},i.isNil)),[m.class,m.location,m.locationUrl]);return d?l().createElement(r.Container,{mainAlignment:"flex-start",crossAlignment:"flex-start",width:"fill",height:"fit",padding:{top:"large",horizontal:"large",bottom:"small"},background:"gray6"},l().createElement(r.Row,{orientation:"row",width:"fill",takeAvailableSpace:!0},l().createElement(r.Container,{width:"fit"},l().createElement(p,{color:C})),l().createElement(r.Padding,{right:"large"}),l().createElement(r.Row,{orientation:"row",width:"fill",takeAvailableSpace:!0,mainAlignment:"flex-start"},l().createElement(r.Container,{orientation:"row",width:"fill",mainAlignment:"space-between"},l().createElement(A,{subject:t,calendarColor:C.color,isPrivate:o}),e.resource.isRecurrent&&l().createElement(_,{tooltipLabel:u("label.recurrent","Recurrent appointment"),color:"0",icon:"Repeat"}),l().createElement(r.Padding,{right:"small"}),l().createElement(_,{tooltipLabel:d?.name,color:C.color,icon:"Calendar2"})),y&&l().createElement(x.x,{timeInfoData:y}),T&&"PRI"!==T?.class&&l().createElement(b.N,{locationData:T}),l().createElement(E.r,{invite:m}),l().createElement(v.B,{invite:m}),m?.xprop&&l().createElement(w.v,{xprop:m?.xprop}),e?.resource?.tags?.length>0&&l().createElement(f.Z,{event:e,hideIcon:!0}))),l().createElement(r.Padding,{top:"medium"}),n&&l().createElement(k,null)):null}},31945:(e,t,n)=>{n.d(t,{Z:()=>N,s:()=>M});var a=n(92652),l=n.n(a),r=n(97363),i=n(6017),o=n(51235),c=n(93747),s=n(27244),m=n(91750),d=n.n(m),u=n(34130),p=n(74880),g=n(71930),h=n(58726),v=n(81834),b=n(31779),E=n(14432),f=n(93046),x=n(82163),w=n(78571),C=n(55559),y=n(50364),A=n(83266),k=n(25350),_=n(56206),T=n(11783),I=n(68242),S=n(53776),R=n(40232);const z=d()(r.Container).withConfig({displayName:"event-panel-view__BodyContainer",componentId:"sc-q0x8tk-0"})(["overflow-y:auto;"]),O=d()(r.Container).withConfig({displayName:"event-panel-view__AppointmentCardContainer",componentId:"sc-q0x8tk-1"})(["z-index:10;position:absolute;top:1rem;right:1rem;bottom:1rem;left:max(calc(100% - 42.5rem),0.75rem);transition:left 0.2s ease-in-out;height:auto;width:auto;max-height:100%;padding:0;"]),D=({actions:e,event:t})=>{const n=(0,a.useMemo)((()=>{if(t){if((0,x.rR)(t.resource.calendar,i.FOLDERS.TRASH))return(0,o.find)(e?.[0]?.items??e,["id",R.x.MOVE]);if(!t.resource.ridZ){const n=(0,o.find)(e?.[1]?.items??e,["id",R.x.MOVE]),a=(0,o.find)(e?.[1]?.items??e,["id",R.x.EDIT]),l=(0,o.find)(e?.[1]?.items??e,["id",R.x.CREATE_COPY]);return t.resource.iAmOrganizer||t.isShared?a.disabled?l:a:a.disabled?n:a}const n=(0,o.find)(e?.[0]?.items??e,["id",R.x.MOVE]),a=(0,o.find)(e?.[0]?.items??e,["id",R.x.EDIT]),l=(0,o.find)(e?.[0]?.items??e,["id",R.x.CREATE_COPY]);return t.resource.iAmOrganizer||t.isShared?a.disabled?l:a:a.disabled?n??l:a}}),[e,t]),c=(0,a.useMemo)((()=>{if(t&&n)return t.resource.ridZ?(0,o.filter)(e?.[0]?.items??e,(e=>!e.disabled&&e.id!==R.x.EXPAND&&e.id!==R.x.ACCEPT&&e.id!==R.x.TENTATIVE&&e.id!==R.x.DECLINE&&e.id!==R.x.PROPOSE_NEW_TIME&&e.id!==n.id)):(0,o.filter)(e?.[1]?.items??e,(e=>!e.disabled&&e.id!==R.x.EXPAND&&e.id!==R.x.ACCEPT&&e.id!==R.x.TENTATIVE&&e.id!==R.x.DECLINE&&e.id!==R.x.PROPOSE_NEW_TIME&&e.id!==n.id))}),[e,t,n]);return n?l().createElement(r.Row,{wrap:"nowrap",height:"100%",mainAlignment:"flex-end",style:{maxWidth:"10rem"}},l().createElement(r.Row,{height:"2.5rem",mainAlignment:"flex-start",style:{overflow:"hidden"}},n&&n?.items?l().createElement(r.Dropdown,{items:n.items,key:`button ${n.id}`},l().createElement(r.Row,{takeAvailableSpace:!0},l().createElement(r.Tooltip,{placement:"top",label:n.label},l().createElement(r.IconButton,{icon:"TagsMoreOutline",onClick:o.noop})))):l().createElement(r.Tooltip,{placement:"top",label:n.label},l().createElement(r.IconButton,{key:n.id,icon:n.icon,onClick:n.onClick}))),c&&c?.length>0&&l().createElement(l().Fragment,null,c.length>1?l().createElement(r.Dropdown,{items:c},l().createElement(r.Row,{takeAvailableSpace:!0},l().createElement(r.IconButton,{icon:"MoreVertical",onClick:o.noop}))):l().createElement(r.Tooltip,{placement:"top",label:c?.[0]?.label},l().createElement(r.IconButton,{key:c?.[0]?.id,icon:c?.[0]?.icon,onClick:c?.[0]?.onClick})))):null},M=({event:e,panelView:t})=>{const[n]=(0,c.useTranslation)(),o=(0,a.useCallback)((()=>{(0,i.replaceHistory)("")}),[]),s=(0,A.U)({onClose:o,event:e,context:{panelView:t}});return l().createElement(l().Fragment,null,l().createElement(r.Row,{mainAlignment:"flex-start",crossAlignment:"center",orientation:"horizontal",background:"gray5",width:"fill",height:"3rem",padding:{vertical:"small"}},l().createElement(r.Row,{padding:{horizontal:"large"}},l().createElement(r.Icon,{icon:"CalendarModOutline"})),l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},l().createElement(r.Text,{size:"medium",overflow:"ellipsis"},e.title||n("label.no_subject","No subject"))),l().createElement(r.Row,{padding:{right:"extrasmall"}},l().createElement(r.IconButton,{size:"medium",icon:"CloseOutline",onClick:o}))),l().createElement(r.Divider,null),l().createElement(r.Row,{mainAlignment:"flex-end",crossAlignment:"center",orientation:"horizontal",background:"gray5",width:"fill",height:"3rem",padding:{vertical:"small"}},l().createElement(r.Row,null,s&&l().createElement(D,{actions:s,event:e}))))};function N(){const{calendarId:e,apptId:t,ridZ:n}=(0,s.useParams)(),i=(0,f.WR)(e),o=(0,I.C)((0,S.CW)(t)),c=(0,I.C)((0,S.$N)(t,n)),m=(0,k.s)(c?.inviteId??o?.inviteId),d=(0,a.useMemo)((()=>{if(i&&o&&m)return(0,T.Y4)({calendar:i,appointment:o,instance:c,invite:m})}),[o,i,c,m]),x=(0,a.useMemo)((()=>(0,_.Xb)(d?.resource?.alarmData)),[d?.resource?.alarmData]),A=(0,a.useMemo)((()=>{const e=(0,w.cd)(m?.textDescription?.[0]?._content);return e?.length>0&&'"'!==e}),[m?.textDescription]);return d&&m?l().createElement(O,{mainAlignment:"flex-start"},l().createElement(M,{event:d,panelView:y.lg.APP}),l().createElement(r.Container,{padding:{all:"none"},mainAlignment:"flex-start",height:"calc(100% - 3rem)",style:{overflow:"auto"}},l().createElement(z,{orientation:"vertical",mainAlignment:"flex-start",width:"fill",height:"fill",padding:{all:"large"},background:"gray5"},l().createElement(p.P,{event:d,subject:d.title,isPrivate:"PRI"===d.resource.class??!1,inviteNeverSent:m.neverSent,invite:m}),l().createElement(C.Z,null),d.resource.organizer&&!d.resource.iAmOrganizer&&!i?.owner&&(0,E.Yw)(d)&&l().createElement(l().Fragment,null,l().createElement(b.$,{event:d,invite:m}),l().createElement(C.Z,null)),m.organizer&&l().createElement(l().Fragment,null,l().createElement(h.Y,{invite:m,event:d,organizer:m.organizer,participants:m?.participants}),l().createElement(C.Z,null)),A&&l().createElement(l().Fragment,null,l().createElement(g.X,{fullInvite:m,inviteId:m.id,parts:m.parts}),l().createElement(C.Z,null)),x&&l().createElement(l().Fragment,null,l().createElement(v.q,{alarmString:x,invite:m,event:d}),l().createElement(C.Z,null)),m?.attachmentFiles.length>0&&l().createElement(l().Fragment,null,l().createElement(r.Container,{padding:{top:"small",horizontal:"large"},background:"gray6"},l().createElement(u.A,{attachments:m?.attachmentFiles,id:m.id,subject:d.title})),l().createElement(C.Z,null))))):null}},71930:(e,t,n)=>{n.d(t,{X:()=>o});var a=n(92652),l=n.n(a),r=n(97363),i=n(78571);const o=({fullInvite:e,inviteId:t,parts:n})=>l().createElement(r.Container,{orientation:"horizontal",mainAlignment:"flex-start",crossAlignment:"flex-start",width:"fill",height:"fit",padding:{all:"large"},background:"gray6"},l().createElement(r.Icon,{icon:"MessageSquareOutline"}),l().createElement(r.Container,{orientation:"vertical",mainAlignment:"flex-start",crossAlignment:"flex-start",width:"fill",height:"fit",padding:{left:"small"}},l().createElement(i.ZP,{fullInvite:e,inviteId:t,parts:n})))},58726:(e,t,n)=>{n.d(t,{Y:()=>w});var a=n(92652),l=n.n(a),r=n(97363),i=n(6017),o=n(93747),c=n(51235),s=n(87466);const m=(e,t)=>{navigator.clipboard.writeText(e).then((()=>{t({key:"clipboard-copy-success",replace:!0,type:"success",hideButton:!0,label:(0,i.t)("snackbar.email_copied_to_clipboard","Email copied to clipboard."),autoHideTimeout:3e3})}))},d=(e,t)=>{const n={email:{email:{mail:e}},firstName:t??e,middleName:""};(0,s.hU)(n)?.onClick?.()},u=({participant:e})=>{const t=(0,r.useSnackbar)();return l().createElement(r.Row,{"data-testid":"DisplayedParticipant",mainAlignment:"flex-start",crossAlignment:"flex-start",padding:{vertical:"small"}},l().createElement(r.Avatar,{label:e.name||e.email,style:{width:"3rem",height:"3rem"}}),l().createElement(r.Row,{mainAlignment:"flex-start",crossAlignment:"center",takeAvailableSpace:!0,padding:{left:"small"}},l().createElement(r.Text,null,e.name||e.email),l().createElement(r.Row,{mainAlignment:"flex-start",width:"100%",padding:{top:"extrasmall",bottom:"extrasmall"}},l().createElement(r.Chip,{label:e.email,background:"gray3",color:"text","data-testid":"Chip",hasAvatar:!1,actions:[{id:"action1",label:(0,i.t)("message.send_email","Send e-mail"),type:"button",icon:"EmailOutline",onClick:()=>d(e.email,e.name)},{id:"action2",label:(0,i.t)("message.copy","Copy"),type:"button",icon:"Copy",onClick:()=>m(e.email,t)}]})),l().createElement(r.Text,{size:"small",color:"secondary"},`(${e.isOptional?(0,i.t)("label.optional","Optional"):(0,i.t)("label.required","Required")})`)))},p=({label:e,participants:t,width:n})=>{const[i,o]=(0,a.useState)(!0),c=(0,a.useCallback)((()=>o((e=>!e))),[]),s=(0,a.useMemo)((()=>l().createElement(r.Container,{mainAlignment:"space-between",crossAlignment:"flex-start",wrap:"wrap",width:"fill"},t?.map((e=>l().createElement(u,{participant:e,key:e.email}))))),[t]);return t?l().createElement(l().Fragment,null,t?.length>0&&l().createElement(r.Container,{orientation:"vertical",mainAlignment:"flex-start",crossAlignment:"flex-start",width:n,height:"fit"},l().createElement(r.Row,{mainAlignment:"flex-start",takeAvailableSpace:!0},l().createElement(r.Text,{size:"small"},e),l().createElement(r.IconButton,{icon:i?"ChevronUp":"ChevronDown",onClick:c,size:"small"})),i&&s)):null},g=({participants:e})=>{const t=1===Object.keys(e).length?"100%":"50%";return(0,c.isEmpty)(e)||0===Object.keys(e).length?null:l().createElement(r.Container,{wrap:"wrap",orientation:"horizontal",mainAlignment:"flex-start",crossAlignment:"flex-start",width:"fill",height:"fit",padding:{top:"large"}},e?.AC&&e?.AC?.length>0&&l().createElement(p,{label:(0,i.t)("participants.AC_with_count",{count:e.AC?.length??0,defaultValue_one:"Accepted",defaultValue_other:"Accepted ({{count}})"}).toUpperCase(),participants:e.AC,width:t}),e?.NE&&e?.NE?.length>0&&l().createElement(p,{label:(0,i.t)("participants.NE_with_count",{count:e.NE?.length??0,defaultValue_one:"Didn't answer ({{count}})",defaultValue_other:"Didn't answer ({{count}})"}).toUpperCase(),participants:e.NE,width:t}),e?.TE&&e?.TE?.length>0&&l().createElement(p,{label:(0,i.t)("participants.TE_with_count",{count:e?.TE?.length??0,defaultValue_one:"Tentative",defaultValue_other:"Tentative ({{count}})"}).toUpperCase(),participants:e.TE,width:t}),e?.DE&&e?.DE?.length>0&&l().createElement(p,{label:(0,i.t)("participants.DE_with_count",{count:e.DE?.length??0,defaultValue_one:"Declined",defaultValue_other:"Declined ({{count}})"}).toUpperCase(),participants:e.DE,width:t}))},h=({participant:e})=>{const t=(0,c.reduce)(e,((e,t)=>t?[...e,...t]:e),[]);return l().createElement(r.Container,{orientation:"horizontal",mainAlignment:"flex-start",crossAlignment:"flex-start",wrap:"wrap",width:"fill",padding:{horizontal:"medium",bottom:"extrasmall"}},t.length>2?l().createElement(l().Fragment,null,l().createElement(r.Text,{size:"small",color:"secondary",overflow:"break-word"},l().createElement("strong",null,t[0].email," ,",t[1].email," ",l().createElement(o.Trans,{i18nKey:"participants.visitors",defaults:"and other {{others}} attendees",values:{others:t.length-2}}))," ",(0,i.t)("participants.Invited_Visitor","have been invited"))):l().createElement(l().Fragment,null,l().createElement(r.Text,{size:"small",color:"secondary",overflow:"break-word"},l().createElement("strong",null," ",(0,c.map)(t,((e,n)=>l().createElement(l().Fragment,{key:e.email||e.name},e.email||"default"," ",n===t.length-1?null:l().createElement(l().Fragment,null,",")))))," ",(0,i.t)("participants.Invited_Visitor","have been invited"))))},v=({participant:e,message:t,loggedInUser:n})=>l().createElement(r.Row,null,l().createElement(r.Text,{size:"small",color:"secondary",overflow:"break-word"},l().createElement("strong",null," ",(0,c.map)(e,((t,a)=>l().createElement(l().Fragment,{key:t.name||t.email},t.name===n.name||t.email===n.name?l().createElement(l().Fragment,null," ",(0,i.t)("message.you","You")):l().createElement(l().Fragment,null," ",t.name||t.email," "),a===e.length-1?null:l().createElement(l().Fragment,null,",")))))," ",t)),b=({participant:e,message:t,loggedInUser:n})=>l().createElement(r.Container,{mainAlignment:"flex-start",crossAlignment:"flex-start",padding:{bottom:"extrasmall"}},l().createElement(r.Text,{overflow:"ellipsis",size:"small",color:"secondary"},e.name===n.name||e.email===n.name?l().createElement("strong",null," ",(0,i.t)("message.you","You")):l().createElement("strong",null," ",e.name||e.email," ")," ",t)),E=({label:e,participants:t=[],width:n,message:i,event:o,pt:c,loggedInUser:s})=>{const m=(0,a.useMemo)((()=>l().createElement(r.Container,{orientation:"horizontal",crossAlignment:"flex-start",wrap:"wrap",width:"fill"},t.map((e=>l().createElement(b,{participant:e,key:e.email,message:i,loggedInUser:s}))))),[t,s,i]);return t.length>0?l().createElement(r.Container,{orientation:"vertical",mainAlignment:"flex-start",crossAlignment:"flex-start",width:n,padding:{horizontal:"medium",bottom:"extrasmall"}},o?.resource?.iAmOrganizer&&l().createElement(l().Fragment,null,c>2?l().createElement(r.Text,{size:"small",color:"secondary",overflow:"break-word"},e):m),!o?.resource?.iAmOrganizer&&!o?.resource?.calendar?.owner&&l().createElement(l().Fragment,null," ",c>2?l().createElement(v,{participant:t,message:i,loggedInUser:s}):m," ")):null},f=({participants:e,event:t})=>{const n=(0,i.useUserAccount)();if(!e||0===Object.keys(e)?.length)return null;const a=(e=>{let t=0;return Object.keys(e).map((n=>(e[n].map((()=>(t+=1,0))),0))),t})(e);return l().createElement(r.Container,{wrap:"wrap",orientation:"horizontal",mainAlignment:"flex-start",crossAlignment:"flex-start",width:"fill",padding:{horizontal:"medium"}},t?.resource?.iAmOrganizer&&!t?.resource?.calendar?.owner?l().createElement(h,{participant:e,event:t}):l().createElement(l().Fragment,null,l().createElement(E,{label:l().createElement(o.Trans,{i18nKey:"participants.Attendees_accepted_count",count:e.AC?.length??0,values:{count:e.AC?.length??0},defaults:"<strong>{{count}} attendee </strong> has accepted"}),message:(0,i.t)("participants.Accepted","accepted"),participants:e.AC,event:t,pt:a,loggedInUser:n}),l().createElement(E,{label:l().createElement(o.Trans,{i18nKey:"participants.Attendees_not_answered_count",count:e.NE?.length??0,values:{count:e.NE?.length??0},defaults:"<strong>1 attendee </strong> has not answered"}),participants:e.NE,message:(0,i.t)("participants.Not_answered","didn't answer"),event:t,pt:a,loggedInUser:n}),l().createElement(E,{label:l().createElement(o.Trans,{i18nKey:"participants.Attendees_tentative_count",count:e.TE?.length??0,values:{count:e.TE?.length??0},defaults:"<strong>1 attendee </strong> has accepted as tentative"}),participants:e.TE,message:(0,i.t)("participants.Tentative","accepted as tentative"),event:t,pt:a,loggedInUser:n}),l().createElement(E,{label:l().createElement(o.Trans,{i18nKey:"participants.Attendees_declined_count",count:e.DE?.length??0,values:{count:e.DE?.length??0},defaults:"<strong>1 attendee </strong> has declined"}),participants:e.DE,message:(0,i.t)("participants.Declined","declined"),event:t,pt:a,loggedInUser:n})))};var x=n(93046);const w=({invite:e,event:t,organizer:n,participants:c,isSummary:s})=>{const u=(0,i.useUserAccount)(),p=(0,x.WR)(e.ciFolder),h=(0,r.useSnackbar)(),v=(0,a.useMemo)((()=>(!e.isOrganizer&&!p?.owner)??!1),[p,e.isOrganizer]);return n?l().createElement(r.Container,{orientation:"vertical",mainAlignment:"flex-start",crossAlignment:"flex-start",width:"fill",height:"fit",padding:s?{vertical:"small"}:{horizontal:"large",vertical:"medium"},background:"gray6"},e?.organizer?.a===u.name&&l().createElement(r.Row,{mainAlignment:"flex-start",crossAlignment:"center",width:"fill"},l().createElement(r.Avatar,{size:s?"small":"large",label:u.name??u.displayName??""}),l().createElement(r.Text,{style:{padding:"0 0.5rem"}},l().createElement(o.Trans,{i18nKey:"message.you_are_organizer",defaults:"<Row><Text> <BoldText> You  </BoldText> are the organizer </Text></Row>",components:{Row:l().createElement(r.Row,null),Text:l().createElement(r.Text,{color:"secondary"}),BoldText:l().createElement("span",{style:{fontWeight:"bold",color:"#333333"}})}}))),e.isOrganizer||p?.owner?e?.organizer?.a!==u.name&&!v&&l().createElement(r.Row,{mainAlignment:"flex-start",crossAlignment:"center",width:"fill"},l().createElement(r.Avatar,{size:s?"small":"large",label:n.d??n.a??n.url??""}),l().createElement(r.Text,{style:{padding:"0 0.5rem"}},l().createElement(o.Trans,{i18nKey:"message.somebody_is_organizer",defaults:"<strong>{{somebody}}</strong> is the organizer",values:{somebody:n.d||n.a}}))):l().createElement(r.Row,{mainAlignment:"flex-start",crossAlignment:"flex-start",padding:{vertical:"small"}},l().createElement(r.Avatar,{label:n.d??n.a??n.url??"",size:s?"small":"large"}),l().createElement(r.Row,{mainAlignment:"flex-start",crossAlignment:"center",takeAvailableSpace:!0,padding:{left:"small"}},l().createElement(r.Text,null,l().createElement(o.Trans,{i18nKey:"message.somebody_invited_you",defaults:"<strong>{{somebody}}</strong> invited you",values:{somebody:n.d||n.a||n.url}})),l().createElement(r.Row,{mainAlignment:"flex-start",width:"100%",padding:{top:"extrasmall",bottom:"extrasmall"}},l().createElement(r.Chip,{label:n.a||n.d,background:"gray3",color:"text","data-testid":"Chip",hasAvatar:!1,actions:[{id:"action1",label:(0,i.t)("message.send_email","Send e-mail"),type:"button",icon:"EmailOutline",onClick:()=>d(n.a,n.d)},{id:"action2",label:(0,i.t)("message.copy","Copy"),type:"button",icon:"Copy",onClick:()=>m(n.a,h)}]})))),s?l().createElement(f,{participants:c,event:t}):l().createElement(g,{participants:c})):null}},81834:(e,t,n)=>{n.d(t,{q:()=>u});var a=n(92652),l=n.n(a),r=n(97363),i=n(51235),o=n(93747),c=n(93046),s=n(42128),m=n(74713),d=n(68242);const u=({alarmString:e,invite:t,event:n})=>{const u=(0,d.T)(),p=(0,c.tc)(),[g]=(0,o.useTranslation)(),h=(0,a.useCallback)((e=>g("reminder.minute_before",{count:e,defaultValue_one:"{{count}} minute before",defaultValue_other:"{{count}} minutes before"})),[g]),v=(0,a.useCallback)((e=>g("reminder.hour_before",{count:e,defaultValue_one:"{{count}} hour before",defaultValue_other:"{{count}} hours before"})),[g]),b=(0,a.useCallback)((e=>g("reminder.day_before",{count:e,defaultValue_one:"{{count}} day before",defaultValue_other:"{{count}} days before"})),[g]),E=(0,a.useCallback)((e=>{const a={...t,alarmValue:e},l=(0,s.kn)({event:n,invite:a,context:{organizer:n.resource.organizer,sender:n.resource.organizer,dispatch:u,folders:p,panel:!0}});u((0,m.Q)({editor:l,draft:t?.attendees?.length<=0}))}),[p,u,n,t]),f=(0,a.useMemo)((()=>[{id:"0",label:g("reminder.never","Never"),value:"-1",onClick:()=>E("-1")},{id:"1",label:g("reminder.at_time_of_event","At the time of the event"),onClick:()=>E("0")},{id:"2",label:h(1),onClick:()=>E("1")},{id:"3",label:h(5),onClick:()=>E("5")},{id:"4",label:h(10),onClick:()=>E("10")},{id:"5",label:h(15),onClick:()=>E("15")},{id:"6",label:h(30),onClick:()=>E("30")},{id:"7",label:h(45),onClick:()=>E("45")},{id:"8",label:v(1),onClick:()=>E("60")},{id:"9",label:v(2),onClick:()=>E("120")},{id:"10",label:v(4),onClick:()=>E("240")},{id:"11",label:v(5),onClick:()=>E("300")},{id:"12",label:v(18),onClick:()=>E(1080..toString())},{id:"13",label:b(1),onClick:()=>E(1440..toString())},{id:"14",label:b(2),onClick:()=>E(2880..toString())},{id:"15",label:b(3),onClick:()=>E(4320..toString())},{id:"16",label:b(4),onClick:()=>E(5760..toString())},{id:"17",label:g("reminder.week_before",{count:1,defaultValue_one:"{{count}} week before",defaultValue_other:"{{count}} weeks before"}),onClick:()=>E(10080..toString())}]),[b,v,h,E,g]);return e?l().createElement(r.Container,{orientation:"horizontal",mainAlignment:"flex-start",crossAlignment:"center",width:"fill",height:"fit",padding:{horizontal:"large",vertical:"small"},background:"gray6"},l().createElement(r.Dropdown,{items:f,placement:"bottom-end"},l().createElement(r.Button,{label:e,icon:"ClockOutline",type:"outlined",iconPlacement:"left",onClick:i.noop}))):null}},31779:(e,t,n)=>{n.d(t,{$:()=>m});var a=n(92652),l=n.n(a),r=n(97363),i=n(93747),o=n(366),c=n(93046),s=n(68242);const m=({event:e,invite:t})=>{const[n]=(0,i.useTranslation)(),m=(0,s.T)(),d=(0,c.tc)(),u=(0,a.useMemo)((()=>({dispatch:m,folders:d,isInstance:!!e.resource.ridZ})),[m,e.resource.ridZ,d]);return l().createElement(r.Container,{orientation:"horizontal",crossAlignment:"flex-start",mainAlignment:"center",width:"fill",height:"fit",padding:{all:"large"},background:"gray6"},l().createElement(r.Button,{type:"outlined",label:n("event.action.accept","Accept"),icon:"CheckmarkOutline",color:"success",onClick:(0,o.Tg)({event:e,invite:t,context:u}),disabled:"AC"===e.resource.participationStatus}),l().createElement(r.Padding,{horizontal:"small"}),l().createElement(r.Button,{type:"outlined",label:n("label.tentative","Tentative"),icon:"QuestionMarkOutline",color:"warning",onClick:(0,o.wR)({event:e,invite:t,context:u}),disabled:"TE"===e.resource.participationStatus}),l().createElement(r.Padding,{horizontal:"small"}),l().createElement(r.Button,{type:"outlined",label:n("event.action.decline","Decline"),icon:"CloseOutline",color:"error",onClick:(0,o.Ak)({event:e,invite:t,context:u}),disabled:"DE"===e.resource.participationStatus}),l().createElement(r.Padding,{horizontal:"small"}),l().createElement(r.Button,{type:"outlined",label:n("label.propose_new_time","Propose new time"),icon:"ClockOutline",color:"primary",onClick:(0,o.hF)({event:e,invite:t,context:u})}))}},6482:(e,t,n)=>{n.d(t,{B:()=>c});var a=n(92652),l=n.n(a),r=n(97363),i=n(51235),o=n(50364);const c=({invite:e,showIcon:t})=>{const n=(0,a.useMemo)((()=>(0,i.filter)(e.attendees,["cutype",o.jb.RESOURCE])),[e.attendees]),c=(0,a.useMemo)((()=>(0,i.map)(n,(e=>e.d)).join(", ")),[n]);return n.length?l().createElement(r.Row,{width:"fill",mainAlignment:"flex-start",padding:{top:"small"}},l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},t&&l().createElement(r.Padding,{right:"small"},l().createElement(r.Icon,{icon:"BriefcaseOutline",size:"medium"})),l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},l().createElement(r.Text,{color:"gray1",size:"small"},c)))):null}},78894:(e,t,n)=>{n.d(t,{N:()=>i});var a=n(92652),l=n.n(a),r=n(97363);const i=({locationData:e,showIcon:t=!1})=>{const n=(0,a.useMemo)((()=>e?.location?.replace(/\bhttps?:\/\/\S+/g,"")),[e.location]);return l().createElement(l().Fragment,null,(e?.location||e?.locationUrl||e?.room||n)&&l().createElement(r.Row,{width:"fill",mainAlignment:"flex-start",padding:{top:"small"}},l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},t&&l().createElement(r.Padding,{right:"small"},l().createElement(r.Icon,{icon:"PinOutline",size:"medium"})),l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},l().createElement(r.Text,{color:"gray1",size:"small"},e?.locationUrl&&l().createElement("a",{href:e.locationUrl,target:"_blank",rel:"noreferrer"},e.locationUrl),n,e?.room&&l().createElement("a",{href:e.room.link,target:"_blank",rel:"noreferrer"},e.room.label))))))}},83406:(e,t,n)=>{n.d(t,{r:()=>c});var a=n(92652),l=n.n(a),r=n(97363),i=n(51235),o=n(50364);const c=({invite:e,showIcon:t})=>{const n=(0,a.useMemo)((()=>(0,i.filter)(e.attendees,["cutype",o.jb.ROOM])),[e.attendees]),c=(0,a.useMemo)((()=>(0,i.map)(n,(e=>e.d)).join(", ")),[n]);return n.length?l().createElement(r.Row,{width:"fill",mainAlignment:"flex-start",padding:{top:"small"}},l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},t&&l().createElement(r.Padding,{right:"small"},l().createElement(r.Icon,{icon:"BuildingOutline",size:"medium"})),l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},l().createElement(r.Text,{color:"gray1",size:"small"},c)))):null}},14775:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(92652),l=n.n(a),r=n(97363),i=n(6017),o=n(51235),c=n(93747),s=n(91750),m=n.n(s),d=n(50364);const u=m()(r.Chip).withConfig({displayName:"tags-row__TagChip",componentId:"sc-1vgtrbp-0"})(["margin-left:",";padding:0.0625rem 0.5rem !important;margin-bottom:0.25rem;"],(({theme:e})=>e.sizes.padding.extrasmall)),p=({event:e,hideIcon:t=!1})=>{const[n]=(0,c.useTranslation)(),s=(0,i.useTags)(),m=(0,a.useMemo)((()=>(0,o.reduce)(s,((t,n)=>((0,o.includes)(e?.resource?.tags,n.id)&&t.push({...n,color:i.ZIMBRA_STANDARD_COLORS[n.color??0].hex,label:n.name}),t)),[])),[e?.resource?.tags,s]),p=(0,a.useMemo)((()=>n("label.tags","Tags")),[n]),g=(0,a.useCallback)((e=>(0,i.runSearch)([{avatarBackground:e?.color,avatarIcon:"Tag",background:"gray2",hasAvatar:!0,label:`tag:${e?.name}`,value:`tag:"${e?.name}"`}],d.jh)),[]);return l().createElement(l().Fragment,null,l().createElement(r.Row,{width:"fill",crossAlignment:"flex-start",mainAlignment:"flex-start",padding:{vertical:"small"}},!t&&l().createElement(r.Row,{padding:{right:"small"}},l().createElement(r.Icon,{icon:"TagsMoreOutline",size:"medium"})),e?.resource?.tags?.length>0&&l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},t?l().createElement(r.Text,{color:"secondary",size:"small",overflow:"break-word"},p,":",(0,o.map)(m,(e=>l().createElement(u,{label:e.name,avatarBackground:e.color,background:"gray2",hasAvatar:!0,avatarIcon:"Tag",maxWidth:"18.75rem",onClick:()=>g(e)})))):l().createElement(r.Text,{color:"secondary",size:"small",overflow:"break-word"},(0,o.map)(m,(e=>l().createElement(u,{key:e.name,label:e.name,avatarBackground:e.color,background:"gray2",hasAvatar:!0,avatarIcon:"Tag",maxWidth:"18.75rem",onClick:()=>g(e)})))))))}},64505:(e,t,n)=>{n.d(t,{x:()=>s});var a=n(92652),l=n.n(a),r=n(97363),i=n(750),o=n.n(i),c=n(31457);const s=({timeInfoData:e,showIcon:t=!1})=>{const{localTimeString:n,localTimezoneString:a,localTimezoneTooltip:i,showTimezoneTooltip:s}=(0,c.i)(e.start??o()(),e.end??o()(),e.allDay,e.timezone);return l().createElement(r.Row,{width:"fill",mainAlignment:"flex-start",padding:{top:"small"},orientation:"horizontal"},l().createElement(r.Row,{width:"fit-content",mainAlignment:"flex-start"},t&&l().createElement(r.Padding,{right:"small"},l().createElement(r.Icon,{icon:"ClockOutline",size:"medium"}))),l().createElement(r.Row,{mainAlignment:"flex-start",takeAvailableSpace:!0},l().createElement(r.Row,{width:"fit",mainAlignment:"flex-start",crossAlignment:"flex-start"},l().createElement(r.Row,{width:"fit",mainAlignment:"flex-start",crossAlignment:"flex-start",takeAvailableSpace:!0},l().createElement(r.TextWithTooltip,{overflow:"ellipsis",weight:"bold",size:"small",color:"gray1"},n)),l().createElement(r.Padding,{right:"small"}),s&&l().createElement(r.Row,{mainAlignment:"flex-start",crossAlignment:"flex-start",width:"fit"},l().createElement(r.Tooltip,{label:i},l().createElement(r.Row,null,l().createElement(r.Icon,{icon:"GlobeOutline",color:"gray1"}))))),l().createElement(r.Row,{width:"fill",mainAlignment:"flex-start"},l().createElement(r.Text,{overflow:"break-word",weight:"bold",size:"small",color:"gray1"},a))))}},41869:(e,t,n)=>{n.d(t,{v:()=>c});var a=n(92652),l=n.n(a),r=n(97363),i=n(51235),o=n(29870);const c=({xprop:e,showIcon:t=!1})=>{const n=(0,a.useMemo)((()=>(0,i.find)(e,["name",o.l.MEETING_ROOM])),[e]);if(n){const e=(0,i.find)(n.xparam,["name",o.b.ROOM_NAME])?.value,a=(0,i.find)(n.xparam,["name",o.b.ROOM_LINK])?.value;return l().createElement(r.Row,{width:"fill",mainAlignment:"flex-start",padding:{top:"small"}},l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},t&&l().createElement(r.Padding,{right:"small"},l().createElement(r.Icon,{icon:"TeamOutline",size:"medium"})),l().createElement(r.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},l().createElement(r.Text,{color:"gray1",size:"small"},l().createElement("a",{href:a,target:"_blank",rel:"noreferrer"},e)))))}return null}},12393:(e,t,n)=>{n.d(t,{R:()=>m});var a=n(92652),l=n.n(a),r=n(97363),i=n(6017),o=n(51235),c=n(37312),s=n(18671);const m=({title:e,onClose:t,onConfirm:n,confirmLabel:m,invite:d,isEdited:u})=>{const[p,g]=(0,i.useIntegratedFunction)("compose"),h=(0,a.useCallback)((()=>{t();const e=u?(0,i.t)("message.meeting_modified","The following meeting has been modified"):(0,i.t)("message.meeting_canceled","The following meeting has been cancelled"),a=u?d.name:`${(0,i.t)("label.cancelled","Cancelled")} ${d.name}`;g&&p(n,{text:[`${e}:`,`${e}:`],subject:a,to:(0,o.reduce)(d?.participants??[],((e,t)=>((0,o.map)(t,(t=>e.push(t))),e)),[])})}),[t,u,d.name,d?.participants,g,p,n]),v=(0,a.useMemo)((()=>u?(0,i.t)("message.want_to_edit_modified_msg","Do you want to edit the modified appointment's message?"):(0,i.t)("message.want_to_edit_cancellation_msg","Do you want to edit the appointment cancellation message?")),[u]);return l().createElement(r.Container,{mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},l().createElement(s.x,{title:e,onClose:t}),l().createElement(r.Container,{padding:{vertical:"medium"},mainAlignment:"baseline",crossAlignment:"baseline"},l().createElement(r.Text,{overflow:"break-word"},v)),l().createElement(c.Z,{onConfirm:n,label:m,secondaryColor:"primary",secondaryBtnType:"outlined",secondaryLabel:(0,i.t)("action.edit_message","Edit Message"),secondaryAction:h,disabled:!d}))}},52382:(e,t,n)=>{n.d(t,{R:()=>x});var a=n(92652),l=n.n(a),r=n(97363),i=n(6017),o=n(51235),c=n(93747),s=n(91750),m=n.n(s),d=n(93046),u=n(82163),p=n(37312),g=n(18671),h=n(23298);const v=m().div.withConfig({displayName:"new-calendar-modal__Square",componentId:"sc-wazbg4-0"})(["width:1.125rem;height:1.125rem;position:relative;top:-0.1875rem;border:0.0625rem solid ",";background:",";border-radius:0.25rem;"],(({theme:e})=>e.palette.gray2.regular),(({color:e})=>e)),b=m()(r.Container).withConfig({displayName:"new-calendar-modal__ColorContainer",componentId:"sc-wazbg4-1"})(["border-bottom:0.0625rem solid ",";"],(({theme:e})=>e.palette.gray2.regular)),E=m()(r.Text).withConfig({displayName:"new-calendar-modal__TextUpperCase",componentId:"sc-wazbg4-2"})(["text-transform:capitalize;"]),f=({selected:e,label:t,open:n,focus:a})=>l().createElement(b,{orientation:"horizontal",width:"fill",crossAlignment:"center",mainAlignment:"space-between",borderRadius:"half",background:"gray5",padding:{all:"small"}},l().createElement(r.Row,{width:"100%",takeAvailableSpace:!0,mainAlignment:"space-between"},l().createElement(r.Row,{orientation:"vertical",crossAlignment:"flex-start",mainAlignment:"flex-start",padding:{left:"small"}},l().createElement(r.Text,{size:"small",color:n||a?"primary":"secondary"},t),l().createElement(E,null,e?.[0].label)),l().createElement(r.Padding,{right:"small"},l().createElement(v,{color:h.V[Number(e[0].value)].color}))),l().createElement(r.Icon,{size:"large",icon:n?"ChevronUpOutline":"ChevronDownOutline",color:n||a?"primary":"secondary",style:{alignSelf:"center"}})),x=({onClose:e,toggleModal:t,event:n,action:s,folderId:m})=>{const[b]=(0,c.useTranslation)(),[x,w]=(0,a.useState)(""),[C,y]=(0,a.useState)(!1),A=(0,a.useCallback)((()=>y((e=>!e))),[]),k=(0,a.useMemo)((()=>h.V.map(((e,t)=>({background:e.background,label:e.label??"",value:t.toString(),customComponent:l().createElement(r.Container,{width:"100%",mainAlignment:"space-between",orientation:"horizontal",height:"fit"},l().createElement(r.Padding,{left:"small"},l().createElement(E,null,e.label)),l().createElement(r.Padding,{right:"small"},l().createElement(v,{color:e.color})))})))),[]),[_,T]=(0,a.useState)(0),I=(0,r.useSnackbar)(),S=(0,d.f8)(m),R=(0,d.mv)(S?.id??"1"),z=(0,a.useMemo)((()=>(0,o.map)(R,(e=>e.name))),[R]),O=(0,a.useMemo)((()=>(0,o.includes)(z,x)),[x,z]),D=(0,a.useMemo)((()=>x.indexOf("/")>-1||0===x.length||"Calendar"===x||"calendar"===x||O),[x,O]),M=(0,a.useCallback)((()=>{w(""),T(0),y(!1),e()}),[e]),N=(0,a.useMemo)((()=>b("label.type_name_here","Calendar name")),[b]);return l().createElement(r.Container,{padding:{all:"small"},mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},l().createElement(g.x,{title:b("folder.modal.new.title2","New calendar creation"),onClose:M}),l().createElement(r.Input,{label:N,backgroundColor:"gray5",value:x,onChange:e=>{w(e.target.value)}}),O&&l().createElement(r.Padding,{all:"small"},l().createElement(r.Text,{size:"small",color:"error"},b("folder.modal.new.duplicate_warning","Calendar with the same name already exists"))),l().createElement(r.Padding,{vertical:"medium"}),l().createElement(r.Select,{label:"Select color",onChange:e=>{e&&T(parseInt(e,10))},items:k,defaultSelection:k[0],LabelFactory:f}),l().createElement(r.Padding,{vertical:"medium"}),l().createElement(r.Checkbox,{value:C,onClick:A,label:b("label.exclude_free_busy","Exclude this calendar when reporting the free/busy times")}),l().createElement(p.Z,{onConfirm:()=>{x&&(async({name:e,parent:t,color:n,excludeFreeBusy:a})=>{const l=await(async({name:e,parent:t,color:n,excludeFreeBusy:a})=>(0,i.soapFetch)("CreateFolder",{_jsns:"urn:zimbraMail",folder:{color:n,f:a?"b#":"#",l:t,name:e,view:"appointment"}}))({name:e,parent:t,color:n,excludeFreeBusy:a});return l.folder?l.folder[0]:l})({parent:S?.id??"1",name:x,color:_,excludeFreeBusy:C}).then((t=>{t.Fault?(I({key:"move",replace:!0,type:"error",label:b("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3,hideButton:!0}),e()):(s&&n&&s({inviteId:n.resource.inviteId,l:t.id,destinationCalendarName:t.name,id:n.resource.id}),I({key:"new",replace:!0,type:"success",label:b("message.snackbar.new_calendar_created","New calendar created"),autoHideTimeout:3e3,hideButton:!0}),e())})),w(""),T(0),y(!1),e()},secondaryAction:t,secondaryLabel:b("folder.modal.footer.go_back","Go back"),label:n&&(0,u.rR)(n.resource.calendar,i.FOLDERS.TRASH)?b("folder.modal.restore.footer","Create and Restore"):b("label.create","Create"),disabled:D}))}}}]);
//# sourceMappingURL=945.83a43f82.chunk.js.map