{"version":3,"file":"945.83a43f82.chunk.js","mappings":"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","sources":["webpack://carbonio-calendars-ui/./src/actions/delete-actions.ts","webpack://carbonio-calendars-ui/./src/hooks/use-delete-actions.ts","webpack://carbonio-calendars-ui/./src/view/modals/delete-event-modal.tsx","webpack://carbonio-calendars-ui/./src/view/modals/delete-permanently.tsx","webpack://carbonio-calendars-ui/./src/view/move/folder-item.tsx","webpack://carbonio-calendars-ui/./src/view/move/move-modal.tsx","webpack://carbonio-calendars-ui/./src/view/move/move-appt-view.tsx","webpack://carbonio-calendars-ui/./src/actions/appointment-actions-fn.tsx","webpack://carbonio-calendars-ui/./src/actions/appointment-actions-items.tsx","webpack://carbonio-calendars-ui/./src/commons/styled-divider.jsx","webpack://carbonio-calendars-ui/./src/hooks/use-event-actions.tsx","webpack://carbonio-calendars-ui/./src/hooks/use-invite.ts","webpack://carbonio-calendars-ui/./src/store/selectors/invites.ts","webpack://carbonio-calendars-ui/./src/utils/store/event.ts","webpack://carbonio-calendars-ui/./src/commons/file-preview.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/attachments-part.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/image-and-icon-part.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/details-part.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/event-panel-view.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/message-part.tsx","webpack://carbonio-calendars-ui/./src/store/actions/participant-displayer-actions.ts","webpack://carbonio-calendars-ui/./src/view/event-panel-view/participants-displayer.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/participants-displayer-small.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/participants-part.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/reminder-part.tsx","webpack://carbonio-calendars-ui/./src/view/event-panel-view/reply-buttons-part.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/equipments-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/location-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/meeting-rooms-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/tags-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/time-info-row.tsx","webpack://carbonio-calendars-ui/./src/view/event-summary-view/virtual-room-row.tsx","webpack://carbonio-calendars-ui/./src/view/modals/modify-standard-message-modal.tsx","webpack://carbonio-calendars-ui/./src/soap/create-folder-request.ts","webpack://carbonio-calendars-ui/./src/view/move/new-calendar-modal.tsx","webpack://carbonio-calendars-ui/./src/store/actions/create-calendar.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { find, isNil, omitBy } from 'lodash';\n\nimport {\n\tmoveAppointmentToTrash,\n\tMoveAppointmentToTrashArguments\n} from '../store/actions/move-appointment-to-trash';\nimport { sendInviteResponse } from '../store/actions/send-invite-response';\nimport { AppDispatch } from '../store/redux';\nimport { EventType } from '../types/event';\nimport { isOrganizerOrHaveEqualRights } from '../utils/store/event';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const generateSnackbar = ({ res, t, createSnackbar }: any): any => {\n\tif (!res.type.includes('fulfilled')) {\n\t\tcreateSnackbar({\n\t\t\tkey: `delete`,\n\t\t\treplace: true,\n\t\t\ttype: 'error',\n\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\tautoHideTimeout: 3000\n\t\t});\n\t}\n};\n\nexport const sendResponse = (event: EventType, context: { dispatch: AppDispatch }): Promise<any> =>\n\tcontext.dispatch(\n\t\tsendInviteResponse({\n\t\t\tinviteId: event.resource.inviteId,\n\t\t\tupdateOrganizer: true,\n\t\t\taction: 'DECLINE'\n\t\t})\n\t);\n\nexport const deleteEvent = (\n\tevent: EventType,\n\t// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\tcontext: any\n): any => {\n\tconst absFolderPath = find(context.folders, ['id', event.resource.calendar.id])?.absFolderPath;\n\tconst { inviteId, id, isRecurrent, ridZ } = event.resource;\n\tconst moveToTrashArgs = omitBy(\n\t\t{\n\t\t\tinviteId,\n\t\t\tridZ,\n\t\t\tt: context.t,\n\t\t\trecur: context?.recur,\n\t\t\tisRecurrent,\n\t\t\tisOrganizer: isOrganizerOrHaveEqualRights(event, absFolderPath),\n\t\t\tdeleteSingleInstance: context.isInstance ?? true,\n\t\t\tnewMessage: context.newMessage,\n\t\t\tinst: context?.inst,\n\t\t\ts: context.s,\n\t\t\tid\n\t\t},\n\t\tisNil\n\t) as MoveAppointmentToTrashArguments;\n\treturn context.dispatch(moveAppointmentToTrash(moveToTrashArgs));\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { CreateSnackbarFn, useSnackbar } from '@zextras/carbonio-design-system';\nimport { TFunction } from 'i18next';\nimport { size } from 'lodash';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\nimport { Dispatch } from 'redux';\n\nimport { deleteEvent, sendResponse } from '../actions/delete-actions';\nimport { Folder, Folders } from '../carbonio-ui-commons/types/folder';\nimport { generateEditor } from '../commons/editor-generator';\nimport { moveAppointmentRequest } from '../store/actions/move-appointment';\nimport { modifyAppointment } from '../store/actions/new-modify-appointment';\nimport { useAppDispatch } from '../store/redux/hooks';\nimport { EventType } from '../types/event';\nimport { Invite } from '../types/store/invite';\nimport { getInstanceExceptionId } from '../utils/event';\n\nconst generateAppointmentDeletedSnackbar = (\n\tres: { type: string | string[] },\n\tt: TFunction,\n\tcreateSnackbar: CreateSnackbarFn,\n\tundoAction?: () => void,\n\tisRecurrentSeries?: boolean,\n\tisDraft?: boolean\n): void => {\n\tif (res.type.includes('fulfilled')) {\n\t\tlet snackbarLabel =\n\t\t\tundoAction === undefined\n\t\t\t\t? t('message.snackbar.appointment_permanently_deleted', 'Appointment permanently deleted')\n\t\t\t\t: t('message.snackbar.appt_moved_to_trash', 'Appointment moved to trash');\n\t\tif (isRecurrentSeries) {\n\t\t\tif (isDraft) {\n\t\t\t\tsnackbarLabel = t(\n\t\t\t\t\t'message.snackbar.series_deleted_no_notification',\n\t\t\t\t\t'Series moved to trash'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsnackbarLabel = t(\n\t\t\t\t\t'message.snackbar.series_deleted',\n\t\t\t\t\t'Series moved to trash. Attendees will receive the cancellation notification'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tcreateSnackbar({\n\t\t\tkey: 'send',\n\t\t\treplace: true,\n\t\t\ttype: 'success',\n\t\t\tlabel: snackbarLabel,\n\t\t\tautoHideTimeout: 3000,\n\t\t\thideButton: true,\n\t\t\tactionLabel: t('label.undo', 'Undo'),\n\t\t\tonActionClick: () => (undoAction ? undoAction() : undefined)\n\t\t});\n\t} else {\n\t\tcreateSnackbar({\n\t\t\tkey: `delete`,\n\t\t\treplace: true,\n\t\t\ttype: 'error',\n\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\tautoHideTimeout: 3000,\n\t\t\thideButton: true\n\t\t});\n\t}\n};\n\nconst generateAppointmentRestoredSnackbar = (\n\tres: { type: string | string[] },\n\tt: TFunction,\n\tcreateSnackbar: CreateSnackbarFn\n): void => {\n\tif (res.type.includes('fulfilled')) {\n\t\tcreateSnackbar({\n\t\t\tkey: 'send',\n\t\t\treplace: true,\n\t\t\ttype: 'success',\n\t\t\tlabel: t('appt_restored_successfully', 'Appointment restored successfully'),\n\t\t\tautoHideTimeout: 3000,\n\t\t\thideButton: true\n\t\t});\n\t} else {\n\t\tcreateSnackbar({\n\t\t\tkey: `delete`,\n\t\t\treplace: true,\n\t\t\ttype: 'error',\n\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\tautoHideTimeout: 3000,\n\t\t\thideButton: true\n\t\t});\n\t}\n};\n\ntype AccountContext = {\n\tisSingleInstance?: boolean;\n\tdispatch: Dispatch;\n\treplaceHistory: (a: string) => void;\n\tonClose: () => void;\n\tfolders: Folders;\n};\n\nexport type UseDeleteActionsType = {\n\tdeleteNonRecurrentEvent: (newMessage?: object) => void;\n\tdeleteRecurrentInstance: (newMessage?: object) => void;\n\tdeleteRecurrentSerie: (newMessage?: object) => void;\n\ttoggleNotifyOrganizer: () => void;\n\ttoggleDeleteAll: () => void;\n\tdeleteAll: boolean;\n\tnotifyOrganizer: boolean;\n};\n\nexport const useDeleteActions = (\n\tevent: EventType,\n\tinvite: Invite,\n\tcontext: AccountContext\n): UseDeleteActionsType => {\n\tconst [t] = useTranslation();\n\tconst dispatch = useAppDispatch();\n\tconst createSnackbar = useSnackbar();\n\tconst [deleteAll, setDeleteAll] = useState(true);\n\tconst [notifyOrganizer, setNotifyOrganizer] = useState(false);\n\tconst toggleNotifyOrganizer = useCallback(() => {\n\t\tsetNotifyOrganizer((a) => !a);\n\t}, []);\n\n\tconst toggleDeleteAll = useCallback(() => {\n\t\tsetDeleteAll((a) => !a);\n\t}, []);\n\n\tconst deleteNonRecurrentEvent = useCallback(\n\t\t({ editor: newMessage, onBoardClose }) => {\n\t\t\tcontext.onClose();\n\t\t\tlet isCanceled = false;\n\t\t\tconst restoreAppointment = (): void => {\n\t\t\t\tisCanceled = true;\n\t\t\t\tdispatch(\n\t\t\t\t\tmoveAppointmentRequest({\n\t\t\t\t\t\tid: event.resource.inviteId,\n\t\t\t\t\t\tl: event.resource.calendar.id\n\t\t\t\t\t})\n\t\t\t\t).then((res: { type: string | string[] }) => {\n\t\t\t\t\tonBoardClose && onBoardClose();\n\t\t\t\t\tgenerateAppointmentRestoredSnackbar(res, t, createSnackbar);\n\t\t\t\t});\n\t\t\t};\n\t\t\tcontext.replaceHistory('');\n\t\t\tconst ctxt = {\n\t\t\t\tdispatch,\n\t\t\t\tt,\n\t\t\t\tisInstance: context.isSingleInstance,\n\t\t\t\tcreateSnackbar,\n\t\t\t\tnewMessage: newMessage?.text?.[0],\n\t\t\t\tfolders: context.folders\n\t\t\t};\n\t\t\tdeleteEvent(event, ctxt)\n\t\t\t\t.then((res: { type: string | string[] }) => {\n\t\t\t\t\tonBoardClose && onBoardClose();\n\t\t\t\t\tgenerateAppointmentDeletedSnackbar(res, t, createSnackbar, restoreAppointment);\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (notifyOrganizer && !isCanceled) {\n\t\t\t\t\t\t\tonBoardClose && onBoardClose();\n\t\t\t\t\t\t\tsendResponse(event, ctxt);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 5000);\n\t\t\t\t});\n\t\t},\n\t\t[event, context, createSnackbar, dispatch, notifyOrganizer, t]\n\t);\n\n\tconst deleteRecurrentSerie = useCallback(\n\t\t({ editor: newMessage, onBoardClose }) => {\n\t\t\tcontext?.onClose && context?.onClose();\n\t\t\tlet isCanceled = false;\n\t\t\tconst restoreRecurrentSeries = (): void => {\n\t\t\t\tisCanceled = true;\n\t\t\t\tdispatch(\n\t\t\t\t\tmoveAppointmentRequest({\n\t\t\t\t\t\tid: event.resource.inviteId,\n\t\t\t\t\t\tl: event.resource.calendar.id\n\t\t\t\t\t})\n\t\t\t\t).then((res: { type: string | string[] }) => {\n\t\t\t\t\tgenerateAppointmentRestoredSnackbar(res, t, createSnackbar);\n\t\t\t\t});\n\t\t\t};\n\t\t\tcontext.replaceHistory('');\n\t\t\tconst ctxt = {\n\t\t\t\tdispatch,\n\t\t\t\tt,\n\t\t\t\tisInstance: context.isSingleInstance,\n\t\t\t\tcreateSnackbar,\n\t\t\t\tnewMessage: newMessage?.text?.[0]\n\t\t\t};\n\t\t\tconst eventDate = event?.resource?.ridZ ?? event.start.valueOf();\n\t\t\tconst untilDate = moment(eventDate).subtract(1, 'day').format('YYYYMMDD');\n\t\t\tconst deleteFunction = (): void => {\n\t\t\t\tconst modifiedInvite = {\n\t\t\t\t\t...invite,\n\t\t\t\t\trecurrenceRule: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tadd: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trule: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t...invite?.recurrenceRule[0]?.add[0]?.rule[0],\n\t\t\t\t\t\t\t\t\t\t\tuntil: [\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\td: untilDate\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t\tconst editor = generateEditor({\n\t\t\t\t\tevent,\n\t\t\t\t\tinvite: modifiedInvite,\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\tdispatch: context.dispatch,\n\t\t\t\t\t\tisInstance: context.isSingleInstance,\n\t\t\t\t\t\tfolders: context.folders\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst isTheFirstInstance = moment(untilDate).isSameOrBefore(moment(invite.start.d));\n\t\t\t\tconst draft = !(size(invite?.participants) > 0);\n\t\t\t\treturn deleteAll || isTheFirstInstance\n\t\t\t\t\t? deleteEvent(event, ctxt)\n\t\t\t\t\t: dispatch(modifyAppointment({ editor, draft }));\n\t\t\t};\n\t\t\tdeleteFunction()\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\t.then((res: { type: string | string[] }) => {\n\t\t\t\t\tonBoardClose && onBoardClose();\n\t\t\t\t\tgenerateAppointmentDeletedSnackbar(\n\t\t\t\t\t\tres,\n\t\t\t\t\t\tt,\n\t\t\t\t\t\tcreateSnackbar,\n\t\t\t\t\t\trestoreRecurrentSeries,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tevent.resource.inviteNeverSent\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (notifyOrganizer && !isCanceled) {\n\t\t\t\t\t\t\tonBoardClose && onBoardClose();\n\t\t\t\t\t\t\tsendResponse(event, ctxt);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 5000)\n\t\t\t\t);\n\t\t},\n\n\t\t[event, context, createSnackbar, deleteAll, dispatch, invite, notifyOrganizer, t]\n\t);\n\n\tconst deleteRecurrentInstance = useCallback(\n\t\t({ editor: newMessage, onBoardClose }) => {\n\t\t\tcontext.onClose();\n\t\t\tconst isCanceled = false;\n\t\t\tcontext.replaceHistory('');\n\t\t\tconst ctxt = {\n\t\t\t\tdispatch,\n\t\t\t\tnewMessage: newMessage?.text?.[0],\n\t\t\t\tt,\n\t\t\t\tisInstance: context.isSingleInstance,\n\t\t\t\tcreateSnackbar,\n\t\t\t\tinst: getInstanceExceptionId({\n\t\t\t\t\tstart: event.start,\n\t\t\t\t\ttz: invite?.start?.tz,\n\t\t\t\t\tallDay: event?.allDay\n\t\t\t\t}),\n\t\t\t\ts: moment(event.start).valueOf(),\n\t\t\t\tfolders: context.folders\n\t\t\t};\n\t\t\tdeleteEvent(event, ctxt)\n\t\t\t\t.then((res: { type: string | string[] }) => {\n\t\t\t\t\tonBoardClose && onBoardClose();\n\t\t\t\t\tgenerateAppointmentDeletedSnackbar(res, t, createSnackbar);\n\t\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (notifyOrganizer && !isCanceled) {\n\t\t\t\t\t\t\tonBoardClose && onBoardClose();\n\t\t\t\t\t\t\tsendResponse(event, ctxt);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 5000)\n\t\t\t\t);\n\t\t},\n\t\t[event, context, createSnackbar, dispatch, invite?.start?.tz, notifyOrganizer, t]\n\t);\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\tdeleteNonRecurrentEvent,\n\t\t\tdeleteRecurrentInstance,\n\t\t\tdeleteRecurrentSerie,\n\t\t\ttoggleNotifyOrganizer,\n\t\t\ttoggleDeleteAll,\n\t\t\tdeleteAll,\n\t\t\tnotifyOrganizer\n\t\t}),\n\t\t[\n\t\t\tdeleteNonRecurrentEvent,\n\t\t\tdeleteRecurrentInstance,\n\t\t\tdeleteRecurrentSerie,\n\t\t\tdeleteAll,\n\t\t\ttoggleDeleteAll,\n\t\t\tnotifyOrganizer,\n\t\t\ttoggleNotifyOrganizer\n\t\t]\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport { Checkbox, Container, Padding, Text } from '@zextras/carbonio-design-system';\nimport { Spinner, replaceHistory, t } from '@zextras/carbonio-shell-ui';\nimport { size } from 'lodash';\nimport styled from 'styled-components';\n\nimport { ModifyStandardMessageModal } from './modify-standard-message-modal';\nimport { useFoldersMap } from '../../carbonio-ui-commons/store/zustand/folder';\nimport ModalFooter from '../../commons/modal-footer';\nimport { ModalHeader } from '../../commons/modal-header';\nimport { useDeleteActions, UseDeleteActionsType } from '../../hooks/use-delete-actions';\nimport { useAppDispatch } from '../../store/redux/hooks';\nimport { EventType } from '../../types/event';\nimport { Invite } from '../../types/store/invite';\n\nconst ItalicText = styled(Text)`\n\tfont-style: italic;\n`;\n\ntype DeleteEventModalProps = {\n\tevent: EventType;\n\tinvite: Invite;\n\tonClose: () => void;\n};\n\ntype DeleteEventModalContentProps = {\n\tactions: UseDeleteActionsType;\n\ttitle: string;\n\tisSingleInstance: boolean;\n\tisException: boolean;\n\tisInstanceOfSeries: boolean;\n\tinvite: Invite;\n\tonConfirm: () => void;\n\tonClose: () => void;\n\tisSeries: boolean;\n};\n\nconst DeleteEventModalContent = ({\n\tactions,\n\ttitle,\n\tisSingleInstance,\n\tisException,\n\tisInstanceOfSeries,\n\tinvite,\n\tonConfirm,\n\tonClose,\n\tisSeries\n}: DeleteEventModalContentProps): ReactElement => {\n\tconst { name, isOrganizer } = invite;\n\tconst displayMessage = useMemo(() => {\n\t\tif (isSingleInstance || isException) {\n\t\t\treturn t(\n\t\t\t\t'message.sure_to_delete_appointment',\n\t\t\t\t'Are you sure you want to delete the appointment ?'\n\t\t\t);\n\t\t}\n\t\tif (isInstanceOfSeries) {\n\t\t\treturn t('message.you_sure_delete_instance', {\n\t\t\t\ttitle: name,\n\t\t\t\tdefaultValue: `Are you sure you want to delete this instance of {{title}} appointment?`\n\t\t\t});\n\t\t}\n\t\t// series\n\t\treturn t(\n\t\t\t'message.sure_to_delete_all_occurences_appointment',\n\t\t\t'Are you sure you want to delete all occurrences of this appointment?'\n\t\t);\n\t}, [isSingleInstance, isException, isInstanceOfSeries, name]);\n\treturn (\n\t\t<Container mainAlignment=\"center\" crossAlignment=\"flex-start\" height=\"fit\">\n\t\t\t<ModalHeader title={title} onClose={onClose} />\n\t\t\t<Container\n\t\t\t\tpadding={{ vertical: 'medium' }}\n\t\t\t\tmainAlignment=\"baseline\"\n\t\t\t\tcrossAlignment=\"baseline\"\n\t\t\t>\n\t\t\t\t<Text overflow=\"break-word\">{displayMessage}</Text>\n\t\t\t\t{isSeries && !isException && isOrganizer && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Padding top=\"small\" />\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tvalue={actions?.deleteAll}\n\t\t\t\t\t\t\tonClick={actions?.toggleDeleteAll}\n\t\t\t\t\t\t\tlabel={t('message.delete_all_occurences', 'Delete all occurrences')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tvalue={!actions?.deleteAll}\n\t\t\t\t\t\t\tonClick={actions?.toggleDeleteAll}\n\t\t\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t\t\t'message.delete_future_occurences',\n\t\t\t\t\t\t\t\t'Delete this instance and all future occurrences'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Padding horizontal=\"extralarge\">\n\t\t\t\t\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t\t\t\t\t<ItalicText overflow=\"break-word\">\n\t\t\t\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t\t\t\t'message.delete_future_occurences_warning',\n\t\t\t\t\t\t\t\t\t\t'This will also delete all exceptions (before and after this instance) in the series'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</ItalicText>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{!isOrganizer && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Padding top=\"small\" />\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tvalue={actions?.notifyOrganizer}\n\t\t\t\t\t\t\tonClick={actions?.toggleNotifyOrganizer}\n\t\t\t\t\t\t\tlabel={t('label.notify_organizer', 'Notify organizer')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tlabel={t('label.delete', 'Delete')}\n\t\t\t\tdisabled={!invite}\n\t\t\t\tcolor=\"error\"\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n\nexport const DeleteEventModal = ({\n\tevent,\n\tinvite,\n\tonClose\n}: DeleteEventModalProps): ReactElement => {\n\tconst { isOrganizer, isException, participants } = invite;\n\tconst participantsSize = useMemo(() => size(participants), [participants]);\n\tconst dispatch = useAppDispatch();\n\tconst calendarFolders = useFoldersMap();\n\tconst isInstance = !!event.resource.ridZ;\n\tconst isRecurrent = !!invite.recurrenceRule;\n\tconst isSeries = isRecurrent && !isInstance;\n\tconst isSingleInstance = isInstance && !isRecurrent;\n\tconst isInstanceOfSeries = isRecurrent && isInstance;\n\n\tconst [isAskingConfirmation, setIsAskingConfirmation] = useState<boolean>(\n\t\t() =>\n\t\t\tparticipantsSize > 0 &&\n\t\t\t(isException || isInstance) &&\n\t\t\tisOrganizer &&\n\t\t\t!event.resource.inviteNeverSent\n\t);\n\n\tconst toggleAskConfirmation = useCallback(() => {\n\t\tsetIsAskingConfirmation((a) => !a);\n\t}, []);\n\n\tconst actions = useDeleteActions(event, invite, {\n\t\tisSingleInstance: isException || isInstanceOfSeries || false,\n\t\treplaceHistory,\n\t\tonClose,\n\t\tdispatch,\n\t\tfolders: calendarFolders\n\t});\n\n\tconst onConfirm = useMemo(() => {\n\t\tif (isException || isInstanceOfSeries) {\n\t\t\treturn actions?.deleteRecurrentInstance;\n\t\t}\n\t\tif (isSingleInstance) {\n\t\t\treturn actions?.deleteNonRecurrentEvent;\n\t\t}\n\t\tif (isSeries) {\n\t\t\tif (\n\t\t\t\tisOrganizer &&\n\t\t\t\tparticipantsSize > 0 &&\n\t\t\t\t!isAskingConfirmation &&\n\t\t\t\t!event.resource.inviteNeverSent\n\t\t\t) {\n\t\t\t\treturn toggleAskConfirmation;\n\t\t\t}\n\t\t\treturn actions?.deleteRecurrentSerie;\n\t\t}\n\t\treturn actions?.deleteNonRecurrentEvent;\n\t}, [\n\t\tisException,\n\t\tisInstanceOfSeries,\n\t\tisSingleInstance,\n\t\tisSeries,\n\t\tactions?.deleteNonRecurrentEvent,\n\t\tactions?.deleteRecurrentInstance,\n\t\tactions?.deleteRecurrentSerie,\n\t\tisOrganizer,\n\t\tparticipantsSize,\n\t\tisAskingConfirmation,\n\t\tevent.resource.inviteNeverSent,\n\t\ttoggleAskConfirmation\n\t]);\n\n\tconst title = useMemo(() => `${t('label.delete', 'Delete')} ${event.title}`, [event.title]);\n\treturn invite ? (\n\t\t<Container\n\t\t\tmainAlignment=\"center\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t\tpadding={{ top: 'small', right: 'small', bottom: 'extralarge', left: 'small' }}\n\t\t>\n\t\t\t{isAskingConfirmation ? (\n\t\t\t\t<ModifyStandardMessageModal\n\t\t\t\t\ttitle={title}\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tconfirmLabel={t('action.send_cancellation', 'Send Cancellation')}\n\t\t\t\t\tonConfirm={onConfirm}\n\t\t\t\t\tinvite={invite}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<DeleteEventModalContent\n\t\t\t\t\tactions={actions}\n\t\t\t\t\ttitle={title}\n\t\t\t\t\tisSingleInstance={isSingleInstance}\n\t\t\t\t\tisException={isException}\n\t\t\t\t\tisInstanceOfSeries={isInstanceOfSeries}\n\t\t\t\t\tinvite={invite}\n\t\t\t\t\tonConfirm={onConfirm}\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tisSeries={isSeries}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Container>\n\t) : (\n\t\t<Spinner />\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo } from 'react';\n\nimport { Container, Text } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\n\nimport ModalFooter from '../../commons/modal-footer';\nimport { ModalHeader } from '../../commons/modal-header';\nimport { deleteAppointmentPermanent } from '../../store/actions/delete-appointment-permanent';\nimport { ActionsContext } from '../../types/actions';\nimport { EventType } from '../../types/event';\n\ntype DeletePermanentlyProps = {\n\tonClose: () => void;\n\tevent: EventType;\n\tcontext: ActionsContext;\n};\n\nexport const DeletePermanently = ({\n\tonClose,\n\tevent,\n\tcontext\n}: DeletePermanentlyProps): JSX.Element => {\n\tconst title = useMemo(\n\t\t() =>\n\t\t\tt(\n\t\t\t\t'message.sure_to_delete_appointment_permanently',\n\t\t\t\t'Are you sure you want to delete this appointment permanently?'\n\t\t\t),\n\t\t[]\n\t);\n\n\tconst label = useMemo(() => t('label.delete_permanently', 'Delete permanently'), []);\n\tconst onConfirm = useCallback(() => {\n\t\tcontext\n\t\t\t.dispatch(\n\t\t\t\tdeleteAppointmentPermanent({\n\t\t\t\t\tid: event.resource.id\n\t\t\t\t})\n\t\t\t)\n\t\t\t.then((res) => {\n\t\t\t\tonClose();\n\t\t\t\tif (res.type.includes('fulfilled')) {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tcontext.createSnackbar({\n\t\t\t\t\t\tkey: `delete-permanently`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: t(\n\t\t\t\t\t\t\t'message.snackbar.appointment_permanently_deleted_succesfully',\n\t\t\t\t\t\t\t'Permanent deletion completed successfully'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tcontext.createSnackbar({\n\t\t\t\t\t\tkey: `delete-permanently`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\thideButton: true,\n\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t}, [context, event.resource.id, onClose]);\n\n\treturn (\n\t\t<Container\n\t\t\tpadding={{ all: 'large' }}\n\t\t\tmainAlignment=\"center\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t>\n\t\t\t<ModalHeader title={title} onClose={onClose} />\n\t\t\t<Container padding={{ top: 'large', bottom: 'large' }} crossAlignment=\"flex-start\">\n\t\t\t\t{event.resource.isRecurrent ? (\n\t\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'message.modal.delete.sure_delete_appointment_all_instances_permanently',\n\t\t\t\t\t\t\t'This will delete all occurences of this appointment and you will not be able to recover it again, continue?'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t) : (\n\t\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'message.modal.delete.sure_delete_appointment_permanently',\n\t\t\t\t\t\t\t'By deleting permanently this appointment you will not be able to recover it anymore, continue?'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t\t<ModalFooter onConfirm={onConfirm} label={label} color=\"error\" />\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport {\n\tContainer,\n\tText,\n\tAccordion,\n\tAccordionItemType,\n\tAccordionDivider\n} from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport styled from 'styled-components';\n\nconst ContainerEl = styled(Container)`\n\toverflow-y: auto;\n\tdisplay: block;\n`;\n\nexport const FolderItem = ({\n\tfolders\n}: {\n\tfolders: (AccordionItemType | AccordionDivider)[];\n}): ReactElement =>\n\tfolders.length ? (\n\t\t<ContainerEl\n\t\t\torientation=\"vertical\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tminHeight=\"30vh\"\n\t\t\tmaxHeight=\"59vh\"\n\t\t>\n\t\t\t<Accordion items={folders} background=\"gray6\" />\n\t\t</ContainerEl>\n\t) : (\n\t\t<Container padding={{ all: 'small' }}>\n\t\t\t<Text size=\"large\"> {t('label.empty', 'Empty')} </Text>\n\t\t</Container>\n\t);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport { AccordionItemType, Container, Input, Text } from '@zextras/carbonio-design-system';\nimport { FOLDERS, t } from '@zextras/carbonio-shell-ui';\nimport { filter, isEmpty, reduce, startsWith } from 'lodash';\n\nimport { FolderItem } from './folder-item';\nimport ModalFooter from '../../carbonio-ui-commons/components/modals/modal-footer';\nimport ModalHeader from '../../carbonio-ui-commons/components/modals/modal-header';\nimport { useFoldersMap } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { Folder } from '../../carbonio-ui-commons/types/folder';\nimport { getFolderTranslatedName } from '../../commons/utilities';\nimport { EventType } from '../../types/event';\nimport { Calendar } from '../../types/store/calendars';\n\ntype ActionArgs = {\n\tinviteId: string;\n\tl: string;\n\tid: string;\n\tdestinationCalendarName: string;\n};\n\ntype MoveModalProps = {\n\ttoggleModal: () => void;\n\tonClose: () => void;\n\tevent: EventType;\n\tcurrentFolder: Folder;\n\taction: (arg: ActionArgs) => void;\n};\n\nexport const MoveModal = ({\n\ttoggleModal,\n\tonClose,\n\tevent,\n\tcurrentFolder,\n\taction\n}: MoveModalProps): ReactElement => {\n\tconst folders = useFoldersMap();\n\tconst [input, setInput] = useState('');\n\tconst [folderDestination, setFolderDestination] = useState<Calendar>({} as Calendar);\n\tconst [isSameFolder, setIsSameFolder] = useState(false);\n\tconst onConfirm = useCallback(() => {\n\t\tif (folderDestination?.id !== currentFolder.id) {\n\t\t\taction({\n\t\t\t\tinviteId: event.resource.inviteId,\n\t\t\t\tl: folderDestination.id,\n\t\t\t\tid: event.resource.id,\n\t\t\t\tdestinationCalendarName: folderDestination.name\n\t\t\t});\n\t\t\tonClose();\n\t\t} else {\n\t\t\tsetIsSameFolder(true);\n\t\t}\n\t}, [\n\t\tfolderDestination.id,\n\t\tfolderDestination.name,\n\t\tcurrentFolder.id,\n\t\taction,\n\t\tevent.resource.inviteId,\n\t\tevent.resource.id,\n\t\tonClose\n\t]);\n\tconst filterFromInput = useMemo<Array<Folder>>(\n\t\t() =>\n\t\t\tfilter(folders, (v) => {\n\t\t\t\tif (isEmpty(v)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (v.id === currentFolder.id) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn startsWith(v.name?.toLowerCase(), input?.toLowerCase());\n\t\t\t}),\n\t\t[currentFolder, folders, input]\n\t);\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tconst nestFilteredFolders = useCallback(\n\t\t(items: Calendar[], calId, results: Calendar[]) =>\n\t\t\treduce(\n\t\t\t\tfilter(items, (item) => item.parent === calId),\n\t\t\t\t(acc, item) => {\n\t\t\t\t\tconst match = filter(results, (result) => result.id === item.id);\n\t\t\t\t\tif (match && match.length) {\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdivider: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\tlabel: item.name,\n\t\t\t\t\t\t\t\titems: folders,\n\t\t\t\t\t\t\t\tonClick: () => setFolderDestination(item),\n\t\t\t\t\t\t\t\topen: !!input.length,\n\t\t\t\t\t\t\t\tbackground: folderDestination.id === item.id ? 'highlight' : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\tif (match && !match.length) {\n\t\t\t\t\t\treturn [...acc, ...nestFilteredFolders(items, item.id, results)];\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t[] as Calendar[]\n\t\t\t),\n\t\t[folderDestination.id, input.length, folders]\n\t);\n\n\tconst nestedData = useMemo(\n\t\t() =>\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: FOLDERS.USER_ROOT,\n\t\t\t\t\tlabel: getFolderTranslatedName({ folderId: FOLDERS.USER_ROOT, folderName: 'Root' }),\n\t\t\t\t\tlevel: 0,\n\t\t\t\t\topen: true,\n\t\t\t\t\titems: nestFilteredFolders(folders, '1', filterFromInput),\n\t\t\t\t\tbackground: folderDestination.id === '1' ? 'highlight' : undefined\n\t\t\t\t}\n\t\t\t] as AccordionItemType[],\n\t\t[filterFromInput, folderDestination.id, folders, nestFilteredFolders]\n\t);\n\n\treturn (\n\t\t<Container\n\t\t\tpadding={{ all: 'small' }}\n\t\t\tmainAlignment=\"center\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t>\n\t\t\t<ModalHeader\n\t\t\t\ttitle={`${\n\t\t\t\t\tevent.resource.calendar.id === FOLDERS.TRASH\n\t\t\t\t\t\t? t('label.restore', 'Restore')\n\t\t\t\t\t\t: t('label.move', 'Move')\n\t\t\t\t} ${event.title}`}\n\t\t\t\tonClose={onClose}\n\t\t\t/>\n\t\t\t<Container mainAlignment=\"center\" crossAlignment=\"flex-start\" height=\"fit\">\n\t\t\t\t<Container\n\t\t\t\t\tpadding={{ vertical: 'small' }}\n\t\t\t\t\tmainAlignment=\"center\"\n\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t>\n\t\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'folder.modal.move.body.message3',\n\t\t\t\t\t\t\t'Select a calendar to move the considered appointment to:'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t</Container>\n\t\t\t\t<Input\n\t\t\t\t\tlabel={t('folder.modal.move.input.filter', 'Filter calendars')}\n\t\t\t\t\tbackgroundColor=\"gray5\"\n\t\t\t\t\tvalue={input}\n\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>): void => {\n\t\t\t\t\t\tif (e) {\n\t\t\t\t\t\t\tsetInput(e?.target?.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<FolderItem folders={nestedData} />\n\t\t\t\t<Container padding={{ all: 'medium' }} mainAlignment=\"center\" crossAlignment=\"flex-start\">\n\t\t\t\t\t{isSameFolder && <Text color=\"error\">Cannot move to same folder</Text>}\n\t\t\t\t</Container>\n\t\t\t\t<ModalFooter\n\t\t\t\t\tonConfirm={onConfirm}\n\t\t\t\t\tsecondaryAction={toggleModal}\n\t\t\t\t\tsecondaryBtnType=\"outlined\"\n\t\t\t\t\tsecondaryColor=\"primary\"\n\t\t\t\t\tsecondaryLabel={t('label.new_calendar', 'New Calendar')}\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tevent.resource.calendar.id === FOLDERS.TRASH\n\t\t\t\t\t\t\t? t('label.restore', 'Restore')\n\t\t\t\t\t\t\t: t('label.move', 'Move')\n\t\t\t\t\t}\n\t\t\t\t\tdisabled={!folderDestination.id || folderDestination.id === currentFolder.id}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useState, useCallback, ReactElement } from 'react';\n\nimport { useSnackbar } from '@zextras/carbonio-design-system';\nimport { FOLDERS, t } from '@zextras/carbonio-shell-ui';\n\nimport { MoveModal } from './move-modal';\nimport { NewModal } from './new-calendar-modal';\nimport { useFolder } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { hasId } from '../../carbonio-ui-commons/worker/handle-message';\nimport { moveAppointmentRequest } from '../../store/actions/move-appointment';\nimport { useAppDispatch } from '../../store/redux/hooks';\nimport { EventType } from '../../types/event';\n\ntype MoveAppointmentProps = {\n\tonClose: () => void;\n\tevent: EventType;\n};\n\nexport const MoveApptModal = ({ onClose, event }: MoveAppointmentProps): ReactElement | null => {\n\tconst dispatch = useAppDispatch();\n\tconst currentFolder = useFolder(event.resource.calendar.id);\n\tconst [showNewFolderModal, setShowNewFolderModal] = useState(false);\n\tconst createSnackbar = useSnackbar();\n\tconst toggleModal = useCallback(\n\t\t() => setShowNewFolderModal(!showNewFolderModal),\n\t\t[showNewFolderModal]\n\t);\n\n\tconst moveAppt = (data: any): void => {\n\t\tdispatch(moveAppointmentRequest(data)).then((res: any) => {\n\t\t\tif (res.type.includes('fulfilled')) {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: hasId(event.resource.calendar, FOLDERS.TRASH) ? 'restore' : 'move',\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: hasId(event.resource.calendar, FOLDERS.TRASH)\n\t\t\t\t\t\t? `${t('message.snackbar.appt_restored', 'Appointment restored successfully to')} ${\n\t\t\t\t\t\t\t\tdata.destinationCalendarName\n\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t: `${t('message.snackbar.appt_moved', 'Appointment moved successfully to')} ${\n\t\t\t\t\t\t\t\tdata.destinationCalendarName\n\t\t\t\t\t\t\t}`,\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: hasId(event.resource.calendar, FOLDERS.TRASH) ? 'restore' : 'move',\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thideButton: true,\n\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\tautoHideTimeout: 3000\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\treturn currentFolder ? (\n\t\t<>\n\t\t\t{showNewFolderModal ? (\n\t\t\t\t<NewModal\n\t\t\t\t\ttoggleModal={toggleModal}\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tfolderId={currentFolder.id}\n\t\t\t\t\tevent={event}\n\t\t\t\t\taction={moveAppt}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<MoveModal\n\t\t\t\t\ttoggleModal={toggleModal}\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tcurrentFolder={currentFolder}\n\t\t\t\t\tevent={event}\n\t\t\t\t\taction={moveAppt}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React from 'react';\n\nimport { addBoard, replaceHistory } from '@zextras/carbonio-shell-ui';\nimport { find, lowerCase, omit } from 'lodash';\n\nimport { generateEditor } from '../commons/editor-generator';\nimport { getIdentityItems } from '../commons/get-identity-items';\nimport { CALENDAR_ROUTE, PANEL_VIEW } from '../constants';\nimport { normalizeInvite } from '../normalizations/normalize-invite';\nimport { getInvite } from '../store/actions/get-invite';\nimport { sendInviteResponse } from '../store/actions/send-invite-response';\nimport { StoreProvider } from '../store/redux';\nimport { ActionsClick, ActionsContext } from '../types/actions';\nimport { EventActionsEnum } from '../types/enums/event-actions-enum';\nimport { EventType } from '../types/event';\nimport { Invite } from '../types/store/invite';\nimport { getInstanceExceptionId } from '../utils/event';\nimport { DeleteEventModal } from '../view/modals/delete-event-modal';\nimport { DeletePermanently } from '../view/modals/delete-permanently';\nimport { MoveApptModal } from '../view/move/move-appt-view';\n\nexport const createCopy =\n\t({\n\t\tevent,\n\t\tinvite: _invite,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tinvite?: Invite;\n\t\tcontext: Omit<ActionsContext, 'createAndApplyTag' | 'createModal' | 'createSnackbar' | 'tags'>;\n\t}): ((e?: ActionsClick) => void) =>\n\t(): void => {\n\t\tconst copy = (invite: Invite): void => {\n\t\t\tconst eventToCopy = { ...event, resource: omit(event.resource, 'id') } as EventType;\n\t\t\tcontext?.onClose && context?.onClose();\n\t\t\tconst identities = getIdentityItems();\n\t\t\tconst organizer = find(identities, ['identityName', 'DEFAULT']);\n\t\t\tconst isSeries = event?.resource?.isRecurrent && !event?.resource?.ridZ;\n\t\t\tconst isInstance = !event?.resource?.isRecurrent && !!event?.resource?.ridZ;\n\t\t\tconst editor = generateEditor({\n\t\t\t\tevent: eventToCopy,\n\t\t\t\tinvite,\n\t\t\t\tcontext: {\n\t\t\t\t\tfolders: context.folders,\n\t\t\t\t\tdispatch: context.dispatch,\n\t\t\t\t\tpanel: context.panel ?? true,\n\t\t\t\t\torganizer,\n\t\t\t\t\trecur: isSeries ? invite.recurrenceRule : undefined,\n\t\t\t\t\texceptId: undefined,\n\t\t\t\t\tisInstance,\n\t\t\t\t\tisSeries,\n\t\t\t\t\tisException: false\n\t\t\t\t}\n\t\t\t});\n\t\t\taddBoard({\n\t\t\t\turl: `${CALENDAR_ROUTE}/`,\n\t\t\t\ttitle: editor?.title ?? '',\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\teditor\n\t\t\t});\n\t\t};\n\t\tif (!_invite) {\n\t\t\tcontext\n\t\t\t\t.dispatch(getInvite({ inviteId: event?.resource?.inviteId, ridZ: event?.resource?.ridZ }))\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res.payload) {\n\t\t\t\t\t\tconst invite = normalizeInvite(res.payload.m[0]);\n\t\t\t\t\t\tcopy(invite);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\tcopy(_invite);\n\t\t}\n\t};\n\nexport const editAppointment =\n\t({\n\t\tevent,\n\t\tinvite: _invite,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tinvite?: Invite;\n\t\tcontext: Omit<ActionsContext, 'createAndApplyTag' | 'createModal' | 'createSnackbar' | 'tags'>;\n\t}): ((e?: ActionsClick) => void) =>\n\t(): void => {\n\t\tconst edit = (invite: Invite): void => {\n\t\t\tconst editor = generateEditor({\n\t\t\t\tevent,\n\t\t\t\tinvite,\n\t\t\t\tcontext: {\n\t\t\t\t\tpanel: false,\n\t\t\t\t\tdispatch: context.dispatch,\n\t\t\t\t\tfolders: context.folders\n\t\t\t\t}\n\t\t\t});\n\t\t\taddBoard({\n\t\t\t\turl: `${CALENDAR_ROUTE}/`,\n\t\t\t\ttitle: editor?.title ?? '',\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\teditor\n\t\t\t});\n\t\t};\n\t\tif (!_invite) {\n\t\t\tcontext\n\t\t\t\t.dispatch(getInvite({ inviteId: event?.resource?.inviteId, ridZ: event?.resource?.ridZ }))\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res.payload) {\n\t\t\t\t\t\tconst invite = normalizeInvite(res.payload.m[0]);\n\t\t\t\t\t\tedit(invite);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\tedit(_invite);\n\t\t}\n\t};\n\nexport const moveAppointment =\n\t({\n\t\tevent,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tcontext: ActionsContext;\n\t}): ((e: ActionsClick) => void) =>\n\t(ev?: ActionsClick): void => {\n\t\tif (ev) ev.preventDefault();\n\n\t\tcontext?.onClose && context?.onClose();\n\t\tconst closeModal = context.createModal(\n\t\t\t{\n\t\t\t\tmaxHeight: '90vh',\n\t\t\t\tchildren: (\n\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t<MoveApptModal event={event} onClose={(): void => closeModal()} />\n\t\t\t\t\t</StoreProvider>\n\t\t\t\t),\n\t\t\t\tonClose: () => {\n\t\t\t\t\tcloseModal();\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t};\n\nexport const deletePermanently =\n\t({\n\t\tevent,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tcontext: ActionsContext;\n\t}): ((e: ActionsClick) => void) =>\n\t(ev?: ActionsClick): void => {\n\t\tif (ev) ev.preventDefault();\n\t\tcontext?.onClose && context?.onClose();\n\t\tconst closeModal = context.createModal(\n\t\t\t{\n\t\t\t\tchildren: (\n\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t<DeletePermanently onClose={(): void => closeModal()} event={event} context={context} />\n\t\t\t\t\t</StoreProvider>\n\t\t\t\t),\n\t\t\t\tonClose: () => {\n\t\t\t\t\tcloseModal();\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t};\n\nexport const moveToTrash =\n\t({\n\t\tevent,\n\t\tinvite: _invite,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tinvite?: Invite;\n\t\tcontext: ActionsContext;\n\t}): ((e: ActionsClick) => void) =>\n\t(): void => {\n\t\tconst trashEvent = (invite: Invite): void => {\n\t\t\tcontext?.onClose && context?.onClose();\n\t\t\tconst closeModal = context.createModal(\n\t\t\t\t{\n\t\t\t\t\tchildren: (\n\t\t\t\t\t\t<StoreProvider>\n\t\t\t\t\t\t\t<DeleteEventModal event={event} invite={invite} onClose={(): void => closeModal()} />\n\t\t\t\t\t\t</StoreProvider>\n\t\t\t\t\t),\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t};\n\t\tif (!_invite) {\n\t\t\tcontext\n\t\t\t\t.dispatch(getInvite({ inviteId: event?.resource?.inviteId, ridZ: event?.resource?.ridZ }))\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res.payload) {\n\t\t\t\t\t\tconst invite = normalizeInvite(res.payload.m[0]);\n\t\t\t\t\t\ttrashEvent(invite);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\ttrashEvent(_invite);\n\t\t}\n\t};\n\nexport const openAppointment =\n\t({\n\t\tevent,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tcontext: ActionsContext;\n\t}): ((e: ActionsClick) => void) =>\n\t(): void => {\n\t\tcontext?.onClose && context?.onClose();\n\t\tif (context?.panelView === PANEL_VIEW.APP) {\n\t\t\tconst path = event.resource.ridZ\n\t\t\t\t? `/${event.resource.calendar.id}/${EventActionsEnum.EXPAND}/${event.resource.id}/${event.resource.ridZ}`\n\t\t\t\t: `/${event.resource.calendar.id}/${EventActionsEnum.EXPAND}/${event.resource.id}`;\n\t\t\treplaceHistory(path);\n\t\t}\n\t\tif (context?.panelView === PANEL_VIEW.SEARCH) {\n\t\t\tconst path = event.resource.ridZ\n\t\t\t\t? `/${EventActionsEnum.EXPAND}/${event.resource.id}/${event.resource.ridZ}`\n\t\t\t\t: `/${EventActionsEnum.EXPAND}/${event.resource.id}`;\n\t\t\treplaceHistory(path);\n\t\t}\n\t};\nexport const acceptInvitation =\n\t({\n\t\tevent,\n\t\tinvite,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tinvite?: Invite;\n\t\tcontext: Omit<ActionsContext, 'createAndApplyTag' | 'createModal' | 'createSnackbar' | 'tags'>;\n\t}): ((e: ActionsClick) => void) =>\n\t(): void => {\n\t\tconst exceptId =\n\t\t\tcontext.isInstance || event.resource.isException\n\t\t\t\t? getInstanceExceptionId({\n\t\t\t\t\t\tstart: event.start,\n\t\t\t\t\t\tallDay: event.allDay,\n\t\t\t\t\t\ttz: invite?.tz\n\t\t\t\t\t})\n\t\t\t\t: undefined;\n\n\t\tcontext.dispatch(\n\t\t\tsendInviteResponse({\n\t\t\t\tinviteId: event.resource.inviteId,\n\t\t\t\texceptId,\n\t\t\t\tupdateOrganizer: true,\n\t\t\t\taction: 'ACCEPT'\n\t\t\t})\n\t\t);\n\t};\n\nexport const declineInvitation =\n\t({\n\t\tevent,\n\t\tinvite,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tinvite?: Invite;\n\t\tcontext: Omit<ActionsContext, 'createAndApplyTag' | 'createModal' | 'createSnackbar' | 'tags'>;\n\t}): ((e: ActionsClick) => void) =>\n\t(): void => {\n\t\tconst exceptId =\n\t\t\tcontext.isInstance || event.resource.isException\n\t\t\t\t? getInstanceExceptionId({\n\t\t\t\t\t\tstart: event.start,\n\t\t\t\t\t\tallDay: event.allDay,\n\t\t\t\t\t\ttz: invite?.tz\n\t\t\t\t\t})\n\t\t\t\t: undefined;\n\t\tcontext.dispatch(\n\t\t\tsendInviteResponse({\n\t\t\t\tinviteId: event.resource.inviteId,\n\t\t\t\texceptId,\n\t\t\t\tupdateOrganizer: true,\n\t\t\t\taction: 'DECLINE'\n\t\t\t})\n\t\t);\n\t};\n\nexport const acceptAsTentative =\n\t({\n\t\tevent,\n\t\tinvite,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tinvite?: Invite;\n\t\tcontext: Omit<ActionsContext, 'createAndApplyTag' | 'createModal' | 'createSnackbar' | 'tags'>;\n\t}): ((e: ActionsClick) => void) =>\n\t(): void => {\n\t\tconst exceptId =\n\t\t\tcontext.isInstance || event.resource.isException\n\t\t\t\t? getInstanceExceptionId({\n\t\t\t\t\t\tstart: event.start,\n\t\t\t\t\t\tallDay: event.allDay,\n\t\t\t\t\t\ttz: invite?.tz\n\t\t\t\t\t})\n\t\t\t\t: undefined;\n\t\tcontext.dispatch(\n\t\t\tsendInviteResponse({\n\t\t\t\tinviteId: event.resource.inviteId,\n\t\t\t\texceptId,\n\t\t\t\tupdateOrganizer: true,\n\t\t\t\taction: 'TENTATIVE'\n\t\t\t})\n\t\t);\n\t};\n\nexport const proposeNewTimeFn =\n\t({\n\t\tevent,\n\t\tinvite: _invite,\n\t\tcontext\n\t}: {\n\t\tevent: EventType;\n\t\tinvite?: Invite;\n\t\tcontext: Omit<ActionsContext, 'createAndApplyTag' | 'createModal' | 'createSnackbar' | 'tags'>;\n\t}): ((e?: ActionsClick) => void) =>\n\t(): void => {\n\t\tconst proposeTime = (invite: Invite): void => {\n\t\t\tconst editor = generateEditor({\n\t\t\t\tevent,\n\t\t\t\tinvite,\n\t\t\t\tcontext: {\n\t\t\t\t\tpanel: false,\n\t\t\t\t\tdispatch: context.dispatch,\n\t\t\t\t\tfolders: context.folders,\n\t\t\t\t\tisProposeNewTime: true,\n\t\t\t\t\tattendees: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\temail: event?.resource?.organizer?.email ?? event?.resource?.organizer?.email,\n\t\t\t\t\t\t\tid: event?.resource?.organizer?.email ?? event?.resource?.organizer?.email\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tdisabled: {\n\t\t\t\t\t\ttitle: true,\n\t\t\t\t\t\tlocation: true,\n\t\t\t\t\t\torganizer: true,\n\t\t\t\t\t\tvirtualRoom: true,\n\t\t\t\t\t\trichTextButton: true,\n\t\t\t\t\t\tattachmentsButton: true,\n\t\t\t\t\t\tsaveButton: true,\n\t\t\t\t\t\tattendees: true,\n\t\t\t\t\t\toptionalAttendees: true,\n\t\t\t\t\t\tfreeBusy: true,\n\t\t\t\t\t\tcalendar: true,\n\t\t\t\t\t\tprivate: true,\n\t\t\t\t\t\tallDay: true,\n\t\t\t\t\t\treminder: true,\n\t\t\t\t\t\trecurrence: true,\n\t\t\t\t\t\tmeetingRoom: true,\n\t\t\t\t\t\tequipment: true,\n\t\t\t\t\t\ttimezone: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\taddBoard({\n\t\t\t\turl: `${CALENDAR_ROUTE}/`,\n\t\t\t\ttitle: editor?.title ?? '',\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\teditor\n\t\t\t});\n\t\t};\n\t\tif (!_invite) {\n\t\t\tcontext\n\t\t\t\t.dispatch(getInvite({ inviteId: event?.resource?.inviteId, ridZ: event?.resource?.ridZ }))\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res.payload) {\n\t\t\t\t\t\tconst invite = normalizeInvite(res.payload.m[0]);\n\t\t\t\t\t\tproposeTime(invite);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\tproposeTime(_invite);\n\t\t}\n\t};\n\nexport const exportAppointmentICSFn =\n\t({ event }: { event: EventType }): ((e?: ActionsClick) => void) =>\n\t(): void => {\n\t\tconst downloadICS = (name: string, uri: string): void => {\n\t\t\tconst link = document.createElement('a');\n\t\t\tlink.download = name;\n\t\t\tlink.href = uri;\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link);\n\t\t};\n\t\tdownloadICS(\n\t\t\t`${lowerCase(event?.title)}.ics`,\n\t\t\t`/service/home/~/?auth=co&id=${event.resource.id}&mime=text/plain&noAttach=1&icalAttach=none`\n\t\t);\n\t};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { FOLDERS, t } from '@zextras/carbonio-shell-ui';\nimport { find } from 'lodash';\n\nimport {\n\tacceptAsTentative,\n\tacceptInvitation,\n\tcreateCopy,\n\tdeclineInvitation,\n\tdeletePermanently,\n\teditAppointment,\n\texportAppointmentICSFn,\n\tmoveAppointment,\n\tmoveToTrash,\n\topenAppointment,\n\tproposeNewTimeFn\n} from './appointment-actions-fn';\nimport { hasId } from '../carbonio-ui-commons/worker/handle-message';\nimport { ActionsContext, ActionsProps, AppointmentActionsItems } from '../types/actions';\nimport { EventActionsEnum } from '../types/enums/event-actions-enum';\nimport { EventType } from '../types/event';\nimport { Invite } from '../types/store/invite';\nimport { isOrganizerOrHaveEqualRights } from '../utils/store/event';\n\nexport const openEventItem = ({\n\tevent,\n\tcontext\n}: {\n\tevent: EventType;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.EXPAND,\n\ticon: 'ExpandOutline',\n\tdisabled: false,\n\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\tlabel: t('event.action.expand', 'Open'),\n\tonClick: openAppointment({\n\t\tevent,\n\t\tcontext\n\t})\n});\n\nexport const acceptInvitationItem = ({\n\tevent,\n\tinvite,\n\tcontext\n}: {\n\tevent: EventType;\n\tinvite?: Invite;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.ACCEPT,\n\ticon: 'CheckmarkOutline',\n\tlabel: t('event.action.accept', 'Accept'),\n\tdisabled: event?.resource?.participationStatus === 'AC',\n\ttooltipLabel: t('label.action_performed', 'You already performed this action'),\n\tonClick: acceptInvitation({ event, context, invite })\n});\n\nexport const declineInvitationItem = ({\n\tevent,\n\tinvite,\n\tcontext\n}: {\n\tevent: EventType;\n\tinvite?: Invite;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.DECLINE,\n\ticon: 'CloseOutline',\n\tlabel: t('event.action.decline', 'Decline'),\n\tdisabled: event?.resource?.participationStatus === 'DE',\n\ttooltipLabel: t('label.action_performed', 'You already performed this action'),\n\tonClick: declineInvitation({ event, context, invite })\n});\n\nexport const acceptAsTentativeItem = ({\n\tevent,\n\tinvite,\n\tcontext\n}: {\n\tevent: EventType;\n\tinvite?: Invite;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.TENTATIVE,\n\ticon: 'QuestionMarkOutline',\n\tlabel: t('label.tentative', 'Tentative'),\n\tdisabled: event?.resource?.participationStatus === 'TE',\n\ttooltipLabel: t('label.action_performed', 'You already performed this action'),\n\tonClick: acceptAsTentative({ event, context, invite })\n});\n\nexport const proposeNewTimeItem = ({\n\tinvite,\n\tevent,\n\tcontext\n}: {\n\tinvite?: Invite;\n\tevent: EventType;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.PROPOSE_NEW_TIME,\n\ticon: 'ClockOutline',\n\tlabel: t('label.propose_new_time', 'Propose new time'),\n\tdisabled: false,\n\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\tonClick: proposeNewTimeFn({ event, invite, context })\n});\n\nexport const moveEventItem = ({\n\tevent,\n\tcontext\n}: {\n\tevent: EventType;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.MOVE,\n\ticon: hasId(event.resource.calendar, FOLDERS.TRASH) ? 'RestoreOutline' : 'MoveOutline',\n\tlabel: hasId(event.resource.calendar, FOLDERS.TRASH)\n\t\t? t('label.restore', 'Restore')\n\t\t: t('label.move', 'Move'),\n\tdisabled: !event?.haveWriteAccess,\n\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\tonClick: moveAppointment({ event, context })\n});\n\nexport const moveApptToTrashItem = ({\n\tinvite,\n\tevent,\n\tcontext\n}: {\n\tinvite?: Invite;\n\tevent: EventType;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.TRASH,\n\ticon: 'Trash2Outline',\n\tlabel: t('label.delete', 'Delete'),\n\tdisabled: !event?.haveWriteAccess,\n\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\tonClick: moveToTrash({ event, invite, context })\n});\n\nexport const deletePermanentlyItem = ({\n\tevent,\n\tcontext\n}: {\n\tevent: EventType;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.DELETE_PERMANENTLY,\n\ticon: 'DeletePermanentlyOutline',\n\tlabel: t('label.delete_permanently', 'Delete permanently'),\n\tdisabled: false,\n\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\tonClick: deletePermanently({ event, context })\n});\n\nexport const editEventItem = ({\n\tinvite,\n\tevent,\n\tcontext\n}: {\n\tinvite?: Invite;\n\tevent: EventType;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => {\n\tconst absFolderPath = find(context.folders, ['id', event.resource.calendar.id])?.absFolderPath;\n\treturn {\n\t\tid: EventActionsEnum.EDIT,\n\t\ticon: 'Edit2Outline',\n\t\tlabel: t('label.edit', 'Edit'),\n\t\tdisabled: !isOrganizerOrHaveEqualRights(event, absFolderPath),\n\t\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\t\tonClick: editAppointment({ event, invite, context })\n\t};\n};\nexport const copyEventItem = ({\n\tinvite,\n\tevent,\n\tcontext\n}: {\n\tinvite?: Invite;\n\tevent: EventType;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.CREATE_COPY,\n\ticon: 'Copy',\n\tlabel: t('label.create_copy', 'Copy'),\n\tdisabled: false,\n\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\tonClick: createCopy({ event, invite, context })\n});\n\nexport const deleteEventItem = ({\n\tinvite,\n\tevent,\n\tcontext\n}: {\n\tinvite?: Invite;\n\tevent: EventType;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems =>\n\thasId(event.resource.calendar, FOLDERS.TRASH)\n\t\t? {\n\t\t\t\tid: EventActionsEnum.DELETE_PERMANENTLY,\n\t\t\t\ticon: 'DeletePermanentlyOutline',\n\t\t\t\tlabel: t('label.delete_permanently', 'Delete permanently'),\n\t\t\t\tdisabled: !event?.haveWriteAccess,\n\t\t\t\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\t\t\t\tonClick: deletePermanently({ event, context })\n\t\t\t}\n\t\t: {\n\t\t\t\tid: EventActionsEnum.TRASH,\n\t\t\t\ticon: 'Trash2Outline',\n\t\t\t\tlabel: t('action.delete', 'Delete'),\n\t\t\t\tdisabled: !event?.haveWriteAccess,\n\t\t\t\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\t\t\t\tonClick: moveToTrash({ event, invite, context })\n\t\t\t};\n\nexport const showOriginal = ({ event }: { event: EventType }): AppointmentActionsItems => ({\n\tid: EventActionsEnum.SHOW_ORIGINAL,\n\ticon: 'CodeOutline',\n\tlabel: t('action.show_original', 'Show original'),\n\tdisabled: false,\n\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\tonClick: (ev): void => {\n\t\tif (ev) ev.preventDefault();\n\t\twindow.open(\n\t\t\t`/service/home/~/?auth=co&id=${event.resource.id}&mime=text/plain&noAttach=1&icalAttach=none`,\n\t\t\t'_blank'\n\t\t);\n\t}\n});\n\nexport const exportAppointmentICSItem = ({\n\tevent\n}: {\n\tevent: EventType;\n}): AppointmentActionsItems => ({\n\tid: EventActionsEnum.DOWNLOAD_ICS,\n\ticon: 'Download',\n\tlabel: t('action.download_ics', 'Download ICS'),\n\tdisabled: false,\n\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\tonClick: exportAppointmentICSFn({ event })\n});\n\nconst getInviteActionsArray = ({\n\tevent,\n\tcontext,\n\tinvite\n}: ActionsProps): AppointmentActionsItems[] => [\n\tacceptInvitationItem({ event, context }),\n\tacceptAsTentativeItem({ event, context }),\n\tdeclineInvitationItem({ event, context }),\n\tproposeNewTimeItem({ event, invite, context })\n];\n\nexport const isAnInvite = (event: EventType): boolean => {\n\tif (event.resource.organizer) {\n\t\treturn (\n\t\t\t!event.resource.iAmOrganizer &&\n\t\t\tevent.haveWriteAccess &&\n\t\t\t((!!event.resource.calendar.owner &&\n\t\t\t\tevent.resource.organizer &&\n\t\t\t\tevent.resource.calendar.owner !== event.resource.organizer.email) ||\n\t\t\t\t!event.resource.calendar.owner)\n\t\t);\n\t}\n\treturn false;\n};\n\nexport const answerToEventItem = ({\n\tevent,\n\tinvite,\n\tcontext\n}: {\n\tevent: EventType;\n\tinvite?: Invite;\n\tcontext: ActionsContext;\n}): (AppointmentActionsItems & { items: Array<AppointmentActionsItems> }) | undefined =>\n\tisAnInvite(event)\n\t\t? {\n\t\t\t\tid: EventActionsEnum.ANSWER,\n\t\t\t\ticon: 'ReplyAll',\n\t\t\t\titems: getInviteActionsArray({ event, invite, context }),\n\t\t\t\tlabel: t('action.answer', 'Answer'),\n\t\t\t\tdisabled: false,\n\t\t\t\tkeepOpen: true,\n\t\t\t\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action')\n\t\t\t}\n\t\t: undefined;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport styled from 'styled-components';\n\nconst StyledDivider = styled.hr`\n\tborder: 0;\n\theight: 0;\n\tborder-top: 0.0625rem solid ${(props) => props.theme.palette.gray2.regular};\n\twidth: calc(100% - 2rem);\n\tmargin: 0;\n`;\n\nexport default StyledDivider;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useMemo } from 'react';\n\nimport { useModal, useSnackbar } from '@zextras/carbonio-design-system';\nimport { FOLDERS, replaceHistory, t, useTags } from '@zextras/carbonio-shell-ui';\nimport { compact, find, omit } from 'lodash';\n\nimport {\n\tanswerToEventItem,\n\tcopyEventItem,\n\tdeleteEventItem,\n\teditEventItem,\n\texportAppointmentICSItem,\n\tmoveEventItem,\n\topenEventItem,\n\tshowOriginal\n} from '../actions/appointment-actions-items';\nimport { useFoldersMap } from '../carbonio-ui-commons/store/zustand/folder';\nimport { LinkFolder } from '../carbonio-ui-commons/types/folder';\nimport { isLinkChild } from '../commons/utilities';\nimport { useAppDispatch, useAppSelector } from '../store/redux/hooks';\nimport { selectInstanceInvite } from '../store/selectors/invites';\nimport {\n\tActionsClick,\n\tActionsContext,\n\tActionsProps,\n\tAppointmentActionsItems,\n\tInstanceActionsItems,\n\tPanelView,\n\tSeriesActionsItems\n} from '../types/actions';\nimport { EventActionsEnum } from '../types/enums/event-actions-enum';\nimport { EventType } from '../types/event';\nimport { applyTag, createAndApplyTag } from '../view/tags/tag-actions';\n\nconst getExportICSItem = ({\n\tevent,\n\tcontext\n}: {\n\tevent: EventType;\n\tcontext: ActionsContext;\n}): AppointmentActionsItems | false | undefined => {\n\tconst folder = find(context.folders, ['id', event.resource.calendar.id]);\n\treturn (\n\t\tfolder &&\n\t\t(!(folder as LinkFolder).isLink || isLinkChild(folder)) &&\n\t\texportAppointmentICSItem({ event })\n\t);\n};\n\nconst getInstanceActionsItems = ({ event, invite, context }: ActionsProps): InstanceActionsItems =>\n\tcompact([\n\t\topenEventItem({\n\t\t\tevent,\n\t\t\tcontext\n\t\t}),\n\t\teditEventItem({ event, invite, context }),\n\t\tdeleteEventItem({ event, invite, context }),\n\t\tmoveEventItem({ event, context }),\n\t\tcopyEventItem({ event, invite, context }),\n\t\tshowOriginal({ event }),\n\t\tapplyTag({ event, context }),\n\t\tanswerToEventItem({ event, invite, context }),\n\t\tgetExportICSItem({ event, context })\n\t]);\n\nconst getRecurrentActionsItems = ({ event, invite, context }: ActionsProps): SeriesActionsItems => {\n\tconst seriesEvent = { ...event, resource: omit(event.resource, 'ridZ') } as EventType;\n\tconst contextOverride = { ...context, isInstance: true };\n\treturn [\n\t\t{\n\t\t\tid: EventActionsEnum.INSTANCE,\n\t\t\ticon: 'CalendarOutline',\n\t\t\tlabel: t('label.instance', 'Instance'),\n\t\t\tdisabled: false,\n\t\t\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\t\t\tonClick: (ev: ActionsClick): void => {\n\t\t\t\tif (ev) ev.preventDefault();\n\t\t\t},\n\t\t\titems: compact([\n\t\t\t\topenEventItem({\n\t\t\t\t\tevent,\n\t\t\t\t\tcontext\n\t\t\t\t}),\n\t\t\t\teditEventItem({ event, invite, context }),\n\t\t\t\tdeleteEventItem({ event, invite, context }),\n\t\t\t\tcopyEventItem({ event, invite, context }),\n\t\t\t\tshowOriginal({ event }),\n\t\t\t\tapplyTag({ event, context }),\n\t\t\t\tanswerToEventItem({ event, invite, context: contextOverride })\n\t\t\t])\n\t\t},\n\t\t{\n\t\t\tid: EventActionsEnum.SERIES,\n\t\t\ticon: 'CalendarOutline',\n\t\t\tlabel: t('label.series', 'Series'),\n\t\t\tdisabled: false,\n\t\t\ttooltipLabel: t('label.no_rights', 'You do not have permission to perform this action'),\n\t\t\tonClick: (ev: ActionsClick): void => {\n\t\t\t\tif (ev) ev.preventDefault();\n\t\t\t},\n\t\t\titems: compact([\n\t\t\t\topenEventItem({\n\t\t\t\t\tevent: seriesEvent,\n\t\t\t\t\tcontext\n\t\t\t\t}),\n\t\t\t\teditEventItem({ event: seriesEvent, invite, context }),\n\t\t\t\tdeleteEventItem({ event: seriesEvent, invite, context }),\n\t\t\t\tmoveEventItem({ event: seriesEvent, context }),\n\t\t\t\tcopyEventItem({ event: seriesEvent, invite, context }),\n\t\t\t\tshowOriginal({ event }),\n\t\t\t\tapplyTag({ event, context }),\n\t\t\t\tanswerToEventItem({ event: seriesEvent, invite, context }),\n\t\t\t\tgetExportICSItem({ event: seriesEvent, context })\n\t\t\t])\n\t\t}\n\t];\n};\n\nconst getTrashActions = ({ event, invite, context }: ActionsProps): InstanceActionsItems => {\n\tconst seriesEvent = { ...event, resource: omit(event.resource, 'ridZ') } as EventType;\n\treturn compact([\n\t\topenEventItem({\n\t\t\tevent: seriesEvent,\n\t\t\tcontext\n\t\t}),\n\t\teditEventItem({ event: seriesEvent, invite, context }),\n\t\tdeleteEventItem({ event: seriesEvent, invite, context }),\n\t\tmoveEventItem({ event: seriesEvent, context }),\n\t\tcopyEventItem({ event: seriesEvent, invite, context }),\n\t\tshowOriginal({ event }),\n\t\tapplyTag({ event, context }),\n\t\tgetExportICSItem({ event: seriesEvent, context })\n\t]);\n};\n\nexport const useEventActions = ({\n\tonClose,\n\tevent,\n\tcontext\n}: {\n\tonClose?: () => void;\n\tevent?: EventType;\n\tcontext?: { panelView: PanelView };\n}): InstanceActionsItems | SeriesActionsItems | undefined => {\n\tconst invite = useAppSelector(selectInstanceInvite(event?.resource?.inviteId));\n\tconst dispatch = useAppDispatch();\n\tconst createModal = useModal();\n\tconst tags = useTags();\n\tconst createSnackbar = useSnackbar();\n\tconst calendarFolders = useFoldersMap();\n\tconst _context = useMemo(\n\t\t() => ({\n\t\t\ttags,\n\t\t\tfolders: calendarFolders,\n\t\t\tcreateAndApplyTag,\n\t\t\treplaceHistory,\n\t\t\tcreateModal,\n\t\t\tpanelView: 'app' as PanelView,\n\t\t\tdispatch,\n\t\t\tcreateSnackbar,\n\t\t\tonClose,\n\t\t\t...context\n\t\t}),\n\t\t[calendarFolders, context, createModal, createSnackbar, dispatch, onClose, tags]\n\t);\n\treturn useMemo(() => {\n\t\tif (!event) return undefined;\n\n\t\tconst { isRecurrent, calendar } = event.resource;\n\n\t\tif (calendar.id === FOLDERS.TRASH) {\n\t\t\treturn getTrashActions({ event, invite, context: _context });\n\t\t}\n\t\treturn isRecurrent\n\t\t\t? getRecurrentActionsItems({ event, invite, context: _context })\n\t\t\t: getInstanceActionsItems({ event, invite, context: _context });\n\t}, [_context, event, invite]);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useEffect, useState } from 'react';\n\nimport { getInvite } from '../store/actions/get-invite';\nimport { useAppDispatch, useAppSelector } from '../store/redux/hooks';\nimport { selectInstanceInvite } from '../store/selectors/invites';\nimport { Invite } from '../types/store/invite';\n\nexport const useInvite = (inviteId: string | undefined): Invite | undefined => {\n\tconst [loading, setLoading] = useState(false);\n\tconst dispatch = useAppDispatch();\n\tconst invite = useAppSelector(selectInstanceInvite(inviteId));\n\n\tuseEffect(() => {\n\t\tif (!invite && !loading && inviteId) {\n\t\t\tsetLoading(true);\n\t\t\tdispatch(getInvite({ inviteId })).then(() => {\n\t\t\t\tsetLoading(false);\n\t\t\t});\n\t\t}\n\t}, [dispatch, inviteId, invite, loading]);\n\n\treturn invite;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { Invite } from '../../types/store/invite';\nimport type { RootState } from '../redux';\n\nexport const selectInstanceInvite =\n\t(inviteId?: string): ((state: RootState) => Invite | undefined) =>\n\t(state: RootState): Invite | undefined =>\n\t\tinviteId ? state?.invites?.invites?.[inviteId] : undefined;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { isTrashOrNestedInIt } from '../../carbonio-ui-commons/store/zustand/folder/utils';\nimport { EventType } from '../../types/event';\n\nexport const isOrganizerOrHaveEqualRights = (\n\tevent: EventType,\n\tabsFolderPath: string | undefined\n): boolean =>\n\t!(event.resource.organizer\n\t\t? // if the event is in trash or nested in it\n\t\t\tisTrashOrNestedInIt({ id: event.resource.calendar.id, absFolderPath }) ||\n\t\t\t// if user is owner of the calendar but he is not the organizer\n\t\t\t(!event.resource.calendar.owner && !event.resource.iAmOrganizer) ||\n\t\t\t// if it is inside a shared calendar or user doesn't have write access\n\t\t\t(!!event.resource.calendar.owner &&\n\t\t\t\t(event.resource.calendar.owner !== event.resource.organizer?.email ||\n\t\t\t\t\t!event?.haveWriteAccess))\n\t\t: false);\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\n/**\n * Format a size in byte as human readable\n */\nexport const humanFileSize = (inputSize: number): string => {\n\tif (inputSize === 0) {\n\t\treturn '0 B';\n\t}\n\tconst i = Math.floor(Math.log(inputSize) / Math.log(1024));\n\treturn `${(inputSize / 1024 ** i).toFixed(2).toString()} ${['B', 'KB', 'MB', 'GB', 'TB'][i]}`;\n};\n\nexport const previewType = (contentType: string): 'image' | 'pdf' | undefined =>\n\t// eslint-disable-next-line no-nested-ternary\n\tcontentType?.startsWith('image') ? 'image' : contentType?.endsWith('pdf') ? 'pdf' : undefined;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo, useRef, useState, useContext, ReactElement } from 'react';\n\nimport {\n\tContainer,\n\tIcon,\n\tIconButton,\n\tPadding,\n\tLink,\n\tRow,\n\tText,\n\tTooltip,\n\tuseTheme,\n\tContainerProps,\n\tTextProps,\n\tgetColor\n} from '@zextras/carbonio-design-system';\nimport { PreviewsManagerContext } from '@zextras/carbonio-ui-preview';\nimport { map, filter, reduce, uniqBy, find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport { humanFileSize, previewType } from '../../commons/file-preview';\nimport { getFileExtension, calcColor } from '../../commons/utilities';\n\nconst getAttachmentsLink = (\n\tmessageId: string,\n\tmessageSubject: string,\n\tattachments: Array<string>\n): string => {\n\tif (attachments.length > 1) {\n\t\treturn `/service/home/~/?auth=co&id=${messageId}&filename=${messageSubject}&charset=UTF-8&part=${attachments.join(\n\t\t\t','\n\t\t)}&disp=a&fmt=zip`;\n\t}\n\treturn `/service/home/~/?auth=co&id=${messageId}&part=${attachments.join(',')}&disp=a`;\n};\n\nconst AttachmentHoverBarContainer = styled(Container)`\n\tdisplay: none;\n\theight: 0;\n`;\n\nconst AttachmentContainer = styled(Container)<ContainerProps & { disabled: boolean }>`\n\tborder-radius: 0.125rem;\n\twidth: calc(50% - 0.5rem);\n\ttransition: 0.2s ease-out;\n\tmargin-bottom: ${({ theme }): string => theme.sizes.padding.small};\n\tmargin-right: ${({ theme }): string => theme.sizes.padding.small};\n\tbox-sizing: border-box;\n\t&:hover {\n\t\tbackground-color: ${({ theme, background = 'transparent', disabled }): string =>\n\t\t\tdisabled ? 'gray5' : getColor(`${background}.hover`, theme)};\n\t\t& ${AttachmentHoverBarContainer} {\n\t\t\tdisplay: flex;\n\t\t}\n\t}\n\t&:focus {\n\t\tbackground-color: ${({ theme, background = 'transparent' }): string =>\n\t\t\tgetColor(`${background}.focus`, theme)};\n\t}\n\tcursor: ${({ disabled }): string => (disabled ? 'default' : 'pointer')};\n`;\n\nconst AttachmentLink = styled.a`\n\tmargin-bottom: ${({ theme }): string => theme.sizes.padding.small};\n\tposition: relative;\n\ttext-decoration: none;\n`;\n\nconst AttachmentExtension = styled(Text)<\n\tTextProps & { background?: { extension: string; color: string } }\n>`\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 2rem;\n\theight: 2rem;\n\tborder-radius: ${({ theme }): string => theme.borderRadius};\n\tbackground-color: ${({ theme, disabled, background }): string =>\n\t\tdisabled ? theme.palette.primary.disabled : background?.color || theme.palette.primary.regular};\n\tcolor: ${({ theme }): string => theme.palette.gray6.regular};\n\tfont-size: calc(${({ theme }): string => theme.sizes.font.small} - 0.125rem);\n\ttext-transform: uppercase;\n\tmargin-right: ${({ theme }): string => theme.sizes.padding.small};\n`;\n\ntype AttachmentProps = {\n\tlink?: string;\n\tid?: string;\n\tpart: string;\n\tisEditor: boolean;\n\tremoveAttachment: (arg: string) => void;\n\tdisabled: boolean;\n\ticonColors: Array<{\n\t\textension: string;\n\t\tcolor: string;\n\t}>;\n\tatt: any;\n};\n\nconst Attachment = ({\n\tlink,\n\tid,\n\tpart,\n\tisEditor,\n\tremoveAttachment,\n\tdisabled = false,\n\ticonColors,\n\tatt\n}: AttachmentProps): ReactElement => {\n\tconst { createPreview } = useContext(PreviewsManagerContext);\n\tconst extension = getFileExtension(att);\n\tconst sizeLabel = useMemo(() => humanFileSize(att.size), [att.size]);\n\tconst [t] = useTranslation();\n\tconst inputRef = useRef<HTMLAnchorElement>(null);\n\tconst inputRef2 = useRef<HTMLAnchorElement>(null);\n\tconst downloadAttachment = useCallback(() => {\n\t\tif (inputRef?.current) {\n\t\t\tinputRef.current.click();\n\t\t}\n\t}, [inputRef]);\n\n\tconst preview = useCallback(\n\t\t(ev) => {\n\t\t\tev.preventDefault();\n\t\t\tconst pType = previewType(att.contentType);\n\t\t\tif (pType && link) {\n\t\t\t\tcreatePreview({\n\t\t\t\t\tsrc: link,\n\t\t\t\t\tpreviewType: pType,\n\t\t\t\t\t/** Left Action for the preview */\n\t\t\t\t\tcloseAction: {\n\t\t\t\t\t\tid: 'close',\n\t\t\t\t\t\ticon: 'ArrowBack',\n\t\t\t\t\t\ttooltipLabel: t('preview.close', 'Close Preview')\n\t\t\t\t\t},\n\t\t\t\t\t/** Actions for the preview */\n\t\t\t\t\t// actions: HeaderAction[],\n\t\t\t\t\t/** Extension of the file, shown as info */\n\t\t\t\t\textension: att.filename.substring(att.filename.lastIndexOf('.') + 1),\n\t\t\t\t\t/** Name of the file, shown as info */\n\t\t\t\t\tfilename: att.filename,\n\t\t\t\t\t/** Size of the file, shown as info */\n\t\t\t\t\tsize: humanFileSize(att.size)\n\t\t\t\t});\n\t\t\t} else if (inputRef2.current) {\n\t\t\t\tinputRef2.current.click();\n\t\t\t}\n\t\t},\n\t\t[att, createPreview, link, t]\n\t);\n\treturn (\n\t\t<AttachmentContainer\n\t\t\torientation=\"horizontal\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t\tbackground={disabled ? 'gray5' : 'gray3'}\n\t\t\tdisabled={disabled}\n\t\t\tpadding={{ right: 'medium' }}\n\t\t>\n\t\t\t<Tooltip\n\t\t\t\tkey={isEditor ? `${id}-Edit` : `${id}-Preview`}\n\t\t\t\tlabel={\n\t\t\t\t\tdisabled\n\t\t\t\t\t\t? t('action.save_to_preview', 'Save to preview')\n\t\t\t\t\t\t: t('action.preview', 'Click to preview')\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Row\n\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tonClick={preview}\n\t\t\t\t\ttakeAvailableSpace\n\t\t\t\t>\n\t\t\t\t\t<AttachmentExtension\n\t\t\t\t\t\tbackground={find(iconColors, (ic) => ic.extension === extension)}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t{extension}\n\t\t\t\t\t</AttachmentExtension>\n\t\t\t\t\t<Row orientation=\"vertical\" crossAlignment=\"flex-start\" takeAvailableSpace>\n\t\t\t\t\t\t<Padding style={{ width: '100%' }} bottom=\"extrasmall\">\n\t\t\t\t\t\t\t<Text disabled={disabled}>{att.filename}</Text>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<Text disabled={disabled} color=\"gray1\" size=\"small\">\n\t\t\t\t\t\t\t{sizeLabel}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t</Tooltip>\n\t\t\t<Row orientation=\"horizontal\" crossAlignment=\"center\">\n\t\t\t\t<AttachmentHoverBarContainer orientation=\"horizontal\">\n\t\t\t\t\t{disabled ? (\n\t\t\t\t\t\t<Tooltip key={`${id}-DeletePermanentlyOutline`} label={t('label.delete', 'Delete')}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\ticon={'DeletePermanentlyOutline'}\n\t\t\t\t\t\t\t\tonClick={(): void => removeAttachment(part)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tkey={isEditor ? `${id}-EditOutline` : `${id}-DeletePermanentlyOutline`}\n\t\t\t\t\t\t\tlabel={isEditor ? t('label.delete', 'Delete') : t('label.download', 'Download')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\ticon={isEditor ? 'DeletePermanentlyOutline' : 'DownloadOutline'}\n\t\t\t\t\t\t\t\tonClick={isEditor ? (): void => removeAttachment(part) : downloadAttachment}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t)}\n\t\t\t\t</AttachmentHoverBarContainer>\n\t\t\t</Row>\n\t\t\t{!disabled && (\n\t\t\t\t<AttachmentLink\n\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\tref={inputRef2}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\thref={`/service/home/~/?auth=co&id=${id}&part=${part}`}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<AttachmentLink ref={inputRef} rel=\"noopener\" target=\"_blank\" href={link} />\n\t\t</AttachmentContainer>\n\t);\n};\n\ntype AttachmentsBlockProps = {\n\tattachments: Array<{\n\t\tpart: any;\n\t\tmid: string;\n\t\tfilename: string;\n\t\tcontentType: string;\n\t\tname: string;\n\t\taid?: string;\n\t}>;\n\tid?: string;\n\tsubject: string;\n\tonAttachmentsChange?: (\n\t\targ1: { aid?: string[]; mp: Array<{ part: any; mid: string }> },\n\t\targ2: any\n\t) => void;\n\tisEditor?: boolean;\n\tdisabled?: boolean;\n};\n\nexport const AttachmentsBlock = ({\n\tattachments,\n\tid,\n\tsubject,\n\tonAttachmentsChange,\n\tisEditor = false,\n\tdisabled\n}: AttachmentsBlockProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst [expanded, setExpanded] = useState(false);\n\tconst theme = useTheme();\n\n\tconst attachmentsCount = useMemo(() => attachments.length, [attachments]);\n\n\tconst actionsDownloadLink = useMemo(() => {\n\t\tconst attachmentsParts = map(attachments, 'name');\n\t\treturn id ? getAttachmentsLink(id, subject, attachmentsParts) : undefined;\n\t}, [attachments, id, subject]);\n\n\tconst removeAttachment = useCallback(\n\t\t(part) => {\n\t\t\tconst attachmentFiles = filter(attachments, (p) =>\n\t\t\t\tp.name ? p.name !== part : !p.aid || p.aid !== part\n\t\t\t);\n\t\t\tif (onAttachmentsChange) {\n\t\t\t\tonAttachmentsChange(\n\t\t\t\t\t{\n\t\t\t\t\t\taid: reduce(\n\t\t\t\t\t\t\tattachmentFiles,\n\t\t\t\t\t\t\t(acc, item) => (item.aid ? [...acc, item.aid] : acc),\n\t\t\t\t\t\t\t[] as string[]\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmp: reduce(\n\t\t\t\t\t\t\tattachmentFiles,\n\t\t\t\t\t\t\t(acc, item) => (item.name && id ? [...acc, { part: item.name, mid: id }] : acc),\n\t\t\t\t\t\t\t[] as Array<{ part: any; mid: string }>\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\tattachmentFiles\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[attachments, id, onAttachmentsChange]\n\t);\n\n\tconst removeAllAttachments = useCallback(() => {\n\t\tif (onAttachmentsChange) {\n\t\t\tonAttachmentsChange({ mp: [] }, []);\n\t\t}\n\t}, [onAttachmentsChange]);\n\n\tconst attachToVisualize = useMemo(\n\t\t() => (expanded ? attachments : attachments.slice(0, 2)),\n\t\t[attachments, expanded]\n\t);\n\n\tconst iconColors = useMemo(\n\t\t() =>\n\t\t\tuniqBy(\n\t\t\t\tmap(attachments, (att) => {\n\t\t\t\t\tconst fileExtn = getFileExtension(att);\n\t\t\t\t\tconst color = calcColor(att.contentType, theme);\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\textension: fileExtn,\n\t\t\t\t\t\tcolor\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\t'extension'\n\t\t\t),\n\t\t[attachments, theme]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{attachmentsCount > 0 && (\n\t\t\t\t<Container mainAlignment=\"flex-start\" crossAlignment=\"flex-start\">\n\t\t\t\t\t<Row mainAlignment=\"flex-start\" padding={{ top: 'extrasmall', bottom: 'medium' }}>\n\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t{attachmentsCount < 3 && attachmentsCount > 1 && (\n\t\t\t\t\t\t\t\t<Text color=\"gray1\">\n\t\t\t\t\t\t\t\t\t{t('label.attachment', {\n\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Attachment',\n\t\t\t\t\t\t\t\t\t\tdefaultValue_other: '{{count}} Attachments'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{attachmentsCount === 1 && (\n\t\t\t\t\t\t\t\t<Text color=\"gray1\">{`1 ${t('label.attachment', {\n\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Attachment',\n\t\t\t\t\t\t\t\t\tdefaultValue_other: '{{count}} Attachments'\n\t\t\t\t\t\t\t\t})}`}</Text>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{attachmentsCount > 2 &&\n\t\t\t\t\t\t\t\t(expanded ? (\n\t\t\t\t\t\t\t\t\t<Row onClick={(): void => setExpanded(false)} style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Text color=\"primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t('label.attachment', {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Attachment',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_other: '{{count}} Attachments'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t<Icon icon=\"ArrowIosUpward\" color=\"primary\" />\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Row onClick={(): void => setExpanded(true)} style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Text color=\"primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t('label.show', {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Show',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_other: 'Show all'\n\t\t\t\t\t\t\t\t\t\t\t\t})}{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t{t('label.attachment', {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Attachment',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue_other: '{{count}} Attachments'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t<Icon icon=\"ArrowIosDownward\" color=\"primary\" />\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\thref={isEditor ? undefined : actionsDownloadLink}\n\t\t\t\t\t\t\tonClick={isEditor ? removeAllAttachments : undefined}\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isEditor\n\t\t\t\t\t\t\t\t? t('label.delete', {\n\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Delete',\n\t\t\t\t\t\t\t\t\t\tdefaultValue_other: 'Delete all'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t: t('label.download', {\n\t\t\t\t\t\t\t\t\t\tcount: attachmentsCount,\n\t\t\t\t\t\t\t\t\t\tdefaultValue_one: 'Download',\n\t\t\t\t\t\t\t\t\t\tdefaultValue_other: 'Download all'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Row>\n\n\t\t\t\t\t<Container\n\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\twrap=\"wrap\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{map(attachToVisualize, (att, index) => (\n\t\t\t\t\t\t\t<Attachment\n\t\t\t\t\t\t\t\tkey={`att-${att.filename}-${index}`}\n\t\t\t\t\t\t\t\tlink={id ? getAttachmentsLink(id, subject, [att.name]) : undefined}\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\tpart={att.name ?? att.aid}\n\t\t\t\t\t\t\t\tisEditor={isEditor}\n\t\t\t\t\t\t\t\tremoveAttachment={removeAttachment}\n\t\t\t\t\t\t\t\tdisabled={!att.name ?? disabled}\n\t\t\t\t\t\t\t\ticonColors={iconColors}\n\t\t\t\t\t\t\t\tatt={att}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Container>\n\t\t\t\t</Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Avatar, Container } from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\n\nimport { CalendarsColorType } from '../../types/store/calendars';\n\nconst IconContainer = styled(Avatar)`\n\twidth: 3rem;\n\theight: 3rem;\n`;\n\nexport const ImageAndIconPart = ({\n\ticon = 'CalendarOutline',\n\tcolor\n}: {\n\ticon?: string;\n\tcolor: CalendarsColorType;\n}): ReactElement => (\n\t<Container>\n\t\t<IconContainer icon={icon} label=\"\" background={color.color} />\n\t</Container>\n);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Container, Icon, Padding, Row, Text, Tooltip } from '@zextras/carbonio-design-system';\nimport { isNil, omitBy } from 'lodash';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport { ImageAndIconPart } from './image-and-icon-part';\nimport { useFolder } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { setCalendarColor } from '../../normalizations/normalizations-utils';\nimport { EventType } from '../../types/event';\nimport { Invite } from '../../types/store/invite';\nimport { EquipmentsRow } from '../event-summary-view/equipments-row';\nimport { LocationRow } from '../event-summary-view/location-row';\nimport { MeetingRoomsRow } from '../event-summary-view/meeting-rooms-row';\nimport TagsRow from '../event-summary-view/tags-row';\nimport { TimeInfoRow } from '../event-summary-view/time-info-row';\nimport { VirtualRoomRow } from '../event-summary-view/virtual-room-row';\n\nconst PaddedRow = styled(Row)`\n\tpadding: 0.25rem 0.25rem;\n`;\n\nconst CustomIcon = styled(Icon)`\n\twidth: 1.125rem;\n\theight: 1.125rem;\n`;\n\ntype SubjectProps = {\n\tsubject: string;\n\tcalendarColor: string;\n\tisPrivate: boolean;\n};\n\nconst SubjectRow = ({ subject, calendarColor, isPrivate }: SubjectProps): ReactElement => (\n\t<Container mainAlignment=\"flex-start\" orientation=\"horizontal\">\n\t\t{isPrivate && <Icon icon=\"Lock\" customColor={calendarColor} style={{ padding: '0.25rem' }} />}\n\t\t<Text size=\"small\" overflow=\"break-word\" style={{ fontWeight: '600' }}>\n\t\t\t{subject}\n\t\t</Text>\n\t\t{/* TODO: tags */}\n\t</Container>\n);\n\nconst InviteNeverSentRow = (): ReactElement => {\n\tconst [t] = useTranslation();\n\treturn (\n\t\t<PaddedRow takeAvailableSpace>\n\t\t\t<Icon icon=\"AlertCircleOutline\" color=\"error\" />\n\t\t\t<Padding horizontal=\"small\">\n\t\t\t\t<Text color=\"error\">\n\t\t\t\t\t{t('label.invitation_not_sent', \"You haven't sent the invitation to the attendees yet\")}\n\t\t\t\t</Text>\n\t\t\t</Padding>\n\t\t</PaddedRow>\n\t);\n};\n\nconst CustomIconInfo = ({\n\ttooltipLabel,\n\tcolor,\n\ticon\n}: {\n\ttooltipLabel: string;\n\tcolor: string;\n\ticon: string;\n}): ReactElement => (\n\t<Tooltip label={tooltipLabel} placement=\"left\">\n\t\t<div>\n\t\t\t<CustomIcon icon={icon} size=\"medium\" customColor={color} />\n\t\t</div>\n\t</Tooltip>\n);\n\ntype DetailsPartProps = {\n\tevent: EventType;\n\tsubject: string;\n\tinviteNeverSent: boolean;\n\tisPrivate: boolean;\n\tinvite: Invite;\n};\n\nexport const DetailsPart = ({\n\tevent,\n\tsubject,\n\tinviteNeverSent,\n\tisPrivate,\n\tinvite\n}: DetailsPartProps): ReactElement | null => {\n\tconst calendar = useFolder(event.resource.calendar.id);\n\tconst [t] = useTranslation();\n\n\tconst color = useMemo(\n\t\t() => setCalendarColor({ rgb: calendar?.rgb, color: calendar?.color }),\n\t\t[calendar?.color, calendar?.rgb]\n\t);\n\n\tconst timeData = useMemo(\n\t\t() => ({\n\t\t\t...omitBy(\n\t\t\t\t{\n\t\t\t\t\tallDay: event.allDay,\n\t\t\t\t\tstart: event.start,\n\t\t\t\t\tend: event.end\n\t\t\t\t},\n\t\t\t\tisNil\n\t\t\t),\n\t\t\t...{ timezone: invite?.tz ?? moment.tz.guess() }\n\t\t}),\n\t\t[event.allDay, event.end, event.start, invite?.tz]\n\t);\n\n\tconst locationData = useMemo(\n\t\t() =>\n\t\t\tomitBy(\n\t\t\t\t{\n\t\t\t\t\tclass: invite.class,\n\t\t\t\t\tlocation: invite.location,\n\t\t\t\t\tlocationUrl: invite.locationUrl\n\t\t\t\t},\n\t\t\t\tisNil\n\t\t\t),\n\t\t[invite.class, invite.location, invite.locationUrl]\n\t);\n\treturn calendar ? (\n\t\t<Container\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\twidth=\"fill\"\n\t\t\theight=\"fit\"\n\t\t\tpadding={{ top: 'large', horizontal: 'large', bottom: 'small' }}\n\t\t\tbackground={'gray6'}\n\t\t>\n\t\t\t<Row orientation=\"row\" width=\"fill\" takeAvailableSpace>\n\t\t\t\t<Container width=\"fit\">\n\t\t\t\t\t<ImageAndIconPart color={color} />\n\t\t\t\t</Container>\n\t\t\t\t<Padding right=\"large\" />\n\t\t\t\t<Row orientation=\"row\" width=\"fill\" takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t<Container orientation=\"row\" width=\"fill\" mainAlignment=\"space-between\">\n\t\t\t\t\t\t<SubjectRow subject={subject} calendarColor={color.color} isPrivate={isPrivate} />\n\t\t\t\t\t\t{event.resource.isRecurrent && (\n\t\t\t\t\t\t\t<CustomIconInfo\n\t\t\t\t\t\t\t\ttooltipLabel={t('label.recurrent', 'Recurrent appointment')}\n\t\t\t\t\t\t\t\tcolor={'0'}\n\t\t\t\t\t\t\t\ticon={'Repeat'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Padding right={'small'} />\n\t\t\t\t\t\t<CustomIconInfo tooltipLabel={calendar?.name} color={color.color} icon={'Calendar2'} />\n\t\t\t\t\t</Container>\n\t\t\t\t\t{timeData && <TimeInfoRow timeInfoData={timeData} />}\n\t\t\t\t\t{locationData && locationData?.class !== 'PRI' && (\n\t\t\t\t\t\t<LocationRow locationData={locationData} />\n\t\t\t\t\t)}\n\t\t\t\t\t<MeetingRoomsRow invite={invite} />\n\t\t\t\t\t<EquipmentsRow invite={invite} />\n\t\t\t\t\t{invite?.xprop && <VirtualRoomRow xprop={invite?.xprop} />}\n\t\t\t\t\t{event?.resource?.tags?.length > 0 && <TagsRow event={event} hideIcon />}\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Padding top={'medium'} />\n\t\t\t{inviteNeverSent && <InviteNeverSentRow />}\n\t\t</Container>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo } from 'react';\n\nimport {\n\tContainer,\n\tContainerProps,\n\tDivider,\n\tDropdown,\n\tIcon,\n\tIconButton,\n\tRow,\n\tText,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport { FOLDERS, replaceHistory } from '@zextras/carbonio-shell-ui';\nimport { filter, find, noop } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport { useParams } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { AttachmentsBlock } from './attachments-part';\nimport { DetailsPart } from './details-part';\nimport { MessagePart } from './message-part';\nimport { ParticipantsPart } from './participants-part';\nimport { ReminderPart } from './reminder-part';\nimport { ReplyButtonsPart } from './reply-buttons-part';\nimport { isAnInvite } from '../../actions/appointment-actions-items';\nimport { useFolder } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { LinkFolder } from '../../carbonio-ui-commons/types/folder';\nimport { hasId } from '../../carbonio-ui-commons/worker/handle-message';\nimport { extractBody } from '../../commons/body-message-renderer';\nimport StyledDivider from '../../commons/styled-divider';\nimport { PANEL_VIEW } from '../../constants';\nimport { useEventActions } from '../../hooks/use-event-actions';\nimport { useInvite } from '../../hooks/use-invite';\nimport { getAlarmToString } from '../../normalizations/normalizations-utils';\nimport { normalizeCalendarEvent } from '../../normalizations/normalize-calendar-events';\nimport { useAppSelector } from '../../store/redux/hooks';\nimport { selectAppointment, selectAppointmentInstance } from '../../store/selectors/appointments';\nimport { PanelView } from '../../types/actions';\nimport { EventActionsEnum } from '../../types/enums/event-actions-enum';\nimport { EventType } from '../../types/event';\nimport { RouteParams } from '../../types/route-params';\nimport { ExceptionReference } from '../../types/store/appointments';\n\nconst BodyContainer = styled(Container)`\n\toverflow-y: auto;\n`;\n\nconst AppointmentCardContainer = styled(Container)<ContainerProps & { expanded?: boolean }>`\n\tz-index: 10;\n\tposition: absolute;\n\ttop: 1rem;\n\tright: 1rem;\n\tbottom: 1rem;\n\tleft: max(calc(100% - 42.5rem), 0.75rem);\n\ttransition: left 0.2s ease-in-out;\n\theight: auto;\n\twidth: auto;\n\tmax-height: 100%;\n\tpadding: 0;\n`;\n\nconst ActionButtons = ({\n\tactions,\n\tevent\n}: {\n\tactions: Array<any>;\n\tevent: EventType;\n}): ReactElement | null => {\n\tconst primaryAction = useMemo(() => {\n\t\tif (event) {\n\t\t\tif (hasId(event.resource.calendar, FOLDERS.TRASH)) {\n\t\t\t\treturn find(actions?.[0]?.items ?? actions, ['id', EventActionsEnum.MOVE]);\n\t\t\t}\n\t\t\tif (!event.resource.ridZ) {\n\t\t\t\t// SERIES ACTIONS\n\t\t\t\tconst move = find(actions?.[1]?.items ?? actions, ['id', EventActionsEnum.MOVE]);\n\t\t\t\tconst edit = find(actions?.[1]?.items ?? actions, ['id', EventActionsEnum.EDIT]);\n\t\t\t\tconst copy = find(actions?.[1]?.items ?? actions, ['id', EventActionsEnum.CREATE_COPY]);\n\t\t\t\tif (!event.resource.iAmOrganizer && !event.isShared) {\n\t\t\t\t\tif (!edit.disabled) {\n\t\t\t\t\t\treturn edit;\n\t\t\t\t\t}\n\t\t\t\t\treturn move;\n\t\t\t\t}\n\t\t\t\tif (!edit.disabled) {\n\t\t\t\t\treturn edit;\n\t\t\t\t}\n\t\t\t\treturn copy;\n\t\t\t}\n\t\t\t// INSTANCE ACTIONS\n\t\t\tconst move = find(actions?.[0]?.items ?? actions, ['id', EventActionsEnum.MOVE]);\n\t\t\tconst edit = find(actions?.[0]?.items ?? actions, ['id', EventActionsEnum.EDIT]);\n\t\t\tconst copy = find(actions?.[0]?.items ?? actions, ['id', EventActionsEnum.CREATE_COPY]);\n\t\t\tif (!event.resource.iAmOrganizer && !event.isShared) {\n\t\t\t\tif (!edit.disabled) {\n\t\t\t\t\treturn edit;\n\t\t\t\t}\n\t\t\t\treturn move ?? copy;\n\t\t\t}\n\t\t\tif (!edit.disabled) {\n\t\t\t\treturn edit;\n\t\t\t}\n\t\t\treturn copy;\n\t\t}\n\t\treturn undefined;\n\t}, [actions, event]);\n\n\tconst otherActions = useMemo(() => {\n\t\tif (event && primaryAction) {\n\t\t\tif (!event.resource.ridZ) {\n\t\t\t\treturn filter(\n\t\t\t\t\tactions?.[1]?.items ?? actions,\n\t\t\t\t\t(a) =>\n\t\t\t\t\t\t!a.disabled &&\n\t\t\t\t\t\ta.id !== EventActionsEnum.EXPAND &&\n\t\t\t\t\t\ta.id !== EventActionsEnum.ACCEPT &&\n\t\t\t\t\t\ta.id !== EventActionsEnum.TENTATIVE &&\n\t\t\t\t\t\ta.id !== EventActionsEnum.DECLINE &&\n\t\t\t\t\t\ta.id !== EventActionsEnum.PROPOSE_NEW_TIME &&\n\t\t\t\t\t\ta.id !== primaryAction.id\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn filter(\n\t\t\t\tactions?.[0]?.items ?? actions,\n\t\t\t\t(a) =>\n\t\t\t\t\t!a.disabled &&\n\t\t\t\t\ta.id !== EventActionsEnum.EXPAND &&\n\t\t\t\t\ta.id !== EventActionsEnum.ACCEPT &&\n\t\t\t\t\ta.id !== EventActionsEnum.TENTATIVE &&\n\t\t\t\t\ta.id !== EventActionsEnum.DECLINE &&\n\t\t\t\t\ta.id !== EventActionsEnum.PROPOSE_NEW_TIME &&\n\t\t\t\t\ta.id !== primaryAction.id\n\t\t\t);\n\t\t}\n\t\treturn undefined;\n\t}, [actions, event, primaryAction]);\n\n\treturn primaryAction ? (\n\t\t<Row wrap=\"nowrap\" height=\"100%\" mainAlignment=\"flex-end\" style={{ maxWidth: '10rem' }}>\n\t\t\t<Row height=\"2.5rem\" mainAlignment=\"flex-start\" style={{ overflow: 'hidden' }}>\n\t\t\t\t{primaryAction && primaryAction?.items ? (\n\t\t\t\t\t<Dropdown items={primaryAction.items} key={`button ${primaryAction.id}`}>\n\t\t\t\t\t\t<Row takeAvailableSpace>\n\t\t\t\t\t\t\t<Tooltip placement=\"top\" label={primaryAction.label}>\n\t\t\t\t\t\t\t\t<IconButton icon=\"TagsMoreOutline\" onClick={noop} />\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t) : (\n\t\t\t\t\t<Tooltip placement=\"top\" label={primaryAction.label}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tkey={primaryAction.id}\n\t\t\t\t\t\t\ticon={primaryAction.icon}\n\t\t\t\t\t\t\tonClick={primaryAction.onClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t)}\n\t\t\t</Row>\n\t\t\t{otherActions && otherActions?.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t{otherActions.length > 1 ? (\n\t\t\t\t\t\t<Dropdown items={otherActions}>\n\t\t\t\t\t\t\t<Row takeAvailableSpace>\n\t\t\t\t\t\t\t\t<IconButton icon=\"MoreVertical\" onClick={noop} />\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Tooltip placement=\"top\" label={otherActions?.[0]?.label}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tkey={otherActions?.[0]?.id}\n\t\t\t\t\t\t\t\ticon={otherActions?.[0]?.icon}\n\t\t\t\t\t\t\t\tonClick={otherActions?.[0]?.onClick}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Row>\n\t) : null;\n};\n\nexport const DisplayerHeader = ({\n\tevent,\n\tpanelView\n}: {\n\tevent: EventType;\n\tpanelView: PanelView;\n}): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst close = useCallback(() => {\n\t\treplaceHistory('');\n\t}, []);\n\tconst actions = useEventActions({ onClose: close, event, context: { panelView } });\n\n\treturn (\n\t\t<>\n\t\t\t<Row\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tbackground={'gray5'}\n\t\t\t\twidth=\"fill\"\n\t\t\t\theight=\"3rem\"\n\t\t\t\tpadding={{ vertical: 'small' }}\n\t\t\t>\n\t\t\t\t<Row padding={{ horizontal: 'large' }}>\n\t\t\t\t\t<Icon icon={'CalendarModOutline'} />\n\t\t\t\t</Row>\n\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t<Text size=\"medium\" overflow=\"ellipsis\">\n\t\t\t\t\t\t{event.title || t('label.no_subject', 'No subject')}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t\t<Row padding={{ right: 'extrasmall' }}>\n\t\t\t\t\t<IconButton size=\"medium\" icon=\"CloseOutline\" onClick={close} />\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Divider />\n\t\t\t<Row\n\t\t\t\tmainAlignment=\"flex-end\"\n\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tbackground={'gray5'}\n\t\t\t\twidth=\"fill\"\n\t\t\t\theight=\"3rem\"\n\t\t\t\tpadding={{ vertical: 'small' }}\n\t\t\t>\n\t\t\t\t<Row>{actions && <ActionButtons actions={actions} event={event} />}</Row>\n\t\t\t</Row>\n\t\t</>\n\t);\n};\n\nexport default function EventPanelView(): ReactElement | null {\n\tconst { calendarId, apptId, ridZ } = useParams<RouteParams>();\n\tconst calendar = useFolder(calendarId);\n\tconst appointment = useAppSelector(selectAppointment(apptId));\n\tconst instance = useAppSelector(selectAppointmentInstance(apptId, ridZ));\n\tconst invite = useInvite((instance as ExceptionReference)?.inviteId ?? appointment?.inviteId);\n\n\tconst event = useMemo(() => {\n\t\tif (calendar && appointment && invite)\n\t\t\treturn normalizeCalendarEvent({ calendar, appointment, instance, invite });\n\t\treturn undefined;\n\t}, [appointment, calendar, instance, invite]);\n\n\tconst alarmString = useMemo(\n\t\t() => getAlarmToString(event?.resource?.alarmData),\n\t\t[event?.resource?.alarmData]\n\t);\n\n\tconst messageHasABody = useMemo(() => {\n\t\tconst body = extractBody(invite?.textDescription?.[0]?._content);\n\t\t/* TODO: appointments descriptions needs a refactor. Currently appointments descriptions are created with a double\n\t\t    quotes inside breaking the first condition */\n\t\treturn body?.length > 0 && body !== '\"';\n\t}, [invite?.textDescription]);\n\n\tif (!event || !invite) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<AppointmentCardContainer mainAlignment=\"flex-start\">\n\t\t\t<DisplayerHeader event={event} panelView={PANEL_VIEW.APP} />\n\t\t\t<Container\n\t\t\t\tpadding={{ all: 'none' }}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\theight=\"calc(100% - 3rem)\"\n\t\t\t\tstyle={{ overflow: 'auto' }}\n\t\t\t>\n\t\t\t\t<BodyContainer\n\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\theight=\"fill\"\n\t\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\t\tbackground={'gray5'}\n\t\t\t\t>\n\t\t\t\t\t<DetailsPart\n\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\tsubject={event.title}\n\t\t\t\t\t\tisPrivate={event.resource.class === 'PRI' ?? false}\n\t\t\t\t\t\tinviteNeverSent={invite.neverSent}\n\t\t\t\t\t\tinvite={invite}\n\t\t\t\t\t/>\n\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t{event.resource.organizer &&\n\t\t\t\t\t\t!event.resource.iAmOrganizer &&\n\t\t\t\t\t\t!(calendar as LinkFolder)?.owner &&\n\t\t\t\t\t\tisAnInvite(event) && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ReplyButtonsPart event={event} invite={invite} />\n\t\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t{invite.organizer && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ParticipantsPart\n\t\t\t\t\t\t\t\tinvite={invite}\n\t\t\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\t\t\torganizer={invite.organizer}\n\t\t\t\t\t\t\t\tparticipants={invite?.participants}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{messageHasABody && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<MessagePart fullInvite={invite} inviteId={invite.id} parts={invite.parts} />\n\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{alarmString && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ReminderPart alarmString={alarmString} invite={invite} event={event} />\n\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{invite?.attachmentFiles.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Container padding={{ top: 'small', horizontal: 'large' }} background={'gray6'}>\n\t\t\t\t\t\t\t\t<AttachmentsBlock\n\t\t\t\t\t\t\t\t\tattachments={invite?.attachmentFiles}\n\t\t\t\t\t\t\t\t\tid={invite.id}\n\t\t\t\t\t\t\t\t\tsubject={event.title}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t<StyledDivider />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</BodyContainer>\n\t\t\t</Container>\n\t\t</AppointmentCardContainer>\n\t);\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport { Container, Icon } from '@zextras/carbonio-design-system';\n\nimport BodyMessageRenderer from '../../commons/body-message-renderer';\nimport { Invite } from '../../types/store/invite';\n\ntype MessageProps = {\n\tfullInvite: Invite;\n\tinviteId: string;\n\tparts: any;\n};\n\nexport const MessagePart = ({ fullInvite, inviteId, parts }: MessageProps): ReactElement => (\n\t<Container\n\t\torientation=\"horizontal\"\n\t\tmainAlignment=\"flex-start\"\n\t\tcrossAlignment=\"flex-start\"\n\t\twidth=\"fill\"\n\t\theight=\"fit\"\n\t\tpadding={{ all: 'large' }}\n\t\tbackground=\"gray6\"\n\t>\n\t\t<Icon icon=\"MessageSquareOutline\" />\n\t\t<Container\n\t\t\torientation=\"vertical\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\twidth=\"fill\"\n\t\t\theight=\"fit\"\n\t\t\tpadding={{ left: 'small' }}\n\t\t>\n\t\t\t<BodyMessageRenderer fullInvite={fullInvite} inviteId={inviteId} parts={parts} />\n\t\t</Container>\n\t</Container>\n);\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { CreateSnackbarFn } from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\n\nimport { mailToContact } from '../../shared/invite-response/invite-response';\n\n// todo: this is not using redux! convert to regular async function\nexport const copyEmailToClipboard = (email: string, createSnackbar: CreateSnackbarFn): void => {\n\tnavigator.clipboard.writeText(email).then(() => {\n\t\tcreateSnackbar({\n\t\t\tkey: `clipboard-copy-success`,\n\t\t\treplace: true,\n\t\t\ttype: 'success',\n\t\t\thideButton: true,\n\t\t\tlabel: t('snackbar.email_copied_to_clipboard', 'Email copied to clipboard.'),\n\t\t\tautoHideTimeout: 3000\n\t\t});\n\t});\n};\n\nexport const sendMsg = (email: string, name: string): void => {\n\tconst obj = {\n\t\temail: {\n\t\t\temail: {\n\t\t\t\tmail: email\n\t\t\t}\n\t\t},\n\t\tfirstName: name ?? email,\n\t\tmiddleName: ''\n\t};\n\tmailToContact(obj)\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\t?.onClick?.();\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport {\n\tAvatar,\n\tContainer,\n\tIconButton,\n\tRow,\n\tText,\n\tChip,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport { t } from '@zextras/carbonio-shell-ui';\nimport { isEmpty } from 'lodash';\n\nimport { copyEmailToClipboard, sendMsg } from '../../store/actions/participant-displayer-actions';\nimport { InviteParticipant, InviteParticipants } from '../../types/store/invite';\n\nexport const DisplayedParticipant = ({\n\tparticipant\n}: {\n\tparticipant: InviteParticipant;\n}): ReactElement => {\n\tconst createSnackbar = useSnackbar();\n\treturn (\n\t\t<Row\n\t\t\tdata-testid={'DisplayedParticipant'}\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\tpadding={{ vertical: 'small' }}\n\t\t>\n\t\t\t<Avatar\n\t\t\t\tlabel={participant.name || participant.email}\n\t\t\t\tstyle={{ width: '3rem', height: '3rem' }}\n\t\t\t/>\n\t\t\t<Row\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\ttakeAvailableSpace\n\t\t\t\tpadding={{ left: 'small' }}\n\t\t\t>\n\t\t\t\t<Text>{participant.name || participant.email}</Text>\n\n\t\t\t\t<Row\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\tpadding={{ top: 'extrasmall', bottom: 'extrasmall' }}\n\t\t\t\t>\n\t\t\t\t\t<Chip\n\t\t\t\t\t\tlabel={participant.email}\n\t\t\t\t\t\tbackground={'gray3'}\n\t\t\t\t\t\tcolor=\"text\"\n\t\t\t\t\t\tdata-testid={'Chip'}\n\t\t\t\t\t\thasAvatar={false}\n\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'action1',\n\t\t\t\t\t\t\t\tlabel: t('message.send_email', 'Send e-mail'),\n\t\t\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\t\t\ticon: 'EmailOutline',\n\t\t\t\t\t\t\t\tonClick: () => sendMsg(participant.email, participant.name)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'action2',\n\t\t\t\t\t\t\t\tlabel: t('message.copy', 'Copy'),\n\t\t\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\t\t\ticon: 'Copy',\n\t\t\t\t\t\t\t\tonClick: () => copyEmailToClipboard(participant.email, createSnackbar)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</Row>\n\n\t\t\t\t<Text size=\"small\" color=\"secondary\">\n\t\t\t\t\t{`(${\n\t\t\t\t\t\tparticipant.isOptional\n\t\t\t\t\t\t\t? t('label.optional', 'Optional')\n\t\t\t\t\t\t\t: t('label.required', 'Required')\n\t\t\t\t\t})`}\n\t\t\t\t</Text>\n\t\t\t</Row>\n\t\t</Row>\n\t);\n};\n\ntype DropdownProps = {\n\tlabel: string;\n\tparticipants?: Array<InviteParticipant>;\n\twidth: string;\n};\n\nconst Dropdown = ({ label, participants, width }: DropdownProps): ReactElement | null => {\n\tconst [isExpanded, setIsExpanded] = useState(true);\n\tconst toggleExpanded = useCallback(() => setIsExpanded((prevExpanded) => !prevExpanded), []);\n\n\tconst displayedParticipants = useMemo(\n\t\t() => (\n\t\t\t<Container mainAlignment=\"space-between\" crossAlignment=\"flex-start\" wrap=\"wrap\" width=\"fill\">\n\t\t\t\t{participants?.map((participant) => (\n\t\t\t\t\t<DisplayedParticipant participant={participant} key={participant.email} />\n\t\t\t\t))}\n\t\t\t</Container>\n\t\t),\n\t\t[participants]\n\t);\n\n\treturn participants ? (\n\t\t<>\n\t\t\t{participants?.length > 0 && (\n\t\t\t\t<Container\n\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight=\"fit\"\n\t\t\t\t>\n\t\t\t\t\t<Row mainAlignment=\"flex-start\" takeAvailableSpace>\n\t\t\t\t\t\t<Text size=\"small\">{label}</Text>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ticon={isExpanded ? 'ChevronUp' : 'ChevronDown'}\n\t\t\t\t\t\t\tonClick={toggleExpanded}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Row>\n\t\t\t\t\t{isExpanded && displayedParticipants}\n\t\t\t\t</Container>\n\t\t\t)}\n\t\t</>\n\t) : null;\n};\n\nexport const ParticipantsDisplayer = ({\n\tparticipants\n}: {\n\tparticipants: InviteParticipants;\n}): ReactElement | null => {\n\tconst width = Object.keys(participants).length === 1 ? '100%' : '50%';\n\tif (isEmpty(participants)) return null;\n\tif (Object.keys(participants).length === 0) return null;\n\treturn (\n\t\t<Container\n\t\t\twrap=\"wrap\"\n\t\t\torientation=\"horizontal\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\twidth=\"fill\"\n\t\t\theight=\"fit\"\n\t\t\tpadding={{ top: 'large' }}\n\t\t>\n\t\t\t{participants?.AC && participants?.AC?.length > 0 && (\n\t\t\t\t<Dropdown\n\t\t\t\t\tlabel={t('participants.AC_with_count', {\n\t\t\t\t\t\tcount: participants.AC?.length ?? 0,\n\t\t\t\t\t\tdefaultValue_one: 'Accepted',\n\t\t\t\t\t\tdefaultValue_other: 'Accepted ({{count}})'\n\t\t\t\t\t}).toUpperCase()}\n\t\t\t\t\tparticipants={participants.AC}\n\t\t\t\t\twidth={width}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{participants?.NE && participants?.NE?.length > 0 && (\n\t\t\t\t<Dropdown\n\t\t\t\t\tlabel={t('participants.NE_with_count', {\n\t\t\t\t\t\tcount: participants.NE?.length ?? 0,\n\t\t\t\t\t\tdefaultValue_one: \"Didn't answer ({{count}})\",\n\t\t\t\t\t\tdefaultValue_other: \"Didn't answer ({{count}})\"\n\t\t\t\t\t}).toUpperCase()}\n\t\t\t\t\tparticipants={participants.NE}\n\t\t\t\t\twidth={width}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{participants?.TE && participants?.TE?.length > 0 && (\n\t\t\t\t<Dropdown\n\t\t\t\t\tlabel={t('participants.TE_with_count', {\n\t\t\t\t\t\tcount: participants?.TE?.length ?? 0,\n\t\t\t\t\t\tdefaultValue_one: 'Tentative',\n\t\t\t\t\t\tdefaultValue_other: 'Tentative ({{count}})'\n\t\t\t\t\t}).toUpperCase()}\n\t\t\t\t\tparticipants={participants.TE}\n\t\t\t\t\twidth={width}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{participants?.DE && participants?.DE?.length > 0 && (\n\t\t\t\t<Dropdown\n\t\t\t\t\tlabel={t('participants.DE_with_count', {\n\t\t\t\t\t\tcount: participants.DE?.length ?? 0,\n\t\t\t\t\t\tdefaultValue_one: 'Declined',\n\t\t\t\t\t\tdefaultValue_other: 'Declined ({{count}})'\n\t\t\t\t\t}).toUpperCase()}\n\t\t\t\t\tparticipants={participants.DE}\n\t\t\t\t\twidth={width}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Container, Row, Text } from '@zextras/carbonio-design-system';\nimport { Account, t, useUserAccount } from '@zextras/carbonio-shell-ui';\nimport { map, reduce } from 'lodash';\nimport { Trans } from 'react-i18next';\n\nimport { EventType } from '../../types/event';\nimport { InviteParticipant, InviteParticipants } from '../../types/store/invite';\n\ntype ParticipantProps = { participant: InviteParticipants; event: EventType };\n\nconst DisplayParticipantsVisitor = ({ participant }: ParticipantProps): ReactElement => {\n\tconst users = reduce(\n\t\tparticipant,\n\t\t(acc, v) => (v ? [...acc, ...v] : acc),\n\t\t[] as Array<InviteParticipant>\n\t);\n\treturn (\n\t\t<Container\n\t\t\torientation=\"horizontal\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\twrap=\"wrap\"\n\t\t\twidth=\"fill\"\n\t\t\tpadding={{ horizontal: 'medium', bottom: 'extrasmall' }}\n\t\t>\n\t\t\t{users.length > 2 ? (\n\t\t\t\t<>\n\t\t\t\t\t<Text size=\"small\" color=\"secondary\" overflow=\"break-word\">\n\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t{users[0].email} ,{users[1].email}{' '}\n\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\ti18nKey=\"participants.visitors\"\n\t\t\t\t\t\t\t\tdefaults=\"and other {{others}} attendees\"\n\t\t\t\t\t\t\t\tvalues={{ others: users.length - 2 }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</strong>{' '}\n\t\t\t\t\t\t{t(`participants.Invited_Visitor`, 'have been invited')}\n\t\t\t\t\t</Text>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<Text size=\"small\" color=\"secondary\" overflow=\"break-word\">\n\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t{map(users, (user, index) => (\n\t\t\t\t\t\t\t\t<React.Fragment key={user.email || user.name}>\n\t\t\t\t\t\t\t\t\t{user.email || 'default'} {index === users.length - 1 ? null : <>,</>}\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</strong>{' '}\n\t\t\t\t\t\t{t(`participants.Invited_Visitor`, 'have been invited')}\n\t\t\t\t\t</Text>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Container>\n\t);\n};\n\ntype DisplayMultipleAttendee = {\n\tparticipant: Array<InviteParticipant>;\n\tmessage: string;\n\tloggedInUser: Account;\n};\n\nconst DisplayMultipleAttendee = ({\n\tparticipant,\n\tmessage,\n\tloggedInUser\n}: DisplayMultipleAttendee): ReactElement => (\n\t<Row>\n\t\t<Text size=\"small\" color=\"secondary\" overflow=\"break-word\">\n\t\t\t<strong>\n\t\t\t\t{' '}\n\t\t\t\t{map(participant, (user, index) => (\n\t\t\t\t\t<React.Fragment key={user.name || user.email}>\n\t\t\t\t\t\t{user.name === loggedInUser.name || user.email === loggedInUser.name ? (\n\t\t\t\t\t\t\t<> {t('message.you', 'You')}</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<> {user.name || user.email} </>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{index === participant.length - 1 ? null : <>,</>}\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t))}\n\t\t\t</strong>{' '}\n\t\t\t{message}\n\t\t</Text>\n\t</Row>\n);\n\nconst calculateSize = (participants: InviteParticipants): number => {\n\tlet pt = 0;\n\tObject.keys(participants).map((obj) => {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tparticipants[obj].map(() => {\n\t\t\tpt += 1;\n\t\t\treturn 0;\n\t\t});\n\t\treturn 0;\n\t});\n\treturn pt;\n};\n\ntype DisplayedParticipantType = {\n\tparticipant: InviteParticipant;\n\tmessage: string;\n\tloggedInUser: Account;\n};\n\nconst DisplayedParticipant = ({\n\tparticipant,\n\tmessage,\n\tloggedInUser\n}: DisplayedParticipantType): ReactElement => (\n\t<Container\n\t\tmainAlignment=\"flex-start\"\n\t\tcrossAlignment=\"flex-start\"\n\t\tpadding={{ bottom: 'extrasmall' }}\n\t>\n\t\t<Text overflow=\"ellipsis\" size=\"small\" color=\"secondary\">\n\t\t\t{participant.name === loggedInUser.name || participant.email === loggedInUser.name ? (\n\t\t\t\t<strong> {t('message.you', 'You')}</strong>\n\t\t\t) : (\n\t\t\t\t<strong> {participant.name || participant.email} </strong>\n\t\t\t)}{' '}\n\t\t\t{message}\n\t\t</Text>\n\t</Container>\n);\ntype ComponentProps = {\n\tlabel: ReactElement;\n\tparticipants?: Array<InviteParticipant>;\n\twidth?: string;\n\tmessage: string;\n\tevent: EventType;\n\tpt: number;\n\tloggedInUser: Account;\n};\n\nconst Component = ({\n\tlabel,\n\tparticipants = [],\n\twidth,\n\tmessage,\n\tevent,\n\tpt,\n\tloggedInUser\n}: ComponentProps): ReactElement | null => {\n\tconst displayedParticipants = useMemo(\n\t\t() => (\n\t\t\t<Container orientation=\"horizontal\" crossAlignment=\"flex-start\" wrap=\"wrap\" width=\"fill\">\n\t\t\t\t{participants.map((participant) => (\n\t\t\t\t\t<DisplayedParticipant\n\t\t\t\t\t\tparticipant={participant}\n\t\t\t\t\t\tkey={participant.email}\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tloggedInUser={loggedInUser}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</Container>\n\t\t),\n\t\t[participants, loggedInUser, message]\n\t);\n\treturn participants.length > 0 ? (\n\t\t<Container\n\t\t\torientation=\"vertical\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\twidth={width}\n\t\t\tpadding={{ horizontal: 'medium', bottom: 'extrasmall' }}\n\t\t>\n\t\t\t{event?.resource?.iAmOrganizer && (\n\t\t\t\t<>\n\t\t\t\t\t{pt > 2 ? (\n\t\t\t\t\t\t<Text size=\"small\" color=\"secondary\" overflow=\"break-word\">\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tdisplayedParticipants\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{!event?.resource?.iAmOrganizer && !event?.resource?.calendar?.owner && (\n\t\t\t\t<>\n\t\t\t\t\t{' '}\n\t\t\t\t\t{pt > 2 ? (\n\t\t\t\t\t\t<DisplayMultipleAttendee\n\t\t\t\t\t\t\tparticipant={participants}\n\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\tloggedInUser={loggedInUser}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tdisplayedParticipants\n\t\t\t\t\t)}{' '}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Container>\n\t) : null;\n};\n\ntype ParticipantsDisplayerSmallType = {\n\tevent: EventType;\n\tparticipants?: InviteParticipants;\n};\n\nexport const ParticipantsDisplayerSmall = ({\n\tparticipants,\n\tevent\n}: ParticipantsDisplayerSmallType): ReactElement | null => {\n\tconst loggedInUser = useUserAccount();\n\n\tif (!participants || Object.keys(participants)?.length === 0) return null;\n\tconst pt = calculateSize(participants);\n\treturn (\n\t\t<Container\n\t\t\twrap=\"wrap\"\n\t\t\torientation=\"horizontal\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\twidth=\"fill\"\n\t\t\tpadding={{ horizontal: 'medium' }}\n\t\t>\n\t\t\t{event?.resource?.iAmOrganizer && !event?.resource?.calendar?.owner ? (\n\t\t\t\t<DisplayParticipantsVisitor participant={participants} event={event} />\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<Component\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\ti18nKey=\"participants.Attendees_accepted_count\"\n\t\t\t\t\t\t\t\tcount={participants.AC?.length ?? 0}\n\t\t\t\t\t\t\t\tvalues={{ count: participants.AC?.length ?? 0 }}\n\t\t\t\t\t\t\t\tdefaults=\"<strong>{{count}} attendee </strong> has accepted\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmessage={t('participants.Accepted', 'accepted')}\n\t\t\t\t\t\tparticipants={participants.AC}\n\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\tpt={pt}\n\t\t\t\t\t\tloggedInUser={loggedInUser}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Component\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\ti18nKey=\"participants.Attendees_not_answered_count\"\n\t\t\t\t\t\t\t\tcount={participants.NE?.length ?? 0}\n\t\t\t\t\t\t\t\tvalues={{ count: participants.NE?.length ?? 0 }}\n\t\t\t\t\t\t\t\tdefaults=\"<strong>1 attendee </strong> has not answered\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparticipants={participants.NE}\n\t\t\t\t\t\tmessage={t('participants.Not_answered', \"didn't answer\")}\n\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\tpt={pt}\n\t\t\t\t\t\tloggedInUser={loggedInUser}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Component\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\ti18nKey=\"participants.Attendees_tentative_count\"\n\t\t\t\t\t\t\t\tcount={participants.TE?.length ?? 0}\n\t\t\t\t\t\t\t\tvalues={{ count: participants.TE?.length ?? 0 }}\n\t\t\t\t\t\t\t\tdefaults=\"<strong>1 attendee </strong> has accepted as tentative\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparticipants={participants.TE}\n\t\t\t\t\t\tmessage={t('participants.Tentative', 'accepted as tentative')}\n\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\tpt={pt}\n\t\t\t\t\t\tloggedInUser={loggedInUser}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Component\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\ti18nKey=\"participants.Attendees_declined_count\"\n\t\t\t\t\t\t\t\tcount={participants.DE?.length ?? 0}\n\t\t\t\t\t\t\t\tvalues={{ count: participants.DE?.length ?? 0 }}\n\t\t\t\t\t\t\t\tdefaults=\"<strong>1 attendee </strong> has declined\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparticipants={participants.DE}\n\t\t\t\t\t\tmessage={t('participants.Declined', 'declined')}\n\t\t\t\t\t\tevent={event}\n\t\t\t\t\t\tpt={pt}\n\t\t\t\t\t\tloggedInUser={loggedInUser}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Avatar, Container, Row, Text, Chip, useSnackbar } from '@zextras/carbonio-design-system';\nimport { useUserAccount, t } from '@zextras/carbonio-shell-ui';\nimport { Trans } from 'react-i18next';\n\nimport { ParticipantsDisplayer } from './participants-displayer';\nimport { ParticipantsDisplayerSmall } from './participants-displayer-small';\nimport { useFolder } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { LinkFolder } from '../../carbonio-ui-commons/types/folder';\nimport { copyEmailToClipboard, sendMsg } from '../../store/actions/participant-displayer-actions';\nimport { EventType } from '../../types/event';\nimport { Invite, InviteOrganizer, InviteParticipants } from '../../types/store/invite';\n\ntype ParticipantProps = {\n\tinvite: Invite;\n\tevent: EventType;\n\torganizer: InviteOrganizer;\n\tparticipants: InviteParticipants;\n\tisSummary?: boolean;\n};\n\nexport const ParticipantsPart = ({\n\tinvite,\n\tevent,\n\torganizer,\n\tparticipants,\n\tisSummary\n}: ParticipantProps): ReactElement | null => {\n\tconst account = useUserAccount();\n\tconst calendar = useFolder(invite.ciFolder);\n\tconst createSnackbar = useSnackbar();\n\tconst iAmAttendee = useMemo(\n\t\t() => (!invite.isOrganizer && !(calendar as LinkFolder)?.owner) ?? false,\n\t\t[calendar, invite.isOrganizer]\n\t);\n\treturn organizer ? (\n\t\t<Container\n\t\t\torientation=\"vertical\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\twidth=\"fill\"\n\t\t\theight=\"fit\"\n\t\t\tpadding={isSummary ? { vertical: 'small' } : { horizontal: 'large', vertical: 'medium' }}\n\t\t\tbackground={'gray6'}\n\t\t>\n\t\t\t{invite?.organizer?.a === account.name && (\n\t\t\t\t<Row mainAlignment=\"flex-start\" crossAlignment=\"center\" width=\"fill\">\n\t\t\t\t\t<Avatar\n\t\t\t\t\t\tsize={isSummary ? 'small' : 'large'}\n\t\t\t\t\t\tlabel={account.name ?? account.displayName ?? ''}\n\t\t\t\t\t/>\n\t\t\t\t\t<Text style={{ padding: '0 0.5rem' }}>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"message.you_are_organizer\"\n\t\t\t\t\t\t\tdefaults=\"<Row><Text> <BoldText> You  </BoldText> are the organizer </Text></Row>\"\n\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\tRow: <Row />,\n\t\t\t\t\t\t\t\tText: <Text color=\"secondary\" />,\n\t\t\t\t\t\t\t\tBoldText: <span style={{ fontWeight: 'bold', color: '#333333' }} />\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t)}\n\t\t\t{!invite.isOrganizer && !(calendar as LinkFolder)?.owner ? (\n\t\t\t\t<Row mainAlignment=\"flex-start\" crossAlignment=\"flex-start\" padding={{ vertical: 'small' }}>\n\t\t\t\t\t<Avatar\n\t\t\t\t\t\tlabel={organizer.d ?? organizer.a ?? organizer.url ?? ''}\n\t\t\t\t\t\tsize={isSummary ? 'small' : 'large'}\n\t\t\t\t\t/>\n\t\t\t\t\t<Row\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\t\t\ttakeAvailableSpace\n\t\t\t\t\t\tpadding={{ left: 'small' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\ti18nKey=\"message.somebody_invited_you\"\n\t\t\t\t\t\t\t\tdefaults=\"<strong>{{somebody}}</strong> invited you\"\n\t\t\t\t\t\t\t\tvalues={{ somebody: organizer.d || organizer.a || organizer.url }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\t\tpadding={{ top: 'extrasmall', bottom: 'extrasmall' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\t\tlabel={organizer.a || organizer.d}\n\t\t\t\t\t\t\t\tbackground={'gray3'}\n\t\t\t\t\t\t\t\tcolor=\"text\"\n\t\t\t\t\t\t\t\tdata-testid={'Chip'}\n\t\t\t\t\t\t\t\thasAvatar={false}\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid: 'action1',\n\t\t\t\t\t\t\t\t\t\tlabel: t('message.send_email', 'Send e-mail'),\n\t\t\t\t\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\t\t\t\t\ticon: 'EmailOutline',\n\t\t\t\t\t\t\t\t\t\tonClick: () => sendMsg(organizer.a, organizer.d)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid: 'action2',\n\t\t\t\t\t\t\t\t\t\tlabel: t('message.copy', 'Copy'),\n\t\t\t\t\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\t\t\t\t\ticon: 'Copy',\n\t\t\t\t\t\t\t\t\t\tonClick: () => copyEmailToClipboard(organizer.a, createSnackbar)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t) : (\n\t\t\t\tinvite?.organizer?.a !== account.name &&\n\t\t\t\t!iAmAttendee && (\n\t\t\t\t\t<Row mainAlignment=\"flex-start\" crossAlignment=\"center\" width=\"fill\">\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\tsize={isSummary ? 'small' : 'large'}\n\t\t\t\t\t\t\tlabel={organizer.d ?? organizer.a ?? organizer.url ?? ''}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Text style={{ padding: '0 0.5rem' }}>\n\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\ti18nKey=\"message.somebody_is_organizer\"\n\t\t\t\t\t\t\t\tdefaults=\"<strong>{{somebody}}</strong> is the organizer\"\n\t\t\t\t\t\t\t\tvalues={{ somebody: organizer.d || organizer.a }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t)\n\t\t\t)}\n\t\t\t{isSummary ? (\n\t\t\t\t<ParticipantsDisplayerSmall participants={participants} event={event} />\n\t\t\t) : (\n\t\t\t\t<ParticipantsDisplayer participants={participants} />\n\t\t\t)}\n\t\t</Container>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo } from 'react';\n\nimport { Container, Button, Dropdown } from '@zextras/carbonio-design-system';\nimport { noop } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { useFoldersMap } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { generateEditor } from '../../commons/editor-generator';\nimport { modifyAppointment } from '../../store/actions/new-modify-appointment';\nimport { useAppDispatch } from '../../store/redux/hooks';\nimport { EventType } from '../../types/event';\nimport { Invite } from '../../types/store/invite';\n\nexport const ReminderPart = ({\n\talarmString,\n\tinvite,\n\tevent\n}: {\n\talarmString: string;\n\tinvite: Invite;\n\tevent: EventType;\n}): ReactElement | null => {\n\tconst dispatch = useAppDispatch();\n\tconst calendarFolders = useFoldersMap();\n\n\tconst [t] = useTranslation();\n\n\tconst getMinuteLabel = useCallback(\n\t\t(count) =>\n\t\t\tt('reminder.minute_before', {\n\t\t\t\tcount,\n\t\t\t\tdefaultValue_one: '{{count}} minute before',\n\t\t\t\tdefaultValue_other: '{{count}} minutes before'\n\t\t\t}),\n\t\t[t]\n\t);\n\n\tconst getHourLabel = useCallback(\n\t\t(count) =>\n\t\t\tt('reminder.hour_before', {\n\t\t\t\tcount,\n\t\t\t\tdefaultValue_one: '{{count}} hour before',\n\t\t\t\tdefaultValue_other: '{{count}} hours before'\n\t\t\t}),\n\t\t[t]\n\t);\n\n\tconst getDayLabel = useCallback(\n\t\t(count) =>\n\t\t\tt('reminder.day_before', {\n\t\t\t\tcount,\n\t\t\t\tdefaultValue_one: '{{count}} day before',\n\t\t\t\tdefaultValue_other: '{{count}} days before'\n\t\t\t}),\n\t\t[t]\n\t);\n\n\tconst setSnooze = useCallback(\n\t\t(time) => {\n\t\t\tconst editorInvite = {\n\t\t\t\t...invite,\n\t\t\t\talarmValue: time\n\t\t\t};\n\t\t\tconst editor = generateEditor({\n\t\t\t\tevent,\n\t\t\t\tinvite: editorInvite,\n\t\t\t\tcontext: {\n\t\t\t\t\torganizer: event.resource.organizer,\n\t\t\t\t\tsender: event.resource.organizer,\n\t\t\t\t\tdispatch,\n\t\t\t\t\tfolders: calendarFolders,\n\t\t\t\t\tpanel: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch(modifyAppointment({ editor, draft: invite?.attendees?.length <= 0 }));\n\t\t},\n\t\t[calendarFolders, dispatch, event, invite]\n\t);\n\tconst getReminderItems = useMemo(\n\t\t() => [\n\t\t\t{ id: '0', label: t('reminder.never', 'Never'), value: '-1', onClick: () => setSnooze('-1') },\n\t\t\t{\n\t\t\t\tid: '1',\n\t\t\t\tlabel: t('reminder.at_time_of_event', 'At the time of the event'),\n\t\t\t\tonClick: () => setSnooze('0')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '2',\n\t\t\t\tlabel: getMinuteLabel(1),\n\t\t\t\tonClick: () => setSnooze('1')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '3',\n\t\t\t\tlabel: getMinuteLabel(5),\n\t\t\t\tonClick: () => setSnooze('5')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '4',\n\t\t\t\tlabel: getMinuteLabel(10),\n\t\t\t\tonClick: () => setSnooze('10')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '5',\n\t\t\t\tlabel: getMinuteLabel(15),\n\t\t\t\tonClick: () => setSnooze('15')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '6',\n\t\t\t\tlabel: getMinuteLabel(30),\n\t\t\t\tonClick: () => setSnooze('30')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '7',\n\t\t\t\tlabel: getMinuteLabel(45),\n\t\t\t\tonClick: () => setSnooze('45')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '8',\n\t\t\t\tlabel: getHourLabel(1),\n\t\t\t\tonClick: () => setSnooze('60')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '9',\n\t\t\t\tlabel: getHourLabel(2),\n\t\t\t\tonClick: () => setSnooze('120')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '10',\n\t\t\t\tlabel: getHourLabel(4),\n\t\t\t\tonClick: () => setSnooze('240')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '11',\n\t\t\t\tlabel: getHourLabel(5),\n\t\t\t\tonClick: () => setSnooze('300')\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '12',\n\t\t\t\tlabel: getHourLabel(18),\n\t\t\t\tonClick: () => setSnooze((18 * 60).toString())\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '13',\n\t\t\t\tlabel: getDayLabel(1),\n\t\t\t\tonClick: () => setSnooze((24 * 60).toString())\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '14',\n\t\t\t\tlabel: getDayLabel(2),\n\t\t\t\tonClick: () => setSnooze((48 * 60).toString())\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '15',\n\t\t\t\tlabel: getDayLabel(3),\n\t\t\t\tonClick: () => setSnooze((72 * 60).toString())\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '16',\n\t\t\t\tlabel: getDayLabel(4),\n\t\t\t\tonClick: () => setSnooze((4 * 24 * 60).toString())\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: '17',\n\t\t\t\tlabel: t('reminder.week_before', {\n\t\t\t\t\tcount: 1,\n\t\t\t\t\tdefaultValue_one: '{{count}} week before',\n\t\t\t\t\tdefaultValue_other: '{{count}} weeks before'\n\t\t\t\t}),\n\t\t\t\tonClick: () => setSnooze((7 * 24 * 60).toString())\n\t\t\t}\n\t\t],\n\t\t[getDayLabel, getHourLabel, getMinuteLabel, setSnooze, t]\n\t);\n\treturn alarmString ? (\n\t\t<Container\n\t\t\torientation=\"horizontal\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"center\"\n\t\t\twidth=\"fill\"\n\t\t\theight=\"fit\"\n\t\t\tpadding={{ horizontal: 'large', vertical: 'small' }}\n\t\t\tbackground={'gray6'}\n\t\t>\n\t\t\t<Dropdown items={getReminderItems} placement=\"bottom-end\">\n\t\t\t\t<Button\n\t\t\t\t\tlabel={alarmString}\n\t\t\t\t\ticon=\"ClockOutline\"\n\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\ticonPlacement=\"left\"\n\t\t\t\t\tonClick={noop}\n\t\t\t\t/>\n\t\t\t</Dropdown>\n\t\t</Container>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Button, Container, Padding } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport {\n\tacceptAsTentative,\n\tacceptInvitation,\n\tdeclineInvitation,\n\tproposeNewTimeFn\n} from '../../actions/appointment-actions-fn';\nimport { useFoldersMap } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { useAppDispatch } from '../../store/redux/hooks';\nimport { EventType } from '../../types/event';\nimport { Invite } from '../../types/store/invite';\n\ntype ReplyButtonProps = {\n\tevent: EventType;\n\tinvite: Invite;\n};\n\nexport const ReplyButtonsPart = ({ event, invite }: ReplyButtonProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst dispatch = useAppDispatch();\n\tconst folders = useFoldersMap();\n\tconst context = useMemo(\n\t\t() => ({\n\t\t\tdispatch,\n\t\t\tfolders,\n\t\t\tisInstance: !!event.resource.ridZ\n\t\t}),\n\t\t[dispatch, event.resource.ridZ, folders]\n\t);\n\n\treturn (\n\t\t<Container\n\t\t\torientation=\"horizontal\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\tmainAlignment=\"center\"\n\t\t\twidth=\"fill\"\n\t\t\theight=\"fit\"\n\t\t\tpadding={{ all: 'large' }}\n\t\t\tbackground={'gray6'}\n\t\t>\n\t\t\t<Button\n\t\t\t\ttype=\"outlined\"\n\t\t\t\tlabel={t('event.action.accept', 'Accept')}\n\t\t\t\ticon=\"CheckmarkOutline\"\n\t\t\t\tcolor=\"success\"\n\t\t\t\tonClick={acceptInvitation({ event, invite, context })}\n\t\t\t\tdisabled={event.resource.participationStatus === 'AC'}\n\t\t\t/>\n\t\t\t<Padding horizontal=\"small\" />\n\t\t\t<Button\n\t\t\t\ttype=\"outlined\"\n\t\t\t\tlabel={t('label.tentative', 'Tentative')}\n\t\t\t\ticon=\"QuestionMarkOutline\"\n\t\t\t\tcolor=\"warning\"\n\t\t\t\tonClick={acceptAsTentative({ event, invite, context })}\n\t\t\t\tdisabled={event.resource.participationStatus === 'TE'}\n\t\t\t/>\n\t\t\t<Padding horizontal=\"small\" />\n\t\t\t<Button\n\t\t\t\ttype=\"outlined\"\n\t\t\t\tlabel={t('event.action.decline', 'Decline')}\n\t\t\t\ticon=\"CloseOutline\"\n\t\t\t\tcolor=\"error\"\n\t\t\t\tonClick={declineInvitation({ event, invite, context })}\n\t\t\t\tdisabled={event.resource.participationStatus === 'DE'}\n\t\t\t/>\n\t\t\t<Padding horizontal=\"small\" />\n\t\t\t<Button\n\t\t\t\ttype=\"outlined\"\n\t\t\t\tlabel={t('label.propose_new_time', 'Propose new time')}\n\t\t\t\ticon=\"ClockOutline\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tonClick={proposeNewTimeFn({ event, invite, context })}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Icon, Padding, Row, Text } from '@zextras/carbonio-design-system';\nimport { filter, map } from 'lodash';\n\nimport { CALENDAR_RESOURCES } from '../../constants';\nimport { Invite } from '../../types/store/invite';\n\nexport const EquipmentsRow = ({\n\tinvite,\n\tshowIcon\n}: {\n\tinvite: Invite;\n\tshowIcon?: boolean;\n}): ReactElement | null => {\n\tconst equipments = useMemo(\n\t\t() => filter(invite.attendees, ['cutype', CALENDAR_RESOURCES.RESOURCE]),\n\t\t[invite.attendees]\n\t);\n\tconst equipmentsLabels = useMemo(\n\t\t() => map(equipments, (equipment) => equipment.d).join(', '),\n\t\t[equipments]\n\t);\n\treturn equipments.length ? (\n\t\t<Row width=\"fill\" mainAlignment=\"flex-start\" padding={{ top: 'small' }}>\n\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t{showIcon && (\n\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t<Icon icon=\"BriefcaseOutline\" size=\"medium\" />\n\t\t\t\t\t</Padding>\n\t\t\t\t)}\n\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t<Text color=\"gray1\" size=\"small\">\n\t\t\t\t\t\t{equipmentsLabels}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t</Row>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Icon, Padding, Row, Text } from '@zextras/carbonio-design-system';\n\ntype LocationProps = {\n\tlocation?: string;\n\tlocationUrl?: string;\n\tclass?: string;\n\troom?: {\n\t\tlink: string;\n\t\tlabel: string;\n\t};\n};\n\nexport const LocationRow = ({\n\tlocationData,\n\tshowIcon = false\n}: {\n\tlocationData: LocationProps;\n\tshowIcon?: boolean;\n}): ReactElement => {\n\tconst location = useMemo(() => {\n\t\tconst regex = /\\bhttps?:\\/\\/\\S+/g;\n\t\treturn locationData?.location?.replace(regex, '');\n\t}, [locationData.location]);\n\n\treturn (\n\t\t<>\n\t\t\t{(locationData?.location || locationData?.locationUrl || locationData?.room || location) && (\n\t\t\t\t<Row width=\"fill\" mainAlignment=\"flex-start\" padding={{ top: 'small' }}>\n\t\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t\t{showIcon && (\n\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t<Icon icon=\"PinOutline\" size=\"medium\" />\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t\t\t<Text color=\"gray1\" size=\"small\">\n\t\t\t\t\t\t\t\t{locationData?.locationUrl && (\n\t\t\t\t\t\t\t\t\t<a href={locationData.locationUrl} target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\t\t\t\t\t\t{locationData.locationUrl}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{location}\n\t\t\t\t\t\t\t\t{locationData?.room && (\n\t\t\t\t\t\t\t\t\t<a href={locationData.room.link} target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\t\t\t\t\t\t{locationData.room.label}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Icon, Padding, Row, Text } from '@zextras/carbonio-design-system';\nimport { filter, map } from 'lodash';\n\nimport { CALENDAR_RESOURCES } from '../../constants';\nimport { Invite } from '../../types/store/invite';\n\nexport const MeetingRoomsRow = ({\n\tinvite,\n\tshowIcon\n}: {\n\tinvite: Invite;\n\tshowIcon?: boolean;\n}): ReactElement | null => {\n\tconst meetingRooms = useMemo(\n\t\t() => filter(invite.attendees, ['cutype', CALENDAR_RESOURCES.ROOM]),\n\t\t[invite.attendees]\n\t);\n\tconst rooms = useMemo(\n\t\t() => map(meetingRooms, (meetingRoom) => meetingRoom.d).join(', '),\n\t\t[meetingRooms]\n\t);\n\treturn meetingRooms.length ? (\n\t\t<Row width=\"fill\" mainAlignment=\"flex-start\" padding={{ top: 'small' }}>\n\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t{showIcon && (\n\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t<Icon icon=\"BuildingOutline\" size=\"medium\" />\n\t\t\t\t\t</Padding>\n\t\t\t\t)}\n\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t<Text color=\"gray1\" size=\"small\">\n\t\t\t\t\t\t{rooms}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t</Row>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement, useCallback, useMemo } from 'react';\n\nimport { Row, Icon, Text, Chip } from '@zextras/carbonio-design-system';\nimport { useTags, ZIMBRA_STANDARD_COLORS, runSearch } from '@zextras/carbonio-shell-ui';\nimport { includes, map, reduce } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n// ignored because shows warning for runSearch Not exported\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n\nimport { CALENDAR_ROUTE } from '../../constants';\nimport { EventType } from '../../types/event';\n\nconst TagChip = styled(Chip)`\n\tmargin-left: ${({ theme }): string => theme.sizes.padding.extrasmall};\n\tpadding: 0.0625rem 0.5rem !important;\n\tmargin-bottom: 0.25rem;\n`;\n\nconst TagsRow: FC<{ hideIcon?: boolean; event: EventType }> = ({\n\tevent,\n\thideIcon = false\n}): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst tagsFromStore = useTags();\n\tconst tags = useMemo(\n\t\t() =>\n\t\t\treduce(\n\t\t\t\ttagsFromStore,\n\t\t\t\t(acc: any, v: any) => {\n\t\t\t\t\tif (includes(event?.resource?.tags, v.id))\n\t\t\t\t\t\tacc.push({\n\t\t\t\t\t\t\t...v,\n\t\t\t\t\t\t\tcolor: ZIMBRA_STANDARD_COLORS[v.color ?? 0].hex,\n\t\t\t\t\t\t\tlabel: v.name\n\t\t\t\t\t\t});\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t),\n\t\t[event?.resource?.tags, tagsFromStore]\n\t);\n\tconst tagLabel = useMemo(() => t('label.tags', 'Tags'), [t]);\n\n\tconst triggerSearch = useCallback(\n\t\t(tagToSearch) =>\n\t\t\trunSearch(\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tavatarBackground: tagToSearch?.color,\n\t\t\t\t\t\tavatarIcon: 'Tag',\n\t\t\t\t\t\tbackground: 'gray2',\n\t\t\t\t\t\thasAvatar: true,\n\t\t\t\t\t\tlabel: `tag:${tagToSearch?.name}`,\n\t\t\t\t\t\tvalue: `tag:\"${tagToSearch?.name}\"`\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tCALENDAR_ROUTE\n\t\t\t),\n\t\t[]\n\t);\n\treturn (\n\t\t<>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ vertical: 'small' }}\n\t\t\t>\n\t\t\t\t{!hideIcon && (\n\t\t\t\t\t<Row padding={{ right: 'small' }}>\n\t\t\t\t\t\t<Icon icon=\"TagsMoreOutline\" size=\"medium\" />\n\t\t\t\t\t</Row>\n\t\t\t\t)}\n\n\t\t\t\t{event?.resource?.tags?.length > 0 && (\n\t\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t\t{!hideIcon ? (\n\t\t\t\t\t\t\t<Text color=\"secondary\" size=\"small\" overflow=\"break-word\">\n\t\t\t\t\t\t\t\t{map(tags, (tag) => (\n\t\t\t\t\t\t\t\t\t<TagChip\n\t\t\t\t\t\t\t\t\t\tkey={tag.name}\n\t\t\t\t\t\t\t\t\t\tlabel={tag.name}\n\t\t\t\t\t\t\t\t\t\tavatarBackground={tag.color}\n\t\t\t\t\t\t\t\t\t\tbackground=\"gray2\"\n\t\t\t\t\t\t\t\t\t\thasAvatar\n\t\t\t\t\t\t\t\t\t\tavatarIcon=\"Tag\"\n\t\t\t\t\t\t\t\t\t\tmaxWidth=\"18.75rem\"\n\t\t\t\t\t\t\t\t\t\tonClick={(): void => triggerSearch(tag)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Text color=\"secondary\" size=\"small\" overflow=\"break-word\">\n\t\t\t\t\t\t\t\t{tagLabel}:\n\t\t\t\t\t\t\t\t{map(tags, (tag) => (\n\t\t\t\t\t\t\t\t\t<TagChip\n\t\t\t\t\t\t\t\t\t\tlabel={tag.name}\n\t\t\t\t\t\t\t\t\t\tavatarBackground={tag.color}\n\t\t\t\t\t\t\t\t\t\tbackground=\"gray2\"\n\t\t\t\t\t\t\t\t\t\thasAvatar\n\t\t\t\t\t\t\t\t\t\tavatarIcon=\"Tag\"\n\t\t\t\t\t\t\t\t\t\tmaxWidth=\"18.75rem\"\n\t\t\t\t\t\t\t\t\t\tonClick={(): void => triggerSearch(tag)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Row>\n\t\t\t\t)}\n\t\t\t</Row>\n\t\t</>\n\t);\n};\n\nexport default TagsRow;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement } from 'react';\n\nimport {\n\tIcon,\n\tPadding,\n\tRow,\n\tTooltip,\n\tText,\n\tTextWithTooltip\n} from '@zextras/carbonio-design-system';\nimport moment, { Moment } from 'moment';\n\nimport { useGetEventTimezoneString } from '../../hooks/use-get-event-timezone';\n\ntype TimeInfoProps = {\n\tallDay?: boolean;\n\tstart?: Date | Moment;\n\tend?: Date | Moment;\n\ttimezone: string;\n};\n\nexport const TimeInfoRow = ({\n\ttimeInfoData,\n\tshowIcon = false\n}: {\n\ttimeInfoData: TimeInfoProps;\n\tshowIcon?: boolean;\n}): ReactElement => {\n\tconst { localTimeString, localTimezoneString, localTimezoneTooltip, showTimezoneTooltip } =\n\t\tuseGetEventTimezoneString(\n\t\t\ttimeInfoData.start ?? moment(),\n\t\t\ttimeInfoData.end ?? moment(),\n\t\t\ttimeInfoData.allDay,\n\t\t\ttimeInfoData.timezone\n\t\t);\n\n\treturn (\n\t\t<Row\n\t\t\twidth=\"fill\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tpadding={{ top: 'small' }}\n\t\t\torientation=\"horizontal\"\n\t\t>\n\t\t\t<Row width=\"fit-content\" mainAlignment=\"flex-start\">\n\t\t\t\t{showIcon && (\n\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t<Icon icon=\"ClockOutline\" size=\"medium\" />\n\t\t\t\t\t</Padding>\n\t\t\t\t)}\n\t\t\t</Row>\n\t\t\t<Row mainAlignment=\"flex-start\" takeAvailableSpace>\n\t\t\t\t<Row width=\"fit\" mainAlignment=\"flex-start\" crossAlignment=\"flex-start\">\n\t\t\t\t\t<Row\n\t\t\t\t\t\twidth=\"fit\"\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t\ttakeAvailableSpace\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextWithTooltip overflow=\"ellipsis\" weight=\"bold\" size=\"small\" color=\"gray1\">\n\t\t\t\t\t\t\t{localTimeString}\n\t\t\t\t\t\t</TextWithTooltip>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Padding right=\"small\" />\n\t\t\t\t\t{showTimezoneTooltip && (\n\t\t\t\t\t\t<Row mainAlignment=\"flex-start\" crossAlignment=\"flex-start\" width=\"fit\">\n\t\t\t\t\t\t\t<Tooltip label={localTimezoneTooltip}>\n\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t<Icon icon=\"GlobeOutline\" color=\"gray1\" />\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t)}\n\t\t\t\t</Row>\n\t\t\t\t<Row width=\"fill\" mainAlignment=\"flex-start\">\n\t\t\t\t\t<Text overflow=\"break-word\" weight=\"bold\" size=\"small\" color=\"gray1\">\n\t\t\t\t\t\t{localTimezoneString}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t</Row>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { Icon, Padding, Row, Text } from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\n\nimport { CRB_XPROPS, CRB_XPARAMS } from '../../constants/xprops';\nimport { XPropProps } from '../../types/store/invite';\n\nexport const VirtualRoomRow = ({\n\txprop,\n\tshowIcon = false\n}: {\n\txprop: XPropProps;\n\tshowIcon?: boolean;\n}): ReactElement | null => {\n\tconst room = useMemo(() => find(xprop, ['name', CRB_XPROPS.MEETING_ROOM]), [xprop]);\n\tif (room) {\n\t\tconst roomName = find(room.xparam, ['name', CRB_XPARAMS.ROOM_NAME])?.value;\n\t\tconst roomLink = find(room.xparam, ['name', CRB_XPARAMS.ROOM_LINK])?.value;\n\t\treturn (\n\t\t\t<Row width=\"fill\" mainAlignment=\"flex-start\" padding={{ top: 'small' }}>\n\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t{showIcon && (\n\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t<Icon icon=\"TeamOutline\" size=\"medium\" />\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t)}\n\t\t\t\t\t<Row takeAvailableSpace mainAlignment=\"flex-start\">\n\t\t\t\t\t\t<Text color=\"gray1\" size=\"small\">\n\t\t\t\t\t\t\t<a href={roomLink} target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\t\t\t\t{roomName}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t);\n\t}\n\treturn null;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useMemo } from 'react';\n\nimport { Container, Text } from '@zextras/carbonio-design-system';\nimport { t, useIntegratedFunction } from '@zextras/carbonio-shell-ui';\nimport { map, reduce } from 'lodash';\n\nimport ModalFooter from '../../commons/modal-footer';\nimport { ModalHeader } from '../../commons/modal-header';\nimport { Invite } from '../../types/store/invite';\n\ntype MessageModalProps = {\n\ttitle: string;\n\tonClose: () => void;\n\tonConfirm: (arg?: { text: Array<string> }) => void;\n\tinvite: Invite;\n\tconfirmLabel: string;\n\tisEdited?: boolean;\n};\n\nexport const ModifyStandardMessageModal = ({\n\ttitle,\n\tonClose,\n\tonConfirm,\n\tconfirmLabel,\n\tinvite,\n\tisEdited\n}: MessageModalProps): React.ReactElement => {\n\tconst [openComposer, available] = useIntegratedFunction('compose');\n\n\tconst onEditMessage = useCallback(() => {\n\t\tonClose();\n\t\tconst text = isEdited\n\t\t\t? t('message.meeting_modified', 'The following meeting has been modified')\n\t\t\t: t('message.meeting_canceled', 'The following meeting has been cancelled');\n\t\tconst subject = isEdited ? invite.name : `${t('label.cancelled', 'Cancelled')} ${invite.name}`;\n\t\tif (available)\n\t\t\topenComposer(onConfirm, {\n\t\t\t\ttext: [`${text}:`, `${text}:`],\n\t\t\t\tsubject,\n\t\t\t\tto: reduce(\n\t\t\t\t\tinvite?.participants ?? [],\n\t\t\t\t\t(acc, v) => {\n\t\t\t\t\t\tmap(v, (contact: never) => acc.push(contact));\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t},\n\t\t\t\t\t[]\n\t\t\t\t)\n\t\t\t});\n\t}, [onClose, isEdited, invite.name, invite?.participants, available, openComposer, onConfirm]);\n\n\tconst bodyText = useMemo(\n\t\t() =>\n\t\t\tisEdited\n\t\t\t\t? t(\n\t\t\t\t\t\t'message.want_to_edit_modified_msg',\n\t\t\t\t\t\t\"Do you want to edit the modified appointment's message?\"\n\t\t\t\t\t)\n\t\t\t\t: t(\n\t\t\t\t\t\t'message.want_to_edit_cancellation_msg',\n\t\t\t\t\t\t'Do you want to edit the appointment cancellation message?'\n\t\t\t\t\t),\n\t\t[isEdited]\n\t);\n\n\treturn (\n\t\t<Container mainAlignment=\"center\" crossAlignment=\"flex-start\" height=\"fit\">\n\t\t\t<ModalHeader title={title} onClose={onClose} />\n\t\t\t<Container\n\t\t\t\tpadding={{ vertical: 'medium' }}\n\t\t\t\tmainAlignment=\"baseline\"\n\t\t\t\tcrossAlignment=\"baseline\"\n\t\t\t>\n\t\t\t\t<Text overflow=\"break-word\">{bodyText}</Text>\n\t\t\t</Container>\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tlabel={confirmLabel}\n\t\t\t\tsecondaryColor=\"primary\"\n\t\t\t\tsecondaryBtnType=\"outlined\"\n\t\t\t\tsecondaryLabel={t('action.edit_message', 'Edit Message')}\n\t\t\t\tsecondaryAction={onEditMessage}\n\t\t\t\tdisabled={!invite}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { soapFetch } from '@zextras/carbonio-shell-ui';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const createFolderRequest = async ({\n\tname,\n\tparent,\n\tcolor,\n\texcludeFreeBusy\n}: any): Promise<any> =>\n\tsoapFetch('CreateFolder', {\n\t\t_jsns: 'urn:zimbraMail',\n\t\tfolder: {\n\t\t\tcolor,\n\t\t\tf: excludeFreeBusy ? 'b#' : '#',\n\t\t\tl: parent,\n\t\t\tname,\n\t\t\tview: 'appointment'\n\t\t}\n\t});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { ReactElement, useCallback, useMemo, useState } from 'react';\n\nimport {\n\tContainer,\n\tInput,\n\tPadding,\n\tSelect,\n\tText,\n\tCheckbox,\n\tRow,\n\tIcon,\n\tSelectItem,\n\tSelectProps,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport { FOLDERS } from '@zextras/carbonio-shell-ui';\nimport { includes, map } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport { useFoldersMapByRoot, useRoot } from '../../carbonio-ui-commons/store/zustand/folder';\nimport { hasId } from '../../carbonio-ui-commons/worker/handle-message';\nimport ModalFooter from '../../commons/modal-footer';\nimport { ModalHeader } from '../../commons/modal-header';\nimport { CALENDARS_STANDARD_COLORS } from '../../constants/calendar';\nimport { createCalendar } from '../../store/actions/create-calendar';\nimport { EventType } from '../../types/event';\n\nconst Square = styled.div`\n\twidth: 1.125rem;\n\theight: 1.125rem;\n\tposition: relative;\n\ttop: -0.1875rem;\n\tborder: 0.0625rem solid ${({ theme }): string => theme.palette.gray2.regular};\n\tbackground: ${({ color }): string | undefined => color};\n\tborder-radius: 0.25rem;\n`;\n\nconst ColorContainer = styled(Container)`\n\tborder-bottom: 0.0625rem solid ${({ theme }): string => theme.palette.gray2.regular};\n`;\nconst TextUpperCase = styled(Text)`\n\ttext-transform: capitalize;\n`;\n\nconst LabelFactory: SelectProps['LabelFactory'] = ({\n\tselected,\n\tlabel,\n\topen,\n\tfocus\n}): ReactElement => (\n\t<ColorContainer\n\t\torientation=\"horizontal\"\n\t\twidth=\"fill\"\n\t\tcrossAlignment=\"center\"\n\t\tmainAlignment=\"space-between\"\n\t\tborderRadius=\"half\"\n\t\tbackground={'gray5'}\n\t\tpadding={{\n\t\t\tall: 'small'\n\t\t}}\n\t>\n\t\t<Row width=\"100%\" takeAvailableSpace mainAlignment=\"space-between\">\n\t\t\t<Row\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ left: 'small' }}\n\t\t\t>\n\t\t\t\t<Text size=\"small\" color={open || focus ? 'primary' : 'secondary'}>\n\t\t\t\t\t{label}\n\t\t\t\t</Text>\n\t\t\t\t<TextUpperCase>{selected?.[0].label}</TextUpperCase>\n\t\t\t</Row>\n\t\t\t<Padding right=\"small\">\n\t\t\t\t<Square color={CALENDARS_STANDARD_COLORS[Number(selected[0].value)].color} />\n\t\t\t</Padding>\n\t\t</Row>\n\t\t<Icon\n\t\t\tsize=\"large\"\n\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\tcolor={open || focus ? 'primary' : 'secondary'}\n\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t/>\n\t</ColorContainer>\n);\nconst getStatusItems = (): SelectItem[] =>\n\tCALENDARS_STANDARD_COLORS.map((el, index) => ({\n\t\tbackground: el.background,\n\t\tlabel: el.label ?? '',\n\t\tvalue: index.toString(),\n\t\tcustomComponent: (\n\t\t\t<Container width=\"100%\" mainAlignment=\"space-between\" orientation=\"horizontal\" height=\"fit\">\n\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t<TextUpperCase>{el.label}</TextUpperCase>\n\t\t\t\t</Padding>\n\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t<Square color={el.color} />\n\t\t\t\t</Padding>\n\t\t\t</Container>\n\t\t)\n\t}));\n\ntype ActionArgs = {\n\tinviteId: string;\n\tl: string;\n\tid: string;\n\tdestinationCalendarName: string;\n};\n\ntype NewModalProps = {\n\ttoggleModal?: () => void;\n\tonClose: () => void;\n\tevent?: EventType;\n\tfolderId: string;\n\taction?: (arg: ActionArgs) => void;\n};\n\nexport const NewModal = ({\n\tonClose,\n\ttoggleModal,\n\tevent,\n\taction,\n\tfolderId\n}: NewModalProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst [inputValue, setInputValue] = useState('');\n\tconst [freeBusy, setFreeBusy] = useState(false);\n\tconst toggleFreeBusy = useCallback(() => setFreeBusy((c) => !c), []);\n\tconst colors = useMemo(() => getStatusItems(), []);\n\tconst [selectedColor, setSelectedColor] = useState(0);\n\tconst createSnackbar = useSnackbar();\n\tconst root = useRoot(folderId);\n\n\tconst folders = useFoldersMapByRoot(root?.id ?? '1');\n\tconst folderArray = useMemo(() => map(folders, (f) => f.name), [folders]);\n\tconst showDupWarning = useMemo(\n\t\t() => includes(folderArray, inputValue),\n\t\t[inputValue, folderArray]\n\t);\n\tconst disabled = useMemo(\n\t\t() =>\n\t\t\tinputValue.indexOf('/') > -1 ||\n\t\t\tinputValue.length === 0 ||\n\t\t\tinputValue === 'Calendar' ||\n\t\t\tinputValue === 'calendar' ||\n\t\t\tshowDupWarning,\n\t\t[inputValue, showDupWarning]\n\t);\n\n\tconst onConfirm = (): void => {\n\t\tif (inputValue) {\n\t\t\tcreateCalendar({\n\t\t\t\tparent: root?.id ?? '1',\n\t\t\t\tname: inputValue,\n\t\t\t\tcolor: selectedColor,\n\t\t\t\texcludeFreeBusy: freeBusy\n\t\t\t}).then((newCalendarRes) => {\n\t\t\t\tif (!newCalendarRes.Fault) {\n\t\t\t\t\taction &&\n\t\t\t\t\t\tevent &&\n\t\t\t\t\t\taction({\n\t\t\t\t\t\t\tinviteId: event.resource.inviteId,\n\t\t\t\t\t\t\tl: newCalendarRes.id,\n\t\t\t\t\t\t\tdestinationCalendarName: newCalendarRes.name,\n\t\t\t\t\t\t\tid: event.resource.id\n\t\t\t\t\t\t});\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `new`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tlabel: t('message.snackbar.new_calendar_created', 'New calendar created'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t\tonClose();\n\t\t\t\t} else {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `move`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tlabel: t('label.error_try_again', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t\tonClose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tsetInputValue('');\n\t\tsetSelectedColor(0);\n\t\tsetFreeBusy(false);\n\t\tonClose();\n\t};\n\n\tconst onCloseModal = useCallback(() => {\n\t\tsetInputValue('');\n\t\tsetSelectedColor(0);\n\t\tsetFreeBusy(false);\n\t\tonClose();\n\t}, [onClose]);\n\n\tconst placeholder = useMemo(() => t('label.type_name_here', 'Calendar name'), [t]);\n\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\treturn (\n\t\t<Container\n\t\t\tpadding={{ all: 'small' }}\n\t\t\tmainAlignment=\"center\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\theight=\"fit\"\n\t\t>\n\t\t\t<ModalHeader\n\t\t\t\ttitle={t('folder.modal.new.title2', 'New calendar creation')}\n\t\t\t\tonClose={onCloseModal}\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\tlabel={placeholder}\n\t\t\t\tbackgroundColor=\"gray5\"\n\t\t\t\tvalue={inputValue}\n\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>): void => {\n\t\t\t\t\tsetInputValue(e.target.value);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{showDupWarning && (\n\t\t\t\t<Padding all=\"small\">\n\t\t\t\t\t<Text size=\"small\" color=\"error\">\n\t\t\t\t\t\t{t('folder.modal.new.duplicate_warning', 'Calendar with the same name already exists')}\n\t\t\t\t\t</Text>\n\t\t\t\t</Padding>\n\t\t\t)}\n\t\t\t<Padding vertical=\"medium\" />\n\t\t\t<Select\n\t\t\t\tlabel={'Select color'}\n\t\t\t\tonChange={(value): void => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tsetSelectedColor(parseInt(value, 10));\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\titems={colors}\n\t\t\t\tdefaultSelection={colors[0]}\n\t\t\t\tLabelFactory={LabelFactory}\n\t\t\t/>\n\t\t\t<Padding vertical=\"medium\" />\n\t\t\t<Checkbox\n\t\t\t\tvalue={freeBusy}\n\t\t\t\tonClick={toggleFreeBusy}\n\t\t\t\tlabel={t(\n\t\t\t\t\t'label.exclude_free_busy',\n\t\t\t\t\t'Exclude this calendar when reporting the free/busy times'\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t<ModalFooter\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tsecondaryAction={toggleModal}\n\t\t\t\tsecondaryLabel={t('folder.modal.footer.go_back', 'Go back')}\n\t\t\t\tlabel={\n\t\t\t\t\tevent && hasId(event.resource.calendar, FOLDERS.TRASH)\n\t\t\t\t\t\t? t('folder.modal.restore.footer', 'Create and Restore')\n\t\t\t\t\t\t: t('label.create', 'Create')\n\t\t\t\t}\n\t\t\t\tdisabled={disabled}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { createFolderRequest } from '../../soap/create-folder-request';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const createCalendar = async ({\n\tname,\n\tparent,\n\tcolor,\n\texcludeFreeBusy\n}: any): Promise<any> => {\n\tconst res = await createFolderRequest({ name, parent, color, excludeFreeBusy });\n\tif (res.folder) {\n\t\treturn res.folder[0];\n\t}\n\treturn res;\n};\n"],"names":["sendResponse","event","context","dispatch","sendInviteResponse","inviteId","resource","updateOrganizer","action","deleteEvent","absFolderPath","find","folders","calendar","id","isRecurrent","ridZ","moveToTrashArgs","omitBy","t","recur","isOrganizer","isOrganizerOrHaveEqualRights","deleteSingleInstance","isInstance","newMessage","inst","s","isNil","moveAppointmentToTrash","generateAppointmentDeletedSnackbar","res","createSnackbar","undoAction","isRecurrentSeries","isDraft","type","includes","snackbarLabel","undefined","key","replace","label","autoHideTimeout","hideButton","actionLabel","onActionClick","generateAppointmentRestoredSnackbar","ItalicText","styled","Text","withConfig","displayName","componentId","DeleteEventModalContent","actions","title","isSingleInstance","isException","isInstanceOfSeries","invite","onConfirm","onClose","isSeries","name","displayMessage","useMemo","defaultValue","React","Container","mainAlignment","crossAlignment","height","ModalHeader","padding","vertical","overflow","Padding","top","Checkbox","value","deleteAll","onClick","toggleDeleteAll","horizontal","notifyOrganizer","toggleNotifyOrganizer","ModalFooter","disabled","color","DeleteEventModal","participants","participantsSize","size","useAppDispatch","calendarFolders","useFoldersMap","recurrenceRule","isAskingConfirmation","setIsAskingConfirmation","useState","inviteNeverSent","toggleAskConfirmation","useCallback","a","useDeleteActions","useTranslation","useSnackbar","setDeleteAll","setNotifyOrganizer","deleteNonRecurrentEvent","editor","onBoardClose","isCanceled","restoreAppointment","moveAppointmentRequest","l","then","replaceHistory","ctxt","text","setTimeout","deleteRecurrentSerie","restoreRecurrentSeries","eventDate","start","valueOf","untilDate","moment","subtract","format","deleteFunction","modifiedInvite","add","rule","until","d","generateEditor","isTheFirstInstance","isSameOrBefore","draft","modifyAppointment","deleteRecurrentInstance","getInstanceExceptionId","tz","allDay","right","bottom","left","ModifyStandardMessageModal","confirmLabel","Spinner","DeletePermanently","deleteAppointmentPermanent","all","ContainerEl","FolderItem","length","orientation","minHeight","maxHeight","Accordion","items","background","MoveModal","toggleModal","currentFolder","input","setInput","folderDestination","setFolderDestination","isSameFolder","setIsSameFolder","destinationCalendarName","filterFromInput","filter","v","isEmpty","startsWith","toLowerCase","nestFilteredFolders","calId","results","reduce","item","parent","acc","match","result","divider","open","nestedData","FOLDERS","getFolderTranslatedName","folderId","folderName","level","Input","backgroundColor","onChange","e","target","secondaryAction","secondaryBtnType","secondaryColor","secondaryLabel","MoveApptModal","useFolder","showNewFolderModal","setShowNewFolderModal","moveAppt","data","hasId","NewModal","createCopy","_invite","copy","eventToCopy","omit","identities","getIdentityItems","organizer","panel","exceptId","addBoard","url","CALENDAR_ROUTE","getInvite","payload","normalizeInvite","m","editAppointment","edit","moveAppointment","ev","preventDefault","closeModal","createModal","children","StoreProvider","deletePermanently","moveToTrash","trashEvent","openAppointment","panelView","PANEL_VIEW","path","EventActionsEnum","acceptInvitation","declineInvitation","acceptAsTentative","proposeNewTimeFn","proposeTime","isProposeNewTime","attendees","email","location","virtualRoom","richTextButton","attachmentsButton","saveButton","optionalAttendees","freeBusy","private","reminder","recurrence","meetingRoom","equipment","timezone","exportAppointmentICSFn","downloadICS","uri","link","document","createElement","download","href","body","appendChild","click","removeChild","lowerCase","openEventItem","icon","tooltipLabel","acceptInvitationItem","participationStatus","declineInvitationItem","acceptAsTentativeItem","proposeNewTimeItem","moveEventItem","haveWriteAccess","editEventItem","copyEventItem","deleteEventItem","showOriginal","window","exportAppointmentICSItem","getInviteActionsArray","isAnInvite","iAmOrganizer","owner","answerToEventItem","keepOpen","props","theme","palette","gray2","regular","getExportICSItem","folder","isLink","isLinkChild","useEventActions","useAppSelector","selectInstanceInvite","useModal","tags","useTags","_context","createAndApplyTag","getTrashActions","seriesEvent","compact","applyTag","getRecurrentActionsItems","contextOverride","getInstanceActionsItems","useInvite","loading","setLoading","useEffect","state","invites","isTrashOrNestedInIt","humanFileSize","inputSize","i","Math","floor","log","toFixed","toString","getAttachmentsLink","messageId","messageSubject","attachments","join","AttachmentHoverBarContainer","AttachmentContainer","sizes","small","getColor","AttachmentLink","AttachmentExtension","borderRadius","primary","gray6","font","Attachment","part","isEditor","removeAttachment","iconColors","att","createPreview","useContext","PreviewsManagerContext","extension","getFileExtension","sizeLabel","inputRef","useRef","inputRef2","downloadAttachment","current","preview","pType","contentType","endsWith","src","previewType","closeAction","filename","substring","lastIndexOf","Tooltip","Row","takeAvailableSpace","ic","style","width","IconButton","rel","ref","AttachmentsBlock","subject","onAttachmentsChange","expanded","setExpanded","useTheme","attachmentsCount","actionsDownloadLink","attachmentsParts","map","attachmentFiles","p","aid","mp","mid","removeAllAttachments","attachToVisualize","slice","uniqBy","calcColor","count","defaultValue_one","defaultValue_other","cursor","Icon","Link","wrap","index","IconContainer","Avatar","ImageAndIconPart","PaddedRow","CustomIcon","SubjectRow","calendarColor","isPrivate","customColor","fontWeight","InviteNeverSentRow","CustomIconInfo","placement","DetailsPart","setCalendarColor","rgb","timeData","end","locationData","class","locationUrl","TimeInfoRow","timeInfoData","LocationRow","MeetingRoomsRow","EquipmentsRow","xprop","VirtualRoomRow","TagsRow","hideIcon","BodyContainer","AppointmentCardContainer","ActionButtons","primaryAction","move","isShared","otherActions","maxWidth","Dropdown","noop","DisplayerHeader","close","Divider","EventPanelView","calendarId","apptId","useParams","appointment","selectAppointment","instance","selectAppointmentInstance","normalizeCalendarEvent","alarmString","getAlarmToString","alarmData","messageHasABody","extractBody","textDescription","_content","neverSent","StyledDivider","ReplyButtonsPart","ParticipantsPart","MessagePart","fullInvite","parts","ReminderPart","BodyMessageRenderer","copyEmailToClipboard","navigator","clipboard","writeText","sendMsg","obj","mail","firstName","middleName","mailToContact","DisplayedParticipant","participant","Chip","hasAvatar","isOptional","isExpanded","setIsExpanded","toggleExpanded","prevExpanded","displayedParticipants","ParticipantsDisplayer","Object","keys","AC","toUpperCase","NE","TE","DE","DisplayParticipantsVisitor","users","Trans","i18nKey","defaults","values","others","user","DisplayMultipleAttendee","message","loggedInUser","Component","pt","ParticipantsDisplayerSmall","useUserAccount","calculateSize","isSummary","account","ciFolder","iAmAttendee","components","BoldText","somebody","getMinuteLabel","getHourLabel","getDayLabel","setSnooze","time","editorInvite","alarmValue","sender","getReminderItems","Button","iconPlacement","showIcon","equipments","CALENDAR_RESOURCES","equipmentsLabels","room","meetingRooms","rooms","TagChip","extrasmall","tagsFromStore","push","ZIMBRA_STANDARD_COLORS","hex","tagLabel","triggerSearch","tagToSearch","runSearch","avatarBackground","avatarIcon","tag","localTimeString","localTimezoneString","localTimezoneTooltip","showTimezoneTooltip","useGetEventTimezoneString","TextWithTooltip","weight","CRB_XPROPS","roomName","xparam","CRB_XPARAMS","roomLink","isEdited","openComposer","available","useIntegratedFunction","onEditMessage","to","contact","bodyText","Square","ColorContainer","TextUpperCase","LabelFactory","selected","focus","CALENDARS_STANDARD_COLORS","Number","alignSelf","inputValue","setInputValue","setFreeBusy","toggleFreeBusy","c","colors","el","customComponent","selectedColor","setSelectedColor","root","useRoot","useFoldersMapByRoot","folderArray","f","showDupWarning","indexOf","onCloseModal","placeholder","Select","parseInt","defaultSelection","async","excludeFreeBusy","soapFetch","_jsns","view","createFolderRequest","createCalendar","newCalendarRes","Fault"],"sourceRoot":""}