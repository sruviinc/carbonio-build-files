"use strict";(self.webpackChunkcarbonio_calendars_ui=self.webpackChunkcarbonio_calendars_ui||[]).push([[266],{45859:(e,t,r)=>{r.d(t,{j:()=>o});var a=r(6017);const o=()=>{const{prefs:e}=(0,a.useUserSettings)();return e}},73459:(e,t,r)=>{r.d(t,{V:()=>s,a:()=>m});var a=r(85583),o=r(6017),n=r(80781);const l=(0,a.createAsyncThunk)("appointment/create new appointment",(async({draft:e,editor:t},{rejectWithValue:r})=>{if(t){const a=(0,n.Mq)({...t,draft:e}),l=await(0,o.soapFetch)("CreateAppointment",a),i=l?.Fault?{...l.Fault,error:!0}:l;return i?.error?r(i):{response:l,editor:{...t,isNew:!1,isSeries:!!t.recur,isInstance:!t.recur,isException:!1,inviteId:l.invId}}}}));var i=r(74713),c=r(98764),d=r(89458);const s=({draft:e=!0,isNew:t=!0,editor:r,dispatch:a})=>t?(({draft:e,editor:t,dispatch:r})=>r(l({draft:e,editor:t})).then((({payload:e})=>{const{response:t}=e;return e?.response&&r((0,d.C)({id:e.editor.id,editor:e.editor})),Promise.resolve({response:t,editor:e.editor})})))({draft:e,editor:r,dispatch:a}):(({draft:e,editor:t,dispatch:r})=>r((0,i.Q)({draft:e,editor:t})).then((({payload:e})=>{const{response:t,error:a}=e;return t&&!a?(r((0,d.C)({id:e.editor.id,editor:e.editor})),Promise.resolve({response:t,editor:e.editor})):Promise.resolve(e)})))({draft:e,editor:r,dispatch:a}),m=({isNew:e,editor:t,dispatch:r})=>t?.isProposeNewTime?(async({editorId:e,dispatch:t})=>t((0,c.k)({id:e})).then((({payload:r})=>{if(r){const{response:a,editor:o,error:n}=r;if(a&&!n)return t((0,d.C)({id:e,editor:o})),Promise.resolve({response:a,editor:o})}return Promise.resolve(r)})))({editorId:t.id,dispatch:r}):s({draft:!1,isNew:e,editor:t,dispatch:r})},58542:(e,t,r)=>{r.d(t,{Et:()=>a,Li:()=>n,Ou:()=>o,tw:()=>l});const a="#FFFFFF",o="#c2e7ff",n="#0a1153",l="#0a1153"},22797:(e,t,r)=>{r.d(t,{C:()=>o});var a=r(51235);const o=e=>(0,a.sortBy)((0,a.map)(e?.split(","),(e=>({day:e.split(":")[0],working:"N"!==e.split(":")[1],start:e.split(":")[2],end:e.split(":")[3]}))),"day")},61707:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Pe});var a=r(92652),o=r.n(a),n=r(51235),l=r(14824),i=r.n(l),c=r(91979),d=r(19670),s=r.n(d),m=r(27244),u=r(91750),b=r.n(u);const g=(0,u.createGlobalStyle)([".rbc-addons-dnd-resizable{width:100%;}.rbc-calendar{color:",";font-family:",";font-size:",";font-weight:",";& *{outline:none !important;}}.rbc-btn{color:inherit;font:inherit;margin:0;}button.rbc-btn{overflow:visible;text-transform:none;-webkit-appearance:button;cursor:pointer;}button[disabled].rbc-btn{cursor:not-allowed;}button.rbc-input::-moz-focus-inner{border:0;padding:0;}.rbc-calendar{box-sizing:border-box;height:100%;display:flex;flex-direction:column;align-items:stretch;}.rbc-calendar *,.rbc-calendar *:before,.rbc-calendar *:after{box-sizing:inherit;}.rbc-abs-full,.rbc-row-bg{overflow:hidden;position:absolute;top:0;left:0;right:0;bottom:0;}.rbc-ellipsis,.rbc-event-label,.rbc-row-segment .rbc-event-content,.rbc-show-more{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.rbc-rtl{direction:rtl;}.rbc-off-range{color:",";}.rbc-off-range-bg{background:",";}.rbc-header{overflow:hidden;flex:1 0 0;text-overflow:ellipsis;white-space:nowrap;padding:0 0.1875rem;text-align:center;vertical-align:middle;font-weight:bold;font-size:90%;min-height:0;border-bottom:0.0625rem solid ",";}.rbc-header + .rbc-header{border-left:0.0625rem solid ",";}.rbc-rtl .rbc-header + .rbc-header{border-left-width:0;border-right:0.0625rem solid ",";}.rbc-header > a,.rbc-header > a:active,.rbc-header > a:visited{color:inherit;text-decoration:none;}.rbc-row-content{position:relative;user-select:none;-webkit-user-select:none;z-index:4;}.rbc-today{background-color:",";color:",";font-weight:bold;}.rbc-toolbar{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;margin-bottom:0.625rem;font-size:1rem;padding:0.5rem;background-color:",";}.rbc-toolbar .rbc-toolbar-label{flex-grow:1;padding:0 0.625rem;text-align:center;}.rbc-toolbar button{color:",";display:inline-block;margin:0;text-align:center;vertical-align:middle;background:none;border:0.0625rem solid ",";padding:.375rem 1rem;border-radius:0.125rem;line-height:normal;white-space:nowrap;}.rbc-toolbar button:active,.rbc-toolbar button.rbc-active{background-image:none;background-color:",";border-color:",";}.rbc-toolbar button:active:hover,.rbc-toolbar button:active:focus,.rbc-toolbar button.rbc-active:hover,.rbc-toolbar button.rbc-active:focus{color:",";background-color:",";border-color:",";}.rbc-toolbar button:focus{color:",";background-color:",";border-color:",";}.rbc-toolbar button:hover{color:",";background-color:",";border-color:",";}.rbc-btn-group{display:inline-block;height:2rem;white-space:nowrap;}.rbc-btn-group > button{height:2rem;text-transform:uppercase;font-size:0.875rem;}.rbc-btn-group > button:first-child:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0;}.rbc-btn-group > button:last-child:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0;}.rbc-rtl .rbc-btn-group > button:first-child:not(:last-child){border-radius:0.125rem;border-top-left-radius:0;border-bottom-left-radius:0;}.rbc-rtl .rbc-btn-group > button:last-child:not(:first-child){border-radius:0.125rem;border-top-right-radius:0;border-bottom-right-radius:0;}.rbc-btn-group > button:not(:first-child):not(:last-child){border-radius:0;}.rbc-btn-group button + button{margin-left:-0.0625rem;}.rbc-rtl .rbc-btn-group button + button{margin-left:0;margin-right:-0.0625rem;}.rbc-btn-group + .rbc-btn-group,.rbc-btn-group + button{margin-left:0.625rem;}.rbc-row{display:flex;flex-direction:row;}.rbc-row-segment{padding:0 0.0625rem 0.0625rem 0.0625rem;}.rbc-day-bg.rbc-selected-cell{background-color:"," !important;border:0.0625rem solid "," !important;}.rbc-show-more{background-color:",";z-index:4;font-weight:bold;font-size:85%;height:auto;line-height:normal;}.rbc-month-view{position:relative;border:0.0625rem solid ",";display:flex;flex-direction:column;flex:1 0 0;width:100%;user-select:none;-webkit-user-select:none;height:100%;}.rbc-month-header{display:flex;flex-direction:row;}.rbc-month-row{display:flex;position:relative;flex-direction:column;flex:1 0 0;flex-basis:0;overflow:hidden;height:100%;}.rbc-month-row + .rbc-month-row{border-top:0.0625rem solid ",";}.rbc-date-cell{flex:1 1 0;min-width:0;padding-right:0.3125rem;text-align:right;}.rbc-date-cell.rbc-now{font-weight:bold;}.rbc-date-cell > a,.rbc-date-cell > a:active,.rbc-date-cell > a:visited{color:inherit;text-decoration:none;}.rbc-row-bg{display:flex;flex-direction:row;flex:1 0 0;overflow:hidden;}.rbc-day-bg{cursor:pointer;flex:1 0 0;}.rbc-day-bg + .rbc-day-bg{border-left:0.0625rem solid ",";}.rbc-rtl .rbc-day-bg + .rbc-day-bg{border-left-width:0;border-right:0.0625rem solid ",";}.rbc-overlay{position:absolute;z-index:5;border:0.0625rem solid ",";background-color:#fff;box-shadow:0 0.3125rem 0.9375rem rgba(0,0,0,0.25);padding:0.625rem;}.rbc-overlay > * + *{margin-top:0.0625rem;}.rbc-overlay-header{border-bottom:0.0625rem solid ",";margin:-0.625rem -0.625rem 0.3125rem -0.625rem;padding:0.125rem 0.625rem;}.rbc-agenda-view{display:flex;flex-direction:column;flex:1 0 0;overflow:auto;}.rbc-agenda-view table.rbc-agenda-table{width:100%;border:0.0625rem solid ",";border-spacing:0;border-collapse:collapse;}.rbc-agenda-view table.rbc-agenda-table tbody > tr > td{padding:0.3125rem 0.625rem;vertical-align:top;}.rbc-agenda-view table.rbc-agenda-table .rbc-agenda-time-cell{padding-left:0.9375rem;padding-right:0.9375rem;text-transform:lowercase;}.rbc-agenda-view table.rbc-agenda-table tbody > tr > td + td{border-left:0.0625rem solid ",";}.rbc-rtl .rbc-agenda-view table.rbc-agenda-table tbody > tr > td + td{border-left-width:0;border-right:0.0625rem solid ",";}.rbc-agenda-view table.rbc-agenda-table tbody > tr + tr{border-top:0.0625rem solid ",";}.rbc-agenda-view table.rbc-agenda-table thead > tr > th{padding:0.1875rem 0.3125rem;text-align:left;border-bottom:0.0625rem solid ",";}.rbc-rtl .rbc-agenda-view table.rbc-agenda-table thead > tr > th{text-align:right;}.rbc-agenda-time-cell{text-transform:lowercase;}.rbc-agenda-time-cell .rbc-continues-after:after{content:' »';}.rbc-agenda-time-cell .rbc-continues-prior:before{content:'« ';}.rbc-agenda-date-cell,.rbc-agenda-time-cell{white-space:nowrap;}.rbc-agenda-event-cell{width:100%;}.rbc-time-column{display:flex;flex-direction:column;min-height:100%;}.rbc-time-column .rbc-timeslot-group{flex:1;}.rbc-timeslot-group{border-bottom:0.0625rem solid ",";min-height:5rem;display:flex;flex-flow:column nowrap;}.rbc-time-gutter,.rbc-header-gutter{flex:none;}.rbc-label{padding:0 0.3125rem;}.rbc-day-slot{position:relative;}.rbc-day-slot .rbc-events-container{bottom:0;left:0;position:absolute;right:0;margin-right:0.625rem;top:0;}.rbc-day-slot .rbc-events-container.rbc-rtl{left:0.625rem;right:0;}.rbc-day-slot .rbc-event{border:0.0625rem solid ",";display:flex;max-height:100%;min-height:1.25rem;flex-flow:column wrap;align-items:flex-start;overflow:hidden;position:absolute;}.rbc-day-slot .rbc-event-label{flex:none;padding-right:0.3125rem;width:auto;}.rbc-day-slot .rbc-event-content{width:100%;flex:1 1 0;word-wrap:break-word;line-height:1;height:100%;min-height:1em;}.rbc-day-slot .rbc-time-slot{border-top:0.0625rem solid ",";}.rbc-time-view-resources .rbc-time-gutter,.rbc-time-view-resources .rbc-time-header-gutter{position:sticky;left:0;background-color:",";border-right:0.0625rem solid ",";z-index:10;margin-right:-0.0625rem;}.rbc-time-view-resources .rbc-time-header{overflow:hidden;}.rbc-time-view-resources .rbc-time-header-content{min-width:auto;flex:1 0 0;}.rbc-time-view-resources .rbc-time-header-cell-single-day{display:none;}.rbc-time-view-resources .rbc-day-slot{min-width:8.75rem;}.rbc-time-view-resources .rbc-header,.rbc-time-view-resources .rbc-day-bg{width:8.75rem;flex:1 1 0;}.rbc-time-header-content + .rbc-time-header-content{margin-left:-0.0625rem;}.rbc-time-slot{flex:1 0 0;}.rbc-time-slot.rbc-now{font-weight:bold;}.rbc-day-header{text-align:center;}.rbc-allday-cell{cursor:",";}.rbc-day-slot.rbc-time-column{cursor:",";}.rbc-slot-selection{color:",";background-color:",";border:0.0625rem solid "," !important;z-index:10;position:absolute;font-size:",";width:100%;padding:",";border-radius :0.25rem;}.rbc-day-slot.rbc-time-column.rbc-slot-selecting{cursor:ns-resize;}.rbc-time-view{display:flex;flex-direction:column;flex:1;width:100%;border:0.0625rem solid ",";min-height:0;}.rbc-time-view .rbc-time-gutter{white-space:nowrap;}.rbc-time-view .rbc-allday-cell{box-sizing:content-box;width:100%;height:100%;position:relative;}.rbc-time-view .rbc-allday-cell + .rbc-allday-cell{border-left:0.0625rem solid ",";}.rbc-time-view .rbc-allday-events{position:relative;z-index:4;}.rbc-time-view .rbc-row{box-sizing:border-box;min-height:1.25rem;}.rbc-time-header{display:flex;flex:0 0 auto;flex-direction:row;}.rbc-time-header.rbc-overflowing{border-right:0.0625rem solid ",";}.rbc-rtl .rbc-time-header.rbc-overflowing{border-right-width:0;border-left:0.0625rem solid ",";}.rbc-time-header > .rbc-row:first-child{border-bottom:0.0625rem solid ",";}.rbc-time-header > .rbc-row.rbc-row-resource{border-bottom:0.0625rem solid ",";}.rbc-time-header-cell-single-day{display:none;}.rbc-time-header-content{flex:1;display:flex;min-width:0;flex-direction:column;border-left:0.0625rem solid ",";}.rbc-rtl .rbc-time-header-content{border-left-width:0;border-right:0.0625rem solid ",";}.rbc-time-header-content > .rbc-row.rbc-row-resource{border-bottom:0.0625rem solid ",";flex-shrink:0;}.rbc-time-content{display:flex;flex:1 0 0;align-items:flex-start;width:100%;border-top:0.125rem solid ",";overflow-y:auto;position:relative;}.rbc-time-content > .rbc-time-gutter{flex:none;}.rbc-time-content > * + * > *{border-left:0.0625rem solid ",";}.rbc-rtl .rbc-time-content > * + * > *{border-left-width:0;border-right:0.0625rem solid ",";}.rbc-time-content > .rbc-day-slot{width:100%;user-select:none;-webkit-user-select:none;}.rbc-current-time-indicator{position:absolute;z-index:3;left:0;right:0;height:0.125rem;background-color:",";pointer-events:none;}.rbc-addons-dnd .rbc-addons-dnd-row-body{position:relative;}.rbc-addons-dnd .rbc-addons-dnd-drag-row{position:absolute;top:0;left:0;right:0;}.rbc-addons-dnd .rbc-addons-dnd-over{background-color:rgba(0,0,0,0.3);}.rbc-addons-dnd .rbc-event{transition:opacity 150ms;}.rbc-addons-dnd .rbc-event:hover .rbc-addons-dnd-resize-ns-icon,.rbc-addons-dnd .rbc-event:hover .rbc-addons-dnd-resize-ew-icon{display:block;}.rbc-addons-dnd .rbc-addons-dnd-dragged-event{opacity:0;}.rbc-addons-dnd.rbc-addons-dnd-is-dragging .rbc-event:not(.rbc-addons-dnd-dragged-event):not(.rbc-addons-dnd-drag-preview){opacity:.50;}.rbc-addons-dnd .rbc-addons-dnd-resizable{position:relative;width:100%;height:100%;}.rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor{width:100%;text-align:center;position:absolute;}.rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor:first-child{z-index:20;top:0;}.rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor:last-child{z-index:20;bottom:0;}.rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor .rbc-addons-dnd-resize-ns-icon{display:none;border-top:0.1875rem double;margin:0 auto;width:0.625rem;cursor:ns-resize;}.rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor{position:absolute;top:0.25rem;bottom:0;}.rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor:first-child{z-index:20;left:0;}.rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor:last-child{z-index:20;right:0;}.rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor .rbc-addons-dnd-resize-ew-icon{display:none;border-left:0.1875rem double;margin-top:auto;margin-bottom:auto;height:0.625rem;cursor:ew-resize;}"],(({theme:e})=>e.palette.text.regular),(({theme:e})=>e.fonts.default),(({theme:e})=>e.sizes.font.medium),(({theme:e})=>e.fonts.weight.regular),(({theme:e})=>e.palette.text.disabled),(({theme:e})=>e.palette.gray5.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.highlight.regular),(({theme:e})=>e.palette.primary.regular),(({theme:e})=>e.palette.gray5.regular),(({theme:e})=>e.palette.primary.regular),(({theme:e})=>e.palette.primary.regular),(({theme:e})=>e.palette.highlight.regular),(({theme:e})=>e.palette.primary.active),(({theme:e})=>e.palette.primary.focus),(({theme:e})=>e.palette.transparent.focus),(({theme:e})=>e.palette.primary.focus),(({theme:e})=>e.palette.primary.focus),(({theme:e})=>e.palette.transparent.focus),(({theme:e})=>e.palette.primary.focus),(({theme:e})=>e.palette.primary.hover),(({theme:e})=>e.palette.transparent.hover),(({theme:e})=>e.palette.primary.hover),(({primaryCalendar:e,summaryViewOpen:t,action:r})=>t||r?"inherit":e?.color?.background),(({primaryCalendar:e,summaryViewOpen:t,action:r})=>t||r?"inherit":e?.color?.color),(({theme:e})=>e.palette.transparent.active),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray6.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray5.regular),(({theme:e})=>e.palette.gray6.regular),(({theme:e})=>e.palette.gray3.regular),(({summaryViewOpen:e,action:t})=>e||t?"inherit":"pointer"),(({summaryViewOpen:e,action:t})=>e||t?"inherit":"pointer"),(({primaryCalendar:e})=>e?.color?.color),(({primaryCalendar:e})=>e?.color?.background),(({primaryCalendar:e})=>e?.color?.color),(({theme:e})=>e.sizes.font.medium),(({theme:e})=>`${e.sizes.padding.small} ${e.sizes.padding.extrasmall}`),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray3.regular),(({theme:e})=>e.palette.gray6.regular),(({theme:e})=>e.palette.gray6.regular),(({theme:e})=>e.palette.primary.regular));var p=r(97363),h=r(6017),f=r(750),y=r.n(f),w=r(93747),v=r(37312),k=r(18671);const E=({event:e,onClose:t,onSeries:r,onInstance:n})=>{const l=(0,a.useCallback)((()=>{r?.(),t?.()}),[t,r]),i=(0,a.useCallback)((()=>{n?.(),t?.()}),[t,n]);return o().createElement(p.Container,{padding:{all:"small"},mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},o().createElement(k.x,{onClose:t,title:e.title}),o().createElement(p.Padding,{all:"small"},o().createElement(p.Text,{overflow:"break-word"},(0,h.t)("message.appointment_type_handle",{name:e.title,defaultValue:'"{{name}}” is a recurring appointment. Would you like to open only this instance or the series?'}))),o().createElement(v.Z,{onConfirm:i,label:(0,h.t)("label.single_instance","SINGLE INSTANCE"),secondaryAction:l,secondaryLabel:(0,h.t)("label.entire_serires","ENTIRE SERIES"),secondaryBtnType:"outlined",secondaryColor:"primary"}))};var x=r(80802),C=r(83266),I=r(59379),z=r(85492),D=r(58753),A=r(40232);const R=({onClose:e,event:t})=>{const[r]=(0,w.useTranslation)(),a=(0,C.U)({onClose:e,event:t});return a?o().createElement(p.Row,{width:"fill",mainAlignment:"flex-end",padding:{all:"small"}},o().createElement(p.Padding,{right:"small",style:{display:"flex"}},t.resource.isRecurrent&&a?.[1]?.items?.length>0&&o().createElement(p.Dropdown,{"data-testid":"series-options",items:a?.[1]?.items,placement:"bottom-end"},o().createElement(p.Button,{type:"outlined",label:r("label.series","Series"),icon:"ChevronDown",onClick:n.noop})),(a?.[0]?.items?.length>0||a?.length>0)&&o().createElement(p.Padding,{left:"small"},o().createElement(p.Dropdown,{"data-testid":"instance-options",items:a?.[0]?.items??a,placement:"bottom-end"},o().createElement(p.Button,{type:"outlined",label:r("label.instance","Instance"),icon:"ChevronDown",onClick:n.noop}))))):null};var S=r(93046),O=r(56206);const T=()=>{const{calendarId:e}=(0,m.useParams)(),t=(0,S.WR)(e),r=(0,O.Kd)({color:t?.color,rgb:t?.rgb});return o().createElement(o().Fragment,null,t&&o().createElement(p.Row,{width:"fill",mainAlignment:"flex-start",padding:{top:"small"}},o().createElement(p.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},o().createElement(p.Padding,{right:"small"},o().createElement(p.Icon,{icon:"Calendar2",size:"medium",customColor:r.color})),o().createElement(p.Text,{overflow:"break-word",size:"medium",weight:"bold"},t?.name))))},N=({event:e})=>o().createElement(o().Fragment,null,"PRI"!==e.resource.class||e?.resource?.iAmOrganizer||e?.resource?.calendar?.owner?o().createElement(o().Fragment,null,e.resource.fragment&&e.resource.fragment.length>0&&o().createElement(p.Row,{width:"fill",crossAlignment:"flex-start",mainAlignment:"flex-start",padding:{vertical:"small"}},o().createElement(p.Row,{padding:{right:"small"}},o().createElement(p.Icon,{icon:"MessageSquareOutline"})),o().createElement(p.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},o().createElement(p.Text,{overflow:"break-word"},e.resource.fragment)))):null);var _=r(6482),P=r(78894),M=r(83406);const B=b()(p.Text).withConfig({displayName:"never-sent-warning-row__WarningText",componentId:"sc-i1ujd0-0"})(["color:#d74942;"]),W=({neverSent:e})=>o().createElement(o().Fragment,null,e&&o().createElement(p.Row,{width:"fill",mainAlignment:"flex-start",padding:{all:"small"}},o().createElement(p.Row,{padding:{right:"small"}},o().createElement(p.Icon,{customColor:"#D74942",icon:"AlertCircleOutline"})),o().createElement(p.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},o().createElement(B,{overflow:"break-word"},(0,h.t)("label.invitation_not_sent","You haven't sent the invitation to the attendees yet")))));var F=r(58726);const V=({event:e,invite:t})=>o().createElement(o().Fragment,null,t&&"PRI"===e?.resource?.class&&e?.resource?.calendar?.owner&&!e?.resource?.iAmOrganizer?null:o().createElement(p.Container,{orientation:"vertical",mainAlignment:"flex-start",crossAlignment:"flex-start",width:"fill",height:"fit",padding:{top:"small"}},o().createElement(F.Y,{invite:t,event:e,organizer:t.organizer,participants:t?.participants,isSummary:!0})));var L=r(14775),$=r(64505);const H=({event:e})=>{const[t]=(0,w.useTranslation)(),r=(0,h.useTags)(),l=(0,a.useMemo)((()=>(0,n.reduce)(r,((t,r)=>((0,n.includes)(e?.resource?.tags,r.id)&&t.push({...r,color:parseInt(h.ZIMBRA_STANDARD_COLORS[r?.color??0].hex,10)}),t)),[])),[e?.resource?.tags,r]),i=(0,a.useMemo)((()=>l?.length>1?"TagsMoreOutline":"Tag"),[l]),c=(0,a.useMemo)((()=>1===l?.length?l?.[0]?.color:void 0),[l]);return o().createElement(o().Fragment,null,o().createElement(p.Row,{width:"fill",padding:{bottom:"small"}},"PRI"===e.resource.class&&o().createElement(p.Row,{padding:{all:"small"}},o().createElement(p.Icon,{customColor:e.resource.calendar.color.color,icon:"LockOutline",style:{minWidth:"1rem"}})),o().createElement(p.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},o().createElement(p.Text,{size:"large",weight:"bold"},"PRI"===e.resource.class?"Private":e.title)),"PRI"!==e.resource.class&&o().createElement(o().Fragment,null,e?.resource?.isRecurrent&&o().createElement(p.Tooltip,{label:t("label.recurrent","Recurrent appointment"),placement:"top"},o().createElement(p.Row,{padding:{right:"small"}},o().createElement(p.Icon,{color:"0",icon:"Repeat"}))),o().createElement(p.Row,{padding:{right:"small"}},e?.resource?.tags?.length>0&&o().createElement(p.Icon,{color:c?`${c}`:"0",icon:i})),o().createElement(p.Row,null,e?.resource?.flags?.includes("a")&&o().createElement(p.Icon,{icon:"AttachOutline"})),!e.resource.calendar?.owner&&!e?.resource?.iAmOrganizer&&o().createElement(p.Row,null,"NE"===e.resource?.participationStatus&&o().createElement(p.Icon,{icon:"CalendarWarning",color:"primary"})))),o().createElement(p.Divider,null))};var Z=r(41869),j=r(50364),X=r(25350);const U=({event:e,onClose:t,inviteId:r})=>{const l=(0,X.s)(r),i=(0,a.useMemo)((()=>({...(0,n.omitBy)({allDay:e.allDay,start:e.start,end:e.end},n.isNil),timezone:l?.tz??y().tz.guess()})),[e.allDay,e.end,e.start,l?.tz]),c=(0,a.useMemo)((()=>(0,n.omitBy)({class:e.resource.class,location:e.resource.location,locationUrl:e.resource.locationUrl},n.isNil)),[e?.resource?.class,e?.resource?.location,e?.resource?.locationUrl]);return o().createElement(p.Container,{padding:{top:"medium",horizontal:"small",bottom:"extrasmall"},width:"25rem"},o().createElement(H,{event:e}),o().createElement(W,{neverSent:e?.resource?.inviteNeverSent}),o().createElement(T,null),i&&o().createElement($.x,{timeInfoData:i,showIcon:!0}),c&&o().createElement(P.N,{locationData:c,showIcon:!0}),l&&o().createElement(M.r,{invite:l,showIcon:!0}),l&&o().createElement(_.B,{invite:l,showIcon:!0}),l?.xprop&&o().createElement(Z.v,{xprop:l?.xprop,showIcon:!0}),l&&o().createElement(V,{event:e,invite:l}),e?.resource?.tags?.length>0&&o().createElement(L.Z,{event:e}),!(0,n.startsWith)(e?.resource?.fragment??"",j.yE)&&o().createElement(N,{event:e}),o().createElement(p.Divider,null),o().createElement(R,{onClose:t,event:e}))},q=o().memo(U),G=b()(p.Icon).withConfig({displayName:"custom-event__AlignedIcon",componentId:"sc-14ztg5t-0"})(["position:relative;top:-0.0625rem;"]),Y=({title:e,overflow:t="break-word"})=>o().createElement(p.Text,{color:"currentColor",style:{overflow:t},weight:"bold"},e),K=({isIconVisible:e,tooltipLabel:t,iconColor:r,iconName:a,disableOuterTooltip:n})=>e?o().createElement(p.Tooltip,{label:t,placement:"top"},o().createElement(p.Row,{padding:{right:"extrasmall"},onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onFocus:()=>n(!0),onBlur:()=>n(!1)},o().createElement(G,{color:r,icon:a,style:{minWidth:"1rem"}}))):null,Q=({event:e,title:t})=>{const r=(0,p.useModal)(),l=(0,a.useRef)(null),{action:i}=(0,m.useParams)(),c=(0,p.useSnackbar)(),d=(0,z.fR)(),[s]=(0,w.useTranslation)(),[u,b]=(0,a.useState)(!1),g=s("label.recurrent","Recurrent appointment"),f=(0,a.useMemo)((()=>y()(e.end).diff(e.start,"minutes")),[e.start,e.end]),v=(0,a.useCallback)((()=>{(0,h.replaceHistory)(`/${e.resource.calendar.id}/${A.x.EXPAND}/${e.resource.id}`)}),[e.resource.calendar.id,e.resource.id]),k=(0,a.useCallback)((()=>{(0,h.replaceHistory)(`/${e.resource.calendar.id}/${A.x.EXPAND}/${e.resource.id}/${e.resource.ridZ}`)}),[e?.resource?.calendar?.id,e?.resource?.id,e?.resource?.ridZ]),R=(0,a.useCallback)((()=>{if("PRI"!==e?.resource?.class||e?.haveWriteAccess)if(e?.resource?.isRecurrent){const t=r({children:o().createElement(I.g,null,o().createElement(E,{event:e,onClose:()=>t(),onSeries:v,onInstance:k}))},!0)}else(0,h.replaceHistory)(`/${e.resource.calendar.id}/${A.x.EXPAND}/${e.resource.id}/${e.resource.ridZ}`);else c({key:"private_appointment",replace:!0,type:"info",label:s("label.appointment_is_private","The appointment is private."),autoHideTimeout:3e3,hideButton:!0})}),[e,c,s,r,v,k]),S=(0,a.useCallback)((t=>{"PRI"!==e?.resource?.class||e?.haveWriteAccess?1!==t.detail||i!==A.x.EXPAND&&!(0,n.isNil)(i)||D.n.setState({summaryViewId:e.id}):c({key:"private_appointment",replace:!0,type:"info",label:s("label.appointment_is_private","The appointment is private."),autoHideTimeout:3e3,hideButton:!0})}),[e?.resource?.class,e?.haveWriteAccess,e.id,i,c,s]),O=(0,a.useCallback)((()=>{D.n.setState({summaryViewId:void 0})}),[]),T=(0,C.U)({event:e,onClose:O});(0,a.useEffect)((()=>{(0,n.isNil)(i)||D.n.setState({summaryViewId:void 0})}),[i]);const N=(0,a.useMemo)((()=>e?.resource?.tags&&0!==e?.resource?.tags?.length&&""!==e?.resource?.tags?.[0]),[e?.resource?.tags]),_=(0,a.useMemo)((()=>N||e.resource.isRecurrent?"ellipsis":"visible"),[e.resource.isRecurrent,N]);return o().createElement(o().Fragment,null,o().createElement(p.Tooltip,{label:t,placement:"top",disabled:"PRI"===e.resource.class||u},o().createElement(p.Container,{height:"100%","data-testid":"calendar-event",style:{padding:"0.15rem 0.5rem"}},o().createElement(p.Dropdown,{contextMenu:!0,width:"cal(min(100%,12.5rem))",style:{width:"100%",height:"100%"},items:T??[],display:"block",onClick:e=>{e&&e?.stopImmediatePropagation?.()}},o().createElement(p.Container,{width:"fill",height:"fill",background:"transparent",mainAlignment:"flex-start",crossAlignment:"flex-start",onDoubleClick:R,onClick:S,"data-testid":"calendar-event-inner-container"},o().createElement(p.Container,{orientation:"horizontal",width:"fill",height:"fit",crossAlignment:"center",mainAlignment:"center"},e.allDay&&e.resource.isRecurrent&&o().createElement(K,{iconName:"Repeat",iconColor:"currentColor",isIconVisible:e.resource.isRecurrent,tooltipLabel:g,disableOuterTooltip:b}),e.resource.inviteNeverSent&&o().createElement(K,{tooltipLabel:s("event.action.invitation_not_sent_yet","The invitation has not been sent yet"),isIconVisible:e.resource.inviteNeverSent,iconColor:"error",iconName:"AlertCircleOutline",disableOuterTooltip:b}),"PRI"===e.resource.class&&o().createElement(K,{tooltipLabel:s("label.private","Private"),isIconVisible:"PRI"===e.resource.class,iconColor:"currentColor",iconName:"Lock",disableOuterTooltip:b}),!e?.resource?.calendar?.owner&&!e?.resource?.iAmOrganizer&&"NE"===e.resource?.participationStatus&&o().createElement(K,{iconColor:"primary",iconName:"CalendarWarning",isIconVisible:!e?.resource?.calendar?.owner&&!e?.resource?.iAmOrganizer&&"NE"===e.resource?.participationStatus,tooltipLabel:s("event.action.needs_action","Needs action"),disableOuterTooltip:b}),o().createElement(p.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start",wrap:"nowrap"},o().createElement(p.Row,{ref:l,crossAlignment:"flex-start",mainAlignment:"space-between",takeAvailableSpace:!0},o().createElement(o().Fragment,null,!e.allDay&&o().createElement(p.Row,{takeAvailableSpace:!0,crossAlignment:"flex-start",mainAlignment:"flex-start",wrap:"nowrap"},o().createElement(p.Text,{color:"currentColor",weight:"medium",style:{overflow:_}},`${y()(e.start).format("LT")} - ${y()(e.end).format("LT")}`),o().createElement(p.Padding,{left:"small"}),f<=15&&o().createElement(o().Fragment,null,e.resource.isRecurrent&&o().createElement(K,{iconName:"Repeat",iconColor:"currentColor",isIconVisible:e.resource.isRecurrent,tooltipLabel:g,disableOuterTooltip:b}),o().createElement(Y,{title:t}))),e.allDay&&o().createElement(Y,{title:t,overflow:_}))),o().createElement(x.q,{event:e,disableOuterTooltip:b}))),f>=15&&"PRI"!==e.resource.class&&!e.allDay&&o().createElement(o().Fragment,null,o().createElement(p.Padding,{top:"extrasmall"}),o().createElement(p.Row,{wrap:"nowrap"},e.resource.isRecurrent&&o().createElement(K,{iconName:"Repeat",iconColor:"currentColor",isIconVisible:e.resource.isRecurrent,tooltipLabel:g,disableOuterTooltip:b}),o().createElement(Y,{title:t}))))))),o().createElement(p.Popover,{anchorEl:l,open:d===e.id,styleAsModal:!0,placement:"left",onClose:O},o().createElement(q,{event:e,onClose:O,inviteId:e.resource.inviteId})))},J=o().memo(Q);var ee=r(35525);const te=b().div.withConfig({displayName:"custom-event-wrapper__CustomEventWrapperStyler",componentId:"sc-hn9xfc-0"})([".rbc-event{color:",";background-color:",";border:",";box-sizing:border-box;margin:0;border-radius:0.25rem;cursor:pointer;width:100%;text-align:left;transition:border 0.15s ease-in-out,background 0.15s ease-in-out;box-shadow:0 0 0.875rem -0.5rem rgba(0,0,0,0.5);}.rbc-slot-selecting .rbc-event{cursor:inherit;pointer-events:none;}.rbc-event.rbc-selected{background-color:",";border:0.0625rem solid ",";}.rbc-event:focus{background-color:",";}.rbc-event-label{display:none;}.rbc-event-overlaps{box-shadow:-0.0625rem 0.0625rem 0.3125rem 0 rgba(51,51,51,0.5);}.rbc-event-continues-prior{border-top-left-radius:0;border-bottom-left-radius:0;}.rbc-event-continues-after{border-top-right-radius:0;border-bottom-right-radius:0;}.rbc-event-continues-earlier{border-top-left-radius:0;border-top-right-radius:0;}.rbc-event-continues-later{border-bottom-left-radius:0;border-bottom-right-radius:0;}.rbc-addons-dnd-resizable{height:100%;}.rbc-event-content{height:100%;}"],(({event:e,theme:t})=>"CANC"===e.resource.status?t.palette.gray0.regular:e.resource.calendar.color.color),(({event:e,theme:t})=>{switch(e.resource.status){case"CANC":return t.palette.gray3.regular;case"TENT":return t.palette.gray6.regular;default:return e.resource.calendar.color.background}}),(({event:e})=>`0.0625rem solid ${e.resource.calendar.color.color} !important`),(({event:e})=>(0,ee.ph)(.95,e.resource.calendar.color.background)),(({event:e})=>e.resource.calendar.color.color),(({event:e})=>(0,ee.ph)(.8,e.resource.calendar.color.background)));var re=r(62835),ae=r(58542),oe=r(82118);const ne=({children:e})=>(0,oe.ac)({minWidth:1025,minHeight:720,maxWidth:1919})?o().createElement(o().Fragment,null,e):null,le=({children:e})=>(0,oe.ac)({minWidth:1920,minHeight:720})?o().createElement(o().Fragment,null,e):null,ie=({children:e})=>(0,oe.ac)({maxWidth:1024})?o().createElement(o().Fragment,null,e):null;var ce=r(19321);const de=b().div.withConfig({displayName:"custom-toolbar__ButtonWrapper",componentId:"sc-tz3b3j-0"})(["min-width:fit-content;border:0.0625rem solid;",";&:last-child{border-left:none;border-radius:0 0.125rem 0.125rem 0;}&:first-child{border-right:none;border-radius:0.125rem 0 0 0.125rem;}&:not(:first-child):not(:last-child){border-radius:0;border-right:none;border-left:none;}"],(({color:e="primary",theme:t})=>(0,u.css)(["",";"],(0,p.pseudoClasses)(t,e,"border-color")))),se=e=>o().createElement(de,null,o().createElement(p.Button,(0,re.Z)({},e,{color:ae.tw,style:{border:0}})));var me=r(36528),ue=r(37518),be=r.n(ue);let ge=[];const pe=e=>{const{date:t,workingSchedule:r}=e;ge=(0,a.useMemo)((()=>r),[r]);const[n,l,i]=(0,a.useMemo)((()=>[new Date(y()(t).startOf("day").valueOf()),new Date(y()(t).endOf("day").valueOf()),pe.range(t)]),[t]);return o().createElement(be(),(0,re.Z)({},e,{range:i,max:l,min:n}))};pe.range=e=>{const t=y()(e).day(),r=y()(e).startOf("day");return(0,n.reduce)(ge,((e,a,o)=>(a.working&&e.push((0,me.IH)(r,o-t,"day")),e)),[])},pe.navigate=(e,t)=>{switch(t){case c.Fg.PREVIOUS:return(0,me.IH)(e,-7,"day");case c.Fg.NEXT:return(0,me.IH)(e,7,"day");default:return e}},pe.weekBounds=e=>{const t=(0,n.find)(e,(e=>e.working)),r=(0,n.findLast)(e,(e=>e.working));return{start:t?parseInt(t.day,10)-1:0,end:r?parseInt(r.day,10)-1:6}},pe.title=e=>{const{start:t,end:r}=pe.weekBounds(ge),a=y()(e).day(t),o=(0,me.IH)(a,r-t,"day");return y()(a).format("MMMM")===y()(o).format("MMMM")?`${y()(a).format("MMMM DD")} - ${y()(o).format("DD")}`:` ${y()(a).format("MMMM DD")} - ${y()(o).format("MMMM DD")}`};var he=r(45859),fe=r(42128),ye=r(73459),we=r(16990),ve=r(46609),ke=r(68242),Ee=r(12393);const xe=()=>{const e=(0,z.Y4)(),[t,r]=(0,a.useState)(e),[l]=(0,w.useTranslation)(),i=(0,p.useModal)(),c=(0,p.useSnackbar)(),d=(0,ke.T)(),s=(0,S.tc)(),u=(0,z.$V)(),b=(0,z.NX)(),{action:g}=(0,m.useParams)();(0,a.useEffect)((()=>{g&&g!==A.x.EXPAND&&(0,h.replaceHistory)("")}),[g]);const f=(0,a.useCallback)((({isAllDay:e,dropStart:t,isSeries:r,inviteStart:a,eventStart:o})=>{if(e)return t.startOf("day").valueOf();if(r){const e=t.diff(o);return a.add(e).valueOf()}return t.valueOf()}),[]),v=(0,a.useCallback)((({isAllDay:e,dropEnd:t,isSeries:r,inviteEnd:a,eventEnd:o,eventAllDay:n})=>{if(e||n)return t.startOf("day").valueOf();if(r){const e=t.diff(o);return a.add(e).valueOf()}return t.valueOf()}),[]),k=(0,a.useCallback)((({start:e,end:t,event:r,isAllDay:a,isSeries:m})=>{d((0,ve.E)({inviteId:r?.resource?.inviteId,ridZ:r?.resource?.ridZ})).then((({payload:u})=>{if(u){const b=y()(u.m[0].inv[0].comp[0].s[0].u),g=y()(r.start),p=y()(e),h=y()(u.m[0].inv[0].comp[0].e[0].u),w=y()(r.end),k=y()(t),E=r.allDay,x=f({isSeries:m,dropStart:p,isAllDay:a,inviteStart:b,eventStart:g}),C=v({isSeries:m,dropEnd:k,isAllDay:a,inviteEnd:h,eventEnd:w,eventAllDay:E}),z=(0,we.I)(u.m[0]),D=(e,t)=>{const o={dispatch:d,folders:s,start:x,end:C,allDay:!!a,panel:!1},i=(0,fe.kn)({event:r,invite:z,context:{...o,...(0,n.omitBy)({richText:t?.text?.[1],plainText:t?.text?.[0]},n.isNil)}});(0,ye.V)({draft:e,editor:i,isNew:!1,dispatch:d}).then((e=>{if(e?.response){const t=e?.response;c({key:"calendar-moved-root",replace:!0,type:t?"info":"warning",hideButton:!0,label:t?l("message.snackbar.calendar_edits_saved","Edits saved correctly"):l("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3})}}))};if((0,n.size)(z.participants)>0&&(z.isException||r.resource.ridZ)&&z.isOrganizer&&!r.resource.inviteNeverSent){const e=i({children:o().createElement(I.g,null,o().createElement(Ee.R,{title:l("label.edit"),onClose:()=>e(),confirmLabel:l("action.send_edit","Send Edit"),onConfirm:t=>{D(!1,t),e()},invite:z,isEdited:!0}))},!0)}else D(!0)}}))}),[s,i,c,d,v,f,l]);return{onEventDropOrResize:(0,a.useCallback)((({start:e,end:t,event:r,isAllDay:a})=>{if(a&&r.resource.isRecurrent&&!r.resource.isException)c({key:"recurrent-moved-in-allDay",replace:!0,type:"warning",hideButton:!0,label:l("recurrent_in_allday","You cannot drag a recurrent appointment in a all day slot"),autoHideTimeout:3e3});else if(!(0,n.isEqual)(r.start,e)||!(0,n.isEqual)(r.end,t)||r.allDay!==!!a&&y()(r.start).day()===y()(r.end).day()){const l=()=>{const o={...r,resource:(0,n.omit)(r.resource,"ridZ")};k({start:e,end:t,event:o,isAllDay:a,isSeries:!0})},c=()=>{k({start:e,end:t,event:r,isAllDay:a})};if(r.resource.isRecurrent){const e=i({children:o().createElement(I.g,null,o().createElement(E,{event:r,onClose:()=>e(),onSeries:l,onInstance:c}))},!0)}else k({start:e,end:t,event:r,isAllDay:a})}}),[i,c,k,l]),handleSelect:(0,a.useCallback)((e=>{if(!u&&!g){const t=y()(e.end).hours()===y()(e.start).hours()&&y()(e.end).minutes()===y()(e.start).minutes()&&!y()(e.start).isSame(y()(e.end)),r=t?y()(e.end).subtract(1,"day"):y()(e.end),a=(0,fe.kn)({context:{dispatch:d,folders:s,start:y()(e.start).valueOf(),end:r.valueOf(),allDay:t??!1,freeBusy:t?"F":"B",panel:!1}});(0,h.addBoard)({url:`${j.jh}/`,title:a?.title??"",editor:a})}}),[g,s,d,u]),onRangeChange:(0,a.useCallback)((e=>{if(e.length){const t=(0,me.VV)(...e),r=(0,me.Fp)(...e);b({start:y()(t).startOf("day").valueOf(),end:y()(r).endOf("day").valueOf()})}else b({start:y()(e.start).startOf("day").valueOf(),end:y()(e.end).endOf("day").valueOf()})}),[b]),onNavigate:(0,a.useCallback)((e=>(D.n.setState((t=>({...t,date:e}))),r(e))),[r]),date:t}};var Ce=r(37255),Ie=r(56346),ze=r(11783),De=r(89323),Ae=r(53776),Re=r(63610),Se=r(22797);const Oe=s()(c.f),Te={month:!0,week:!0,day:!0,work_week:pe},Ne=()=>{const e=(0,ke.T)(),t=(0,z.Zo)(),r=(0,z.p)(),o=(0,Ce.t)();return(0,a.useEffect)((()=>{e((0,De.C)({spanEnd:r,spanStart:t,query:o}))}),[e,r,o,t]),null},_e={toolbar:({label:e,onView:t,onNavigate:r,view:n})=>{const[l]=(0,w.useTranslation)(),i=(0,a.useCallback)((()=>r("TODAY")),[r]),c=(0,a.useCallback)((()=>r("NEXT")),[r]),d=(0,a.useCallback)((()=>r("PREV")),[r]),s=(0,a.useCallback)((()=>(D.n.setState({calendarView:"week"}),t("week"))),[t]),m=(0,a.useCallback)((()=>(D.n.setState({calendarView:"day"}),t("day"))),[t]),u=(0,a.useCallback)((()=>(D.n.setState({calendarView:"month"}),t("month"))),[t]),b=(0,a.useCallback)((()=>(D.n.setState({calendarView:"work_week"}),t("work_week"))),[t]),g=(0,a.useMemo)((()=>"month"===n?l("previous_month","Previous month"):"week"===n||"work_week"===n?l("previous_week","Previous week"):l("previous_day","Previous day")),[l,n]),h=(0,a.useMemo)((()=>"month"===n?l("next_month","Next month"):"week"===n||"work_week"===n?l("next_week","Next week"):l("next_day","Next day")),[l,n]);return o().createElement("div",{style:{width:"100%"}},o().createElement(ne,null,o().createElement("div",{style:{padding:"16px"}},o().createElement("div",{style:{display:"flex",width:"100%",height:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},o().createElement("div",null,o().createElement(p.Button,{color:ae.tw,label:l("label.today","today"),type:"outlined",onClick:i,minWidth:"fit-content"})),o().createElement("div",{style:{display:"flex",flexDirection:"row"}},o().createElement(p.Tooltip,{label:g},o().createElement(p.IconButton,{iconColor:ae.Li,icon:"ChevronLeft",onClick:d,minWidth:"max-content"})),o().createElement(p.Tooltip,{label:h},o().createElement(p.IconButton,{iconColor:ae.Li,icon:"ChevronRight",onClick:c,minWidth:"max-content"}))),o().createElement("div",null,o().createElement(p.Button,{color:ae.tw,type:"ghost",label:e,onClick:()=>null,"data-testid":"CurrentDateContainer"})),o().createElement("div",{style:{display:"flex",flexDirection:"row"}},o().createElement(se,{backgroundColor:"month"===n?ae.Ou:void 0,label:l("label.month","month"),type:"outlined",onClick:u,"data-testid":"MonthButton"}),o().createElement(se,{backgroundColor:"week"===n?ae.Ou:void 0,label:l("label.week","week"),type:"outlined",onClick:s,"data-testid":"WeekButton"}),o().createElement(se,{backgroundColor:"day"===n?ae.Ou:void 0,label:l("label.day","day"),type:"outlined",onClick:m,"data-testid":"DayButton"}),o().createElement(se,{backgroundColor:"work_week"===n?ae.Ou:void 0,label:l("label.work_week","work week"),type:"outlined",onClick:b,"data-testid":"WorkWeekButton"}))))),o().createElement(le,null,o().createElement("div",{style:{padding:"16px"}},o().createElement("div",{style:{display:"flex",width:"100%",height:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},o().createElement("div",null,o().createElement(p.Button,{color:ae.tw,label:l("label.today","today"),type:"outlined",onClick:i,minWidth:"fit-content"})),o().createElement("div",{style:{display:"flex",flexDirection:"row"}},o().createElement(p.Tooltip,{label:g},o().createElement(p.IconButton,{iconColor:ae.Li,icon:"ChevronLeft",onClick:d,minWidth:"max-content"})),o().createElement(p.Tooltip,{label:h},o().createElement(p.IconButton,{iconColor:ae.Li,icon:"ChevronRight",onClick:c,minWidth:"max-content"}))),o().createElement("div",null,o().createElement(p.Button,{type:"ghost",label:e,onClick:()=>null,"data-testid":"CurrentDateContainer"})),o().createElement("div",{style:{display:"flex",flexDirection:"row"}},o().createElement(se,{backgroundColor:"month"===n?ae.Ou:void 0,label:l("label.month","month"),type:"outlined",onClick:u,"data-testid":"MonthButton"}),o().createElement(se,{backgroundColor:"week"===n?ae.Ou:void 0,label:l("label.week","week"),type:"outlined",onClick:s,"data-testid":"WeekButton"}),o().createElement(se,{backgroundColor:"day"===n?ae.Ou:void 0,label:l("label.day","day"),type:"outlined",onClick:m,"data-testid":"DayButton"}),o().createElement(se,{backgroundColor:"work_week"===n?ae.Ou:void 0,label:l("label.work_week","work week"),type:"outlined",onClick:b,"data-testid":"WorkWeekButton"}))))),o().createElement(ie,null,o().createElement(ce.Z,{variant:"outlined"},o().createElement("div",{style:{padding:"8px"}},o().createElement("div",{style:{display:"flex",width:"100%",height:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},o().createElement("div",null,o().createElement(p.Button,{color:ae.tw,label:l("label.today","today"),type:"outlined",onClick:i,minWidth:"fit-content"})),o().createElement("div",{style:{display:"flex",flexDirection:"row"}},o().createElement(p.Tooltip,{label:g},o().createElement(p.IconButton,{iconColor:ae.Li,icon:"ChevronLeft",onClick:d,minWidth:"max-content"})),o().createElement(p.Tooltip,{label:h},o().createElement(p.IconButton,{iconColor:ae.Li,icon:"ChevronRight",onClick:c,minWidth:"max-content"}))),o().createElement("div",null,o().createElement(p.Button,{color:ae.tw,type:"ghost",label:e,onClick:()=>null,"data-testid":"CurrentDateContainer"}))),o().createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"8px",justifyContent:"center",width:"100%"}},o().createElement(se,{backgroundColor:"month"===n?ae.Ou:void 0,label:l("label.month","month"),type:"outlined",onClick:u,"data-testid":"MonthButton"}),o().createElement(se,{backgroundColor:"week"===n?ae.Ou:void 0,label:l("label.week","week"),type:"outlined",onClick:s,"data-testid":"WeekButton"}),o().createElement(se,{backgroundColor:"day"===n?ae.Ou:void 0,label:l("label.day","day"),type:"outlined",onClick:m,"data-testid":"DayButton"}),o().createElement(se,{backgroundColor:"work_week"===n?ae.Ou:void 0,label:l("label.work_week","work week"),type:"outlined",onClick:b,"data-testid":"WorkWeekButton"}))))))},event:J,eventWrapper:function({event:e,children:t}){return o().createElement(te,{event:e},t)}};function Pe(){const e=(0,ke.C)(Ae.sC),t=(0,Ie.X)(),r=(0,a.useContext)(u.ThemeContext),l=(0,he.j)(),d=(0,z.XU)(),s=l.zimbraPrefTimeZoneId,b=(0,z.$V)(),p=l.zimbraPrefCalendarFirstDayOfWeek??0,h=(0,c.Zt)(i()),f=(0,a.useMemo)((()=>t?.[10]??{}),[t]),{action:y}=(0,m.useParams)(),{onEventDropOrResize:w,handleSelect:v,onRangeChange:k,onNavigate:E,date:x}=xe();l.zimbraPrefLocale&&i().updateLocale(l.zimbraPrefLocale,{week:{dow:p}});const C=(0,a.useMemo)((()=>(0,Se.C)(l.zimbraPrefCalendarWorkingHours)),[l?.zimbraPrefCalendarWorkingHours]),I=(0,a.useMemo)((()=>(0,ze.F0)(e,t)),[e,t]),D=(0,a.useMemo)((()=>Number((0,n.minBy)(C,(e=>e?.start))?.start?.split("").splice(0,2).join(""))),[C]),A=(0,a.useCallback)((e=>C?.[i()(e).day()]?.working&&i()(e).tz(s).format("HHmm")>=C[i()(e).day()].start&&i()(e).tz(s).format("HHmm")<C[i()(e).day()].end?r.palette.gray6.regular:r.palette.gray5.regular),[r?.palette?.gray5?.regular,r?.palette?.gray6?.regular,s,C]),R=(0,a.useCallback)((e=>C?.[i()(e).day()]?.working?r.palette.gray3.regular:r.palette.gray6.regular),[r?.palette?.gray3?.regular,r?.palette?.gray6?.regular,C]),S=(0,a.useCallback)((e=>({style:{backgroundColor:e.resource.calendar.color.background,color:e.resource.calendar.color.color,border:`0.0625rem solid ${e.resource.calendar.color.color}`,padding:0}})),[]),O=(0,a.useCallback)((e=>({style:{backgroundColor:A(e),borderColor:`${r.palette.gray3.regular}`,borderRight:`0.0625rem solid ${r.palette.gray3.regular}`}})),[A,r?.palette?.gray3?.regular]),T=(0,a.useCallback)((e=>({style:{backgroundColor:C?.[i()(e).day()]?.working?i()().isSame(i()(e),"day")?r.palette.highlight.regular:r.palette.gray6.regular:r.palette.gray3.regular,borderBottom:`0.0625rem solid ${R(e)}`}})),[R,r.palette.gray3.regular,r.palette.gray6.regular,r.palette.highlight.regular,C]),N=(0,a.useMemo)((()=>{if(d)return d;switch(l.zimbraPrefCalendarInitialView){case"month":return"month";case"week":return"week";case"day":return"day";default:return"work_week"}}),[d,l?.zimbraPrefCalendarInitialView]),_=(0,a.useCallback)((e=>{if(e){const r=(0,n.find)(t,["id",e.resource.calendar.id])?.absFolderPath;return(0,Re.f)(e,r)}return!1}),[t]),P=(0,a.useCallback)((e=>{if(e){const r=(0,n.find)(t,["id",e.resource.calendar.id])?.absFolderPath;return(0,Re.f)(e,r)&&(!e.allDay||!e.allDay&&i()(e.start).day()===i()(e.end).day())}return!1}),[t]),M=(0,a.useMemo)((()=>new Date(0,0,0,D,-15,0)),[D]);return o().createElement(o().Fragment,null,!(0,n.isEmpty)(t)&&o().createElement(Ne,null),o().createElement(g,{primaryCalendar:f,summaryViewOpen:b,action:y}),o().createElement(Oe,{selectable:!0,localizer:h,defaultView:N,events:I,date:x,onNavigate:E,startAccessor:"start",endAccessor:"end",style:{width:"100%"},components:_e,views:Te,tooltipAccessor:null,onRangeChange:k,dayPropGetter:T,slotPropGetter:O,eventPropGetter:S,workingSchedule:C,onSelectSlot:v,scrollToTime:M,onEventDrop:w,onEventResize:w,formats:{eventTimeRangeFormat:()=>""},resizable:!0,resizableAccessor:P,onSelecting:()=>!b&&!y,draggableAccessor:_}))}}}]);
//# sourceMappingURL=calendar-component.3857a3db.chunk.js.map