"use strict";(self.webpackChunkcarbonio_contacts_ui=self.webpackChunkcarbonio_contacts_ui||[]).push([[631],{4413:(e,t,n)=>{n.d(t,{q:()=>l});var i=n(7559),r=n(4702),a=n(8153);var o=n(9812);const l=()=>{const[e]=(0,a.useTranslation)(),t=(0,r.useSnackbar)(),n=(0,i.useCallback)((()=>!0),[]),l=(0,i.useCallback)((n=>{n&&(e=>window.parent.navigator.clipboard?window.parent.navigator.clipboard.writeText(e):(e=>{const t=window.parent.document.createElement("textarea");window.parent.document.body.appendChild(t),t.value=e,t.select();const n=window.parent.document.execCommand("copy");return window.parent.document.body.removeChild(t),new Promise(((e,t)=>{n?e():t()}))})(e))(n).then((()=>{t({key:`clipboard-copy-success-${Date.now()}`,replace:!0,type:"success",hideButton:!0,label:e("snackbar.email_copied_to_clipboard","Email copied to clipboard.")})}))}),[t,e]);return(0,i.useMemo)((()=>({id:o.kM.copyToClipboard,label:e("action.copy","Copy"),icon:"Copy",canExecute:n,execute:l})),[n,l,e])}},1722:(e,t,n)=>{n.d(t,{m:()=>l});var i=n(7559),r=n(4577),a=n(8153),o=n(9812);const l=()=>{const[e]=(0,a.useTranslation)(),[t,n]=(0,r.useIntegratedFunction)("composePrefillMessage"),l=(0,i.useCallback)((e=>{e&&t({recipients:e.map((e=>({type:"t",address:"string"==typeof e?e:e.email,email:"string"==typeof e?e:e.email,isGroup:"string"!=typeof e&&e.isGroup})))})}),[t]),s=(0,i.useCallback)((()=>n),[n]);return(0,i.useMemo)((()=>({id:o.kM.sendEmail,label:e("action.mail","Send e-mail"),icon:"EmailOutline",canExecute:s,execute:l})),[s,l,e])}},8989:(e,t,n)=>{n.d(t,{E:()=>c});var i=n(7559),r=n.n(i),a=n(4702),o=n(4710);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}const s=n.n(o)()((({withTooltip:e,children:t=null,...n})=>e?r().createElement(a.TextWithTooltip,n,t):r().createElement(a.Text,n,t))).withConfig({displayName:"Text__StyledText",componentId:"sc-w6pptn-0"})(["width:",";display:",";font-style:",";text-align:",";line-height:",";"],(({$width:e})=>e),(({$inline:e})=>e&&"inline"),(({$italic:e})=>e&&"italic"),(({$centered:e})=>e&&"center"),(({$lineHeight:e})=>e)),c=({width:e,centered:t,italic:n,inline:i,lineHeight:a=1.5,withTooltip:o=!1,...c})=>r().createElement(s,l({$width:e,$centered:t,$italic:n,$inline:i,$lineHeight:a,withTooltip:o},c))},9128:(e,t,n)=>{n.d(t,{H:()=>m});var i=n(7559),r=n.n(i),a=n(4702),o=n(4836),l=n(8989),s=n(4413);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}const m=({displayName:e,email:t,...n})=>{const m=(0,s.q)(),d=(0,i.useCallback)((()=>{m.execute(t)}),[m,t]);return r().createElement(a.Container,c({orientation:"horizontal",gap:"1rem",mainAlignment:"flex-start",crossAlignment:"flex-start",height:"auto","data-testid":"info-container"},n),r().createElement(o.Gz,{shape:"square",icon:"DistributionListOutline",label:e||t,size:"large"}),r().createElement(a.Container,{minWidth:0,crossAlignment:"flex-start",mainAlignment:"center"},r().createElement(l.E,{weight:"bold"},e),r().createElement(a.Row,{gap:"0.25rem"},r().createElement(l.E,{size:e?"small":"medium",weight:e?"regular":"bold",color:e?"gray1":"text"},t),r().createElement(a.IconButton,{icon:m.icon,color:"primary",onClick:d,type:"ghost"}))))}},124:(e,t,n)=>{n.d(t,{$:()=>o});var i=n(7559),r=n.n(i),a=n(4702);const o=()=>r().createElement(a.Icon,{icon:"FunnelOutline",size:"large"})},885:(e,t,n)=>{n.d(t,{P:()=>s});var i=n(7559),r=n.n(i),a=n(2509),o=n(4702);const l=()=>r().createElement(o.Row,{width:"fill",mainAlignment:"space-between",padding:"small",gap:"0.5rem","data-testid":"shimmed-list-item",wrap:"nowrap"},r().createElement(o.Row,{wrap:"nowrap",gap:"0.5rem",flexShrink:1,minWidth:"1rem"},r().createElement(o.Row,{flexShrink:0},r().createElement(o.Shimmer.Avatar,{size:"medium"})),r().createElement(o.Row,{flexShrink:1,minWidth:"1rem"},r().createElement(o.Shimmer.Text,{size:"small",width:"25ch"})))),s=e=>(0,a.times)(e,(e=>r().createElement(l,{key:e})))},1838:(e,t,n)=>{n.d(t,{S:()=>d});var i=n(7559),r=n.n(i),a=n(4702),o=n(2509),l=n(8153),s=n(885),c=n(693),m=n(8989);const d=({managers:e,loading:t})=>{const[n]=(0,l.useTranslation)(),d=(0,i.useMemo)((()=>(0,o.map)(e,(e=>r().createElement(c.A,{email:e.name,key:e.id})))),[e]);return r().createElement(a.Container,{mainAlignment:"flex-start",crossAlignment:"flex-start",gap:"0.5rem"},r().createElement(a.Row,null,r().createElement(m.E,{size:"small",color:"secondary"},n("displayer.distribution_list.label.manager_total","Manager list {{total}}",{total:e?.length??0}))),r().createElement(a.Container,{minHeight:0,mainAlignment:"flex-start"},r().createElement(a.ListV2,null,!t&&d||(0,s.P)(3))))}},693:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(7559),r=n.n(i),a=n(4702),o=n(4413),l=n(1722);const s=({email:e})=>{const t=(0,l.m)(),n=(0,o.q)(),s=(0,i.useCallback)((()=>{t.execute([e])}),[e,t]),c=(0,i.useCallback)((()=>{n.execute(e)}),[n,e]),m=(0,i.useMemo)((()=>t.canExecute()),[t]);return r().createElement(a.Row,{width:"fill",mainAlignment:"space-between",padding:"small",gap:"0.5rem","data-testid":"member-list-item",wrap:"nowrap"},r().createElement(a.Row,{wrap:"nowrap",gap:"0.5rem",flexShrink:1,minWidth:"1rem"},r().createElement(a.Avatar,{size:"medium",label:e}),r().createElement(a.Row,{flexShrink:1,minWidth:"1rem"},r().createElement(a.TextWithTooltip,{size:"small"},e))),r().createElement(a.Row,{wrap:"nowrap",gap:"0.25rem",flexShrink:1,minWidth:"fit-content"},m&&r().createElement(a.Button,{type:"outlined",size:"medium",icon:t.icon,onClick:s,minWidth:"fit-content"}),r().createElement(a.Button,{type:"outlined",size:"medium",icon:n.icon,onClick:c,minWidth:"fit-content"})))}},4836:(e,t,n)=>{n.d(t,{BG:()=>c,FE:()=>s,Gz:()=>u,HF:()=>m,J5:()=>o,Np:()=>d,sf:()=>l});var i=n(4702),r=n(4710),a=n.n(r);const o=a()(i.Row).withConfig({displayName:"styled-components__HoverRow",componentId:"sc-1p4lrn0-0"})(["position:relative;cursor:pointer;background:",";&:hover{background:",";}"],(({theme:e})=>e.palette.transparent.regular),(({theme:e})=>e.palette.transparent.hover)),l=a()(i.Row).withConfig({displayName:"styled-components__HoverContainer",componentId:"sc-1p4lrn0-1"})([""]),s=a()(i.Row).withConfig({displayName:"styled-components__HoverBarContainer",componentId:"sc-1p4lrn0-2"})(["display:none;position:absolute;top:0;right:0;background:linear-gradient(to right,transparent,currentColor);"]),c=a()(i.Container).withConfig({displayName:"styled-components__ListItemContainer",componentId:"sc-1p4lrn0-3"})(["position:relative;cursor:pointer;","{display:none;}&:hover{","{display:flex;}}"],s,s),m=a()(i.ListItem).attrs((({background:e,selectedBackground:t,activeBackground:n,active:i,selected:r})=>({backgroundColor:i&&n||r&&t||e}))).withConfig({displayName:"styled-components__StyledListItem",componentId:"sc-1p4lrn0-4"})([""," transition:none;",""],(({backgroundColor:e,theme:t})=>e&&(0,i.pseudoClasses)(t,e,"color")),(({backgroundColor:e,theme:t})=>e&&(0,r.css)(["","{background:linear-gradient(to right,transparent,",");}&:focus ","{background:linear-gradient( to right,transparent,"," );}&:hover ","{background:linear-gradient( to right,transparent,"," );}&:active ","{background:linear-gradient( to right,transparent,"," );}"],s,(0,i.getColor)(e,t),s,(0,i.getColor)(`${e}.focus`,t),s,(0,i.getColor)(`${e}.hover`,t),s,(0,i.getColor)(`${e}.active`,t)))),d=a()(i.Container).withConfig({displayName:"styled-components__ScrollableContainer",componentId:"sc-1p4lrn0-5"})(["overflow-y:auto;"]),u=a()(i.Avatar).withConfig({displayName:"styled-components__CustomIconAvatar",componentId:"sc-1p4lrn0-6"})(["& > svg{max-width:1.5rem;max-height:1.5rem;min-width:1.5rem;min-height:1.5rem;}"])},4039:(e,t,n)=>{n.d(t,{C:()=>o});var i=n(7559),r=n(8153),a=n(9812);const o=()=>{const[e]=(0,r.useTranslation)(),[t,n]=(0,i.useState)(a.mp.details);return{items:(0,i.useMemo)((()=>[{id:a.mp.details,label:e("distribution_list.tabs.details","Details")},{id:a.mp.members,label:e("distribution_list.tabs.members","Member list")},{id:a.mp.managers,label:e("distribution_list.tabs.managers","Manager list")}]),[e]),selected:t,onChange:(0,i.useCallback)(((e,t)=>{n(t)}),[])}}},8312:(e,t,n)=>{n.d(t,{e0:()=>s}),n(3619);var i=n(2509),r=n(1621);function a(e,t){const n=e.toLowerCase(),i=t.toLowerCase();return n>i?1:i>n?-1:0}const o={orderedContactGroups:[],unorderedContactGroups:[],offset:0};function l(e,t,n){const r=(0,i.findIndex)(e,(e=>a(n.title,e.title)<0));if(r<e.length&&r>=0)e.splice(r,0,n);else if(0===t.length)t.push(n);else{const e=(0,i.findIndex)(t,(e=>a(n.title,e.title)<0));t.splice(e,0,n)}}const s=(0,r.vt)()(((e,t)=>({...o,reset:()=>{e(o)},updateContactGroup:n=>{const{orderedContactGroups:i,unorderedContactGroups:r,offset:a}=t(),o=i.findIndex((e=>e.id===n.id)),s=[...i],c=[...r];if(o>=0)s.splice(o,1),l(s,c,n),e((()=>({orderedContactGroups:s,unorderedContactGroups:c,offset:s.length===i.length||-1===a?a:a+s.length-i.length})));else{const t=r.findIndex((e=>e.id===n.id));if(!(t>=0))throw new Error("Contact group not found");c.splice(t,1),l(s,c,n),e((()=>({orderedContactGroups:s,unorderedContactGroups:c,offset:s.length===i.length||-1===a?a:a+s.length-i.length})))}},setOffset:t=>e((()=>({offset:t}))),addContactGroups:n=>{const{orderedContactGroups:r,unorderedContactGroups:a}=t();if(a.length>0){const t=(0,i.differenceBy)(a,n,(e=>e.id));e((()=>({orderedContactGroups:[...r??[],...n],unorderedContactGroups:t})))}else e((()=>({orderedContactGroups:[...r??[],...n]})))},removeContactGroup:n=>{const{orderedContactGroups:i,unorderedContactGroups:r,offset:a}=t();if(i.findIndex((e=>e.id===n))>=0)e((()=>({orderedContactGroups:i.filter((e=>e.id!==n)),offset:a-1})));else{if(!(r.findIndex((e=>e.id===n))>=0))throw new Error("Contact group not found");e((()=>({unorderedContactGroups:r.filter((e=>e.id!==n))})))}},addContactGroupInSortedPosition:n=>{const{orderedContactGroups:i,unorderedContactGroups:r,offset:a}=t(),o=[...i],s=[...r];l(o,s,n),e((()=>({orderedContactGroups:o,unorderedContactGroups:s,offset:o.length===i.length||-1===a?a:a+o.length-i.length})))}})))},7572:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie});var i=n(7559),r=n.n(i),a=n(4702),o=n(2509),l=n(8698),s=n(8153),c=n(693),m=n(4836),d=n(8989);const u=({contactGroup:e})=>{const[t]=(0,s.useTranslation)(),{members:n,title:o}=e,l=(0,i.useMemo)((()=>n.map((e=>r().createElement(c.A,{email:e,key:e})))),[n]);return r().createElement(a.Container,{padding:{horizontal:"1rem",top:"1rem",bottom:"0"},crossAlignment:"flex-start",mainAlignment:"flex-start",gap:"1rem",background:"gray6",minHeight:"0",height:"auto"},r().createElement(a.Container,{height:"fit",orientation:"horizontal",mainAlignment:"flex-start",gap:"1rem"},r().createElement(m.Gz,{label:o,size:"large",icon:"PeopleOutline"}),r().createElement(a.Container,{height:"fit",crossAlignment:"flex-start",minWidth:0},r().createElement(d.E,{weight:"bold"},o),r().createElement(d.E,{size:"small",color:"secondary"},t("contactGroupDisplayer.label.members_total","Addresses: {{count}}",{count:n.length})))),r().createElement(a.Divider,{color:"gray3"}),r().createElement(a.Row,{padding:{top:"0.5rem"}},r().createElement(d.E,{color:"secondary"},t("board.newContactGroup.input.contact_input.title","Addresses list"))),r().createElement(a.Container,{minHeight:"0",mainAlignment:"flex-start"},r().createElement(a.ListV2,null,l)))},p=({actions:e})=>{const t=(0,i.useMemo)((()=>e.map((e=>r().createElement(a.Button,{key:e.id,label:e.label,type:"outlined",onClick:e.onClick,size:"medium",backgroundColor:"transparent",disabled:e.disabled,color:e.color})))),[e]);return r().createElement(a.Container,{orientation:"horizontal",height:"auto",padding:{vertical:"0.5rem"},gap:"0.25rem",mainAlignment:"flex-end"},t)};var g=n(4710),h=n.n(g),f=n(6815),b=n(9812);const E=()=>{const{navigateTo:e}=(0,f.c)(),{id:t,route:n,filter:r}=(0,l.useParams)(),a=(0,i.useRef)();(0,i.useEffect)((()=>{a.current=t}),[t]);const o=(0,i.useCallback)((e=>a.current===e),[]),s=(0,i.useMemo)((()=>n===b.M3.route.distributionLists?`${n}/${r??""}`:n??""),[r,n]),c=(0,i.useCallback)(((t,n)=>{e(`${s}/${t}`,n)}),[s,e]),m=(0,i.useCallback)((t=>{e(s,t)}),[s,e]);return{activeItem:t,isActive:o,setActive:c,removeActive:m}},C=h()(a.Icon).withConfig({displayName:"displayer-header__CustomIcon",componentId:"sc-18foxm5-0"})(["width:1.125rem;height:1.125rem;"]),w=({title:e,icon:t})=>{const{removeActive:n}=E(),o=(0,i.useCallback)((()=>{n()}),[n]);return r().createElement(a.Container,{orientation:"vertical",width:"fill",height:"auto","data-testid":"displayer-header"},r().createElement(a.Container,{mainAlignment:"flex-start",orientation:"horizontal",width:"fill",height:"auto",padding:{top:"0.5rem",right:"0.5rem",bottom:"0.5rem",left:"1rem"},gap:"0.75rem"},r().createElement(a.Container,{width:"fit-content",height:"fit-content",minWidth:"fit-content",minHeight:"fit-content"},r().createElement(C,{icon:t})),r().createElement(d.E,{withTooltip:!0},e),r().createElement(a.Container,{margin:{left:"auto"},width:"fit",height:"fit",flexShrink:0},r().createElement(a.IconButton,{icon:"CloseOutline",size:"medium",onClick:o}))),r().createElement(a.Divider,{color:"gray3"}))};n(3619);var y=n(4577),x=n(8312);const v=()=>{const e=(0,x.e0)((e=>e.orderedContactGroups)),t=(0,x.e0)((e=>e.unorderedContactGroups)),{activeItem:n}=E();return[...e,...t].find((e=>e.id===n))};var k=n(4362),A=n(1722);const G=e=>{const t=(()=>{const[e]=(0,s.useTranslation)(),t=(0,a.useModal)(),n=(0,a.useSnackbar)(),{removeContactGroup:o}=(0,x.e0)(),{navigateTo:l}=(0,f.c)(),c=v(),m=(0,i.useCallback)((()=>!0),[]),u=(0,i.useCallback)((i=>{if(void 0===i)return;const s=t({title:e("modal.delete.contactGroup.header",'Delete "{{contactGroupName}}"',{contactGroupName:i.title}),confirmLabel:e("modal.delete.button.confirm","delete"),confirmColor:"error",onConfirm:()=>{s(),k.u.deleteContact([i.id]).then((()=>{const t=`${b.BJ}-${i.id}`;(0,y.getBoardById)(t)&&(0,y.closeBoard)(t),c?.id===i.id&&l(b.M3.route.contactGroups,{replace:!0}),o(i.id),n({type:"success",key:`snackbar-${Date.now()}`,label:e("snackbar.delete_contact_group.confirm.success","Contact group successfully deleted"),hideButton:!0})})).catch((t=>{n({key:`snackbar-${Date.now()}`,type:"error",label:e("label.error_try_again","Something went wrong, please try again"),hideButton:!0}),console.error(t)}))},showCloseIcon:!0,onClose:()=>{s()},children:r().createElement(a.Container,{padding:{vertical:"medium"},crossAlignment:"flex-start"},r().createElement(d.E,{lineHeight:1.3125,overflow:"break-word",size:"small"},e("modal.delete.contactGroup.body1","Are you sure to delete the selected contact group?")),r().createElement(d.E,{lineHeight:1.3125,overflow:"break-word",size:"small"},e("modal.delete.contactGroup.body2","If you delete it will be lost forever.")))})}),[c?.id,t,n,l,o,e]);return(0,i.useMemo)((()=>({id:b.kM.deleteCG,label:e("action.contactGroup.delete","Delete"),icon:"Trash2Outline",canExecute:m,execute:u,color:"error"})),[u,m,e])})(),n=(()=>{const[e]=(0,s.useTranslation)(),t=(0,A.m)(),n=(0,i.useCallback)((e=>void 0!==e&&e.members.length>0&&t.canExecute()),[t]),r=(0,i.useCallback)((e=>{void 0!==e&&n(e)&&t.execute(e.members)}),[n,t]);return(0,i.useMemo)((()=>({id:b.kM.sendEmailCG,label:e("action.mail","Send e-mail"),icon:"EmailOutline",canExecute:n,execute:r})),[n,r,e])})(),o=(()=>{const[e]=(0,s.useTranslation)(),t=(0,i.useCallback)((()=>!0),[]),n=(0,i.useCallback)((e=>{if(void 0===e)return;const t=(0,y.getBoardById)(`${b.BJ}-${e.id}`);t?((0,y.setCurrentBoard)(t.id),(0,y.reopenBoards)()):(0,y.addBoard)({id:`${b.BJ}-${e.id}`,url:b.BJ,title:e.title,context:{contactGroupId:e.id}})}),[]);return(0,i.useMemo)((()=>({id:b.kM.editCG,label:e("action.edit","Edit"),icon:"Edit2Outline",canExecute:t,execute:n})),[t,n,e])})();return(0,i.useMemo)((()=>{const i=[];return n.canExecute(e)&&i.push({id:n.id,label:n.label,onClick:()=>{n.execute(e)},icon:n.icon}),o.canExecute()&&i.push({id:o.id,label:o.label,icon:o.icon,onClick:()=>{o.execute(e)}}),t.canExecute()&&i.push({id:t.id,label:t.label,onClick:()=>{t.execute(e)},icon:t.icon,color:t.color}),i}),[e,t,o,n])},_=({contactGroup:e})=>{const t=G(e);return r().createElement(a.Container,{background:"gray5",mainAlignment:"flex-start",padding:{bottom:"3rem"}},r().createElement(w,{title:e.title,icon:"PeopleOutline"}),r().createElement(a.Container,{padding:{horizontal:"1rem"},mainAlignment:"flex-start",minHeight:0,maxHeight:"100%"},r().createElement(p,{actions:t}),r().createElement(u,{contactGroup:e})))},M=h()(a.Icon).withConfig({displayName:"empty-displayer__CustomIcon",componentId:"sc-udfjrw-0"})(["width:2rem;height:2rem;"]),O=({icon:e,title:t,description:n})=>r().createElement(a.Container,null,r().createElement(M,{icon:e,color:"secondary"}),r().createElement(a.Padding,{all:"medium"},r().createElement(d.E,{color:"gray1",overflow:"break-word",weight:"bold",size:"large",centered:!0},t)),r().createElement(d.E,{size:"small",color:"gray1",overflow:"break-word",width:"60%",centered:!0},n)),I=()=>{const e=v(),{activeItem:t,removeActive:n}=E();(0,i.useEffect)((()=>{void 0!==t&&void 0===e&&n()}),[t,e,n]);const[o]=(0,s.useTranslation)();return r().createElement(a.Container,{orientation:"vertical",mainAlignment:"flex-start",crossAlignment:"flex-start","data-testid":"displayer"},e&&r().createElement(_,{contactGroup:e})||r().createElement(O,{description:o("emptyDisplayer.contactGroup.hint","Click the “NEW” button to create a new contacts group."),title:o("displayer.title3","Stay in touch with your colleagues."),icon:"PeopleOutline"}))};function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},z.apply(this,arguments)}const T=h()(a.Dropdown).withConfig({displayName:"contextual-menu__CustomDropdown",componentId:"sc-1x2clcx-0"})(["width:100%;height:100%;"]),H=r().forwardRef((function({children:e,disabled:t=!1,onOpen:n,onClose:o,actions:l,disableRestoreFocus:s,...c},m){const d=(0,a.useCombinedRefs)(m),[u,p]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if(d.current){const e=d.current;e.oncontextmenu=()=>{e.dropdownOpen||e.click()}}}),[d]);const g=(0,i.useCallback)((()=>{d.current&&(d.current.dropdownOpen=!0,p(!0))}),[d]),h=(0,i.useCallback)((()=>{d.current&&(d.current.dropdownOpen=!1,p(!1))}),[d]);return(0,i.useEffect)((()=>{u?n&&n():o&&o()}),[o,n,u]),(0,i.useEffect)((()=>{t&&d.current&&d.current.dropdownOpen&&d.current.click()}),[u,t,h,d]),r().createElement(T,z({placement:"right-start",contextMenu:!0,disabled:t,onOpen:g,onClose:h,items:l,ref:d,disableRestoreFocus:s},c),e)}));function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$.apply(this,arguments)}const B=({actions:e,...t})=>{const n=(0,i.useMemo)((()=>(0,o.map)(e,(e=>({...e,onClick:t=>{t.stopPropagation(),e.onClick(t)},color:void 0})))),[e]);return r().createElement(m.FE,$({wrap:"nowrap",mainAlignment:"flex-end","data-testid":"hover-bar",padding:{top:"0.25rem",right:"0.5rem"},width:"100%",height:"fit"},t),r().createElement(a.CollapsingActions,{actions:n,color:"text",size:"medium",gap:"0.25rem"}))},R=h()(a.Container).withConfig({displayName:"cg-list-item__ContentContainer",componentId:"sc-o35se0-0"})(["overflow:hidden;"]),S=r().memo((({onClick:e,visible:t,id:n,title:o,members:l})=>{const[c]=(0,s.useTranslation)(),u=G({id:n,title:o,members:l}),p=(0,i.useCallback)((()=>{e?.(n)}),[n,e]),g=(0,i.useCallback)((e=>{e.detail>1&&e.preventDefault()}),[]);return r().createElement(a.Container,{"data-testid":n,height:b.xw,id:n},r().createElement(H,{actions:u},r().createElement(m.BG,{height:"fit",crossAlignment:"flex-end",onMouseDown:g,onClick:p,"data-testid":"list-item-content"},r().createElement(m.sf,{height:b.xw,wrap:"nowrap",mainAlignment:"flex-start",crossAlignment:"center",padding:{horizontal:"large",vertical:"small"},width:"fill",gap:"1rem"},r().createElement(R,{orientation:"vertical",height:"auto",maxHeight:"100%",gap:"0.25rem",width:"fill",mainAlignment:"flex-start"},r().createElement(a.Row,{gap:"0.5rem",width:"fill",wrap:"nowrap",mainAlignment:"flex-start"},r().createElement(m.Gz,{label:o,icon:"PeopleOutline",size:"large"}),r().createElement(a.Container,{crossAlignment:"flex-start",gap:"0.25rem",minWidth:0},r().createElement(d.E,{overflow:"ellipsis",size:"small"},o),r().createElement(d.E,{overflow:"ellipsis",size:"small",color:"gray1"},c("contactGroupList.addressCount",{count:l.length,defaultValue_one:"{{count}} address",defaultValue_other:"{{count}} addresses"})))))),r().createElement(B,{actions:u}))))}));S.displayName="CgListItem";const L=({onListBottom:e,children:t,emptyMessage:n})=>r().createElement(a.Container,{width:b.MA,mainAlignment:"flex-start",crossAlignment:"unset",borderRadius:"none",background:"gray6",borderColor:{right:"gray3"}},r().createElement(a.Row,{minHeight:"3rem",height:"auto",background:"gray5",mainAlignment:"space-between",padding:{left:"large"},wrap:"nowrap",width:"fill",maxWidth:"100%","data-testid":"list-header",flexShrink:0,flexGrow:1,gap:"medium"}),r().createElement(a.Divider,{color:"gray3"}),r().createElement(a.Container,{minHeight:0,maxHeight:"100%"},t&&t.length>0?r().createElement(a.ListV2,{"data-testid":"main-list",background:"gray6",onListBottom:e,intersectionObserverInitOptions:{threshold:.5}},t):r().createElement(d.E,{size:"small",weight:"bold",overflow:"break-word",color:"secondary",centered:!0},n))),D=({contactGroups:e,onListBottom:t})=>{const[n]=(0,s.useTranslation)(),{activeItem:a,setActive:l}=E(),c=(0,i.useMemo)((()=>(0,o.map)(e,(e=>r().createElement(m.HF,{key:e.id,active:e.id===a,"data-testid":"list-item"},(t=>r().createElement(S,{visible:t,title:e.title,id:e.id,onClick:l,members:e.members})))))),[a,e,l]);return r().createElement(L,{emptyMessage:n("contactGroupList.emptyList","No contact groups have been created yet"),onListBottom:t},c)},N=()=>{const{contactGroups:e,hasMore:t,findMore:n}=(()=>{const{addContactGroups:e,setOffset:t,orderedContactGroups:n,unorderedContactGroups:r}=(0,x.e0)(),[a,o]=(0,i.useState)(-1!==x.e0.getState().offset),l=(0,i.useCallback)((()=>{k.u.findContactGroups(x.e0.getState().offset).then((n=>{e(n.contactGroups),t(n.hasMore?x.e0.getState().offset+b.dg:-1),o(n.hasMore)}))}),[e,t]);(0,i.useEffect)((()=>{x.e0.getState().orderedContactGroups.length>0||l()}),[l]);const s=(0,i.useCallback)((()=>{if(!a)throw new Error("No more nodes available");l()}),[l,a]);return{contactGroups:[...n,...r],hasMore:a,findMore:s}})();return r().createElement(a.Container,{orientation:"row",crossAlignment:"flex-start",mainAlignment:"flex-start",background:"gray5",borderRadius:"none"},r().createElement(D,{contactGroups:e,onListBottom:t?n:void 0}),r().createElement(a.Container,{width:b.T$,mainAlignment:"flex-start",crossAlignment:"flex-start",borderRadius:"none",maxHeight:"100%"},r().createElement(I,null)))};var P=n(9128),W=n(1838),j=n(124),F=n(885);const q=({members:e,membersCount:t,loading:n})=>{const[l]=(0,s.useTranslation)(),[m,d]=(0,i.useState)(""),u=(0,i.useMemo)((()=>(0,o.map)((0,o.filter)(e,(e=>e.includes(m))),(e=>r().createElement(c.A,{email:e,key:e})))),[e,m]),p=(0,i.useCallback)((e=>{d(e.currentTarget.value)}),[]);return r().createElement(a.Container,{mainAlignment:"flex-start",crossAlignment:"flex-start",gap:"0.5rem",minHeight:0},r().createElement(a.Container,{mainAlignment:"flex-start",crossAlignment:"flex-start",gap:"0.25rem",height:"auto",minHeight:"fit-content"},r().createElement(a.Text,{size:"small",color:"secondary"},l("displayer.distribution_list.label.member_total","Member list {{total}}",{total:t})),r().createElement(a.Text,{size:"small",overflow:"break-word"},l("displayer.distribution_list.label.filter_hint","You can filter this list by looking for specific member’s name."))),r().createElement(a.Input,{"data-testid":"dl-members-filter-input",label:l("displayer.distribution_list.placeholder.filter_member","Filter an address"),CustomIcon:j.$,value:m,onChange:p}),r().createElement(a.Container,{minHeight:"10rem",mainAlignment:"flex-start"},r().createElement(a.ListV2,null,!n&&u||(0,F.P)(3))))},V=e=>{const t=(0,A.m)(),n=(()=>{const[e]=(0,s.useTranslation)(),t=(0,i.useCallback)((e=>{if(void 0!==e){const t=`${b.Zb}-${e.id}`,n=(0,y.getBoardById)(t);n?((0,y.setCurrentBoard)(n.id),(0,y.reopenBoards)()):(0,y.addBoard)({context:{id:e.id},icon:"DistributionListOutline",title:e.displayName||e.email,id:t,url:b.Zb})}}),[]),n=(0,i.useCallback)((e=>!0===e?.isOwner),[]);return(0,i.useMemo)((()=>({id:b.kM.editDL,label:e("action.edit_distribution_list","Edit"),icon:"Edit2Outline",execute:t,canExecute:n})),[n,t,e])})();return(0,i.useMemo)((()=>{if(void 0===e)return[];const i=[];return t.canExecute()&&i.push({id:t.id,label:t.label,onClick:()=>{t.execute([{email:e.email,isGroup:!0}])},icon:t.icon}),n.canExecute(e)&&i.push({id:n.id,label:n.label,onClick:()=>{n.execute(e)},icon:n.icon}),i}),[e,n,t])};var J=n(4039);const Y=({members:e,totalMembers:t,distributionList:n})=>{const[i]=(0,s.useTranslation)(),{items:o,onChange:l,selected:c}=(0,J.C)(),u=V(n);return r().createElement(a.Container,{background:"gray5",mainAlignment:"flex-start",padding:{bottom:"1rem"},maxHeight:"100%",minHeight:0},r().createElement(w,{title:(n?.displayName||n?.email)??"",icon:"DistributionListOutline"}),r().createElement(a.Container,{padding:{horizontal:"1rem"},mainAlignment:"flex-start",maxHeight:"100%",minHeight:0},r().createElement(p,{actions:u}),r().createElement(a.Container,{background:"gray6",padding:"1rem",gap:"1rem",mainAlignment:"flex-start",crossAlignment:"flex-start",height:"auto",flexGrow:1,flexShrink:1,minHeight:0,maxHeight:"100%"},r().createElement(P.H,{displayName:n?.displayName,email:n?.email??""}),r().createElement(a.Divider,{color:"gray3"}),r().createElement(a.TabBar,{items:o,selected:c,onChange:l,background:"gray6",flexShrink:0,height:"3rem",width:"fill",borderColor:{bottom:"gray3"}}),r().createElement(a.Container,{padding:{top:"large"},mainAlignment:"flex-start",crossAlignment:"flex-start",maxHeight:"100%",minHeight:0},c===b.mp.details&&r().createElement(m.Np,{height:"auto",mainAlignment:"flex-start",crossAlignment:"flex-start",maxHeight:"100%",minHeight:0},n?.description&&r().createElement(r().Fragment,null,r().createElement(d.E,{size:"small",color:"secondary"},i("displayer.distribution_list.label.description","Description")),r().createElement(d.E,{overflow:"break-word"},n.description))||r().createElement(a.Row,{width:"fill"},r().createElement(d.E,{overflow:"break-word",size:"small",color:"secondary",weight:"light"},n?.isOwner?i("displayer.distribution_list.no_details_owner","There are no additional details for this distribution list. Edit the distribution list to add them or ask to the administrator."):i("displayer.distribution_list.no_details","There are no additional details for this distribution list. For more information, ask to the administrator.")))),c===b.mp.managers&&r().createElement(W.S,{managers:n?.owners}),c===b.mp.members&&(n?.canRequireMembers&&r().createElement(q,{members:e,membersCount:t,key:n.email})||r().createElement(a.Row,{width:"fill"},r().createElement(d.E,{overflow:"break-word",size:"small",color:"secondary",weight:"light"},i("displayer.distribution_list.member_not_visible","You don't have the permissions to see the members of this distribution list. For more information, ask to the administrator."))))))))};var Z=n(3e3),K=n(4230);const Q=({id:e})=>{const[t]=(0,s.useTranslation)(),{distributionList:n}=(0,Z.i)({id:e},{skip:void 0===e}),{members:i=[],total:o=0}=(0,K.b)(n?.canRequireMembers&&n?.email||"",{skip:!n?.canRequireMembers||!n?.email});return r().createElement(a.Container,{orientation:"vertical",mainAlignment:"flex-start",crossAlignment:"flex-start","data-testid":"displayer"},e&&r().createElement(Y,{members:i,totalMembers:o,distributionList:n,key:e})||r().createElement(O,{icon:"DistributionListOutline",title:t("displayer.title3","Stay in touch with your colleagues."),description:t("displayer.distribution_list.empty_displayer","Select a distribution list or contact the Admin to have one.")}))},U=r().memo((function({onClick:e,id:t,title:n,actions:o}){const l=(0,i.useCallback)((()=>{e?.(t)}),[t,e]),s=(0,i.useCallback)((e=>{e.detail>1&&e.preventDefault()}),[]);return r().createElement(a.Container,{"data-testid":t,height:b.xw},r().createElement(H,{actions:o},r().createElement(m.BG,{height:"fit",crossAlignment:"flex-end",onMouseDown:s,onClick:l,"data-testid":"list-item-content"},r().createElement(m.sf,{height:b.xw,wrap:"nowrap",mainAlignment:"flex-start",crossAlignment:"center",padding:{horizontal:"large",vertical:"small"},width:"fill",gap:"1rem"},r().createElement(a.Container,{orientation:"horizontal",height:"auto",maxHeight:"100%",gap:"0.5rem",width:"fill",maxWidth:"100%",mainAlignment:"flex-start"},r().createElement(m.Gz,{label:n,icon:"DistributionListOutline",size:"large",shape:"square"}),r().createElement(a.Container,{crossAlignment:"flex-start",minWidth:0},r().createElement(d.E,{overflow:"ellipsis",size:"small"},n)))),r().createElement(B,{actions:o,height:"fill",crossAlignment:"flex-start"}))))})),X=({distributionList:e,visible:t,onClick:n})=>{const i=V(e);return r().createElement(U,{id:e.id,title:e.displayName||e.email,actions:i,onClick:n})};var ee=n(4457);const te=()=>{const[e]=(0,s.useTranslation)(),{activeItem:t,setActive:n}=E(),{filter:c}=(0,l.useParams)(),d=(({ownerOf:e,memberOf:t})=>{const[n]=(0,s.useTranslation)(),r=(0,a.useSnackbar)(),{distributionLists:l,setDistributionLists:c}=(0,ee._)(),m=(0,i.useMemo)((()=>void 0===l||l.some((e=>void 0===e.id))),[l]);return(0,i.useEffect)((()=>{m&&k.u.getAccountDistributionLists({ownerOf:!0,memberOf:!0}).then((e=>{c(e)})).catch((()=>{r({key:(new Date).toDateString(),replace:!0,type:"error",label:n("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3,hideButton:!0})}))}),[r,c,m,n]),(0,i.useMemo)((()=>(0,o.filter)(l,(n=>void 0!==n.id&&(e&&n.isOwner||t&&!0===n.isMember)))),[l,t,e])})({ownerOf:c===b.M3.filter.manager,memberOf:c===b.M3.filter.member}),u=(0,i.useMemo)((()=>d.map((e=>r().createElement(m.HF,{key:e.id||e.email,active:e.id===t,"data-testid":"list-item"},(t=>r().createElement(X,{visible:t,distributionList:e,onClick:n})))))),[t,d,n]);return r().createElement(a.Container,{orientation:"row",crossAlignment:"flex-start",mainAlignment:"flex-start",width:"fill",height:"fill",background:"gray5",borderRadius:"none",maxHeight:"100%"},r().createElement(L,{emptyMessage:e("distribution_list.label.empty_message","There are no distribution lists yet.")},u),r().createElement(a.Container,{width:b.T$,mainAlignment:"flex-start",crossAlignment:"flex-start",borderRadius:"none",maxHeight:"100%"},r().createElement(Q,{id:t})))},ne=()=>{const{path:e,params:t,url:n}=(0,l.useRouteMatch)(),s=(0,i.useMemo)((()=>(0,o.trimEnd)(e,"/")),[e]),c=(0,i.useMemo)((()=>r().createElement(l.Switch,null,t.route===b.M3.route.contactGroups&&r().createElement(l.Route,{path:`${s}${b.bw.contactGroups}`,component:N}),t.route===b.M3.route.distributionLists&&r().createElement(l.Route,{path:`${s}${b.bw.distributionLists}`},(({match:e})=>e?.params.filter&&Object.values(b.M3.filter).includes(e.params.filter)?r().createElement(te,null):r().createElement(l.Redirect,{to:`${n}/${b.M3.filter.member}`}))))),[t.route,s,n]);return r().createElement(a.ThemeProvider,{loadDefaultFont:!1},r().createElement(a.ModalManager,null,c))},ie=()=>{const{path:e}=(0,l.useRouteMatch)(),t=(0,i.useMemo)((()=>(0,o.trimEnd)(e,"/")),[e]);return r().createElement(l.Route,{path:`${t}${b.bw.mainRoute}`,component:ne})}}}]);
//# sourceMappingURL=groupsAppView.cd7e7f55.chunk.js.map