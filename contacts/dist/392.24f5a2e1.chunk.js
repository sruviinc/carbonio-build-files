(()=>{"use strict";var e,i,r={392:(e,i,r)=>{r(3619);const n="14";let t={};const d={},o={};let c;const s=e=>e.sort(((e,i)=>{const r=e.name.toLowerCase(),n=i.name.toLowerCase();return r<n?-1:r>n?1:0})),l=(e,i)=>{i.absFolderPath&&e.children.length&&e.children.forEach((e=>{const r=t[e.id];if(i.absFolderPath&&r.absFolderPath){const e=r.absFolderPath.split("/").slice(2);r.absFolderPath=`${i.absFolderPath}/${e.join("/")}`}r.children.length&&l(r,i)}))},a=({string:e})=>/#/.test(e||""),h=(e,i)=>e.id.split(":").includes(i),f=(e,i)=>({id:e.id,uuid:e.uuid,name:e.name,absFolderPath:e.absFolderPath,l:e.l,luuid:e.luuid,checked:a({string:e.f}),f:e.f,color:e.color||i?.color,rgb:e.rgb,u:e.u,i4u:e.i4u,view:e.view,rev:e.rev,ms:e.ms,md:e.md,n:e.n,i4n:e.i4n,s:e.s,i4ms:e.i4ms,i4next:e.i4next,url:e.url,activesyncdisabled:!!e.activesyncdisabled,webOfflineSyncDays:e.webOfflineSyncDays,perm:e.perm,recursive:!!e.recursive,rest:e.rest,deletable:!!e.deletable,meta:e.meta,acl:e.acl,retentionPolicy:e.retentionPolicy}),u=(e,i)=>({...f(e,i),owner:e.owner,zid:e.zid,rid:e.rid,ruuid:e.ruuid,oname:e.oname,reminder:!!e.reminder,broken:!!e.broken}),p=(e,i)=>{const r={...(n=e,{...f(n),query:n.query,sortBy:n.sortBy,types:n.types}),parent:i?.id,isLink:i?.isLink};var n;d[r.id]=r},b=(e,i,r)=>{const d={...u(e,r),isLink:!0,children:[],parent:r?.id,depth:i};t[e.id]=d;const c=(e=>e&&e.rid&&e.zid?`${e.zid}:${e.rid}`:null)(e);return c&&(o[c]=e.id),e?.folder?.forEach((e=>{if(!h(e,n)){const r=v(e,i+1,d);d.children.push(r)}})),e?.link?.forEach((e=>{if(!h(e,n)){const r=b(e,i+1,d);d.children.push(r)}})),e?.search?.forEach((e=>{p(e,d)})),d},v=(e,i,r)=>{const d={...f(e,r),isLink:!1,children:[],parent:r?.id,depth:i};return t[e.id]=d,e?.folder?.forEach((e=>{if(!h(e,n)){const r=v(e,i+1,d);h(e,"1")||d.children.push(r)}})),e?.link?.forEach((e=>{if(!h(e,n)){const r=b(e,i+1,d);h(e,"1")||d.children.push(r)}})),e?.search?.forEach((e=>{p(e,d)})),d};function m(e,i){return Object.keys(e).find((r=>i.id===`${e[r].zid}:${e[r].rid}`))}function y(e){if(!e)return!1;const i=t[e];return i?.parent?y(i?.parent):"USER_ROOT"===i?.name}const k=({data:e})=>{var i;"refresh"===e.op&&e.folder&&((e,i)=>{if(c=i,e.length>1){const i=e.slice(1);return[v(e[0],0),...i.map((e=>b(e,0)))]}v(e[0],0)})(e.folder,e.currentView),"notify"===e.op&&(i=e.notify,(i.created?.folder??[]).forEach((e=>{if(e.id&&e.l&&c&&e.view===c){const i=t[e.l],r={...f(e,i),isLink:!1,children:[],parent:i?.id,depth:i&&void 0!==i.depth?i.depth+1:0};t[e.id]=r,i.children.push(r),s(i.children)}})),(i.created?.link??[]).forEach((e=>{if(e.id&&e.l&&c&&e.view===c){const i=t[e.l],r={...u(e,i),isLink:!0,children:[],parent:i?.id,depth:i&&void 0!==i.depth?i.depth+1:0};t[e.id]=r,i.children.push(r),s(i.children)}})),[...i.modified?.folder??[],...i.modified?.link??[]].forEach((e=>{if(!e.id)return;const i=e.id.includes(":")?e.id:m(t,e),r=m(t,{id:e.l}),n=y(i),d=y(r)&&r?r:e.l,o=n&&i?i:e.id,c=o?t[o]:null;if(c){Object.assign(c,(({link:e,folder:i,search:r,...n})=>n)({...e,id:o})),l(c,e),void 0!==e.f&&(c.checked=a({string:e.f}));const i=c.parent;if(i){const r=t[i];if(r)if(e.l){const e=d?t[d]:null;e&&(r.children=r.children.filter((e=>e.id!==o)),e.children.push(c),s(e.children),c.parent=e.id,c.depth=void 0!==e?.depth?e.depth+1:0)}else r.children=r.children.map((i=>i.id!==e.id?i:c));t[o]=c}}})),(i.deleted??[]).forEach((e=>{const i=t[e];if(i){if(i.parent){const r=t[i.parent];r.children=r.children.filter((i=>i.id!==e))}delete t[e],delete d[e]}})))};onmessage=({data:e})=>{k({data:e}),postMessage({folders:t,linksIdMap:o,searches:d})}}},n={};function t(e){var i=n[e];if(void 0!==i)return i.exports;var d=n[e]={exports:{}};return r[e].call(d.exports,d,d.exports,t),d.exports}t.m=r,t.x=()=>{var e=t.O(void 0,[619],(()=>t(392)));return t.O(e)},e=[],t.O=(i,r,n,d)=>{if(!r){var o=1/0;for(a=0;a<e.length;a++){for(var[r,n,d]=e[a],c=!0,s=0;s<r.length;s++)(!1&d||o>=d)&&Object.keys(t.O).every((e=>t.O[e](r[s])))?r.splice(s--,1):(c=!1,d<o&&(o=d));if(c){e.splice(a--,1);var l=n();void 0!==l&&(i=l)}}return i}d=d||0;for(var a=e.length;a>0&&e[a-1][2]>d;a--)e[a]=e[a-1];e[a]=[r,n,d]},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((i,r)=>(t.f[r](e,i),i)),[])),t.u=e=>e+".d78875fc.chunk.js",t.miniCssF=e=>{},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),t.p="/static/iris/carbonio-contacts-ui/5ab5a6e1fb77a9f7a650bdbc159e120cfe4cd89f/",(()=>{var e={392:1};t.f.i=(i,r)=>{e[i]||importScripts(t.p+t.u(i))};var i=self.webpackChunkcarbonio_contacts_ui=self.webpackChunkcarbonio_contacts_ui||[],r=i.push.bind(i);i.push=i=>{var[n,d,o]=i;for(var c in d)t.o(d,c)&&(t.m[c]=d[c]);for(o&&o(t);n.length;)e[n.pop()]=1;r(i)}})(),i=t.x,t.x=()=>t.e(619).then(i),t.x()})();
//# sourceMappingURL=392.24f5a2e1.chunk.js.map