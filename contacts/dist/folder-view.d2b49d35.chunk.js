"use strict";(self.webpackChunkcarbonio_contacts_ui=self.webpackChunkcarbonio_contacts_ui||[]).push([[987],{8136:(e,t,a)=>{a.d(t,{M:()=>i,n:()=>s});var n=a(7559),l=a(4577),r=a(2509),o=a(8153);const i=e=>{if((e.firstName||e.middleName||e.lastName)&&!e.displayName)return(0,r.trim)(`${e.firstName||""} ${e.middleName||""} ${e.lastName||""} ${e.nameSuffix||""}`);if(e.displayName)return e.displayName;const t=Object.keys(e.email);return e.email&&t.length>0?`<${(0,l.t)("label.no_name","No Name")}> ${e.email[t[0]].mail}`:void 0},s=e=>{const[t]=(0,o.useTranslation)();return(0,n.useMemo)((()=>{if(e){const a=i(e);if(a)return a;if(e.email&&Object.keys(e.email).length>0)return`<${t("label.no_name","No Name")}> ${e.email[0].mail}`}return`<${t("label.no_data","No Data")}>`}),[e,t])}},3201:(e,t,a)=>{a.d(t,{$0:()=>o,Do:()=>r,oK:()=>l});var n=a(2509);function l({contacts:e},t){return e?.contacts?.[t]}function r({contacts:e},t,a){return(0,n.find)(e?.contacts?.[t],["id",a])}function o({contacts:e},t){return e?.status?.[t]}},2145:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var n=a(7559),l=a.n(n),r=a(4702),o=a(4577),i=a(2509),s=a(8698),c=a(8153),d=(a(7134),a(5305));function m({folderPath:e,itemsCount:t}){const[a]=(0,c.useTranslation)();return l().createElement(l().Fragment,null,l().createElement(r.Container,{background:"white",mainAlignment:"flex-start",crossAlignment:"flex-start",height:"3rem"},l().createElement(r.Row,{height:"100%",width:"fill",padding:{all:"small"},mainAlignment:"space-between",takeAvailableSpace:!0},l().createElement(r.Row,{mainAlignment:"flex-start",takeAvailableSpace:!0,padding:{all:"small",right:"medium"}},l().createElement(d.A,null,"Number of Contacts")),l().createElement(r.Row,{mainAlignment:"flex-end",padding:{all:"small",right:"medium"}},l().createElement(r.Text,{size:"extrasmall","data-testid":"BreadcrumbCount"},t>100?"100+":t)))),l().createElement(r.Divider,null))}var u=a(4710),g=a.n(u),f=(a(3619),a(9153)),p=a(3863),C=a(856),b=a(817);function E({item:e,selected:t,folderId:a,selecting:s,active:c,toggle:d,visible:m,setDraggedIds:u,draggedIds:g,setIsDragging:E,selectedItems:h,dragImageRef:y}){const k=(0,n.useMemo)((()=>Object.keys(h??[])),[h]),I=(0,o.useTags)(),A=(0,n.useMemo)((()=>(0,i.reduce)(I,((t,a)=>((0,i.includes)(e.tags,a.id)&&t.push({...a,color:o.ZIMBRA_STANDARD_COLORS[parseInt(a.color??"0",10)].hex}),t)),[])),[e.tags,I]),w=(0,n.useCallback)((t=>{t.isDefaultPrevented()||(0,o.replaceHistory)(`/folder/${a}/contacts/${e.id}`)}),[a,e.id]),x=(0,n.useCallback)(((e,t)=>{E(!0),e.dataTransfer.setDragImage(y.current,0,0),h[t]?u(h):u({[t]:!0})}),[E,y,h,u]);return g?.[e?.id]||m?l().createElement(b.A,{variant:"outlined",style:{margin:"8px",backgroundColor:"white"}},l().createElement(r.Drag,{type:"contact",data:{...e,parentFolderId:a,selectedIDs:k},style:{display:"block"},onDragStart:t=>x(t,e.id)},l().createElement("div",{style:{display:"flex",flexDirection:"column"}},l().createElement(C.A,{contact:e,onClick:w,current:c},l().createElement(f.V,{item:e,selected:t,selecting:s,toggle:d,folderId:a}),l().createElement(p.V,{item:e,tags:A}))))):l().createElement("div",{style:{height:"4rem"}})}const h=g().div.withConfig({displayName:"contacts-list__DragImageContainer",componentId:"sc-agddqg-0"})(["position:absolute;top:-312.5rem;left:-312.5rem;transform:translate(-100%,-100%);width:35vw;"]),y=({contacts:e,draggedIds:t})=>{const a=(0,i.reduce)(t,((t,a,n)=>{const l=(0,i.find)(e,["id",n]);return l?[...t,l]:t}),[]);return l().createElement(l().Fragment,null,(0,i.map)(a,(e=>l().createElement(E,{item:e,key:e.id,draggedIds:t}))))},k=({folderId:e,selected:t,contacts:a,toggle:o,clicked:i})=>{const[d]=(0,c.useTranslation)(),{itemId:m}=(0,s.useParams)(),[u,g]=(0,n.useState)(!1),[f,p]=(0,n.useState)(),C=(0,n.useRef)(null),b=(0,n.useMemo)((()=>[{title:d("displayer.list_title1","It looks like there are no contacts yet"),description:""},{title:d("displayer.list_title2","The trash is empty"),description:""}]),[d]),k=(0,n.useMemo)((()=>0===a?.length?"3"===e?b[1]:b[0]:null),[a,e,b]),I=k?k.title:"";return l().createElement(l().Fragment,null,0===a?.length?l().createElement(r.Container,{"data-testid":"ContactsListToScrollContainer"},l().createElement(r.Padding,{top:"medium"},l().createElement(r.Text,{color:"gray1",overflow:"break-word",size:"small",style:{whiteSpace:"pre-line",textAlign:"center",paddingTop:"2rem"}},I))):l().createElement(r.List,{"data-testid":"ContactsListToScrollContainer",selected:t,background:"white",active:m,items:a,itemProps:{folderId:e,toggle:o,setDraggedIds:p,setIsDragging:g,draggedIds:f,selectedItems:t,dragImageRef:C},ItemComponent:E}),l().createElement(h,{ref:C},u&&l().createElement(y,{contacts:a,draggedIds:f})))};var I=a(5302),A=a(7848);const w=(e,t)=>{const[a,l]=(0,n.useState)({}),[r,o]=(0,n.useState)(!1),[s,c]=(0,n.useState)(e);(0,n.useEffect)((()=>{o(!(0,i.isEmpty)(a)),e!==s&&(l({}),c(e),o(!1),t(0))}),[e,s,a,t]);const d=(0,n.useCallback)((e=>{a[e]?(l((t=>(0,i.omit)(t,[e]))),t((e=>e-1))):(l((t=>({...t,[e]:!0}))),t((e=>e+1)))}),[a,t]),m=(0,n.useCallback)((()=>{l({}),t(0)}),[t]);return{selected:a,isSelecting:r,toggle:d,deselectAll:m}};var x=a(5157),v=a(3201),D=a(5765);const N=({deselectAll:e})=>{const{getPrimaryActions:t,getSecondaryActions:a}=(0,n.useContext)(D.z),o=(0,n.useMemo)((()=>t()),[t]),s=(0,n.useMemo)((()=>a()),[a]);return l().createElement(l().Fragment,null,l().createElement(r.Container,{background:"gray5",height:"3rem",orientation:"horizontal",padding:{all:"extrasmall"}},l().createElement(r.Container,{background:"gray5",orientation:"horizontal",mainAlignment:"flex-start"},l().createElement(r.IconButton,{icon:"ArrowBack",iconColor:"primary",size:"large",onClick:e??i.noop,"data-testid":"action-button-deselect-all"})),l().createElement(r.Container,{background:"gray5",orientation:"horizontal",mainAlignment:"flex-end"},(0,i.map)(o,(e=>l().createElement(r.Padding,{left:"extralarge",key:e.label},l().createElement(r.IconButton,{"data-testid":`primary-action-button-${e.label}`,icon:e.icon,color:"primary",onClick:t=>{t&&t.preventDefault(),e.onClick(t)},size:"large"}))))),l().createElement(r.Padding,{left:"extrasmall"},l().createElement(r.Dropdown,{placement:"right-end","data-testid":"secondary-actions-dropdown",items:(0,i.map)(s,(e=>({id:e.label,key:e.id,icon:e.icon,label:e.label,onClick:t=>{t&&t.preventDefault(),e.onClick(t)},customComponent:e.customComponent,items:e.items})))},l().createElement(r.IconButton,{size:"medium",iconColor:"primary",icon:"MoreVertical","data-testid":"secondary-actions-open-button",onClick:i.noop})))),l().createElement(r.Divider,null))};var S=a(3961);function $(){const{folderId:e}=(0,s.useParams)(),t=(0,A.j)(),a=(0,I.a4)(e),{setCount:c}=(0,o.useAppContext)(),{selected:d,isSelecting:u,toggle:g,deselectAll:f}=w(e,c),p=(0,A.G)((t=>(0,v.oK)(t,e))),C=(0,n.useMemo)((()=>(0,i.orderBy)(p,[e=>e?.firstName?.toLowerCase()||e?.lastName?.toLowerCase()||e?.middleName?.toLowerCase()],"asc")),[p]),b=(0,n.useMemo)((()=>Object.keys(d??[])),[d]),E=(0,i.filter)(p,(e=>-1!==b.indexOf(e.id)));return(0,n.useEffect)((()=>{t((0,x.w)(e))}),[t,e]),l().createElement(D.O,{folderId:e,deselectAll:f,selectedContacts:E,selectedIds:d},l().createElement(r.Container,{orientation:"row",crossAlignment:"flex-start",mainAlignment:"flex-start",width:"fill",height:"fill",background:S.b3,borderRadius:"none","data-testid":"ContactsListContainer",style:{maxHeight:"100%"}},l().createElement(r.Container,{mainAlignment:"flex-start",borderRadius:"none",height:"calc(100% - 4rem)"},u?l().createElement(N,{folderId:e,dispatch:t,deselectAll:f,selectedIDs:d}):l().createElement(m,{folderPath:a?.absFolderPath,itemsCount:a?.n}),l().createElement(k,{folderId:e,contacts:C,selected:d,setCount:c,toggle:g}))))}},3961:(e,t,a)=>{a.d(t,{Ud:()=>l,b3:()=>n});const n="#FFFFFF",l="#c2e7ff"}}]);
//# sourceMappingURL=folder-view.d2b49d35.chunk.js.map