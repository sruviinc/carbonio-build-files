"use strict";(self.webpackChunkcarbonio_contacts_ui=self.webpackChunkcarbonio_contacts_ui||[]).push([[998],{4836:(e,t,a)=>{a.d(t,{BG:()=>s,FE:()=>i,Gz:()=>u,HF:()=>d,J5:()=>l,Np:()=>m,sf:()=>c});var n=a(4702),o=a(4710),r=a.n(o);const l=r()(n.Row).withConfig({displayName:"styled-components__HoverRow",componentId:"sc-1p4lrn0-0"})(["position:relative;cursor:pointer;background:",";&:hover{background:",";}"],(({theme:e})=>e.palette.transparent.regular),(({theme:e})=>e.palette.transparent.hover)),c=r()(n.Row).withConfig({displayName:"styled-components__HoverContainer",componentId:"sc-1p4lrn0-1"})([""]),i=r()(n.Row).withConfig({displayName:"styled-components__HoverBarContainer",componentId:"sc-1p4lrn0-2"})(["display:none;position:absolute;top:0;right:0;background:linear-gradient(to right,transparent,currentColor);"]),s=r()(n.Container).withConfig({displayName:"styled-components__ListItemContainer",componentId:"sc-1p4lrn0-3"})(["position:relative;cursor:pointer;","{display:none;}&:hover{","{display:flex;}}"],i,i),d=r()(n.ListItem).attrs((({background:e,selectedBackground:t,activeBackground:a,active:n,selected:o})=>({backgroundColor:n&&a||o&&t||e}))).withConfig({displayName:"styled-components__StyledListItem",componentId:"sc-1p4lrn0-4"})([""," transition:none;",""],(({backgroundColor:e,theme:t})=>e&&(0,n.pseudoClasses)(t,e,"color")),(({backgroundColor:e,theme:t})=>e&&(0,o.css)(["","{background:linear-gradient(to right,transparent,",");}&:focus ","{background:linear-gradient( to right,transparent,"," );}&:hover ","{background:linear-gradient( to right,transparent,"," );}&:active ","{background:linear-gradient( to right,transparent,"," );}"],i,(0,n.getColor)(e,t),i,(0,n.getColor)(`${e}.focus`,t),i,(0,n.getColor)(`${e}.hover`,t),i,(0,n.getColor)(`${e}.active`,t)))),m=r()(n.Container).withConfig({displayName:"styled-components__ScrollableContainer",componentId:"sc-1p4lrn0-5"})(["overflow-y:auto;"]),u=r()(n.Avatar).withConfig({displayName:"styled-components__CustomIconAvatar",componentId:"sc-1p4lrn0-6"})(["& > svg{max-width:1.5rem;max-height:1.5rem;min-width:1.5rem;min-height:1.5rem;}"])},5765:(e,t,a)=>{a.d(t,{z:()=>I,O:()=>H});var n=a(7559),o=a.n(n),r=a(4702),l=a(4577),c=a(8153),i=a(2509),s=a(2354),d=a(9812);a(8608),a(9727),a(6098);var m=a(8136),u=a(4362);var p=a(6060),g=(a(3619),a(2816)),h=a(5302),b=a(8585);const y=()=>{const[e]=(0,c.useTranslation)(),t=(0,r.useSnackbar)(),a=(0,r.useModal)(),l=(0,n.useCallback)((({contacts:e}={})=>{if(!e||0===e.length)return!1;const t=e.reduce(((e,t)=>{const a=(0,h.L2)(t.parent);return a&&e.push(a),e}),[]);return(0,i.every)(t,(e=>(0,g.iQ)({folder:e})))}),[]),s=(0,n.useCallback)((({contacts:n}={})=>{if(!n||0===n.length)return;if(!l({contacts:n}))return;const r=n.map((e=>e.id)),c=a({children:o().createElement(b.n,{mode:"restore",contacts:n,onMove:a=>u.u.moveContact(r,a).then((()=>{t({key:"restore-contacts-success",replace:!0,type:"success",label:e("messages.snackbar.contact_restored","Contacts restored"),autoHideTimeout:d.fT.defaultSnackbar,hideButton:!0}),c()})).catch((()=>{t({key:"restore-contacts-error",replace:!0,type:"error",label:e("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:d.fT.defaultSnackbar,hideButton:!0})})),onClose:()=>c()})},!0)}),[l,a,t,e]);return(0,n.useMemo)((()=>({id:d.kM.restoreContacts,label:e("label.restore","Restore"),icon:"RestoreOutline",execute:s,canExecute:l})),[l,s,e])};var f=a(7848),k=a(9602),v=a(9967);const C="move",w="delete",_=(e,t)=>({id:e.id,icon:e.icon,label:e.label,onClick:a=>{a&&a.preventDefault(),e.execute(t)}});function A(e,t){const[a,n]=(0,l.getAction)("contact-list","mail-to",[e]);return n?{...a,label:t("action.send_msg","Send e-mail"),disabled:(0,i.isEmpty)(e?.email)}:void 0}function S({ids:e,t,dispatch:a,createSnackbar:n,createModal:c,deselectAll:i}){return{id:"deletePermanently",icon:"DeletePermanentlyOutline",label:t("action.delete_permanently","Delete Permanently"),onClick:s=>{s&&s.preventDefault();const d=c({title:t("messages.modal.delete.sure_delete_contact",{count:e.length,defaultValue_one:"Are you sure to permanently delete this contact?",defaultValue_other:"Are you sure to permanently delete the selected contacts?"}),confirmLabel:t("action.delete_permanently","Delete Permanently"),confirmColor:"error",onConfirm:()=>{d(),a((0,k.H)({contactsIDs:e,originID:l.FOLDERS.TRASH,destinationID:void 0,op:w})).then((e=>{i&&i(),e.type.includes("fulfilled")?n({key:"edit",replace:!0,type:"success",label:t("messages.snackbar.contact_deleted_permanently","Contact permanently deleted"),autoHideTimeout:3e3,hideButton:!0}):n({key:"edit",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3})}))},onClose:()=>d(),showCloseIcon:!0,children:o().createElement(v.tv,null,o().createElement(r.Text,{overflow:"break-word"},t("messages.modal.delete.if_delete_lost_forever","By permanently deleting this contact you will not be able to recover it anymore, continue?")))})}}}function T({ids:e,t,dispatch:a,parent:n,createSnackbar:o,deselectAll:r}){return{id:(0,g.vF)(n)?"deletePermanently":"delete",icon:(0,g.vF)(n)?"DeletePermanentlyOutline":"Trash2Outline",label:t("label.delete","Delete"),onClick:c=>{c&&c.preventDefault(),a((0,k.H)({contactsIDs:e,originID:n,destinationID:(0,g.vF)(n)?void 0:l.FOLDERS.TRASH,op:(0,g.vF)(n)?w:C})).then((c=>{r&&r(),c.type.includes("fulfilled")?o({key:"trash",replace:!0,type:"info",label:t("messages.snackbar.contact_moved_to_trash","Contact moved to trash"),autoHideTimeout:5e3,hideButton:!1,actionLabel:"Undo",onActionClick:()=>{a((0,k.H)({contactsIDs:e,originID:l.FOLDERS.TRASH,destinationID:n,op:C})).then((e=>{e.type.includes("fulfilled")?o({key:"trash",replace:!0,type:"success",label:t("messages.snackbar.contact_restored","Contact restored"),autoHideTimeout:3e3,hideButton:!0}):o({key:"edit",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3,hideButton:!0})}))}}):o({key:"edit",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3,hideButton:!0})}))}}}const x=({folderId:e})=>(l.FOLDERS.TRASH,()=>[]),E=({folderId:e,t,dispatch:a,replaceHistory:n,createSnackbar:o,createModal:r,selectedIds:c,deselectAll:i,tags:d,selectedContacts:m,ids:u})=>e===l.FOLDERS.TRASH?()=>[S({ids:c,t,dispatch:a,createSnackbar:o,createModal:r,deselectAll:i}),(0,s.qQ)({t,tags:d,ids:u,contacts:m,deselectAll:i,folderId:e})]:()=>[T({ids:c,t,dispatch:a,folderId:e,createSnackbar:o,deselectAll:i,replaceHistory:n}),(0,s.qQ)({t,tags:d,ids:u,contacts:m,deselectAll:i,folderId:e})],I=(0,n.createContext)({getContextActions:()=>[],getHoverActions:()=>[],getPrimaryActions:()=>[],getSecondaryActions:()=>[]}),H=({children:e,folderId:t,selectedIds:a,deselectAll:g,selectedContacts:h})=>{const[b]=(0,c.useTranslation)(),k=(0,n.useMemo)((()=>Object.keys(a??[])),[a]),v=(0,f.j)(),C=(0,r.useSnackbar)(),w=(0,r.useModal)(),H=(0,l.useTags)(),M=(e=>{const[t]=(0,c.useTranslation)(),a=(0,f.j)(),o=(0,r.useSnackbar)(),g=(0,r.useModal)(),h=(0,l.useTags)(),b=(()=>{const[e]=(0,c.useTranslation)(),t=(0,r.useSnackbar)(),a=(0,n.useCallback)((e=>!!e),[]),o=(0,n.useCallback)((n=>{if(!a(n))return;if(!n)return;const o=`${(0,m.M)(n)??n.id}.vcf`;u.u.getItem(n.id).then((a=>{((e,t)=>{const a=new Blob([e],{type:"text/vcard"}),n=window.URL.createObjectURL(a),o=document.createElement("a");o.href=n,o.download=t,o.click(),window.URL.revokeObjectURL(n)})(a,o),t({key:"export-contact-success",replace:!0,type:"info",label:e("export_contact.snackbar.success","vCard file exported successfully"),autoHideTimeout:d.fT.defaultSnackbar,hideButton:!0})})).catch((a=>{t({key:"export-contact-error",replace:!0,type:"error",label:e("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:d.fT.defaultSnackbar,hideButton:!0})}))}),[a,t,e]);return(0,n.useMemo)((()=>({id:d.kM.exportContact,label:e("label.export_contact","Export vCard file"),icon:"DownloadOutline",execute:o,canExecute:a})),[a,o,e])})(),k=(0,p.y)(),v=y();return e===l.FOLDERS.TRASH?e=>[...v.canExecute({contacts:[e]})?[_(v,{contacts:[e]})]:[],S({ids:[e.id],t,dispatch:a,createSnackbar:o,createModal:g}),...b.canExecute()?[_(b,e)]:[],(0,s.TL)({contact:e,tags:h,t,context:{createAndApplyTag:s.wA,createModal:g}})]:e=>(0,i.compact)([T({ids:[e.id],t,dispatch:a,parent:e.parent,createSnackbar:o,replaceHistory:l.replaceHistory}),A(e,t),...k.canExecute({contacts:[e]})?[_(k,{contacts:[e]})]:[],...b.canExecute(e)?[_(b,e)]:[],(0,s.TL)({contact:e,tags:h,t,context:{createAndApplyTag:s.wA,createModal:g}})])})(t),R=(e=>{const[t]=(0,c.useTranslation)(),a=(0,f.j)(),n=(0,r.useSnackbar)(),o=(0,r.useModal)(),s=(0,p.y)(),d=y();return e===l.FOLDERS.TRASH?e=>[...d.canExecute({contacts:[e]})?[_(d,{contacts:[e]})]:[],S({ids:[e.id],t,dispatch:a,createSnackbar:n,createModal:o})]:e=>(0,i.compact)([T({ids:[e.id],t,dispatch:a,parent:e.parent,createSnackbar:n,replaceHistory:l.replaceHistory}),A(e,t),...s.canExecute({contacts:[e]})?[_(s,{contacts:[e]})]:[]])})(t),[D,O,L,B]=(0,n.useMemo)((()=>[M,R,x({folderId:t,t:b,dispatch:v,replaceHistory:l.replaceHistory,createSnackbar:C,createModal:w,selectedIds:a,deselectAll:g}),E({folderId:t,t:b,dispatch:v,replaceHistory:l.replaceHistory,createSnackbar:C,createModal:w,selectedIds:a,deselectAll:g,tags:H,ids:k,selectedContacts:h})]),[M,R,t,b,v,C,w,a,g,H,k,h]),N=(0,n.useCallback)((e=>D(e)),[D]),F=(0,n.useCallback)((e=>O(e)),[O]),z=(0,n.useCallback)((()=>L()),[L]),P=(0,n.useCallback)((()=>B()),[B]);return o().createElement(I.Provider,{value:{getContextActions:N,getHoverActions:F,getPrimaryActions:z,getSecondaryActions:P}},e)}},9153:(e,t,a)=>{a.d(t,{V:()=>s});var n=a(7559),o=a.n(n),r=a(4702),l=a(8153),c=a(4710);const i=a.n(c)()(r.Avatar).withConfig({displayName:"item-avatar__AvatarElement",componentId:"sc-ovgmsn-0"})(["width:2.625rem !important;height:2.625rem !important;min-width:2.625rem !important;min-height:2.625rem !important;p{font-size:0.875rem;}"]),s=({item:e,selected:t,selecting:a,toggle:c,isSearch:s=!1})=>{const[d]=(0,l.useTranslation)(),m=(0,n.useCallback)((e=>t=>{t.preventDefault(),c(e)}),[c]),u=(0,n.useMemo)((()=>s?d("label.search_activate_selection_mode","Selection mode isn’t available yet on search results"):d("label.activate_selection_mode","Activate selection mode")),[d,s]);return o().createElement(r.Container,{"data-testid":"AvatarContainer",padding:{all:"small"},width:"fit",mainAlignment:"flex-start"},o().createElement(r.Tooltip,{label:u,disabled:a,maxWidth:"100%"},o().createElement(i,{selecting:a,selected:t,label:`${e.firstName} ${e.middleName} ${e.lastName}`,onClick:m(e.id),size:"large"})))}},3863:(e,t,a)=>{a.d(t,{V:()=>d,t:()=>s});var n=a(7559),o=a.n(n),r=a(4702),l=a(2509),c=a(8136),i=a(2354);const s=({item:e,tags:t})=>{const a=(0,n.useMemo)((()=>t?.length>1?"TagsMoreOutline":"Tag"),[t]),l=(0,n.useMemo)((()=>1===t?.length?t?.[0]?.color:void 0),[t]),c=(0,i.nK)(t),s=(0,n.useMemo)((()=>e.tags&&0!==e.tags.length&&""!==e.tags?.[0]&&c),[c,e.tags]);return o().createElement(r.Row,null,s&&o().createElement(r.Padding,{left:"small"},o().createElement(r.Icon,{"data-testid":"TagIcon",icon:a,color:l})))},d=({item:e,tags:t})=>{const a=(0,c.n)(e),i=(0,n.useMemo)((()=>(0,l.trim)(`${Object.values(e.email).length>0?Object.values(e.email)[0].mail:""}, ${Object.values(e.phone).length>0?Object.values(e.phone)[0].number:""}`,", ")),[e]);return o().createElement(r.Row,{mainAlignment:"space-around",crossAlignment:"flex-start",orientation:"vertical",padding:{all:"small",right:"medium"},takeAvailableSpace:!0},o().createElement(r.Container,{orientation:"horizontal",height:"fit",width:"fill"},o().createElement(r.Row,{wrap:"nowrap",takeAvailableSpace:!0,mainAlignment:"flex-start"},o().createElement(r.Text,null,a)),o().createElement(s,{item:e,tags:t})),o().createElement(r.Tooltip,{label:i,overflow:"break-word",maxWidth:"60vw"},o().createElement(r.Text,{"data-testid":"SenderSecondText",color:"secondary",size:"small",weight:"regular",overflow:"ellipsis"},i)))}},856:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(7559),o=a.n(n),r=a(4702),l=a(4710),c=a.n(l),i=a(4836),s=a(5765);const d=c()(r.Container).withConfig({displayName:"list-item-action-wrapper__HoverBarContainer",componentId:"sc-1ty94n3-0"})(["top:0;right:0;display:none;position:absolute;background:linear-gradient(to right,transparent,",");height:45%;& > *{margin-top:",";margin-right:",";}"],(({theme:e})=>e.palette.gray6.hover),(({theme:e})=>e.sizes.padding.small),(({theme:e})=>e.sizes.padding.small)),m=c()(i.J5).withConfig({displayName:"list-item-action-wrapper__CustomHoverRow",componentId:"sc-1ty94n3-1"})(["background:#ffffff;&:hover{background:",";& ","{display:flex;margin:8px;}}"],(({theme:e})=>e.palette.gray6.hover),d),u=({children:e,current:t,onClick:a,contact:l})=>{const{getContextActions:c,getHoverActions:i}=(0,n.useContext)(s.z),u=(0,n.useMemo)((()=>i(l)),[l,i]),p=(0,n.useMemo)((()=>c(l)),[l,c]);return o().createElement(r.Dropdown,{contextMenu:!0,items:p,display:"block",style:{width:"100%"}},o().createElement(m,{orientation:"horizontal",mainAlignment:"flex-start",crossAlignment:"unset",onClick:a,current:t},e,o().createElement(d,{orientation:"horizontal",mainAlignment:"flex-end",crossAlignment:"center",padding:{right:"small"}},u.map((e=>o().createElement(r.Tooltip,{key:e.id,label:e.label},o().createElement(r.IconButton,{key:e.id,icon:e.icon,onClick:t=>{t.stopPropagation(),e.onClick(t)},size:"small",disabled:e.disabled})))))))}}}]);
//# sourceMappingURL=998.d04f8795.chunk.js.map