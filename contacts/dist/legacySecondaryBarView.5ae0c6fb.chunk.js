"use strict";(self.webpackChunkcarbonio_contacts_ui=self.webpackChunkcarbonio_contacts_ui||[]).push([[200],{4836:(e,a,t)=>{t.d(a,{BG:()=>i,FE:()=>s,Gz:()=>u,HF:()=>c,J5:()=>l,Np:()=>m,sf:()=>d});var o=t(4702),r=t(4710),n=t.n(r);const l=n()(o.Row).withConfig({displayName:"styled-components__HoverRow",componentId:"sc-1p4lrn0-0"})(["position:relative;cursor:pointer;background:",";&:hover{background:",";}"],(({theme:e})=>e.palette.transparent.regular),(({theme:e})=>e.palette.transparent.hover)),d=n()(o.Row).withConfig({displayName:"styled-components__HoverContainer",componentId:"sc-1p4lrn0-1"})([""]),s=n()(o.Row).withConfig({displayName:"styled-components__HoverBarContainer",componentId:"sc-1p4lrn0-2"})(["display:none;position:absolute;top:0;right:0;background:linear-gradient(to right,transparent,currentColor);"]),i=n()(o.Container).withConfig({displayName:"styled-components__ListItemContainer",componentId:"sc-1p4lrn0-3"})(["position:relative;cursor:pointer;","{display:none;}&:hover{","{display:flex;}}"],s,s),c=n()(o.ListItem).attrs((({background:e,selectedBackground:a,activeBackground:t,active:o,selected:r})=>({backgroundColor:o&&t||r&&a||e}))).withConfig({displayName:"styled-components__StyledListItem",componentId:"sc-1p4lrn0-4"})([""," transition:none;",""],(({backgroundColor:e,theme:a})=>e&&(0,o.pseudoClasses)(a,e,"color")),(({backgroundColor:e,theme:a})=>e&&(0,r.css)(["","{background:linear-gradient(to right,transparent,",");}&:focus ","{background:linear-gradient( to right,transparent,"," );}&:hover ","{background:linear-gradient( to right,transparent,"," );}&:active ","{background:linear-gradient( to right,transparent,"," );}"],s,(0,o.getColor)(e,a),s,(0,o.getColor)(`${e}.focus`,a),s,(0,o.getColor)(`${e}.hover`,a),s,(0,o.getColor)(`${e}.active`,a)))),m=n()(o.Container).withConfig({displayName:"styled-components__ScrollableContainer",componentId:"sc-1p4lrn0-5"})(["overflow-y:auto;"]),u=n()(o.Avatar).withConfig({displayName:"styled-components__CustomIconAvatar",componentId:"sc-1p4lrn0-6"})(["& > svg{max-width:1.5rem;max-height:1.5rem;min-width:1.5rem;min-height:1.5rem;}"])},1863:(e,a,t)=>{t.r(a),t.d(a,{default:()=>pe});var o=t(7559),r=t.n(o),n=t(1748),l=t(4702),d=t(4577),s=t(2509),i=t(8153),c=t(8698),m=t(4710),u=t.n(m),h=(t(3619),t(2816)),b=t(2651),p=t(2014),f=t(9812),g=t(4362),k=t(7125);const v=({defaultParentId:e,onClose:a})=>{const[t]=(0,i.useTranslation)(),n=(0,l.useSnackbar)(),c=(0,p.a4)(e??d.FOLDERS.USER_ROOT),[m,u]=(0,o.useState)(""),[h,b]=(0,o.useState)(c),v=(0,o.useMemo)((()=>t("folder.modal.new.title","Create new address book")),[t]),E=(0,o.useMemo)((()=>t("label.create","Create")),[t]),C=(0,o.useMemo)((()=>(0,s.filter)(c?.children,(e=>e.name===m)).length>0),[c?.children,m]),y=(0,o.useMemo)((()=>C?t("folder.modal.new.input.name_exist","Name already exists in this path"):t("folder.modal.new.input.name","Insert address book name")),[C,t]),_=(0,o.useMemo)((()=>void 0===m||0===m.trim().length||void 0===h||C),[C,m,h]),w=(0,o.useCallback)((e=>u(e.target.value)),[]),A=(0,o.useCallback)((e=>{b(e)}),[]),x=(0,o.useCallback)((()=>{h&&m&&g.u.createFolder({parentFolderId:h.id??d.FOLDERS.CONTACTS,name:m}).then((()=>{n({key:"create-address-book-success",replace:!0,type:"success",label:t("folder.snackbar.folder_new","New address book created"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0}),a()})).catch((()=>{n({key:"create-address-book-error",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})}))}),[n,m,a,h,t]);return r().createElement(r().Fragment,null,r().createElement(l.ModalHeader,{title:v,onClose:a,showCloseIcon:!0}),r().createElement(l.Divider,null),r().createElement(l.Padding,{vertical:"medium"},r().createElement(l.Container,{gap:"0.5rem",mainAlignment:"flex-start",crossAlignment:"flex-start",height:"fit"},r().createElement(l.Input,{label:y,backgroundColor:"gray5",hasError:C,value:m,onChange:w}),r().createElement(k.Q,{selectedFolderId:h?.id,onFolderSelected:A,showSharedAccounts:!0,showTrashFolder:!1,showLinkedFolders:!0,allowRootSelection:!0,allowFolderCreation:!1}))),r().createElement(l.Divider,null),r().createElement(l.ModalFooter,{confirmLabel:E,confirmDisabled:_,onConfirm:x}))},E=({addressBook:e,onClose:a})=>{const[t]=(0,i.useTranslation)(),n=(0,l.useSnackbar)(),d=(0,o.useMemo)((()=>t("folder.modal.delete.title",{addressBookName:e.name,defaultValue:"Delete {{addressBookName}}"})),[e.name,t]),s=(0,o.useMemo)((()=>t("label.delete","Delete")),[t]),c=(0,o.useMemo)((()=>t("folder.modal.delete.body.message2","Do you want to delete permanently the selected address book? If you delete it, the related content will be permanently removed and the address book will no longer be recoverable.")),[t]),m=(0,o.useCallback)((()=>{g.u.deleteFolder(e.id).then((()=>{n({key:"delete-folder-success",replace:!0,type:"info",label:t("folder.snackbar.address_book_permanently_deleted","Address book permanently deleted"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0}),a()})).catch((()=>n({key:"delete-folder-error",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})))}),[e.id,n,a,t]);return r().createElement(r().Fragment,null,r().createElement(l.ModalHeader,{title:d,onClose:a,showCloseIcon:!0}),r().createElement(l.Divider,null),r().createElement(l.ModalBody,null,r().createElement(l.Text,{overflow:"break-word"},c)),r().createElement(l.Divider,null),r().createElement(l.ModalFooter,{onConfirm:m,confirmLabel:s,confirmColor:"error"}))};var C=t(9967),y=t(5302);t(4438);const _={none:{name:"None",key:"share.none",flags:"",regex:"^$"},viewer:{name:"Viewer",key:"share.viewer",flags:"r",regex:"^r$"},admin:{name:"Admin",key:"share.admin",flags:"rwidxa",regex:"^rwidxa[c]?$"},manager:{name:"Manager",key:"share.manager",flags:"rwidx",regex:"^rwidx[c]?$"}},w=e=>Object.values(_).map((a=>({label:e(a.key,a.name),value:a.flags}))),A=(e,a)=>{let t=(0,s.find)(_,(a=>null!==e.match(a.regex)));return t||(t=_.none),a(t.key,t.name)},x=({grant:e})=>{const[a]=(0,i.useTranslation)(),t=(0,o.useMemo)((()=>A(e.perm||"",a)),[e.perm,a]),n=(0,o.useMemo)((()=>{const a=e=>`${e} - ${t}`;return e.d?a(e.d):a(e.zid)}),[e,t]);return r().createElement(l.Container,{crossAlignment:"flex-start"},r().createElement(l.Chip,{label:n}))},S=({addressBookId:e,grant:a,onEdit:t,onRevoke:n})=>{const[s]=(0,i.useTranslation)(),c=(0,d.useUserAccount)(),m=(0,l.useSnackbar)(),u=(0,o.useCallback)((()=>{n(a)}),[a,n]),h=(0,o.useCallback)((()=>{a.d&&g.u.sendShareNotification({accountName:c.name,folderId:e,addresses:[a.d]}).then((a=>{m({key:`resend-${e}-share-notification-success`,replace:!0,type:"info",label:s("snackbar.share_resend","Share invite resent"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})})).catch((()=>{m({key:`resend-${e}-share-notification-error`,replace:!0,type:"error",label:s("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})}))}),[c,e,s,a.d,m]),b=(0,o.useCallback)((()=>{t(a)}),[a,t]);return r().createElement(l.Container,{orientation:"horizontal",mainAlignment:"flex-end",maxWidth:"fit"},r().createElement(l.Tooltip,{label:s("label.edit_access","Edit access"),placement:"top"},r().createElement(l.Button,{type:"outlined",label:s("label.edit"),onClick:b,size:"small"})),r().createElement(l.Padding,{horizontal:"extrasmall"}),r().createElement(l.Tooltip,{label:s("tooltip.revoke","Revoke access"),placement:"top"},r().createElement(l.Button,{type:"outlined",label:s("label.revoke","Revoke"),color:"error",onClick:u,size:"small"})),r().createElement(l.Padding,{horizontal:"extrasmall"}),r().createElement(l.Tooltip,{label:s("tooltip.resend","Send e-mail notification about this share"),placement:"top",maxWidth:"18.75rem"},r().createElement(l.Button,{type:"outlined",label:s("label.resend","Resend"),onClick:h,size:"small"})))},T=({grant:e,addressBookId:a,onEdit:t,onRevoke:o})=>r().createElement(l.Container,{orientation:"horizontal",mainAlignment:"flex-end",padding:{bottom:"small"}},r().createElement(x,{grant:e}),r().createElement(S,{addressBookId:a,grant:e,onEdit:t,onRevoke:o})),B=({addressBookId:e,onEdit:a,onRevoke:t})=>{const[o]=(0,i.useTranslation)(),n=(0,y.a4)(e),d=n?.acl?.grant??[];return r().createElement(l.Container,{mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},r().createElement(l.Padding,{vertical:"small"}),r().createElement(l.Text,{weight:"bold"},o("label.shares_folder_edit","Sharing of this address book")),r().createElement(l.Padding,{vertical:"small"}),(0,s.map)(d,(o=>r().createElement(T,{key:o.zid,grant:o,addressBookId:e,onEdit:a,onRevoke:t}))),r().createElement(l.Padding,{bottom:"medium"}))};var M=t(6317);const F=({addressBookId:e,onAddShare:a,onEditShare:t,onRevokeShare:n,onClose:d})=>{const s=(0,y.a4)(e),c=(0,l.useSnackbar)(),[m]=(0,i.useTranslation)(),[u,b]=(0,o.useState)(s?.name??""),[p,k]=(0,o.useState)(s?.color??0),v=(0,o.useMemo)((()=>m("label.edit_folder_properties",{name:s?.name,defaultValue:"Edit {{name}}'s properties"})),[s?.name,m]),E=(0,o.useMemo)((()=>s?.name===u&&s?.color===p),[s,u,p]),C=(0,o.useMemo)((()=>!s||!(0,h.JC)(s)),[s]),_=(0,o.useCallback)((()=>d()),[d]),w=(0,o.useCallback)((()=>{g.u.updateFolder({folderId:e,name:u,color:p}).then((()=>{c({key:"address-book-edit-success",replace:!0,type:"info",hideButton:!0,label:m("snackbar.folder_edited","Address book edited successfully"),autoHideTimeout:f.fT.defaultSnackbar}),_()})).catch((()=>{c({key:"address-book-edit-error",replace:!0,type:"error",hideButton:!0,label:m("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar})}))}),[e,u,p,c,m,_]),A=(0,o.useCallback)((e=>b(e.target.value)),[]),x=(0,o.useCallback)((e=>k(Number(e))),[]),S=(0,o.useMemo)((()=>s?.acl?.grant&&s.acl?.grant.length>0),[s?.acl?.grant]),T=(0,o.useMemo)((()=>(0,h.mY)(e)),[e]);return r().createElement(r().Fragment,null,r().createElement(l.Container,{padding:{vertical:"medium",horizontal:"small"},mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},r().createElement(l.ModalHeader,{onClose:d,title:v,showCloseIcon:!0}),r().createElement(l.Divider,null),r().createElement(l.Container,{orientation:"horizontal",mainAlignment:"center",crossAlignment:"flex-start",padding:{vertical:"small"}},r().createElement(l.Input,{label:m("modal.address_book_name","Address book name"),backgroundColor:"gray5",value:u,onChange:A,disabled:T})),r().createElement(l.Padding,{top:"small"}),r().createElement(M.qy,{onChange:x,label:m("label.select_color","Select Color"),defaultColor:p??0}),r().createElement(l.Padding,{top:"small"}),r().createElement(l.Container,{orientation:"horizontal",mainAlignment:"center",crossAlignment:"flex-start"},r().createElement(l.Container,{mainAlignment:"flex-start",crossAlignment:"flex-start",padding:{top:"small",bottom:"small"},width:"48%",style:{minHeight:"3rem",maxWidth:"calc(100% - 3rem)"}},r().createElement(l.Text,{color:"secondary"},m("label.type","Type")),r().createElement(l.Row,{takeAvailableSpace:!0,wrap:"nowrap",height:"fit",width:"fill",orientation:"horizontal",mainAlignment:"flex-start",padding:{top:"small"}},r().createElement(l.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},r().createElement(l.Text,{size:"medium",overflow:"break-word"},m("folder.type","Contact Folder"))))),r().createElement(l.Padding,{horizontal:"small"}),r().createElement(l.Container,{mainAlignment:"flex-start",crossAlignment:"flex-start",padding:{top:"small",bottom:"small"},width:"48%",style:{minHeight:"3rem",maxWidth:"calc(100% - 3rem)"}},r().createElement(l.Text,{color:"secondary"},m("label.contacts","Contacts")),r().createElement(l.Row,{takeAvailableSpace:!0,wrap:"nowrap",height:"fit",width:"fill",orientation:"horizontal",mainAlignment:"flex-start",padding:{top:"extrasmall"}},r().createElement(l.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},r().createElement(l.Text,{size:"medium",overflow:"break-word"},s?.n))))),S&&r().createElement(r().Fragment,null,r().createElement(l.Divider,null),r().createElement(l.Padding,{vertical:"small"}),r().createElement(B,{addressBookId:e,onEdit:t,onRevoke:n})),r().createElement(l.Divider,null),r().createElement(l.ModalFooter,{onConfirm:w,confirmLabel:m("label.edit","Edit"),onSecondaryAction:a,secondaryActionLabel:m("label.add_share","Add Share"),secondaryActionDisabled:C,confirmDisabled:E,confirmColor:"primary"})))};var R=t(7770);const I=({onClose:e,addressBookId:a,editMode:t=!1,activeGrant:n})=>{const[c]=(0,i.useTranslation)(),m=(0,o.useMemo)((()=>w(c)),[c]),[u,h]=(0,o.useState)(!0),[b,p]=(0,o.useState)(""),[k,v]=(0,o.useState)([]),[E,C]=(0,o.useState)(t?n.perm:"r"),_=(0,o.useMemo)((()=>(0,s.replace)((0,s.split)(n?.d,"@")?.[0],"."," ")),[n]),S=(0,o.useMemo)((()=>function(e){const a=e.charCodeAt(0)-32;return String.fromCharCode(a)+e.substr(1)}(_)),[_]),T=(0,d.useUserAccount)(),B=(0,y.a4)(a),M=(0,l.useSnackbar)(),F=(0,o.useMemo)((()=>t?`${c("label.edit_access_name",{name:S,defaultValue:"Edit {{name}}'s access"})} `:`${c("label.share","Share")} ${B?.name}`),[c,B,t,S]),I=(0,o.useCallback)((e=>{C(e)}),[]),D=(0,o.useCallback)((()=>{const o=t?[n?.d??""]:k.map((e=>e.email));g.u.shareFolder({addresses:o,role:E,folderId:a}).then((()=>{M({key:`share-${a}-address-book-success`,replace:!0,hideButton:!0,type:"info",label:t?c("snackbar.share_updated","Access rights updated"):c("snackbar.folder_shared","Address book shared"),autoHideTimeout:f.fT.defaultSnackbar}),u&&g.u.sendShareNotification({accountName:T.name,folderId:a,addresses:o,message:b}),e()})).catch((e=>{M({key:`share-${a}-address-book-error`,replace:!0,type:"error",hideButton:!0,label:c("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar})}))}),[T.name,n?.d,a,k,M,t,e,u,E,b,c]),O=(0,o.useMemo)((()=>n?.perm===E),[n?.perm,E]),H=(0,o.useMemo)((()=>({value:t?n?.perm:"r",label:A(t?n?.perm:"r",c)})),[n?.perm,t,c]);return r().createElement(l.Container,{padding:{all:"medium"},mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},r().createElement(l.ModalHeader,{title:F,onClose:e,showCloseIcon:!0}),r().createElement(l.Divider,null),r().createElement(l.Padding,{top:"small"}),t?r().createElement(l.Container,{orientation:"horizontal",mainAlignment:"flex-end",padding:{bottom:"large",top:"large"}},r().createElement(x,{grant:n})):r().createElement(l.Container,{height:"fit",padding:{vertical:"small"}},r().createElement(R.p,{placeholder:c("share.recipients_address","Recipients’ e-mail addresses"),onChange:e=>{const a=e.reduce(((e,a)=>(a.email&&e.push({email:a.email}),e)),[]);v(a)},defaultValue:k})),r().createElement(l.Container,{height:"fit"},r().createElement(l.Select,{items:m,background:"gray5",label:c("share.role","Role"),onChange:I,defaultSelection:H})),r().createElement(l.Container,{height:"fit",mainAlignment:"flex-start",crossAlignment:"flex-start",padding:{vertical:"medium"}},r().createElement(l.Checkbox,{value:u,defaultChecked:u,onClick:()=>h(!u),label:c("share.send_notification","Send notification about this share")})),r().createElement(l.Container,{height:"fit"},r().createElement(l.Input,{label:c("share.standard_message","Add a note to standard message"),value:b,onChange:e=>{p(e.target.value)},disabled:!u,backgroundColor:"gray5"})),r().createElement(l.Container,{orientation:"horizontal",crossAlignment:"baseline",mainAlignment:"baseline",padding:{all:"small"}},r().createElement(l.Row,{padding:{right:"small"}},r().createElement(l.Text,{weight:"bold",size:"small",color:"gray0"},"Note:")),r().createElement(l.Row,{padding:{bottom:"small"}},r().createElement(l.Text,{overflow:"break-word",size:"small",color:"gray1"},c("share.share_note","The standard message displays your name, the name of the shared item, permissions granted to the recipients, and sign in information.")))),r().createElement(l.Divider,null),r().createElement(l.ModalFooter,{confirmLabel:t?c("label.edit_access","Edit access"):c("action.share_folder","Share folder"),onConfirm:D,confirmDisabled:t?O:k.length<1,onSecondaryAction:e,secondaryActionLabel:c("folder.modal.footer.go_back","Go back")}))},D=({addressBookId:e,onClose:a,grant:t})=>{const[n]=(0,i.useTranslation)(),[s,c]=(0,o.useState)(!1),[m,u]=(0,o.useState)(""),h=(0,l.useSnackbar)(),b=(0,d.useUserAccount)(),p=(0,y.a4)(e),k=(0,o.useCallback)((()=>{g.u.revokeFolderGrant(e,t.zid??"").then((()=>{s&&g.u.sendShareNotification({message:m,addresses:[t.d??""],folderId:e,accountName:b.name})})).then((()=>{h({key:`remove-share-${e}-grant-success`,replace:!0,type:"info",label:n("snackbar.share_revoke","Share access revoked"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0}),a()})).catch((()=>{h({key:`remove-share-${e}-grant-error`,replace:!0,type:"error",label:n("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})}))}),[b.name,e,h,t.d,t.zid,a,s,m,n]);return r().createElement(l.Container,{padding:{all:"small"},mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},r().createElement(l.ModalHeader,{title:n("label.revoke_share",{title:p?.name,defaultValue:"Revoke {{title}}'s share"}),onClose:a,showCloseIcon:!0}),r().createElement(l.Container,{orientation:"horizontal",mainAlignment:"flex-end",padding:{bottom:"large",top:"large"}},r().createElement(x,{grant:t})),r().createElement(l.Checkbox,{iconSize:"medium",value:s,defaultChecked:s,onClick:()=>c(!s),label:n("share.send_notification","Send notification about this share")}),r().createElement(l.Container,{mainAlignment:"center",crossAlignment:"flex-start",height:"fit",padding:{bottom:"large",top:"large"}},r().createElement(l.Input,{label:n("share.standard_message","Add a note to standard message"),value:m,onChange:e=>{u(e.target.value)},disabled:!s,backgroundColor:"gray5"})),r().createElement(l.Container,{orientation:"horizontal",crossAlignment:"baseline",mainAlignment:"baseline",padding:{all:"small"}},r().createElement(l.Row,{padding:{right:"small"}},r().createElement(l.Text,{weight:"bold",size:"small",color:"gray0"},n("label.note","Note:"))),r().createElement(l.Row,{padding:{bottom:"small"}},r().createElement(l.Text,{overflow:"break-word",size:"small",color:"gray1"},n("share.share_note","The standard message displays your name, the name of the shared item, permissions granted to the recipients, and sign in information.")))),r().createElement(l.Container,{mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},r().createElement(l.ModalFooter,{confirmColor:"error",onConfirm:k,onSecondaryAction:a,secondaryActionLabel:n("folder.modal.footer.go_back","Go back"),confirmLabel:n("label.revoke","Revoke")})))},O=({addressBookId:e,onClose:a})=>{const[t,n]=(0,o.useState)(void 0),l=(0,o.useCallback)((a=>{const t=r().createElement(I,{activeGrant:a,onClose:()=>n(void 0),addressBookId:e,editMode:!0});n(t)}),[e]),d=(0,o.useCallback)((()=>{const a=r().createElement(I,{onClose:()=>n(void 0),addressBookId:e,activeGrant:{perm:"r",gt:"usr"}});n(a)}),[e]),s=(0,o.useCallback)((a=>{const t=r().createElement(D,{addressBookId:e,onClose:()=>n(void 0),grant:a});n(t)}),[e]);return t??r().createElement(F,{addressBookId:e,onAddShare:d,onEditShare:l,onRevokeShare:s,onClose:a})},H=({addressBook:e,onClose:a})=>{const[t]=(0,i.useTranslation)(),n=(0,l.useSnackbar)(),d=(0,o.useMemo)((()=>(0,h.vF)(e.id)),[e.id]),s=(0,o.useMemo)((()=>t("folder.modal.empty.title",{addressBookName:e.name,defaultValue:"Empty {{addressBookName}}"})),[e.name,t]),c=(0,o.useMemo)((()=>t("label.empty","Empty")),[t]),m=(0,o.useMemo)((()=>d?r().createElement(l.Text,{overflow:"break-word"},t("folder.modal.empty.message3","Do you want to empty the trash?"),r().createElement("br",null),t("folder.modal.empty.message4","Its content will be permanently deleted and it won't be possible to recover it.")):r().createElement(l.Text,{overflow:"break-word"},t("folder.modal.empty.message1","Do you want to empty the selected address book?"),r().createElement("br",null),t("folder.modal.empty.message2","All the related contacts will be permanently deleted and it won't be possible to recover them."))),[d,t]),u=(0,o.useCallback)((()=>{const o=d?t("folder.snackbar.trash_empty","Trash folder emptied successfully"):t("folder.snackbar.folder_empty","Address book emptied successfully");g.u.emptyFolder(e.id).then((()=>{n({key:"Empty-folder-success",replace:!0,type:"info",label:o,autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0}),a()})).catch((()=>n({key:"empty-folder-error",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})))}),[e.id,n,d,a,t]);return r().createElement(r().Fragment,null,r().createElement(l.ModalHeader,{title:s,onClose:a,showCloseIcon:!0}),r().createElement(l.Divider,null),r().createElement(l.ModalBody,null,m),r().createElement(l.Divider,null),r().createElement(l.ModalFooter,{onConfirm:u,confirmLabel:c,confirmColor:"error"}))};t(8608),t(9727),t(6098);const L=({addressBook:e,closeCallback:a,file:t})=>{const[n]=(0,i.useTranslation)(),d=(0,l.useSnackbar)(),s=(0,o.useMemo)((()=>n("import_contacts.modal.title","Import contacts")),[n]),c=(0,o.useMemo)((()=>n("import_contacts.modal.confirm","Import")),[n]),m=(0,o.useCallback)((()=>{a()}),[a]),u=(0,o.useCallback)((e=>{d({key:"contacts-import-upload-error",replace:!0,type:"error",label:n("label.errors.upload_failed_generic",{filename:e.name,defaultValue:'Upload failed for the file "{{filename}}"'}),autoHideTimeout:f.fT.defaultSnackbar})}),[d,n]),h=(0,o.useCallback)((({attachmentId:e,folderId:a})=>{g.u.importContacts({aid:e,folderId:a}).then((e=>{d({key:"contacts-import-success",replace:!0,type:"info",hideButton:!0,label:n("import_contacts.snackbar.import_contacts_success",{count:e.contactsCount,defaultValue:"{{count}} contacts imported and added to the selected address book",defaultValue_one:"{{count}} contact imported and added to the selected address book"}),autoHideTimeout:f.fT.defaultSnackbar}),m()})).catch((()=>{d({key:"contacts-import-error",replace:!0,type:"error",label:n("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})}))}),[d,m,n]),b=(0,o.useCallback)((()=>{g.u.upload(t).then((a=>{const t=a[0];h({attachmentId:t.aid,folderId:e.id})})).catch((()=>{u(t)}))}),[e.id,t,h,u]);return r().createElement(l.Container,{padding:{all:"large"},mainAlignment:"center",crossAlignment:"flex-start",height:"fit"},r().createElement(l.ModalHeader,{title:s,onClose:m,showCloseIcon:!0}),r().createElement(l.Divider,null),r().createElement(l.ModalBody,null,r().createElement(l.Text,{overflow:"break-word",size:"medium"},n("import_contacts.modal.description",{fileName:t.name,folderName:e.name,defaultValue:'The contacts contained within the specified {{fileName}} file will be imported into "{{folderName}}" folder'}))),r().createElement(l.Divider,null),r().createElement(l.ModalFooter,{confirmLabel:c,onConfirm:b}))},N=({addressBookId:e,onClose:a,onMove:t})=>{const[n]=(0,i.useTranslation)(),d=(0,p.a4)(e),[s,c]=(0,o.useState)(),m=(0,o.useMemo)((()=>n("folder.modal.move.title",{addressBookName:d?.name,defaultValue:"Move {{addressBookName}}"})),[d?.name,n]),u=(0,o.useMemo)((()=>n("label.move","Move")),[n]),h=(0,o.useMemo)((()=>void 0===s),[s]),b=(0,o.useCallback)((()=>{s&&t(s.id)}),[t,s]),f=(0,o.useCallback)((e=>{c(e)}),[]);return r().createElement(r().Fragment,null,r().createElement(l.ModalHeader,{title:m,onClose:a,showCloseIcon:!0}),r().createElement(l.Divider,null),r().createElement(l.Padding,{vertical:"medium"},r().createElement(l.Container,{gap:"0.5rem",mainAlignment:"flex-start",crossAlignment:"flex-start",height:"fit"},r().createElement(k.Q,{onFolderSelected:f,showSharedAccounts:!0,showTrashFolder:!1,showLinkedFolders:!0,excludeIds:d?.parent?[d?.parent]:[],allowRootSelection:!0,allowFolderCreation:!1}))),r().createElement(l.Divider,null),r().createElement(l.ModalFooter,{confirmLabel:u,confirmDisabled:h,onConfirm:b}))},P=()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useModal)(),t=(0,l.useSnackbar)(),n=(0,o.useCallback)(((a,o)=>g.u.moveFolder(a,o).then((()=>(t({key:"move-address-book-success",replace:!0,type:"success",label:e("folder.action.moved","Address book moved successfully"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0}),!0))).catch((()=>(t({key:"move-address-book-error",replace:!0,type:"error",label:e("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0}),!1)))),[t,e]),d=(0,o.useCallback)((({addressBook:e,newParentAddressBook:a}={})=>!(!e||(0,h.mY)(e.id)||!(0,h._u)(e)||a&&!(0,h._u)(a)||a?.id===e.l||(0,h.PJ)(e))),[]),s=(0,o.useCallback)((({addressBook:e,newParentAddressBook:t}={})=>{if(e&&d({addressBook:e,newParentAddressBook:t}))if(t)n(e.id,t.id);else{const t=a({maxHeight:"90vh",children:r().createElement(N,{addressBookId:e.id,onMove:a=>{n(e.id,a).then((e=>e&&t()))},onClose:()=>t()})},!0)}}),[d,a,n]);return(0,o.useMemo)((()=>({id:f.kM.moveAddressBook,label:e("folder.action.move","Move"),icon:"MoveOutline",execute:s,canExecute:d})),[d,s,e])},z=({icon:e,label:a,text:t})=>r().createElement(l.Row,{width:"fill",mainAlignment:"flex-start",crossAlignment:"flex-start",padding:{top:"small"}},r().createElement(l.Row,null,r().createElement(l.Icon,{icon:e}),r().createElement(l.Row,{padding:{right:"small",left:"small"}},r().createElement(l.Text,{weight:"bold"},`${a} :`))),r().createElement(l.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start"},r().createElement(l.Text,{overflow:"break-word"},t))),$=({onClose:e,addressBook:a})=>{const[t]=(0,i.useTranslation)(),n=((0,o.useMemo)((()=>w(t)),[t]),(0,o.useMemo)((()=>A(a.perm??"",t)),[a.perm,t])),d=(/r/.test(a.perm||"")?`${t("share.read","Read")}`:"").concat(/w/.test(a.perm||"")?`, ${t("share.write","Write")}`:"").concat(/i/.test(a.perm||"")?`, ${t("share.insert","Insert")}`:"").concat(/d/.test(a.perm||"")?`, ${t("label.delete","Delete")}`:"").concat(/a/.test(a.perm||"")?`, ${t("share.administer","Administer")}`:"").concat(/c/.test(a.perm||"")?`, ${t("label.create","Create")}`:"").concat(/x/.test(a.perm||"")?`, ${t("share.workflow","Workflow")}`:"");return r().createElement(l.Container,{padding:"small",mainAlignment:"center",crossAlignment:"flex-start",height:"fit",onClick:e=>{e&&e.stopPropagation()}},r().createElement(l.ModalHeader,{title:`${t("share.share_info","Shared address book's info")} `,onClose:e,showCloseIcon:!0}),r().createElement(l.Divider,null),r().createElement(l.ModalBody,null,r().createElement(z,{icon:"InfoOutline",label:`${t("share.shared_item","Shared Item")}`,text:a.name}),r().createElement(z,{icon:"ContactsModOutline",label:`${t("label.type","Type")}`,text:t("share.contact_folder","Address Book")}),r().createElement(z,{icon:"ShieldOutline",label:`${t("share.role","Role")}`,text:n}),r().createElement(z,{icon:"PeopleOutline",label:`${t("label.contacts","Contacts")}`,text:`${a.n}`}),r().createElement(z,{icon:"UnlockOutline",label:`${t("share.allowed_actions","Allowed actions")}`,text:d})))},U=({addressBook:e,onClose:a})=>{const[t]=(0,i.useTranslation)(),n=(0,l.useSnackbar)(),d=(0,o.useMemo)((()=>t("folder.modal.delete.title",{addressBookName:e.name,defaultValue:"Delete {{addressBookName}}"})),[e.name,t]),s=(0,o.useMemo)((()=>t("label.delete","Delete")),[t]),c=(0,o.useMemo)((()=>t("folder.modal.delete.body.message1","Do you want to delete the selected address book? If you delete it, the related content will be permanently removed and the address book will no longer be recoverable.")),[t]),m=(0,o.useCallback)((()=>{e.l&&g.u.moveFolder(e.id,e.l).then((()=>{n({key:"restore-folder-success",replace:!0,type:"success",label:t("label.address_book_restored","Address book restored"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})})).catch((()=>{n({key:"restore-folder-error",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})}))}),[e.id,e.l,n,t]),u=(0,o.useCallback)((()=>{g.u.trashFolder(e.id).then((()=>{n({key:"delete-folder-success",replace:!0,type:"info",label:t("folder.snackbar.address_book_moved_to_trash","Address book moved to trash"),autoHideTimeout:f.fT.trashAddressBook,hideButton:!1,actionLabel:t("label.undo","Undo"),onActionClick:m}),a()})).catch((()=>n({key:"delete-folder-error",replace:!0,type:"error",label:t("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})))}),[e.id,n,a,m,t]);return r().createElement(r().Fragment,null,r().createElement(l.ModalHeader,{title:d,onClose:a,showCloseIcon:!0}),r().createElement(l.Divider,null),r().createElement(l.ModalBody,null,r().createElement(l.Text,{overflow:"break-word"},c)),r().createElement(l.Divider,null),r().createElement(l.ModalFooter,{onConfirm:u,confirmLabel:s,confirmColor:"error"}))},V=(e,a)=>({id:e.id,icon:e.icon,label:e.label,onClick:t=>{t.stopPropagation(),e.execute(a)}}),G=e=>{const a=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useModal)(),t=(0,o.useCallback)((e=>!e||!(0,b.HL)(e)&&!(0,h.vF)(e.id)&&!!(0,h.Pe)(e)),[]),n=(0,o.useCallback)((e=>{if(!t(e))return;const o=a({maxHeight:"90vh",children:r().createElement(v,{defaultParentId:e?.id,onClose:()=>o()})},!0)}),[t,a]);return(0,o.useMemo)((()=>({id:f.kM.createAddressBook,label:e("label.new_address_book","New address book"),icon:"AddressBookOutline",execute:n,canExecute:t})),[t,n,e])})(),t=P(),n=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useModal)(),t=(0,o.useCallback)((e=>!!e&&!(0,b.HL)(e)&&!(0,h.vF)(e.id)),[]),n=(0,o.useCallback)((e=>{if(!t(e))return;if(!e)return;const o=a({maxHeight:"90vh",children:r().createElement(C.tv,null,r().createElement(O,{addressBookId:e.id,onClose:()=>o()}))},!0)}),[t,a]);return(0,o.useMemo)((()=>({id:f.kM.editAddressBook,label:e("folder.action.edit","Edit address book"),icon:"Edit2Outline",execute:n,canExecute:t})),[t,n,e])})(),d=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useModal)(),t=(0,o.useCallback)((e=>!!e&&!(0,h.mY)(e.id)&&!!(0,h.q7)(e)&&(0,b.HL)(e)),[]),n=(0,o.useCallback)((e=>{if(!t(e))return;if(!e)return;const o=a({maxHeight:"90vh",children:r().createElement(C.tv,null,r().createElement(E,{addressBook:e,onClose:()=>o()}))},!0)}),[t,a]);return(0,o.useMemo)((()=>({id:f.kM.deleteAddressBook,label:e("folder.action.delete_permanently","Delete address book permanently"),icon:"Trash2Outline",execute:n,canExecute:t})),[t,n,e])})(),s=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useModal)(),t=(0,o.useCallback)((e=>{if(!e)return;const t=a({maxHeight:"90vh",children:r().createElement(C.tv,null,r().createElement(U,{addressBook:e,onClose:()=>t()}))},!0)}),[a]),n=(0,o.useCallback)((e=>!(!e||(0,h.mY)(e.id)||(0,h.PJ)(e)||(0,b.HL)(e))),[]);return(0,o.useMemo)((()=>({id:f.kM.trashAddressBook,label:e("folder.action.delete","Delete address book"),icon:"Trash2Outline",execute:t,canExecute:n})),[n,t,e])})(),c=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useModal)(),t=(0,o.useCallback)((e=>!(!e||(0,b.HL)(e)||(0,h.vF)(e.id)||(0,h.PJ)(e)||0===e.n)),[]),n=(0,o.useCallback)((e=>{if(!t(e))return;if(!e)return;const o=a({maxHeight:"90vh",children:r().createElement(C.tv,null,r().createElement(H,{addressBook:e,onClose:()=>o()}))},!0)}),[t,a]);return(0,o.useMemo)((()=>({id:f.kM.emptyAddressBook,label:e("folder.action.empty.folder","Empty address book"),icon:"EmptyFolderOutline",execute:n,canExecute:t})),[t,n,e])})(),m=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useModal)(),t=(0,o.useCallback)((e=>!(!e||(0,b.HL)(e)||(0,h.PJ)(e)||!(0,h.vF)(e.id)||0===e.n)),[]),n=(0,o.useCallback)((e=>{if(!t(e))return;if(!e)return;const o=a({maxHeight:"90vh",children:r().createElement(C.tv,null,r().createElement(H,{addressBook:e,onClose:()=>o()}))},!0)}),[t,a]);return(0,o.useMemo)((()=>({id:f.kM.emptyTrash,label:e("folder.action.empty.trash","Empty trash"),icon:"DeletePermanentlyOutline",execute:n,canExecute:t})),[t,n,e])})(),u=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useSnackbar)(),t=(0,o.useCallback)((e=>!(!e||(0,h.PJ)(e)||(0,h.vF)(e.id)||(0,b.HL)(e)||0===e.n)),[]),r=(0,o.useCallback)((o=>{t(o)&&o&&g.u.exportContacts(o.id).then((e=>{((e,a)=>{const t=new Blob([e],{type:"application/csv"}),o=window.URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download=`${a}.csv`,r.click(),window.URL.revokeObjectURL(o)})(e,o.name)})).catch((()=>{a({key:"export-address-book-error",replace:!0,type:"error",label:e("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar,hideButton:!0})}))}),[t,a,e]);return(0,o.useMemo)((()=>({id:f.kM.exportAddressBook,label:e("label.export_address_book","Export csv file"),icon:"DownloadOutline",execute:r,canExecute:t})),[t,r,e])})(),p=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useModal)(),t=(0,o.useCallback)((e=>!(!e||(0,h.PJ)(e)||(0,h.vF)(e.id)||(0,b.HL)(e))),[]),n=(0,o.useCallback)((e=>{t(e)&&e&&new Promise(((e,a)=>{const t=document.createElement("input");t.type="file",t.multiple=!1,t.hidden=!1,t.accept=".csv, text/csv",t.click(),t.onchange=()=>t.files&&t.files.length>0?e(t.files[0]):a(),t.oncancel=()=>a()})).then((t=>{const o=a({maxHeight:"90vh",children:r().createElement(C.tv,null,r().createElement(L,{addressBook:e,file:t,closeCallback:()=>o()}))},!0)}))}),[t,a]);return(0,o.useMemo)((()=>({id:f.kM.importContacts,label:e("label.import_address_book","Import csv file"),icon:"UploadOutline",execute:n,canExecute:t})),[t,n,e])})(),k=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useModal)(),t=(0,o.useCallback)((e=>!!e&&(0,h.PJ)(e)),[]),n=(0,o.useCallback)((e=>{if(!e)return;if(!t(e))return;const o=a({maxHeight:"90vh",children:r().createElement(C.tv,null,r().createElement($,{addressBook:e,onClose:()=>o()}))},!0)}),[t,a]);return(0,o.useMemo)((()=>({id:f.kM.showShareInfo,label:e("share.share_info","Shared address book's info"),icon:"InfoOutline",execute:n,canExecute:t})),[t,n,e])})(),y=(()=>{const[e]=(0,i.useTranslation)(),a=(0,l.useSnackbar)(),t=(0,o.useCallback)((e=>!!e&&(0,h.PJ)(e)),[]),r=(0,o.useCallback)((o=>{o&&t(o)&&g.u.deleteFolder(o.id).then((()=>{a({key:"remove-address-book-link-success",replace:!0,type:"info",hideButton:!0,label:e("share.share_removed_succesfully","Shared removed successfully"),autoHideTimeout:f.fT.defaultSnackbar})})).catch((()=>{a({key:"remove-address-book-link-error",replace:!0,type:"error",hideButton:!0,label:e("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:f.fT.defaultSnackbar})}))}),[t,a,e]);return(0,o.useMemo)((()=>({id:f.kM.removeAddressBookLink,label:e("share.remove_from_this_list","Remove from this list"),icon:"CloseOutline",execute:r,canExecute:t})),[t,r,e])})();return(0,o.useMemo)((()=>{const o=[];return a.canExecute(e)&&o.push(V(a,e)),t.canExecute({addressBook:e})&&o.push(V(t,{addressBook:e})),c.canExecute(e)&&o.push(V(c,e)),m.canExecute(e)&&o.push(V(m,e)),n.canExecute(e)&&o.push(V(n,e)),d.canExecute(e)&&o.push(V(d,e)),s.canExecute(e)&&o.push(V(s,e)),u.canExecute(e)&&o.push(V(u,e)),p.canExecute(e)&&o.push(V(p,e)),k.canExecute(e)&&o.push(V(k,e)),y.canExecute(e)&&o.push(V(y,e)),o}),[e,a,d,n,c,m,u,p,t,y,k,s])};var J=t(6060),W=t(9518),j=t(7134);u()(l.Row).withConfig({displayName:"accordion-custom-component__FittedRow",componentId:"sc-lz32kn-0"})(["max-width:calc(100% - (2 * ","));height:3rem;"],(({theme:e})=>e.sizes.padding.small));const Z=u()(l.Container).withConfig({displayName:"accordion-custom-component__DropOverlayContainer",componentId:"sc-lz32kn-1"})(["position:absolute;width:calc(15.5rem - ","rem);height:100%;background:FOREGROUND_COLOR;border-radius:0.25rem;border:0.25rem solid #d5e3f6;opacity:0.4;"],(e=>e.folder.depth-2)),Y=u()(l.Container).withConfig({displayName:"accordion-custom-component__DropDenyOverlayContainer",componentId:"sc-lz32kn-2"})(["position:absolute;width:calc(15.5rem - ","rem);height:100%;background:",";border-radius:0.25rem;border:0.25rem solid #d5e3f6;opacity:0.4;"],(e=>e.folder.depth-2),(e=>e.theme.palette.gray1.regular)),Q=({item:e})=>{const[a]=(0,i.useTranslation)(),t=(0,d.useUserAccount)().name,n=(0,J.y)(),s=P(),c=(0,o.useCallback)((a=>{if(!("contact"===a.type&&n.canExecute({contacts:[a.data],newParentAddressBook:e})||"folder"===a.type&&s.canExecute({addressBook:a.data,newParentAddressBook:e})))return{success:!1}}),[e,s,n]),m=(0,o.useMemo)((()=>!1),[]),u=(0,o.useMemo)((()=>({size:"small"})),[]),b=(0,o.useMemo)((()=>({...e,label:e.id===d.FOLDERS.USER_ROOT?t:(0,j.k0)(a,e.id,e.name)??"",icon:(0,W.fX)(e)??void 0,iconColor:(0,W.dk)(e)??"",to:`/folder/${e.id}`,textProps:u})),[e,t,a,u]),p=G(e),f=(0,o.useMemo)((()=>{const t=(e,a,t)=>r().createElement(l.Padding,{left:"small"},r().createElement(l.Tooltip,{placement:"right",label:t},r().createElement(l.Row,null,r().createElement(l.Icon,{icon:e,color:a,size:"medium"}))));return(0,h.PJ)(e)?t("Linked","linked",a("tooltip.folder_linked_status","Linked to me")):e.acl?.grant?t("Shared","shared",a("tooltip.folder_sharing_status",{count:e.acl.grant.length,defaultValue_one:"Shared with {{count}} person",defaultValue:"Shared with {{count}} people"})):""}),[e,a]);return e.isLink&&e.broken?null:(0,h.jX)(e.id)||e.isLink&&e.oname===d.ROOT_NAME?r().createElement(r().Fragment,null):r().createElement(l.Row,{width:"fill",minWidth:0},r().createElement(l.Drop,{acceptType:["contact","folder"],onDrop:a=>{(a=>{const t=c(a);!1!==t?.success&&("contact"===a.type&&n.execute({contacts:[a.data],newParentAddressBook:e}),"folder"===a.type&&s.execute({addressBook:a.data,newParentAddressBook:e}))})({type:a.type??"",data:a.data,event:a.event})},onDragEnter:e=>c({type:e.type??"",data:e.data,event:e.event}),overlayAcceptComponent:r().createElement(Z,{folder:e}),overlayDenyComponent:r().createElement(Y,{folder:e})},r().createElement(l.Drag,{type:"folder",data:e,dragDisabled:m,style:{display:"block"}},r().createElement(d.AppLink,{to:`/folder/${e.id}`,style:{width:"100%",height:"100%",textDecoration:"none"}},r().createElement(l.Dropdown,{"data-testid":`folder-context-menu-${e.id}`,contextMenu:!0,items:p,display:"block",width:"100%"},r().createElement(l.Row,null,r().createElement(l.Padding,{left:"small"}),r().createElement(l.Tooltip,{label:b.label,placement:"right",maxWidth:"100%"},r().createElement(l.AccordionItem,{"data-testid":`accordion-folder-item-${e.id}`,item:b},f))))))))};t(4836),u()(l.ListItem).withConfig({displayName:"users-shares-list__CustomListItem",componentId:"sc-17fimkj-0"})(["&:hover{background-color:",""],(({theme:e,active:a})=>e.palette.transparent.regular));var X=t(3005),q=t.n(X),K=t(4514),ee=t(5383),ae=t(9026),te=t(679),oe=t(4714);const re=(0,oe.A)({palette:{currentColor:{regular:"currentColor",hover:"currentColor",active:"currentColor",focus:"currentColor",disabled:"currentColor"},transparent:{regular:"rgba(0, 0, 0, 0)",hover:"rgba(0, 0, 0, 0.05)",active:"rgba(0, 0, 0, 0.1)",focus:"rgba(0, 0, 0, 0.05)",disabled:"rgba(0, 0, 0, 0)"},primary:{regular:"#2b73d2",hover:"#225ca8",active:"#1e5092",focus:"#225ca8",disabled:"#aac8ee",main:"#2b73d2"},secondary:{regular:"#828282",hover:"#696969",active:"#5c5c5c",focus:"#696969",disabled:"#cccccc",main:"#828282"},header:{regular:"#cfd5dc",hover:"#b1bbc6",active:"#a3aebc",focus:"#b1bbc6",disabled:"#cfd5dc"},highlight:{regular:"#d5e3f6",hover:"#abc7ed",active:"#96b8e8",focus:"#abc7ed",disabled:"#d5e3f6"},gray0:{regular:"#414141",hover:"#282828",active:"#1b1b1b",focus:"#282828",disabled:"#cccccc"},gray1:{regular:"#828282",hover:"#696969",active:"#5c5c5c",focus:"#696969",disabled:"#cccccc"},gray2:{regular:"#cfd5dc",hover:"#b1bbc6",active:"#a3aebc",focus:"#b1bbc6",disabled:"#cfd5dc"},gray3:{regular:"#e6e9ed",hover:"#c8cfd8",active:"#bac2cd",focus:"#c8cfd8",disabled:"#e6e9ed"},gray4:{regular:"#eeeff3",hover:"#d0d3de",active:"#c1c5d3",focus:"#d0d3de",disabled:"#eeeff3"},gray5:{regular:"#f5f6f8",hover:"#d7dbe3",active:"#c8ced9",focus:"#d7dbe3",disabled:"#f5f6f8"},gray6:{regular:"#ffffff",hover:"#e6e6e6",active:"#d9d9d9",focus:"#e6e6e6",disabled:"#ffffff"},warning:{regular:"#ffc107",hover:"#d39e00",active:"#ba8b00",focus:"#d39e00",disabled:"#ffe699",main:"#ffc107"},error:{regular:"#d74942",hover:"#be3028",active:"#a92a24",focus:"#be3028",disabled:"#edaeab",main:"#d74942"},success:{regular:"#8bc34a",hover:"#71a436",active:"#639030",focus:"#71a436",disabled:"#cee6b2",main:"#8bc34a"},info:{regular:"#2196d3",hover:"#1a75a7",active:"#176691",focus:"#1a75a7",disabled:"#a7d7f1",main:"#2196d3"},text:{regular:"#333333",hover:"#1a1a1a",active:"#0d0d0d",focus:"#1a1a1a",disabled:"#cccccc",main:"#333333"}},avatarColors:{avatar_1:"#EF9A9A",avatar_2:"#F48FB1",avatar_3:"#CE93D8",avatar_4:"#B39DDB",avatar_5:"#9FA8DA",avatar_6:"#90CAF9",avatar_7:"#81D4FA",avatar_8:"#80DEEA",avatar_9:"#80CBC4",avatar_10:"#A5D6A7",avatar_11:"#C5E1A5",avatar_12:"#E6EE9C",avatar_13:"#FFE082",avatar_14:"#FFCC80",avatar_15:"#FFAB91",avatar_16:"#BCAAA4",avatar_17:"#E57373",avatar_18:"#F06292",avatar_19:"#BA68C8",avatar_20:"#9575CD",avatar_21:"#7986CB",avatar_22:"#64B5F6",avatar_23:"#4FC3F7",avatar_24:"#4DD0E1",avatar_25:"#4DB6AC",avatar_26:"#81C784",avatar_27:"#AED581",avatar_28:"#DCE775",avatar_29:"#FFD54F",avatar_30:"#FFB74D",avatar_31:"#FF8A65",avatar_32:"#A1887F",avatar_33:"#0097A7",avatar_34:"#EF5350",avatar_35:"#EC407A",avatar_36:"#AB47BC",avatar_37:"#7E57C2",avatar_38:"#5C6BC0",avatar_39:"#42A5F5",avatar_40:"#29B6F6",avatar_41:"#26C6DA",avatar_42:"#26A69A",avatar_43:"#66BB6A",avatar_44:"#9CCC65",avatar_45:"#D4E157",avatar_46:"#FFCA28",avatar_47:"#FFA726",avatar_48:"#FF7043",avatar_49:"#8D6E63",avatar_50:"#0288D1"}}),ne=(0,oe.A)({components:{MuiSvgIcon:{styleOverrides:{root:{color:re.palette.text.regular,"&:hover":{background:re.palette.gray3.hover},fontSize:"1.25rem",fontWeight:400}}},MuiAccordionSummary:{styleOverrides:{root:{padding:"0 1rem 0 0",margin:"0",minHeight:"0",justifyContent:"left"},content:{margin:"0",maxWidth:"calc(100% - 1.25rem)"}}},MuiAccordionDetails:{styleOverrides:{root:{background:re.palette.gray5.regular,padding:"0 0 0 0.5rem",margin:"0"}}},MuiButtonBase:{styleOverrides:{root:{padding:"0"}}},MuiPaper:{styleOverrides:{root:{borderBottomLeftRadius:"0",borderTopLeftRadius:"0",borderBottomRightRadius:"0",borderTopRightRadius:"0"}}},MuiAccordion:{styleOverrides:{root:{":last-of-type":{borderBottomLeftRadius:"0",borderTopLeftRadius:"0",borderBottomRightRadius:"0",borderTopRightRadius:"0"},":first-of-type":{borderBottomLeftRadius:"0",borderTopLeftRadius:"0",borderBottomRightRadius:"0",borderTopRightRadius:"0"},boxShadow:"none",background:re.palette.gray5.highlight,"&.MuiAccordion-root:before":{top:"0"}}}}}});var le=t(3961);const de=({accordions:e,folderId:a,localStorageName:t,AccordionCustomComponent:n,setSelectedFolder:l,buttonFindShares:s,initialExpanded:i})=>{const[c,m]=(0,d.useLocalStorage)(t,i??[]),u=(0,o.useRef)(null),h=(0,o.useCallback)((({accordion:e,expanded:a})=>{m(a?a=>a.includes(e.id)?a:[...a,e.id]:a=>a.filter((a=>a!==e.id)))}),[m]);return r().createElement(K.A,{ref:u,disableGutters:!0},e.map((e=>{return"find_shares"===e.id?s:r().createElement(ee.A,{disableGutters:!0,TransitionProps:{unmountOnExit:!0},expanded:c.includes(e.id),key:e.id},r().createElement(ae.A,{onClick:()=>{l&&l(e.id)},expandIcon:e?.children?.length>0&&(o=e,d="all",!o.id.split(":").includes(d))&&r().createElement(q(),{color:"primary",onClick:a=>{a.preventDefault(),h({accordion:e,expanded:!c.includes(e.id)})}}),"aria-controls":"panel1a-content",id:e.id,sx:{backgroundColor:e.id===a?le.Ud:"transparent","&:hover":{backgroundColor:e.id===a?le.Ud:re.palette.gray5.hover},borderRadius:"16px"}},r().createElement(n,{item:e})),e?.children?.length>0&&r().createElement(te.A,null,r().createElement(de,{accordions:e.children,folderId:a,key:e.id,localStorageName:t,AccordionCustomComponent:n,setSelectedFolder:l,buttonFindShares:s,initialExpanded:i})));var o,d})))};var se=t(2940),ie=t(2354);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ce.apply(this,arguments)}const me=e=>{const[a]=(0,i.useTranslation)(),t=(0,ie.kv)({tag:e?.item,t:a}),n=(0,o.useCallback)((()=>(0,d.runSearch)([{id:(0,se.nanoid)(),avatarBackground:d.ZIMBRA_STANDARD_COLORS[e?.item?.color||0].hex,avatarIcon:"Tag",background:"gray2",hasAvatar:!0,isGeneric:!1,isQueryFilter:!0,label:`tag:${e?.item?.name}`,value:`tag:"${e?.item?.name}"`}],"contacts")),[e?.item?.color,e?.item?.name]);return r().createElement(l.Dropdown,{contextMenu:!0,items:t,display:"block",width:"fit",onClick:n},r().createElement(l.Row,{mainAlignment:"flex-start",height:"fit",padding:{left:"large"},takeAvailableSpace:!0},r().createElement(l.Icon,{size:"large",icon:"Tag",customColor:d.ZIMBRA_STANDARD_COLORS[e?.item?.color??0].hex}),r().createElement(l.Padding,{right:"large"}),r().createElement(l.Tooltip,{label:e?.item?.name,placement:"right",maxWidth:"100%"},r().createElement(l.AccordionItem,ce({},e,{height:"2.5rem"})))))},ue=e=>{const a=(0,l.useModal)(),[t]=(0,i.useTranslation)(),o={...e,color:"$props.color"};return r().createElement(l.Dropdown,{contextMenu:!0,display:"block",width:"fit",items:[(0,ie.VZ)({t,createModal:a})]},r().createElement(l.Row,{mainAlignment:"flex-start",padding:{horizontal:"small"},takeAvailableSpace:!0},r().createElement(l.Icon,{size:"large",icon:"TagsMoreOutline"}),r().createElement(l.AccordionItem,o)))},he={7:"PersonOutline",13:"EmailOutline",3:"Trash2Outline"},be=({folder:e})=>{const[a]=(0,i.useTranslation)(),t=(0,o.useMemo)((()=>Object.keys(he).includes(e.id)?he[Number(e.id)]:"shares"===e.id||(0,h.PJ)(e)?"Share":"Folder"),[e]),n=(0,o.useMemo)((()=>e.color?d.ZIMBRA_STANDARD_COLORS[e.color].hex:d.ZIMBRA_STANDARD_COLORS[0].hex),[e]),c=(0,o.useMemo)((()=>(0,j.k0)(a,e.id,e.name)),[e.id,e.name,a]);return r().createElement(r().Fragment,null,r().createElement(d.AppLink,{to:`/folder/${e.id}`,style:{width:"100%",textDecoration:"none"}},r().createElement(l.Row,{mainAlignment:"flex-start",height:"fit"},r().createElement(l.Tooltip,{placement:"right",label:c},r().createElement(l.Padding,{all:"extrasmall"},r().createElement(l.IconButton,{customSize:{iconSize:"large",paddingSize:"small"},icon:t,iconColor:n,onClick:s.noop}))))))},pe=({expanded:e=!1})=>{const{folderId:a}=(0,c.useParams)(),t=(()=>{const e=(0,d.useTags)(),[a]=(0,i.useTranslation)();return(0,o.useMemo)((()=>({id:"Tags",label:a("label.tags","Tags"),active:!1,open:!1,onClick:e=>{e.stopPropagation()},CustomComponent:ue,items:(0,s.reduce)(e,((e,a)=>{const t={id:a.id,item:a,active:!1,color:a.color||0,divider:!1,label:a.name,name:a.name,open:!1,CustomComponent:me};return e.push(t),e}),[])})),[a,e])})(),{path:m}=(0,c.useRouteMatch)(),u=(0,y.sW)(),h=(0,o.useMemo)((()=>(0,W.sO)(u)),[u]),b=(0,o.useMemo)((()=>(h?.[0]?.children.find((e=>"find_shares"===e.id))||h[0]?.children?.push({id:"find_shares",disableHover:!0}),(0,s.map)(h,(e=>({...e,background:"gray4"}))))),[h]);return r().createElement(r().Fragment,null,r().createElement(n.A,{theme:ne},e?r().createElement(c.Switch,null,r().createElement(c.Route,{path:`${m}/folder/:folderId/:type?/:itemId?`},r().createElement(de,{accordions:b,folderId:a,localStorageName:f.l7.EXPANDED_ADDRESSBOOKS,AccordionCustomComponent:Q,buttonFindShares:r().createElement(r().Fragment,null),initialExpanded:[d.FOLDERS.USER_ROOT]}),r().createElement(l.Divider,null),r().createElement(l.Accordion,{background:"transparent",items:[t]}))):h[0].children.map((e=>r().createElement(be,{key:e.id,folder:e})))))}},3961:(e,a,t)=>{t.d(a,{Ud:()=>r,b3:()=>o});const o="#FFFFFF",r="#c2e7ff"}}]);
//# sourceMappingURL=legacySecondaryBarView.5ae0c6fb.chunk.js.map