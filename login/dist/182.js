"use strict";(self.webpackChunkcarbonio_login_ui=self.webpackChunkcarbonio_login_ui||[]).push([[182],{1182:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_e});var r=n(4467),a=n(467),o=n(5544),i=n(8168),l=n(4756),s=n.n(l),c=n(6540),u=n(5520),d=n(159),m=n(8492),f=n(1803),g=n(5830),p=n(4742),h=n(4073),v=n(4418),b=new URLSearchParams(window.location.search);function w(e){var t=e.authError,n=e.submitCredentials,r=e.configuration,a=e.disableInputs,i=e.onClickForgetPassword,l=e.loading,s=void 0!==l&&l,d=(0,m.B)(),f=(0,o.A)(d,1)[0],g=(0,c.useState)(b.get("username")||""),w=(0,o.A)(g,2),y=w[0],E=w[1],k=(0,c.useState)(""),x=(0,o.A)(k,2),A=x[0],_=x[1],C=(0,p.C)(),S=C.carbonioDomainName,I=C.carbonioFeatureResetPasswordEnabled,P=(0,c.useCallback)((function(e){if(e.preventDefault(),y&&A){var t=y;b.has("virtualacctdomain")?t="".concat(t.replace("@","."),"@").concat(b.get("virtualacctdomain")):b.has("customerDomain")&&!y.includes("@")&&(t="".concat(t.trim(),"@").concat(b.get("customerDomain"))),!y.includes("@")&&S&&(t="".concat(y,"@").concat(S)),n(t,A)}}),[y,A,S,n]),L=(0,c.useCallback)((function(){window.location.assign("/zx/auth/startSamlWorkflow?redirectUrl=".concat(r.destinationUrl))}),[r]),D=(0,c.useMemo)((function(){return r.authMethods.includes("saml")?c.createElement(u.$n,{type:"outlined","data-testid":"loginSaml",label:f("login_saml","Login SAML"),color:"primary",disabled:a,onClick:L}):c.createElement("div",{style:{minHeight:"0px"}})}),[r,a,L,f]),j=(0,c.useCallback)((function(e){e.preventDefault(),i()}),[i]),T=((0,c.useMemo)((function(){return null!=y&&y.includes("@")||!S?null:c.createElement(u.m_,{placement:"top",label:"@".concat(S),size:"small"},c.createElement(u.EY,{color:"secondary",size:"small",weight:"light",style:{marginTop:"1.25rem",maxWidth:"8.125rem"}},"@",S))}),[y,S]),c.useState(!1)),U=(0,o.A)(T,2);return U[0],U[1],c.createElement("form",{onSubmit:function(e){return e.preventDefault()},style:{width:"100%",height:"100%"},"data-testid":"credentials-form"},c.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"start",flexDirection:"column",alignItems:"start"}},c.createElement(h.A,{variant:"h5",style:{textAlign:"start"}},"Login"),c.createElement(h.A,{variant:"body1",style:{textAlign:"start",marginTop:"4px"}},"Please provide the login credentials to continue.")),c.createElement(u.fI,{padding:{top:"large"}},c.createElement(v.A,{label:f("username","Username"),defaultValue:y,disabled:a,onChange:function(e){return E(e.target.value)},autoComplete:"username",error:!!t,helperText:t||c.createElement("br",null),fullWidth:!0,variant:"outlined",size:"large",type:"text"})),c.createElement(u.fI,null,c.createElement(v.A,{label:f("password","Password"),defaultValue:A,disabled:a,onChange:function(e){return _(e.target.value)},autoComplete:"password",error:!!t,helperText:t||c.createElement("br",null),fullWidth:!0,variant:"outlined",size:"large",type:"password"})),c.createElement(h.A,{variant:"body2",style:{color:"#FF6600"}},t||c.createElement("br",null)),c.createElement("div",{style:{display:"flex",flexDirection:"row",rowGap:"20px",alignItems:"center"}},c.createElement("div",{style:{flex:1,marginRight:"20px"}},c.createElement(u.$n,{loading:s,"data-testid":"login",onClick:P,disabled:a,label:f("login","Login"),width:"fill"})),c.createElement("div",{style:{flex:1,justifyContent:"flex-end"}},D,!1!==I&&c.createElement(u.fI,{mainAlignment:"flex-start",crossAlignment:"flex-start"},c.createElement(u.EY,{onClick:j,color:"primary",style:{textDecorationLine:"underline",cursor:"pointer"}},f("forget_password","Forgot Password?"))))))}function y(e){var t=e.open,n=e.onClose,r=(0,m.B)(),a=(0,o.A)(r,1)[0];return c.createElement(u.aF,{title:"Offline",open:t,onClose:n},c.createElement(u.fz,{"data-testid":"offlineMsg"},a("offline","You are currently offline, please check your internet connection")))}var E=g.default.svg.withConfig({displayName:"spinner__StyledSpinner",componentId:"sc-7h2tc3-0"})(["animation:rotate 2s linear infinite;margin:-25px 0 0 -25px;width:50px;height:50px;& .path{stroke:#0000ff;animation:dash 1.5s ease-in-out infinite;}@keyframes rotate{100%{transform:rotate(360deg);}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0;}50%{stroke-dasharray:90,150;stroke-dashoffset:-35;}100%{stroke-dasharray:90,150;stroke-dashoffset:-124;}}"]);function k(){return c.createElement(E,{viewBox:"0 0 50 50"},c.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"}))}var x=n(7155);function A(){var e=d.Fr?"".concat(d.zn," ").concat(d._0):"".concat(d.C0," ").concat(d.n5);return"".concat(e,"/").concat(d.wH," ").concat(d.B4)}function _(){var e=localStorage.getItem("device-uuid");if(null!==e)return e;var t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}));return localStorage.setItem("device-uuid",t),t}function C(e,t){if("PasswordCredential"in window){var n=new PasswordCredential({id:e,password:t,name:t});return navigator.credentials.store(n)}return Promise.resolve()}function S(e){if("string"!=typeof e)return e;var t;try{t=new URL(e)}catch(e){return}var n=new URLSearchParams(window.location.search);return["loginOp","loginNewPassword","totpcode","loginConfirmNewPassword","loginErrorCode","username","email","password","zrememberme","ztrusteddevice","zlastserver","client","login_csrf","ignoreLoginURL","soo","destinationUrl"].forEach((function(e){return n.has(e)&&n.delete(e)})),n.forEach((function(e,n){t.searchParams.set(n,e)})),t.toString()}function I(e){var t=e.regular,n=e.hover,r=e.active,a=e.disabled,o=e.focus,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{regular:t,hover:(null!=n?n:i)?(0,x.a)(.1,t):(0,x.e$)(.1,t),focus:(null!=o?o:i)?(0,x.a)(.1,t):(0,x.e$)(.1,t),active:(null!=r?r:i)?(0,x.a)(.15,t):(0,x.e$)(.15,t),disabled:(null!=a?a:i)?(0,x.iv)(.8,t):(0,x.Vl)(.3,(0,x.e$)(.3,t))}}var P=function(e,t,n){var r=new Date;n&&Number.isInteger(n)&&r.setTime(r.getTime()+24*n*60*60*1e3);var a=n&&Number.isInteger(n)?"expires=".concat(r.toUTCString()):void 0;document.cookie="".concat(e,"=").concat(t,"; ").concat(a||"","; path=/")};function L(e){var t=e.configuration,n=e.disableInputs,r=(0,m.B)(),i=(0,o.A)(r,1)[0],l=(0,c.useState)(!1),d=(0,o.A)(l,2),f=d[0],g=d[1],p=(0,c.useState)("credentials"),h=(0,o.A)(p,2),v=h[0],b=(h[1],(0,c.useState)()),E=(0,o.A)(b,2),x=E[0],S=E[1],I=(0,c.useState)(!1),P=(0,o.A)(I,2),L=P[0],D=P[1],j=(0,c.useState)(!1),T=(0,o.A)(j,2),U=T[0],O=T[1],R=(0,c.useCallback)((function(e,n){return g(!0),function(e,t,n){return fetch("/zx/auth/v1/login",{method:"POST",headers:{"X-Device-Model":A(),"X-Device-Id":_(),"X-Service":"webUI","Content-Type":"application/json"},body:JSON.stringify({auth_method:"password",user:t,password:n})})}(0,e,n).then(function(){var r=(0,a.A)(s().mark((function r(a){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=a.status,r.next=200===r.t0?3:401===r.t0?7:403===r.t0?10:502===r.t0?13:16;break;case 3:return r.next=5,C(e,n);case 5:return window.location.assign(t.destinationUrl),r.abrupt("break",18);case 7:return S(i("credentials_not_valid","Credentials are not valid, please check data and try again")),g(!1),r.abrupt("break",18);case 10:return S(i("auth_not_valid","The authentication policy needs more steps: please contact your administrator for more information")),g(!1),r.abrupt("break",18);case 13:return S(i("server_unreachable","Error 502: Service Unreachable - Retry later.")),g(!1),r.abrupt("break",18);case 16:D(!0),g(!1);case 18:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){return g(!1)}))}),[t.destinationUrl,i]),B=(0,c.useCallback)((function(){return O(!1)}),[O]),F=(0,c.useCallback)((function(){return O(!0)}),[O]),W=(0,c.useCallback)((function(){return D(!1)}),[D]);return c.createElement(c.Fragment,null,"credentials"===v&&c.createElement(w,{configuration:t,disableInputs:n,authError:x,submitCredentials:R,loading:f}),"waiting"===v&&c.createElement(u.fI,{orientation:"vertical",crossAlignment:"center",padding:{vertical:"extralarge"}},c.createElement(k,null)),c.createElement(u.qb,{open:L,label:i("cant_login","Can not do the login now"),actionLabel:i("details","Details"),onActionClick:F,onClose:W,autoHideTimeout:1e4,type:"error"}),c.createElement(y,{open:U,onClose:B}))}var D=n(2543),j=n(7958);const T=function(e){var t=e.isLoading,n=e.setIsLoading,r=e.username,i=e.configuration,l=(0,m.B)(),d=(0,o.A)(l,1)[0],f=(0,c.useState)(""),g=(0,o.A)(f,2),p=g[0],b=g[1],w=(0,c.useState)(""),y=(0,o.A)(w,2),E=y[0],k=y[1],x=(0,c.useState)(""),A=(0,o.A)(x,2),_=A[0],S=A[1],I=(0,c.useState)(!1),L=(0,o.A)(I,2),D=L[0],T=L[1],U=(0,c.useState)(!1),O=(0,o.A)(U,2),R=O[0],B=O[1],F=(0,c.useState)(""),W=(0,o.A)(F,2),z=W[0],M=W[1],V=(0,c.useCallback)((function(e){return b(e.target.value)}),[b]),N=(0,c.useCallback)((function(e){return k(e.target.value)}),[k]),Y=(0,c.useCallback)((function(e){return S(e.target.value)}),[S]);(0,c.useEffect)((function(){B(""),M("")}),[E,d]),(0,c.useEffect)((function(){M(E&&_!==E?d("changePassword_error_confirmPassword","Confirm password not valid"):"")}),[_,E,d]);var H=(0,c.useCallback)((function(e){e.preventDefault(),n(!0),E&&_===E&&!R&&function(e,t,n){return fetch("/service/soap/ChangePasswordRequest",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"omit",body:JSON.stringify({Body:{ChangePasswordRequest:{_jsns:"urn:zimbraAccount",csrfTokenSecured:"1",persistAuthTokenCookie:"1",account:{by:"name",_content:e},oldPassword:{_content:t},password:{_content:n},prefs:[{pref:{name:"zimbraPrefMailPollingInterval"}}]}}})})}(r,p,E).then(function(){var e=(0,a.A)(s().mark((function e(t){var a,o,l,c,u,m,f,g,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:c=e.sent,e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,t;case 10:c=e.sent;case 11:200===t.status&&(m=null===(u=c)||void 0===u||null===(u=u.Body)||void 0===u||null===(u=u.ChangePasswordResponse)||void 0===u?void 0:u.authToken,(f=m&&m.length>0?m[0]._content:void 0)&&P(j.vt,f)),e.t1=t.status,e.next=200===e.t1?15:401===e.t1||422===e.t1?19:502===e.t1?58:62;break;case 15:return e.next=17,C(r,E);case 17:return window.location.assign(i.destinationUrl),e.abrupt("break",65);case 19:if((null===(a=c)||void 0===a||null===(a=a.Body)||void 0===a||null===(a=a.Fault)||void 0===a||null===(a=a.Detail)||void 0===a||null===(a=a.Error)||void 0===a?void 0:a.Code)!==j.Sk){e.next=56;break}if(T(!1),g=c.Body.Fault.Detail.Error.a,!(p=g?g.find((function(e){return e.n===j.F})):void 0)){e.next=26;break}return B(d("changePassword_error_block_common_words",{defaultValue:"Invalid password: password is known to be too common: {{str}}",replace:{str:p._content}})),e.abrupt("break",65);case 26:if(!(p=g?g.find((function(e){return e.n===j.nX})):void 0)){e.next=30;break}return B(d("changePassword_error_block_personal_data",{defaultValue:"Invalid password: password contains username or other personal data: {{str}}",replace:{str:p._content}})),e.abrupt("break",65);case 30:if(!(p=g?g.find((function(e){return e.n===j.Wm})):void 0)){e.next=34;break}return B(d("changePassword_error_maxLength",{defaultValue:"Maximum length is {{num}} characters",replace:{num:p._content}})),e.abrupt("break",65);case 34:if(!(p=g?g.find((function(e){return e.n===j.Ic})):void 0)){e.next=38;break}return B(d("changePassword_error_minLength",{defaultValue:"Minimum length is {{num}} characters",replace:{num:p._content}})),e.abrupt("break",65);case 38:if(!(p=g?g.find((function(e){return e.n===j.rZ})):void 0)){e.next=42;break}return B(d("changePassword_error_minLowerCaseChars",{defaultValue:"Expecting at least {{num}} lowercase characters",replace:{num:p._content}})),e.abrupt("break",65);case 42:if(!(p=g?g.find((function(e){return e.n===j.TQ})):void 0)){e.next=46;break}return B(d("changePassword_error_minNumericChars",{defaultValue:"Expecting at least {{num}} numeric characters",replace:{num:p._content}})),e.abrupt("break",65);case 46:if(!(p=g?g.find((function(e){return e.n===j.En})):void 0)){e.next=50;break}return B(d("changePassword_error_minPunctuationChars",{defaultValue:"Expecting at least {{num}} punctuation characters",replace:{num:p._content}})),e.abrupt("break",65);case 50:(p=g?g.find((function(e){return e.n===j.k1})):void 0)&&B(d("changePassword_error_minUppercaseChars",{defaultValue:"Expecting at least {{num}} uppercase characters",replace:{num:p._content}})),(p=g?g.find((function(e){return e.n===j.cu})):void 0)&&B(d("changePassword_error_minDigitsOrPuncs",{defaultValue:"Expecting at least {{num}} numeric or punctuation characters",replace:{num:p._content}})),e.next=57;break;case 56:(null===(o=c)||void 0===o||null===(o=o.Body)||void 0===o||null===(o=o.Fault)||void 0===o||null===(o=o.Detail)||void 0===o||null===(o=o.Error)||void 0===o?void 0:o.Code)===j.XC?(T(!1),B(d("changePassword_error_passwordLocked",{defaultValue:"Password is locked and can't be changed"}))):(null===(l=c)||void 0===l||null===(l=l.Body)||void 0===l||null===(l=l.Fault)||void 0===l||null===(l=l.Detail)||void 0===l||null===(l=l.Error)||void 0===l?void 0:l.Code)===j.jz?(T(!1),B(d("changePassword_error_passwordRecentlyUsed",{defaultValue:"Password recently used"}))):(T(!0),B(""));case 57:return e.abrupt("break",65);case 58:return T(!1),B(d("server_unreachable","Error 502: Service Unreachable - Retry later.")),n(!1),e.abrupt("break",65);case 62:T(!1),B(d("something_went_wrong","Something went wrong. Please contact your administrator.")),n(!1);case 65:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n(!1),e.message.startsWith("authentication failed")&&(T(!0),B(""))})),n(!1)}),[d,n,E,_,R,r,p,i.destinationUrl]);return c.createElement("form",{onSubmit:H,style:{width:"100%",height:"100%"}},c.createElement("input",{type:"submit",style:{display:"none"}}),c.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"start",flexDirection:"column",alignItems:"start"}},c.createElement(h.A,{variant:"h5",style:{textAlign:"start"}},d("changePassword_title","Create a new password")),c.createElement(h.A,{variant:"body1",style:{textAlign:"start",marginTop:"4px"}},"Remember the new password for further login.")),c.createElement(u.fI,{padding:{top:"large",width:"100%"}},c.createElement(v.A,{defaultValue:r,disabled:!0,label:d("username","Username"),"data-testid":"username",fullWidth:!0})),c.createElement(u.fI,{padding:{top:"large",width:"100%"}},c.createElement(v.A,{fullWidth:!0,defaultValue:p,error:D,onChange:V,label:d("changePassword_oldPassword","Old password"),"data-testid":"oldPassword"})),D&&c.createElement(u.fI,{padding:{top:"small"},mainAlignment:"flex-start"},c.createElement(h.A,{variant:"body2",style:{color:"#FF6600"}},d("wrong_password","Wrong password, please check data and try again"))),c.createElement(u.fI,{padding:{top:"large",width:"100%"}},c.createElement(v.A,{fullWidth:!0,defaultValue:E,error:R,onChange:N,label:d("changePassword_newPassword","New password"),"data-testid":"newPassword"})),R&&c.createElement(u.fI,{padding:{top:"small"},mainAlignment:"flex-start"},c.createElement(h.A,{variant:"body2",style:{color:"#FF6600"}},R)),c.createElement(u.fI,{padding:{top:"large",width:"100%"}},c.createElement(v.A,{fullWidth:!0,defaultValue:_,error:z,onChange:Y,label:d("changePassword_confirmNewPassword","Confirm new password"),"data-testid":"confirmNewPassword"})),z&&c.createElement(u.fI,{padding:{top:"extrasmall"},mainAlignment:"flex-start"},c.createElement(h.A,{variant:"body2",style:{color:"#FF6600"}},z)),c.createElement(u.fI,{orientation:"vertical",crossAlignment:"flex-start",padding:{vertical:"large"}},c.createElement(u.$n,{onClick:H,label:d("changePassword_confirm_label","Change password and login"),width:"fill",loading:t,disabled:!E||_!==E||R,"data-testid":"submitChangePasswordBtn"})))};function U(e,t,n,a){return fetch("/zx/auth/v2/login",{method:"POST",headers:{"X-Device-Model":A(),"X-Device-Id":_(),"X-Service":"WebUI","Content-Type":"application/json"},body:JSON.stringify((0,r.A)({auth_method:e,user:t},e===j.oV?j.oV:j.Ge,n))})}function O(e,t,n){return fetch("/zx/auth/v2/otp/validate",{method:"POST",headers:{"X-Device-Model":A(),"X-Device-Id":_(),"X-Service":"WebUI","Content-Type":"application/json",version:"2"},body:JSON.stringify({id:e,code:t,unsecure_device:!n})})}var R=new URLSearchParams(window.location.search),B="retrieve-recovery-email",F="send-recovery-token",W="validate-recovery-token",z="submit-otp-code",M="proceed-to-login-screen";const V=function(e){var t=e.configuration,n=e.disableInputs,r=(0,m.B)(),i=(0,o.A)(r,1)[0],l=(0,c.useState)(R.get("username")||""),d=(0,o.A)(l,2),g=d[0],p=d[1],b=(0,c.useState)(B),w=(0,o.A)(b,2),y=w[0],E=w[1],k=(0,c.useState)(""),x=(0,o.A)(k,2),A=x[0],_=x[1],C=(0,c.useState)(""),S=(0,o.A)(C,2),I=S[0],L=S[1],T=(0,c.useState)(""),V=(0,o.A)(T,2),N=V[0],Y=V[1],H=(0,c.useState)(""),q=(0,o.A)(H,2),$=q[0],X=q[1],J=(0,c.useState)(""),G=(0,o.A)(J,2),K=G[0],Z=G[1],Q=(0,c.useState)(),ee=(0,o.A)(Q,2),te=ee[0],ne=ee[1],re=(0,c.useState)(""),ae=(0,o.A)(re,2),oe=ae[0],ie=ae[1],le=(0,c.useContext)(u.kH),se=(0,c.useState)([]),ce=(0,o.A)(se,2),ue=ce[0],de=ce[1],me=(0,c.useState)(""),fe=(0,o.A)(me,2),ge=fe[0],pe=fe[1],he=(0,c.useState)(""),ve=(0,o.A)(he,2),be=ve[0],we=ve[1],ye=(0,c.useState)(!1),Ee=(0,o.A)(ye,2),ke=Ee[0],xe=Ee[1],Ae=(0,c.useCallback)((function(){return xe((function(e){return!e}))}),[xe]),_e=(0,c.useCallback)((function(e){we(e.target.value)}),[we]),Ce=(0,c.useCallback)((function(e){switch(e){case j.wt:Y(i("password_Reset_feature_disabled","Password reset feature is disabled."));break;case j.je:Y(i("account_recovery_not_found_or_not_verified","Account Recovery is either not found or not verified. Please contact your administrator."));break;default:Y(i("something_went_wrong","Something went wrong. Please contact your administrator."))}}),[i]),Se=(0,c.useCallback)((function(){(function(e){return fetch("/service/soap/RecoverAccountRequest",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"omit",body:JSON.stringify({Body:{RecoverAccountRequest:{_jsns:"urn:zimbraMail",op:"getRecoveryAccount",email:e,channel:"email"}}})})})(g).then(function(){var e=(0,a.A)(s().mark((function e(t){var n,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:a=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a=t;case 9:e.t1=t.status,e.next=200===e.t1?12:401===e.t1||500===e.t1?16:502===e.t1?18:20;break;case 12:return o=null===(n=a)||void 0===n||null===(n=n.Body)||void 0===n||null===(n=n.RecoverAccountResponse)||void 0===n?void 0:n.recoveryAccount,L(o),E(F),e.abrupt("break",22);case 16:return Ce(null===(r=a)||void 0===r||null===(r=r.Body)||void 0===r||null===(r=r.Fault)||void 0===r||null===(r=r.Detail)||void 0===r||null===(r=r.Error)||void 0===r?void 0:r.Code),e.abrupt("break",22);case 18:return Y(i("server_unreachable","Error 502: Service Unreachable - Retry later.")),e.abrupt("break",22);case 20:return Y(i("something_went_wrong","Something went wrong. Please contact your administrator.")),e.abrupt("break",22);case 22:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Y(i("something_went_wrong","Something went wrong. Please contact your administrator."))}))}),[Ce,i,g]),Ie=(0,c.useCallback)((function(){(function(e){return fetch("/service/soap/RecoverAccountRequest",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"omit",body:JSON.stringify({Body:{RecoverAccountRequest:{_jsns:"urn:zimbraMail",op:"sendRecoveryCode",email:e,channel:"email"}}})})})(g).then(function(){var e=(0,a.A)(s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r=t;case 9:e.t1=t.status,e.next=200===e.t1?12:502===e.t1?17:19;break;case 12:return a=null===(n=r)||void 0===n||null===(n=n.Body)||void 0===n||null===(n=n.RecoverAccountResponse)||void 0===n?void 0:n.recoveryAttemptsLeft,ne(a),le({key:"success",type:"success",label:i("recovery_code_send_success","The Recovery code has been send successfully"),autoHideTimeout:3e3,hideButton:!0,replace:!0}),E(W),e.abrupt("break",21);case 17:return X(i("server_unreachable","Error 502: Service Unreachable - Retry later.")),e.abrupt("break",21);case 19:return X(i("something_went_wrong","Something went wrong. Please contact your administrator.")),e.abrupt("break",21);case 21:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X(i("something_went_wrong","Something went wrong. Please contact your administrator."))}))}),[le,i,g]),Pe=(0,c.useCallback)((function(){(function(e,t){return fetch("/service/soap/AuthRequest",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"omit",body:JSON.stringify({Body:{AuthRequest:{_jsns:"urn:zimbraAccount",csrfTokenSecured:"1",account:{by:"name",_content:e},recoveryCode:{_content:t}}}})})})(g,A).then(function(){var e=(0,a.A)(s().mark((function e(t){var n,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r=t;case 9:e.t1=t.status,e.next=200===e.t1?12:401===e.t1||500===e.t1?17:502===e.t1?19:21;break;case 12:return a=null===(n=r)||void 0===n||null===(n=n.Body)||void 0===n||null===(n=n.AuthResponse)||void 0===n?void 0:n.authToken,(o=a&&a.length>0?a[0]._content:void 0)&&P(j.vt,o),E(M),e.abrupt("break",23);case 17:return Z(i("authentication_error","Authentication Error - Retry later.")),e.abrupt("break",23);case 19:return Z(i("server_unreachable","Error 502: Service Unreachable - Retry later.")),e.abrupt("break",23);case 21:return Z(i("something_went_wrong","Something went wrong. Please contact your administrator.")),e.abrupt("break",23);case 23:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Z(i("something_went_wrong","Something went wrong. Please contact your administrator."))}))}),[i,A,g]),Le=(0,c.useCallback)((function(){U(j.oV,g,A).then(function(){var e=(0,a.A)(s().mark((function e(t){var n,r,a,o,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r=t;case 9:e.t1=t.status,e.next=200===e.t1?12:401===e.t1||500===e.t1?14:502===e.t1?16:18;break;case 12:return!0===(null===(n=r)||void 0===n?void 0:n["2FA"])?(de((0,D.map)(null!==(a=null===(o=r)||void 0===o?void 0:o.otp)&&void 0!==a?a:[],(function(e){return{label:e.label,value:e.id}}))),pe(null===(l=r)||void 0===l||null===(l=l.otp)||void 0===l?void 0:l[0].id),E(z)):E(M),e.abrupt("break",20);case 14:return Z(i("authentication_error","Authentication Error - Retry later.")),e.abrupt("break",20);case 16:return Z(i("server_unreachable","Error 502: Service Unreachable - Retry later.")),e.abrupt("break",20);case 18:return Z(i("something_went_wrong","Something went wrong. Please contact your administrator.")),e.abrupt("break",20);case 20:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Z(i("something_went_wrong","Something went wrong. Please contact your administrator."))}))}),[i,A,g]),De=(0,c.useCallback)((function(){(null==t?void 0:t.systemType)===j.o3?Le():Pe()}),[t,Le,Pe]),je=(0,c.useCallback)((function(e){O(ge,be,ke).then((function(e){switch(e.status){case 200:E(M);break;case 400:case 401:case 500:ie(i("authentication_error","Authentication Error - Retry later."));break;case 502:ie(i("server_unreachable","Error 502: Service Unreachable - Retry later."));break;default:ie(i("something_went_wrong","Something went wrong. Please contact your administrator."))}})).catch((function(e){ie(i("something_went_wrong","Something went wrong. Please contact your administrator."))}))}),[ge,be,ke,i]),Te=(0,c.useCallback)((function(){window.location.assign("/")}),[]);return c.createElement(c.Fragment,null,y===B&&c.createElement(c.Fragment,null,c.createElement(u.fI,{crossAlignment:"flex-start",mainAlignment:"flex-start"},c.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:"32px",height:"100%"}},c.createElement(h.A,{variant:"h5",style:{textAlign:"start",marginBottom:"4px"}},"Forgot Password ?"),c.createElement(h.A,{variant:"body1",style:{textJustify:"inter-word"}},i("enter_your_username_to_retrieve_recovery_email","Please enter your username so we may retrieve the recovery email.")))),c.createElement(u.fI,{width:"100%"},c.createElement("div",{style:{width:"100%",display:"flex",marginBottom:"32px"}},c.createElement(v.A,{defaultValue:g,"data-testid":"username",onChange:function(e){p(e.target.value),Y("")},autocomplete:"username",hasError:N,label:i("username","Username"),fullWidth:!0}))),N&&c.createElement(h.A,{variant:"body1",style:{color:"#FF6600"}},N),c.createElement(u.fI,{orientation:"vertical",crossAlignment:"flex-start",padding:{bottom:"medium"},width:"100%"},c.createElement(u.$n,{"data-testid":"submit",onClick:Se,label:i("submit","Submit"),width:"fill",disabled:!g})),c.createElement(u.fI,{crossAlignment:"flex-start",mainAlignment:"flex-start"},c.createElement(h.A,{variant:"body2",style:{color:"#000000"}},i("not_have_recovery_email_setup_note","Don’t have a recovery email setup? Please contact your system administrator for support.")))),y!==M&&c.createElement("div",{style:{display:"flex",width:"100%",marginTop:"16px"}},c.createElement(u.$n,{"data-testid":"return_to_login",type:"ghost",onClick:Te,label:i("return_to_login","Return To Login"),width:"fill"})),y===F&&c.createElement(c.Fragment,null,c.createElement(u.fI,{crossAlignment:"flex-start",mainAlignment:"flex-start",width:"100%"},c.createElement(u.EY,{overflow:"break-word"},c.createElement(f.x,{i18nKey:"still_have_access_to_recovery_email",defaults:"Do you still have access to <strong>{{ recovery_email }}</strong>?",components:{bold:c.createElement("strong",null)},values:{recovery_email:I}}))),c.createElement(u.fI,{crossAlignment:"flex-start",mainAlignment:"flex-start",width:"100%"},c.createElement(u.EY,{overflow:"break-word"},i("send_a_recovery_code_notes","Click on the button below to send a recovery code to that address, use it validate the next request."))),$&&c.createElement(u.fI,{mainAlignment:"flex-start",width:"100%"},c.createElement(u.EY,{color:"error",size:"small",overflow:"break-word"},$)),c.createElement(u.fI,{orientation:"vertical",crossAlignment:"flex-start",padding:{bottom:"medium"},width:"100%"},c.createElement(u.$n,{"data-testid":"submit",onClick:Ie,label:i("send_recovery_code","Send Recovery Code"),width:"fill"}))),y===W&&c.createElement(c.Fragment,null,c.createElement(u.fI,{crossAlignment:"flex-start",mainAlignment:"flex-start",width:"100%"},c.createElement(u.EY,{overflow:"break-word"},c.createElement(f.x,{i18nKey:"validation_code_was_sent_to_recovery_email",defaults:"The validation code was sent to <strong>{{ recovery_email }}</strong> and will be valid for 10 minutes. You have {{ recoveryAttemptsLeft }} more attempts. Enter the code in the form below.",components:{bold:c.createElement("strong",null)},values:{recovery_email:I,recoveryAttemptsLeft:te}}))),c.createElement(u.fI,{padding:{bottom:"large"},width:"100%"},c.createElement(u.pd,{defaultValue:A,"data-testid":"username",onChange:function(e){return _(e.target.value)},autocomplete:"code",label:i("code","Code"),backgroundColor:"gray5"})),K&&c.createElement(u.fI,{mainAlignment:"flex-start",width:"100%"},c.createElement(u.EY,{color:"error",size:"small",overflow:"break-word"},K)),c.createElement(u.fI,{width:"100%",mainAlignment:"space-between",crossAlignment:"center",padding:{bottom:"large",top:"small"}},c.createElement(u.mc,{crossAlignment:"flex-start",mainAlignment:"flex-start",width:"48%"},c.createElement(u.$n,{"data-testid":"resendCode",onClick:Ie,label:i("resend_Code","Resend Code"),type:"outlined",size:"medium",width:"fill",disabled:0===te})),c.createElement(u.mc,{crossAlignment:"flex-start",mainAlignment:"flex-start",width:"48%"},c.createElement(u.$n,{"data-testid":"validateCode",onClick:De,label:i("validate_code","Validate Code"),width:"fill",size:"medium",disabled:!A}))),c.createElement(u.fI,{width:"100%"},c.createElement(u.EY,{size:"small",overflow:"break-word"},i("resend_code_notes",'Don’t see the code in your inbox? Wait a couple of minutes or check your spam folder. If you still don’t see it please click on "Resend Code".')))),y===z&&c.createElement(c.Fragment,null,c.createElement(u.fI,{crossAlignment:"center",mainAlignment:"center",width:"100%"},c.createElement(u.EY,{size:"medium",overflow:"break-word"},c.createElement(f.x,{i18nKey:"glad_to_have_you_back_username",defaults:"Glad to have you back, <strong>{{ username }}</strong>!",components:{bold:c.createElement("strong",null)},values:{username:g}}))),c.createElement(u.fI,{crossAlignment:"center",mainAlignment:"center",width:"100%"},c.createElement(u.EY,{size:"medium",overflow:"break-word"},i("we_just_need_one_more_check_before_getting_back_in","We just need one more check before getting back in."))),c.createElement(u.fI,{crossAlignment:"flex-start",mainAlignment:"flex-start",width:"100%"},c.createElement(u.l6,{items:ue,background:"gray5",label:i("choose_otp","Choose the OTP Method"),onChange:pe,defaultSelection:ue[0]})),c.createElement(u.fI,{crossAlignment:"flex-start",mainAlignment:"flex-start",width:"100%"},c.createElement(u.pd,{defaultValue:be,hasError:oe,disabled:n,onChange:_e,label:i("code","Code"),backgroundColor:"gray5"})),oe&&c.createElement(u.fI,{mainAlignment:"flex-start",width:"100%"},c.createElement(u.EY,{color:"error",size:"small",overflow:"break-word"},oe)),c.createElement(u.fI,{crossAlignment:"center",mainAlignment:"flex-start",width:"100%"},c.createElement(u.fI,{width:"65%",mainAlignment:"flex-start"},c.createElement(u.Sc,{value:ke,label:i("rember_this_device","Remember this device"),onClick:Ae})),c.createElement(u.fI,{width:"35%",mainAlignment:"flex-end"},c.createElement(u.$n,{onClick:je,disabled:!be,label:i("verify","Verify"),width:"fill",size:"medium"})))),y===M&&c.createElement(c.Fragment,null,c.createElement(u.fI,{crossAlignment:"flex-start",mainAlignment:"flex-start"},c.createElement(u.EY,{size:"medium",overflow:"break-word"},c.createElement(f.x,{i18nKey:"glad_to_have_you_back_username",defaults:"Glad to have you back, <strong>{{ username }}</strong>!",components:{bold:c.createElement("strong",null)},values:{username:g}}))),c.createElement(u.fI,{crossAlignment:"flex-start",mainAlignment:"flex-start"},c.createElement(u.EY,{size:"medium",overflow:"break-word"},i("proceed_with_the_login_and_change_your_password","You can proceed with the login, but remember to also change your password"))),c.createElement(u.fI,{orientation:"vertical",crossAlignment:"flex-start",padding:{bottom:"large",top:"small"},width:"100%"},c.createElement(u.$n,{"data-testid":"submit",onClick:Te,label:i("continue_with_your_session","Continue With Your Session"),type:"outlined",width:"fill"}))))};var N={credentials:"credentials",waiting:"waiting",twoFactor:"two-factor",changePassword:"change-password",forgetPassword:"forget-password"};function Y(e){var t=e.configuration,n=e.disableInputs,r=(0,m.B)(),i=(0,o.A)(r,1)[0],l=(0,c.useState)(!1),d=(0,o.A)(l,2),f=d[0],g=d[1],p=(0,c.useState)(!1),h=(0,o.A)(p,2),v=h[0],b=h[1],E=(0,c.useState)(N.credentials),x=(0,o.A)(E,2),A=x[0],_=x[1],S=(0,c.useState)(!1),I=(0,o.A)(S,2),P=I[0],L=I[1],j=(0,c.useState)(!1),R=(0,o.A)(j,2),B=R[0],F=R[1],W=(0,c.useState)([]),z=(0,o.A)(W,2),M=z[0],Y=z[1],H=(0,c.useState)(""),q=(0,o.A)(H,2),$=q[0],X=q[1],J=(0,c.useState)(""),G=(0,o.A)(J,2),K=G[0],Z=G[1],Q=(0,c.useCallback)((function(e){Z(e.target.value)}),[Z]),ee=(0,c.useState)(!1),te=(0,o.A)(ee,2),ne=te[0],re=te[1],ae=(0,c.useCallback)((function(){return re((function(e){return!e}))}),[re]),oe=(0,c.useState)(""),ie=(0,o.A)(oe,2),le=ie[0],se=ie[1],ce=(0,c.useState)(!1),ue=(0,o.A)(ce,2),de=ue[0],me=ue[1],fe=(0,c.useState)(!1),ge=(0,o.A)(fe,2),pe=ge[0],he=ge[1],ve=(0,c.useState)(!1),be=(0,o.A)(ve,2),we=be[0],ye=be[1],Ee=(0,c.useCallback)((function(e,n){return g(!0),U("password",e,n).then((function(r){switch(r.status){case 200:se(e),r.redirected?_(N.changePassword):r.json().then(function(){var r=(0,a.A)(s().mark((function r(a){var o,i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C(e,n);case 2:!0===(null==a?void 0:a["2FA"])?(Y((0,D.map)(null!==(o=null==a?void 0:a.otp)&&void 0!==o?o:[],(function(e){return{label:e.label,value:e.id}}))),X(null==a||null===(i=a.otp)||void 0===i?void 0:i[0].id),_(N.twoFactor),g(!1)):window.location.assign(t.destinationUrl);case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());break;case 401:L(i("credentials_not_valid","Credentials are not valid, please check data and try again")),g(!1);break;case 403:L(i("auth_not_valid","The authentication policy needs more steps: please contact your administrator for more information")),g(!1);break;case 502:L(i("server_unreachable","Error 502: Service Unreachable - Retry later.")),g(!1);break;default:he(!0),g(!1)}})).catch((function(){return g(!1)}))}),[t.destinationUrl,i]),ke=(0,c.useCallback)((function(e){e.preventDefault(),b(!0),O($,K,ne).then((function(e){200===e.status?e.redirected?_(N.changePassword):window.location.assign(t.destinationUrl):(b(!1),F(!0))})).catch((function(){return b(!1)}))}),[$,K,ne,t.destinationUrl]),xe=(0,c.useCallback)((function(){return ye(!1)}),[ye]),Ae=(0,c.useCallback)((function(){return ye(!0)}),[ye]),_e=(0,c.useCallback)((function(){return he(!1)}),[he]),Ce=(0,c.useCallback)((function(){_(N.forgetPassword)}),[]);return c.createElement(c.Fragment,null,A===N.credentials&&c.createElement(w,{configuration:t,disableInputs:n,authError:P,submitCredentials:Ee,loading:f,onClickForgetPassword:Ce}),A===N.waiting&&c.createElement(u.fI,{orientation:"vertical",crossAlignment:"center",padding:{vertical:"extralarge"}},c.createElement(k,null)),A===N.twoFactor&&c.createElement("form",{onSubmit:ke,style:{width:"100%"}},c.createElement("input",{type:"submit",style:{display:"none"}}),c.createElement(u.fI,{padding:{bottom:"large"}},c.createElement(u.EY,{size:"large",color:"text",weight:"bold"},i("two_step_authentication","Two-Step-Authentication"))),c.createElement(u.fI,{padding:{top:"large"}},c.createElement(u.l6,{items:M,background:"gray5",label:i("choose_otp","Choose the OTP Method"),onChange:X,defaultSelection:M[0]})),c.createElement(u.fI,{padding:{top:"large"}},c.createElement(u.pd,{defaultValue:K,hasError:B,disabled:n,onChange:Q,label:i("type_otp","Type here One-Time-Password"),backgroundColor:"gray5"})),c.createElement(u.fI,{padding:{top:"extrasmall"},mainAlignment:"flex-start"},c.createElement(u.EY,{color:"error",size:"small",overflow:"break-word"},B&&i("wrong_password","Wrong password, please check data and try again"),!B&&c.createElement("br",null))),c.createElement(u.fI,{orientation:"vertical",crossAlignment:"flex-start",padding:{vertical:"small"}},c.createElement(u.$n,{onClick:ke,disabled:n,label:i("login","Login"),width:"fill",loading:v})),c.createElement(u.fI,{mainAlignment:"flex-start"},c.createElement(u.Sc,{value:ne,label:i("trust_device_and_ip","Trust this device and IP address"),onClick:ae}))),A===N.changePassword&&c.createElement(T,{isLoading:de,setIsLoading:me,configuration:t,username:le}),A===N.forgetPassword&&c.createElement(V,{configuration:t,disableInputs:n}),c.createElement(u.qb,{open:pe,label:i("cant_login","Can not do the login now"),actionLabel:i("details","Details"),onActionClick:Ae,onClose:_e,autoHideTimeout:1e4,type:"error"}),c.createElement(y,{open:we,onClose:xe}))}var H=n(444);function q(){var e=(0,m.B)(),t=(0,o.A)(e,1)[0],n=(0,c.useState)(!0),r=(0,o.A)(n,2),a=r[0],i=r[1],l=(0,c.useCallback)((function(){return i(!1)}),[]);return c.createElement(u.qb,{open:a,label:t("server_not_responding","The server is not responding. Please contact your server administrator"),onClose:l,autoHideTimeout:1e4,type:"error","data-testid":"server-not-responding"})}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t=e.destinationUrl,n=e.domain,r=(0,c.useState)(null),a=(0,o.A)(r,2),i=a[0],l=a[1],s=(0,c.useState)(!1),u=(0,o.A)(s,2),d=u[0],m=u[1],f=(0,c.useState)(!0),g=(0,o.A)(f,2),p=g[0],h=g[1];return(0,c.useEffect)((function(){var e=!0;return function(e){var t=new URLSearchParams;return e&&t.append("domain",e),fetch("/zx/auth/supported?".concat(t),{method:"GET"}).then((function(e){if(200===e.status)return e.json();throw Error("Notwork Error")}))}(n).then((function(n){e&&(l((function(e){return X(X(X({},e),n),{},{destinationUrl:t})})),h(!1))})).catch((function(){e&&m(!0)})),function(){e=!1}}),[t,n]),(0,c.useEffect)((function(){var e=new URLSearchParams(window.location.search);i&&e.has("loginOp")&&"logout"===e.get("loginOp")&&function(e){return fetch("/zx/auth/v".concat(e.maxApiVersion,"/logout"),{method:"GET"}).then((function(e){if(200!==e.status)throw Error("Notwork Error")}))}(i).catch((function(){return console.log("Logout failed")}))}),[i]),d?c.createElement(q,null):null!==i&&i.destinationUrl?i.maxApiVersion>=2&&i.minApiVersion<=2?c.createElement(Y,{configuration:i,disableInputs:p}):i.maxApiVersion>=1&&i.minApiVersion<=1?c.createElement(L,{configuration:i,disableInputs:p}):c.createElement(H.A,null):c.createElement("div",null)}n.p,n.p,n.p;const G=n.p+"assets/c469e23959fd19cc40fbb5e56c083c86.png";n.p;const K=function(){var e=(0,c.useState)(!1),t=(0,o.A)(e,2),n=t[0],r=t[1];return(0,c.useEffect)((function(){var e=window.matchMedia("(pointer:coarse)"),t=function(){r(e.matches)};return t(),e.addEventListener("change",t),function(){e.removeEventListener("change",t)}}),[]),n};var Z={credentials:"credentials",waiting:"waiting",twoFactor:"two-factor",changePassword:"change-password"},Q=function(e,t){return fetch("/service/soap/AuthRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Body:{AuthRequest:{_jsns:"urn:zimbraAccount",csrfTokenSecured:"1",persistAuthTokenCookie:"1",generateDeviceId:"1",account:{by:"name",_content:e},password:{_content:t},prefs:[{pref:{name:"zimbraPrefMailPollingInterval"}}]}}})})};function ee(e){var t=e.destinationUrl,n=(0,m.B)().t,r=(0,c.useState)(),i=(0,o.A)(r,2),l=i[0],u=i[1],d=(0,c.useState)(!1),f=(0,o.A)(d,2),g=f[0],p=f[1],h=(0,c.useState)(Z.credentials),v=(0,o.A)(h,2),b=v[0],y=v[1],E=(0,c.useState)(!1),k=(0,o.A)(E,2),x=k[0],A=k[1],_=(0,c.useState)(!1),C=(0,o.A)(_,2),S=(C[0],C[1]),I=(0,c.useState)(""),P=(0,o.A)(I,2),L=P[0],D=P[1],j=(0,c.useCallback)((function(e,r){return p(!0),S(!0),Q(e,r).then(function(){var r=(0,a.A)(s().mark((function r(a){var o,i,l,c;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.json();case 3:i=r.sent,r.next=11;break;case 6:return r.prev=6,r.t0=r.catch(0),r.next=10,a;case 10:i=r.sent;case 11:if(S(!1),D(e),null===(o=i)||void 0===o||null===(o=o.Body)||void 0===o||!o.Fault){r.next=19;break}if(null===(l=i.Body.Fault)||void 0===l||null===(l=l.Detail)||void 0===l||null===(l=l.Error)||void 0===l||!l.Code||"account.CHANGE_PASSWORD"!==(null===(c=i.Body.Fault)||void 0===c||null===(c=c.Detail)||void 0===c||null===(c=c.Error)||void 0===c?void 0:c.Code)){r.next=18;break}y(Z.changePassword),r.next=19;break;case 18:throw new Error(i.Body.Fault.Reason.Text);case 19:r.t1=a.status,r.next=200===r.t1?22:401===r.t1||500===r.t1?24:403===r.t1?27:502===r.t1?30:33;break;case 22:return window.location.assign(t||window.location.origin),r.abrupt("break",34);case 24:return u(n("credentials_not_valid","Credentials are not valid, please check data and try again")),p(!1),r.abrupt("break",34);case 27:return u(n("auth_not_valid","The authentication policy needs more steps: please contact your administrator for more information")),p(!1),r.abrupt("break",34);case 30:return u(n("server_unreachable","Error 502: Service Unreachable - Retry later.")),p(!1),r.abrupt("break",34);case 33:p(!1);case 34:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){p(!1),S(!1),e.message.startsWith("authentication failed")?u(n("credentials_not_valid","Credentials are not valid, please check data and try again")):u(e.message)}))}),[t,n]),U=(0,c.useCallback)((function(){y(Z.forgetPassword)}),[]);return c.createElement(c.Fragment,null,b===Z.credentials&&c.createElement(w,{configuration:{destinationUrl:t,authMethods:["zimbra"]},disableInputs:!1,authError:l,submitCredentials:j,loading:g,onClickForgetPassword:U}),b===Z.changePassword&&c.createElement(T,{isLoading:x,setIsLoading:A,configuration:{destinationUrl:window.location.origin,authMethods:["zimbra"]},username:L}),b===Z.forgetPassword&&c.createElement(V,{configuration:{destinationUrl:window.location.origin,authMethods:["zimbra"]},disableInputs:!1}))}n(4038);var te=n(5184),ne=n(3380),re=n(1162);const ae=n.p+"assets/64c7c5f2ad4dabcb646544e843e8641c.png";n.p,n(5923);const oe=n.p+"assets/d629a52ea481f710971d3acea493517b.png";var ie=n(356),le=n(8239);n.p,n.p,n(4475);var se=n(5072),ce=n.n(se),ue=n(9925);ce()(ue.A,{insert:"head",singleton:!1}),ue.A.locals;const de=n.p+"assets/481cf02679747d178b1891e506df4a3c.png",me=function(e){var t=e.displaytext,n=(0,c.useState)(""),r=(0,o.A)(n,2),a=r[0],i=r[1],l=(0,c.useState)(0),s=(0,o.A)(l,2),u=s[0],d=s[1],m=(0,c.useState)(50),f=(0,o.A)(m,2),g=f[0],p=(f[1],t);return(0,c.useEffect)((function(){var e=setInterval((function(){u<p.length&&(i(p.substring(0,u+1)),d(u+1))}),g);return function(){return clearInterval(e)}}),[u,g]),c.createElement("div",null,c.createElement(h.A,{variant:"h5",sx:{fontWeight:"bold",color:"white"}},a))};var fe=n(6231);const ge=function(e){var t=e.children;return(0,fe.Ub)({minWidth:1025})?t:null},pe=function(e){var t=e.children;return(0,fe.Ub)({maxWidth:1024})?t:null};var he="Accelerate your ",ve="Communication",be="#000000",we="#ff6600",ye=n(7594),Ee=(0,n(223).Wp)({apiKey:"AIzaSyBlwBMooyo3IrB5VVJLv8dpc0wzSM3fgnw",authDomain:"control-287d3.firebaseapp.com",projectId:"control-287d3",storageBucket:"control-287d3.appspot.com",messagingSenderId:"452963548837",appId:"1:452963548837:web:b368f9cc328ba5b40c974c",measurementId:"G-E5KFFGK03X"}),ke=(0,ye.aU)(Ee);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e){var t,n=e.version,r=e.hasBackendApi,l=function(e){return c.createElement("svg",(0,i.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:40,height:40,color:"#000000",fill:"none"},e),c.createElement("path",{d:"M20 14V10C20 6.22876 20 4.34315 18.8973 3.17157C17.7947 2 16.02 2 12.4706 2L11.5294 2C7.98001 2 6.20531 2 5.10266 3.17157C4 4.34315 4 6.22876 4 10L4 14C4 17.7712 4 19.6569 5.10266 20.8284C6.20531 22 7.98001 22 11.5294 22H12.4706C16.02 22 17.7947 22 18.8973 20.8284C20 19.6569 20 17.7712 20 14Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),c.createElement("path",{d:"M16 18H16.009",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M4 15L20 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),c.createElement("path",{d:"M8 6L10 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M8 9L10 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},g=function(e){return c.createElement("svg",(0,i.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:40,height:40,color:"#000000",fill:"none"},e),c.createElement("path",{d:"M8 13.5H16M8 8.5H12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M6.09881 19C4.7987 18.8721 3.82475 18.4816 3.17157 17.8284C2 16.6569 2 14.7712 2 11V10.5C2 6.72876 2 4.84315 3.17157 3.67157C4.34315 2.5 6.22876 2.5 10 2.5H14C17.7712 2.5 19.6569 2.5 20.8284 3.67157C22 4.84315 22 6.72876 22 10.5V11C22 14.7712 22 16.6569 20.8284 17.8284C19.6569 19 17.7712 19 14 19C13.4395 19.0125 12.9931 19.0551 12.5546 19.155C11.3562 19.4309 10.2465 20.0441 9.14987 20.5789C7.58729 21.3408 6.806 21.7218 6.31569 21.3651C5.37769 20.6665 6.29454 18.5019 6.5 17.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}))},v=function(e){return c.createElement("svg",(0,i.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:40,height:40,color:"#000000",fill:"none"},e),c.createElement("circle",{cx:"12",cy:"13",r:"4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("circle",{cx:"12",cy:"4",r:"2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("circle",{cx:"4",cy:"20",r:"2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("circle",{cx:"20",cy:"20",r:"2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M12 9V6M18.5 18.5L15 16M5.5 18.5L9 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},b=(0,m.B)(),w=(0,o.A)(b,1)[0],y=(0,c.useState)(null),E=(0,o.A)(y,2),k=E[0],x=E[1],A=(0,c.useState)(!1),_=(0,o.A)(A,2),C=_[0],P=_[1],L=new URLSearchParams(window.location.search),D=(0,c.useState)(S(L.get("destinationUrl"))),T=(0,o.A)(D,2),U=T[0],O=T[1],R=(0,c.useState)(null!==(t=L.get("domain"))&&void 0!==t?t:U),B=(0,o.A)(R,2),F=B[0],W=B[1],z=(0,c.useState)(oe),M=(0,o.A)(z,2),V=(M[0],M[1]),N=(0,c.useState)(!0),Y=(0,o.A)(N,2),H=(Y[0],Y[1]),$=(0,c.useState)({}),X=(0,o.A)($,2),Z=(X[0],X[1]),Q=(0,c.useState)("Indrve Inc"),se=(0,o.A)(Q,2),ce=se[0],ue=se[1],fe=(0,c.useContext)(re.t).setDarkReaderState,Ee=(0,p.C)().setDomainName,xe=(0,c.useState)(!0),_e=(0,o.A)(xe,2),Ce=(_e[0],_e[1],(0,c.useState)(!0)),Se=(0,o.A)(Ce,2),Ie=(Se[0],Se[1]),Pe=(0,c.useState)(!1),Le=(0,o.A)(Pe,2);Le[0],Le[1],function(){var e=(0,c.useCallback)((function(e){return e<1280?e<640?j.ND:j.vn:j.Vp}),[]),t=(0,c.useState)(j.Vp),n=(0,o.A)(t,2),r=(n[0],n[1]);(0,c.useEffect)((function(){var t=function(){r(e(window.innerWidth))};return t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[e])}(),K(),(0,c.useEffect)((function(){localStorage.getItem("doNotShowMobileAppModal")&&Ie(!1)}),[]);var De=(0,te.b)(),je=(0,c.useState)(!0),Te=(0,o.A)(je,2),Ue=(Te[0],Te[1]),Oe=d.C0===j.P4||d.C0===j._p;(0,c.useEffect)((function(){We()}),[]);var Re=(0,c.useState)(!1),Be=(0,o.A)(Re,2),Fe=(Be[0],Be[1]),We=function(){var e=(0,a.A)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,ye.H9)(ke,j.XF,j.LL),e.next=3,(0,ye.x7)(t);case 3:if(!(n=e.sent).exists()){e.next=8;break}n.get("permitted")?Fe(!0):Fe(!1),e.next=9;break;case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useLayoutEffect)((function(){var e=!0;return r?(0,ne.O)(n,F,F).then((function(t){U||O(S(t.publicUrl)),F||W(t.zimbraDomainName),Ee(t.zimbraDomainName);var r={};if(e){if(t.loginPageBackgroundImage&&(V(t.loginPageBackgroundImage),H(!1)),t.loginPageLogo?(r.image=t.loginPageLogo,r.width="100%"):(r.image=G,r.width="221px"),t.loginPageSkinLogoUrl?r.url=t.loginPageSkinLogoUrl:r.url="",t.loginPageTitle?document.title=t.loginPageTitle:document.title=w("carbonio_authentication","Indryve Suite - Authentication"),t.loginPageFavicon){var a=document.querySelector("link[rel*='icon']")||document.createElement("link");a.type="image/x-icon",a.rel="shortcut icon",a.href=t.loginPageFavicon,document.getElementsByTagName("head")[0].appendChild(a)}if(t.loginPageColorSet){var o=t.loginPageColorSet;o.primary&&Z((function(e){return Ae(Ae({},e),{},{"palette.primary":I({regular:"#".concat(o.primary)})})})),o.secondary&&Z((function(e){return Ae(Ae({},e),{},{"palette.secondary":I({regular:"#".concat(o.secondary)})})}))}if(3===n){if(p.C.setState(t),null!=t&&t.carbonioWebUiTitle&&(document.title=t.carbonioWebUiTitle),null!=t&&t.carbonioWebUiFavicon){var i=document.querySelector("link[rel*='icon']")||document.createElement("link");i.type="image/x-icon",i.rel="shortcut icon",i.href=t.carbonioWebUiFavicon,document.getElementsByTagName("head")[0].appendChild(i)}null!=t&&t.carbonioWebUiDarkMode?(null!=t&&t.carbonioWebUiDarkLoginBackground&&(V(t.carbonioWebUiDarkLoginBackground),H(!1)),null!=t&&t.carbonioWebUiDarkLoginLogo&&(r.image=t.carbonioWebUiDarkLoginLogo,r.width="100%")):(null!=t&&t.carbonioWebUiLoginBackground&&(V(t.carbonioWebUiLoginBackground),H(!1)),null!=t&&t.carbonioWebUiLoginLogo&&(r.image=t.carbonioWebUiLoginLogo,r.width="100%")),null!=t&&t.carbonioWebUiDescription&&ue("Indryve Inc."),r.url=null!=t&&t.carbonioLogoURL?t.carbonioLogoURL:j.U3}x(r)}})).catch((function(){e&&P(!0)})):(x({image:G,width:"221px",url:j.U3}),document.title=w("carbonio_authentication","Indryve Suite - Authentication"),Ue(!1)),function(){e=!1}}),[w,n,F,U,r,fe,Ee]);var ze=function(e){var t=e||{},n=t.to,r=t.children;return c.createElement("a",{href:n||"#",target:"_blank",rel:"noreferrer",style:{textDecorationLine:"underline",cursor:"pointer",color:De||"#2b73d2"}},r)};if(C)return c.createElement(q,null);if(k){var Me=function(){return c.createElement("div",{style:{width:"100%"}},c.createElement(pe,null,c.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"row",alignItems:"center"}},c.createElement("img",{src:ae,style:{maxHeight:"70px",width:"auto",maxWidth:"320px"}}))),c.createElement(ge,null,c.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},c.createElement("img",{src:ae,style:{maxWidth:"60%",height:"auto"}}))))};return c.createElement("div",{style:{height:"100vh",display:"flex",width:"100vw"}},c.createElement("div",{style:{width:"100vw",height:"100vh",display:"flex"}},c.createElement(ge,null,c.createElement("div",{style:{width:"100vw",height:"100vh"}},c.createElement("div",{style:{display:"block",position:"absolute",left:"50%",bottom:"16px",marginLeft:"32px"}},c.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",width:"100%"}},c.createElement(u.In,{color:"secondary",icon:Oe?"CheckmarkOutline":"InfoOutline",size:"medium"}),c.createElement(u.EY,{size:"small",color:"secondary",weight:"light"},c.createElement(f.x,{i18nKey:Oe?"browser_fully_supported":"browser_limited_supported",defaults:Oe?"Your browser is fully <a>supported</a>":"Having troubles? Try a fully <a>supported</a> browser",components:{a:c.createElement(ze,{to:j.pS})}})))),c.createElement("div",{style:{display:"flex",width:"100%",height:"100vh",flexDirection:"row"}},c.createElement("div",{className:"background",style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"50%",height:"100vh"}},c.createElement("div",{style:{width:"100%"}},c.createElement("div",{style:{display:"flex",padding:"32px",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},c.createElement("img",{src:de,style:{width:"auto",maxHeight:"40px"}}),c.createElement(h.A,{variant:"subtitle1",style:{color:"white",cursor:"pointer"}},c.createElement("a",{style:{textDecoration:"none",color:"white"},href:"https://indryve.com/community"},"Support")))),c.createElement("div",{style:{width:"100%"}},c.createElement("div",{style:{padding:"32px"}},c.createElement(h.A,{variant:"h3",style:{color:"white",fontFamily:"ttnorms,sans-serif",marginBottom:"16px"}},"Revolutionise Enterprise Collaboration with Indryve"),c.createElement(me,{displaytext:"Empower your enterprise teams with Indryve: Secure, Scalable, Superior"}),c.createElement(h.A,{variant:"h6",style:{color:"white",marginTop:"32px"}},"Explore our Indryve Enterprise"),c.createElement(ie.A,{style:{marginTop:"8px",marginBottom:"16px",width:"20%",backgroundColor:"white"}}),c.createElement(le.Ay,{container:!0,spacing:4,style:{maxWidth:"100%"}},c.createElement(le.Ay,{item:!0,xs:!0,style:{height:"100%",display:"flex"}},c.createElement("div",{style:{display:"flex",alignItems:"center",cursor:"pointer",flexDirection:"row",height:"100%",justifyContent:"center",transition:"transform 0.3s ease-in-out"},onClick:function(){return window.open(j.mT,"_blank")},onMouseEnter:function(e){return e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:function(e){return e.currentTarget.style.transform="scale(1)"}},c.createElement(l,{style:{color:"white"}}),c.createElement(h.A,{variant:"h6",style:{color:"white",marginLeft:"4px"}},"Indryve"))),c.createElement(le.Ay,{item:!0,xs:!0,style:{height:"100%",display:"flex"}},c.createElement("div",{onClick:function(){return window.open(j.mT,"_blank")},onMouseEnter:function(e){return e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:function(e){return e.currentTarget.style.transform="scale(1)"},style:{display:"flex",alignItems:"center",cursor:"pointer",transition:"transform 0.3s ease-in-out",height:"100%",justifyContent:"center"}},c.createElement(g,{style:{color:"white"}}),c.createElement(h.A,{variant:"h6",style:{color:"white",marginLeft:"4px"}},"Indryve Chat"))),c.createElement(le.Ay,{item:!0,xs:!0,style:{height:"100%",display:"flex"}},c.createElement("div",{onClick:function(){return window.open(j.mT,"_blank")},onMouseEnter:function(e){return e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:function(e){return e.currentTarget.style.transform="scale(1)"},style:{display:"flex",alignItems:"center",cursor:"pointer",transition:"transform 0.3s ease-in-out",height:"100%",justifyContent:"center"}},c.createElement(v,{style:{color:"white"}}),c.createElement(h.A,{variant:"h6",style:{color:"white",marginLeft:"4px"}},"Fusion")))))),c.createElement("div",{style:{width:"100%"}},c.createElement("div",{style:{display:"flex",justifyContent:"start",paddingLeft:"32px",paddingRight:"32px",paddingBottom:"16px"}},ce?c.createElement(u.EY,{size:"small",overflow:"break-word",color:"white"},"Copyright ©"," ".concat((new Date).getFullYear()," Indryve Inc., "),w("all_rights_reserved","All rights reserved")):c.createElement(u.EY,{size:"small",overflow:"break-word","data-testid":"default-banner"},"Copyright ©"," ".concat((new Date).getFullYear()," Indryve Inc., "),w("all_rights_reserved","All rights reserved"))))),c.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"50%",height:"100vh"}},c.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"auto",maxWidth:"436px",backgroundColor:"white",maxHeight:"100%"}},c.createElement("div",{style:{width:"100%",padding:"32px"}},k.url?c.createElement("a",{target:"_blank",href:j.mT,rel:"noreferrer"},c.createElement(Me,null)):c.createElement(Me,null)),c.createElement("br",null),c.createElement("div",{style:{width:"100%",padding:"5%"}},r?c.createElement(J,{domain:F,destinationUrl:U}):c.createElement(ee,{destinationUrl:U}))))))),c.createElement(pe,null,c.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",height:"100%",flexDirection:"column"}},c.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",height:"100%",alignItems:"center"}},c.createElement("div",{style:{maxWidth:"320px"}},c.createElement("div",{style:{marginBottom:"16px"}},k.url?c.createElement("a",{target:"_blank",href:j.mT,rel:"noreferrer"},c.createElement(Me,null)):c.createElement(Me,null),c.createElement("div",{style:{marginTop:"8px",marginBottom:"8px"}},c.createElement(h.A,{variant:"h6",style:{textAlign:"center",fontFamily:"ttnorms,sans-serif",color:be}},he,c.createElement("span",{style:{color:we}},ve)))),r?c.createElement(J,{domain:F,destinationUrl:U}):c.createElement(ee,{destinationUrl:U}))),c.createElement("div",{style:{marginBottom:"16px",display:"flex",flexDirection:"column",alignItems:"flex-start",marginLeft:"16px"}},c.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",width:"100%"}},c.createElement(u.In,{color:"secondary",icon:Oe?"CheckmarkOutline":"InfoOutline",size:"medium"}),c.createElement(u.EY,{size:"small",color:"secondary",weight:"light"},c.createElement(f.x,{i18nKey:Oe?"browser_fully_supported":"browser_limited_supported",defaults:Oe?"Your browser is fully <a>supported</a>":"Having troubles? Try a fully <a>supported</a> browser",components:{a:c.createElement(ze,{to:j.pS})}}))),c.createElement("div",null,ce?c.createElement(u.EY,{size:"small",overflow:"break-word",color:"black"},"Copyright ©"," ".concat((new Date).getFullYear()," Indryve Inc., "),w("all_rights_reserved","All rights reserved")):c.createElement(u.EY,{size:"small",overflow:"break-word","data-testid":"default-banner"},"Copyright ©"," ".concat((new Date).getFullYear()," Indryve Inc., "),w("all_rights_reserved","All rights reserved"))))))))}return null}g.default.div.withConfig({displayName:"page-layout__FormContainer",componentId:"sc-3r0rr9-0"})(["max-width:100%;max-height:100vh;box-shadow:0px 0px 100px -7px rgba(0,0,0,0.3);border-radius:32px;"]),(0,g.default)(u.mc).withConfig({displayName:"page-layout__FormWrapper",componentId:"sc-3r0rr9-1"})(["width:auto;height:auto;background-color:",";padding:48px 48px 0;width:436px;max-width:100%;min-height:620px;overflow-y:auto;border-radius:32px;",""],(function(e){return e.theme.palette.gray6.regular}),(function(e){return e.screenMode!==j.Vp&&(0,g.css)(["padding:20px 20px 0;width:360px;max-height:100%;height:auto;"])}))},9925:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(4991),a=n.n(r),o=n(6314),i=n.n(o),l=n(4417),s=n.n(l),c=n(4475),u=i()(a()),d=s()(c.A);u.push([e.id,".background {\r\n\tbackground-image: url("+d+");\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-size: cover;\r\n\tbackground-position: center center;\r\n}\r\n","",{version:3,sources:["webpack://./src/sruvi/styles.css"],names:[],mappings:"AAAA;CACC,yDAAiD;CACjD,4BAA4B;CAC5B,sBAAsB;CACtB,kCAAkC;AACnC",sourcesContent:[".background {\r\n\tbackground-image: url('../../assets/cloudbg.png');\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-size: cover;\r\n\tbackground-position: center center;\r\n}\r\n"],sourceRoot:""}]);const m=u},4475:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/fcb7c640ed67cb14ed38dc78e31678f4.png"}}]);
//# sourceMappingURL=182.js.map