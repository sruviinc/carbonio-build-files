"use strict";(self.webpackChunkcarbonio_mails_ui=self.webpackChunkcarbonio_mails_ui||[]).push([[778],{4131:(e,t,n)=>{n.d(t,{T:()=>r});var a=n(4702),l=n(4710),s=n.n(l);const i=s()(a.ListItem).withConfig({displayName:"list-item__CustomListItemHelper",componentId:"sc-1ebopzs-0"})([""]),r=s()(i).attrs((({background:e="gray6",active:t,activeBackground:n="highlight",selected:l,selectedBackground:s="gray5",theme:i})=>({$baseBackgroundColor:(0,a.getColor)(t&&n||l&&s||e,i),$focusBackgroundColor:(0,a.getColor)(`${t&&n||"gray6"}.focus`,i)}))).withConfig({displayName:"list-item__CustomListItem",componentId:"sc-1ebopzs-1"})(["transition:none;&:focus,&:active{background:",";","{background:",";}}&:hover{background:",";&:focus,&:active{background:",";}}"],(({$focusBackgroundColor:e})=>e),i,(({$focusBackgroundColor:e})=>e),(({$baseBackgroundColor:e})=>e),(({$focusBackgroundColor:e})=>e))},6019:(e,t,n)=>{n.d(t,{g:()=>s});var a=n(4702),l=n(4710);const s=n.n(l)()(a.ListV2).withConfig({displayName:"list__CustomList",componentId:"sc-gl3s62-0"})(["padding-bottom:0.25rem;min-height:0;"])},9099:(e,t,n)=>{n.d(t,{l:()=>d,n:()=>r});var a=n(7196),l=n(2509),s=n(7431);const i={sortType:"date",sortDirection:"Desc",sortOrder:"dateDesc",remainingFoldersSortOrder:"",remainingSortOptions:""};function r(e,t){if(!t||!e)return i;const n=",BDLV",a=t.split(n)[0].split(","),r=(0,l.find)(a,(t=>t.substring(0,t.lastIndexOf(":"))===e)),d=n.concat(t.split(n)[1])??"",o=a.filter((t=>t.substring(0,t.lastIndexOf(":"))!==e)).join(",")??"";if(r&&!r.includes(s.A.size.value)){const e=r.substring(r.lastIndexOf(":")+1),t=e.includes("Desc")?"Desc":"Asc";return{sortType:e.split(/Asc|Desc/i)[0],sortDirection:t,sortOrder:e,remainingFoldersSortOrder:o,remainingSortOptions:d}}return i}function d({prefSortOrder:e,sortingTypeValue:t,sortingDirection:n,folderId:l}){if(!e){const e={prefs:{zimbraPrefSortOrder:`${l}:${t}${n},BDLV`}};return void(0,a.editSettings)(e)}const s=e.substring(e.indexOf(",BDLV")),i=`${l}:${t}${n}`,r=function(e,t,n){const a=new RegExp(`${n}:(.*?)(Asc|Desc)`);return a.test(e)?e.replace(a,`${t}`):`${e},${t}`}(e.split(",BDLV")[0],i,l),d={prefs:{zimbraPrefSortOrder:r+s}};(0,a.editSettings)(d)}},2831:(e,t,n)=>{n.d(t,{K:()=>f});var a=n(7559),l=n(7196),s=n(2509),i=n(8698),r=n(8032),d=n(5322),o=n(7431),c=n(9518),m=n(7634),u=n(1843),g=n(8360),p=n(8350);const f=(e,t=!1)=>{const{folderId:n}=(0,i.useParams)(),f=(0,r.j)(),{setCount:h}=(0,l.useAppContext)(),{deselectAll:E}=(0,d.C)({currentFolderId:n,setCount:h,count:0}),{isInsideExtraWindow:A}=(0,p.C)(),{createWindow:I}=(0,g.k)(),[v,b]=(0,l.useIntegratedFunction)("create_appointment"),C=(()=>{const e=(0,m.JH)(),t=(0,m.nm)();return(0,a.useCallback)((({isInsideExtraWindow:n,message:a,dispatch:l,deselectAll:s,folderId:i,isAlone:r,tags:d})=>{const o=[];return!n&&o.push((0,m.A2)({message:a,dispatch:l})),!n&&o.push(e({id:a.id,message:a})),!n&&o.push(t({ids:[a.id],dispatch:l,deselectAll:s,folderId:i,conversationId:a?.conversation,closeEditor:r})),o.push((0,m.sC)({ids:[a.id],value:a.flagged,dispatch:l})),o.push((0,u.TL)({tags:d,conversation:a,isMessage:!0})),o}),[e,t])})(),S=(()=>{const e=(0,m.nm)(),t=(0,m.LL)(),n=(0,m.$x)(),l=(0,m.s1)(),s=(0,m.xW)();return(0,a.useCallback)((({isInsideExtraWindow:a,message:i,dispatch:r,deselectAll:d,folderId:o,isAlone:c,tags:g,isAvailable:p,openAppointmentComposer:f})=>{const h=[];return!a&&h.push((0,m.Qb)({id:i.id})),!a&&h.push((0,m.zI)({id:i.id})),!a&&h.push((0,m.jw)({id:i.id})),!a&&h.push(e({ids:[i.id],dispatch:r,deselectAll:d,folderId:o,conversationId:i?.conversation,closeEditor:c})),h.push((0,m.kD)({ids:[i.id],value:i.read,dispatch:r,folderId:o,shouldReplaceHistory:!0,deselectAll:d})),!a&&h.push(t({id:[i.id],folderId:o,dispatch:r,isRestore:!1,deselectAll:d})),h.push((0,u.TL)({tags:g,conversation:i,isMessage:!0})),!a&&p&&h.push(s({item:i,openAppointmentComposer:f})),h.push((0,m.p6)({message:i})),h.push((0,m.sC)({ids:[i.id],value:i.flagged,dispatch:r})),!a&&h.push(n({id:i.id})),!a&&h.push((0,m.s2)({id:i.id})),!a&&h.push(l({ids:[i.id],value:!1,dispatch:r,folderId:o})),h.push((0,m.Su)({id:i.id})),h.push((0,m.ZY)({id:i.id})),h}),[s,t,e,n,l])})(),D=(()=>{const e=(0,m.LL)(),t=(0,m.NZ)();return(0,a.useCallback)((({isInsideExtraWindow:n,message:a,dispatch:l,deselectAll:s,folderId:i,tags:r})=>{const d=[];return!n&&d.push(e({id:[a.id],folderId:i,dispatch:l,isRestore:!0,deselectAll:s})),!n&&d.push(t({ids:[a.id],dispatch:l,deselectAll:s})),d.push((0,u.TL)({tags:r,conversation:a,isMessage:!0})),d}),[t,e])})(),w=(()=>{const e=(0,m.y4)(),t=(0,m.s1)();return(0,a.useCallback)((({isInsideExtraWindow:n,message:a,dispatch:l,tags:s,folderId:i})=>{const r=[];return!n&&r.push(e({ids:[a.id],dispatch:l})),!n&&r.push(t({ids:[a.id],value:!0,dispatch:l,folderId:i})),r.push((0,m.p6)({message:a})),r.push((0,m.Su)({id:a.id})),r.push((0,u.TL)({tags:s,conversation:a,isMessage:!0})),r}),[e,t])})(),k=(0,a.useMemo)((()=>[l.FOLDERS.INBOX,l.FOLDERS.SENT,l.FOLDERS.DRAFTS,l.FOLDERS.TRASH,l.FOLDERS.SPAM]),[]),R=(0,l.useTags)(),y=[{id:o.Nf}];return e?((0,c.wL)(e.parent).id===l.FOLDERS.DRAFTS&&y.push(...C({isInsideExtraWindow:A,message:e,dispatch:f,deselectAll:E,folderId:n,isAlone:t,tags:R})),(0,c.wL)(e.parent).id!==l.FOLDERS.INBOX&&(0,c.wL)(e.parent).id!==l.FOLDERS.SENT&&(0,s.includes)(k,(0,c.wL)(e.parent).id)||y.push(...S({isInsideExtraWindow:A,message:e,dispatch:f,deselectAll:E,folderId:n,isAlone:t,tags:R,isAvailable:b,openAppointmentComposer:v})),(0,c.wL)(e.parent).id===l.FOLDERS.TRASH&&y.push(...D({isInsideExtraWindow:A,message:e,dispatch:f,deselectAll:E,folderId:n,tags:R})),(0,c.wL)(e.parent).id===l.FOLDERS.SPAM&&y.push(...w({isInsideExtraWindow:A,message:e,dispatch:f,tags:R,folderId:n})),!A&&y.push((0,m.Au)(e.id,n,e.subject,I,y)),y):[]}},5322:(e,t,n)=>{n.d(t,{C:()=>s});var a=n(7559),l=n(2509);const s=({setCount:e,count:t,items:n=[]})=>{const s=(0,a.useRef)({}),[i,r]=(0,a.useState)(!1),d=(0,a.useMemo)((()=>t===n.length),[t,n.length]),o=(0,a.useCallback)((n=>{s.current[n]?(s.current=(0,l.omit)(s.current,[n]),e((e=>e-1)),t-1==0?r(!1):0===t&&r(!0)):(s.current={...s.current,[n]:!0},e((e=>e+1)),r(!0))}),[t,e]),c=(0,a.useCallback)((()=>{s.current={},e(0),r(!1)}),[e,r]),m=(0,a.useCallback)((()=>{(0,l.map)(n,(e=>{s.current[e.id]||o(e.id)}))}),[n,o,s]),u=(0,a.useCallback)((()=>{s.current={},e(0),setTimeout((()=>{r(!0)}))}),[e]);return{selected:s.current,toggle:o,deselectAll:c,isSelectModeOn:i,setIsSelectModeOn:r,selectAll:m,isAllSelected:d,selectAllModeOff:u}}},2563:(e,t,n)=>{n.d(t,{Dq:()=>h,Fn:()=>I,HH:()=>S,IO:()=>v,Ls:()=>C,R5:()=>b,Xz:()=>A,k0:()=>E});var a=n(7559),l=n.n(a),s=n(7196),i=n(2509),r=n(578),d=n(259),o=n(6784),c=n(2705),m=n(7431),u=n(7625),g=n(7656),p=n(8333),f=n(4876);function h({ids:e,value:t,dispatch:n}){return{id:t?m.Hd.UNFLAG.id:m.Hd.FLAG.id,icon:t?"Flag":"FlagOutline",label:t?(0,s.t)("action.unflag","Add flag"):(0,s.t)("action.flag","Remove flag"),onClick:()=>{n((0,g.Rs)({operation:(t?"!":"")+"flag",ids:e}))}}}const E=(e,t,n,a)=>({id:m.Hd.PREVIEW_ON_SEPARATED_WINDOW.id,icon:"ExternalLink",label:(0,s.t)("action.preview_on_separated_tab","Open in a new tab"),onClick:()=>{((e,t,n,a)=>{a&&a({name:`conversation-${e}`,returnComponent:!1,children:l().createElement(f.t,{conversationId:e,folderId:t}),title:n,closeOnUnmount:!1})})(e,t,n,a)}});function A({ids:e,value:t,dispatch:n,folderId:a,shouldReplaceHistory:l,deselectAll:i}){return{id:t?m.Hd.MARK_AS_UNREAD.id:m.Hd.MARK_AS_READ.id,icon:t?"EmailOutline":"EmailReadOutline",label:t?(0,s.t)("action.mark_as_unread","Mark as unread"):(0,s.t)("action.mark_as_read","Mark as read"),onClick:()=>{n((0,g.Rs)({operation:(t?"!":"")+"read",ids:e})).then((e=>{i&&i(),e.type.includes("fulfilled")&&l&&(0,s.replaceHistory)(`/folder/${a}`)}))}}}function I({conversation:e}){let t=[];return(0,i.isArray)(e)&&e.length>0?(0,i.forEach)(e,(e=>{(0,i.forEach)(e.messages,(e=>{t.push(e.id)}))})):t=(0,i.map)(e?.messages,(e=>e.id)),{id:"print-conversations",icon:"PrinterOutline",label:(0,s.t)("action.print","Print"),onClick:()=>{const n=window.open("","_blank");(0,g.je)({ids:t}).then((t=>{const a=(0,c.w)({messages:t,conversations:e,isMsg:!1});n?.top&&(n.top.document.title="Carbonio",n.document.write(a))})).catch((()=>{n&&n.document.write(d.W)}))}}}const v=()=>{const{createSnackbar:e}=(0,u.m)();return(0,a.useCallback)((({ids:t,value:n,dispatch:a,deselectAll:l})=>({id:"spam-conversations",icon:n?"AlertCircleOutline":"AlertCircle",label:n?(0,s.t)("action.mark_as_non_spam","Not spam"):(0,s.t)("action.mark_as_spam","Mark as spam"),onClick:()=>{let i=!0;((a=!1)=>{e({key:`trash-${t}`,replace:!0,type:"info",label:n?(0,s.t)("messages.snackbar.marked_as_non_spam","You’ve marked this e-mail as Not Spam"):(0,s.t)("messages.snackbar.marked_as_spam","You’ve marked this e-mail as Spam"),autoHideTimeout:3e3,hideButton:a,actionLabel:(0,s.t)("label.undo","Undo"),onActionClick:()=>{i=!1}})})(),setTimeout((()=>{i&&a((0,g.Rs)({operation:(n?"!":"")+"spam",ids:t})).then((n=>{n.type.includes("fulfilled")?l():e({key:`trash-${t}`,replace:!0,type:"error",label:(0,s.t)("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3})}))}),3e3)}})),[e])},b=()=>{const{createSnackbar:e}=(0,u.m)();return(0,a.useCallback)((({ids:t,dispatch:n,deselectAll:a,folderId:l})=>({id:m.Hd.MOVE_TO_TRASH.id,icon:"Trash2Outline",label:(0,s.t)("label.delete","Delete"),onClick:()=>{n((0,g.Rs)({operation:"trash",ids:t})).then((i=>{i.type.includes("fulfilled")?(a(),(0,s.replaceHistory)(`/folder/${l}/`),e({key:`trash-${t}`,replace:!0,type:"info",actionLabel:(0,s.t)("label.undo","Undo"),label:(0,s.t)("snackbar.email_moved_to_trash","E-mail moved to Trash"),autoHideTimeout:5e3,onActionClick:()=>{n((0,g.Rs)({operation:"move",ids:t,parent:l})).then((n=>{n.type.includes("fulfilled")?(a(),(0,s.replaceHistory)(`/folder/${l}/conversation/${t[0]}`),e({key:"edit",replace:!0,type:"success",hideButton:!0,label:(0,s.t)("messages.snackbar.email_restored","E-mail restored in destination folder"),autoHideTimeout:3e3})):e({key:"edit",replace:!0,hideButton:!0,type:"error",label:(0,s.t)("label.error_try_again","Something went wrong, please try again."),autoHideTimeout:3e3})}))}})):e({key:`trash-${t}`,replace:!0,type:"error",label:(0,s.t)("label.error_try_again","Something went wrong, please try again"),autoHideTimeout:3e3,hideButton:!0})}))}})),[e])},C=()=>{const{createModal:e}=(0,u.m)();return(0,a.useCallback)((({ids:t,folderId:n,dispatch:a,isRestore:i,deselectAll:r})=>({id:"move-conversations",icon:i?"RestoreOutline":"MoveOutline",label:i?(0,s.t)("label.restore","Restore"):(0,s.t)("label.move","Move"),onClick:()=>{const s=e({maxHeight:"90vh",size:"medium",children:l().createElement(p.t,null,l().createElement(o.A,{folderId:n,selectedIDs:t,onClose:()=>s(),isMessageView:!1,isRestore:i,deselectAll:r,dispatch:a}))},!0)}})),[e])},S=()=>{const{createModal:e}=(0,u.m)();return(0,a.useCallback)((({ids:t,deselectAll:n})=>({id:"delete-conversations",icon:"DeletePermanentlyOutline",label:(0,s.t)("label.delete_permanently","Delete permanently"),onClick:()=>{const a=e({children:l().createElement(p.t,null,l().createElement(r.A,{selectedIDs:t,isMessageView:!1,onClose:()=>a(),deselectAll:n}))},!0)}})),[e])}},8206:(e,t,n)=>{n.d(t,{o:()=>f});var a=n(7559),l=n.n(a),s=n(4702),i=n(7196),r=n(2509),d=n(2563),o=n(7634),c=n(1843),m=n(3011),u=n(9518),g=n(8032),p=n(7625);const f=({items:e,selectedIds:t,deselectAll:n,selectAll:f,isAllSelected:h,selectAllModeOff:E,setIsSelectModeOn:A,folderId:I})=>{const{createSnackbar:v}=(0,p.m)(),b="messages"in(e?.[0]||{}),C=(0,m.Qu)({folderId:I,isConversation:b,items:e}),[S]=(0,a.useState)(C);(0,a.useEffect)((()=>{I&&S!==C&&(n(),A(!1))}),[S,n,I,C,A]);const D=(0,g.j)(),w=Object.values(t??[]),k=(0,r.filter)(e,(e=>w.includes(e.id??"0"))),R=(0,i.useTags)(),y=[i.FOLDERS.DRAFTS,i.FOLDERS.SPAM,i.FOLDERS.TRASH],F=[i.FOLDERS.TRASH],O=[i.FOLDERS.TRASH],M=[i.FOLDERS.DRAFTS,i.FOLDERS.TRASH],L=[i.FOLDERS.SPAM],x=[i.FOLDERS.DRAFTS,i.FOLDERS.TRASH,i.FOLDERS.SPAM],T=[i.FOLDERS.SPAM],$=()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0")&&!(0,r.includes)(y,(0,u.wL)(C).id??"0"))),a=b?(0,d.Xz)({ids:w,value:!1,dispatch:D,folderId:I,deselectAll:n,shouldReplaceHistory:!1}):(0,o.kD)({ids:w,value:!1,dispatch:D,folderId:C});return-1!==(0,r.findIndex)(t,["read",!1])&&a},_=()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0")&&!(0,r.includes)(y,(0,u.wL)(C).id??"0"))),a=b?(0,d.Xz)({ids:w,value:!0,dispatch:D,folderId:I,deselectAll:n,shouldReplaceHistory:!1}):(0,o.kD)({ids:w,value:!0,dispatch:D,folderId:C});return t.length>0&&(0,r.every)(t,["read",!0])&&a},N=(0,d.R5)(),P=(0,o.nm)(),B=(0,d.HH)(),z=(0,o.NZ)(),H=(0,d.Ls)(),U=(0,o.LL)(),j=(0,d.IO)(),W=(0,o.s1)(),G=w.length>0,V=(G?[$(),_(),(()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0")&&!(0,r.includes)(F,(0,u.wL)(C).id??"0"))),a=b?N({ids:w,dispatch:D,folderId:I,deselectAll:n}):P({ids:w,dispatch:D,deselectAll:n});return t.length>0&&t.length===w.length&&a})(),(()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0")&&(0,r.includes)(O,(0,u.wL)(C).id??"0"))),a=b?B({ids:w,deselectAll:n}):z({ids:w,dispatch:D,deselectAll:n});return t.length>0&&t.length===w.length&&a})()]:[])?.reduce(((e,t)=>(t&&e.push(l().createElement("div",{key:t.id},l().createElement(s.Tooltip,{label:"label"in t?t.label:"",maxWidth:"100%"},l().createElement(s.IconButton,{"data-testid":`primary-multi-action-button-${t.id}`,icon:"icon"in t?t.icon:"",iconColor:"primary",onClick:e=>{e&&e.preventDefault(),t.onClick&&t.onClick(e)},size:"large"})))),e)),[]),q=(G?[$(),_(),(()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0"))),n=b?(0,d.Dq)({ids:w,value:!1,dispatch:D}):(0,o.sC)({ids:w,value:!1,dispatch:D});return!(0,r.some)(t,["flagged",!0])&&n})(),(()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0"))),n=b?(0,d.Dq)({ids:w,value:!0,dispatch:D}):(0,o.sC)({ids:w,value:!0,dispatch:D});return(0,r.every)(t,["flagged",!0])&&n})(),(()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0")&&!(0,r.includes)(M,(0,u.wL)(C).id??"0"))),a=b?H({ids:w,dispatch:D,folderId:I,isRestore:!1,deselectAll:n}):U({id:w,folderId:C,dispatch:D,isRestore:!1,deselectAll:n});return t.length>0&&t.length===w.length&&a})(),(()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0")&&!(0,r.includes)(L,(0,u.wL)(C).id??"0"))),a=(0,c.qQ)({ids:w,tags:R,conversations:k,folderId:C,deselectAll:n,isMessage:!b});return t.length>0&&t.length===w.length&&a})(),(()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0")&&!(0,r.includes)(x,(0,u.wL)(C).id??"0"))),a=b?j({ids:w,value:!1,dispatch:D,deselectAll:n}):W({ids:w,value:!1,dispatch:D,folderId:C});return t.length>0&&t.length===w.length&&a})(),(()=>{const t=(0,r.filter)(e,(e=>w.includes(e.id??"0")&&(0,r.includes)(T,(0,u.wL)(C).id??"0"))),a=b?j({ids:w,value:!0,dispatch:D,deselectAll:n}):W({ids:w,value:!0,dispatch:D,folderId:C});return t.length>0&&t.length===w.length&&a})()]:[])?.reduce(((e,t)=>(t&&e.push({id:"label"in t?t.label:t.id,icon:"icon"in t?t.icon:"",label:"label"in t?t.label:"",onClick:e=>{e&&e.preventDefault(),t.onClick&&t.onClick(e)},customComponent:t.customComponent,items:t.items}),e)),[]),X=(0,a.useCallback)((()=>{n(),A(!1)}),[n,A]),K=(0,a.useCallback)((()=>{f(),v({key:`selected-${w}`,replace:!0,type:"info",label:(0,i.t)("label.all_items_selected","All visible items have been selected"),autoHideTimeout:5e3,hideButton:!0})}),[f,v,w]),Y=V.length>0||q.length>0,Z=(0,i.t)("label.exit_selection_mode","Exit selection mode");return l().createElement(s.Container,{background:"gray5",height:"3rem",orientation:"horizontal",padding:{all:"extrasmall"},mainAlignment:"flex-start",width:"100%"},l().createElement(s.Row,{height:"100%",width:"fill",padding:{all:"extrasmall"},mainAlignment:"space-between",takeAvailableSpace:!0},l().createElement(s.Row,{mainAlignment:"flex-start",width:"fit",padding:{right:"medium"}},l().createElement(s.Tooltip,{label:Z},l().createElement(s.IconButton,{icon:"ArrowBack",iconColor:"primary",size:"large",onClick:X,"data-testid":"action-button-deselect-all"})),l().createElement(s.Button,{type:"ghost",label:h?(0,i.t)("label.deselect_all","DESELECT all"):(0,i.t)("label.select_all","SELECT all"),color:"primary",onClick:h?E:K})),Y&&l().createElement(s.Row,{mainAlignment:"flex-end",width:"fit"},V,l().createElement(s.Dropdown,{placement:"right-end","data-testid":"secondary-actions-dropdown",items:q},l().createElement(s.IconButton,{size:"large",iconColor:"primary",icon:"MoreVertical","data-testid":"secondary-actions-open-button",onClick:()=>null})))))}},8673:(e,t,n)=>{n.d(t,{_:()=>y});var a=n(4702),l=n(7196),s=n(2509),i=n(8153),r=n(7559),d=n(2563),o=n(7634),c=n(1843),m=n(3011),u=n(7431),g=n(9518),p=n(3472);const f=()=>{const e=(0,d.R5)(),t=(0,o.nm)();return(0,r.useCallback)((({isConversation:n,id:a,dispatch:l,folderId:s,deselectAll:i,foldersExcludedTrash:r})=>{const d=n?e({ids:[a],dispatch:l,folderId:s,deselectAll:i}):t({ids:[a],dispatch:l,deselectAll:i});return!r.includes((0,g.wL)(s).id??"0")&&d}),[e,t])},h=()=>{const e=(0,d.HH)(),t=(0,o.NZ)();return(0,r.useCallback)((({isConversation:n,id:a,deselectAll:l,dispatch:s,foldersIncludedDeletePermanently:i,folderId:r})=>{const d=n?e({ids:[a],deselectAll:l}):t({ids:[a],dispatch:s,deselectAll:l});return i.includes((0,g.wL)(r).id??"0")&&d}),[e,t])},E=()=>{const e=(0,d.IO)(),t=(0,o.s1)();return(0,r.useCallback)((({isConversation:n,id:a,folderId:s,dispatch:i,deselectAll:r,foldersExcludedMarkUnmarkSpam:d})=>{const o=n?e({ids:[a],value:(0,g.wL)(s).id===l.FOLDERS.SPAM,dispatch:i,deselectAll:r}):t({ids:[a],value:(0,g.wL)(s).id===l.FOLDERS.SPAM,dispatch:i,folderId:s});return!d.includes((0,g.wL)(s).id??"0")&&o}),[e,t])},A=()=>{const e=(0,d.Ls)(),t=(0,o.LL)();return(0,r.useCallback)((({isConversation:n,id:a,dispatch:s,folderId:i,deselectAll:r})=>n?e({ids:[a],dispatch:s,folderId:i,isRestore:(0,g.wL)(i).id===l.FOLDERS.TRASH,deselectAll:r}):t({id:[a],folderId:i,dispatch:s,isRestore:(0,g.wL)(i).id===l.FOLDERS.TRASH,deselectAll:r})),[e,t])},I=()=>{const e=(0,o.$x)();return(0,r.useCallback)((({isConversation:t,id:n,folderExcludedRedirect:a,folderId:l})=>{const s=!t&&e({id:n});return!a.includes((0,g.wL)(l).id??"0")&&s}),[e])},v=()=>{const e=(0,o.JH)();return(0,r.useCallback)((({isConversation:t,id:n,folderId:a,folderIncludeEditDraft:l})=>{const s=!t&&e({id:n,folderId:a});return l.includes((0,g.wL)(a).id??"0")&&s}),[e])},b=()=>{const e=(0,o.xW)();return(0,r.useCallback)((({item:t,folderId:n,folderExcludedCreateAppointment:a,isConversation:l,openAppointmentComposer:s,isAvailable:i})=>{const r=!(l||!i)&&e({item:t,openAppointmentComposer:s});return!a.includes((0,g.wL)(n).id??"0")&&r}),[e])};var C=n(2816),S=n(5299),D=n(8032),w=n(8821),k=n(903),R=n(758);function y({item:e,deselectAll:t,messageActionsForExtraWindow:n}){const r=h(),y=v(),F=E(),O=A(),M=f(),L=I(),x=b(),T=(0,S.Iy)(e),$=(0,g.eb)(e),_=(0,D.j)(),N=(0,l.useTags)(),P=(0,a.useSnackbar)(),{t:B}=(0,i.useTranslation)(),{createWindow:z}=(0,R.S)(),[H,U]=(0,l.useIntegratedFunction)("create_appointment");if(!$)return[[],[]];const j=T?(0,s.filter)(e?.messages,(e=>{const t=(0,g.wL)(e.parent).id??"";return!(0,C.vF)(t)&&!(0,g.Qx)(t)}))?.[0]??{}:e,W=(0,S.dt)(e),{id:G}=e,V=[l.FOLDERS.DRAFTS],q=[l.FOLDERS.TRASH],X=[l.FOLDERS.TRASH,l.FOLDERS.SPAM],K=[l.FOLDERS.SPAM],Y=[l.FOLDERS.DRAFTS],Z=[l.FOLDERS.DRAFTS,l.FOLDERS.TRASH],Q=[l.FOLDERS.DRAFTS,l.FOLDERS.TRASH],J=[l.FOLDERS.DRAFTS],ee=[l.FOLDERS.DRAFTS,l.FOLDERS.SPAM],te=[l.FOLDERS.DRAFTS,l.FOLDERS.SPAM],ne=[l.FOLDERS.DRAFTS,l.FOLDERS.SPAM],ae=[l.FOLDERS.DRAFTS,l.FOLDERS.TRASH],le=[l.FOLDERS.DRAFTS],se=[l.FOLDERS.DRAFTS,l.FOLDERS.TRASH],ie=[l.FOLDERS.DRAFTS],re=[l.FOLDERS.DRAFTS,l.FOLDERS.SPAM],de=function({isConversation:e,id:t,item:n,dispatch:a}){return e?(0,d.Dq)({ids:[t],value:n.flagged,dispatch:a}):(0,o.sC)({ids:[t],value:n.flagged,dispatch:a})}({isConversation:T,id:G,item:e,dispatch:_}),oe=function({isConversation:e,id:t,item:n,dispatch:a,folderId:l,deselectAll:s,foldersExcludedMarkReadUnread:i}){const r=e?(0,d.Xz)({ids:[t],value:n.read,dispatch:a,folderId:l,deselectAll:s,shouldReplaceHistory:!1}):(0,o.kD)({ids:[t],value:n.read,dispatch:a,folderId:l});return!i.includes((0,g.wL)(l).id??"0")&&r}({isConversation:T,id:G,item:e,dispatch:_,folderId:$,deselectAll:t,foldersExcludedMarkReadUnread:V}),ce=M({isConversation:T,id:G,dispatch:_,folderId:j.parent,deselectAll:t,foldersExcludedTrash:q}),me=r({isConversation:T,id:G,deselectAll:t,dispatch:_,foldersIncludedDeletePermanently:X,folderId:j.parent}),ue=O({isConversation:T,id:G,dispatch:_,folderId:j.parent,deselectAll:t}),ge=function({isConversation:e,item:t,folderExcludedPrintMessage:n,folderId:a}){const l=e?(0,d.Fn)({conversation:[t]}):(0,o.p6)({message:t});return!n.includes((0,g.wL)(a).id??"0")&&l}({isConversation:T,item:e,folderExcludedPrintMessage:Z,folderId:$}),pe=function({tags:e,item:t,isConversation:n,foldersExcludedTags:a,folderId:l}){const s=(0,c.TL)({tags:e,conversation:t,isMessage:!n});return!a.includes((0,g.wL)(l).id??"0")&&s}({tags:N,item:e,isConversation:T,foldersExcludedTags:K,folderId:$}),fe=F({isConversation:T,id:G,folderId:$,dispatch:_,deselectAll:t,foldersExcludedMarkUnmarkSpam:Y}),he=function({id:e,folderExcludedShowOriginal:t,folderId:n}){const a=(0,o.Su)({id:e});return!t.includes((0,g.wL)(n).id??"0")&&a}({isConversation:T,id:j.id,folderExcludedShowOriginal:Q,folderId:j.parent}),Ee=y({isConversation:T,id:G,folderId:$,folderIncludeEditDraft:J}),Ae=function(e,t,n,a,l,s){const i=e?t&&(0,o.Qb)({id:n}):(0,o.Qb)({id:l});return!s.includes((0,g.wL)(a).id??"0")&&i}(T,W,j.id,$,G,ee),Ie=function({isConversation:e,isSingleMessageConversation:t,firstConversationMessageId:n,folderId:a,id:l,folderExcludedReplyAll:s}){const i=e?t&&(0,o.zI)({id:n}):(0,o.zI)({id:l});return!s.includes((0,g.wL)(a).id??"0")&&i}({isConversation:T,isSingleMessageConversation:W,firstConversationMessageId:j.id,folderId:$,id:G,folderExcludedReplyAll:te}),ve=function({isConversation:e,isSingleMessageConversation:t,firstConversationMessageId:n,folderId:a,id:l,folderExcludedForward:s}){const i=e?t&&(0,o.jw)({id:n}):(0,o.jw)({id:l});return!s.includes((0,g.wL)(a).id??"0")&&i}({isConversation:T,isSingleMessageConversation:W,firstConversationMessageId:j.id,folderId:$,id:G,folderExcludedForward:ne}),be=function({isConversation:e,id:t,folderId:n,folderExcludedEditAsNew:a}){const l=!e&&(0,o.s2)({id:t});return!a.includes((0,g.wL)(n).id??"0")&&l}({isConversation:T,id:G,folderId:$,folderExcludedEditAsNew:ae}),Ce=!(0,S.Iy)(e)&&function({item:e,dispatch:t,folderIncludedSendDraft:n,folderId:a,generateEditor:l,addEditor:s,createSnackbar:i,t:r}){return!!n.includes((0,g.wL)(a).id??"0")&&(0,o.AI)({generateEditorFunction:async()=>{const n=l({action:u.F5.EDIT_AS_DRAFT,id:e.id,messagesStoreDispatch:t,message:e,compositionData:void 0});if(!n)throw new Error("No editor provided");s({id:n.id,editor:n});const{savedAttachments:a}=n;return a.filter((e=>e.requiresSmartLinkConversion)).length>0&&await(0,m.Pc)({createSnackbar:i,t:r,editorId:n.id}),p.T.getState().editors[n.id]},dispatch:t})}({item:e,dispatch:_,folderIncludedSendDraft:le,folderId:$,generateEditor:k.hZ,addEditor:w.T3,createSnackbar:P,t:B}),Se=L({isConversation:T,id:G,folderExcludedRedirect:se,folderId:$}),De=function({isConversation:e,id:t,folderId:n,subject:a,createWindow:l,messageActions:s}){return e?(0,d.k0)(t,n,a,l):(0,o.Au)(t,n,a,l,s)}({isConversation:T,id:G,folderId:$,subject:e.subject,createWindow:z,messageActions:n}),we=function({id:e,folderId:t,folderExcludedDownloadEML:n,isConversation:a}){const l=!a&&(0,o.ZY)({id:e});return!n.includes((0,g.wL)(t).id??"0")&&l}({isConversation:T,id:G,folderId:$,folderExcludedDownloadEML:ie}),ke=x({isConversation:T,item:e,folderId:$,folderExcludedCreateAppointment:re,openAppointmentComposer:H,isAvailable:U});return[[Ae,Ie,ve,ce,me,oe,de].reduce(((e,t)=>(t&&e.push(t),e)),[]),[Ae,Ie,ve,Ce,ce,me,oe,de,fe,pe,ue,ke,ge,De,Se,Ee,be,he,we].reduce(((e,t)=>(t&&e.push(t),e)),[])]}},4876:(e,t,n)=>{n.d(t,{t:()=>b});var a=n(7559),l=n.n(a),s=n(4702),i=n(7196),r=n(2509),d=n(8698),o=n(7289),c=n(8032),m=n(2831),u=n(348);const g=({convMessage:e,isExpanded:t,isAlone:n,isInsideExtraWindow:a})=>{const i=(0,c.G)((t=>(0,u.kp)(t,e.id))),r=(0,m.K)(i,n);return l().createElement(s.Padding,{bottom:"medium",width:"100%","data-testid":`ConversationMessagePreview-${i.id}`},l().createElement(o.A,{message:i,expanded:t,isAlone:n,messageActions:r,isMessageView:!1,isInsideExtraWindow:a}))};var p=n(7431),f=n(9224);const h=({conversation:e,isInsideExtraWindow:t,convSortOrder:n})=>{const i=(0,c.G)(f.N_)[e.id],d=(0,a.useCallback)((t=>"dateAsc"===n?t===e.messages.length-1:0===t),[n,e.messages.length]),o=(0,a.useMemo)((()=>"dateDesc"===n?-1:1),[n]),m=e.messages.slice().sort(((e,t)=>o*(e.date-t.date)));return l().createElement(s.Container,{style:{overflowY:"auto"},height:"fill",background:"gray5",padding:{horizontal:"large",bottom:"small",top:"large"},mainAlignment:"flex-start"},l().createElement(s.Container,{height:"fit",mainAlignment:"flex-start",background:"gray5"},e&&i===p.kh.fulfilled?l().createElement(l().Fragment,null,(0,r.map)(m,((n,a)=>n?l().createElement(g,{key:n.id,convMessage:n,isExpanded:d(a),isAlone:1===e.messages?.length,isInsideExtraWindow:t}):l().createElement(s.Shimmer.Logo,{size:"large"})))):l().createElement(l().Fragment,null)))};var E=n(2863),A=n(9518),I=n(7656),v=n(8350);const b=e=>{const{conversationId:t,folderId:n}=(e=>{const t=(0,d.useParams)();return{conversationId:e.conversationId??t.conversationId,folderId:e.folderId??t.folderId}})(e),o=(0,i.useTags)(),{isInsideExtraWindow:m}=(0,v.C)(),u=(0,c.j)(),g=(0,c.G)((e=>(0,f.rP)(e,t))),b=(0,c.G)((0,f.id)(t)),C=(0,i.useUserSettings)().prefs.zimbraPrefConversationOrder;(0,a.useEffect)((()=>{b||u((0,I.Fk)({conversationId:t}))}),[b,u,t]),(0,a.useEffect)((()=>{(g!==p.kh.fulfilled&&g!==p.kh.pending||!g)&&u((0,I.ns)({conversationId:t,fetch:"all",folderId:n,tags:o}))}),[t,g,u,n,o]);const S=(0,a.useMemo)((()=>(0,A.wL)(n).id===i.FOLDERS.TRASH?b&&b?.messages?.length>0:(0,r.filter)(b?.messages,(e=>(0,A.wL)(e.parent).id!==i.FOLDERS.TRASH)).length>0),[b,n]);return l().createElement(s.Container,{orientation:"vertical",mainAlignment:"flex-start",crossAlignment:"flex-start"},S&&l().createElement(l().Fragment,null,!m&&l().createElement(E.A,{item:b,folderId:n}),l().createElement(h,{conversation:b,isInsideExtraWindow:m,convSortOrder:C})))}},8716:(e,t,n)=>{n.d(t,{V:()=>g});var a=n(7559),l=n.n(a),s=n(7196),i=n(8698),r=n(4602),d=n(8032),o=n(2831),c=n(5322),m=n(348),u=n(8673);const g=()=>{const{folderId:e,messageId:t}=(0,i.useParams)(),n=(0,d.G)((e=>(0,m.kp)(e,t))),{setCount:a}=(0,s.useAppContext)(),{deselectAll:g}=(0,c.C)({currentFolderId:e,setCount:a,count:0}),p=(0,o.K)(n,!0),f=(0,u._)({item:n,deselectAll:g,messageActionsForExtraWindow:p});return l().createElement(r.I,{folderId:e,messageId:t,messageActions:f})}},9851:(e,t,n)=>{n.d(t,{n:()=>A});var a=n(7559),l=n.n(a),s=n(4702),i=n(2509),r=n(4710),d=n.n(r),o=n(5086),c=n(6019),m=n(643),u=n(8206),g=n(8773),p=n(21),f=n(7216);const h=d().div.withConfig({displayName:"conversation-list-component__DragImageContainer",componentId:"sc-1pieyzl-0"})(["position:absolute;top:-312.5rem;left:-312.5rem;transform:translate(-100%,-100%);width:35vw;"]),E=({conversations:e,draggedIds:t})=>{const n=(0,i.reduce)(t,((t,n,a)=>{const l=(0,i.find)(e,["id",a]);return l?[...t,l]:t}),[]);return l().createElement(l().Fragment,null,(0,i.map)(n,(e=>l().createElement(o.o,{item:e,key:e.id,draggedIds:t,activeItemId:e.id,selected:!1,selecting:!1,toggle:i.noop,selectedIds:[],deselectAll:i.noop,folderId:"",setDraggedIds:i.noop}))))},A=(0,a.memo)((function({displayerTitle:e,isSearchModule:t,isSelectModeOn:n,folderId:r,conversations:d,selected:o,deselectAll:A,selectAll:I,isAllSelected:v,selectAllModeOff:b,setIsSelectModeOn:C,conversationsLoadingCompleted:S,draggedIds:D,setDraggedIds:w,loadMore:k=i.noop,listItems:R,totalConversations:y,dragImageRef:F,listRef:O,hasMore:M}){(0,a.useEffect)((()=>{w&&w(o)}),[o,w]);const L=(0,m.a4)(r),x=(0,m.e0)(L?.id??""),T=(0,a.useMemo)((()=>(0,f.i)(L,x,t)),[x,L,t]),$=(0,a.useMemo)((()=>!t||void 0===t||t&&y>0),[t,y]),_=(0,a.useMemo)((()=>Object.keys(o)),[o]);return l().createElement(l().Fragment,null,n?l().createElement(u.o,{items:d,folderId:r,selectedIds:_,deselectAll:A,selectAll:I,isAllSelected:v,selectAllModeOff:b,setIsSelectModeOn:C}):$&&l().createElement(p.B,{folderPath:T,itemsCount:y,isSelectModeOn:n,setIsSelectModeOn:C,folderId:r,isSearchModule:t}),S?l().createElement(l().Fragment,null,l().createElement(s.Divider,{color:"gray2"}),y>0||M?l().createElement(c.g,{onListBottom:()=>{k&&k()},"data-testid":`conversation-list-${r}`,ref:O},R):l().createElement(s.Container,null,l().createElement(s.Padding,{top:"medium"},l().createElement(s.Text,{color:"gray1",overflow:"break-word",size:"small",style:{whiteSpace:"pre-line",textAlign:"center",paddingTop:"2rem"}},e))),l().createElement(h,{ref:F},l().createElement(E,{conversations:d,draggedIds:D}))):l().createElement(g.A,{count:y,delay:500}))}))},5086:(e,t,n)=>{n.d(t,{o:()=>M});var a=n(7559),l=n.n(a),s=n(4702),i=n(7196),r=n(2509),d=n(4710),o=n.n(d),c=n(4131),m=n(7431),u=n(5322),g=n(6819),p=n(2069);const f=(0,a.memo)((function({active:e,conversationStatus:t,messages:n,folderId:d,length:o,isSearchModule:f,dragImageRef:h,setDraggedIds:E=r.noop}){const{setCount:A,count:I}=(0,i.useAppContext)(),{selected:v,toggle:b,deselectAll:C,isSelectModeOn:S}=(0,u.C)({currentFolderId:d,setCount:A,count:I,items:n}),D=(0,a.useMemo)((()=>(0,r.map)(n,(t=>{const n=e===t.id||e===t.conversation,a=v[t.id];return l().createElement(c.T,{selected:!1,active:n,key:t.id,background:"transparent"},(e=>e?l().createElement(p.z,{item:t,selectedIds:[],selectedItems:{},setDraggedIds:E,dragImageRef:h,dragAndDropIsDisabled:!!f,deselectAll:C},l().createElement(g.V,{item:t,selected:a,selecting:S,visible:e,toggle:b,active:n,isConvChildren:!0,deselectAll:C,currentFolderId:d,isSearchModule:f})):l().createElement("div",{style:{height:"4rem"}})))}))),[e,C,h,d,f,S,n,v,E,b]);return t!==m.kh.fulfilled?l().createElement(s.Container,{height:64*o},l().createElement(s.Button,{loading:!0,disabled:!0,label:"",type:"ghost",onClick:r.noop})):l().createElement(s.ListV2,{style:{paddingBottom:"0.25rem"}},D)}));var h=n(1347),E=n(9518),A=n(8032),I=n(7656),v=n(9224),b=n(348),C=n(2563),S=n(8360),D=n(9475),w=n(3981),k=n(1843);const R=({item:e,tags:t,isSearchModule:n,allMessagesInTrash:i})=>{const r=(0,a.useMemo)((()=>(0,h.oP)(e.date)),[e.date]),d=(0,a.useMemo)((()=>t?.length>1?"TagsMoreOutline":"Tag"),[t]),o=(0,a.useMemo)((()=>1===t?.length?t?.[0]?.color:void 0),[t]),c=(0,k.nK)(t),m=(0,a.useMemo)((()=>e.tags&&0!==e.tags.length&&""!==e.tags?.[0]&&c),[c,e.tags]);return l().createElement(s.Row,null,i&&n&&l().createElement(s.Padding,{left:"small"},l().createElement(s.Icon,{"data-testid":"TrashIcon",icon:"Trash2Outline"})),m&&l().createElement(s.Padding,{left:"small"},l().createElement(s.Icon,{"data-testid":"TagIcon",icon:d,color:`${o}`})),e.hasAttachment&&l().createElement(s.Padding,{left:"small"},l().createElement(s.Icon,{"data-testid":"AttachmentIcon",icon:"AttachOutline"})),e.flagged&&l().createElement(s.Padding,{left:"small"},l().createElement(s.Icon,{"data-testid":"FlagIcon",color:"error",icon:"Flag"})),l().createElement(s.Padding,{left:"small","data-testid":"DateLabel"},l().createElement(s.Text,{size:"extrasmall"},r)))};var y=n(0);const F=o()(s.Container).withConfig({displayName:"conversation-list-item__CollapseElement",componentId:"sc-1k4jpu4-0"})(["display:",";"],(({open:e})=>e?"block":"none")),O=(0,a.memo)((function({item:e,selected:t,selecting:n,toggle:d,active:o,isSearchModule:c,activeItemId:u,dragImageRef:g,deselectAll:p,folderId:k,setDraggedIds:O}){const M=(0,A.j)(),[L,x]=(0,a.useState)(!1),T=(0,i.useUserAccounts)(),$=(0,A.G)(b.Lt),_="messages"in(e||{}),{createWindow:N}=(0,S.k)(),P=function({folderId:e,isConversation:t,item:n}){return e||(t?n?.messages?.[0]?.parent:n?.parent)}({folderId:k??"",isConversation:_,item:e}),B=(0,A.G)((t=>(0,v.rP)(t,e.id))),z=(0,i.useTags)(),H=(0,a.useMemo)((()=>(0,r.uniqBy)((0,r.reduce)(z,((t,n)=>((0,r.includes)(e.tags,n.id)?t.push({...n,color:i.ZIMBRA_STANDARD_COLORS[n.color||0].hex}):e.tags?.length>0&&!(0,r.includes)(e.tags,n.id)&&(0,r.forEach)((0,r.filter)(e.tags,(e=>e.includes("nil:"))),(e=>{t.push({id:e,name:e.split(":")[1],color:1})})),t)),[]),"id")),[e.tags,z]),U=(0,i.useUserSettings)()?.prefs?.zimbraPrefConversationOrder||"dateDesc",j="-1"!==(0,i.useUserSettings)()?.prefs?.zimbraPrefMarkMsgRead,W=(0,a.useMemo)((()=>(0,r.reduce)((0,r.uniqBy)(e.participants,(e=>e.address)),((e,t)=>(0,r.trimStart)(`${e}, ${(0,h.ef)(t,T)}`,", ")),"")),[e.participants,T]),G=(0,a.useCallback)((t=>{t.preventDefault(),x((t=>(t||B===m.kh.fulfilled||B===m.kh.pending||M((0,I.ns)({folderId:P,conversationId:e.id,fetch:"all"})),!t)))}),[B,M,P,e.id]),V=(0,a.useCallback)((t=>{t.isDefaultPrevented()||(!1===e?.read&&j&&(0,C.Xz)({ids:[e.id],value:!1,dispatch:M,folderId:P,deselectAll:p,shouldReplaceHistory:!1}).onClick(),(0,i.pushHistory)(`/folder/${P}/conversation/${e.id}`))}),[e?.read,e.id,j,P,M,p]),q=(0,a.useCallback)((t=>{if(t.isDefaultPrevented())return;const{id:n,isDraft:a}=e.messages[0];a?(0,i.pushHistory)(`/folder/${P}/edit/${n}?action=editAsDraft`):(0,C.k0)(e.id,P,e.subject,N).onClick()}),[N,P,e.id,e.messages,e.subject]),X=(0,a.useMemo)((()=>L?(0,i.t)("label.hide","Hide"):(0,i.t)("label.expand","Expand")),[L]),K=(0,a.useMemo)((()=>e.subject||(0,i.t)("label.no_subject_with_tags","<No Subject>")),[e.subject]),Y=(0,a.useMemo)((()=>(0,r.isEmpty)(e.fragment)?K:e.fragment),[K,e.fragment]),Z=(0,a.useMemo)((()=>"dateDesc"===U?-1:1),[U]),Q=(0,a.useMemo)((()=>(0,r.uniqBy)((0,r.reduce)(e.messages,((e,t)=>{const n=(0,r.find)($,["id",t.id]);return n?((0,E.wL)(P).id,i.FOLDERS.TRASH,[...e,n]):e}),[]).sort(((e,t)=>e.date&&t.date?Z*(e.date-t.date):1)),"id")),[e,$,P,Z]),J=(0,a.useCallback)((()=>e.messagesInConversation),[e]),ee=(0,a.useMemo)((()=>void 0===e.read||e.read?{color:"text",weight:"regular",badge:"read"}:{color:"primary",weight:"bold",badge:"unread"}),[e.read]),te=(0,a.useMemo)((()=>1===e.messagesInConversation?"unread"===ee.badge:e.messagesInConversation>0||(1===e?.messages?.length?"unread"===ee.badge:e?.messages?.length>0)),[e?.messages?.length,e.messagesInConversation,ee.badge]);return l().createElement(s.Container,{mainAlignment:"flex-start","data-testid":`ConversationListItem-${e.id}`},l().createElement(w.N,{item:e,active:o,onClick:V,onDoubleClick:q,hoverTooltipLabel:W,deselectAll:p},l().createElement("div",{style:{alignSelf:"center"},"data-testid":`conversation-list-item-avatar-${e.id}`},l().createElement(D.V,{item:e,selected:t,selecting:n,toggle:d,folderId:P}),l().createElement(s.Padding,{horizontal:"extrasmall"})),l().createElement(s.Row,{takeAvailableSpace:!0,orientation:"horizontal",wrap:"wrap",padding:{left:"small",top:"small",bottom:"small",right:"large"}},l().createElement(s.Container,{orientation:"horizontal",height:"fit",width:"fill"},l().createElement(y.X,{item:e,textValues:ee}),l().createElement(R,{item:e,tags:H})),l().createElement(s.Container,{orientation:"horizontal",height:"fit",width:"fill",crossAlignment:"center"},te&&l().createElement(s.Row,null,l().createElement(s.Padding,{right:"extrasmall"},l().createElement(s.Badge,{"data-testid":`conversation-messages-count-${e.id}`,value:J(),type:ee.badge}))),l().createElement(s.Tooltip,{label:Y,overflow:"break-word",maxWidth:"60vw"},l().createElement(s.Row,{wrap:"nowrap",takeAvailableSpace:!0,mainAlignment:"flex-start",crossAlignment:"baseline"},l().createElement(s.Text,{"data-testid":"Subject",weight:ee.weight,color:e.subject?"text":"secondary"},K))),l().createElement(s.Row,null,e.urgent&&l().createElement(s.Icon,{"data-testid":"UrgentIcon",icon:"ArrowUpward",color:"error"}),e.messagesInConversation>1&&l().createElement(s.Tooltip,{label:X},l().createElement(s.IconButton,{"data-testid":"ToggleExpand",size:"small",icon:L?"ArrowIosUpward":"ArrowIosDownward",onClick:G})))))),L&&l().createElement(F,{open:L,"data-testid":"ConversationExpander",padding:{left:"extralarge"},height:"auto"},l().createElement(f,{active:u,length:e.messagesInConversation,messages:Q,conversationStatus:B,folderId:P,dragImageRef:g,isSearchModule:c,setDraggedIds:O})))})),M=({activeItemId:e,item:t,selected:n,selecting:a,toggle:s,active:i,setDraggedIds:r,draggedIds:d,selectedItems:o={},dragImageRef:c,isSearchModule:m,selectedIds:u=[],deselectAll:g,folderId:f,visible:h})=>l().createElement(p.z,{item:t,selectedIds:u,selectedItems:o,setDraggedIds:r,dragImageRef:c,dragAndDropIsDisabled:!!m,deselectAll:g},l().createElement(O,{activeItemId:e,item:t,selected:n,selecting:a,toggle:s,active:i,setDraggedIds:r,draggedIds:d,selectedItems:o,dragImageRef:c,isSearchModule:m,isConvChildren:!0,deselectAll:g,folderId:f,visible:h}))},9617:(e,t,n)=>{n.d(t,{z:()=>A});var a=n(7559),l=n.n(a),s=n(4702),i=n(2509),r=n(4710),d=n.n(r),o=n(6819),c=n(6019),m=n(643),u=n(8206),g=n(8773),p=n(21),f=n(7216);const h=d().div.withConfig({displayName:"message-list-component__DragImageContainer",componentId:"sc-18627c9-0"})(["position:absolute;top:-312.5rem;left:-312.5rem;transform:translate(-100%,-100%);width:35vw;"]),E=({messages:e,draggedIds:t,folderId:n})=>{const a=(0,i.reduce)(t,((t,n,a)=>{const l=(0,i.find)(e,["id",a]);return l?[...t,l]:t}),[]);return l().createElement(l().Fragment,null,(0,i.map)(a,(e=>l().createElement(o.V,{item:e,key:e.id,isConvChildren:!1,toggle:i.noop,selected:!1,selecting:!1,visible:!1,deselectAll:i.noop,currentFolderId:n}))))},A=(0,a.memo)((function({displayerTitle:e,listItems:t,loadMore:n=i.noop,totalMessages:r,messagesLoadingCompleted:d,selectedIds:o,folderId:A,messages:I,draggedIds:v,setDraggedIds:b,isSearchModule:C,isSelectModeOn:S,selected:D,deselectAll:w,selectAll:k,isAllSelected:R,selectAllModeOff:y,setIsSelectModeOn:F,dragImageRef:O,hasMore:M,listRef:L}){(0,a.useEffect)((()=>{b&&b(D)}),[D,b]);const x=(0,m.a4)(A),T=(0,m.e0)(x?.id??""),$=(0,a.useMemo)((()=>!C||void 0===C||C&&r>0),[C,r]),_=(0,a.useMemo)((()=>(0,f.i)(x,T,C)),[T,x,C]),N=(0,a.useCallback)((()=>{n&&n()}),[n]);return l().createElement(l().Fragment,null,S?l().createElement(u.o,{items:I,selectedIds:o,deselectAll:w,selectAll:k,isAllSelected:R,selectAllModeOff:y,setIsSelectModeOn:F,folderId:A}):$&&l().createElement(p.B,{folderPath:_,itemsCount:r,isSelectModeOn:S,setIsSelectModeOn:F,folderId:A,isSearchModule:C}),d?l().createElement(l().Fragment,null,r>0||M?l().createElement(c.g,{onListBottom:N,"data-testid":`message-list-${A}`,ref:L},t):l().createElement(s.Container,null,l().createElement(s.Padding,{top:"medium"},l().createElement(s.Text,{color:"gray1",overflow:"break-word",size:"small",style:{whiteSpace:"pre-line",textAlign:"center",paddingTop:"2rem"}},e))),l().createElement(h,{ref:O},l().createElement(E,{messages:I,draggedIds:v??{},folderId:A}))):l().createElement(g.A,{count:r}))}))},9905:(e,t,n)=>{n.d(t,{I:()=>d});var a=n(7559),l=n.n(a),s=n(2509),i=n(6819),r=n(2069);const d=(0,a.memo)((function({message:e,selected:t,isSelected:n,active:a,toggle:d,isSelectModeOn:o,dragImageRef:c,isSearchModule:m,deselectAll:u,visible:g,setDraggedIds:p=s.noop,currentFolderId:f}){return l().createElement(r.z,{item:e,selectedIds:[],selectedItems:t,setDraggedIds:p,dragImageRef:c,dragAndDropIsDisabled:!!m,deselectAll:u},l().createElement(i.V,{item:e,selected:n,selecting:o,isConvChildren:!1,toggle:d,active:a,visible:g,isSearchModule:m,deselectAll:u,currentFolderId:f}))}))},6819:(e,t,n)=>{n.d(t,{V:()=>C});var a=n(7559),l=n.n(a),s=n(4702),i=n(7196),r=n(2509),d=n(4222),o=n.n(d),c=n(643),m=n(1347),u=n(7431),g=n(8032),p=n(2831),f=n(7634),h=n(1843),E=n(790),A=n(8360),I=n(9475),v=n(3981),b=n(0);const C=(0,a.memo)((function({item:e,selected:t,selecting:n,toggle:d,isConvChildren:C,active:S,isSearchModule:D,deselectAll:w,currentFolderId:k,clicker:R=(()=>{})}){const y=k??e.parent,F=(0,g.j)(),O="-1"!==(0,i.useUserSettings)()?.prefs?.zimbraPrefMarkMsgRead,{createWindow:M}=(0,A.k)(),L=(0,p.K)(e,!0),x=(0,a.useCallback)((t=>{t.isDefaultPrevented()||(!1===e.read&&O&&(0,f.kD)({ids:[e.id],value:!1,dispatch:F}).onClick(t),(0,i.replaceHistory)(`/folder/${y}/message/${e.id}`),R(!0))}),[e.read,e.id,O,y,F,R]),T=(0,a.useCallback)((t=>{if(!t.isDefaultPrevented()){const{id:t,isDraft:n}=e;n?(0,i.addBoard)({url:`${u.lU}/edit?action=${u.F5.EDIT_AS_DRAFT}&id=${t}`,title:""}):(0,f.Au)(t,y,e.subject,M,L).onClick()}}),[M,y,e,L]),$=(0,i.useUserAccounts)(),_=(0,i.useTags)(),N=(0,c.a4)(e.parent),[P]=(0,a.useMemo)((()=>{if(e){const t=(0,r.find)(e.participants,["type","f"]);return[(0,m.oP)(e.date),(0,m.ef)(t,$)]}return[".",".","",""]}),[e,$]),[B,z,H,U,j]=(0,a.useMemo)((()=>e?!e.isSentByMe||e.isDraft||e.isReplied||e.isForwarded?e.isDraft?[!0,"FileOutline",(0,i.t)("label.draft","Draft"),"DraftIcon","secondary"]:e.isReplied?[!0,"UndoOutline",(0,i.t)("label.replied","Replied"),"RepliedIcon","secondary"]:!1!==e.read||e.isReplied||e.isDraft||e.isSentByMe||e.isForwarded?!1===e.read||e.isReplied||e.isDraft||e.isSentByMe||e.isForwarded?e.isForwarded?[!0,"Forward",(0,i.t)("label.forwarded","Forwarded"),"ForwardedIcon","secondary"]:[!1,"","","",""]:[!0,"EmailReadOutline",(0,i.t)("label.read","Read"),"ReadIcon","secondary"]:[!0,"EmailOutline",(0,i.t)("search.unread","Unread"),"UnreadIcon","primary"]:[!0,"PaperPlaneOutline",(0,i.t)("label.sent","Sent"),"SentIcon","secondary"]:[!1,"","","",""]),[e]),W=(0,a.useMemo)((()=>(0,r.reduce)(_,((t,n)=>((0,r.includes)(e.tags,n.id)&&t.push({...n,color:i.ZIMBRA_STANDARD_COLORS[n.color??"0"].hex}),t)),[])),[e.tags,_]),G=(0,a.useMemo)((()=>C?e.fragment:` - ${e.fragment}`),[e.fragment,C]),V=(0,a.useMemo)((()=>void 0===e.read||e.read?{color:"text",weight:"regular",badge:"read"}:{color:"primary",weight:"bold",badge:"unread"}),[e.read]),q=(0,h.nK)(W),X=(0,a.useMemo)((()=>e.tags&&0!==e.tags.length&&""!==e.tags?.[0]&&q),[q,e.tags]),K=(0,a.useMemo)((()=>W.length>1?"TagsMoreOutline":"Tag"),[W]),Y=(0,a.useMemo)((()=>1===W.length?W[0].color:void 0),[W]),Z=(0,a.useMemo)((()=>e.subject||(0,i.t)("label.no_subject_with_tags","<No Subject>")),[e.subject]),Q=(0,a.useMemo)((()=>(0,r.isEmpty)(e.fragment)?Z:e.fragment),[Z,e.fragment]),J=(0,a.useMemo)((()=>(0,i.t)("message.schedule_time",{date:o()(e?.autoSendTime).format("DD/MM/YYYY"),time:o()(e?.autoSendTime).format("HH:mm"),defaultValue:"for {{date}} at {{time}}"})),[e?.autoSendTime]),ee=(0,a.useMemo)((()=>C?r.noop:d),[C,d]);return l().createElement(s.Container,{mainAlignment:"flex-start","data-testid":`MessageListItem-${e.id}`},l().createElement(v.N,{item:e,active:S,onClick:x,onDoubleClick:T,deselectAll:w},l().createElement("div",{style:{alignSelf:"center"},"data-testid":`message-list-item-avatar-${e.id}`},l().createElement(I.V,{item:e,selected:t,selecting:n,toggle:ee,folderId:y}),l().createElement(s.Padding,{horizontal:"extrasmall"})),l().createElement(s.Row,{wrap:"wrap",orientation:"horizontal",takeAvailableSpace:!0,padding:{left:"small",top:"small",bottom:"small",right:"large"}},l().createElement(s.Container,{orientation:"horizontal",height:"fit",width:"fill"},l().createElement(b.X,{item:e,textValues:V,isSearchModule:D}),l().createElement(s.Row,null,X&&l().createElement(s.Padding,{left:"small"},l().createElement(s.Icon,{"data-testid":"TagIcon",icon:K,color:Y})),e.hasAttachment&&l().createElement(s.Padding,{left:"small"},l().createElement(s.Icon,{"data-testid":"AttachmentIcon",icon:"AttachOutline"})),e.flagged&&l().createElement(s.Padding,{left:"small"},l().createElement(s.Icon,{"data-testid":"FlagIcon",color:"error",icon:"Flag"})),l().createElement(s.Padding,{left:"small"},e?.isScheduled?l().createElement(s.Row,null,l().createElement(s.Padding,{right:"extrasmall"},l().createElement(s.Icon,{"data-testid":U,icon:"SendDelayedOutline",color:"primary"})),l().createElement(s.Text,{"data-testid":"DelayedMailLabel",size:"extrasmall",color:"primary"},(0,i.t)("label.send_scheduled","Send Scheduled"))):l().createElement(s.Text,{"data-testid":"DateLabel",size:"extrasmall"},P)))),l().createElement(s.Container,{orientation:"horizontal",height:"fit",width:"fill",crossAlignment:"center"},l().createElement(s.Row,{wrap:"nowrap",takeAvailableSpace:!0,mainAlignment:"flex-start",crossAlignment:"center"},B&&l().createElement(s.Tooltip,{label:H,placement:"bottom"},l().createElement(s.Padding,{right:"extrasmall"},l().createElement(s.Icon,{"data-testid":U,icon:z,color:j}))),l().createElement(s.Tooltip,{label:Q,overflow:"break-word",maxWidth:"60vw"},l().createElement(s.Row,{wrap:"nowrap",takeAvailableSpace:!0,mainAlignment:"flex-start",crossAlignment:"baseline"},!C&&l().createElement(s.Text,{"data-testid":"Subject",weight:V.weight,color:e.subject?"text":"secondary"},Z),!(0,r.isEmpty)(e.fragment)&&l().createElement(s.Row,{takeAvailableSpace:!0,mainAlignment:"flex-start",padding:{left:"extrasmall"}},l().createElement(s.Text,{"data-testid":"Fragment",size:"small",color:"secondary",weight:V.weight},G))))),l().createElement(s.Row,null,e.urgent&&l().createElement(s.Padding,{left:"extrasmall"},l().createElement(s.Icon,{"data-testid":"UrgentIcon",icon:"ArrowUpward",color:"error"})),e?.isScheduled&&l().createElement(s.Tooltip,{label:J},l().createElement(s.Text,{"data-testid":"DelayedMailLabel",size:"extrasmall",color:"primary"},J)),(N&&N.id!==y||D)&&l().createElement(s.Padding,{left:"small"},l().createElement(s.Badge,{"data-testid":"FolderBadge",value:(0,E.k0)({folderId:y,folderName:N?.name??""}),type:V.badge})))))))}))},21:(e,t,n)=>{n.d(t,{B:()=>A});var a=n(7559),l=n.n(a),s=n(4702),i=n(7196),r=n(4710),d=n.n(r),o=n(2509),c=n(7216),m=n(7431),u=n(9099),g=n(8032),p=n(7656);const f=({folderId:e})=>{const t=(0,a.useRef)(null),{prefs:n}=(0,i.useUserSettings)(),r=(0,a.useMemo)((()=>n?.zimbraPrefSortOrder),[n?.zimbraPrefSortOrder]),{sortType:d,sortDirection:f}=(0,u.n)(e,r),h=(0,g.j)(),[E,A]=(0,a.useState)(f),I=(0,a.useMemo)((()=>E===m.FU.ASCENDING?m.C8.ASCENDING:m.C8.DESCENDING),[E]),[v,b]=(0,a.useState)(d);(0,a.useEffect)((()=>{A(f),b(d)}),[f,d]);const C=(0,a.useMemo)((()=>(0,c.I)(v,E)),[E,v]),{isMessageView:S}=(0,i.useAppContext)(),D=(0,a.useCallback)((t=>{h((0,p.$P)({folderId:e,limit:100,sortBy:t,types:S?"message":"conversation"}))}),[h,e,S]),w=(0,a.useCallback)((()=>{A((e=>e===m.FU.ASCENDING?m.FU.DESCENDING:m.FU.ASCENDING));const t=E===m.FU.ASCENDING?m.FU.DESCENDING:m.FU.ASCENDING;D(`${v}${t}`),(0,u.l)({prefSortOrder:r,sortingTypeValue:v,sortingDirection:t,folderId:e}),(0,i.replaceHistory)(`/folder/${e}`)}),[e,D,r,E,v]),k=(0,a.useCallback)((t=>{b(t),D(`${t}${E}`),(0,u.l)({prefSortOrder:r,sortingTypeValue:t,sortingDirection:E,folderId:e}),(0,i.replaceHistory)(`/folder/${e}`)}),[e,D,r,E]),R=(0,a.useCallback)((()=>{k(m.A.unread.value)}),[k]),y=(0,a.useCallback)((()=>{k(m.A.to.value)}),[k]),F=(0,a.useCallback)((()=>{k(m.A.flagged.value)}),[k]),O=(0,a.useCallback)((()=>{k(m.A.date.value)}),[k]),M=(0,a.useCallback)((()=>{k(m.A.from.value)}),[k]),L=(0,a.useCallback)((()=>{k(m.A.subject.value)}),[k]),x=(0,a.useCallback)((()=>{k(m.A.attachment.value)}),[k]),T=(0,a.useCallback)((()=>{k(m.A.important.value)}),[k]),$=[{id:"activity-1",label:E===m.FU.ASCENDING?(0,i.t)("sorting_dropdown.descendingOrder","Descending order"):(0,i.t)("sorting_dropdown.ascendingOrder","Ascending order"),onClick:w,icon:E===m.FU.DESCENDING?m.C8.ASCENDING:m.C8.DESCENDING},{id:`${m.A.unread.value}-id`,label:(0,i.t)("sorting_dropdown.unread","Unread"),selected:v===m.A.unread.value,onClick:R,icon:v===m.A.unread.value?"RadioButtonOn":"RadioButtonOff"},{id:`${m.A.important.value}-id`,label:(0,i.t)("sorting_dropdown.important","Important"),selected:v===m.A.important.value,onClick:T,icon:v===m.A.important.value?"RadioButtonOn":"RadioButtonOff"},{id:`${m.A.flagged.value}-id`,label:(0,i.t)("sorting_dropdown.flagged","Flagged"),selected:v===m.A.flagged.value,onClick:F,icon:v===m.A.flagged.value?"RadioButtonOn":"RadioButtonOff"},{id:`${m.A.attachment.value}-id`,label:(0,i.t)("sorting_dropdown.attachment","Attachment"),selected:v===m.A.attachment.value,onClick:x,icon:v===m.A.attachment.value?"RadioButtonOn":"RadioButtonOff"},...e!==i.FOLDERS.SENT?[{id:`${m.A.from.value}-id`,label:(0,i.t)("sorting_dropdown.from","From"),selected:v===m.A.from.value,onClick:M,icon:v===m.A.from.value?"RadioButtonOn":"RadioButtonOff"}]:[],...e===i.FOLDERS.SENT?[{id:`${m.A.to.value}-id`,label:(0,i.t)("sorting_dropdown.to","To"),selected:v===m.A.to.value,onClick:y,icon:v===m.A.to.value?"RadioButtonOn":"RadioButtonOff"}]:[],{id:`${m.A.date.value}-id`,label:(0,i.t)("sorting_dropdown.date","Date"),selected:v===m.A.date.value,onClick:O,icon:v===m.A.date.value?"RadioButtonOn":"RadioButtonOff"},{id:`${m.A.subject.value}-id`,label:(0,i.t)("sorting_dropdown.subject","Subject"),selected:v===m.A.subject.value,onClick:L,icon:v===m.A.subject.value?"RadioButtonOn":"RadioButtonOff"}];return l().createElement(s.Tooltip,{label:C,placement:"top"},l().createElement(s.Dropdown,{items:$,multiple:!0,itemPaddingBetween:"large",itemIconSize:"large",selectedBackgroundColor:"highlight","data-testid":"sorting-dropdown"},l().createElement(s.IconButton,{icon:I,size:"large",ref:t,onClick:o.noop})))};var h=n(9518);const E=d()(s.IconCheckbox).withConfig({displayName:"breadcrumbs__SelectIconCheckbox",componentId:"sc-nk7gqk-0"})(["svg{color:",";}"],(e=>e.theme.palette.primary.regular)),A=({itemsCount:e,isSelectModeOn:t,setIsSelectModeOn:n,folderPath:r,folderId:d,isSearchModule:o})=>{const c=(0,a.useRef)(null),m=(0,a.useRef)(null),[u,g]=(0,a.useState)("0");(0,a.useLayoutEffect)((()=>{const e=()=>{c&&c.current&&g(((c?.current?.offsetWidth??0)-(m?.current?.offsetWidth??0)-120)/16+"rem")};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[c.current?.offsetWidth]),(0,a.useEffect)((()=>{c?.current&&m?.current&&g(((c?.current?.offsetWidth??0)-(m?.current?.offsetWidth??0)-120)/16+"rem")}),[]);const p=(0,a.useMemo)((()=>(0,i.t)("label.activate_selection_mode","Activate selection mode")),[]),{folderPathFirstPart:A,folderPathLastPart:I}=(0,h.uX)(r);return l().createElement(s.Container,{background:"gray5",mainAlignment:"flex-start",crossAlignment:"flex-start",height:"3rem",ref:c},l().createElement(s.Row,{height:"100%",width:"fill",padding:{all:"extrasmall"},mainAlignment:"space-between",takeAvailableSpace:!0},l().createElement(s.Row,{mainAlignment:"flex-start",padding:{right:"medium"},takeAvailableSpace:!0},l().createElement(s.Tooltip,{label:p,maxWidth:"100%"},l().createElement(E,{borderRadius:"regular",icon:"CheckmarkSquare",defaultChecked:t,size:"regular",onChange:()=>null,onClick:()=>{n((e=>!e))}})),l().createElement(s.Row,{maxWidth:u,mainAlignment:"flex-start"},l().createElement(s.Text,{size:"medium",style:{marginLeft:"0.5rem"},"data-testid":"BreadcrumbPath",color:"gray1"},A)),l().createElement(s.Text,{size:"medium",style:{marginLeft:"0.5rem"},"data-testid":"BreadcrumbPath",ref:m},I)),l().createElement(s.Text,{size:"extrasmall","data-testid":"BreadcrumbCount"},e>100?"100+":e),l().createElement(s.Padding,{right:"large"}),!o&&l().createElement(f,{folderId:d})))}},2069:(e,t,n)=>{n.d(t,{z:()=>o});var a=n(7559),l=n.n(a),s=n(4702),i=n(7196);const r=({e,id:t,dragImageRef:n,selectedItems:a,setDraggedIds:l})=>{n&&n?.current&&e.dataTransfer.setDragImage(n.current,0,0),a&&a[t]?l&&l(a):l&&l({[t]:!0})},d=({item:e,folderId:t,isMessageView:n,selectedIds:a,selectedItems:i,setDraggedIds:d,children:o})=>n?l().createElement(s.Drag,{type:"message",data:{...e,parentFolderId:t,selectedIDs:a},style:{display:"block"},onDragStart:t=>r({e:t,id:e.id,selectedItems:i,setDraggedIds:d})},o):l().createElement(l().Fragment,null,o),o=({item:e,selectedItems:t,setDraggedIds:n,dragImageRef:a,children:o,dragAndDropIsDisabled:c,deselectAll:m})=>{const u=e.parent,{isMessageView:g}=(0,i.useAppContext)(),p=Object.keys(t??[]);return c?l().createElement(l().Fragment,null,o):l().createElement(s.Drag,{type:"message",data:{...e,parentFolderId:u,selectedIDs:p,deselectAll:m},style:{display:"block"},onDragStart:l=>r({e:l,id:e.id,selectedItems:t,setDraggedIds:n,dragImageRef:a}),"data-testid":"MailItemContainer"},l().createElement(d,{item:e,folderId:u,isMessageView:g,selectedIds:p,selectedItems:t,setDraggedIds:n},o))}},6609:(e,t,n)=>{n.d(t,{F:()=>s});var a=n(4702),l=n(4710);const s=n.n(l)()(a.Container).withConfig({displayName:"hover-bar-container__HoverBarContainer",componentId:"sc-10sbfgn-0"})(["top:0;right:0;display:none;position:absolute;background:linear-gradient( to right,transparent,"," );width:calc(100% - 4rem);height:45%;& > *{margin-top:",";margin-right:",";}"],(({background:e,theme:t})=>t.palette[e].hover),(({theme:e})=>e.sizes.padding.small),(({theme:e})=>e.sizes.padding.small))},4713:(e,t,n)=>{n.d(t,{s:()=>r});var a=n(4702),l=n(4710),s=n.n(l),i=n(6609);const r=s()(a.Container).attrs((()=>({background:"transparent"}))).withConfig({displayName:"hover-container__HoverContainer",componentId:"sc-2xkx5d-0"})(["width:100%;position:relative;cursor:pointer;text-decoration:none;&:hover{background:",";& ","{display:flex;}}"],(({$hoverBackground:e,theme:t})=>t.palette[e].hover),i.F)},9475:(e,t,n)=>{n.d(t,{V:()=>g});var a=n(7559),l=n.n(a),s=n(4702),i=n(7196),r=n(4710),d=n.n(r);const o=({children:e,enabled:t,label:n,maxWidth:a})=>t?l().createElement(s.Tooltip,{label:n,disabled:!t,maxWidth:a},e):e;var c=n(7995),m=n(9518);const u=d()(s.Avatar).withConfig({displayName:"item-avatar__AvatarElement",componentId:"sc-y3xfvb-0"})(["width:2.625rem !important;height:2.625rem !important;min-width:2.625rem !important;min-height:2.625rem !important;p{font-size:0.875rem;}"]),g=({item:e,selected:t,selecting:n,toggle:r,folderId:d})=>{const g=(0,m.wL)(d).id===i.FOLDERS.SPAM?c.s.TO:c.s.FROM,[p,f]=(0,a.useMemo)((()=>{let t=e?.participants?.find((e=>e.type===g));return t||([t]=e.participants??[]),[t?.fullName||t?.name||t?.address||".",t?.address]}),[e.participants,g]),h=(0,a.useCallback)((e=>t=>{t.preventDefault(),r&&r(e)}),[r]),E=(0,i.t)("label.activate_selection_mode","Activate selection mode");return l().createElement(s.Container,{mainAlignment:"center",crossAlignment:"center","data-testid":"AvatarContainer",padding:{all:"small"}},l().createElement(o,{label:E,enabled:!n,maxWidth:"100%"},l().createElement(u,{selecting:n,selected:t,label:p,colorLabel:f,onClick:h(e.id),size:"large"})))}},3981:(e,t,n)=>{n.d(t,{N:()=>g});var a=n(7559),l=n.n(a),s=n(4702),i=n(6609),r=n(4713),d=n(7431),o=n(5299),c=n(2831),m=n(8673);const u=({action:e})=>{const t="label"in e?e.label:"",n="icon"in e?e.icon:"",i=(0,a.useCallback)((t=>{t?.stopPropagation(),e.onClick&&e.onClick(t)}),[e]);return l().createElement(s.Tooltip,{label:t},l().createElement(s.IconButton,{key:e.id,icon:n,onClick:i,size:"small"}))},g=({children:e,onClick:t,onDoubleClick:n,item:a,active:g,deselectAll:p})=>{const f=(0,c.K)((0,o.Iy)(a)?void 0:a,!0),[h,E]=(0,m._)({item:a,deselectAll:p,messageActionsForExtraWindow:f}),A=E.filter((e=>e.id!==d.PA.CREATE_APPOINTMENT.id)).map((e=>({...e,onClick:t=>{e.onClick&&e.onClick(t)},label:"label"in e?e.label:""})));return l().createElement(s.Dropdown,{contextMenu:!0,items:A,display:"block",style:{width:"100%",height:"4rem"},"data-testid":`secondary-actions-menu-${a.id}`},l().createElement(r.s,{"data-testid":`hover-container-${a.id}`,orientation:"horizontal",mainAlignment:"flex-start",crossAlignment:"unset",onClick:t,onDoubleClick:n,$hoverBackground:g?"highlight":"gray6"},e,l().createElement(i.F,{orientation:"horizontal",mainAlignment:"flex-end",crossAlignment:"center",background:g?"highlight":"gray6","data-testid":`primary-actions-bar-${a.id}`},h.map(((e,t)=>l().createElement(u,{key:e.id??t,action:e,item:a}))))))}},0:(e,t,n)=>{n.d(t,{X:()=>m});var a=n(7559),l=n.n(a),s=n(4702),i=n(7196),r=n(2509),d=n(7995),o=n(1347),c=n(9518);const m=({item:e,textValues:t,isSearchModule:n=!1})=>{const m=(0,i.useUserAccount)(),u=(0,c.wL)(e.parent).id,g=(0,a.useMemo)((()=>{const t=(0,r.filter)(e.participants,(e=>u===i.FOLDERS.INBOX?e.type===d.s.FROM:u!==i.FOLDERS.SENT||n?!n||e.type===d.s.FROM:e.type===d.s.TO)),a=(0,r.findIndex)(t,["address",m?.name]);if(a>=0){const e=t[0];t[0]=t[a],t[a]=e}return(0,r.reduce)((0,r.uniqBy)(t,(e=>e.address)),((e,t)=>(0,r.trimStart)(`${e}, ${(0,o.ef)(t,[m])}`,", ")),"")}),[m,u,n,e.participants]);return l().createElement(s.Row,{wrap:"nowrap",takeAvailableSpace:!0,mainAlignment:"flex-start"},!n&&u===i.FOLDERS.DRAFTS&&l().createElement(s.Padding,{right:"small"},l().createElement(s.Text,{color:"error"},(0,i.t)("label.draft_folder","[DRAFT]"))),l().createElement(s.Tooltip,{label:g,overflow:"break-word",maxWidth:"60vw"},l().createElement(s.Text,{"data-testid":"participants-name-label",color:t?.color,weight:t?.weight},g)))}},7216:(e,t,n)=>{n.d(t,{I:()=>i,i:()=>r});var a=n(7196),l=n(7431),s=n(790);function i(e,t){switch(`${e}${t}`){case`${l.A.to.value}${l.FU.ASCENDING}`:return(0,a.t)("sortingDropdown.tooltip.toAscending","Ascending order by To");case`${l.A.date.value}${l.FU.ASCENDING}`:return(0,a.t)("sortingDropdown.tooltip.dateAscending","Ascending order by Date");case`${l.A.from.value}${l.FU.ASCENDING}`:return(0,a.t)("sortingDropdown.tooltip.fromAscending","Ascending order by From");case`${l.A.size.value}${l.FU.ASCENDING}`:return(0,a.t)("sortingDropdown.tooltip.dateAscending","Ascending order by Size");case`${l.A.unread.value}${l.FU.ASCENDING}`:return(0,a.t)("sortingDropdown.tooltip.unreadAscending","Ascending order by Unread");case`${l.A.flagged.value}${l.FU.ASCENDING}`:return(0,a.t)("sortingDropdown.tooltip.flaggedAscending","Ascending order by Flagged");case`${l.A.subject.value}${l.FU.ASCENDING}`:return(0,a.t)("sortingDropdown.tooltip.subjectAscending","Ascending order by Subject");case`${l.A.important.value}${l.FU.ASCENDING}`:return(0,a.t)("sortingDropdown.tooltip.importantAscending","Ascending order by Important");case`${l.A.attachment.value}${l.FU.ASCENDING}`:return(0,a.t)("sortingDropdown.tooltip.attachmentAscending","Ascending order by Attachment");case`${l.A.to.value}${l.FU.DESCENDING}`:return(0,a.t)("sortingDropdown.tooltip.toDescending","Descending order by To");case`${l.A.date.value}${l.FU.DESCENDING}`:return(0,a.t)("sortingDropdown.tooltip.dateDescending","Descending order by Date");case`${l.A.from.value}${l.FU.DESCENDING}`:return(0,a.t)("sortingDropdown.tooltip.fromDescending","Descending order by From");case`${l.A.size.value}${l.FU.DESCENDING}`:return(0,a.t)("sortingDropdown.tooltip.sizeDescending","Descending order by Size");case`${l.A.unread.value}${l.FU.DESCENDING}`:return(0,a.t)("sortingDropdown.tooltip.unreadDescending","Descending order by Unread");case`${l.A.flagged.value}${l.FU.DESCENDING}`:return(0,a.t)("sortingDropdown.tooltip.flaggedDescending","Descending order by Flagged");case`${l.A.subject.value}${l.FU.DESCENDING}`:return(0,a.t)("sortingDropdown.tooltip.subjectDescending","Descending order by Subject");case`${l.A.important.value}${l.FU.DESCENDING}`:return(0,a.t)("sortingDropdown.tooltip.importantDescending","Descending order by Important");case`${l.A.attachment.value}${l.FU.DESCENDING}`:return(0,a.t)("sortingDropdown.tooltip.attachmentDescending","Descending order by Attachment");default:return""}}const r=(e,t,n=!1)=>n?"":e?.absFolderPath?.split("/")?.map(((n,a)=>(0,s.k0)({folderId:1===a?t?.id:e?.id,folderName:n}))).join(" / ")??""},8773:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(7559),l=n.n(a),s=n(4702),i=n(2509),r=n(4710),d=n.n(r);const o=(0,r.keyframes)(["0%{opacity:0}100%{opacity:1}"]),c=d()(s.Container).withConfig({displayName:"shimmer-list__Wrapper",componentId:"sc-9g3jnb-0"})(["opacity:0;animation-name:",";animation-timing-function:ease-in;animation-fill-mode:forwards;overflow:hidden;"],o),m=({count:e=0,delay:t=0,transitionDuration:n=800})=>{const a=e>33?33:e;return l().createElement(c,{height:"fill",style:{animationDelay:`${t}ms`,animationDuration:`${n}ms`}},(0,i.times)(a,(e=>l().createElement(s.Shimmer.ListItem,{type:1,key:e}))))}}}]);
//# sourceMappingURL=778.6f77244a.chunk.js.map